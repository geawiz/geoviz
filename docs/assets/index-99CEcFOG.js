(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))d(y);new MutationObserver(y=>{for(const C of y)if(C.type==="childList")for(const I of C.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&d(I)}).observe(document,{childList:!0,subtree:!0});function u(y){const C={};return y.integrity&&(C.integrity=y.integrity),y.referrerPolicy&&(C.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?C.credentials="include":y.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function d(y){if(y.ep)return;y.ep=!0;const C=u(y);fetch(y.href,C)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function bg(i){const s=Object.create(null);for(const u of i.split(","))s[u]=1;return u=>u in s}const Qr={},rh=[],wo=()=>{},Ab=()=>!1,Qd=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),xg=i=>i.startsWith("onUpdate:"),gn=Object.assign,wg=(i,s)=>{const u=i.indexOf(s);u>-1&&i.splice(u,1)},db=Object.prototype.hasOwnProperty,mr=(i,s)=>db.call(i,s),Mi=Array.isArray,nh=i=>Sd(i)==="[object Map]",y0=i=>Sd(i)==="[object Set]",Ri=i=>typeof i=="function",tn=i=>typeof i=="string",cc=i=>typeof i=="symbol",Or=i=>i!==null&&typeof i=="object",_0=i=>(Or(i)||Ri(i))&&Ri(i.then)&&Ri(i.catch),I0=Object.prototype.toString,Sd=i=>I0.call(i),fb=i=>Sd(i).slice(8,-1),v0=i=>Sd(i)==="[object Object]",Cg=i=>tn(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Zh=bg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dd=i=>{const s=Object.create(null);return u=>s[u]||(s[u]=i(u))},gb=/-(\w)/g,Da=Dd(i=>i.replace(gb,(s,u)=>u?u.toUpperCase():"")),pb=/\B([A-Z])/g,hu=Dd(i=>i.replace(pb,"-$1").toLowerCase()),dl=Dd(i=>i.charAt(0).toUpperCase()+i.slice(1)),Pf=Dd(i=>i?`on${dl(i)}`:""),sc=(i,s)=>!Object.is(i,s),Rf=(i,...s)=>{for(let u=0;u<i.length;u++)i[u](...s)},b0=(i,s,u,d=!1)=>{Object.defineProperty(i,s,{configurable:!0,enumerable:!1,writable:d,value:u})},mb=i=>{const s=parseFloat(i);return isNaN(s)?i:s},yb=i=>{const s=tn(i)?Number(i):NaN;return isNaN(s)?i:s};let jm;const kd=()=>jm||(jm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Md(i){if(Mi(i)){const s={};for(let u=0;u<i.length;u++){const d=i[u],y=tn(d)?bb(d):Md(d);if(y)for(const C in y)s[C]=y[C]}return s}else if(tn(i)||Or(i))return i}const _b=/;(?![^(]*\))/g,Ib=/:([^]+)/,vb=/\/\*[^]*?\*\//g;function bb(i){const s={};return i.replace(vb,"").split(_b).forEach(u=>{if(u){const d=u.split(Ib);d.length>1&&(s[d[0].trim()]=d[1].trim())}}),s}function Bg(i){let s="";if(tn(i))s=i;else if(Mi(i))for(let u=0;u<i.length;u++){const d=Bg(i[u]);d&&(s+=d+" ")}else if(Or(i))for(const u in i)i[u]&&(s+=u+" ");return s.trim()}const xb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wb=bg(xb);function x0(i){return!!i||i===""}const w0=i=>!!(i&&i.__v_isRef===!0),oh=i=>tn(i)?i:i==null?"":Mi(i)||Or(i)&&(i.toString===I0||!Ri(i.toString))?w0(i)?oh(i.value):JSON.stringify(i,C0,2):String(i),C0=(i,s)=>w0(s)?C0(i,s.value):nh(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((u,[d,y],C)=>(u[Lf(d,C)+" =>"]=y,u),{})}:y0(s)?{[`Set(${s.size})`]:[...s.values()].map(u=>Lf(u))}:cc(s)?Lf(s):Or(s)&&!Mi(s)&&!v0(s)?String(s):s,Lf=(i,s="")=>{var u;return cc(i)?`Symbol(${(u=i.description)!=null?u:s})`:i};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ha;class B0{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ha,!s&&ha&&(this.index=(ha.scopes||(ha.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,u;if(this.scopes)for(s=0,u=this.scopes.length;s<u;s++)this.scopes[s].pause();for(s=0,u=this.effects.length;s<u;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,u;if(this.scopes)for(s=0,u=this.scopes.length;s<u;s++)this.scopes[s].resume();for(s=0,u=this.effects.length;s<u;s++)this.effects[s].resume()}}run(s){if(this._active){const u=ha;try{return ha=this,s()}finally{ha=u}}}on(){ha=this}off(){ha=this.parent}stop(s){if(this._active){this._active=!1;let u,d;for(u=0,d=this.effects.length;u<d;u++)this.effects[u].stop();for(this.effects.length=0,u=0,d=this.cleanups.length;u<d;u++)this.cleanups[u]();if(this.cleanups.length=0,this.scopes){for(u=0,d=this.scopes.length;u<d;u++)this.scopes[u].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const y=this.parent.scopes.pop();y&&y!==this&&(this.parent.scopes[this.index]=y,y.index=this.index)}this.parent=void 0}}}function Cb(i){return new B0(i)}function Bb(){return ha}function E0(i,s=!1){ha&&ha.cleanups.push(i)}let Pr;const Ff=new WeakSet;class Q0{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ha&&ha.active&&ha.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ff.has(this)&&(Ff.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||D0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jm(this),k0(this);const s=Pr,u=Os;Pr=this,Os=!0;try{return this.fn()}finally{M0(this),Pr=s,Os=u,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)Sg(s);this.deps=this.depsTail=void 0,Jm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ff.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zf(this)&&this.run()}get dirty(){return Zf(this)}}let S0=0,Wh,Xh;function D0(i,s=!1){if(i.flags|=8,s){i.next=Xh,Xh=i;return}i.next=Wh,Wh=i}function Eg(){S0++}function Qg(){if(--S0>0)return;if(Xh){let s=Xh;for(Xh=void 0;s;){const u=s.next;s.next=void 0,s.flags&=-9,s=u}}let i;for(;Wh;){let s=Wh;for(Wh=void 0;s;){const u=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(d){i||(i=d)}s=u}}if(i)throw i}function k0(i){for(let s=i.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function M0(i){let s,u=i.depsTail,d=u;for(;d;){const y=d.prevDep;d.version===-1?(d===u&&(u=y),Sg(d),Eb(d)):s=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0,d=y}i.deps=s,i.depsTail=u}function Zf(i){for(let s=i.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(T0(s.dep.computed)||s.dep.version!==s.version))return!0;return!!i._dirty}function T0(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===lA))return;i.globalVersion=lA;const s=i.dep;if(i.flags|=2,s.version>0&&!i.isSSR&&i.deps&&!Zf(i)){i.flags&=-3;return}const u=Pr,d=Os;Pr=i,Os=!0;try{k0(i);const y=i.fn(i._value);(s.version===0||sc(y,i._value))&&(i._value=y,s.version++)}catch(y){throw s.version++,y}finally{Pr=u,Os=d,M0(i),i.flags&=-3}}function Sg(i,s=!1){const{dep:u,prevSub:d,nextSub:y}=i;if(d&&(d.nextSub=y,i.prevSub=void 0),y&&(y.prevSub=d,i.nextSub=void 0),u.subs===i&&(u.subs=d,!d&&u.computed)){u.computed.flags&=-5;for(let C=u.computed.deps;C;C=C.nextDep)Sg(C,!0)}!s&&!--u.sc&&u.map&&u.map.delete(u.key)}function Eb(i){const{prevDep:s,nextDep:u}=i;s&&(s.nextDep=u,i.prevDep=void 0),u&&(u.prevDep=s,i.nextDep=void 0)}let Os=!0;const P0=[];function uc(){P0.push(Os),Os=!1}function hc(){const i=P0.pop();Os=i===void 0?!0:i}function Jm(i){const{cleanup:s}=i;if(i.cleanup=void 0,s){const u=Pr;Pr=void 0;try{s()}finally{Pr=u}}}let lA=0;class Qb{constructor(s,u){this.sub=s,this.dep=u,this.version=u.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dg{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(s){if(!Pr||!Os||Pr===this.computed)return;let u=this.activeLink;if(u===void 0||u.sub!==Pr)u=this.activeLink=new Qb(Pr,this),Pr.deps?(u.prevDep=Pr.depsTail,Pr.depsTail.nextDep=u,Pr.depsTail=u):Pr.deps=Pr.depsTail=u,R0(u);else if(u.version===-1&&(u.version=this.version,u.nextDep)){const d=u.nextDep;d.prevDep=u.prevDep,u.prevDep&&(u.prevDep.nextDep=d),u.prevDep=Pr.depsTail,u.nextDep=void 0,Pr.depsTail.nextDep=u,Pr.depsTail=u,Pr.deps===u&&(Pr.deps=d)}return u}trigger(s){this.version++,lA++,this.notify(s)}notify(s){Eg();try{for(let u=this.subs;u;u=u.prevSub)u.sub.notify()&&u.sub.dep.notify()}finally{Qg()}}}function R0(i){if(i.dep.sc++,i.sub.flags&4){const s=i.dep.computed;if(s&&!i.dep.subs){s.flags|=20;for(let d=s.deps;d;d=d.nextDep)R0(d)}const u=i.dep.subs;u!==i&&(i.prevSub=u,u&&(u.nextSub=i)),i.dep.subs=i}}const ud=new WeakMap,su=Symbol(""),Wf=Symbol(""),cA=Symbol("");function Zn(i,s,u){if(Os&&Pr){let d=ud.get(i);d||ud.set(i,d=new Map);let y=d.get(u);y||(d.set(u,y=new Dg),y.map=d,y.key=u),y.track()}}function ul(i,s,u,d,y,C){const I=ud.get(i);if(!I){lA++;return}const l=q=>{q&&q.trigger()};if(Eg(),s==="clear")I.forEach(l);else{const q=Mi(i),Y=q&&Cg(u);if(q&&u==="length"){const O=Number(d);I.forEach((H,V)=>{(V==="length"||V===cA||!cc(V)&&V>=O)&&l(H)})}else switch((u!==void 0||I.has(void 0))&&l(I.get(u)),Y&&l(I.get(cA)),s){case"add":q?Y&&l(I.get("length")):(l(I.get(su)),nh(i)&&l(I.get(Wf)));break;case"delete":q||(l(I.get(su)),nh(i)&&l(I.get(Wf)));break;case"set":nh(i)&&l(I.get(su));break}}Qg()}function Sb(i,s){const u=ud.get(i);return u&&u.get(s)}function $u(i){const s=ir(i);return s===i?s:(Zn(s,"iterate",cA),Vs(i)?s:s.map(Aa))}function kg(i){return Zn(i=ir(i),"iterate",cA),i}const Db={__proto__:null,[Symbol.iterator](){return zf(this,Symbol.iterator,Aa)},concat(...i){return $u(this).concat(...i.map(s=>Mi(s)?$u(s):s))},entries(){return zf(this,"entries",i=>(i[1]=Aa(i[1]),i))},every(i,s){return ll(this,"every",i,s,void 0,arguments)},filter(i,s){return ll(this,"filter",i,s,u=>u.map(Aa),arguments)},find(i,s){return ll(this,"find",i,s,Aa,arguments)},findIndex(i,s){return ll(this,"findIndex",i,s,void 0,arguments)},findLast(i,s){return ll(this,"findLast",i,s,Aa,arguments)},findLastIndex(i,s){return ll(this,"findLastIndex",i,s,void 0,arguments)},forEach(i,s){return ll(this,"forEach",i,s,void 0,arguments)},includes(...i){return Gf(this,"includes",i)},indexOf(...i){return Gf(this,"indexOf",i)},join(i){return $u(this).join(i)},lastIndexOf(...i){return Gf(this,"lastIndexOf",i)},map(i,s){return ll(this,"map",i,s,void 0,arguments)},pop(){return jh(this,"pop")},push(...i){return jh(this,"push",i)},reduce(i,...s){return Ym(this,"reduce",i,s)},reduceRight(i,...s){return Ym(this,"reduceRight",i,s)},shift(){return jh(this,"shift")},some(i,s){return ll(this,"some",i,s,void 0,arguments)},splice(...i){return jh(this,"splice",i)},toReversed(){return $u(this).toReversed()},toSorted(i){return $u(this).toSorted(i)},toSpliced(...i){return $u(this).toSpliced(...i)},unshift(...i){return jh(this,"unshift",i)},values(){return zf(this,"values",Aa)}};function zf(i,s,u){const d=kg(i),y=d[s]();return d!==i&&!Vs(i)&&(y._next=y.next,y.next=()=>{const C=y._next();return C.value&&(C.value=u(C.value)),C}),y}const kb=Array.prototype;function ll(i,s,u,d,y,C){const I=kg(i),l=I!==i&&!Vs(i),q=I[s];if(q!==kb[s]){const H=q.apply(i,C);return l?Aa(H):H}let Y=u;I!==i&&(l?Y=function(H,V){return u.call(this,Aa(H),V,i)}:u.length>2&&(Y=function(H,V){return u.call(this,H,V,i)}));const O=q.call(I,Y,d);return l&&y?y(O):O}function Ym(i,s,u,d){const y=kg(i);let C=u;return y!==i&&(Vs(i)?u.length>3&&(C=function(I,l,q){return u.call(this,I,l,q,i)}):C=function(I,l,q){return u.call(this,I,Aa(l),q,i)}),y[s](C,...d)}function Gf(i,s,u){const d=ir(i);Zn(d,"iterate",cA);const y=d[s](...u);return(y===-1||y===!1)&&Pg(u[0])?(u[0]=ir(u[0]),d[s](...u)):y}function jh(i,s,u=[]){uc(),Eg();const d=ir(i)[s].apply(i,u);return Qg(),hc(),d}const Mb=bg("__proto__,__v_isRef,__isVue"),L0=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(cc));function Tb(i){cc(i)||(i=String(i));const s=ir(this);return Zn(s,"has",i),s.hasOwnProperty(i)}class F0{constructor(s=!1,u=!1){this._isReadonly=s,this._isShallow=u}get(s,u,d){if(u==="__v_skip")return s.__v_skip;const y=this._isReadonly,C=this._isShallow;if(u==="__v_isReactive")return!y;if(u==="__v_isReadonly")return y;if(u==="__v_isShallow")return C;if(u==="__v_raw")return d===(y?C?Vb:U0:C?N0:G0).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(d)?s:void 0;const I=Mi(s);if(!y){let q;if(I&&(q=Db[u]))return q;if(u==="hasOwnProperty")return Tb}const l=Reflect.get(s,u,yr(s)?s:d);return(cc(u)?L0.has(u):Mb(u))||(y||Zn(s,"get",u),C)?l:yr(l)?I&&Cg(u)?l:l.value:Or(l)?y?Td(l):Gn(l):l}}class z0 extends F0{constructor(s=!1){super(!1,s)}set(s,u,d,y){let C=s[u];if(!this._isShallow){const q=cu(C);if(!Vs(d)&&!cu(d)&&(C=ir(C),d=ir(d)),!Mi(s)&&yr(C)&&!yr(d))return q?!1:(C.value=d,!0)}const I=Mi(s)&&Cg(u)?Number(u)<s.length:mr(s,u),l=Reflect.set(s,u,d,yr(s)?s:y);return s===ir(y)&&(I?sc(d,C)&&ul(s,"set",u,d):ul(s,"add",u,d)),l}deleteProperty(s,u){const d=mr(s,u);s[u];const y=Reflect.deleteProperty(s,u);return y&&d&&ul(s,"delete",u,void 0),y}has(s,u){const d=Reflect.has(s,u);return(!cc(u)||!L0.has(u))&&Zn(s,"has",u),d}ownKeys(s){return Zn(s,"iterate",Mi(s)?"length":su),Reflect.ownKeys(s)}}class Pb extends F0{constructor(s=!1){super(!0,s)}set(s,u){return!0}deleteProperty(s,u){return!0}}const Rb=new z0,Lb=new Pb,Fb=new z0(!0);const Xf=i=>i,ZA=i=>Reflect.getPrototypeOf(i);function zb(i,s,u){return function(...d){const y=this.__v_raw,C=ir(y),I=nh(C),l=i==="entries"||i===Symbol.iterator&&I,q=i==="keys"&&I,Y=y[i](...d),O=u?Xf:s?tg:Aa;return!s&&Zn(C,"iterate",q?Wf:su),{next(){const{value:H,done:V}=Y.next();return V?{value:H,done:V}:{value:l?[O(H[0]),O(H[1])]:O(H),done:V}},[Symbol.iterator](){return this}}}}function WA(i){return function(...s){return i==="delete"?!1:i==="clear"?void 0:this}}function Gb(i,s){const u={get(y){const C=this.__v_raw,I=ir(C),l=ir(y);i||(sc(y,l)&&Zn(I,"get",y),Zn(I,"get",l));const{has:q}=ZA(I),Y=s?Xf:i?tg:Aa;if(q.call(I,y))return Y(C.get(y));if(q.call(I,l))return Y(C.get(l));C!==I&&C.get(y)},get size(){const y=this.__v_raw;return!i&&Zn(ir(y),"iterate",su),Reflect.get(y,"size",y)},has(y){const C=this.__v_raw,I=ir(C),l=ir(y);return i||(sc(y,l)&&Zn(I,"has",y),Zn(I,"has",l)),y===l?C.has(y):C.has(y)||C.has(l)},forEach(y,C){const I=this,l=I.__v_raw,q=ir(l),Y=s?Xf:i?tg:Aa;return!i&&Zn(q,"iterate",su),l.forEach((O,H)=>y.call(C,Y(O),Y(H),I))}};return gn(u,i?{add:WA("add"),set:WA("set"),delete:WA("delete"),clear:WA("clear")}:{add(y){!s&&!Vs(y)&&!cu(y)&&(y=ir(y));const C=ir(this);return ZA(C).has.call(C,y)||(C.add(y),ul(C,"add",y,y)),this},set(y,C){!s&&!Vs(C)&&!cu(C)&&(C=ir(C));const I=ir(this),{has:l,get:q}=ZA(I);let Y=l.call(I,y);Y||(y=ir(y),Y=l.call(I,y));const O=q.call(I,y);return I.set(y,C),Y?sc(C,O)&&ul(I,"set",y,C):ul(I,"add",y,C),this},delete(y){const C=ir(this),{has:I,get:l}=ZA(C);let q=I.call(C,y);q||(y=ir(y),q=I.call(C,y)),l&&l.call(C,y);const Y=C.delete(y);return q&&ul(C,"delete",y,void 0),Y},clear(){const y=ir(this),C=y.size!==0,I=y.clear();return C&&ul(y,"clear",void 0,void 0),I}}),["keys","values","entries",Symbol.iterator].forEach(y=>{u[y]=zb(y,i,s)}),u}function Mg(i,s){const u=Gb(i,s);return(d,y,C)=>y==="__v_isReactive"?!i:y==="__v_isReadonly"?i:y==="__v_raw"?d:Reflect.get(mr(u,y)&&y in d?u:d,y,C)}const Nb={get:Mg(!1,!1)},Ub={get:Mg(!1,!0)},Ob={get:Mg(!0,!1)};const G0=new WeakMap,N0=new WeakMap,U0=new WeakMap,Vb=new WeakMap;function qb(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hb(i){return i.__v_skip||!Object.isExtensible(i)?0:qb(fb(i))}function Gn(i){return cu(i)?i:Tg(i,!1,Rb,Nb,G0)}function jb(i){return Tg(i,!1,Fb,Ub,N0)}function Td(i){return Tg(i,!0,Lb,Ob,U0)}function Tg(i,s,u,d,y){if(!Or(i)||i.__v_raw&&!(s&&i.__v_isReactive))return i;const C=y.get(i);if(C)return C;const I=Hb(i);if(I===0)return i;const l=new Proxy(i,I===2?d:u);return y.set(i,l),l}function eA(i){return cu(i)?eA(i.__v_raw):!!(i&&i.__v_isReactive)}function cu(i){return!!(i&&i.__v_isReadonly)}function Vs(i){return!!(i&&i.__v_isShallow)}function Pg(i){return i?!!i.__v_raw:!1}function ir(i){const s=i&&i.__v_raw;return s?ir(s):i}function eg(i){return!mr(i,"__v_skip")&&Object.isExtensible(i)&&b0(i,"__v_skip",!0),i}const Aa=i=>Or(i)?Gn(i):i,tg=i=>Or(i)?Td(i):i;function yr(i){return i?i.__v_isRef===!0:!1}function Br(i){return O0(i,!1)}function sr(i){return O0(i,!0)}function O0(i,s){return yr(i)?i:new Jb(i,s)}class Jb{constructor(s,u){this.dep=new Dg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=u?s:ir(s),this._value=u?s:Aa(s),this.__v_isShallow=u}get value(){return this.dep.track(),this._value}set value(s){const u=this._rawValue,d=this.__v_isShallow||Vs(s)||cu(s);s=d?s:ir(s),sc(s,u)&&(this._rawValue=s,this._value=d?s:Aa(s),this.dep.trigger())}}function ps(i){return yr(i)?i.value:i}const Yb={get:(i,s,u)=>s==="__v_raw"?i:ps(Reflect.get(i,s,u)),set:(i,s,u,d)=>{const y=i[s];return yr(y)&&!yr(u)?(y.value=u,!0):Reflect.set(i,s,u,d)}};function V0(i){return eA(i)?i:new Proxy(i,Yb)}function Rg(i){const s=Mi(i)?new Array(i.length):{};for(const u in i)s[u]=q0(i,u);return s}class Kb{constructor(s,u,d){this._object=s,this._key=u,this._defaultValue=d,this.__v_isRef=!0,this._value=void 0}get value(){const s=this._object[this._key];return this._value=s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}get dep(){return Sb(ir(this._object),this._key)}}class $b{constructor(s){this._getter=s,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function wr(i,s,u){return yr(i)?i:Ri(i)?new $b(i):Or(i)&&arguments.length>1?q0(i,s,u):Br(i)}function q0(i,s,u){const d=i[s];return yr(d)?d:new Kb(i,s,u)}class Zb{constructor(s,u,d){this.fn=s,this.setter=u,this._value=void 0,this.dep=new Dg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=lA-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!u,this.isSSR=d}notify(){if(this.flags|=16,!(this.flags&8)&&Pr!==this)return D0(this,!0),!0}get value(){const s=this.dep.track();return T0(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function Wb(i,s,u=!1){let d,y;return Ri(i)?d=i:(d=i.get,y=i.set),new Zb(d,y,u)}const XA={},hd=new WeakMap;let nu;function Xb(i,s=!1,u=nu){if(u){let d=hd.get(u);d||hd.set(u,d=[]),d.push(i)}}function ex(i,s,u=Qr){const{immediate:d,deep:y,once:C,scheduler:I,augmentJob:l,call:q}=u,Y=ft=>y?ft:Vs(ft)||y===!1||y===0?hl(ft,1):hl(ft);let O,H,V,Ae,Ve=!1,Be=!1;if(yr(i)?(H=()=>i.value,Ve=Vs(i)):eA(i)?(H=()=>Y(i),Ve=!0):Mi(i)?(Be=!0,Ve=i.some(ft=>eA(ft)||Vs(ft)),H=()=>i.map(ft=>{if(yr(ft))return ft.value;if(eA(ft))return Y(ft);if(Ri(ft))return q?q(ft,2):ft()})):Ri(i)?s?H=q?()=>q(i,2):i:H=()=>{if(V){uc();try{V()}finally{hc()}}const ft=nu;nu=O;try{return q?q(i,3,[Ae]):i(Ae)}finally{nu=ft}}:H=wo,s&&y){const ft=H,Ft=y===!0?1/0:y;H=()=>hl(ft(),Ft)}const ot=Bb(),pt=()=>{O.stop(),ot&&ot.active&&wg(ot.effects,O)};if(C&&s){const ft=s;s=(...Ft)=>{ft(...Ft),pt()}}let _t=Be?new Array(i.length).fill(XA):XA;const ut=ft=>{if(!(!(O.flags&1)||!O.dirty&&!ft))if(s){const Ft=O.run();if(y||Ve||(Be?Ft.some((Ut,zt)=>sc(Ut,_t[zt])):sc(Ft,_t))){V&&V();const Ut=nu;nu=O;try{const zt=[Ft,_t===XA?void 0:Be&&_t[0]===XA?[]:_t,Ae];q?q(s,3,zt):s(...zt),_t=Ft}finally{nu=Ut}}}else O.run()};return l&&l(ut),O=new Q0(H),O.scheduler=I?()=>I(ut,!1):ut,Ae=ft=>Xb(ft,!1,O),V=O.onStop=()=>{const ft=hd.get(O);if(ft){if(q)q(ft,4);else for(const Ft of ft)Ft();hd.delete(O)}},s?d?ut(!0):_t=O.run():I?I(ut.bind(null,!0),!0):O.run(),pt.pause=O.pause.bind(O),pt.resume=O.resume.bind(O),pt.stop=pt,pt}function hl(i,s=1/0,u){if(s<=0||!Or(i)||i.__v_skip||(u=u||new Set,u.has(i)))return i;if(u.add(i),s--,yr(i))hl(i.value,s,u);else if(Mi(i))for(let d=0;d<i.length;d++)hl(i[d],s,u);else if(y0(i)||nh(i))i.forEach(d=>{hl(d,s,u)});else if(v0(i)){for(const d in i)hl(i[d],s,u);for(const d of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,d)&&hl(i[d],s,u)}return i}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vA(i,s,u,d){try{return d?i(...d):i()}catch(y){Pd(y,s,u)}}function Hs(i,s,u,d){if(Ri(i)){const y=vA(i,s,u,d);return y&&_0(y)&&y.catch(C=>{Pd(C,s,u)}),y}if(Mi(i)){const y=[];for(let C=0;C<i.length;C++)y.push(Hs(i[C],s,u,d));return y}}function Pd(i,s,u,d=!0){const y=s?s.vnode:null,{errorHandler:C,throwUnhandledErrorInProduction:I}=s&&s.appContext.config||Qr;if(s){let l=s.parent;const q=s.proxy,Y=`https://vuejs.org/error-reference/#runtime-${u}`;for(;l;){const O=l.ec;if(O){for(let H=0;H<O.length;H++)if(O[H](i,q,Y)===!1)return}l=l.parent}if(C){uc(),vA(C,null,10,[i,q,Y]),hc();return}}tx(i,u,y,d,I)}function tx(i,s,u,d=!0,y=!1){if(y)throw i;console.error(i)}const da=[];let vo=-1;const ah=[];let rc=null,Xu=0;const H0=Promise.resolve();let Ad=null;function fl(i){const s=Ad||H0;return i?s.then(this?i.bind(this):i):s}function ix(i){let s=vo+1,u=da.length;for(;s<u;){const d=s+u>>>1,y=da[d],C=uA(y);C<i||C===i&&y.flags&2?s=d+1:u=d}return s}function Lg(i){if(!(i.flags&1)){const s=uA(i),u=da[da.length-1];!u||!(i.flags&2)&&s>=uA(u)?da.push(i):da.splice(ix(s),0,i),i.flags|=1,j0()}}function j0(){Ad||(Ad=H0.then(Y0))}function rx(i){Mi(i)?ah.push(...i):rc&&i.id===-1?rc.splice(Xu+1,0,i):i.flags&1||(ah.push(i),i.flags|=1),j0()}function Km(i,s,u=vo+1){for(;u<da.length;u++){const d=da[u];if(d&&d.flags&2){if(i&&d.id!==i.uid)continue;da.splice(u,1),u--,d.flags&4&&(d.flags&=-2),d(),d.flags&4||(d.flags&=-2)}}}function J0(i){if(ah.length){const s=[...new Set(ah)].sort((u,d)=>uA(u)-uA(d));if(ah.length=0,rc){rc.push(...s);return}for(rc=s,Xu=0;Xu<rc.length;Xu++){const u=rc[Xu];u.flags&4&&(u.flags&=-2),u.flags&8||u(),u.flags&=-2}rc=null,Xu=0}}const uA=i=>i.id==null?i.flags&2?-1:1/0:i.id;function Y0(i){try{for(vo=0;vo<da.length;vo++){const s=da[vo];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),vA(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;vo<da.length;vo++){const s=da[vo];s&&(s.flags&=-2)}vo=-1,da.length=0,J0(),Ad=null,(da.length||ah.length)&&Y0()}}let Sa=null,K0=null;function dd(i){const s=Sa;return Sa=i,K0=i&&i.type.__scopeId||null,s}function en(i,s=Sa,u){if(!s||i._n)return i;const d=(...y)=>{d._d&&cy(-1);const C=dd(s);let I;try{I=i(...y)}finally{dd(C),d._d&&cy(1)}return I};return d._n=!0,d._c=!0,d._d=!0,d}function hA(i,s){if(Sa===null)return i;const u=zd(Sa),d=i.dirs||(i.dirs=[]);for(let y=0;y<s.length;y++){let[C,I,l,q=Qr]=s[y];C&&(Ri(C)&&(C={mounted:C,updated:C}),C.deep&&hl(I),d.push({dir:C,instance:u,value:I,oldValue:void 0,arg:l,modifiers:q}))}return i}function eu(i,s,u,d){const y=i.dirs,C=s&&s.dirs;for(let I=0;I<y.length;I++){const l=y[I];C&&(l.oldValue=C[I].value);let q=l.dir[d];q&&(uc(),Hs(q,u,8,[i.el,l,i,s]),hc())}}const $0=Symbol("_vte"),Z0=i=>i.__isTeleport,tA=i=>i&&(i.disabled||i.disabled===""),$m=i=>i&&(i.defer||i.defer===""),Zm=i=>typeof SVGElement<"u"&&i instanceof SVGElement,Wm=i=>typeof MathMLElement=="function"&&i instanceof MathMLElement,ig=(i,s)=>{const u=i&&i.to;return tn(u)?s?s(u):null:u},W0={name:"Teleport",__isTeleport:!0,process(i,s,u,d,y,C,I,l,q,Y){const{mc:O,pc:H,pbc:V,o:{insert:Ae,querySelector:Ve,createText:Be,createComment:ot}}=Y,pt=tA(s.props);let{shapeFlag:_t,children:ut,dynamicChildren:ft}=s;if(i==null){const Ft=s.el=Be(""),Ut=s.anchor=Be("");Ae(Ft,u,d),Ae(Ut,u,d);const zt=(Bt,Gt)=>{_t&16&&(y&&y.isCE&&(y.ce._teleportTarget=Bt),O(ut,Bt,Gt,y,C,I,l,q))},Zt=()=>{const Bt=s.target=ig(s.props,Ve),Gt=X0(Bt,s,Be,Ae);Bt&&(I!=="svg"&&Zm(Bt)?I="svg":I!=="mathml"&&Wm(Bt)&&(I="mathml"),pt||(zt(Bt,Gt),sd(s,!1)))};pt&&(zt(u,Ut),sd(s,!0)),$m(s.props)?ua(()=>{Zt(),s.el.__isMounted=!0},C):Zt()}else{if($m(s.props)&&!i.el.__isMounted){ua(()=>{W0.process(i,s,u,d,y,C,I,l,q,Y),delete i.el.__isMounted},C);return}s.el=i.el,s.targetStart=i.targetStart;const Ft=s.anchor=i.anchor,Ut=s.target=i.target,zt=s.targetAnchor=i.targetAnchor,Zt=tA(i.props),Bt=Zt?u:Ut,Gt=Zt?Ft:zt;if(I==="svg"||Zm(Ut)?I="svg":(I==="mathml"||Wm(Ut))&&(I="mathml"),ft?(V(i.dynamicChildren,ft,Bt,y,C,I,l),Og(i,s,!0)):q||H(i,s,Bt,Gt,y,C,I,l,!1),pt)Zt?s.props&&i.props&&s.props.to!==i.props.to&&(s.props.to=i.props.to):ed(s,u,Ft,Y,1);else if((s.props&&s.props.to)!==(i.props&&i.props.to)){const mt=s.target=ig(s.props,Ve);mt&&ed(s,mt,null,Y,0)}else Zt&&ed(s,Ut,zt,Y,1);sd(s,pt)}},remove(i,s,u,{um:d,o:{remove:y}},C){const{shapeFlag:I,children:l,anchor:q,targetStart:Y,targetAnchor:O,target:H,props:V}=i;if(H&&(y(Y),y(O)),C&&y(q),I&16){const Ae=C||!tA(V);for(let Ve=0;Ve<l.length;Ve++){const Be=l[Ve];d(Be,s,u,Ae,!!Be.dynamicChildren)}}},move:ed,hydrate:nx};function ed(i,s,u,{o:{insert:d},m:y},C=2){C===0&&d(i.targetAnchor,s,u);const{el:I,anchor:l,shapeFlag:q,children:Y,props:O}=i,H=C===2;if(H&&d(I,s,u),(!H||tA(O))&&q&16)for(let V=0;V<Y.length;V++)y(Y[V],s,u,2);H&&d(l,s,u)}function nx(i,s,u,d,y,C,{o:{nextSibling:I,parentNode:l,querySelector:q,insert:Y,createText:O}},H){const V=s.target=ig(s.props,q);if(V){const Ae=tA(s.props),Ve=V._lpa||V.firstChild;if(s.shapeFlag&16)if(Ae)s.anchor=H(I(i),s,l(i),u,d,y,C),s.targetStart=Ve,s.targetAnchor=Ve&&I(Ve);else{s.anchor=I(i);let Be=Ve;for(;Be;){if(Be&&Be.nodeType===8){if(Be.data==="teleport start anchor")s.targetStart=Be;else if(Be.data==="teleport anchor"){s.targetAnchor=Be,V._lpa=s.targetAnchor&&I(s.targetAnchor);break}}Be=I(Be)}s.targetAnchor||X0(V,s,O,Y),H(Ve&&I(Ve),s,V,u,d,y,C)}sd(s,Ae)}return s.anchor&&I(s.anchor)}const ax=W0;function sd(i,s){const u=i.ctx;if(u&&u.ut){let d,y;for(s?(d=i.el,y=i.anchor):(d=i.targetStart,y=i.targetAnchor);d&&d!==y;)d.nodeType===1&&d.setAttribute("data-v-owner",u.uid),d=d.nextSibling;u.ut()}}function X0(i,s,u,d){const y=s.targetStart=u(""),C=s.targetAnchor=u("");return y[$0]=C,i&&(d(y,i),d(C,i)),C}const nc=Symbol("_leaveCb"),td=Symbol("_enterCb");function e_(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _s(()=>{i.isMounted=!0}),pn(()=>{i.isUnmounting=!0}),i}const fs=[Function,Array],t_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fs,onEnter:fs,onAfterEnter:fs,onEnterCancelled:fs,onBeforeLeave:fs,onLeave:fs,onAfterLeave:fs,onLeaveCancelled:fs,onBeforeAppear:fs,onAppear:fs,onAfterAppear:fs,onAppearCancelled:fs},i_=i=>{const s=i.subTree;return s.component?i_(s.component):s},sx={name:"BaseTransition",props:t_,setup(i,{slots:s}){const u=xA(),d=e_();return()=>{const y=s.default&&Fg(s.default(),!0);if(!y||!y.length)return;const C=r_(y),I=ir(i),{mode:l}=I;if(d.isLeaving)return Nf(C);const q=Xm(C);if(!q)return Nf(C);let Y=AA(q,I,d,u,H=>Y=H);q.type!==Qa&&uu(q,Y);let O=u.subTree&&Xm(u.subTree);if(O&&O.type!==Qa&&!au(q,O)&&i_(u).type!==Qa){let H=AA(O,I,d,u);if(uu(O,H),l==="out-in"&&q.type!==Qa)return d.isLeaving=!0,H.afterLeave=()=>{d.isLeaving=!1,u.job.flags&8||u.update(),delete H.afterLeave,O=void 0},Nf(C);l==="in-out"&&q.type!==Qa?H.delayLeave=(V,Ae,Ve)=>{const Be=n_(d,O);Be[String(O.key)]=O,V[nc]=()=>{Ae(),V[nc]=void 0,delete Y.delayedLeave,O=void 0},Y.delayedLeave=()=>{Ve(),delete Y.delayedLeave,O=void 0}}:O=void 0}else O&&(O=void 0);return C}}};function r_(i){let s=i[0];if(i.length>1){for(const u of i)if(u.type!==Qa){s=u;break}}return s}const ox=sx;function n_(i,s){const{leavingVNodes:u}=i;let d=u.get(s.type);return d||(d=Object.create(null),u.set(s.type,d)),d}function AA(i,s,u,d,y){const{appear:C,mode:I,persisted:l=!1,onBeforeEnter:q,onEnter:Y,onAfterEnter:O,onEnterCancelled:H,onBeforeLeave:V,onLeave:Ae,onAfterLeave:Ve,onLeaveCancelled:Be,onBeforeAppear:ot,onAppear:pt,onAfterAppear:_t,onAppearCancelled:ut}=s,ft=String(i.key),Ft=n_(u,i),Ut=(Bt,Gt)=>{Bt&&Hs(Bt,d,9,Gt)},zt=(Bt,Gt)=>{const mt=Gt[1];Ut(Bt,Gt),Mi(Bt)?Bt.every(st=>st.length<=1)&&mt():Bt.length<=1&&mt()},Zt={mode:I,persisted:l,beforeEnter(Bt){let Gt=q;if(!u.isMounted)if(C)Gt=ot||q;else return;Bt[nc]&&Bt[nc](!0);const mt=Ft[ft];mt&&au(i,mt)&&mt.el[nc]&&mt.el[nc](),Ut(Gt,[Bt])},enter(Bt){let Gt=Y,mt=O,st=H;if(!u.isMounted)if(C)Gt=pt||Y,mt=_t||O,st=ut||H;else return;let Et=!1;const ni=Bt[td]=Li=>{Et||(Et=!0,Li?Ut(st,[Bt]):Ut(mt,[Bt]),Zt.delayedLeave&&Zt.delayedLeave(),Bt[td]=void 0)};Gt?zt(Gt,[Bt,ni]):ni()},leave(Bt,Gt){const mt=String(i.key);if(Bt[td]&&Bt[td](!0),u.isUnmounting)return Gt();Ut(V,[Bt]);let st=!1;const Et=Bt[nc]=ni=>{st||(st=!0,Gt(),ni?Ut(Be,[Bt]):Ut(Ve,[Bt]),Bt[nc]=void 0,Ft[mt]===i&&delete Ft[mt])};Ft[mt]=i,Ae?zt(Ae,[Bt,Et]):Et()},clone(Bt){const Gt=AA(Bt,s,u,d,y);return y&&y(Gt),Gt}};return Zt}function Nf(i){if(Rd(i))return i=lc(i),i.children=null,i}function Xm(i){if(!Rd(i))return Z0(i.type)&&i.children?r_(i.children):i;const{shapeFlag:s,children:u}=i;if(u){if(s&16)return u[0];if(s&32&&Ri(u.default))return u.default()}}function uu(i,s){i.shapeFlag&6&&i.component?(i.transition=s,uu(i.component.subTree,s)):i.shapeFlag&128?(i.ssContent.transition=s.clone(i.ssContent),i.ssFallback.transition=s.clone(i.ssFallback)):i.transition=s}function Fg(i,s=!1,u){let d=[],y=0;for(let C=0;C<i.length;C++){let I=i[C];const l=u==null?I.key:String(u)+String(I.key!=null?I.key:C);I.type===Qn?(I.patchFlag&128&&y++,d=d.concat(Fg(I.children,s,l))):(s||I.type!==Qa)&&d.push(l!=null?lc(I,{key:l}):I)}if(y>1)for(let C=0;C<d.length;C++)d[C].patchFlag=-2;return d}/*! #__NO_SIDE_EFFECTS__ */function or(i,s){return Ri(i)?gn({name:i.name},s,{setup:i}):i}function a_(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function fd(i,s,u,d,y=!1){if(Mi(i)){i.forEach((Ve,Be)=>fd(Ve,s&&(Mi(s)?s[Be]:s),u,d,y));return}if(iA(d)&&!y){d.shapeFlag&512&&d.type.__asyncResolved&&d.component.subTree.component&&fd(i,s,u,d.component.subTree);return}const C=d.shapeFlag&4?zd(d.component):d.el,I=y?null:C,{i:l,r:q}=i,Y=s&&s.r,O=l.refs===Qr?l.refs={}:l.refs,H=l.setupState,V=ir(H),Ae=H===Qr?()=>!1:Ve=>mr(V,Ve);if(Y!=null&&Y!==q&&(tn(Y)?(O[Y]=null,Ae(Y)&&(H[Y]=null)):yr(Y)&&(Y.value=null)),Ri(q))vA(q,l,12,[I,O]);else{const Ve=tn(q),Be=yr(q);if(Ve||Be){const ot=()=>{if(i.f){const pt=Ve?Ae(q)?H[q]:O[q]:q.value;y?Mi(pt)&&wg(pt,C):Mi(pt)?pt.includes(C)||pt.push(C):Ve?(O[q]=[C],Ae(q)&&(H[q]=O[q])):(q.value=[C],i.k&&(O[i.k]=q.value))}else Ve?(O[q]=I,Ae(q)&&(H[q]=I)):Be&&(q.value=I,i.k&&(O[i.k]=I))};I?(ot.id=-1,ua(ot,u)):ot()}}}kd().requestIdleCallback;kd().cancelIdleCallback;const iA=i=>!!i.type.__asyncLoader,Rd=i=>i.type.__isKeepAlive;function s_(i,s){l_(i,"a",s)}function o_(i,s){l_(i,"da",s)}function l_(i,s,u=Nn){const d=i.__wdc||(i.__wdc=()=>{let y=u;for(;y;){if(y.isDeactivated)return;y=y.parent}return i()});if(Ld(s,d,u),u){let y=u.parent;for(;y&&y.parent;)Rd(y.parent.vnode)&&lx(d,s,u,y),y=y.parent}}function lx(i,s,u,d){const y=Ld(s,i,d,!0);c_(()=>{wg(d[s],y)},u)}function Ld(i,s,u=Nn,d=!1){if(u){const y=u[i]||(u[i]=[]),C=s.__weh||(s.__weh=(...I)=>{uc();const l=wA(u),q=Hs(s,u,i,I);return l(),hc(),q});return d?y.unshift(C):y.push(C),C}}const gl=i=>(s,u=Nn)=>{(!gA||i==="sp")&&Ld(i,(...d)=>s(...d),u)},zg=gl("bm"),_s=gl("m"),cx=gl("bu"),Gg=gl("u"),pn=gl("bum"),c_=gl("um"),ux=gl("sp"),hx=gl("rtg"),Ax=gl("rtc");function dx(i,s=Nn){Ld("ec",i,s)}const u_="components",fx="directives",gx=Symbol.for("v-ndc");function px(i){return tn(i)&&h_(u_,i,!1)||i}function Ng(i){return h_(fx,i)}function h_(i,s,u=!0,d=!1){const y=Sa||Nn;if(y){const C=y.type;if(i===u_){const l=iw(C,!1);if(l&&(l===s||l===Da(s)||l===dl(Da(s))))return C}const I=ey(y[i]||C[i],s)||ey(y.appContext[i],s);return!I&&d?C:I}}function ey(i,s){return i&&(i[s]||i[Da(s)]||i[dl(Da(s))])}const rg=i=>i?S_(i)?zd(i):rg(i.parent):null,rA=gn(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>rg(i.parent),$root:i=>rg(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>d_(i),$forceUpdate:i=>i.f||(i.f=()=>{Lg(i.update)}),$nextTick:i=>i.n||(i.n=fl.bind(i.proxy)),$watch:i=>Fx.bind(i)}),Uf=(i,s)=>i!==Qr&&!i.__isScriptSetup&&mr(i,s),mx={get({_:i},s){if(s==="__v_skip")return!0;const{ctx:u,setupState:d,data:y,props:C,accessCache:I,type:l,appContext:q}=i;let Y;if(s[0]!=="$"){const Ae=I[s];if(Ae!==void 0)switch(Ae){case 1:return d[s];case 2:return y[s];case 4:return u[s];case 3:return C[s]}else{if(Uf(d,s))return I[s]=1,d[s];if(y!==Qr&&mr(y,s))return I[s]=2,y[s];if((Y=i.propsOptions[0])&&mr(Y,s))return I[s]=3,C[s];if(u!==Qr&&mr(u,s))return I[s]=4,u[s];ng&&(I[s]=0)}}const O=rA[s];let H,V;if(O)return s==="$attrs"&&Zn(i.attrs,"get",""),O(i);if((H=l.__cssModules)&&(H=H[s]))return H;if(u!==Qr&&mr(u,s))return I[s]=4,u[s];if(V=q.config.globalProperties,mr(V,s))return V[s]},set({_:i},s,u){const{data:d,setupState:y,ctx:C}=i;return Uf(y,s)?(y[s]=u,!0):d!==Qr&&mr(d,s)?(d[s]=u,!0):mr(i.props,s)||s[0]==="$"&&s.slice(1)in i?!1:(C[s]=u,!0)},has({_:{data:i,setupState:s,accessCache:u,ctx:d,appContext:y,propsOptions:C}},I){let l;return!!u[I]||i!==Qr&&mr(i,I)||Uf(s,I)||(l=C[0])&&mr(l,I)||mr(d,I)||mr(rA,I)||mr(y.config.globalProperties,I)},defineProperty(i,s,u){return u.get!=null?i._.accessCache[s]=0:mr(u,"value")&&this.set(i,s,u.value,null),Reflect.defineProperty(i,s,u)}};function ty(i){return Mi(i)?i.reduce((s,u)=>(s[u]=null,s),{}):i}let ng=!0;function yx(i){const s=d_(i),u=i.proxy,d=i.ctx;ng=!1,s.beforeCreate&&iy(s.beforeCreate,i,"bc");const{data:y,computed:C,methods:I,watch:l,provide:q,inject:Y,created:O,beforeMount:H,mounted:V,beforeUpdate:Ae,updated:Ve,activated:Be,deactivated:ot,beforeDestroy:pt,beforeUnmount:_t,destroyed:ut,unmounted:ft,render:Ft,renderTracked:Ut,renderTriggered:zt,errorCaptured:Zt,serverPrefetch:Bt,expose:Gt,inheritAttrs:mt,components:st,directives:Et,filters:ni}=s;if(Y&&_x(Y,d,null),I)for(const bi in I){const Pi=I[bi];Ri(Pi)&&(d[bi]=Pi.bind(u))}if(y){const bi=y.call(u,u);Or(bi)&&(i.data=Gn(bi))}if(ng=!0,C)for(const bi in C){const Pi=C[bi],nr=Ri(Pi)?Pi.bind(u,u):Ri(Pi.get)?Pi.get.bind(u,u):wo,Kr=!Ri(Pi)&&Ri(Pi.set)?Pi.set.bind(u):wo,Ar=nt({get:nr,set:Kr});Object.defineProperty(d,bi,{enumerable:!0,configurable:!0,get:()=>Ar.value,set:Yi=>Ar.value=Yi})}if(l)for(const bi in l)A_(l[bi],d,u,bi);if(q){const bi=Ri(q)?q.call(u):q;Reflect.ownKeys(bi).forEach(Pi=>{br(Pi,bi[Pi])})}O&&iy(O,i,"c");function wi(bi,Pi){Mi(Pi)?Pi.forEach(nr=>bi(nr.bind(u))):Pi&&bi(Pi.bind(u))}if(wi(zg,H),wi(_s,V),wi(cx,Ae),wi(Gg,Ve),wi(s_,Be),wi(o_,ot),wi(dx,Zt),wi(Ax,Ut),wi(hx,zt),wi(pn,_t),wi(c_,ft),wi(ux,Bt),Mi(Gt))if(Gt.length){const bi=i.exposed||(i.exposed={});Gt.forEach(Pi=>{Object.defineProperty(bi,Pi,{get:()=>u[Pi],set:nr=>u[Pi]=nr})})}else i.exposed||(i.exposed={});Ft&&i.render===wo&&(i.render=Ft),mt!=null&&(i.inheritAttrs=mt),st&&(i.components=st),Et&&(i.directives=Et),Bt&&a_(i)}function _x(i,s,u=wo){Mi(i)&&(i=ag(i));for(const d in i){const y=i[d];let C;Or(y)?"default"in y?C=Vi(y.from||d,y.default,!0):C=Vi(y.from||d):C=Vi(y),yr(C)?Object.defineProperty(s,d,{enumerable:!0,configurable:!0,get:()=>C.value,set:I=>C.value=I}):s[d]=C}}function iy(i,s,u){Hs(Mi(i)?i.map(d=>d.bind(s.proxy)):i.bind(s.proxy),s,u)}function A_(i,s,u,d){let y=d.includes(".")?C_(u,d):()=>u[d];if(tn(i)){const C=s[i];Ri(C)&&ri(y,C)}else if(Ri(i))ri(y,i.bind(u));else if(Or(i))if(Mi(i))i.forEach(C=>A_(C,s,u,d));else{const C=Ri(i.handler)?i.handler.bind(u):s[i.handler];Ri(C)&&ri(y,C,i)}}function d_(i){const s=i.type,{mixins:u,extends:d}=s,{mixins:y,optionsCache:C,config:{optionMergeStrategies:I}}=i.appContext,l=C.get(s);let q;return l?q=l:!y.length&&!u&&!d?q=s:(q={},y.length&&y.forEach(Y=>gd(q,Y,I,!0)),gd(q,s,I)),Or(s)&&C.set(s,q),q}function gd(i,s,u,d=!1){const{mixins:y,extends:C}=s;C&&gd(i,C,u,!0),y&&y.forEach(I=>gd(i,I,u,!0));for(const I in s)if(!(d&&I==="expose")){const l=Ix[I]||u&&u[I];i[I]=l?l(i[I],s[I]):s[I]}return i}const Ix={data:ry,props:ny,emits:ny,methods:Kh,computed:Kh,beforeCreate:ca,created:ca,beforeMount:ca,mounted:ca,beforeUpdate:ca,updated:ca,beforeDestroy:ca,beforeUnmount:ca,destroyed:ca,unmounted:ca,activated:ca,deactivated:ca,errorCaptured:ca,serverPrefetch:ca,components:Kh,directives:Kh,watch:bx,provide:ry,inject:vx};function ry(i,s){return s?i?function(){return gn(Ri(i)?i.call(this,this):i,Ri(s)?s.call(this,this):s)}:s:i}function vx(i,s){return Kh(ag(i),ag(s))}function ag(i){if(Mi(i)){const s={};for(let u=0;u<i.length;u++)s[i[u]]=i[u];return s}return i}function ca(i,s){return i?[...new Set([].concat(i,s))]:s}function Kh(i,s){return i?gn(Object.create(null),i,s):s}function ny(i,s){return i?Mi(i)&&Mi(s)?[...new Set([...i,...s])]:gn(Object.create(null),ty(i),ty(s??{})):s}function bx(i,s){if(!i)return s;if(!s)return i;const u=gn(Object.create(null),i);for(const d in s)u[d]=ca(i[d],s[d]);return u}function f_(){return{app:null,config:{isNativeTag:Ab,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xx=0;function wx(i,s){return function(d,y=null){Ri(d)||(d=gn({},d)),y!=null&&!Or(y)&&(y=null);const C=f_(),I=new WeakSet,l=[];let q=!1;const Y=C.app={_uid:xx++,_component:d,_props:y,_container:null,_context:C,_instance:null,version:nw,get config(){return C.config},set config(O){},use(O,...H){return I.has(O)||(O&&Ri(O.install)?(I.add(O),O.install(Y,...H)):Ri(O)&&(I.add(O),O(Y,...H))),Y},mixin(O){return C.mixins.includes(O)||C.mixins.push(O),Y},component(O,H){return H?(C.components[O]=H,Y):C.components[O]},directive(O,H){return H?(C.directives[O]=H,Y):C.directives[O]},mount(O,H,V){if(!q){const Ae=Y._ceVNode||He(d,y);return Ae.appContext=C,V===!0?V="svg":V===!1&&(V=void 0),i(Ae,O,V),q=!0,Y._container=O,O.__vue_app__=Y,zd(Ae.component)}},onUnmount(O){l.push(O)},unmount(){q&&(Hs(l,Y._instance,16),i(null,Y._container),delete Y._container.__vue_app__)},provide(O,H){return C.provides[O]=H,Y},runWithContext(O){const H=sh;sh=Y;try{return O()}finally{sh=H}}};return Y}}let sh=null;function br(i,s){if(Nn){let u=Nn.provides;const d=Nn.parent&&Nn.parent.provides;d===u&&(u=Nn.provides=Object.create(d)),u[i]=s}}function Vi(i,s,u=!1){const d=Nn||Sa;if(d||sh){const y=sh?sh._context.provides:d?d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:void 0;if(y&&i in y)return y[i];if(arguments.length>1)return u&&Ri(s)?s.call(d&&d.proxy):s}}const g_={},p_=()=>Object.create(g_),m_=i=>Object.getPrototypeOf(i)===g_;function Cx(i,s,u,d=!1){const y={},C=p_();i.propsDefaults=Object.create(null),y_(i,s,y,C);for(const I in i.propsOptions[0])I in y||(y[I]=void 0);u?i.props=d?y:jb(y):i.type.props?i.props=y:i.props=C,i.attrs=C}function Bx(i,s,u,d){const{props:y,attrs:C,vnode:{patchFlag:I}}=i,l=ir(y),[q]=i.propsOptions;let Y=!1;if((d||I>0)&&!(I&16)){if(I&8){const O=i.vnode.dynamicProps;for(let H=0;H<O.length;H++){let V=O[H];if(Fd(i.emitsOptions,V))continue;const Ae=s[V];if(q)if(mr(C,V))Ae!==C[V]&&(C[V]=Ae,Y=!0);else{const Ve=Da(V);y[Ve]=sg(q,l,Ve,Ae,i,!1)}else Ae!==C[V]&&(C[V]=Ae,Y=!0)}}}else{y_(i,s,y,C)&&(Y=!0);let O;for(const H in l)(!s||!mr(s,H)&&((O=hu(H))===H||!mr(s,O)))&&(q?u&&(u[H]!==void 0||u[O]!==void 0)&&(y[H]=sg(q,l,H,void 0,i,!0)):delete y[H]);if(C!==l)for(const H in C)(!s||!mr(s,H))&&(delete C[H],Y=!0)}Y&&ul(i.attrs,"set","")}function y_(i,s,u,d){const[y,C]=i.propsOptions;let I=!1,l;if(s)for(let q in s){if(Zh(q))continue;const Y=s[q];let O;y&&mr(y,O=Da(q))?!C||!C.includes(O)?u[O]=Y:(l||(l={}))[O]=Y:Fd(i.emitsOptions,q)||(!(q in d)||Y!==d[q])&&(d[q]=Y,I=!0)}if(C){const q=ir(u),Y=l||Qr;for(let O=0;O<C.length;O++){const H=C[O];u[H]=sg(y,q,H,Y[H],i,!mr(Y,H))}}return I}function sg(i,s,u,d,y,C){const I=i[u];if(I!=null){const l=mr(I,"default");if(l&&d===void 0){const q=I.default;if(I.type!==Function&&!I.skipFactory&&Ri(q)){const{propsDefaults:Y}=y;if(u in Y)d=Y[u];else{const O=wA(y);d=Y[u]=q.call(null,s),O()}}else d=q;y.ce&&y.ce._setProp(u,d)}I[0]&&(C&&!l?d=!1:I[1]&&(d===""||d===hu(u))&&(d=!0))}return d}const Ex=new WeakMap;function __(i,s,u=!1){const d=u?Ex:s.propsCache,y=d.get(i);if(y)return y;const C=i.props,I={},l=[];let q=!1;if(!Ri(i)){const O=H=>{q=!0;const[V,Ae]=__(H,s,!0);gn(I,V),Ae&&l.push(...Ae)};!u&&s.mixins.length&&s.mixins.forEach(O),i.extends&&O(i.extends),i.mixins&&i.mixins.forEach(O)}if(!C&&!q)return Or(i)&&d.set(i,rh),rh;if(Mi(C))for(let O=0;O<C.length;O++){const H=Da(C[O]);ay(H)&&(I[H]=Qr)}else if(C)for(const O in C){const H=Da(O);if(ay(H)){const V=C[O],Ae=I[H]=Mi(V)||Ri(V)?{type:V}:gn({},V),Ve=Ae.type;let Be=!1,ot=!0;if(Mi(Ve))for(let pt=0;pt<Ve.length;++pt){const _t=Ve[pt],ut=Ri(_t)&&_t.name;if(ut==="Boolean"){Be=!0;break}else ut==="String"&&(ot=!1)}else Be=Ri(Ve)&&Ve.name==="Boolean";Ae[0]=Be,Ae[1]=ot,(Be||mr(Ae,"default"))&&l.push(H)}}const Y=[I,l];return Or(i)&&d.set(i,Y),Y}function ay(i){return i[0]!=="$"&&!Zh(i)}const I_=i=>i[0]==="_"||i==="$stable",Ug=i=>Mi(i)?i.map(bo):[bo(i)],Qx=(i,s,u)=>{if(s._n)return s;const d=en((...y)=>Ug(s(...y)),u);return d._c=!1,d},v_=(i,s,u)=>{const d=i._ctx;for(const y in i){if(I_(y))continue;const C=i[y];if(Ri(C))s[y]=Qx(y,C,d);else if(C!=null){const I=Ug(C);s[y]=()=>I}}},b_=(i,s)=>{const u=Ug(s);i.slots.default=()=>u},x_=(i,s,u)=>{for(const d in s)(u||d!=="_")&&(i[d]=s[d])},Sx=(i,s,u)=>{const d=i.slots=p_();if(i.vnode.shapeFlag&32){const y=s._;y?(x_(d,s,u),u&&b0(d,"_",y,!0)):v_(s,d)}else s&&b_(i,s)},Dx=(i,s,u)=>{const{vnode:d,slots:y}=i;let C=!0,I=Qr;if(d.shapeFlag&32){const l=s._;l?u&&l===1?C=!1:x_(y,s,u):(C=!s.$stable,v_(s,y)),I=s}else s&&(b_(i,s),I={default:1});if(C)for(const l in y)!I_(l)&&I[l]==null&&delete y[l]},ua=qx;function kx(i){return Mx(i)}function Mx(i,s){const u=kd();u.__VUE__=!0;const{insert:d,remove:y,patchProp:C,createElement:I,createText:l,createComment:q,setText:Y,setElementText:O,parentNode:H,nextSibling:V,setScopeId:Ae=wo,insertStaticContent:Ve}=i,Be=(Se,Ge,tt,It=null,ve=null,vt=null,Vt=void 0,gt=null,bt=!!Ge.dynamicChildren)=>{if(Se===Ge)return;Se&&!au(Se,Ge)&&(It=dr(Se),Yi(Se,ve,vt,!0),Se=null),Ge.patchFlag===-2&&(bt=!1,Ge.dynamicChildren=null);const{type:Ct,ref:fi,shapeFlag:Ot}=Ge;switch(Ct){case bA:ot(Se,Ge,tt,It);break;case Qa:pt(Se,Ge,tt,It);break;case Vf:Se==null&&_t(Ge,tt,It,Vt);break;case Qn:st(Se,Ge,tt,It,ve,vt,Vt,gt,bt);break;default:Ot&1?Ft(Se,Ge,tt,It,ve,vt,Vt,gt,bt):Ot&6?Et(Se,Ge,tt,It,ve,vt,Vt,gt,bt):(Ot&64||Ot&128)&&Ct.process(Se,Ge,tt,It,ve,vt,Vt,gt,bt,hn)}fi!=null&&ve&&fd(fi,Se&&Se.ref,vt,Ge||Se,!Ge)},ot=(Se,Ge,tt,It)=>{if(Se==null)d(Ge.el=l(Ge.children),tt,It);else{const ve=Ge.el=Se.el;Ge.children!==Se.children&&Y(ve,Ge.children)}},pt=(Se,Ge,tt,It)=>{Se==null?d(Ge.el=q(Ge.children||""),tt,It):Ge.el=Se.el},_t=(Se,Ge,tt,It)=>{[Se.el,Se.anchor]=Ve(Se.children,Ge,tt,It,Se.el,Se.anchor)},ut=({el:Se,anchor:Ge},tt,It)=>{let ve;for(;Se&&Se!==Ge;)ve=V(Se),d(Se,tt,It),Se=ve;d(Ge,tt,It)},ft=({el:Se,anchor:Ge})=>{let tt;for(;Se&&Se!==Ge;)tt=V(Se),y(Se),Se=tt;y(Ge)},Ft=(Se,Ge,tt,It,ve,vt,Vt,gt,bt)=>{Ge.type==="svg"?Vt="svg":Ge.type==="math"&&(Vt="mathml"),Se==null?Ut(Ge,tt,It,ve,vt,Vt,gt,bt):Bt(Se,Ge,ve,vt,Vt,gt,bt)},Ut=(Se,Ge,tt,It,ve,vt,Vt,gt)=>{let bt,Ct;const{props:fi,shapeFlag:Ot,transition:hi,dirs:di}=Se;if(bt=Se.el=I(Se.type,vt,fi&&fi.is,fi),Ot&8?O(bt,Se.children):Ot&16&&Zt(Se.children,bt,null,It,ve,Of(Se,vt),Vt,gt),di&&eu(Se,null,It,"created"),zt(bt,Se,Se.scopeId,Vt,It),fi){for(const qi in fi)qi!=="value"&&!Zh(qi)&&C(bt,qi,null,fi[qi],vt,It);"value"in fi&&C(bt,"value",null,fi.value,vt),(Ct=fi.onVnodeBeforeMount)&&_o(Ct,It,Se)}di&&eu(Se,null,It,"beforeMount");const Ti=Tx(ve,hi);Ti&&hi.beforeEnter(bt),d(bt,Ge,tt),((Ct=fi&&fi.onVnodeMounted)||Ti||di)&&ua(()=>{Ct&&_o(Ct,It,Se),Ti&&hi.enter(bt),di&&eu(Se,null,It,"mounted")},ve)},zt=(Se,Ge,tt,It,ve)=>{if(tt&&Ae(Se,tt),It)for(let vt=0;vt<It.length;vt++)Ae(Se,It[vt]);if(ve){let vt=ve.subTree;if(Ge===vt||E_(vt.type)&&(vt.ssContent===Ge||vt.ssFallback===Ge)){const Vt=ve.vnode;zt(Se,Vt,Vt.scopeId,Vt.slotScopeIds,ve.parent)}}},Zt=(Se,Ge,tt,It,ve,vt,Vt,gt,bt=0)=>{for(let Ct=bt;Ct<Se.length;Ct++){const fi=Se[Ct]=gt?ac(Se[Ct]):bo(Se[Ct]);Be(null,fi,Ge,tt,It,ve,vt,Vt,gt)}},Bt=(Se,Ge,tt,It,ve,vt,Vt)=>{const gt=Ge.el=Se.el;let{patchFlag:bt,dynamicChildren:Ct,dirs:fi}=Ge;bt|=Se.patchFlag&16;const Ot=Se.props||Qr,hi=Ge.props||Qr;let di;if(tt&&tu(tt,!1),(di=hi.onVnodeBeforeUpdate)&&_o(di,tt,Ge,Se),fi&&eu(Ge,Se,tt,"beforeUpdate"),tt&&tu(tt,!0),(Ot.innerHTML&&hi.innerHTML==null||Ot.textContent&&hi.textContent==null)&&O(gt,""),Ct?Gt(Se.dynamicChildren,Ct,gt,tt,It,Of(Ge,ve),vt):Vt||Pi(Se,Ge,gt,null,tt,It,Of(Ge,ve),vt,!1),bt>0){if(bt&16)mt(gt,Ot,hi,tt,ve);else if(bt&2&&Ot.class!==hi.class&&C(gt,"class",null,hi.class,ve),bt&4&&C(gt,"style",Ot.style,hi.style,ve),bt&8){const Ti=Ge.dynamicProps;for(let qi=0;qi<Ti.length;qi++){const ht=Ti[qi],fr=Ot[ht],Zi=hi[ht];(Zi!==fr||ht==="value")&&C(gt,ht,fr,Zi,ve,tt)}}bt&1&&Se.children!==Ge.children&&O(gt,Ge.children)}else!Vt&&Ct==null&&mt(gt,Ot,hi,tt,ve);((di=hi.onVnodeUpdated)||fi)&&ua(()=>{di&&_o(di,tt,Ge,Se),fi&&eu(Ge,Se,tt,"updated")},It)},Gt=(Se,Ge,tt,It,ve,vt,Vt)=>{for(let gt=0;gt<Ge.length;gt++){const bt=Se[gt],Ct=Ge[gt],fi=bt.el&&(bt.type===Qn||!au(bt,Ct)||bt.shapeFlag&70)?H(bt.el):tt;Be(bt,Ct,fi,null,It,ve,vt,Vt,!0)}},mt=(Se,Ge,tt,It,ve)=>{if(Ge!==tt){if(Ge!==Qr)for(const vt in Ge)!Zh(vt)&&!(vt in tt)&&C(Se,vt,Ge[vt],null,ve,It);for(const vt in tt){if(Zh(vt))continue;const Vt=tt[vt],gt=Ge[vt];Vt!==gt&&vt!=="value"&&C(Se,vt,gt,Vt,ve,It)}"value"in tt&&C(Se,"value",Ge.value,tt.value,ve)}},st=(Se,Ge,tt,It,ve,vt,Vt,gt,bt)=>{const Ct=Ge.el=Se?Se.el:l(""),fi=Ge.anchor=Se?Se.anchor:l("");let{patchFlag:Ot,dynamicChildren:hi,slotScopeIds:di}=Ge;di&&(gt=gt?gt.concat(di):di),Se==null?(d(Ct,tt,It),d(fi,tt,It),Zt(Ge.children||[],tt,fi,ve,vt,Vt,gt,bt)):Ot>0&&Ot&64&&hi&&Se.dynamicChildren?(Gt(Se.dynamicChildren,hi,tt,ve,vt,Vt,gt),(Ge.key!=null||ve&&Ge===ve.subTree)&&Og(Se,Ge,!0)):Pi(Se,Ge,tt,fi,ve,vt,Vt,gt,bt)},Et=(Se,Ge,tt,It,ve,vt,Vt,gt,bt)=>{Ge.slotScopeIds=gt,Se==null?Ge.shapeFlag&512?ve.ctx.activate(Ge,tt,It,Vt,bt):ni(Ge,tt,It,ve,vt,Vt,bt):Li(Se,Ge,bt)},ni=(Se,Ge,tt,It,ve,vt,Vt)=>{const gt=Se.component=Zx(Se,It,ve);if(Rd(Se)&&(gt.ctx.renderer=hn),Wx(gt,!1,Vt),gt.asyncDep){if(ve&&ve.registerDep(gt,wi,Vt),!Se.el){const bt=gt.subTree=He(Qa);pt(null,bt,Ge,tt)}}else wi(gt,Se,Ge,tt,ve,vt,Vt)},Li=(Se,Ge,tt)=>{const It=Ge.component=Se.component;if(Ox(Se,Ge,tt))if(It.asyncDep&&!It.asyncResolved){bi(It,Ge,tt);return}else It.next=Ge,It.update();else Ge.el=Se.el,It.vnode=Ge},wi=(Se,Ge,tt,It,ve,vt,Vt)=>{const gt=()=>{if(Se.isMounted){let{next:Ot,bu:hi,u:di,parent:Ti,vnode:qi}=Se;{const Lr=w_(Se);if(Lr){Ot&&(Ot.el=qi.el,bi(Se,Ot,Vt)),Lr.asyncDep.then(()=>{Se.isUnmounted||gt()});return}}let ht=Ot,fr;tu(Se,!1),Ot?(Ot.el=qi.el,bi(Se,Ot,Vt)):Ot=qi,hi&&Rf(hi),(fr=Ot.props&&Ot.props.onVnodeBeforeUpdate)&&_o(fr,Ti,Ot,qi),tu(Se,!0);const Zi=oy(Se),Rr=Se.subTree;Se.subTree=Zi,Be(Rr,Zi,H(Rr.el),dr(Rr),Se,ve,vt),Ot.el=Zi.el,ht===null&&Vx(Se,Zi.el),di&&ua(di,ve),(fr=Ot.props&&Ot.props.onVnodeUpdated)&&ua(()=>_o(fr,Ti,Ot,qi),ve)}else{let Ot;const{el:hi,props:di}=Ge,{bm:Ti,m:qi,parent:ht,root:fr,type:Zi}=Se,Rr=iA(Ge);tu(Se,!1),Ti&&Rf(Ti),!Rr&&(Ot=di&&di.onVnodeBeforeMount)&&_o(Ot,ht,Ge),tu(Se,!0);{fr.ce&&fr.ce._injectChildStyle(Zi);const Lr=Se.subTree=oy(Se);Be(null,Lr,tt,It,Se,ve,vt),Ge.el=Lr.el}if(qi&&ua(qi,ve),!Rr&&(Ot=di&&di.onVnodeMounted)){const Lr=Ge;ua(()=>_o(Ot,ht,Lr),ve)}(Ge.shapeFlag&256||ht&&iA(ht.vnode)&&ht.vnode.shapeFlag&256)&&Se.a&&ua(Se.a,ve),Se.isMounted=!0,Ge=tt=It=null}};Se.scope.on();const bt=Se.effect=new Q0(gt);Se.scope.off();const Ct=Se.update=bt.run.bind(bt),fi=Se.job=bt.runIfDirty.bind(bt);fi.i=Se,fi.id=Se.uid,bt.scheduler=()=>Lg(fi),tu(Se,!0),Ct()},bi=(Se,Ge,tt)=>{Ge.component=Se;const It=Se.vnode.props;Se.vnode=Ge,Se.next=null,Bx(Se,Ge.props,It,tt),Dx(Se,Ge.children,tt),uc(),Km(Se),hc()},Pi=(Se,Ge,tt,It,ve,vt,Vt,gt,bt=!1)=>{const Ct=Se&&Se.children,fi=Se?Se.shapeFlag:0,Ot=Ge.children,{patchFlag:hi,shapeFlag:di}=Ge;if(hi>0){if(hi&128){Kr(Ct,Ot,tt,It,ve,vt,Vt,gt,bt);return}else if(hi&256){nr(Ct,Ot,tt,It,ve,vt,Vt,gt,bt);return}}di&8?(fi&16&&$r(Ct,ve,vt),Ot!==Ct&&O(tt,Ot)):fi&16?di&16?Kr(Ct,Ot,tt,It,ve,vt,Vt,gt,bt):$r(Ct,ve,vt,!0):(fi&8&&O(tt,""),di&16&&Zt(Ot,tt,It,ve,vt,Vt,gt,bt))},nr=(Se,Ge,tt,It,ve,vt,Vt,gt,bt)=>{Se=Se||rh,Ge=Ge||rh;const Ct=Se.length,fi=Ge.length,Ot=Math.min(Ct,fi);let hi;for(hi=0;hi<Ot;hi++){const di=Ge[hi]=bt?ac(Ge[hi]):bo(Ge[hi]);Be(Se[hi],di,tt,null,ve,vt,Vt,gt,bt)}Ct>fi?$r(Se,ve,vt,!0,!1,Ot):Zt(Ge,tt,It,ve,vt,Vt,gt,bt,Ot)},Kr=(Se,Ge,tt,It,ve,vt,Vt,gt,bt)=>{let Ct=0;const fi=Ge.length;let Ot=Se.length-1,hi=fi-1;for(;Ct<=Ot&&Ct<=hi;){const di=Se[Ct],Ti=Ge[Ct]=bt?ac(Ge[Ct]):bo(Ge[Ct]);if(au(di,Ti))Be(di,Ti,tt,null,ve,vt,Vt,gt,bt);else break;Ct++}for(;Ct<=Ot&&Ct<=hi;){const di=Se[Ot],Ti=Ge[hi]=bt?ac(Ge[hi]):bo(Ge[hi]);if(au(di,Ti))Be(di,Ti,tt,null,ve,vt,Vt,gt,bt);else break;Ot--,hi--}if(Ct>Ot){if(Ct<=hi){const di=hi+1,Ti=di<fi?Ge[di].el:It;for(;Ct<=hi;)Be(null,Ge[Ct]=bt?ac(Ge[Ct]):bo(Ge[Ct]),tt,Ti,ve,vt,Vt,gt,bt),Ct++}}else if(Ct>hi)for(;Ct<=Ot;)Yi(Se[Ct],ve,vt,!0),Ct++;else{const di=Ct,Ti=Ct,qi=new Map;for(Ct=Ti;Ct<=hi;Ct++){const ti=Ge[Ct]=bt?ac(Ge[Ct]):bo(Ge[Ct]);ti.key!=null&&qi.set(ti.key,Ct)}let ht,fr=0;const Zi=hi-Ti+1;let Rr=!1,Lr=0;const Qt=new Array(Zi);for(Ct=0;Ct<Zi;Ct++)Qt[Ct]=0;for(Ct=di;Ct<=Ot;Ct++){const ti=Se[Ct];if(fr>=Zi){Yi(ti,ve,vt,!0);continue}let lr;if(ti.key!=null)lr=qi.get(ti.key);else for(ht=Ti;ht<=hi;ht++)if(Qt[ht-Ti]===0&&au(ti,Ge[ht])){lr=ht;break}lr===void 0?Yi(ti,ve,vt,!0):(Qt[lr-Ti]=Ct+1,lr>=Lr?Lr=lr:Rr=!0,Be(ti,Ge[lr],tt,null,ve,vt,Vt,gt,bt),fr++)}const Ei=Rr?Px(Qt):rh;for(ht=Ei.length-1,Ct=Zi-1;Ct>=0;Ct--){const ti=Ti+Ct,lr=Ge[ti],An=ti+1<fi?Ge[ti+1].el:It;Qt[Ct]===0?Be(null,lr,tt,An,ve,vt,Vt,gt,bt):Rr&&(ht<0||Ct!==Ei[ht]?Ar(lr,tt,An,2):ht--)}}},Ar=(Se,Ge,tt,It,ve=null)=>{const{el:vt,type:Vt,transition:gt,children:bt,shapeFlag:Ct}=Se;if(Ct&6){Ar(Se.component.subTree,Ge,tt,It);return}if(Ct&128){Se.suspense.move(Ge,tt,It);return}if(Ct&64){Vt.move(Se,Ge,tt,hn);return}if(Vt===Qn){d(vt,Ge,tt);for(let Ot=0;Ot<bt.length;Ot++)Ar(bt[Ot],Ge,tt,It);d(Se.anchor,Ge,tt);return}if(Vt===Vf){ut(Se,Ge,tt);return}if(It!==2&&Ct&1&&gt)if(It===0)gt.beforeEnter(vt),d(vt,Ge,tt),ua(()=>gt.enter(vt),ve);else{const{leave:Ot,delayLeave:hi,afterLeave:di}=gt,Ti=()=>d(vt,Ge,tt),qi=()=>{Ot(vt,()=>{Ti(),di&&di()})};hi?hi(vt,Ti,qi):qi()}else d(vt,Ge,tt)},Yi=(Se,Ge,tt,It=!1,ve=!1)=>{const{type:vt,props:Vt,ref:gt,children:bt,dynamicChildren:Ct,shapeFlag:fi,patchFlag:Ot,dirs:hi,cacheIndex:di}=Se;if(Ot===-2&&(ve=!1),gt!=null&&fd(gt,null,tt,Se,!0),di!=null&&(Ge.renderCache[di]=void 0),fi&256){Ge.ctx.deactivate(Se);return}const Ti=fi&1&&hi,qi=!iA(Se);let ht;if(qi&&(ht=Vt&&Vt.onVnodeBeforeUnmount)&&_o(ht,Ge,Se),fi&6)Er(Se.component,tt,It);else{if(fi&128){Se.suspense.unmount(tt,It);return}Ti&&eu(Se,null,Ge,"beforeUnmount"),fi&64?Se.type.remove(Se,Ge,tt,hn,It):Ct&&!Ct.hasOnce&&(vt!==Qn||Ot>0&&Ot&64)?$r(Ct,Ge,tt,!1,!0):(vt===Qn&&Ot&384||!ve&&fi&16)&&$r(bt,Ge,tt),It&&kr(Se)}(qi&&(ht=Vt&&Vt.onVnodeUnmounted)||Ti)&&ua(()=>{ht&&_o(ht,Ge,Se),Ti&&eu(Se,null,Ge,"unmounted")},tt)},kr=Se=>{const{type:Ge,el:tt,anchor:It,transition:ve}=Se;if(Ge===Qn){sn(tt,It);return}if(Ge===Vf){ft(Se);return}const vt=()=>{y(tt),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(Se.shapeFlag&1&&ve&&!ve.persisted){const{leave:Vt,delayLeave:gt}=ve,bt=()=>Vt(tt,vt);gt?gt(Se.el,vt,bt):bt()}else vt()},sn=(Se,Ge)=>{let tt;for(;Se!==Ge;)tt=V(Se),y(Se),Se=tt;y(Ge)},Er=(Se,Ge,tt)=>{const{bum:It,scope:ve,job:vt,subTree:Vt,um:gt,m:bt,a:Ct}=Se;sy(bt),sy(Ct),It&&Rf(It),ve.stop(),vt&&(vt.flags|=8,Yi(Vt,Se,Ge,tt)),gt&&ua(gt,Ge),ua(()=>{Se.isUnmounted=!0},Ge),Ge&&Ge.pendingBranch&&!Ge.isUnmounted&&Se.asyncDep&&!Se.asyncResolved&&Se.suspenseId===Ge.pendingId&&(Ge.deps--,Ge.deps===0&&Ge.resolve())},$r=(Se,Ge,tt,It=!1,ve=!1,vt=0)=>{for(let Vt=vt;Vt<Se.length;Vt++)Yi(Se[Vt],Ge,tt,It,ve)},dr=Se=>{if(Se.shapeFlag&6)return dr(Se.component.subTree);if(Se.shapeFlag&128)return Se.suspense.next();const Ge=V(Se.anchor||Se.el),tt=Ge&&Ge[$0];return tt?V(tt):Ge};let ar=!1;const rn=(Se,Ge,tt)=>{Se==null?Ge._vnode&&Yi(Ge._vnode,null,null,!0):Be(Ge._vnode||null,Se,Ge,null,null,null,tt),Ge._vnode=Se,ar||(ar=!0,Km(),J0(),ar=!1)},hn={p:Be,um:Yi,m:Ar,r:kr,mt:ni,mc:Zt,pc:Pi,pbc:Gt,n:dr,o:i};return{render:rn,hydrate:void 0,createApp:wx(rn)}}function Of({type:i,props:s},u){return u==="svg"&&i==="foreignObject"||u==="mathml"&&i==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:u}function tu({effect:i,job:s},u){u?(i.flags|=32,s.flags|=4):(i.flags&=-33,s.flags&=-5)}function Tx(i,s){return(!i||i&&!i.pendingBranch)&&s&&!s.persisted}function Og(i,s,u=!1){const d=i.children,y=s.children;if(Mi(d)&&Mi(y))for(let C=0;C<d.length;C++){const I=d[C];let l=y[C];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=y[C]=ac(y[C]),l.el=I.el),!u&&l.patchFlag!==-2&&Og(I,l)),l.type===bA&&(l.el=I.el)}}function Px(i){const s=i.slice(),u=[0];let d,y,C,I,l;const q=i.length;for(d=0;d<q;d++){const Y=i[d];if(Y!==0){if(y=u[u.length-1],i[y]<Y){s[d]=y,u.push(d);continue}for(C=0,I=u.length-1;C<I;)l=C+I>>1,i[u[l]]<Y?C=l+1:I=l;Y<i[u[C]]&&(C>0&&(s[d]=u[C-1]),u[C]=d)}}for(C=u.length,I=u[C-1];C-- >0;)u[C]=I,I=s[I];return u}function w_(i){const s=i.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:w_(s)}function sy(i){if(i)for(let s=0;s<i.length;s++)i[s].flags|=8}const Rx=Symbol.for("v-scx"),Lx=()=>Vi(Rx);function Ac(i,s){return Vg(i,null,s)}function ri(i,s,u){return Vg(i,s,u)}function Vg(i,s,u=Qr){const{immediate:d,deep:y,flush:C,once:I}=u,l=gn({},u),q=s&&d||!s&&C!=="post";let Y;if(gA){if(C==="sync"){const Ae=Lx();Y=Ae.__watcherHandles||(Ae.__watcherHandles=[])}else if(!q){const Ae=()=>{};return Ae.stop=wo,Ae.resume=wo,Ae.pause=wo,Ae}}const O=Nn;l.call=(Ae,Ve,Be)=>Hs(Ae,O,Ve,Be);let H=!1;C==="post"?l.scheduler=Ae=>{ua(Ae,O&&O.suspense)}:C!=="sync"&&(H=!0,l.scheduler=(Ae,Ve)=>{Ve?Ae():Lg(Ae)}),l.augmentJob=Ae=>{s&&(Ae.flags|=4),H&&(Ae.flags|=2,O&&(Ae.id=O.uid,Ae.i=O))};const V=ex(i,s,l);return gA&&(Y?Y.push(V):q&&V()),V}function Fx(i,s,u){const d=this.proxy,y=tn(i)?i.includes(".")?C_(d,i):()=>d[i]:i.bind(d,d);let C;Ri(s)?C=s:(C=s.handler,u=s);const I=wA(this),l=Vg(y,C.bind(d),u);return I(),l}function C_(i,s){const u=s.split(".");return()=>{let d=i;for(let y=0;y<u.length&&d;y++)d=d[u[y]];return d}}const zx=(i,s)=>s==="modelValue"||s==="model-value"?i.modelModifiers:i[`${s}Modifiers`]||i[`${Da(s)}Modifiers`]||i[`${hu(s)}Modifiers`];function Gx(i,s,...u){if(i.isUnmounted)return;const d=i.vnode.props||Qr;let y=u;const C=s.startsWith("update:"),I=C&&zx(d,s.slice(7));I&&(I.trim&&(y=u.map(O=>tn(O)?O.trim():O)),I.number&&(y=u.map(mb)));let l,q=d[l=Pf(s)]||d[l=Pf(Da(s))];!q&&C&&(q=d[l=Pf(hu(s))]),q&&Hs(q,i,6,y);const Y=d[l+"Once"];if(Y){if(!i.emitted)i.emitted={};else if(i.emitted[l])return;i.emitted[l]=!0,Hs(Y,i,6,y)}}function B_(i,s,u=!1){const d=s.emitsCache,y=d.get(i);if(y!==void 0)return y;const C=i.emits;let I={},l=!1;if(!Ri(i)){const q=Y=>{const O=B_(Y,s,!0);O&&(l=!0,gn(I,O))};!u&&s.mixins.length&&s.mixins.forEach(q),i.extends&&q(i.extends),i.mixins&&i.mixins.forEach(q)}return!C&&!l?(Or(i)&&d.set(i,null),null):(Mi(C)?C.forEach(q=>I[q]=null):gn(I,C),Or(i)&&d.set(i,I),I)}function Fd(i,s){return!i||!Qd(s)?!1:(s=s.slice(2).replace(/Once$/,""),mr(i,s[0].toLowerCase()+s.slice(1))||mr(i,hu(s))||mr(i,s))}function oy(i){const{type:s,vnode:u,proxy:d,withProxy:y,propsOptions:[C],slots:I,attrs:l,emit:q,render:Y,renderCache:O,props:H,data:V,setupState:Ae,ctx:Ve,inheritAttrs:Be}=i,ot=dd(i);let pt,_t;try{if(u.shapeFlag&4){const ft=y||d,Ft=ft;pt=bo(Y.call(Ft,ft,O,H,Ae,V,Ve)),_t=l}else{const ft=s;pt=bo(ft.length>1?ft(H,{attrs:l,slots:I,emit:q}):ft(H,null)),_t=s.props?l:Nx(l)}}catch(ft){nA.length=0,Pd(ft,i,1),pt=He(Qa)}let ut=pt;if(_t&&Be!==!1){const ft=Object.keys(_t),{shapeFlag:Ft}=ut;ft.length&&Ft&7&&(C&&ft.some(xg)&&(_t=Ux(_t,C)),ut=lc(ut,_t,!1,!0))}return u.dirs&&(ut=lc(ut,null,!1,!0),ut.dirs=ut.dirs?ut.dirs.concat(u.dirs):u.dirs),u.transition&&uu(ut,u.transition),pt=ut,dd(ot),pt}const Nx=i=>{let s;for(const u in i)(u==="class"||u==="style"||Qd(u))&&((s||(s={}))[u]=i[u]);return s},Ux=(i,s)=>{const u={};for(const d in i)(!xg(d)||!(d.slice(9)in s))&&(u[d]=i[d]);return u};function Ox(i,s,u){const{props:d,children:y,component:C}=i,{props:I,children:l,patchFlag:q}=s,Y=C.emitsOptions;if(s.dirs||s.transition)return!0;if(u&&q>=0){if(q&1024)return!0;if(q&16)return d?ly(d,I,Y):!!I;if(q&8){const O=s.dynamicProps;for(let H=0;H<O.length;H++){const V=O[H];if(I[V]!==d[V]&&!Fd(Y,V))return!0}}}else return(y||l)&&(!l||!l.$stable)?!0:d===I?!1:d?I?ly(d,I,Y):!0:!!I;return!1}function ly(i,s,u){const d=Object.keys(s);if(d.length!==Object.keys(i).length)return!0;for(let y=0;y<d.length;y++){const C=d[y];if(s[C]!==i[C]&&!Fd(u,C))return!0}return!1}function Vx({vnode:i,parent:s},u){for(;s;){const d=s.subTree;if(d.suspense&&d.suspense.activeBranch===i&&(d.el=i.el),d===i)(i=s.vnode).el=u,s=s.parent;else break}}const E_=i=>i.__isSuspense;function qx(i,s){s&&s.pendingBranch?Mi(i)?s.effects.push(...i):s.effects.push(i):rx(i)}const Qn=Symbol.for("v-fgt"),bA=Symbol.for("v-txt"),Qa=Symbol.for("v-cmt"),Vf=Symbol.for("v-stc"),nA=[];let $a=null;function Au(i=!1){nA.push($a=i?null:[])}function Hx(){nA.pop(),$a=nA[nA.length-1]||null}let dA=1;function cy(i,s=!1){dA+=i,i<0&&$a&&s&&($a.hasOnce=!0)}function jx(i){return i.dynamicChildren=dA>0?$a||rh:null,Hx(),dA>0&&$a&&$a.push(i),i}function du(i,s,u,d,y){return jx(He(i,s,u,d,y,!0))}function pd(i){return i?i.__v_isVNode===!0:!1}function au(i,s){return i.type===s.type&&i.key===s.key}const Q_=({key:i})=>i??null,od=({ref:i,ref_key:s,ref_for:u})=>(typeof i=="number"&&(i=""+i),i!=null?tn(i)||yr(i)||Ri(i)?{i:Sa,r:i,k:s,f:!!u}:i:null);function aA(i,s=null,u=null,d=0,y=null,C=i===Qn?0:1,I=!1,l=!1){const q={__v_isVNode:!0,__v_skip:!0,type:i,props:s,key:s&&Q_(s),ref:s&&od(s),scopeId:K0,slotScopeIds:null,children:u,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:C,patchFlag:d,dynamicProps:y,dynamicChildren:null,appContext:null,ctx:Sa};return l?(qg(q,u),C&128&&i.normalize(q)):u&&(q.shapeFlag|=tn(u)?8:16),dA>0&&!I&&$a&&(q.patchFlag>0||C&6)&&q.patchFlag!==32&&$a.push(q),q}const He=Jx;function Jx(i,s=null,u=null,d=0,y=null,C=!1){if((!i||i===gx)&&(i=Qa),pd(i)){const l=lc(i,s,!0);return u&&qg(l,u),dA>0&&!C&&$a&&(l.shapeFlag&6?$a[$a.indexOf(i)]=l:$a.push(l)),l.patchFlag=-2,l}if(rw(i)&&(i=i.__vccOpts),s){s=Yx(s);let{class:l,style:q}=s;l&&!tn(l)&&(s.class=Bg(l)),Or(q)&&(Pg(q)&&!Mi(q)&&(q=gn({},q)),s.style=Md(q))}const I=tn(i)?1:E_(i)?128:Z0(i)?64:Or(i)?4:Ri(i)?2:0;return aA(i,s,u,d,y,I,C,!0)}function Yx(i){return i?Pg(i)||m_(i)?gn({},i):i:null}function lc(i,s,u=!1,d=!1){const{props:y,ref:C,patchFlag:I,children:l,transition:q}=i,Y=s?ms(y||{},s):y,O={__v_isVNode:!0,__v_skip:!0,type:i.type,props:Y,key:Y&&Q_(Y),ref:s&&s.ref?u&&C?Mi(C)?C.concat(od(s)):[C,od(s)]:od(s):C,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:s&&i.type!==Qn?I===-1?16:I|16:I,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:q,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&lc(i.ssContent),ssFallback:i.ssFallback&&lc(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return q&&d&&uu(O,q.clone(O)),O}function fA(i=" ",s=0){return He(bA,null,i,s)}function Bo(i="",s=!1){return s?(Au(),du(Qa,null,i)):He(Qa,null,i)}function bo(i){return i==null||typeof i=="boolean"?He(Qa):Mi(i)?He(Qn,null,i.slice()):pd(i)?ac(i):He(bA,null,String(i))}function ac(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:lc(i)}function qg(i,s){let u=0;const{shapeFlag:d}=i;if(s==null)s=null;else if(Mi(s))u=16;else if(typeof s=="object")if(d&65){const y=s.default;y&&(y._c&&(y._d=!1),qg(i,y()),y._c&&(y._d=!0));return}else{u=32;const y=s._;!y&&!m_(s)?s._ctx=Sa:y===3&&Sa&&(Sa.slots._===1?s._=1:(s._=2,i.patchFlag|=1024))}else Ri(s)?(s={default:s,_ctx:Sa},u=32):(s=String(s),d&64?(u=16,s=[fA(s)]):u=8);i.children=s,i.shapeFlag|=u}function ms(...i){const s={};for(let u=0;u<i.length;u++){const d=i[u];for(const y in d)if(y==="class")s.class!==d.class&&(s.class=Bg([s.class,d.class]));else if(y==="style")s.style=Md([s.style,d.style]);else if(Qd(y)){const C=s[y],I=d[y];I&&C!==I&&!(Mi(C)&&C.includes(I))&&(s[y]=C?[].concat(C,I):I)}else y!==""&&(s[y]=d[y])}return s}function _o(i,s,u,d=null){Hs(i,s,7,[u,d])}const Kx=f_();let $x=0;function Zx(i,s,u){const d=i.type,y=(s?s.appContext:i.appContext)||Kx,C={uid:$x++,vnode:i,type:d,parent:s,appContext:y,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new B0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(y.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:__(d,y),emitsOptions:B_(d,y),emit:null,emitted:null,propsDefaults:Qr,inheritAttrs:d.inheritAttrs,ctx:Qr,data:Qr,props:Qr,attrs:Qr,slots:Qr,refs:Qr,setupState:Qr,setupContext:null,suspense:u,suspenseId:u?u.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return C.ctx={_:C},C.root=s?s.root:C,C.emit=Gx.bind(null,C),i.ce&&i.ce(C),C}let Nn=null;const xA=()=>Nn||Sa;let md,og;{const i=kd(),s=(u,d)=>{let y;return(y=i[u])||(y=i[u]=[]),y.push(d),C=>{y.length>1?y.forEach(I=>I(C)):y[0](C)}};md=s("__VUE_INSTANCE_SETTERS__",u=>Nn=u),og=s("__VUE_SSR_SETTERS__",u=>gA=u)}const wA=i=>{const s=Nn;return md(i),i.scope.on(),()=>{i.scope.off(),md(s)}},uy=()=>{Nn&&Nn.scope.off(),md(null)};function S_(i){return i.vnode.shapeFlag&4}let gA=!1;function Wx(i,s=!1,u=!1){s&&og(s);const{props:d,children:y}=i.vnode,C=S_(i);Cx(i,d,C,s),Sx(i,y,u);const I=C?Xx(i,s):void 0;return s&&og(!1),I}function Xx(i,s){const u=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,mx);const{setup:d}=u;if(d){uc();const y=i.setupContext=d.length>1?tw(i):null,C=wA(i),I=vA(d,i,0,[i.props,y]),l=_0(I);if(hc(),C(),(l||i.sp)&&!iA(i)&&a_(i),l){if(I.then(uy,uy),s)return I.then(q=>{hy(i,q)}).catch(q=>{Pd(q,i,0)});i.asyncDep=I}else hy(i,I)}else D_(i)}function hy(i,s,u){Ri(s)?i.type.__ssrInlineRender?i.ssrRender=s:i.render=s:Or(s)&&(i.setupState=V0(s)),D_(i)}function D_(i,s,u){const d=i.type;i.render||(i.render=d.render||wo);{const y=wA(i);uc();try{yx(i)}finally{hc(),y()}}}const ew={get(i,s){return Zn(i,"get",""),i[s]}};function tw(i){const s=u=>{i.exposed=u||{}};return{attrs:new Proxy(i.attrs,ew),slots:i.slots,emit:i.emit,expose:s}}function zd(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(V0(eg(i.exposed)),{get(s,u){if(u in s)return s[u];if(u in rA)return rA[u](i)},has(s,u){return u in s||u in rA}})):i.proxy}function iw(i,s=!0){return Ri(i)?i.displayName||i.name:i.name||s&&i.__name}function rw(i){return Ri(i)&&"__vccOpts"in i}const nt=(i,s)=>Wb(i,s,gA);function Wa(i,s,u){const d=arguments.length;return d===2?Or(s)&&!Mi(s)?pd(s)?He(i,null,[s]):He(i,s):He(i,null,s):(d>3?u=Array.prototype.slice.call(arguments,2):d===3&&pd(u)&&(u=[u]),He(i,s,u))}const nw="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lg;const Ay=typeof window<"u"&&window.trustedTypes;if(Ay)try{lg=Ay.createPolicy("vue",{createHTML:i=>i})}catch{}const k_=lg?i=>lg.createHTML(i):i=>i,aw="http://www.w3.org/2000/svg",sw="http://www.w3.org/1998/Math/MathML",cl=typeof document<"u"?document:null,dy=cl&&cl.createElement("template"),ow={insert:(i,s,u)=>{s.insertBefore(i,u||null)},remove:i=>{const s=i.parentNode;s&&s.removeChild(i)},createElement:(i,s,u,d)=>{const y=s==="svg"?cl.createElementNS(aw,i):s==="mathml"?cl.createElementNS(sw,i):u?cl.createElement(i,{is:u}):cl.createElement(i);return i==="select"&&d&&d.multiple!=null&&y.setAttribute("multiple",d.multiple),y},createText:i=>cl.createTextNode(i),createComment:i=>cl.createComment(i),setText:(i,s)=>{i.nodeValue=s},setElementText:(i,s)=>{i.textContent=s},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>cl.querySelector(i),setScopeId(i,s){i.setAttribute(s,"")},insertStaticContent(i,s,u,d,y,C){const I=u?u.previousSibling:s.lastChild;if(y&&(y===C||y.nextSibling))for(;s.insertBefore(y.cloneNode(!0),u),!(y===C||!(y=y.nextSibling)););else{dy.innerHTML=k_(d==="svg"?`<svg>${i}</svg>`:d==="mathml"?`<math>${i}</math>`:i);const l=dy.content;if(d==="svg"||d==="mathml"){const q=l.firstChild;for(;q.firstChild;)l.appendChild(q.firstChild);l.removeChild(q)}s.insertBefore(l,u)}return[I?I.nextSibling:s.firstChild,u?u.previousSibling:s.lastChild]}},ec="transition",Jh="animation",lh=Symbol("_vtc"),M_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},T_=gn({},t_,M_),lw=i=>(i.displayName="Transition",i.props=T_,i),Gd=lw((i,{slots:s})=>Wa(ox,P_(i),s)),iu=(i,s=[])=>{Mi(i)?i.forEach(u=>u(...s)):i&&i(...s)},fy=i=>i?Mi(i)?i.some(s=>s.length>1):i.length>1:!1;function P_(i){const s={};for(const st in i)st in M_||(s[st]=i[st]);if(i.css===!1)return s;const{name:u="v",type:d,duration:y,enterFromClass:C=`${u}-enter-from`,enterActiveClass:I=`${u}-enter-active`,enterToClass:l=`${u}-enter-to`,appearFromClass:q=C,appearActiveClass:Y=I,appearToClass:O=l,leaveFromClass:H=`${u}-leave-from`,leaveActiveClass:V=`${u}-leave-active`,leaveToClass:Ae=`${u}-leave-to`}=i,Ve=cw(y),Be=Ve&&Ve[0],ot=Ve&&Ve[1],{onBeforeEnter:pt,onEnter:_t,onEnterCancelled:ut,onLeave:ft,onLeaveCancelled:Ft,onBeforeAppear:Ut=pt,onAppear:zt=_t,onAppearCancelled:Zt=ut}=s,Bt=(st,Et,ni,Li)=>{st._enterCancelled=Li,ic(st,Et?O:l),ic(st,Et?Y:I),ni&&ni()},Gt=(st,Et)=>{st._isLeaving=!1,ic(st,H),ic(st,Ae),ic(st,V),Et&&Et()},mt=st=>(Et,ni)=>{const Li=st?zt:_t,wi=()=>Bt(Et,st,ni);iu(Li,[Et,wi]),gy(()=>{ic(Et,st?q:C),Io(Et,st?O:l),fy(Li)||py(Et,d,Be,wi)})};return gn(s,{onBeforeEnter(st){iu(pt,[st]),Io(st,C),Io(st,I)},onBeforeAppear(st){iu(Ut,[st]),Io(st,q),Io(st,Y)},onEnter:mt(!1),onAppear:mt(!0),onLeave(st,Et){st._isLeaving=!0;const ni=()=>Gt(st,Et);Io(st,H),st._enterCancelled?(Io(st,V),cg()):(cg(),Io(st,V)),gy(()=>{st._isLeaving&&(ic(st,H),Io(st,Ae),fy(ft)||py(st,d,ot,ni))}),iu(ft,[st,ni])},onEnterCancelled(st){Bt(st,!1,void 0,!0),iu(ut,[st])},onAppearCancelled(st){Bt(st,!0,void 0,!0),iu(Zt,[st])},onLeaveCancelled(st){Gt(st),iu(Ft,[st])}})}function cw(i){if(i==null)return null;if(Or(i))return[qf(i.enter),qf(i.leave)];{const s=qf(i);return[s,s]}}function qf(i){return yb(i)}function Io(i,s){s.split(/\s+/).forEach(u=>u&&i.classList.add(u)),(i[lh]||(i[lh]=new Set)).add(s)}function ic(i,s){s.split(/\s+/).forEach(d=>d&&i.classList.remove(d));const u=i[lh];u&&(u.delete(s),u.size||(i[lh]=void 0))}function gy(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let uw=0;function py(i,s,u,d){const y=i._endId=++uw,C=()=>{y===i._endId&&d()};if(u!=null)return setTimeout(C,u);const{type:I,timeout:l,propCount:q}=R_(i,s);if(!I)return d();const Y=I+"end";let O=0;const H=()=>{i.removeEventListener(Y,V),C()},V=Ae=>{Ae.target===i&&++O>=q&&H()};setTimeout(()=>{O<q&&H()},l+1),i.addEventListener(Y,V)}function R_(i,s){const u=window.getComputedStyle(i),d=Ve=>(u[Ve]||"").split(", "),y=d(`${ec}Delay`),C=d(`${ec}Duration`),I=my(y,C),l=d(`${Jh}Delay`),q=d(`${Jh}Duration`),Y=my(l,q);let O=null,H=0,V=0;s===ec?I>0&&(O=ec,H=I,V=C.length):s===Jh?Y>0&&(O=Jh,H=Y,V=q.length):(H=Math.max(I,Y),O=H>0?I>Y?ec:Jh:null,V=O?O===ec?C.length:q.length:0);const Ae=O===ec&&/\b(transform|all)(,|$)/.test(d(`${ec}Property`).toString());return{type:O,timeout:H,propCount:V,hasTransform:Ae}}function my(i,s){for(;i.length<s.length;)i=i.concat(i);return Math.max(...s.map((u,d)=>yy(u)+yy(i[d])))}function yy(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function cg(){return document.body.offsetHeight}function hw(i,s,u){const d=i[lh];d&&(s=(s?[s,...d]:[...d]).join(" ")),s==null?i.removeAttribute("class"):u?i.setAttribute("class",s):i.className=s}const yd=Symbol("_vod"),L_=Symbol("_vsh"),Aw={beforeMount(i,{value:s},{transition:u}){i[yd]=i.style.display==="none"?"":i.style.display,u&&s?u.beforeEnter(i):Yh(i,s)},mounted(i,{value:s},{transition:u}){u&&s&&u.enter(i)},updated(i,{value:s,oldValue:u},{transition:d}){!s!=!u&&(d?s?(d.beforeEnter(i),Yh(i,!0),d.enter(i)):d.leave(i,()=>{Yh(i,!1)}):Yh(i,s))},beforeUnmount(i,{value:s}){Yh(i,s)}};function Yh(i,s){i.style.display=s?i[yd]:"none",i[L_]=!s}const dw=Symbol(""),fw=/(^|;)\s*display\s*:/;function gw(i,s,u){const d=i.style,y=tn(u);let C=!1;if(u&&!y){if(s)if(tn(s))for(const I of s.split(";")){const l=I.slice(0,I.indexOf(":")).trim();u[l]==null&&ld(d,l,"")}else for(const I in s)u[I]==null&&ld(d,I,"");for(const I in u)I==="display"&&(C=!0),ld(d,I,u[I])}else if(y){if(s!==u){const I=d[dw];I&&(u+=";"+I),d.cssText=u,C=fw.test(u)}}else s&&i.removeAttribute("style");yd in i&&(i[yd]=C?d.display:"",i[L_]&&(d.display="none"))}const _y=/\s*!important$/;function ld(i,s,u){if(Mi(u))u.forEach(d=>ld(i,s,d));else if(u==null&&(u=""),s.startsWith("--"))i.setProperty(s,u);else{const d=pw(i,s);_y.test(u)?i.setProperty(hu(d),u.replace(_y,""),"important"):i[d]=u}}const Iy=["Webkit","Moz","ms"],Hf={};function pw(i,s){const u=Hf[s];if(u)return u;let d=Da(s);if(d!=="filter"&&d in i)return Hf[s]=d;d=dl(d);for(let y=0;y<Iy.length;y++){const C=Iy[y]+d;if(C in i)return Hf[s]=C}return s}const vy="http://www.w3.org/1999/xlink";function by(i,s,u,d,y,C=wb(s)){d&&s.startsWith("xlink:")?u==null?i.removeAttributeNS(vy,s.slice(6,s.length)):i.setAttributeNS(vy,s,u):u==null||C&&!x0(u)?i.removeAttribute(s):i.setAttribute(s,C?"":cc(u)?String(u):u)}function xy(i,s,u,d,y){if(s==="innerHTML"||s==="textContent"){u!=null&&(i[s]=s==="innerHTML"?k_(u):u);return}const C=i.tagName;if(s==="value"&&C!=="PROGRESS"&&!C.includes("-")){const l=C==="OPTION"?i.getAttribute("value")||"":i.value,q=u==null?i.type==="checkbox"?"on":"":String(u);(l!==q||!("_value"in i))&&(i.value=q),u==null&&i.removeAttribute(s),i._value=u;return}let I=!1;if(u===""||u==null){const l=typeof i[s];l==="boolean"?u=x0(u):u==null&&l==="string"?(u="",I=!0):l==="number"&&(u=0,I=!0)}try{i[s]=u}catch{}I&&i.removeAttribute(y||s)}function mw(i,s,u,d){i.addEventListener(s,u,d)}function yw(i,s,u,d){i.removeEventListener(s,u,d)}const wy=Symbol("_vei");function _w(i,s,u,d,y=null){const C=i[wy]||(i[wy]={}),I=C[s];if(d&&I)I.value=d;else{const[l,q]=Iw(s);if(d){const Y=C[s]=xw(d,y);mw(i,l,Y,q)}else I&&(yw(i,l,I,q),C[s]=void 0)}}const Cy=/(?:Once|Passive|Capture)$/;function Iw(i){let s;if(Cy.test(i)){s={};let d;for(;d=i.match(Cy);)i=i.slice(0,i.length-d[0].length),s[d[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):hu(i.slice(2)),s]}let jf=0;const vw=Promise.resolve(),bw=()=>jf||(vw.then(()=>jf=0),jf=Date.now());function xw(i,s){const u=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=u.attached)return;Hs(ww(d,u.value),s,5,[d])};return u.value=i,u.attached=bw(),u}function ww(i,s){if(Mi(s)){const u=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{u.call(i),i._stopped=!0},s.map(d=>y=>!y._stopped&&d&&d(y))}else return s}const By=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Cw=(i,s,u,d,y,C)=>{const I=y==="svg";s==="class"?hw(i,d,I):s==="style"?gw(i,u,d):Qd(s)?xg(s)||_w(i,s,u,d,C):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Bw(i,s,d,I))?(xy(i,s,d),!i.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&by(i,s,d,I,C,s!=="value")):i._isVueCE&&(/[A-Z]/.test(s)||!tn(d))?xy(i,Da(s),d,C,s):(s==="true-value"?i._trueValue=d:s==="false-value"&&(i._falseValue=d),by(i,s,d,I))};function Bw(i,s,u,d){if(d)return!!(s==="innerHTML"||s==="textContent"||s in i&&By(s)&&Ri(u));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&i.tagName==="INPUT"||s==="type"&&i.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const y=i.tagName;if(y==="IMG"||y==="VIDEO"||y==="CANVAS"||y==="SOURCE")return!1}return By(s)&&tn(u)?!1:s in i}const F_=new WeakMap,z_=new WeakMap,_d=Symbol("_moveCb"),Ey=Symbol("_enterCb"),Ew=i=>(delete i.props.mode,i),Qw=Ew({name:"TransitionGroup",props:gn({},T_,{tag:String,moveClass:String}),setup(i,{slots:s}){const u=xA(),d=e_();let y,C;return Gg(()=>{if(!y.length)return;const I=i.moveClass||`${i.name||"v"}-move`;if(!Mw(y[0].el,u.vnode.el,I))return;y.forEach(Sw),y.forEach(Dw);const l=y.filter(kw);cg(),l.forEach(q=>{const Y=q.el,O=Y.style;Io(Y,I),O.transform=O.webkitTransform=O.transitionDuration="";const H=Y[_d]=V=>{V&&V.target!==Y||(!V||/transform$/.test(V.propertyName))&&(Y.removeEventListener("transitionend",H),Y[_d]=null,ic(Y,I))};Y.addEventListener("transitionend",H)})}),()=>{const I=ir(i),l=P_(I);let q=I.tag||Qn;if(y=[],C)for(let Y=0;Y<C.length;Y++){const O=C[Y];O.el&&O.el instanceof Element&&(y.push(O),uu(O,AA(O,l,d,u)),F_.set(O,O.el.getBoundingClientRect()))}C=s.default?Fg(s.default()):[];for(let Y=0;Y<C.length;Y++){const O=C[Y];O.key!=null&&uu(O,AA(O,l,d,u))}return He(q,null,C)}}}),Hg=Qw;function Sw(i){const s=i.el;s[_d]&&s[_d](),s[Ey]&&s[Ey]()}function Dw(i){z_.set(i,i.el.getBoundingClientRect())}function kw(i){const s=F_.get(i),u=z_.get(i),d=s.left-u.left,y=s.top-u.top;if(d||y){const C=i.el.style;return C.transform=C.webkitTransform=`translate(${d}px,${y}px)`,C.transitionDuration="0s",i}}function Mw(i,s,u){const d=i.cloneNode(),y=i[lh];y&&y.forEach(l=>{l.split(/\s+/).forEach(q=>q&&d.classList.remove(q))}),u.split(/\s+/).forEach(l=>l&&d.classList.add(l)),d.style.display="none";const C=s.nodeType===1?s:s.parentNode;C.appendChild(d);const{hasTransform:I}=R_(d);return C.removeChild(d),I}const Tw=gn({patchProp:Cw},ow);let Qy;function Pw(){return Qy||(Qy=kx(Tw))}const Rw=(...i)=>{const s=Pw().createApp(...i),{mount:u}=s;return s.mount=d=>{const y=Fw(d);if(!y)return;const C=s._component;!Ri(C)&&!C.render&&!C.template&&(C.template=y.innerHTML),y.nodeType===1&&(y.textContent="");const I=u(y,!1,Lw(y));return y instanceof Element&&(y.removeAttribute("v-cloak"),y.setAttribute("data-v-app","")),I},s};function Lw(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Fw(i){return tn(i)?document.querySelector(i):i}function pA(i,s){let u;function d(){u=Cb(),u.run(()=>s.length?s(()=>{u==null||u.stop(),d()}):s())}ri(i,y=>{y&&!u?d():y||(u==null||u.stop(),u=void 0)},{immediate:!0}),E0(()=>{u==null||u.stop()})}const fa=typeof window<"u",jg=fa&&"IntersectionObserver"in window,zw=fa&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function Gw(i,s,u){const d=s.length-1;if(d<0)return i===void 0?u:i;for(let y=0;y<d;y++){if(i==null)return u;i=i[s[y]]}return i==null||i[s[d]]===void 0?u:i[s[d]]}function Nd(i,s){if(i===s)return!0;if(i instanceof Date&&s instanceof Date&&i.getTime()!==s.getTime()||i!==Object(i)||s!==Object(s))return!1;const u=Object.keys(i);return u.length!==Object.keys(s).length?!1:u.every(d=>Nd(i[d],s[d]))}function Sy(i,s,u){return i==null||!s||typeof s!="string"?u:i[s]!==void 0?i[s]:(s=s.replace(/\[(\w+)\]/g,".$1"),s=s.replace(/^\./,""),Gw(i,s.split("."),u))}function G_(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:i},(u,d)=>s+d)}function hr(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(i==null||i===""))return isNaN(+i)?String(i):isFinite(+i)?`${Number(i)}${s}`:void 0}function Nw(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function Dy(i){let s;return i!==null&&typeof i=="object"&&((s=Object.getPrototypeOf(i))===Object.prototype||s===null)}function Uw(i){if(i&&"$el"in i){const s=i.$el;return(s==null?void 0:s.nodeType)===Node.TEXT_NODE?s.nextElementSibling:s}return i}const ky=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function Jf(i,s){return s.every(u=>i.hasOwnProperty(u))}function Ow(i,s){const u={},d=new Set(Object.keys(i));for(const y of s)d.has(y)&&(u[y]=i[y]);return u}function My(i,s,u){const d=Object.create(null),y=Object.create(null);for(const C in i)s.some(I=>I instanceof RegExp?I.test(C):I===C)&&!(u!=null&&u.some(I=>I===C))?d[C]=i[C]:y[C]=i[C];return[d,y]}function Vw(i,s){const u={...i};return s.forEach(d=>delete u[d]),u}function qw(i,s){const u={};return s.forEach(d=>u[d]=i[d]),u}const Hw=/^on[^a-z]/,jw=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function N_(i){const[s,u]=My(i,[Hw]),d=Vw(s,jw),[y,C]=My(u,["class","style","id",/^data-/]);return Object.assign(y,s),Object.assign(C,d),[y,C]}function oc(i){return i==null?[]:Array.isArray(i)?i:[i]}function Id(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(s,Math.min(u,i))}function Ty(i,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return i+u.repeat(Math.max(0,s-i.length))}function Py(i,s){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,s-i.length))+i}function Jw(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const u=[];let d=0;for(;d<i.length;)u.push(i.substr(d,s)),d+=s;return u}function Za(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0;const d={};for(const y in i)d[y]=i[y];for(const y in s){const C=i[y],I=s[y];if(Dy(C)&&Dy(I)){d[y]=Za(C,I,u);continue}if(u&&Array.isArray(C)&&Array.isArray(I)){d[y]=u(C,I);continue}d[y]=I}return d}function U_(i){return i.map(s=>s.type===Qn?U_(s.children):s).flat()}function ou(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(ou.cache.has(i))return ou.cache.get(i);const s=i.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return ou.cache.set(i,s),s}ou.cache=new Map;function th(i,s){if(!s||typeof s!="object")return[];if(Array.isArray(s))return s.map(u=>th(i,u)).flat(1);if(s.suspense)return th(i,s.ssContent);if(Array.isArray(s.children))return s.children.map(u=>th(i,u)).flat(1);if(s.component){if(Object.getOwnPropertySymbols(s.component.provides).includes(i))return[s.component];if(s.component.subTree)return th(i,s.component.subTree).flat(1)}return[]}function O_(i){const s=Gn({}),u=nt(i);return Ac(()=>{for(const d in u.value)s[d]=u.value[d]},{flush:"sync"}),Rg(s)}function ug(i,s){return i.includes(s)}const vd=()=>[Function,Array];function Ry(i,s){return s="on"+dl(s),!!(i[s]||i[`${s}Once`]||i[`${s}Capture`]||i[`${s}OnceCapture`]||i[`${s}CaptureOnce`])}function Yw(i,s){if(!(fa&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${s})`)))return null;try{return!!i&&i.matches(s)}catch{return null}}function Kw(){const i=sr(),s=u=>{i.value=u};return Object.defineProperty(s,"value",{enumerable:!0,get:()=>i.value,set:u=>i.value=u}),Object.defineProperty(s,"el",{enumerable:!0,get:()=>Uw(i.value)}),s}const $w=["top","bottom"],Zw=["start","end","left","right"];function Ww(i,s){let[u,d]=i.split(" ");return d||(d=ug($w,u)?"start":ug(Zw,u)?"top":"center"),{side:Ly(u,s),align:Ly(d,s)}}function Ly(i,s){return i==="start"?s?"right":"left":i==="end"?s?"left":"right":i}const Zu=2.4,Fy=.2126729,zy=.7151522,Gy=.072175,Xw=.55,eC=.58,tC=.57,iC=.62,id=.03,Ny=1.45,rC=5e-4,nC=1.25,aC=1.25,Uy=.078,Oy=12.82051282051282,rd=.06,Vy=.001;function qy(i,s){const u=(i.r/255)**Zu,d=(i.g/255)**Zu,y=(i.b/255)**Zu,C=(s.r/255)**Zu,I=(s.g/255)**Zu,l=(s.b/255)**Zu;let q=u*Fy+d*zy+y*Gy,Y=C*Fy+I*zy+l*Gy;if(q<=id&&(q+=(id-q)**Ny),Y<=id&&(Y+=(id-Y)**Ny),Math.abs(Y-q)<rC)return 0;let O;if(Y>q){const H=(Y**Xw-q**eC)*nC;O=H<Vy?0:H<Uy?H-H*Oy*rd:H-rd}else{const H=(Y**iC-q**tC)*aC;O=H>-Vy?0:H>-Uy?H-H*Oy*rd:H+rd}return O*100}const bd=.20689655172413793,sC=i=>i>bd**3?Math.cbrt(i):i/(3*bd**2)+4/29,oC=i=>i>bd?i**3:3*bd**2*(i-4/29);function V_(i){const s=sC,u=s(i[1]);return[116*u-16,500*(s(i[0]/.95047)-u),200*(u-s(i[2]/1.08883))]}function q_(i){const s=oC,u=(i[0]+16)/116;return[s(u+i[1]/500)*.95047,s(u),s(u-i[2]/200)*1.08883]}const lC=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],cC=i=>i<=.0031308?i*12.92:1.055*i**(1/2.4)-.055,uC=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],hC=i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4;function H_(i){const s=Array(3),u=cC,d=lC;for(let y=0;y<3;++y)s[y]=Math.round(Id(u(d[y][0]*i[0]+d[y][1]*i[1]+d[y][2]*i[2]))*255);return{r:s[0],g:s[1],b:s[2]}}function Jg(i){let{r:s,g:u,b:d}=i;const y=[0,0,0],C=hC,I=uC;s=C(s/255),u=C(u/255),d=C(d/255);for(let l=0;l<3;++l)y[l]=I[l][0]*s+I[l][1]*u+I[l][2]*d;return y}function hg(i){return!!i&&/^(#|var\(--|(rgb|hsl)a?\()/.test(i)}function AC(i){return hg(i)&&!/^((rgb|hsl)a?\()?var\(--/.test(i)}const Hy=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,dC={rgb:(i,s,u,d)=>({r:i,g:s,b:u,a:d}),rgba:(i,s,u,d)=>({r:i,g:s,b:u,a:d}),hsl:(i,s,u,d)=>jy({h:i,s,l:u,a:d}),hsla:(i,s,u,d)=>jy({h:i,s,l:u,a:d}),hsv:(i,s,u,d)=>mA({h:i,s,v:u,a:d}),hsva:(i,s,u,d)=>mA({h:i,s,v:u,a:d})};function xo(i){if(typeof i=="number")return{r:(i&16711680)>>16,g:(i&65280)>>8,b:i&255};if(typeof i=="string"&&Hy.test(i)){const{groups:s}=i.match(Hy),{fn:u,values:d}=s,y=d.split(/,\s*/).map(C=>C.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(u)?parseFloat(C)/100:parseFloat(C));return dC[u](...y)}else if(typeof i=="string"){let s=i.startsWith("#")?i.slice(1):i;return[3,4].includes(s.length)?s=s.split("").map(u=>u+u).join(""):[6,8].includes(s.length),gC(s)}else if(typeof i=="object"){if(Jf(i,["r","g","b"]))return i;if(Jf(i,["h","s","l"]))return mA(j_(i));if(Jf(i,["h","s","v"]))return mA(i)}throw new TypeError(`Invalid color: ${i==null?i:String(i)||i.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function mA(i){const{h:s,s:u,v:d,a:y}=i,C=l=>{const q=(l+s/60)%6;return d-d*u*Math.max(Math.min(q,4-q,1),0)},I=[C(5),C(3),C(1)].map(l=>Math.round(l*255));return{r:I[0],g:I[1],b:I[2],a:y}}function jy(i){return mA(j_(i))}function j_(i){const{h:s,s:u,l:d,a:y}=i,C=d+u*Math.min(d,1-d),I=C===0?0:2-2*d/C;return{h:s,s:I,v:C,a:y}}function nd(i){const s=Math.round(i).toString(16);return("00".substr(0,2-s.length)+s).toUpperCase()}function fC(i){let{r:s,g:u,b:d,a:y}=i;return`#${[nd(s),nd(u),nd(d),y!==void 0?nd(Math.round(y*255)):""].join("")}`}function gC(i){i=pC(i);let[s,u,d,y]=Jw(i,2).map(C=>parseInt(C,16));return y=y===void 0?y:y/255,{r:s,g:u,b:d,a:y}}function pC(i){return i.startsWith("#")&&(i=i.slice(1)),i=i.replace(/([^0-9a-f])/gi,"F"),(i.length===3||i.length===4)&&(i=i.split("").map(s=>s+s).join("")),i.length!==6&&(i=Ty(Ty(i,6),8,"F")),i}function mC(i,s){const u=V_(Jg(i));return u[0]=u[0]+s*10,H_(q_(u))}function yC(i,s){const u=V_(Jg(i));return u[0]=u[0]-s*10,H_(q_(u))}function _C(i){const s=xo(i);return Jg(s)[1]}function J_(i){const s=Math.abs(qy(xo(0),xo(i)));return Math.abs(qy(xo(16777215),xo(i)))>Math.min(s,50)?"#fff":"#000"}function yi(i,s){return u=>Object.keys(i).reduce((d,y)=>{const I=typeof i[y]=="object"&&i[y]!=null&&!Array.isArray(i[y])?i[y]:{type:i[y]};return u&&y in u?d[y]={...I,default:u[y]}:d[y]=I,s&&!d[y].source&&(d[y].source=s),d},{})}const Sr=yi({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function ga(i,s){const u=xA();if(!u)throw new Error(`[Vuetify] ${i} must be called from inside a setup function`);return u}function pl(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const s=ga(i).type;return ou((s==null?void 0:s.aliasName)||(s==null?void 0:s.name))}let Y_=0,cd=new WeakMap;function ml(){const i=ga("getUid");if(cd.has(i))return cd.get(i);{const s=Y_++;return cd.set(i,s),s}}ml.reset=()=>{Y_=0,cd=new WeakMap};function IC(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ga("injectSelf");const{provides:u}=s;if(u&&i in u)return u[i]}const ch=Symbol.for("vuetify:defaults");function vC(i){return Br(i)}function Yg(){const i=Vi(ch);if(!i)throw new Error("[Vuetify] Could not find defaults instance");return i}function CA(i,s){const u=Yg(),d=Br(i),y=nt(()=>{if(ps(s==null?void 0:s.disabled))return u.value;const I=ps(s==null?void 0:s.scoped),l=ps(s==null?void 0:s.reset),q=ps(s==null?void 0:s.root);if(d.value==null&&!(I||l||q))return u.value;let Y=Za(d.value,{prev:u.value});if(I)return Y;if(l||q){const O=Number(l||1/0);for(let H=0;H<=O&&!(!Y||!("prev"in Y));H++)Y=Y.prev;return Y&&typeof q=="string"&&q in Y&&(Y=Za(Za(Y,{prev:Y}),Y[q])),Y}return Y.prev?Za(Y.prev,Y):Y});return br(ch,y),y}function bC(i,s){var u,d;return typeof((u=i.props)==null?void 0:u[s])<"u"||typeof((d=i.props)==null?void 0:d[ou(s)])<"u"}function xC(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yg();const d=ga("useDefaults");if(s=s??d.type.name??d.type.__name,!s)throw new Error("[Vuetify] Could not determine component name");const y=nt(()=>{var q;return(q=u.value)==null?void 0:q[i._as??s]}),C=new Proxy(i,{get(q,Y){var H,V,Ae,Ve,Be,ot,pt;const O=Reflect.get(q,Y);return Y==="class"||Y==="style"?[(H=y.value)==null?void 0:H[Y],O].filter(_t=>_t!=null):typeof Y=="string"&&!bC(d.vnode,Y)?((V=y.value)==null?void 0:V[Y])!==void 0?(Ae=y.value)==null?void 0:Ae[Y]:((Be=(Ve=u.value)==null?void 0:Ve.global)==null?void 0:Be[Y])!==void 0?(pt=(ot=u.value)==null?void 0:ot.global)==null?void 0:pt[Y]:O:O}}),I=sr();Ac(()=>{if(y.value){const q=Object.entries(y.value).filter(Y=>{let[O]=Y;return O.startsWith(O[0].toUpperCase())});I.value=q.length?Object.fromEntries(q):void 0}else I.value=void 0});function l(){const q=IC(ch,d);br(ch,nt(()=>I.value?Za((q==null?void 0:q.value)??{},I.value):q==null?void 0:q.value))}return{props:C,provideSubDefaults:l}}function BA(i){if(i._setup=i._setup??i.setup,!i.name)return i;if(i._setup){i.props=yi(i.props??{},i.name)();const s=Object.keys(i.props).filter(u=>u!=="class"&&u!=="style");i.filterProps=function(d){return Ow(d,s)},i.props._as=String,i.setup=function(d,y){const C=Yg();if(!C.value)return i._setup(d,y);const{props:I,provideSubDefaults:l}=xC(d,d._as??i.name,C),q=i._setup(I,y);return l(),q}}return i}function rr(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return s=>(i?BA:or)(s)}function K_(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",u=arguments.length>2?arguments[2]:void 0;return rr()({name:u??dl(Da(i.replace(/__/g,"-"))),props:{tag:{type:String,default:s},...Sr()},setup(d,y){let{slots:C}=y;return()=>{var I;return Wa(d.tag,{class:[i,d.class],style:d.style},(I=C.default)==null?void 0:I.call(C))}}})}function Dr(i){const s=ga("useRender");s.render=i}function Co(i,s,u){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:H=>H,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:H=>H;const C=ga("useProxiedModel"),I=Br(i[s]!==void 0?i[s]:u),l=ou(s),Y=nt(l!==s?()=>{var H,V,Ae,Ve;return i[s],!!(((H=C.vnode.props)!=null&&H.hasOwnProperty(s)||(V=C.vnode.props)!=null&&V.hasOwnProperty(l))&&((Ae=C.vnode.props)!=null&&Ae.hasOwnProperty(`onUpdate:${s}`)||(Ve=C.vnode.props)!=null&&Ve.hasOwnProperty(`onUpdate:${l}`)))}:()=>{var H,V;return i[s],!!((H=C.vnode.props)!=null&&H.hasOwnProperty(s)&&((V=C.vnode.props)!=null&&V.hasOwnProperty(`onUpdate:${s}`)))});pA(()=>!Y.value,()=>{ri(()=>i[s],H=>{I.value=H})});const O=nt({get(){const H=i[s];return d(Y.value?H:I.value)},set(H){const V=y(H),Ae=ir(Y.value?i[s]:I.value);Ae===V||d(Ae)===H||(I.value=V,C==null||C.emit(`update:${s}`,V))}});return Object.defineProperty(O,"externalValue",{get:()=>Y.value?i[s]:I.value}),O}const wC={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},Jy="$vuetify.",Yy=(i,s)=>i.replace(/\{(\d+)\}/g,(u,d)=>String(s[+d])),$_=(i,s,u)=>function(d){for(var y=arguments.length,C=new Array(y>1?y-1:0),I=1;I<y;I++)C[I-1]=arguments[I];if(!d.startsWith(Jy))return Yy(d,C);const l=d.replace(Jy,""),q=i.value&&u.value[i.value],Y=s.value&&u.value[s.value];let O=Sy(q,l,null);return O||(`${d}${i.value}`,O=Sy(Y,l,null)),O||(O=d),typeof O!="string"&&(O=d),Yy(O,C)};function Z_(i,s){return(u,d)=>new Intl.NumberFormat([i.value,s.value],d).format(u)}function Yf(i,s,u){const d=Co(i,s,i[s]??u.value);return d.value=i[s]??u.value,ri(u,y=>{i[s]==null&&(d.value=u.value)}),d}function W_(i){return s=>{const u=Yf(s,"locale",i.current),d=Yf(s,"fallback",i.fallback),y=Yf(s,"messages",i.messages);return{name:"vuetify",current:u,fallback:d,messages:y,t:$_(u,d,y),n:Z_(u,d),provide:W_({current:u,fallback:d,messages:y})}}}function CC(i){const s=sr((i==null?void 0:i.locale)??"en"),u=sr((i==null?void 0:i.fallback)??"en"),d=Br({en:wC,...i==null?void 0:i.messages});return{name:"vuetify",current:s,fallback:u,messages:d,t:$_(s,u,d),n:Z_(s,u),provide:W_({current:s,fallback:u,messages:d})}}const xd=Symbol.for("vuetify:locale");function BC(i){return i.name!=null}function EC(i){const s=i!=null&&i.adapter&&BC(i==null?void 0:i.adapter)?i==null?void 0:i.adapter:CC(i),u=DC(s,i);return{...s,...u}}function QC(){const i=Vi(xd);if(!i)throw new Error("[Vuetify] Could not find injected locale instance");return i}function SC(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function DC(i,s){const u=Br((s==null?void 0:s.rtl)??SC()),d=nt(()=>u.value[i.current.value]??!1);return{isRtl:d,rtl:u,rtlClasses:nt(()=>`v-locale--is-${d.value?"rtl":"ltr"}`)}}function hh(){const i=Vi(xd);if(!i)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:i.isRtl,rtlClasses:i.rtlClasses}}const Ud={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function kC(i,s,u){const d=[];let y=[];const C=X_(i),I=eI(i),l=u??Ud[s.slice(-2).toUpperCase()]??0,q=(C.getDay()-l+7)%7,Y=(I.getDay()-l+7)%7;for(let O=0;O<q;O++){const H=new Date(C);H.setDate(H.getDate()-(q-O)),y.push(H)}for(let O=1;O<=I.getDate();O++){const H=new Date(i.getFullYear(),i.getMonth(),O);y.push(H),y.length===7&&(d.push(y),y=[])}for(let O=1;O<7-Y;O++){const H=new Date(I);H.setDate(H.getDate()+O),y.push(H)}return y.length>0&&d.push(y),d}function MC(i,s,u){const d=u??Ud[s.slice(-2).toUpperCase()]??0,y=new Date(i);for(;y.getDay()!==d;)y.setDate(y.getDate()-1);return y}function TC(i,s){const u=new Date(i),d=((Ud[s.slice(-2).toUpperCase()]??0)+6)%7;for(;u.getDay()!==d;)u.setDate(u.getDate()+1);return u}function X_(i){return new Date(i.getFullYear(),i.getMonth(),1)}function eI(i){return new Date(i.getFullYear(),i.getMonth()+1,0)}function PC(i){const s=i.split("-").map(Number);return new Date(s[0],s[1]-1,s[2])}const RC=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function tI(i){if(i==null)return new Date;if(i instanceof Date)return i;if(typeof i=="string"){let s;if(RC.test(i))return PC(i);if(s=Date.parse(i),!isNaN(s))return new Date(s)}return null}const Ky=new Date(2e3,0,2);function LC(i,s){const u=s??Ud[i.slice(-2).toUpperCase()]??0;return G_(7).map(d=>{const y=new Date(Ky);return y.setDate(Ky.getDate()+u+d),new Intl.DateTimeFormat(i,{weekday:"narrow"}).format(y)})}function FC(i,s,u,d){const y=tI(i)??new Date,C=d==null?void 0:d[s];if(typeof C=="function")return C(y,s,u);let I={};switch(s){case"fullDate":I={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":I={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const l=y.getDate(),q=new Intl.DateTimeFormat(u,{month:"long"}).format(y);return`${l} ${q}`;case"normalDateWithWeekday":I={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":I={month:"short",day:"numeric"};break;case"year":I={year:"numeric"};break;case"month":I={month:"long"};break;case"monthShort":I={month:"short"};break;case"monthAndYear":I={month:"long",year:"numeric"};break;case"monthAndDate":I={month:"long",day:"numeric"};break;case"weekday":I={weekday:"long"};break;case"weekdayShort":I={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(u).format(y.getDate());case"hours12h":I={hour:"numeric",hour12:!0};break;case"hours24h":I={hour:"numeric",hour12:!1};break;case"minutes":I={minute:"numeric"};break;case"seconds":I={second:"numeric"};break;case"fullTime":I={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime12h":I={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime24h":I={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"fullDateTime":I={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime12h":I={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime24h":I={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDate":I={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":I={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDateTime12h":I={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"keyboardDateTime24h":I={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;default:I=C??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(u,I).format(y)}function zC(i,s){const u=i.toJsDate(s),d=u.getFullYear(),y=Py(String(u.getMonth()+1),2,"0"),C=Py(String(u.getDate()),2,"0");return`${d}-${y}-${C}`}function GC(i){const[s,u,d]=i.split("-").map(Number);return new Date(s,u-1,d)}function NC(i,s){const u=new Date(i);return u.setMinutes(u.getMinutes()+s),u}function UC(i,s){const u=new Date(i);return u.setHours(u.getHours()+s),u}function OC(i,s){const u=new Date(i);return u.setDate(u.getDate()+s),u}function VC(i,s){const u=new Date(i);return u.setDate(u.getDate()+s*7),u}function qC(i,s){const u=new Date(i);return u.setDate(1),u.setMonth(u.getMonth()+s),u}function HC(i){return i.getFullYear()}function jC(i){return i.getMonth()}function JC(i){return i.getDate()}function YC(i){return new Date(i.getFullYear(),i.getMonth()+1,1)}function KC(i){return new Date(i.getFullYear(),i.getMonth()-1,1)}function $C(i){return i.getHours()}function ZC(i){return i.getMinutes()}function WC(i){return new Date(i.getFullYear(),0,1)}function XC(i){return new Date(i.getFullYear(),11,31)}function eB(i,s){return wd(i,s[0])&&rB(i,s[1])}function tB(i){const s=new Date(i);return s instanceof Date&&!isNaN(s.getTime())}function wd(i,s){return i.getTime()>s.getTime()}function iB(i,s){return wd(Ag(i),Ag(s))}function rB(i,s){return i.getTime()<s.getTime()}function $y(i,s){return i.getTime()===s.getTime()}function nB(i,s){return i.getDate()===s.getDate()&&i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()}function aB(i,s){return i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()}function sB(i,s){return i.getFullYear()===s.getFullYear()}function oB(i,s,u){const d=new Date(i),y=new Date(s);switch(u){case"years":return d.getFullYear()-y.getFullYear();case"quarters":return Math.floor((d.getMonth()-y.getMonth()+(d.getFullYear()-y.getFullYear())*12)/4);case"months":return d.getMonth()-y.getMonth()+(d.getFullYear()-y.getFullYear())*12;case"weeks":return Math.floor((d.getTime()-y.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((d.getTime()-y.getTime())/(1e3*60*60*24));case"hours":return Math.floor((d.getTime()-y.getTime())/(1e3*60*60));case"minutes":return Math.floor((d.getTime()-y.getTime())/(1e3*60));case"seconds":return Math.floor((d.getTime()-y.getTime())/1e3);default:return d.getTime()-y.getTime()}}function lB(i,s){const u=new Date(i);return u.setHours(s),u}function cB(i,s){const u=new Date(i);return u.setMinutes(s),u}function uB(i,s){const u=new Date(i);return u.setMonth(s),u}function hB(i,s){const u=new Date(i);return u.setDate(s),u}function AB(i,s){const u=new Date(i);return u.setFullYear(s),u}function Ag(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0)}function dB(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59,999)}class fB{constructor(s){this.locale=s.locale,this.formats=s.formats}date(s){return tI(s)}toJsDate(s){return s}toISO(s){return zC(this,s)}parseISO(s){return GC(s)}addMinutes(s,u){return NC(s,u)}addHours(s,u){return UC(s,u)}addDays(s,u){return OC(s,u)}addWeeks(s,u){return VC(s,u)}addMonths(s,u){return qC(s,u)}getWeekArray(s,u){return kC(s,this.locale,u?Number(u):void 0)}startOfWeek(s,u){return MC(s,this.locale,u?Number(u):void 0)}endOfWeek(s){return TC(s,this.locale)}startOfMonth(s){return X_(s)}endOfMonth(s){return eI(s)}format(s,u){return FC(s,u,this.locale,this.formats)}isEqual(s,u){return $y(s,u)}isValid(s){return tB(s)}isWithinRange(s,u){return eB(s,u)}isAfter(s,u){return wd(s,u)}isAfterDay(s,u){return iB(s,u)}isBefore(s,u){return!wd(s,u)&&!$y(s,u)}isSameDay(s,u){return nB(s,u)}isSameMonth(s,u){return aB(s,u)}isSameYear(s,u){return sB(s,u)}setMinutes(s,u){return cB(s,u)}setHours(s,u){return lB(s,u)}setMonth(s,u){return uB(s,u)}setDate(s,u){return hB(s,u)}setYear(s,u){return AB(s,u)}getDiff(s,u,d){return oB(s,u,d)}getWeekdays(s){return LC(this.locale,s?Number(s):void 0)}getYear(s){return HC(s)}getMonth(s){return jC(s)}getDate(s){return JC(s)}getNextMonth(s){return YC(s)}getPreviousMonth(s){return KC(s)}getHours(s){return $C(s)}getMinutes(s){return ZC(s)}startOfDay(s){return Ag(s)}endOfDay(s){return dB(s)}startOfYear(s){return WC(s)}endOfYear(s){return XC(s)}}const gB=Symbol.for("vuetify:date-options"),Zy=Symbol.for("vuetify:date-adapter");function pB(i,s){const u=Za({adapter:fB,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},i);return{options:u,instance:mB(u,s)}}function mB(i,s){const u=Gn(typeof i.adapter=="function"?new i.adapter({locale:i.locale[s.current.value]??s.current.value,formats:i.formats}):i.adapter);return ri(s.current,d=>{u.locale=i.locale[d]??d??u.locale}),u}const Od=["sm","md","lg","xl","xxl"],Wy=Symbol.for("vuetify:display"),Xy={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},yB=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xy;return Za(Xy,i)};function e0(i){return fa&&!i?window.innerWidth:typeof i=="object"&&i.clientWidth||0}function t0(i){return fa&&!i?window.innerHeight:typeof i=="object"&&i.clientHeight||0}function i0(i){const s=fa&&!i?window.navigator.userAgent:"ssr";function u(Ve){return!!s.match(Ve)}const d=u(/android/i),y=u(/iphone|ipad|ipod/i),C=u(/cordova/i),I=u(/electron/i),l=u(/chrome/i),q=u(/edge/i),Y=u(/firefox/i),O=u(/opera/i),H=u(/win/i),V=u(/mac/i),Ae=u(/linux/i);return{android:d,ios:y,cordova:C,electron:I,chrome:l,edge:q,firefox:Y,opera:O,win:H,mac:V,linux:Ae,touch:zw,ssr:s==="ssr"}}function _B(i,s){const{thresholds:u,mobileBreakpoint:d}=yB(i),y=sr(t0(s)),C=sr(i0(s)),I=Gn({}),l=sr(e0(s));function q(){y.value=t0(),l.value=e0()}function Y(){q(),C.value=i0()}return Ac(()=>{const O=l.value<u.sm,H=l.value<u.md&&!O,V=l.value<u.lg&&!(H||O),Ae=l.value<u.xl&&!(V||H||O),Ve=l.value<u.xxl&&!(Ae||V||H||O),Be=l.value>=u.xxl,ot=O?"xs":H?"sm":V?"md":Ae?"lg":Ve?"xl":"xxl",pt=typeof d=="number"?d:u[d],_t=l.value<pt;I.xs=O,I.sm=H,I.md=V,I.lg=Ae,I.xl=Ve,I.xxl=Be,I.smAndUp=!O,I.mdAndUp=!(O||H),I.lgAndUp=!(O||H||V),I.xlAndUp=!(O||H||V||Ae),I.smAndDown=!(V||Ae||Ve||Be),I.mdAndDown=!(Ae||Ve||Be),I.lgAndDown=!(Ve||Be),I.xlAndDown=!Be,I.name=ot,I.height=y.value,I.width=l.value,I.mobile=_t,I.mobileBreakpoint=d,I.platform=C.value,I.thresholds=u}),fa&&window.addEventListener("resize",q,{passive:!0}),{...Rg(I),update:Y,ssr:!!s}}const IB=Symbol.for("vuetify:goto");function vB(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:i=>i,easeInQuad:i=>i**2,easeOutQuad:i=>i*(2-i),easeInOutQuad:i=>i<.5?2*i**2:-1+(4-2*i)*i,easeInCubic:i=>i**3,easeOutCubic:i=>--i**3+1,easeInOutCubic:i=>i<.5?4*i**3:(i-1)*(2*i-2)*(2*i-2)+1,easeInQuart:i=>i**4,easeOutQuart:i=>1- --i**4,easeInOutQuart:i=>i<.5?8*i**4:1-8*--i**4,easeInQuint:i=>i**5,easeOutQuint:i=>1+--i**5,easeInOutQuint:i=>i<.5?16*i**5:1+16*--i**5}}}function bB(i,s){return{rtl:s.isRtl,options:Za(vB(),i)}}const xB={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload"},wB={component:i=>Wa(rI,{...i,class:"mdi"})},Xa=[String,Function,Object,Array],dg=Symbol.for("vuetify:icons"),Vd=yi({icon:{type:Xa},tag:{type:String,required:!0}},"icon"),r0=rr()({name:"VComponentIcon",props:Vd(),setup(i,s){let{slots:u}=s;return()=>{const d=i.icon;return He(i.tag,null,{default:()=>{var y;return[i.icon?He(d,null,null):(y=u.default)==null?void 0:y.call(u)]}})}}}),iI=BA({name:"VSvgIcon",inheritAttrs:!1,props:Vd(),setup(i,s){let{attrs:u}=s;return()=>He(i.tag,ms(u,{style:null}),{default:()=>[He("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(i.icon)?i.icon.map(d=>Array.isArray(d)?He("path",{d:d[0],"fill-opacity":d[1]},null):He("path",{d},null)):He("path",{d:i.icon},null)])]})}});BA({name:"VLigatureIcon",props:Vd(),setup(i){return()=>He(i.tag,null,{default:()=>[i.icon]})}});const rI=BA({name:"VClassIcon",props:Vd(),setup(i){return()=>He(i.tag,{class:i.icon},null)}});function CB(){return{svg:{component:iI},class:{component:rI}}}function BB(i){const s=CB(),u=(i==null?void 0:i.defaultSet)??"mdi";return u==="mdi"&&!s.mdi&&(s.mdi=wB),Za({defaultSet:u,sets:s,aliases:{...xB,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},i)}const EB=i=>{const s=Vi(dg);if(!s)throw new Error("Missing Vuetify Icons provide!");return{iconData:nt(()=>{var q;const d=ps(i);if(!d)return{component:r0};let y=d;if(typeof y=="string"&&(y=y.trim(),y.startsWith("$")&&(y=(q=s.aliases)==null?void 0:q[y.slice(1)])),Array.isArray(y))return{component:iI,icon:y};if(typeof y!="string")return{component:r0,icon:y};const C=Object.keys(s.sets).find(Y=>typeof y=="string"&&y.startsWith(`${Y}:`)),I=C?y.slice(C.length+1):y;return{component:s.sets[C??s.defaultSet].component,icon:I}})}},yA=Symbol.for("vuetify:theme"),es=yi({theme:String},"theme");function n0(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function QB(){var d,y;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n0();const s=n0();if(!i)return{...s,isDisabled:!0};const u={};for(const[C,I]of Object.entries(i.themes??{})){const l=I.dark||C==="dark"?(d=s.themes)==null?void 0:d.dark:(y=s.themes)==null?void 0:y.light;u[C]=Za(l,I)}return Za(s,{...i,themes:u})}function SB(i){const s=QB(i),u=Br(s.defaultTheme),d=Br(s.themes),y=nt(()=>{const O={};for(const[H,V]of Object.entries(d.value)){const Ae=O[H]={...V,colors:{...V.colors}};if(s.variations)for(const Ve of s.variations.colors){const Be=Ae.colors[Ve];if(Be)for(const ot of["lighten","darken"]){const pt=ot==="lighten"?mC:yC;for(const _t of G_(s.variations[ot],1))Ae.colors[`${Ve}-${ot}-${_t}`]=fC(pt(xo(Be),_t))}}for(const Ve of Object.keys(Ae.colors)){if(/^on-[a-z]/.test(Ve)||Ae.colors[`on-${Ve}`])continue;const Be=`on-${Ve}`,ot=xo(Ae.colors[Ve]);Ae.colors[Be]=J_(ot)}}return O}),C=nt(()=>y.value[u.value]),I=nt(()=>{var Ve;const O=[];(Ve=C.value)!=null&&Ve.dark&&ru(O,":root",["color-scheme: dark"]),ru(O,":root",a0(C.value));for(const[Be,ot]of Object.entries(y.value))ru(O,`.v-theme--${Be}`,[`color-scheme: ${ot.dark?"dark":"normal"}`,...a0(ot)]);const H=[],V=[],Ae=new Set(Object.values(y.value).flatMap(Be=>Object.keys(Be.colors)));for(const Be of Ae)/^on-[a-z]/.test(Be)?ru(V,`.${Be}`,[`color: rgb(var(--v-theme-${Be})) !important`]):(ru(H,`.bg-${Be}`,[`--v-theme-overlay-multiplier: var(--v-theme-${Be}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${Be})) !important`,`color: rgb(var(--v-theme-on-${Be})) !important`]),ru(V,`.text-${Be}`,[`color: rgb(var(--v-theme-${Be})) !important`]),ru(V,`.border-${Be}`,[`--v-border-color: var(--v-theme-${Be})`]));return O.push(...H,...V),O.map((Be,ot)=>ot===0?Be:`    ${Be}`).join("")});function l(){return{style:[{children:I.value,id:"vuetify-theme-stylesheet",nonce:s.cspNonce||!1}]}}function q(O){if(s.isDisabled)return;const H=O._context.provides.usehead;if(H)if(H.push){const Ae=H.push(l);fa&&ri(I,()=>{Ae.patch(l)})}else fa?(H.addHeadObjs(nt(l)),Ac(()=>H.updateDOM())):H.addHeadObjs(l());else{let Ve=function(){if(typeof document<"u"&&!Ae){const Be=document.createElement("style");Be.type="text/css",Be.id="vuetify-theme-stylesheet",s.cspNonce&&Be.setAttribute("nonce",s.cspNonce),Ae=Be,document.head.appendChild(Ae)}Ae&&(Ae.innerHTML=I.value)};var V=Ve;let Ae=fa?document.getElementById("vuetify-theme-stylesheet"):null;fa?ri(I,Ve,{immediate:!0}):Ve()}}const Y=nt(()=>s.isDisabled?void 0:`v-theme--${u.value}`);return{install:q,isDisabled:s.isDisabled,name:u,themes:d,current:C,computedThemes:y,themeClasses:Y,styles:I,global:{name:u,current:C}}}function js(i){ga("provideTheme");const s=Vi(yA,null);if(!s)throw new Error("Could not find Vuetify theme injection");const u=nt(()=>i.theme??s.name.value),d=nt(()=>s.themes.value[u.value]),y=nt(()=>s.isDisabled?void 0:`v-theme--${u.value}`),C={...s,name:u,current:d,themeClasses:y};return br(yA,C),C}function DB(){ga("useTheme");const i=Vi(yA,null);if(!i)throw new Error("Could not find Vuetify theme injection");return i}function ru(i,s,u){i.push(`${s} {
`,...u.map(d=>`  ${d};
`),`}
`)}function a0(i){const s=i.dark?2:1,u=i.dark?1:2,d=[];for(const[y,C]of Object.entries(i.colors)){const I=xo(C);d.push(`--v-theme-${y}: ${I.r},${I.g},${I.b}`),y.startsWith("on-")||d.push(`--v-theme-${y}-overlay-multiplier: ${_C(C)>.18?s:u}`)}for(const[y,C]of Object.entries(i.variables)){const I=typeof C=="string"&&C.startsWith("#")?xo(C):void 0,l=I?`${I.r}, ${I.g}, ${I.b}`:void 0;d.push(`--v-${y}: ${l??C}`)}return d}function Kg(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const u=Kw(),d=Br();if(fa){const y=new ResizeObserver(C=>{i==null||i(C,y),C.length&&(s==="content"?d.value=C[0].contentRect:d.value=C[0].target.getBoundingClientRect())});pn(()=>{y.disconnect()}),ri(()=>u.el,(C,I)=>{I&&(y.unobserve(I),d.value=void 0),C&&y.observe(C)},{flush:"post"})}return{resizeRef:u,contentRect:Td(d)}}const Cd=Symbol.for("vuetify:layout"),nI=Symbol.for("vuetify:layout-item"),s0=1e3,kB=yi({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),aI=yi({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function MB(){const i=Vi(Cd);if(!i)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:i.getLayoutItem,mainRect:i.mainRect,mainStyles:i.mainStyles}}function sI(i){const s=Vi(Cd);if(!s)throw new Error("[Vuetify] Could not find injected layout");const u=i.id??`layout-item-${ml()}`,d=ga("useLayoutItem");br(nI,{id:u});const y=sr(!1);o_(()=>y.value=!0),s_(()=>y.value=!1);const{layoutItemStyles:C,layoutItemScrimStyles:I}=s.register(d,{...i,active:nt(()=>y.value?!1:i.active.value),id:u});return pn(()=>s.unregister(u)),{layoutItemStyles:C,layoutRect:s.layoutRect,layoutItemScrimStyles:I}}const TB=(i,s,u,d)=>{let y={top:0,left:0,right:0,bottom:0};const C=[{id:"",layer:{...y}}];for(const I of i){const l=s.get(I),q=u.get(I),Y=d.get(I);if(!l||!q||!Y)continue;const O={...y,[l.value]:parseInt(y[l.value],10)+(Y.value?parseInt(q.value,10):0)};C.push({id:I,layer:O}),y=O}return C};function PB(i){const s=Vi(Cd,null),u=nt(()=>s?s.rootZIndex.value-100:s0),d=Br([]),y=Gn(new Map),C=Gn(new Map),I=Gn(new Map),l=Gn(new Map),q=Gn(new Map),{resizeRef:Y,contentRect:O}=Kg(),H=nt(()=>{const Ut=new Map,zt=i.overlaps??[];for(const Zt of zt.filter(Bt=>Bt.includes(":"))){const[Bt,Gt]=Zt.split(":");if(!d.value.includes(Bt)||!d.value.includes(Gt))continue;const mt=y.get(Bt),st=y.get(Gt),Et=C.get(Bt),ni=C.get(Gt);!mt||!st||!Et||!ni||(Ut.set(Gt,{position:mt.value,amount:parseInt(Et.value,10)}),Ut.set(Bt,{position:st.value,amount:-parseInt(ni.value,10)}))}return Ut}),V=nt(()=>{const Ut=[...new Set([...I.values()].map(Zt=>Zt.value))].sort((Zt,Bt)=>Zt-Bt),zt=[];for(const Zt of Ut){const Bt=d.value.filter(Gt=>{var mt;return((mt=I.get(Gt))==null?void 0:mt.value)===Zt});zt.push(...Bt)}return TB(zt,y,C,l)}),Ae=nt(()=>!Array.from(q.values()).some(Ut=>Ut.value)),Ve=nt(()=>V.value[V.value.length-1].layer),Be=nt(()=>({"--v-layout-left":hr(Ve.value.left),"--v-layout-right":hr(Ve.value.right),"--v-layout-top":hr(Ve.value.top),"--v-layout-bottom":hr(Ve.value.bottom),...Ae.value?void 0:{transition:"none"}})),ot=nt(()=>V.value.slice(1).map((Ut,zt)=>{let{id:Zt}=Ut;const{layer:Bt}=V.value[zt],Gt=C.get(Zt),mt=y.get(Zt);return{id:Zt,...Bt,size:Number(Gt.value),position:mt.value}})),pt=Ut=>ot.value.find(zt=>zt.id===Ut),_t=ga("createLayout"),ut=sr(!1);_s(()=>{ut.value=!0}),br(Cd,{register:(Ut,zt)=>{let{id:Zt,order:Bt,position:Gt,layoutSize:mt,elementSize:st,active:Et,disableTransitions:ni,absolute:Li}=zt;I.set(Zt,Bt),y.set(Zt,Gt),C.set(Zt,mt),l.set(Zt,Et),ni&&q.set(Zt,ni);const bi=th(nI,_t==null?void 0:_t.vnode).indexOf(Ut);bi>-1?d.value.splice(bi,0,Zt):d.value.push(Zt);const Pi=nt(()=>ot.value.findIndex(Yi=>Yi.id===Zt)),nr=nt(()=>u.value+V.value.length*2-Pi.value*2),Kr=nt(()=>{const Yi=Gt.value==="left"||Gt.value==="right",kr=Gt.value==="right",sn=Gt.value==="bottom",Er=st.value??mt.value,$r=Er===0?"%":"px",dr={[Gt.value]:0,zIndex:nr.value,transform:`translate${Yi?"X":"Y"}(${(Et.value?0:-(Er===0?100:Er))*(kr||sn?-1:1)}${$r})`,position:Li.value||u.value!==s0?"absolute":"fixed",...Ae.value?void 0:{transition:"none"}};if(!ut.value)return dr;const ar=ot.value[Pi.value];if(!ar)throw new Error(`[Vuetify] Could not find layout item "${Zt}"`);const rn=H.value.get(Zt);return rn&&(ar[rn.position]+=rn.amount),{...dr,height:Yi?`calc(100% - ${ar.top}px - ${ar.bottom}px)`:st.value?`${st.value}px`:void 0,left:kr?void 0:`${ar.left}px`,right:kr?`${ar.right}px`:void 0,top:Gt.value!=="bottom"?`${ar.top}px`:void 0,bottom:Gt.value!=="top"?`${ar.bottom}px`:void 0,width:Yi?st.value?`${st.value}px`:void 0:`calc(100% - ${ar.left}px - ${ar.right}px)`}}),Ar=nt(()=>({zIndex:nr.value-1}));return{layoutItemStyles:Kr,layoutItemScrimStyles:Ar,zIndex:nr}},unregister:Ut=>{I.delete(Ut),y.delete(Ut),C.delete(Ut),l.delete(Ut),q.delete(Ut),d.value=d.value.filter(zt=>zt!==Ut)},mainRect:Ve,mainStyles:Be,getLayoutItem:pt,items:ot,layoutRect:O,rootZIndex:u});const ft=nt(()=>["v-layout",{"v-layout--full-height":i.fullHeight}]),Ft=nt(()=>({zIndex:s?u.value:void 0,position:s?"relative":void 0,overflow:s?"hidden":void 0}));return{layoutClasses:ft,layoutStyles:Ft,getLayoutItem:pt,items:ot,layoutRect:O,layoutRef:Y}}function oI(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:s,...u}=i,d=Za(s,u),{aliases:y={},components:C={},directives:I={}}=d,l=vC(d.defaults),q=_B(d.display,d.ssr),Y=SB(d.theme),O=BB(d.icons),H=EC(d.locale),V=pB(d.date,H),Ae=bB(d.goTo,H);return{install:Be=>{for(const ot in I)Be.directive(ot,I[ot]);for(const ot in C)Be.component(ot,C[ot]);for(const ot in y)Be.component(ot,BA({...y[ot],name:ot,aliasName:y[ot].name}));if(Y.install(Be),Be.provide(ch,l),Be.provide(Wy,q),Be.provide(yA,Y),Be.provide(dg,O),Be.provide(xd,H),Be.provide(gB,V.options),Be.provide(Zy,V.instance),Be.provide(IB,Ae),fa&&d.ssr)if(Be.$nuxt)Be.$nuxt.hook("app:suspense:resolve",()=>{q.update()});else{const{mount:ot}=Be;Be.mount=function(){const pt=ot(...arguments);return fl(()=>q.update()),Be.mount=ot,pt}}ml.reset(),Be.mixin({computed:{$vuetify(){return Gn({defaults:Wu.call(this,ch),display:Wu.call(this,Wy),theme:Wu.call(this,yA),icons:Wu.call(this,dg),locale:Wu.call(this,xd),date:Wu.call(this,Zy)})}}})},defaults:l,display:q,theme:Y,icons:O,locale:H,date:V,goTo:Ae}}const RB="3.7.6";oI.version=RB;function Wu(i){var d,y;const s=this.$,u=((d=s.parent)==null?void 0:d.provides)??((y=s.vnode.appContext)==null?void 0:y.provides);if(u&&i in u)return u[i]}const LB=oI({theme:{defaultTheme:"dark"}});var lI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FB(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var cI={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(i,s){(function(u,d){i.exports=d()})(lI,function(){var u={},d={};function y(I,l,q){if(d[I]=q,I==="index"){var Y="var sharedModule = {}; ("+d.shared+")(sharedModule); ("+d.worker+")(sharedModule);",O={};return d.shared(O),d.index(u,O),typeof window<"u"&&u.setWorkerUrl(window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"}))),u}}y("shared",["exports"],function(I){function l(r,t,n,o){return new(n||(n=Promise))(function(A,p){function m(S){try{B(o.next(S))}catch(M){p(M)}}function x(S){try{B(o.throw(S))}catch(M){p(M)}}function B(S){var M;S.done?A(S.value):(M=S.value,M instanceof n?M:new n(function(P){P(M)})).then(m,x)}B((o=o.apply(r,t||[])).next())})}function q(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}typeof SuppressedError=="function"&&SuppressedError;var Y=O;function O(r,t){this.x=r,this.y=t}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,n=r.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),n=Math.sin(r),o=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=o,this},_rotateAround:function(r,t){var n=Math.cos(r),o=Math.sin(r),A=t.y+o*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-o*(this.y-t.y),this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},O.convert=function(r){return r instanceof O?r:Array.isArray(r)?new O(r[0],r[1]):r};var H=q(Y),V=Ae;function Ae(r,t,n,o){this.cx=3*r,this.bx=3*(n-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=n,this.p2y=o}Ae.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var n=r,o=0;o<8;o++){var A=this.sampleCurveX(n)-r;if(Math.abs(A)<t)return n;var p=this.sampleCurveDerivativeX(n);if(Math.abs(p)<1e-6)break;n-=A/p}var m=0,x=1;for(n=r,o=0;o<20&&(A=this.sampleCurveX(n),!(Math.abs(A-r)<t));o++)r>A?m=n:x=n,n=.5*(x-m)+m;return n},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var Ve=q(V);let Be,ot;function pt(){return Be==null&&(Be=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Be}function _t(){if(ot==null&&(ot=!1,pt())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let o=0;o<5*5;o++){const A=4*o;t.fillStyle=`rgb(${A},${A+1},${A+2})`,t.fillRect(o%5,Math.floor(o/5),1,1)}const n=t.getImageData(0,0,5,5).data;for(let o=0;o<5*5*4;o++)if(o%4!=3&&n[o]!==o){ot=!0;break}}}return ot||!1}function ut(r,t,n,o){const A=new Ve(r,t,n,o);return p=>A.solve(p)}const ft=ut(.25,.1,.25,1);function Ft(r,t,n){return Math.min(n,Math.max(t,r))}function Ut(r,t,n){const o=n-t,A=((r-t)%o+o)%o+t;return A===t?n:A}function zt(r,...t){for(const n of t)for(const o in n)r[o]=n[o];return r}let Zt=1;function Bt(r,t,n){const o={};for(const A in r)o[A]=t.call(this,r[A],A,r);return o}function Gt(r,t,n){const o={};for(const A in r)t.call(this,r[A],A,r)&&(o[A]=r[A]);return o}function mt(r){return Array.isArray(r)?r.map(mt):typeof r=="object"&&r?Bt(r,mt):r}const st={};function Et(r){st[r]||(typeof console<"u"&&console.warn(r),st[r]=!0)}function ni(r,t,n){return(n.y-r.y)*(t.x-r.x)>(t.y-r.y)*(n.x-r.x)}function Li(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let wi=null;function bi(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}const Pi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function nr(r,t,n,o,A){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const p=new VideoFrame(r,{timestamp:0});try{const m=p==null?void 0:p.format;if(!m||!m.startsWith("BGR")&&!m.startsWith("RGB"))throw new Error(`Unrecognized format ${m}`);const x=m.startsWith("BGR"),B=new Uint8ClampedArray(o*A*4);if(yield p.copyTo(B,function(S,M,P,U,K){const re=4*Math.max(-M,0),ae=(Math.max(0,P)-P)*U*4+re,me=4*U,we=Math.max(0,M),Ye=Math.max(0,P);return{rect:{x:we,y:Ye,width:Math.min(S.width,M+U)-we,height:Math.min(S.height,P+K)-Ye},layout:[{offset:ae,stride:me}]}}(r,t,n,o,A)),x)for(let S=0;S<B.length;S+=4){const M=B[S];B[S]=B[S+2],B[S+2]=M}return B}finally{p.close()}})}let Kr,Ar;const Yi="AbortError";function kr(){return new Error(Yi)}const sn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Er(r){return sn.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}const $r="global-dispatcher";class dr extends Error{constructor(t,n,o,A){super(`AJAXError: ${n} (${t}): ${o}`),this.status=t,this.statusText=n,this.url=o,this.body=A}}const ar=()=>Li(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,rn=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){const o=Er(r.url);if(o)return o(r,t);if(Li(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:$r},t)}if(!(/^file:/.test(n=r.url)||/^file:/.test(ar())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(o,A){return l(this,void 0,void 0,function*(){const p=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:ar(),signal:A.signal});o.type!=="json"||p.headers.has("Accept")||p.headers.set("Accept","application/json");const m=yield fetch(p);if(!m.ok){const S=yield m.blob();throw new dr(m.status,m.statusText,o.url,S)}let x;x=o.type==="arrayBuffer"||o.type==="image"?m.arrayBuffer():o.type==="json"?m.json():m.text();const B=yield x;if(A.signal.aborted)throw kr();return{data:B,cacheControl:m.headers.get("Cache-Control"),expires:m.headers.get("Expires")}})}(r,t);if(Li(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:$r},t)}var n;return function(o,A){return new Promise((p,m)=>{var x;const B=new XMLHttpRequest;B.open(o.method||"GET",o.url,!0),o.type!=="arrayBuffer"&&o.type!=="image"||(B.responseType="arraybuffer");for(const S in o.headers)B.setRequestHeader(S,o.headers[S]);o.type==="json"&&(B.responseType="text",!((x=o.headers)===null||x===void 0)&&x.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=o.credentials==="include",B.onerror=()=>{m(new Error(B.statusText))},B.onload=()=>{if(!A.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let S=B.response;if(o.type==="json")try{S=JSON.parse(B.response)}catch(M){return void m(M)}p({data:S,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const S=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});m(new dr(B.status,B.statusText,o.url,S))}},A.signal.addEventListener("abort",()=>{B.abort(),m(kr())}),B.send(o.body)})}(r,t)};function hn(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;const t=new URL(r),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function pa(r,t,n){n[r]&&n[r].indexOf(t)!==-1||(n[r]=n[r]||[],n[r].push(t))}function Se(r,t,n){if(n&&n[r]){const o=n[r].indexOf(t);o!==-1&&n[r].splice(o,1)}}class Ge{constructor(t,n={}){zt(this,n),this.type=t}}class tt extends Ge{constructor(t,n={}){super("error",zt({error:t},n))}}class It{on(t,n){return this._listeners=this._listeners||{},pa(t,n,this._listeners),this}off(t,n){return Se(t,n,this._listeners),Se(t,n,this._oneTimeListeners),this}once(t,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},pa(t,n,this._oneTimeListeners),this):new Promise(o=>this.once(t,o))}fire(t,n){typeof t=="string"&&(t=new Ge(t,n||{}));const o=t.type;if(this.listens(o)){t.target=this;const A=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const x of A)x.call(this,t);const p=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const x of p)Se(o,x,this._oneTimeListeners),x.call(this,t);const m=this._eventedParent;m&&(zt(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(t))}else t instanceof tt&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,n){return this._eventedParent=t,this._eventedParentData=n,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const vt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Vt(r,t){const n={};for(const o in r)o!=="ref"&&(n[o]=r[o]);return vt.forEach(o=>{o in t&&(n[o]=t[o])}),n}function gt(r,t){if(Array.isArray(r)){if(!Array.isArray(t)||r.length!==t.length)return!1;for(let n=0;n<r.length;n++)if(!gt(r[n],t[n]))return!1;return!0}if(typeof r=="object"&&r!==null&&t!==null){if(typeof t!="object"||Object.keys(r).length!==Object.keys(t).length)return!1;for(const n in r)if(!gt(r[n],t[n]))return!1;return!0}return r===t}function bt(r,t){r.push(t)}function Ct(r,t,n){bt(n,{command:"addSource",args:[r,t[r]]})}function fi(r,t,n){bt(t,{command:"removeSource",args:[r]}),n[r]=!0}function Ot(r,t,n,o){fi(r,n,o),Ct(r,t,n)}function hi(r,t,n){let o;for(o in r[n])if(Object.prototype.hasOwnProperty.call(r[n],o)&&o!=="data"&&!gt(r[n][o],t[n][o]))return!1;for(o in t[n])if(Object.prototype.hasOwnProperty.call(t[n],o)&&o!=="data"&&!gt(r[n][o],t[n][o]))return!1;return!0}function di(r,t,n,o,A,p){r=r||{},t=t||{};for(const m in r)Object.prototype.hasOwnProperty.call(r,m)&&(gt(r[m],t[m])||n.push({command:p,args:[o,m,t[m],A]}));for(const m in t)Object.prototype.hasOwnProperty.call(t,m)&&!Object.prototype.hasOwnProperty.call(r,m)&&(gt(r[m],t[m])||n.push({command:p,args:[o,m,t[m],A]}))}function Ti(r){return r.id}function qi(r,t){return r[t.id]=t,r}class ht{constructor(t,n,o,A){this.message=(t?`${t}: `:"")+o,A&&(this.identifier=A),n!=null&&n.__line__&&(this.line=n.__line__)}}function fr(r,...t){for(const n of t)for(const o in n)r[o]=n[o];return r}class Zi extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class Rr{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[o,A]of n)this.bindings[o]=A}concat(t){return new Rr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Lr={kind:"null"},Qt={kind:"number"},Ei={kind:"string"},ti={kind:"boolean"},lr={kind:"color"},An={kind:"object"},xi={kind:"value"},ma={kind:"collator"},ya={kind:"formatted"},is={kind:"padding"},mn={kind:"resolvedImage"},_e={kind:"variableAnchorOffsetCollection"};function J(r,t){return{kind:"array",itemType:r,N:t}}function j(r){if(r.kind==="array"){const t=j(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}const ie=[Lr,Qt,Ei,ti,lr,ya,An,J(xi),is,mn,_e];function pe(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!pe(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(const n of ie)if(!pe(n,t))return null}}return`Expected ${j(r)} but found ${j(t)} instead.`}function Re(r,t){return t.some(n=>n.kind===r.kind)}function Ne(r,t){return t.some(n=>n==="null"?r===null:n==="array"?Array.isArray(r):n==="object"?r&&!Array.isArray(r)&&typeof r=="object":n===typeof r)}function je(r,t){return r.kind==="array"&&t.kind==="array"?r.itemType.kind===t.itemType.kind&&typeof r.N=="number":r.kind===t.kind}const Ee=.96422,Xe=.82521,At=4/29,Ze=6/29,kt=3*Ze*Ze,li=Ze*Ze*Ze,gi=Math.PI/180,Oi=180/Math.PI;function Ci(r){return(r%=360)<0&&(r+=360),r}function Gi([r,t,n,o]){let A,p;const m=Fr((.2225045*(r=Qi(r))+.7168786*(t=Qi(t))+.0606169*(n=Qi(n)))/1);r===t&&t===n?A=p=m:(A=Fr((.4360747*r+.3850649*t+.1430804*n)/Ee),p=Fr((.0139322*r+.0971045*t+.7141733*n)/Xe));const x=116*m-16;return[x<0?0:x,500*(A-m),200*(m-p),o]}function Qi(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Fr(r){return r>li?Math.pow(r,1/3):r/kt+At}function gr([r,t,n,o]){let A=(r+16)/116,p=isNaN(t)?A:A+t/500,m=isNaN(n)?A:A-n/200;return A=1*Wi(A),p=Ee*Wi(p),m=Xe*Wi(m),[Bi(3.1338561*p-1.6168667*A-.4906146*m),Bi(-.9787684*p+1.9161415*A+.033454*m),Bi(.0719453*p-.2289914*A+1.4052427*m),o]}function Bi(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function Wi(r){return r>Ze?r*r*r:kt*(r-At)}function _r(r){return parseInt(r.padEnd(2,r),16)/255}function Zr(r,t){return jr(t?r/100:r,0,1)}function jr(r,t,n){return Math.min(Math.max(t,r),n)}function dn(r){return!r.some(Number.isNaN)}const Ys={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Xi{constructor(t,n,o,A=1,p=!0){this.r=t,this.g=n,this.b=o,this.a=A,p||(this.r*=A,this.g*=A,this.b*=A,A||this.overwriteGetter("rgb",[t,n,o,A]))}static parse(t){if(t instanceof Xi)return t;if(typeof t!="string")return;const n=function(o){if((o=o.toLowerCase().trim())==="transparent")return[0,0,0,0];const A=Ys[o];if(A){const[m,x,B]=A;return[m/255,x/255,B/255,1]}if(o.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(o)){const m=o.length<6?1:2;let x=1;return[_r(o.slice(x,x+=m)),_r(o.slice(x,x+=m)),_r(o.slice(x,x+=m)),_r(o.slice(x,x+m)||"ff")]}if(o.startsWith("rgb")){const m=o.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){const[x,B,S,M,P,U,K,re,ae,me,we,Ye]=m,Le=[M||" ",K||" ",me].join("");if(Le==="  "||Le==="  /"||Le===",,"||Le===",,,"){const qe=[S,U,ae].join(""),et=qe==="%%%"?100:qe===""?255:0;if(et){const xt=[jr(+B/et,0,1),jr(+P/et,0,1),jr(+re/et,0,1),we?Zr(+we,Ye):1];if(dn(xt))return xt}}return}}const p=o.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(p){const[m,x,B,S,M,P,U,K,re]=p,ae=[B||" ",M||" ",U].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const me=[+x,jr(+S,0,100),jr(+P,0,100),K?Zr(+K,re):1];if(dn(me))return function([we,Ye,Le,qe]){function et(xt){const jt=(xt+we/30)%12,pi=Ye*Math.min(Le,1-Le);return Le-pi*Math.max(-1,Math.min(jt-3,9-jt,1))}return we=Ci(we),Ye/=100,Le/=100,[et(0),et(8),et(4),qe]}(me)}}}(t);return n?new Xi(...n,!1):void 0}get rgb(){const{r:t,g:n,b:o,a:A}=this,p=A||1/0;return this.overwriteGetter("rgb",[t/p,n/p,o/p,A])}get hcl(){return this.overwriteGetter("hcl",function(t){const[n,o,A,p]=Gi(t),m=Math.sqrt(o*o+A*A);return[Math.round(1e4*m)?Ci(Math.atan2(A,o)*Oi):NaN,m,n,p]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Gi(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,o,A]=this.rgb;return`rgba(${[t,n,o].map(p=>Math.round(255*p)).join(",")},${A})`}}Xi.black=new Xi(0,0,0,1),Xi.white=new Xi(1,1,1,1),Xi.transparent=new Xi(0,0,0,0),Xi.red=new Xi(1,0,0,1);class Ic{constructor(t,n,o){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class vc{constructor(t,n,o,A,p){this.text=t,this.image=n,this.scale=o,this.fontStack=A,this.textColor=p}}class Dn{constructor(t){this.sections=t}static fromString(t){return new Dn([new vc(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Dn?t:Dn.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class yn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof yn)return t;if(typeof t=="number")return new yn([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new yn(t)}}toString(){return JSON.stringify(this.values)}}const mh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class _n{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof _n)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let n=0;n<t.length;n+=2){const o=t[n],A=t[n+1];if(typeof o!="string"||!mh.has(o)||!Array.isArray(A)||A.length!==2||typeof A[0]!="number"||typeof A[1]!="number")return}return new _n(t)}}toString(){return JSON.stringify(this.values)}}class In{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new In({name:t,available:!1}):null}}function ka(r,t,n,o){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[r,t,n,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[r,t,n,o]:[r,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Un(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Xi||r instanceof Ic||r instanceof Dn||r instanceof yn||r instanceof _n||r instanceof In)return!0;if(Array.isArray(r)){for(const t of r)if(!Un(t))return!1;return!0}if(typeof r=="object"){for(const t in r)if(!Un(r[t]))return!1;return!0}return!1}function Vr(r){if(r===null)return Lr;if(typeof r=="string")return Ei;if(typeof r=="boolean")return ti;if(typeof r=="number")return Qt;if(r instanceof Xi)return lr;if(r instanceof Ic)return ma;if(r instanceof Dn)return ya;if(r instanceof yn)return is;if(r instanceof _n)return _e;if(r instanceof In)return mn;if(Array.isArray(r)){const t=r.length;let n;for(const o of r){const A=Vr(o);if(n){if(n===A)continue;n=xi;break}n=A}return J(n||xi,t)}return An}function Eo(r){const t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof Xi||r instanceof Dn||r instanceof yn||r instanceof _n||r instanceof In?r.toString():JSON.stringify(r)}class Xn{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Un(t[1]))return n.error("invalid value");const o=t[1];let A=Vr(o);const p=n.expectedType;return A.kind!=="array"||A.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(A=p),new Xn(A,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Mr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const vl={string:Ei,number:Qt,boolean:ti,object:An};class kn{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let o,A=1;const p=t[0];if(p==="array"){let x,B;if(t.length>2){const S=t[1];if(typeof S!="string"||!(S in vl)||S==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);x=vl[S],A++}else x=xi;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);B=t[2],A++}o=J(x,B)}else{if(!vl[p])throw new Error(`Types doesn't contain name = ${p}`);o=vl[p]}const m=[];for(;A<t.length;A++){const x=n.parse(t[A],A,xi);if(!x)return null;m.push(x)}return new kn(o,m)}evaluate(t){for(let n=0;n<this.args.length;n++){const o=this.args[n].evaluate(t);if(!pe(this.type,Vr(o)))return o;if(n===this.args.length-1)throw new Mr(`Expected value to be of type ${j(this.type)}, but found ${j(Vr(o))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Qo={"to-boolean":ti,"to-color":lr,"to-number":Qt,"to-string":Ei};class ea{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const o=t[0];if(!Qo[o])throw new Error(`Can't parse ${o} as it is not part of the known types`);if((o==="to-boolean"||o==="to-string")&&t.length!==2)return n.error("Expected one argument.");const A=Qo[o],p=[];for(let m=1;m<t.length;m++){const x=n.parse(t[m],m,xi);if(!x)return null;p.push(x)}return new ea(A,p)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,o;for(const A of this.args){if(n=A.evaluate(t),o=null,n instanceof Xi)return n;if(typeof n=="string"){const p=t.parseColor(n);if(p)return p}else if(Array.isArray(n)&&(o=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:ka(n[0],n[1],n[2],n[3]),!o))return new Xi(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Mr(o||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const o of this.args){n=o.evaluate(t);const A=yn.parse(n);if(A)return A}throw new Mr(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const o of this.args){n=o.evaluate(t);const A=_n.parse(n);if(A)return A}throw new Mr(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const o of this.args){if(n=o.evaluate(t),n===null)return 0;const A=Number(n);if(!isNaN(A))return A}throw new Mr(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Dn.fromString(Eo(this.args[0].evaluate(t)));case"resolvedImage":return In.fromString(Eo(this.args[0].evaluate(t)));default:return Eo(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const yh=["Unknown","Point","LineString","Polygon"];class bl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=Xi.parse(t)),n}}class Is{constructor(t,n,o=[],A,p=new Rr,m=[]){this.registry=t,this.path=o,this.key=o.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=m,this.expectedType=A,this._isConstant=n}parse(t,n,o,A,p={}){return n?this.concat(n,o,A)._parse(t,p):this._parse(t,p)}_parse(t,n){function o(A,p,m){return m==="assert"?new kn(p,[A]):m==="coerce"?new ea(p,[A]):A}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const A=t[0];if(typeof A!="string")return this.error(`Expression name must be a string, but found ${typeof A} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const p=this.registry[A];if(p){let m=p.parse(t,this);if(!m)return null;if(this.expectedType){const x=this.expectedType,B=m.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||B.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||B.kind!=="value"&&B.kind!=="string")if(x.kind!=="padding"||B.kind!=="value"&&B.kind!=="number"&&B.kind!=="array")if(x.kind!=="variableAnchorOffsetCollection"||B.kind!=="value"&&B.kind!=="array"){if(this.checkSubtype(x,B))return null}else m=o(m,x,n.typeAnnotation||"coerce");else m=o(m,x,n.typeAnnotation||"coerce");else m=o(m,x,n.typeAnnotation||"coerce");else m=o(m,x,n.typeAnnotation||"assert")}if(!(m instanceof Xn)&&m.type.kind!=="resolvedImage"&&this._isConstant(m)){const x=new bl;try{m=new Xn(m.type,m.evaluate(x))}catch(B){return this.error(B.message),null}}return m}return this.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,n,o){const A=typeof t=="number"?this.path.concat(t):this.path,p=o?this.scope.concat(o):this.scope;return new Is(this.registry,this._isConstant,A,n||null,p,this.errors)}error(t,...n){const o=`${this.key}${n.map(A=>`[${A}]`).join("")}`;this.errors.push(new Zi(o,t))}checkSubtype(t,n){const o=pe(t,n);return o&&this.error(o),o}}class Ma{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const o=[];for(let p=1;p<t.length-1;p+=2){const m=t[p];if(typeof m!="string")return n.error(`Expected string, but found ${typeof m} instead.`,p);if(/[^a-zA-Z0-9_]/.test(m))return n.error("Variable names must contain only alphanumeric characters or '_'.",p);const x=n.parse(t[p+1],p+1);if(!x)return null;o.push([m,x])}const A=n.parse(t[t.length-1],t.length-1,n.expectedType,o);return A?new Ma(o,A):null}outputDefined(){return this.result.outputDefined()}}class Hi{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const o=t[1];return n.scope.has(o)?new Hi(o,n.scope.get(o)):n.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class bc{constructor(t,n,o){this.type=t,this.index=n,this.input=o}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,Qt),A=n.parse(t[2],2,J(n.expectedType||xi));return o&&A?new bc(A.type.itemType,o,A):null}evaluate(t){const n=this.index.evaluate(t),o=this.input.evaluate(t);if(n<0)throw new Mr(`Array index out of bounds: ${n} < 0.`);if(n>=o.length)throw new Mr(`Array index out of bounds: ${n} > ${o.length-1}.`);if(n!==Math.floor(n))throw new Mr(`Array index must be an integer, but found ${n} instead.`);return o[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class So{constructor(t,n){this.type=ti,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,xi),A=n.parse(t[2],2,xi);return o&&A?Re(o.type,[ti,Ei,Qt,Lr,xi])?new So(o,A):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(o.type)} instead`):null}evaluate(t){const n=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!o)return!1;if(!Ne(n,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Vr(n))} instead.`);if(!Ne(o,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${j(Vr(o))} instead.`);return o.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class rs{constructor(t,n,o){this.type=Qt,this.needle=t,this.haystack=n,this.fromIndex=o}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,xi),A=n.parse(t[2],2,xi);if(!o||!A)return null;if(!Re(o.type,[ti,Ei,Qt,Lr,xi]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(o.type)} instead`);if(t.length===4){const p=n.parse(t[3],3,Qt);return p?new rs(o,A,p):null}return new rs(o,A)}evaluate(t){const n=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!Ne(n,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${j(Vr(n))} instead.`);let A;if(this.fromIndex&&(A=this.fromIndex.evaluate(t)),Ne(o,["string"])){const p=o.indexOf(n,A);return p===-1?-1:[...o.slice(0,p)].length}if(Ne(o,["array"]))return o.indexOf(n,A);throw new Mr(`Expected second argument to be of type array or string, but found ${j(Vr(o))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class xc{constructor(t,n,o,A,p,m){this.inputType=t,this.type=n,this.input=o,this.cases=A,this.outputs=p,this.otherwise=m}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return n.error("Expected an even number of arguments.");let o,A;n.expectedType&&n.expectedType.kind!=="value"&&(A=n.expectedType);const p={},m=[];for(let S=2;S<t.length-1;S+=2){let M=t[S];const P=t[S+1];Array.isArray(M)||(M=[M]);const U=n.concat(S);if(M.length===0)return U.error("Expected at least one branch label.");for(const re of M){if(typeof re!="number"&&typeof re!="string")return U.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return U.error("Numeric branch labels must be integer values.");if(o){if(U.checkSubtype(o,Vr(re)))return null}else o=Vr(re);if(p[String(re)]!==void 0)return U.error("Branch labels must be unique.");p[String(re)]=m.length}const K=n.parse(P,S,A);if(!K)return null;A=A||K.type,m.push(K)}const x=n.parse(t[1],1,xi);if(!x)return null;const B=n.parse(t[t.length-1],t.length-1,A);return B?x.type.kind!=="value"&&n.concat(1).checkSubtype(o,x.type)?null:new xc(o,A,x,p,m,B):null}evaluate(t){const n=this.input.evaluate(t);return(Vr(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class xl{constructor(t,n,o){this.type=t,this.branches=n,this.otherwise=o}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return n.error("Expected an odd number of arguments.");let o;n.expectedType&&n.expectedType.kind!=="value"&&(o=n.expectedType);const A=[];for(let m=1;m<t.length-1;m+=2){const x=n.parse(t[m],m,ti);if(!x)return null;const B=n.parse(t[m+1],m+1,o);if(!B)return null;A.push([x,B]),o=o||B.type}const p=n.parse(t[t.length-1],t.length-1,o);if(!p)return null;if(!o)throw new Error("Can't infer output type");return new xl(o,A,p)}evaluate(t){for(const[n,o]of this.branches)if(n.evaluate(t))return o.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,o]of this.branches)t(n),t(o);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class Do{constructor(t,n,o,A){this.type=t,this.input=n,this.beginIndex=o,this.endIndex=A}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,xi),A=n.parse(t[2],2,Qt);if(!o||!A)return null;if(!Re(o.type,[J(xi),Ei,xi]))return n.error(`Expected first argument to be of type array or string, but found ${j(o.type)} instead`);if(t.length===4){const p=n.parse(t[3],3,Qt);return p?new Do(o.type,o,A,p):null}return new Do(o.type,o,A)}evaluate(t){const n=this.input.evaluate(t),o=this.beginIndex.evaluate(t);let A;if(this.endIndex&&(A=this.endIndex.evaluate(t)),Ne(n,["string"]))return[...n].slice(o,A).join("");if(Ne(n,["array"]))return n.slice(o,A);throw new Mr(`Expected first argument to be of type array or string, but found ${j(Vr(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function _a(r,t){const n=r.length-1;let o,A,p=0,m=n,x=0;for(;p<=m;)if(x=Math.floor((p+m)/2),o=r[x],A=r[x+1],o<=t){if(x===n||t<A)return x;p=x+1}else{if(!(o>t))throw new Mr("Input is not a number.");m=x-1}return 0}class ns{constructor(t,n,o){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[A,p]of o)this.labels.push(A),this.outputs.push(p)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");const o=n.parse(t[1],1,Qt);if(!o)return null;const A=[];let p=null;n.expectedType&&n.expectedType.kind!=="value"&&(p=n.expectedType);for(let m=1;m<t.length;m+=2){const x=m===1?-1/0:t[m],B=t[m+1],S=m,M=m+1;if(typeof x!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(A.length&&A[A.length-1][0]>=x)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const P=n.parse(B,M,p);if(!P)return null;p=p||P.type,A.push([x,P])}return new ns(p,o,A)}evaluate(t){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(t);const A=this.input.evaluate(t);if(A<=n[0])return o[0].evaluate(t);const p=n.length;return A>=n[p-1]?o[p-1].evaluate(t):o[_a(n,A)].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function vs(r){return r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _h=ko;function ko(r,t,n,o){this.cx=3*r,this.bx=3*(n-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=n,this.p2y=o}ko.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var n=r,o=0;o<8;o++){var A=this.sampleCurveX(n)-r;if(Math.abs(A)<t)return n;var p=this.sampleCurveDerivativeX(n);if(Math.abs(p)<1e-6)break;n-=A/p}var m=0,x=1;for(n=r,o=0;o<20&&(A=this.sampleCurveX(n),!(Math.abs(A-r)<t));o++)r>A?m=n:x=n,n=.5*(x-m)+m;return n},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var Ih=vs(_h);function Ta(r,t,n){return r+n*(t-r)}function Ks(r,t,n){return r.map((o,A)=>Ta(o,t[A],n))}const zr={number:Ta,color:function(r,t,n,o="rgb"){switch(o){case"rgb":{const[A,p,m,x]=Ks(r.rgb,t.rgb,n);return new Xi(A,p,m,x,!1)}case"hcl":{const[A,p,m,x]=r.hcl,[B,S,M,P]=t.hcl;let U,K;if(isNaN(A)||isNaN(B))isNaN(A)?isNaN(B)?U=NaN:(U=B,m!==1&&m!==0||(K=S)):(U=A,M!==1&&M!==0||(K=p));else{let Ye=B-A;B>A&&Ye>180?Ye-=360:B<A&&A-B>180&&(Ye+=360),U=A+n*Ye}const[re,ae,me,we]=function([Ye,Le,qe,et]){return Ye=isNaN(Ye)?0:Ye*gi,gr([qe,Math.cos(Ye)*Le,Math.sin(Ye)*Le,et])}([U,K??Ta(p,S,n),Ta(m,M,n),Ta(x,P,n)]);return new Xi(re,ae,me,we,!1)}case"lab":{const[A,p,m,x]=gr(Ks(r.lab,t.lab,n));return new Xi(A,p,m,x,!1)}}},array:Ks,padding:function(r,t,n){return new yn(Ks(r.values,t.values,n))},variableAnchorOffsetCollection:function(r,t,n){const o=r.values,A=t.values;if(o.length!==A.length)throw new Mr(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${t.toString()}`);const p=[];for(let m=0;m<o.length;m+=2){if(o[m]!==A[m])throw new Mr(`Cannot interpolate values containing mismatched anchors. from[${m}]: ${o[m]}, to[${m}]: ${A[m]}`);p.push(o[m]);const[x,B]=o[m+1],[S,M]=A[m+1];p.push([Ta(x,S,n),Ta(B,M,n)])}return new _n(p)}};class Wr{constructor(t,n,o,A,p){this.type=t,this.operator=n,this.interpolation=o,this.input=A,this.labels=[],this.outputs=[];for(const[m,x]of p)this.labels.push(m),this.outputs.push(x)}static interpolationFactor(t,n,o,A){let p=0;if(t.name==="exponential")p=bs(n,t.base,o,A);else if(t.name==="linear")p=bs(n,1,o,A);else if(t.name==="cubic-bezier"){const m=t.controlPoints;p=new Ih(m[0],m[1],m[2],m[3]).solve(bs(n,1,o,A))}return p}static parse(t,n){let[o,A,p,...m]=t;if(!Array.isArray(A)||A.length===0)return n.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){const S=A[1];if(typeof S!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:S}}else{if(A[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(A[0])}`,1,0);{const S=A.slice(1);if(S.length!==4||S.some(M=>typeof M!="number"||M<0||M>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:S}}}if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(p=n.parse(p,2,Qt),!p)return null;const x=[];let B=null;o==="interpolate-hcl"||o==="interpolate-lab"?B=lr:n.expectedType&&n.expectedType.kind!=="value"&&(B=n.expectedType);for(let S=0;S<m.length;S+=2){const M=m[S],P=m[S+1],U=S+3,K=S+4;if(typeof M!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(x.length&&x[x.length-1][0]>=M)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const re=n.parse(P,K,B);if(!re)return null;B=B||re.type,x.push([M,re])}return je(B,Qt)||je(B,lr)||je(B,is)||je(B,_e)||je(B,J(Qt))?new Wr(B,o,A,p,x):n.error(`Type ${j(B)} is not interpolatable.`)}evaluate(t){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(t);const A=this.input.evaluate(t);if(A<=n[0])return o[0].evaluate(t);const p=n.length;if(A>=n[p-1])return o[p-1].evaluate(t);const m=_a(n,A),x=Wr.interpolationFactor(this.interpolation,A,n[m],n[m+1]),B=o[m].evaluate(t),S=o[m+1].evaluate(t);switch(this.operator){case"interpolate":return zr[this.type.kind](B,S,x);case"interpolate-hcl":return zr.color(B,S,x,"hcl");case"interpolate-lab":return zr.color(B,S,x,"lab")}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function bs(r,t,n,o){const A=o-n,p=r-n;return A===0?0:t===1?p/A:(Math.pow(t,p)-1)/(Math.pow(t,A)-1)}class wl{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expectected at least one argument.");let o=null;const A=n.expectedType;A&&A.kind!=="value"&&(o=A);const p=[];for(const x of t.slice(1)){const B=n.parse(x,1+p.length,o,void 0,{typeAnnotation:"omit"});if(!B)return null;o=o||B.type,p.push(B)}if(!o)throw new Error("No output type");const m=A&&p.some(x=>pe(A,x.type));return new wl(m?xi:o,p)}evaluate(t){let n,o=null,A=0;for(const p of this.args)if(A++,o=p.evaluate(t),o&&o instanceof In&&!o.available&&(n||(n=o.name),o=null,A===this.args.length&&(o=n)),o!==null)break;return o}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function $s(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Cl(r,t,n,o){return o.compare(t,n)===0}function xs(r,t,n){const o=r!=="=="&&r!=="!=";return class uI{constructor(p,m,x){this.type=ti,this.lhs=p,this.rhs=m,this.collator=x,this.hasUntypedArgument=p.type.kind==="value"||m.type.kind==="value"}static parse(p,m){if(p.length!==3&&p.length!==4)return m.error("Expected two or three arguments.");const x=p[0];let B=m.parse(p[1],1,xi);if(!B)return null;if(!$s(x,B.type))return m.concat(1).error(`"${x}" comparisons are not supported for type '${j(B.type)}'.`);let S=m.parse(p[2],2,xi);if(!S)return null;if(!$s(x,S.type))return m.concat(2).error(`"${x}" comparisons are not supported for type '${j(S.type)}'.`);if(B.type.kind!==S.type.kind&&B.type.kind!=="value"&&S.type.kind!=="value")return m.error(`Cannot compare types '${j(B.type)}' and '${j(S.type)}'.`);o&&(B.type.kind==="value"&&S.type.kind!=="value"?B=new kn(S.type,[B]):B.type.kind!=="value"&&S.type.kind==="value"&&(S=new kn(B.type,[S])));let M=null;if(p.length===4){if(B.type.kind!=="string"&&S.type.kind!=="string"&&B.type.kind!=="value"&&S.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(M=m.parse(p[3],3,ma),!M)return null}return new uI(B,S,M)}evaluate(p){const m=this.lhs.evaluate(p),x=this.rhs.evaluate(p);if(o&&this.hasUntypedArgument){const B=Vr(m),S=Vr(x);if(B.kind!==S.kind||B.kind!=="string"&&B.kind!=="number")throw new Mr(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${B.kind}, ${S.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const B=Vr(m),S=Vr(x);if(B.kind!=="string"||S.kind!=="string")return t(p,m,x)}return this.collator?n(p,m,x,this.collator.evaluate(p)):t(p,m,x)}eachChild(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)}outputDefined(){return!0}}}const yu=xs("==",function(r,t,n){return t===n},Cl),wc=xs("!=",function(r,t,n){return t!==n},function(r,t,n,o){return!Cl(0,t,n,o)}),Bl=xs("<",function(r,t,n){return t<n},function(r,t,n,o){return o.compare(t,n)<0}),El=xs(">",function(r,t,n){return t>n},function(r,t,n,o){return o.compare(t,n)>0}),vh=xs("<=",function(r,t,n){return t<=n},function(r,t,n,o){return o.compare(t,n)<=0}),Cc=xs(">=",function(r,t,n){return t>=n},function(r,t,n,o){return o.compare(t,n)>=0});class Mo{constructor(t,n,o){this.type=ma,this.locale=o,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const o=t[1];if(typeof o!="object"||Array.isArray(o))return n.error("Collator options argument must be an object.");const A=n.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,ti);if(!A)return null;const p=n.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,ti);if(!p)return null;let m=null;return o.locale&&(m=n.parse(o.locale,1,Ei),!m)?null:new Mo(A,p,m)}evaluate(t){return new Ic(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Ql{constructor(t,n,o,A,p){this.type=Ei,this.number=t,this.locale=n,this.currency=o,this.minFractionDigits=A,this.maxFractionDigits=p}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const o=n.parse(t[1],1,Qt);if(!o)return null;const A=t[2];if(typeof A!="object"||Array.isArray(A))return n.error("NumberFormat options argument must be an object.");let p=null;if(A.locale&&(p=n.parse(A.locale,1,Ei),!p))return null;let m=null;if(A.currency&&(m=n.parse(A.currency,1,Ei),!m))return null;let x=null;if(A["min-fraction-digits"]&&(x=n.parse(A["min-fraction-digits"],1,Qt),!x))return null;let B=null;return A["max-fraction-digits"]&&(B=n.parse(A["max-fraction-digits"],1,Qt),!B)?null:new Ql(o,p,m,x,B)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Sl{constructor(t){this.type=ya,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const o=t[1];if(!Array.isArray(o)&&typeof o=="object")return n.error("First argument must be an image or text section.");const A=[];let p=!1;for(let m=1;m<=t.length-1;++m){const x=t[m];if(p&&typeof x=="object"&&!Array.isArray(x)){p=!1;let B=null;if(x["font-scale"]&&(B=n.parse(x["font-scale"],1,Qt),!B))return null;let S=null;if(x["text-font"]&&(S=n.parse(x["text-font"],1,J(Ei)),!S))return null;let M=null;if(x["text-color"]&&(M=n.parse(x["text-color"],1,lr),!M))return null;const P=A[A.length-1];P.scale=B,P.font=S,P.textColor=M}else{const B=n.parse(t[m],1,xi);if(!B)return null;const S=B.type.kind;if(S!=="string"&&S!=="value"&&S!=="null"&&S!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,A.push({content:B,scale:null,font:null,textColor:null})}}return new Sl(A)}evaluate(t){return new Dn(this.sections.map(n=>{const o=n.content.evaluate(t);return Vr(o)===mn?new vc("",o,null,null,null):new vc(Eo(o),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)}))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}outputDefined(){return!1}}class Bc{constructor(t){this.type=mn,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const o=n.parse(t[1],1,Ei);return o?new Bc(o):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),o=In.fromString(n);return o&&t.availableImages&&(o.available=t.availableImages.indexOf(n)>-1),o}eachChild(t){t(this.input)}outputDefined(){return!1}}class Ec{constructor(t){this.type=Qt,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const o=n.parse(t[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${j(o.type)} instead.`):new Ec(o):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Mr(`Expected value to be of type string or array, but found ${j(Vr(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Mn=8192;function Qc(r,t){const n=(180+r[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,A=Math.pow(2,t.z);return[Math.round(n*A*Mn),Math.round(o*A*Mn)]}function Dl(r,t){const n=Math.pow(2,t.z);return[(A=(r[0]/Mn+t.x)/n,360*A-180),(o=(r[1]/Mn+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90)];var o,A}function Pa(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function Ra(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function Ni(r,t,n){const o=r[0]-t[0],A=r[1]-t[1],p=r[0]-n[0],m=r[1]-n[1];return o*m-p*A==0&&o*p<=0&&A*m<=0}function as(r,t,n,o){return(A=[o[0]-n[0],o[1]-n[1]])[0]*(p=[t[0]-r[0],t[1]-r[1]])[1]-A[1]*p[0]!=0&&!(!_u(r,t,n,o)||!_u(n,o,r,t));var A,p}function kl(r,t,n){for(const o of n)for(let A=0;A<o.length-1;++A)if(as(r,t,o[A],o[A+1]))return!0;return!1}function ta(r,t,n=!1){let o=!1;for(const x of t)for(let B=0;B<x.length-1;B++){if(Ni(r,x[B],x[B+1]))return n;(p=x[B])[1]>(A=r)[1]!=(m=x[B+1])[1]>A[1]&&A[0]<(m[0]-p[0])*(A[1]-p[1])/(m[1]-p[1])+p[0]&&(o=!o)}var A,p,m;return o}function To(r,t){for(const n of t)if(ta(r,n))return!0;return!1}function ia(r,t){for(const n of r)if(!ta(n,t))return!1;for(let n=0;n<r.length-1;++n)if(kl(r[n],r[n+1],t))return!1;return!0}function bh(r,t){for(const n of t)if(ia(r,n))return!0;return!1}function _u(r,t,n,o){const A=o[0]-n[0],p=o[1]-n[1],m=(r[0]-n[0])*p-A*(r[1]-n[1]),x=(t[0]-n[0])*p-A*(t[1]-n[1]);return m>0&&x<0||m<0&&x>0}function Sc(r,t,n){const o=[];for(let A=0;A<r.length;A++){const p=[];for(let m=0;m<r[A].length;m++){const x=Qc(r[A][m],n);Pa(t,x),p.push(x)}o.push(p)}return o}function Iu(r,t,n){const o=[];for(let A=0;A<r.length;A++){const p=Sc(r[A],t,n);o.push(p)}return o}function vu(r,t,n,o){if(r[0]<n[0]||r[0]>n[2]){const A=.5*o;let p=r[0]-n[0]>A?-o:n[0]-r[0]>A?o:0;p===0&&(p=r[0]-n[2]>A?-o:n[2]-r[0]>A?o:0),r[0]+=p}Pa(t,r)}function bu(r,t,n,o){const A=Math.pow(2,o.z)*Mn,p=[o.x*Mn,o.y*Mn],m=[];for(const x of r)for(const B of x){const S=[B.x+p[0],B.y+p[1]];vu(S,t,n,A),m.push(S)}return m}function xu(r,t,n,o){const A=Math.pow(2,o.z)*Mn,p=[o.x*Mn,o.y*Mn],m=[];for(const B of r){const S=[];for(const M of B){const P=[M.x+p[0],M.y+p[1]];Pa(t,P),S.push(P)}m.push(S)}if(t[2]-t[0]<=A/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const B of m)for(const S of B)vu(S,t,n,A)}var x;return m}class ss{constructor(t,n){this.type=ti,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Un(t[1])){const o=t[1];if(o.type==="FeatureCollection"){const A=[];for(const p of o.features){const{type:m,coordinates:x}=p.geometry;m==="Polygon"&&A.push(x),m==="MultiPolygon"&&A.push(...x)}if(A.length)return new ss(o,{type:"MultiPolygon",coordinates:A})}else if(o.type==="Feature"){const A=o.geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new ss(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new ss(o,o)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,o){const A=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=n.canonicalID();if(o.type==="Polygon"){const x=Sc(o.coordinates,p,m),B=bu(n.geometry(),A,p,m);if(!Ra(A,p))return!1;for(const S of B)if(!ta(S,x))return!1}if(o.type==="MultiPolygon"){const x=Iu(o.coordinates,p,m),B=bu(n.geometry(),A,p,m);if(!Ra(A,p))return!1;for(const S of B)if(!To(S,x))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,o){const A=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=n.canonicalID();if(o.type==="Polygon"){const x=Sc(o.coordinates,p,m),B=xu(n.geometry(),A,p,m);if(!Ra(A,p))return!1;for(const S of B)if(!ia(S,x))return!1}if(o.type==="MultiPolygon"){const x=Iu(o.coordinates,p,m),B=xu(n.geometry(),A,p,m);if(!Ra(A,p))return!1;for(const S of B)if(!bh(S,x))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Dc=class{constructor(r=[],t=(n,o)=>n<o?-1:n>o?1:0){if(this.data=r,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:t,compare:n}=this,o=t[r];for(;r>0;){const A=r-1>>1,p=t[A];if(n(o,p)>=0)break;t[r]=p,r=A}t[r]=o}_down(r){const{data:t,compare:n}=this,o=this.length>>1,A=t[r];for(;r<o;){let p=1+(r<<1);const m=p+1;if(m<this.length&&n(t[m],t[p])<0&&(p=m),n(t[p],A)>=0)break;t[r]=t[p],r=p}t[r]=A}};function wu(r,t,n,o,A){Zs(r,t,n,o||r.length-1,A)}function Zs(r,t,n,o,A){for(;o>n;){if(o-n>600){var p=o-n+1,m=t-n+1,x=Math.log(p),B=.5*Math.exp(2*x/3),S=.5*Math.sqrt(x*B*(p-B)/p)*(m-p/2<0?-1:1);Zs(r,t,Math.max(n,Math.floor(t-m*B/p+S)),Math.min(o,Math.floor(t+(p-m)*B/p+S)),A)}var M=r[t],P=n,U=o;for(Ws(r,n,t),A(r[o],M)>0&&Ws(r,n,o);P<U;){for(Ws(r,P,U),P++,U--;A(r[P],M)<0;)P++;for(;A(r[U],M)>0;)U--}A(r[n],M)===0?Ws(r,n,U):Ws(r,++U,o),U<=t&&(n=U+1),t<=U&&(o=U-1)}}function Ws(r,t,n){var o=r[t];r[t]=r[n],r[n]=o}function ws(r,t){if(r.length<=1)return[r];const n=[];let o,A;for(const p of r){const m=vn(p);m!==0&&(p.area=Math.abs(m),A===void 0&&(A=m<0),A===m<0?(o&&n.push(o),o=[p]):o.push(p))}if(o&&n.push(o),t>1)for(let p=0;p<n.length;p++)n[p].length<=t||(wu(n[p],t,1,n[p].length-1,kc),n[p]=n[p].slice(0,t));return n}function kc(r,t){return t.area-r.area}function vn(r){let t=0;for(let n,o,A=0,p=r.length,m=p-1;A<p;m=A++)n=r[A],o=r[m],t+=(o.x-n.x)*(n.y+o.y);return t}const Mc=1/298.257223563,Tc=Mc*(2-Mc),Po=Math.PI/180;class La{constructor(t){const n=6378.137*Po*1e3,o=Math.cos(t*Po),A=1/(1-Tc*(1-o*o)),p=Math.sqrt(A);this.kx=n*p*o,this.ky=n*p*A*(1-Tc)}distance(t,n){const o=this.wrap(t[0]-n[0])*this.kx,A=(t[1]-n[1])*this.ky;return Math.sqrt(o*o+A*A)}pointOnLine(t,n){let o,A,p,m,x=1/0;for(let B=0;B<t.length-1;B++){let S=t[B][0],M=t[B][1],P=this.wrap(t[B+1][0]-S)*this.kx,U=(t[B+1][1]-M)*this.ky,K=0;P===0&&U===0||(K=(this.wrap(n[0]-S)*this.kx*P+(n[1]-M)*this.ky*U)/(P*P+U*U),K>1?(S=t[B+1][0],M=t[B+1][1]):K>0&&(S+=P/this.kx*K,M+=U/this.ky*K)),P=this.wrap(n[0]-S)*this.kx,U=(n[1]-M)*this.ky;const re=P*P+U*U;re<x&&(x=re,o=S,A=M,p=B,m=K)}return{point:[o,A],index:p,t:Math.max(0,Math.min(1,m))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function os(r,t){return t[0]-r[0]}function Ro(r){return r[1]-r[0]+1}function Ia(r,t){return r[1]>=r[0]&&r[1]<t}function Tn(r,t){if(r[0]>r[1])return[null,null];const n=Ro(r);if(t){if(n===2)return[r,null];const A=Math.floor(n/2);return[[r[0],r[0]+A],[r[0]+A,r[1]]]}if(n===1)return[r,null];const o=Math.floor(n/2)-1;return[[r[0],r[0]+o],[r[0]+o+1,r[1]]]}function Ml(r,t){if(!Ia(t,r.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let o=t[0];o<=t[1];++o)Pa(n,r[o]);return n}function Xs(r){const t=[1/0,1/0,-1/0,-1/0];for(const n of r)for(const o of n)Pa(t,o);return t}function Tl(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function Cs(r,t,n){if(!Tl(r)||!Tl(t))return NaN;let o=0,A=0;return r[2]<t[0]&&(o=t[0]-r[2]),r[0]>t[2]&&(o=r[0]-t[2]),r[1]>t[3]&&(A=r[1]-t[3]),r[3]<t[1]&&(A=t[1]-r[3]),n.distance([0,0],[o,A])}function Bs(r,t,n){const o=n.pointOnLine(t,r);return n.distance(r,o.point)}function Pl(r,t,n,o,A){const p=Math.min(Bs(r,[n,o],A),Bs(t,[n,o],A)),m=Math.min(Bs(n,[r,t],A),Bs(o,[r,t],A));return Math.min(p,m)}function Cu(r,t,n,o,A){if(!Ia(t,r.length)||!Ia(o,n.length))return 1/0;let p=1/0;for(let m=t[0];m<t[1];++m){const x=r[m],B=r[m+1];for(let S=o[0];S<o[1];++S){const M=n[S],P=n[S+1];if(as(x,B,M,P))return 0;p=Math.min(p,Pl(x,B,M,P,A))}}return p}function xh(r,t,n,o,A){if(!Ia(t,r.length)||!Ia(o,n.length))return NaN;let p=1/0;for(let m=t[0];m<=t[1];++m)for(let x=o[0];x<=o[1];++x)if(p=Math.min(p,A.distance(r[m],n[x])),p===0)return p;return p}function Tr(r,t,n){if(ta(r,t,!0))return 0;let o=1/0;for(const A of t){const p=A[0],m=A[A.length-1];if(p!==m&&(o=Math.min(o,Bs(r,[m,p],n)),o===0))return o;const x=n.pointOnLine(A,r);if(o=Math.min(o,n.distance(r,x.point)),o===0)return o}return o}function wh(r,t,n,o){if(!Ia(t,r.length))return NaN;for(let p=t[0];p<=t[1];++p)if(ta(r[p],n,!0))return 0;let A=1/0;for(let p=t[0];p<t[1];++p){const m=r[p],x=r[p+1];for(const B of n)for(let S=0,M=B.length,P=M-1;S<M;P=S++){const U=B[P],K=B[S];if(as(m,x,U,K))return 0;A=Math.min(A,Pl(m,x,U,K,o))}}return A}function Si(r,t){for(const n of r)for(const o of n)if(ta(o,t,!0))return!0;return!1}function Pc(r,t,n,o=1/0){const A=Xs(r),p=Xs(t);if(o!==1/0&&Cs(A,p,n)>=o)return o;if(Ra(A,p)){if(Si(r,t))return 0}else if(Si(t,r))return 0;let m=1/0;for(const x of r)for(let B=0,S=x.length,M=S-1;B<S;M=B++){const P=x[M],U=x[B];for(const K of t)for(let re=0,ae=K.length,me=ae-1;re<ae;me=re++){const we=K[me],Ye=K[re];if(as(P,U,we,Ye))return 0;m=Math.min(m,Pl(P,U,we,Ye,n))}}return m}function er(r,t,n,o,A,p){if(!p)return;const m=Cs(Ml(o,p),A,n);m<t&&r.push([m,p,[0,0]])}function ji(r,t,n,o,A,p,m){if(!p||!m)return;const x=Cs(Ml(o,p),Ml(A,m),n);x<t&&r.push([x,p,m])}function Es(r,t,n,o,A=1/0){let p=Math.min(o.distance(r[0],n[0][0]),A);if(p===0)return p;const m=new Dc([[0,[0,r.length-1],[0,0]]],os),x=Xs(n);for(;m.length>0;){const B=m.pop();if(B[0]>=p)continue;const S=B[1],M=t?50:100;if(Ro(S)<=M){if(!Ia(S,r.length))return NaN;if(t){const P=wh(r,S,n,o);if(isNaN(P)||P===0)return P;p=Math.min(p,P)}else for(let P=S[0];P<=S[1];++P){const U=Tr(r[P],n,o);if(p=Math.min(p,U),p===0)return 0}}else{const P=Tn(S,t);er(m,p,o,r,x,P[0]),er(m,p,o,r,x,P[1])}}return p}function Qs(r,t,n,o,A,p=1/0){let m=Math.min(p,A.distance(r[0],n[0]));if(m===0)return m;const x=new Dc([[0,[0,r.length-1],[0,n.length-1]]],os);for(;x.length>0;){const B=x.pop();if(B[0]>=m)continue;const S=B[1],M=B[2],P=t?50:100,U=o?50:100;if(Ro(S)<=P&&Ro(M)<=U){if(!Ia(S,r.length)&&Ia(M,n.length))return NaN;let K;if(t&&o)K=Cu(r,S,n,M,A),m=Math.min(m,K);else if(t&&!o){const re=r.slice(S[0],S[1]+1);for(let ae=M[0];ae<=M[1];++ae)if(K=Bs(n[ae],re,A),m=Math.min(m,K),m===0)return m}else if(!t&&o){const re=n.slice(M[0],M[1]+1);for(let ae=S[0];ae<=S[1];++ae)if(K=Bs(r[ae],re,A),m=Math.min(m,K),m===0)return m}else K=xh(r,S,n,M,A),m=Math.min(m,K)}else{const K=Tn(S,t),re=Tn(M,o);ji(x,m,A,r,n,K[0],re[0]),ji(x,m,A,r,n,K[0],re[1]),ji(x,m,A,r,n,K[1],re[0]),ji(x,m,A,r,n,K[1],re[1])}}return m}function Rl(r){return r.type==="MultiPolygon"?r.coordinates.map(t=>({type:"Polygon",coordinates:t})):r.type==="MultiLineString"?r.coordinates.map(t=>({type:"LineString",coordinates:t})):r.type==="MultiPoint"?r.coordinates.map(t=>({type:"Point",coordinates:t})):[r]}class Ss{constructor(t,n){this.type=Qt,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Un(t[1])){const o=t[1];if(o.type==="FeatureCollection")return new Ss(o,o.features.map(A=>Rl(A.geometry)).flat());if(o.type==="Feature")return new Ss(o,Rl(o.geometry));if("type"in o&&"coordinates"in o)return new Ss(o,Rl(o))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,o){const A=n.geometry(),p=A.flat().map(B=>Dl([B.x,B.y],n.canonical));if(A.length===0)return NaN;const m=new La(p[0][1]);let x=1/0;for(const B of o){switch(B.type){case"Point":x=Math.min(x,Qs(p,!1,[B.coordinates],!1,m,x));break;case"LineString":x=Math.min(x,Qs(p,!1,B.coordinates,!0,m,x));break;case"Polygon":x=Math.min(x,Es(p,!1,B.coordinates,m,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,o){const A=n.geometry(),p=A.flat().map(B=>Dl([B.x,B.y],n.canonical));if(A.length===0)return NaN;const m=new La(p[0][1]);let x=1/0;for(const B of o){switch(B.type){case"Point":x=Math.min(x,Qs(p,!0,[B.coordinates],!1,m,x));break;case"LineString":x=Math.min(x,Qs(p,!0,B.coordinates,!0,m,x));break;case"Polygon":x=Math.min(x,Es(p,!0,B.coordinates,m,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="Polygon")return function(n,o){const A=n.geometry();if(A.length===0||A[0].length===0)return NaN;const p=ws(A,0).map(B=>B.map(S=>S.map(M=>Dl([M.x,M.y],n.canonical)))),m=new La(p[0][0][0][1]);let x=1/0;for(const B of o)for(const S of p){switch(B.type){case"Point":x=Math.min(x,Es([B.coordinates],!1,S,m,x));break;case"LineString":x=Math.min(x,Es(B.coordinates,!0,S,m,x));break;case"Polygon":x=Math.min(x,Pc(S,B.coordinates,m,x))}if(x===0)return x}return x}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ds={"==":yu,"!=":wc,">":El,"<":Bl,">=":Cc,"<=":vh,array:kn,at:bc,boolean:kn,case:xl,coalesce:wl,collator:Mo,format:Sl,image:Bc,in:So,"index-of":rs,interpolate:Wr,"interpolate-hcl":Wr,"interpolate-lab":Wr,length:Ec,let:Ma,literal:Xn,match:xc,number:kn,"number-format":Ql,object:kn,slice:Do,step:ns,string:kn,"to-boolean":ea,"to-color":ea,"to-number":ea,"to-string":ea,var:Hi,within:ss,distance:Ss};class nn{constructor(t,n,o,A){this.name=t,this.type=n,this._evaluate=o,this.args=A}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const o=t[0],A=nn.definitions[o];if(!A)return n.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const p=Array.isArray(A)?A[0]:A.type,m=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,x=m.filter(([S])=>!Array.isArray(S)||S.length===t.length-1);let B=null;for(const[S,M]of x){B=new Is(n.registry,Ms,n.path,null,n.scope);const P=[];let U=!1;for(let K=1;K<t.length;K++){const re=t[K],ae=Array.isArray(S)?S[K-1]:S.type,me=B.parse(re,1+P.length,ae);if(!me){U=!0;break}P.push(me)}if(!U)if(Array.isArray(S)&&S.length!==P.length)B.error(`Expected ${S.length} arguments, but found ${P.length} instead.`);else{for(let K=0;K<P.length;K++){const re=Array.isArray(S)?S[K]:S.type,ae=P[K];B.concat(K+1).checkSubtype(re,ae.type)}if(B.errors.length===0)return new nn(o,p,M,P)}}if(x.length===1)n.errors.push(...B.errors);else{const S=(x.length?x:m).map(([P])=>{return U=P,Array.isArray(U)?`(${U.map(j).join(", ")})`:`(${j(U.type)}...)`;var U}).join(" | "),M=[];for(let P=1;P<t.length;P++){const U=n.parse(t[P],1+M.length);if(!U)return null;M.push(j(U.type))}n.error(`Expected arguments of type ${S}, but found (${M.join(", ")}) instead.`)}return null}static register(t,n){nn.definitions=n;for(const o in n)t[o]=nn}}function Ll(r,[t,n,o,A]){t=t.evaluate(r),n=n.evaluate(r),o=o.evaluate(r);const p=A?A.evaluate(r):1,m=ka(t,n,o,p);if(m)throw new Mr(m);return new Xi(t/255,n/255,o/255,p,!1)}function Rc(r,t){return r in t}function Fl(r,t){const n=t[r];return n===void 0?null:n}function ks(r){return{type:r}}function Ms(r){if(r instanceof Hi)return Ms(r.boundExpression);if(r instanceof nn&&r.name==="error"||r instanceof Mo||r instanceof ss||r instanceof Ss)return!1;const t=r instanceof ea||r instanceof kn;let n=!0;return r.eachChild(o=>{n=t?n&&Ms(o):n&&o instanceof Xn}),!!n&&va(r)&&Lo(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function va(r){if(r instanceof nn&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof ss||r instanceof Ss)return!1;let t=!0;return r.eachChild(n=>{t&&!va(n)&&(t=!1)}),t}function Ts(r){if(r instanceof nn&&r.name==="feature-state")return!1;let t=!0;return r.eachChild(n=>{t&&!Ts(n)&&(t=!1)}),t}function Lo(r,t){if(r instanceof nn&&t.indexOf(r.name)>=0)return!1;let n=!0;return r.eachChild(o=>{n&&!Lo(o,t)&&(n=!1)}),n}function eo(r){return{result:"success",value:r}}function ba(r){return{result:"error",value:r}}function Ps(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Lc(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function zl(r){return!!r.expression&&r.expression.interpolated}function Ui(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Fo(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Bu(r){return r}function Fc(r,t){const n=t.type==="color",o=r.stops&&typeof r.stops[0][0]=="object",A=o||!(o||r.property!==void 0),p=r.type||(zl(t)?"exponential":"interval");if(n||t.type==="padding"){const M=n?Xi.parse:yn.parse;(r=fr({},r)).stops&&(r.stops=r.stops.map(P=>[P[0],M(P[1])])),r.default=M(r.default?r.default:t.default)}if(r.colorSpace&&(m=r.colorSpace)!=="rgb"&&m!=="hcl"&&m!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var m;let x,B,S;if(p==="exponential")x=zo;else if(p==="interval")x=Qu;else if(p==="categorical"){x=Eu,B=Object.create(null);for(const M of r.stops)B[M[0]]=M[1];S=typeof r.stops[0][0]}else{if(p!=="identity")throw new Error(`Unknown function type "${p}"`);x=Su}if(o){const M={},P=[];for(let re=0;re<r.stops.length;re++){const ae=r.stops[re],me=ae[0].zoom;M[me]===void 0&&(M[me]={zoom:me,type:r.type,property:r.property,default:r.default,stops:[]},P.push(me)),M[me].stops.push([ae[0].value,ae[1]])}const U=[];for(const re of P)U.push([M[re].zoom,Fc(M[re],t)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Wr.interpolationFactor.bind(void 0,K),zoomStops:U.map(re=>re[0]),evaluate:({zoom:re},ae)=>zo({stops:U,base:r.base},t,re).evaluate(re,ae)}}if(A){const M=p==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Wr.interpolationFactor.bind(void 0,M),zoomStops:r.stops.map(P=>P[0]),evaluate:({zoom:P})=>x(r,t,P,B,S)}}return{kind:"source",evaluate(M,P){const U=P&&P.properties?P.properties[r.property]:void 0;return U===void 0?to(r.default,t.default):x(r,t,U,B,S)}}}function to(r,t,n){return r!==void 0?r:t!==void 0?t:n!==void 0?n:void 0}function Eu(r,t,n,o,A){return to(typeof n===A?o[n]:void 0,r.default,t.default)}function Qu(r,t,n){if(Ui(n)!=="number")return to(r.default,t.default);const o=r.stops.length;if(o===1||n<=r.stops[0][0])return r.stops[0][1];if(n>=r.stops[o-1][0])return r.stops[o-1][1];const A=_a(r.stops.map(p=>p[0]),n);return r.stops[A][1]}function zo(r,t,n){const o=r.base!==void 0?r.base:1;if(Ui(n)!=="number")return to(r.default,t.default);const A=r.stops.length;if(A===1||n<=r.stops[0][0])return r.stops[0][1];if(n>=r.stops[A-1][0])return r.stops[A-1][1];const p=_a(r.stops.map(M=>M[0]),n),m=function(M,P,U,K){const re=K-U,ae=M-U;return re===0?0:P===1?ae/re:(Math.pow(P,ae)-1)/(Math.pow(P,re)-1)}(n,o,r.stops[p][0],r.stops[p+1][0]),x=r.stops[p][1],B=r.stops[p+1][1],S=zr[t.type]||Bu;return typeof x.evaluate=="function"?{evaluate(...M){const P=x.evaluate.apply(void 0,M),U=B.evaluate.apply(void 0,M);if(P!==void 0&&U!==void 0)return S(P,U,m,r.colorSpace)}}:S(x,B,m,r.colorSpace)}function Su(r,t,n){switch(t.type){case"color":n=Xi.parse(n);break;case"formatted":n=Dn.fromString(n.toString());break;case"resolvedImage":n=In.fromString(n.toString());break;case"padding":n=yn.parse(n);break;default:Ui(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0)}return to(n,r.default,t.default)}nn.register(Ds,{error:[{kind:"error"},[Ei],(r,[t])=>{throw new Mr(t.evaluate(r))}],typeof:[Ei,[xi],(r,[t])=>j(Vr(t.evaluate(r)))],"to-rgba":[J(Qt,4),[lr],(r,[t])=>{const[n,o,A,p]=t.evaluate(r).rgb;return[255*n,255*o,255*A,p]}],rgb:[lr,[Qt,Qt,Qt],Ll],rgba:[lr,[Qt,Qt,Qt,Qt],Ll],has:{type:ti,overloads:[[[Ei],(r,[t])=>Rc(t.evaluate(r),r.properties())],[[Ei,An],(r,[t,n])=>Rc(t.evaluate(r),n.evaluate(r))]]},get:{type:xi,overloads:[[[Ei],(r,[t])=>Fl(t.evaluate(r),r.properties())],[[Ei,An],(r,[t,n])=>Fl(t.evaluate(r),n.evaluate(r))]]},"feature-state":[xi,[Ei],(r,[t])=>Fl(t.evaluate(r),r.featureState||{})],properties:[An,[],r=>r.properties()],"geometry-type":[Ei,[],r=>r.geometryType()],id:[xi,[],r=>r.id()],zoom:[Qt,[],r=>r.globals.zoom],"heatmap-density":[Qt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Qt,[],r=>r.globals.lineProgress||0],accumulated:[xi,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Qt,ks(Qt),(r,t)=>{let n=0;for(const o of t)n+=o.evaluate(r);return n}],"*":[Qt,ks(Qt),(r,t)=>{let n=1;for(const o of t)n*=o.evaluate(r);return n}],"-":{type:Qt,overloads:[[[Qt,Qt],(r,[t,n])=>t.evaluate(r)-n.evaluate(r)],[[Qt],(r,[t])=>-t.evaluate(r)]]},"/":[Qt,[Qt,Qt],(r,[t,n])=>t.evaluate(r)/n.evaluate(r)],"%":[Qt,[Qt,Qt],(r,[t,n])=>t.evaluate(r)%n.evaluate(r)],ln2:[Qt,[],()=>Math.LN2],pi:[Qt,[],()=>Math.PI],e:[Qt,[],()=>Math.E],"^":[Qt,[Qt,Qt],(r,[t,n])=>Math.pow(t.evaluate(r),n.evaluate(r))],sqrt:[Qt,[Qt],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[Qt,[Qt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[Qt,[Qt],(r,[t])=>Math.log(t.evaluate(r))],log2:[Qt,[Qt],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[Qt,[Qt],(r,[t])=>Math.sin(t.evaluate(r))],cos:[Qt,[Qt],(r,[t])=>Math.cos(t.evaluate(r))],tan:[Qt,[Qt],(r,[t])=>Math.tan(t.evaluate(r))],asin:[Qt,[Qt],(r,[t])=>Math.asin(t.evaluate(r))],acos:[Qt,[Qt],(r,[t])=>Math.acos(t.evaluate(r))],atan:[Qt,[Qt],(r,[t])=>Math.atan(t.evaluate(r))],min:[Qt,ks(Qt),(r,t)=>Math.min(...t.map(n=>n.evaluate(r)))],max:[Qt,ks(Qt),(r,t)=>Math.max(...t.map(n=>n.evaluate(r)))],abs:[Qt,[Qt],(r,[t])=>Math.abs(t.evaluate(r))],round:[Qt,[Qt],(r,[t])=>{const n=t.evaluate(r);return n<0?-Math.round(-n):Math.round(n)}],floor:[Qt,[Qt],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[Qt,[Qt],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[ti,[Ei,xi],(r,[t,n])=>r.properties()[t.value]===n.value],"filter-id-==":[ti,[xi],(r,[t])=>r.id()===t.value],"filter-type-==":[ti,[Ei],(r,[t])=>r.geometryType()===t.value],"filter-<":[ti,[Ei,xi],(r,[t,n])=>{const o=r.properties()[t.value],A=n.value;return typeof o==typeof A&&o<A}],"filter-id-<":[ti,[xi],(r,[t])=>{const n=r.id(),o=t.value;return typeof n==typeof o&&n<o}],"filter->":[ti,[Ei,xi],(r,[t,n])=>{const o=r.properties()[t.value],A=n.value;return typeof o==typeof A&&o>A}],"filter-id->":[ti,[xi],(r,[t])=>{const n=r.id(),o=t.value;return typeof n==typeof o&&n>o}],"filter-<=":[ti,[Ei,xi],(r,[t,n])=>{const o=r.properties()[t.value],A=n.value;return typeof o==typeof A&&o<=A}],"filter-id-<=":[ti,[xi],(r,[t])=>{const n=r.id(),o=t.value;return typeof n==typeof o&&n<=o}],"filter->=":[ti,[Ei,xi],(r,[t,n])=>{const o=r.properties()[t.value],A=n.value;return typeof o==typeof A&&o>=A}],"filter-id->=":[ti,[xi],(r,[t])=>{const n=r.id(),o=t.value;return typeof n==typeof o&&n>=o}],"filter-has":[ti,[xi],(r,[t])=>t.value in r.properties()],"filter-has-id":[ti,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[ti,[J(Ei)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[ti,[J(xi)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[ti,[Ei,J(xi)],(r,[t,n])=>n.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[ti,[Ei,J(xi)],(r,[t,n])=>function(o,A,p,m){for(;p<=m;){const x=p+m>>1;if(A[x]===o)return!0;A[x]>o?m=x-1:p=x+1}return!1}(r.properties()[t.value],n.value,0,n.value.length-1)],all:{type:ti,overloads:[[[ti,ti],(r,[t,n])=>t.evaluate(r)&&n.evaluate(r)],[ks(ti),(r,t)=>{for(const n of t)if(!n.evaluate(r))return!1;return!0}]]},any:{type:ti,overloads:[[[ti,ti],(r,[t,n])=>t.evaluate(r)||n.evaluate(r)],[ks(ti),(r,t)=>{for(const n of t)if(n.evaluate(r))return!0;return!1}]]},"!":[ti,[ti],(r,[t])=>!t.evaluate(r)],"is-supported-script":[ti,[Ei],(r,[t])=>{const n=r.globals&&r.globals.isSupportedScript;return!n||n(t.evaluate(r))}],upcase:[Ei,[Ei],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Ei,[Ei],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Ei,ks(xi),(r,t)=>t.map(n=>Eo(n.evaluate(r))).join("")],"resolved-locale":[Ei,[ma],(r,[t])=>t.evaluate(r).resolvedLocale()]});class Go{constructor(t,n){var o;this.expression=t,this._warningHistory={},this._evaluator=new bl,this._defaultValue=n?(o=n).type==="color"&&Fo(o.default)?new Xi(0,0,0,0):o.type==="color"?Xi.parse(o.default)||null:o.type==="padding"?yn.parse(o.default)||null:o.type==="variableAnchorOffsetCollection"?_n.parse(o.default)||null:o.default===void 0?null:o.default:null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,o,A,p,m){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=o,this._evaluator.canonical=A,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)}evaluate(t,n,o,A,p,m){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=o||null,this._evaluator.canonical=A,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m||null;try{const x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Mr(`Expected value to be one of ${Object.keys(this._enumValues).map(B=>JSON.stringify(B)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function io(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Ds}function No(r,t){const n=new Is(Ds,Ms,[],t?function(A){const p={color:lr,string:Ei,number:Qt,enum:Ei,boolean:ti,formatted:ya,padding:is,resolvedImage:mn,variableAnchorOffsetCollection:_e};return A.type==="array"?J(p[A.value]||xi,A.length):p[A.type]}(t):void 0),o=n.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?eo(new Go(o,t)):ba(n.errors)}class Uo{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!Ts(n.expression)}evaluateWithoutErrorHandling(t,n,o,A,p,m){return this._styleExpression.evaluateWithoutErrorHandling(t,n,o,A,p,m)}evaluate(t,n,o,A,p,m){return this._styleExpression.evaluate(t,n,o,A,p,m)}}class ro{constructor(t,n,o,A){this.kind=t,this.zoomStops=o,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!Ts(n.expression),this.interpolationType=A}evaluateWithoutErrorHandling(t,n,o,A,p,m){return this._styleExpression.evaluateWithoutErrorHandling(t,n,o,A,p,m)}evaluate(t,n,o,A,p,m){return this._styleExpression.evaluate(t,n,o,A,p,m)}interpolationFactor(t,n,o){return this.interpolationType?Wr.interpolationFactor(this.interpolationType,t,n,o):0}}function no(r,t){const n=No(r,t);if(n.result==="error")return n;const o=n.value.expression,A=va(o);if(!A&&!Ps(t))return ba([new Zi("","data expressions not supported")]);const p=Lo(o,["zoom"]);if(!p&&!Lc(t))return ba([new Zi("","zoom expressions not supported")]);const m=ao(o);return m||p?m instanceof Zi?ba([m]):m instanceof Wr&&!zl(t)?ba([new Zi("",'"interpolate" expressions cannot be used with this property')]):eo(m?new ro(A?"camera":"composite",n.value,m.labels,m instanceof Wr?m.interpolation:void 0):new Uo(A?"constant":"source",n.value)):ba([new Zi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pn{constructor(t,n){this._parameters=t,this._specification=n,fr(this,Fc(this._parameters,this._specification))}static deserialize(t){return new Pn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ao(r){let t=null;if(r instanceof Ma)t=ao(r.result);else if(r instanceof wl){for(const n of r.args)if(t=ao(n),t)break}else(r instanceof ns||r instanceof Wr)&&r.input instanceof nn&&r.input.name==="zoom"&&(t=r);return t instanceof Zi||r.eachChild(n=>{const o=ao(n);o instanceof Zi?t=o:!t&&o?t=new Zi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&o&&t!==o&&(t=new Zi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Oo(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!Oo(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Du={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function so(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Oo(r)||(r=oo(r));const t=No(r,Du);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,o,A)=>t.value.evaluate(n,o,{},A),needGeometry:ku(r)}}function Ch(r,t){return r<t?-1:r>t?1:0}function ku(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let t=1;t<r.length;t++)if(ku(r[t]))return!0;return!1}function oo(r){if(!r)return!0;const t=r[0];return r.length<=1?t!=="any":t==="=="?Vo(r[1],r[2],"=="):t==="!="?ra(Vo(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Vo(r[1],r[2],t):t==="any"?(n=r.slice(1),["any"].concat(n.map(oo))):t==="all"?["all"].concat(r.slice(1).map(oo)):t==="none"?["all"].concat(r.slice(1).map(oo).map(ra)):t==="in"?Mu(r[1],r.slice(2)):t==="!in"?ra(Mu(r[1],r.slice(2))):t==="has"?qo(r[1]):t!=="!has"||ra(qo(r[1]));var n}function Vo(r,t,n){switch(r){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,r,t]}}function Mu(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(n=>typeof n!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Ch)]]:["filter-in-small",r,["literal",t]]}}function qo(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function ra(r){return["!",r]}function Xr(r){const t=typeof r;if(t==="number"||t==="boolean"||t==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let A="[";for(const p of r)A+=`${Xr(p)},`;return`${A}]`}const n=Object.keys(r).sort();let o="{";for(let A=0;A<n.length;A++)o+=`${JSON.stringify(n[A])}:${Xr(r[n[A]])},`;return`${o}}`}function ls(r){let t="";for(const n of vt)t+=`/${Xr(r[n])}`;return t}function lo(r){const t=r.value;return t?[new ht(r.key,t,"constants have been deprecated as of v8")]:[]}function Ir(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function xa(r){if(Array.isArray(r))return r.map(xa);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const n in r)t[n]=xa(r[n]);return t}return Ir(r)}function Jr(r){const t=r.key,n=r.value,o=r.valueSpec||{},A=r.objectElementValidators||{},p=r.style,m=r.styleSpec,x=r.validateSpec;let B=[];const S=Ui(n);if(S!=="object")return[new ht(t,n,`object expected, ${S} found`)];for(const M in n){const P=M.split(".")[0],U=o[P]||o["*"];let K;if(A[P])K=A[P];else if(o[P])K=x;else if(A["*"])K=A["*"];else{if(!o["*"]){B.push(new ht(t,n[M],`unknown property "${M}"`));continue}K=x}B=B.concat(K({key:(t&&`${t}.`)+M,value:n[M],valueSpec:U,style:p,styleSpec:m,object:n,objectKey:M,validateSpec:x},n))}for(const M in o)A[M]||o[M].required&&o[M].default===void 0&&n[M]===void 0&&B.push(new ht(t,n,`missing required property "${M}"`));return B}function Fa(r){const t=r.value,n=r.valueSpec,o=r.style,A=r.styleSpec,p=r.key,m=r.arrayElementValidator||r.validateSpec;if(Ui(t)!=="array")return[new ht(p,t,`array expected, ${Ui(t)} found`)];if(n.length&&t.length!==n.length)return[new ht(p,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new ht(p,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let x={type:n.value,values:n.values};A.$version<7&&(x.function=n.function),Ui(n.value)==="object"&&(x=n.value);let B=[];for(let S=0;S<t.length;S++)B=B.concat(m({array:t,arrayIndex:S,value:t[S],valueSpec:x,validateSpec:r.validateSpec,style:o,styleSpec:A,key:`${p}[${S}]`}));return B}function cs(r){const t=r.key,n=r.value,o=r.valueSpec;let A=Ui(n);return A==="number"&&n!=n&&(A="NaN"),A!=="number"?[new ht(t,n,`number expected, ${A} found`)]:"minimum"in o&&n<o.minimum?[new ht(t,n,`${n} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&n>o.maximum?[new ht(t,n,`${n} is greater than the maximum value ${o.maximum}`)]:[]}function zc(r){const t=r.valueSpec,n=Ir(r.value.type);let o,A,p,m={};const x=n!=="categorical"&&r.value.property===void 0,B=!x,S=Ui(r.value.stops)==="array"&&Ui(r.value.stops[0])==="array"&&Ui(r.value.stops[0][0])==="object",M=Jr({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(K){if(n==="identity")return[new ht(K.key,K.value,'identity function may not have a "stops" property')];let re=[];const ae=K.value;return re=re.concat(Fa({key:K.key,value:ae,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:P})),Ui(ae)==="array"&&ae.length===0&&re.push(new ht(K.key,ae,"array must have at least one stop")),re},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:t,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return n==="identity"&&x&&M.push(new ht(r.key,r.value,'missing required property "property"')),n==="identity"||r.value.stops||M.push(new ht(r.key,r.value,'missing required property "stops"')),n==="exponential"&&r.valueSpec.expression&&!zl(r.valueSpec)&&M.push(new ht(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(B&&!Ps(r.valueSpec)?M.push(new ht(r.key,r.value,"property functions not supported")):x&&!Lc(r.valueSpec)&&M.push(new ht(r.key,r.value,"zoom functions not supported"))),n!=="categorical"&&!S||r.value.property!==void 0||M.push(new ht(r.key,r.value,'"property" property is required')),M;function P(K){let re=[];const ae=K.value,me=K.key;if(Ui(ae)!=="array")return[new ht(me,ae,`array expected, ${Ui(ae)} found`)];if(ae.length!==2)return[new ht(me,ae,`array length 2 expected, length ${ae.length} found`)];if(S){if(Ui(ae[0])!=="object")return[new ht(me,ae,`object expected, ${Ui(ae[0])} found`)];if(ae[0].zoom===void 0)return[new ht(me,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new ht(me,ae,"object stop key must have value")];if(p&&p>Ir(ae[0].zoom))return[new ht(me,ae[0].zoom,"stop zoom values must appear in ascending order")];Ir(ae[0].zoom)!==p&&(p=Ir(ae[0].zoom),A=void 0,m={}),re=re.concat(Jr({key:`${me}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:cs,value:U}}))}else re=re.concat(U({key:`${me}[0]`,value:ae[0],valueSpec:{},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},ae));return io(xa(ae[1]))?re.concat([new ht(`${me}[1]`,ae[1],"expressions are not allowed in function stops.")]):re.concat(K.validateSpec({key:`${me}[1]`,value:ae[1],valueSpec:t,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function U(K,re){const ae=Ui(K.value),me=Ir(K.value),we=K.value!==null?K.value:re;if(o){if(ae!==o)return[new ht(K.key,we,`${ae} stop domain type must match previous stop domain type ${o}`)]}else o=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new ht(K.key,we,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&n!=="categorical"){let Ye=`number expected, ${ae} found`;return Ps(t)&&n===void 0&&(Ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ht(K.key,we,Ye)]}return n!=="categorical"||ae!=="number"||isFinite(me)&&Math.floor(me)===me?n!=="categorical"&&ae==="number"&&A!==void 0&&me<A?[new ht(K.key,we,"stop domain values must appear in ascending order")]:(A=me,n==="categorical"&&me in m?[new ht(K.key,we,"stop domain values must be unique")]:(m[me]=!0,[])):[new ht(K.key,we,`integer expected, found ${me}`)]}}function us(r){const t=(r.expressionContext==="property"?no:No)(xa(r.value),r.valueSpec);if(t.result==="error")return t.value.map(o=>new ht(`${r.key}${o.key}`,r.value,o.message));const n=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!n.outputDefined())return[new ht(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ts(n))return[new ht(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ts(n))return[new ht(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Lo(n,["zoom","feature-state"]))return[new ht(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!va(n))return[new ht(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ho(r){const t=r.key,n=r.value,o=r.valueSpec,A=[];return Array.isArray(o.values)?o.values.indexOf(Ir(n))===-1&&A.push(new ht(t,n,`expected one of [${o.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(o.values).indexOf(Ir(n))===-1&&A.push(new ht(t,n,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(n)} found`)),A}function Rs(r){return Oo(xa(r.value))?us(fr({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tu(r)}function Tu(r){const t=r.value,n=r.key;if(Ui(t)!=="array")return[new ht(n,t,`array expected, ${Ui(t)} found`)];const o=r.styleSpec;let A,p=[];if(t.length<1)return[new ht(n,t,"filter array must have at least 1 element")];switch(p=p.concat(Ho({key:`${n}[0]`,value:t[0],valueSpec:o.filter_operator,style:r.style,styleSpec:r.styleSpec})),Ir(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Ir(t[1])==="$type"&&p.push(new ht(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&p.push(new ht(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(A=Ui(t[1]),A!=="string"&&p.push(new ht(`${n}[1]`,t[1],`string expected, ${A} found`)));for(let m=2;m<t.length;m++)A=Ui(t[m]),Ir(t[1])==="$type"?p=p.concat(Ho({key:`${n}[${m}]`,value:t[m],valueSpec:o.geometry_type,style:r.style,styleSpec:r.styleSpec})):A!=="string"&&A!=="number"&&A!=="boolean"&&p.push(new ht(`${n}[${m}]`,t[m],`string, number, or boolean expected, ${A} found`));break;case"any":case"all":case"none":for(let m=1;m<t.length;m++)p=p.concat(Tu({key:`${n}[${m}]`,value:t[m],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":A=Ui(t[1]),t.length!==2?p.push(new ht(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):A!=="string"&&p.push(new ht(`${n}[1]`,t[1],`string expected, ${A} found`))}return p}function za(r,t){const n=r.key,o=r.validateSpec,A=r.style,p=r.styleSpec,m=r.value,x=r.objectKey,B=p[`${t}_${r.layerType}`];if(!B)return[];const S=x.match(/^(.*)-transition$/);if(t==="paint"&&S&&B[S[1]]&&B[S[1]].transition)return o({key:n,value:m,valueSpec:p.transition,style:A,styleSpec:p});const M=r.valueSpec||B[x];if(!M)return[new ht(n,m,`unknown property "${x}"`)];let P;if(Ui(m)==="string"&&Ps(M)&&!M.tokens&&(P=/^{([^}]+)}$/.exec(m)))return[new ht(n,m,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const U=[];return r.layerType==="symbol"&&(x==="text-field"&&A&&!A.glyphs&&U.push(new ht(n,m,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Fo(xa(m))&&Ir(m.type)==="identity"&&U.push(new ht(n,m,'"text-font" does not support identity functions'))),U.concat(o({key:r.key,value:m,valueSpec:M,style:A,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:x}))}function Gc(r){return za(r,"paint")}function Gl(r){return za(r,"layout")}function Nc(r){let t=[];const n=r.value,o=r.key,A=r.style,p=r.styleSpec;n.type||n.ref||t.push(new ht(o,n,'either "type" or "ref" is required'));let m=Ir(n.type);const x=Ir(n.ref);if(n.id){const B=Ir(n.id);for(let S=0;S<r.arrayIndex;S++){const M=A.layers[S];Ir(M.id)===B&&t.push(new ht(o,n.id,`duplicate layer id "${n.id}", previously used at line ${M.id.__line__}`))}}if("ref"in n){let B;["type","source","source-layer","filter","layout"].forEach(S=>{S in n&&t.push(new ht(o,n[S],`"${S}" is prohibited for ref layers`))}),A.layers.forEach(S=>{Ir(S.id)===x&&(B=S)}),B?B.ref?t.push(new ht(o,n.ref,"ref cannot reference another ref layer")):m=Ir(B.type):t.push(new ht(o,n.ref,`ref layer "${x}" not found`))}else if(m!=="background")if(n.source){const B=A.sources&&A.sources[n.source],S=B&&Ir(B.type);B?S==="vector"&&m==="raster"?t.push(new ht(o,n.source,`layer "${n.id}" requires a raster source`)):S!=="raster-dem"&&m==="hillshade"?t.push(new ht(o,n.source,`layer "${n.id}" requires a raster-dem source`)):S==="raster"&&m!=="raster"?t.push(new ht(o,n.source,`layer "${n.id}" requires a vector source`)):S!=="vector"||n["source-layer"]?S==="raster-dem"&&m!=="hillshade"?t.push(new ht(o,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!n.paint||!n.paint["line-gradient"]||S==="geojson"&&B.lineMetrics||t.push(new ht(o,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ht(o,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new ht(o,n.source,`source "${n.source}" not found`))}else t.push(new ht(o,n,'missing required property "source"'));return t=t.concat(Jr({key:o,value:n,valueSpec:p.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${o}.type`,value:n.type,valueSpec:p.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:n,objectKey:"type"}),filter:Rs,layout:B=>Jr({layer:n,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":S=>Gl(fr({layerType:m},S))}}),paint:B=>Jr({layer:n,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":S=>Gc(fr({layerType:m},S))}})}})),t}function hs(r){const t=r.value,n=r.key,o=Ui(t);return o!=="string"?[new ht(n,t,`string expected, ${o} found`)]:[]}const Pu={promoteId:function({key:r,value:t}){if(Ui(t)==="string")return hs({key:r,value:t});{const n=[];for(const o in t)n.push(...hs({key:`${r}.${o}`,value:t[o]}));return n}}};function Nl(r){const t=r.value,n=r.key,o=r.styleSpec,A=r.style,p=r.validateSpec;if(!t.type)return[new ht(n,t,'"type" is required')];const m=Ir(t.type);let x;switch(m){case"vector":case"raster":return x=Jr({key:n,value:t,valueSpec:o[`source_${m.replace("-","_")}`],style:r.style,styleSpec:o,objectElementValidators:Pu,validateSpec:p}),x;case"raster-dem":return x=function(B){var S;const M=(S=B.sourceName)!==null&&S!==void 0?S:"",P=B.value,U=B.styleSpec,K=U.source_raster_dem,re=B.style;let ae=[];const me=Ui(P);if(P===void 0)return ae;if(me!=="object")return ae.push(new ht("source_raster_dem",P,`object expected, ${me} found`)),ae;const we=Ir(P.encoding)==="custom",Ye=["redFactor","greenFactor","blueFactor","baseShift"],Le=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const qe in P)!we&&Ye.includes(qe)?ae.push(new ht(qe,P[qe],`In "${M}": "${qe}" is only valid when "encoding" is set to "custom". ${Le} encoding found`)):K[qe]?ae=ae.concat(B.validateSpec({key:qe,value:P[qe],valueSpec:K[qe],validateSpec:B.validateSpec,style:re,styleSpec:U})):ae.push(new ht(qe,P[qe],`unknown property "${qe}"`));return ae}({sourceName:n,value:t,style:r.style,styleSpec:o,validateSpec:p}),x;case"geojson":if(x=Jr({key:n,value:t,valueSpec:o.source_geojson,style:A,styleSpec:o,validateSpec:p,objectElementValidators:Pu}),t.cluster)for(const B in t.clusterProperties){const[S,M]=t.clusterProperties[B],P=typeof S=="string"?[S,["accumulated"],["get",B]]:S;x.push(...us({key:`${n}.${B}.map`,value:M,validateSpec:p,expressionContext:"cluster-map"})),x.push(...us({key:`${n}.${B}.reduce`,value:P,validateSpec:p,expressionContext:"cluster-reduce"}))}return x;case"video":return Jr({key:n,value:t,valueSpec:o.source_video,style:A,validateSpec:p,styleSpec:o});case"image":return Jr({key:n,value:t,valueSpec:o.source_image,style:A,validateSpec:p,styleSpec:o});case"canvas":return[new ht(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ho({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:A,validateSpec:p,styleSpec:o})}}function jo(r){const t=r.value,n=r.styleSpec,o=n.light,A=r.style;let p=[];const m=Ui(t);if(t===void 0)return p;if(m!=="object")return p=p.concat([new ht("light",t,`object expected, ${m} found`)]),p;for(const x in t){const B=x.match(/^(.*)-transition$/);p=p.concat(B&&o[B[1]]&&o[B[1]].transition?r.validateSpec({key:x,value:t[x],valueSpec:n.transition,validateSpec:r.validateSpec,style:A,styleSpec:n}):o[x]?r.validateSpec({key:x,value:t[x],valueSpec:o[x],validateSpec:r.validateSpec,style:A,styleSpec:n}):[new ht(x,t[x],`unknown property "${x}"`)])}return p}function Jo(r){const t=r.value,n=r.styleSpec,o=n.sky,A=r.style,p=Ui(t);if(t===void 0)return[];if(p!=="object")return[new ht("sky",t,`object expected, ${p} found`)];let m=[];for(const x in t)m=m.concat(o[x]?r.validateSpec({key:x,value:t[x],valueSpec:o[x],style:A,styleSpec:n}):[new ht(x,t[x],`unknown property "${x}"`)]);return m}function Uc(r){const t=r.value,n=r.styleSpec,o=n.terrain,A=r.style;let p=[];const m=Ui(t);if(t===void 0)return p;if(m!=="object")return p=p.concat([new ht("terrain",t,`object expected, ${m} found`)]),p;for(const x in t)p=p.concat(o[x]?r.validateSpec({key:x,value:t[x],valueSpec:o[x],validateSpec:r.validateSpec,style:A,styleSpec:n}):[new ht(x,t[x],`unknown property "${x}"`)]);return p}function On(r){let t=[];const n=r.value,o=r.key;if(Array.isArray(n)){const A=[],p=[];for(const m in n)n[m].id&&A.includes(n[m].id)&&t.push(new ht(o,n,`all the sprites' ids must be unique, but ${n[m].id} is duplicated`)),A.push(n[m].id),n[m].url&&p.includes(n[m].url)&&t.push(new ht(o,n,`all the sprites' URLs must be unique, but ${n[m].url} is duplicated`)),p.push(n[m].url),t=t.concat(Jr({key:`${o}[${m}]`,value:n[m],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return t}return hs({key:o,value:n})}const Yo={"*":()=>[],array:Fa,boolean:function(r){const t=r.value,n=r.key,o=Ui(t);return o!=="boolean"?[new ht(n,t,`boolean expected, ${o} found`)]:[]},number:cs,color:function(r){const t=r.key,n=r.value,o=Ui(n);return o!=="string"?[new ht(t,n,`color expected, ${o} found`)]:Xi.parse(String(n))?[]:[new ht(t,n,`color expected, "${n}" found`)]},constants:lo,enum:Ho,filter:Rs,function:zc,layer:Nc,object:Jr,source:Nl,light:jo,sky:Jo,terrain:Uc,projection:function(r){const t=r.value,n=r.styleSpec,o=n.projection,A=r.style,p=Ui(t);if(t===void 0)return[];if(p!=="object")return[new ht("projection",t,`object expected, ${p} found`)];let m=[];for(const x in t)m=m.concat(o[x]?r.validateSpec({key:x,value:t[x],valueSpec:o[x],style:A,styleSpec:n}):[new ht(x,t[x],`unknown property "${x}"`)]);return m},string:hs,formatted:function(r){return hs(r).length===0?[]:us(r)},resolvedImage:function(r){return hs(r).length===0?[]:us(r)},padding:function(r){const t=r.key,n=r.value;if(Ui(n)==="array"){if(n.length<1||n.length>4)return[new ht(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const o={type:"number"};let A=[];for(let p=0;p<n.length;p++)A=A.concat(r.validateSpec({key:`${t}[${p}]`,value:n[p],validateSpec:r.validateSpec,valueSpec:o}));return A}return cs({key:t,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(r){const t=r.key,n=r.value,o=Ui(n),A=r.styleSpec;if(o!=="array"||n.length<1||n.length%2!=0)return[new ht(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let p=[];for(let m=0;m<n.length;m+=2)p=p.concat(Ho({key:`${t}[${m}]`,value:n[m],valueSpec:A.layout_symbol["text-anchor"]})),p=p.concat(Fa({key:`${t}[${m+1}]`,value:n[m+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:A}));return p},sprite:On};function Ga(r){const t=r.value,n=r.valueSpec,o=r.styleSpec;return r.validateSpec=Ga,n.expression&&Fo(Ir(t))?zc(r):n.expression&&io(xa(t))?us(r):n.type&&Yo[n.type]?Yo[n.type](r):Jr(fr({},r,{valueSpec:n.type?o[n.type]:n}))}function Oc(r){const t=r.value,n=r.key,o=hs(r);return o.length||(t.indexOf("{fontstack}")===-1&&o.push(new ht(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&o.push(new ht(n,t,'"glyphs" url must include a "{range}" token'))),o}function Vn(r,t=ve){let n=[];return n=n.concat(Ga({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,validateSpec:Ga,objectElementValidators:{glyphs:Oc,"*":()=>[]}})),r.constants&&(n=n.concat(lo({key:"constants",value:r.constants,style:r,styleSpec:t,validateSpec:Ga}))),co(n)}function qn(r){return function(t){return r({...t,validateSpec:Ga})}}function co(r){return[].concat(r).sort((t,n)=>t.line-n.line)}function Rn(r){return function(...t){return co(r.apply(this,t))}}Vn.source=Rn(qn(Nl)),Vn.sprite=Rn(qn(On)),Vn.glyphs=Rn(qn(Oc)),Vn.light=Rn(qn(jo)),Vn.sky=Rn(qn(Jo)),Vn.terrain=Rn(qn(Uc)),Vn.layer=Rn(qn(Nc)),Vn.filter=Rn(qn(Rs)),Vn.paintProperty=Rn(qn(Gc)),Vn.layoutProperty=Rn(qn(Gl));const Ls=Vn,Ko=Ls.light,Bh=Ls.sky,Ul=Ls.paintProperty,Ru=Ls.layoutProperty;function Vc(r,t){let n=!1;if(t&&t.length)for(const o of t)r.fire(new tt(new Error(o.message))),n=!0;return n}class uo{constructor(t,n,o){const A=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const m=new Int32Array(this.arrayBuffer);t=m[0],this.d=(n=m[1])+2*(o=m[2]);for(let B=0;B<this.d*this.d;B++){const S=m[3+B],M=m[3+B+1];A.push(S===M?null:m.subarray(S,M))}const x=m[3+A.length+1];this.keys=m.subarray(m[3+A.length],x),this.bboxes=m.subarray(x),this.insert=this._insertReadonly}else{this.d=n+2*o;for(let m=0;m<this.d*this.d;m++)A.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=t,this.padding=o,this.scale=n/t,this.uid=0;const p=o/n*t;this.min=-p,this.max=t+p}insert(t,n,o,A,p){this._forEachCell(n,o,A,p,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(A),this.bboxes.push(p)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,n,o,A,p,m){this.cells[p].push(m)}query(t,n,o,A,p){const m=this.min,x=this.max;if(t<=m&&n<=m&&x<=o&&x<=A&&!p)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(t,n,o,A,this._queryCell,B,{},p),B}}_queryCell(t,n,o,A,p,m,x,B){const S=this.cells[p];if(S!==null){const M=this.keys,P=this.bboxes;for(let U=0;U<S.length;U++){const K=S[U];if(x[K]===void 0){const re=4*K;(B?B(P[re+0],P[re+1],P[re+2],P[re+3]):t<=P[re+2]&&n<=P[re+3]&&o>=P[re+0]&&A>=P[re+1])?(x[K]=!0,m.push(M[K])):x[K]=!1}}}}_forEachCell(t,n,o,A,p,m,x,B){const S=this._convertToCellCoord(t),M=this._convertToCellCoord(n),P=this._convertToCellCoord(o),U=this._convertToCellCoord(A);for(let K=S;K<=P;K++)for(let re=M;re<=U;re++){const ae=this.d*re+K;if((!B||B(this._convertFromCellCoord(K),this._convertFromCellCoord(re),this._convertFromCellCoord(K+1),this._convertFromCellCoord(re+1)))&&p.call(this,t,n,o,A,ae,m,x,B))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,n=3+this.cells.length+1+1;let o=0;for(let m=0;m<this.cells.length;m++)o+=this.cells[m].length;const A=new Int32Array(n+o+this.keys.length+this.bboxes.length);A[0]=this.extent,A[1]=this.n,A[2]=this.padding;let p=n;for(let m=0;m<t.length;m++){const x=t[m];A[3+m]=p,A.set(x,p),p+=x.length}return A[3+t.length]=p,A.set(this.keys,p),p+=this.keys.length,A[3+t.length+1]=p,A.set(this.bboxes,p),p+=this.bboxes.length,A.buffer}static serialize(t,n){const o=t.toArrayBuffer();return n&&n.push(o),{buffer:o}}static deserialize(t){return new uo(t.buffer)}}const wa={};function Nt(r,t,n={}){if(wa[r])throw new Error(`${r} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),wa[r]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}Nt("Object",Object),Nt("TransferableGridIndex",uo),Nt("Color",Xi),Nt("Error",Error),Nt("AJAXError",dr),Nt("ResolvedImage",In),Nt("StylePropertyFunction",Pn),Nt("StyleExpression",Go,{omit:["_evaluator"]}),Nt("ZoomDependentExpression",ro),Nt("ZoomConstantExpression",Uo),Nt("CompoundExpression",nn,{omit:["_evaluate"]});for(const r in Ds)Ds[r]._classRegistryKey||Nt(`Expression_${r}`,Ds[r]);function qc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function $o(r){return r.$name||r.constructor._classRegistryKey}function Zo(r){return!function(t){if(t===null||typeof t!="object")return!1;const n=$o(t);return!(!n||n==="Object")}(r)&&(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||qc(r)||bi(r)||ArrayBuffer.isView(r)||r instanceof ImageData)}function na(r,t){if(Zo(r))return(qc(r)||bi(r))&&t&&t.push(r),ArrayBuffer.isView(r)&&t&&t.push(r.buffer),r instanceof ImageData&&t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const p=[];for(const m of r)p.push(na(m,t));return p}if(typeof r!="object")throw new Error("can't serialize object of type "+typeof r);const n=$o(r);if(!n)throw new Error(`can't serialize object of unregistered class ${r.constructor.name}`);if(!wa[n])throw new Error(`${n} is not registered.`);const{klass:o}=wa[n],A=o.serialize?o.serialize(r,t):{};if(o.serialize){if(t&&A===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const p in r){if(!r.hasOwnProperty(p)||wa[n].omit.indexOf(p)>=0)continue;const m=r[p];A[p]=wa[n].shallow.indexOf(p)>=0?m:na(m,t)}r instanceof Error&&(A.message=r.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(A.$name=n),A}function ho(r){if(Zo(r))return r;if(Array.isArray(r))return r.map(ho);if(typeof r!="object")throw new Error("can't deserialize object of type "+typeof r);const t=$o(r)||"Object";if(!wa[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=wa[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(r);const o=Object.create(n.prototype);for(const A of Object.keys(r)){if(A==="$name")continue;const p=r[A];o[A]=wa[t].shallow.indexOf(A)>=0?p:ho(p)}return o}class Hc{constructor(){this.first=!0}update(t,n){const o=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=o,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=o,!0):(this.lastFloorZoom>o?(this.lastIntegerZoom=o+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<o&&(this.lastIntegerZoom=o,this.lastIntegerZoomTime=n),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=o,!0))}}const _i={"Latin-1 Supplement":r=>r>=128&&r<=255,"Hangul Jamo":r=>r>=4352&&r<=4607,Khmer:r=>r>=6016&&r<=6143,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Katakana:r=>r>=12448&&r<=12543,Kanbun:r=>r>=12688&&r<=12703,"CJK Strokes":r=>r>=12736&&r<=12783,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"Private Use Area":r=>r>=57344&&r<=63743,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Ol(r){for(const t of r)if(aa(t.charCodeAt(0)))return!0;return!1}function Lu(r){for(const t of r)if(!Vl(t.charCodeAt(0)))return!1;return!0}function jc(r){const t=r.map(n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}}).filter(n=>n);return new RegExp(t.join("|"),"u")}const Fu=jc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vl(r){return!Fu.test(String.fromCodePoint(r))}const Ca=jc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function aa(r){return!(r!==746&&r!==747&&(r<4352||!(_i["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||_i["CJK Compatibility"](r)||_i["CJK Strokes"](r)||!(!_i["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||_i["Enclosed CJK Letters and Months"](r)||_i["Ideographic Description Characters"](r)||_i.Kanbun(r)||_i.Katakana(r)&&r!==12540||!(!_i["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!_i["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||_i["Vertical Forms"](r)||_i["Yijing Hexagram Symbols"](r)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(r))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(r))||Ca.test(String.fromCodePoint(r)))))}function ql(r){return!(aa(r)||function(t){return!!(_i["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||_i["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||_i["Letterlike Symbols"](t)||_i["Number Forms"](t)||_i["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||_i["Control Pictures"](t)&&t!==9251||_i["Optical Character Recognition"](t)||_i["Enclosed Alphanumerics"](t)||_i["Geometric Shapes"](t)||_i["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||_i["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||_i["CJK Symbols and Punctuation"](t)||_i.Katakana(t)||_i["Private Use Area"](t)||_i["CJK Compatibility Forms"](t)||_i["Small Form Variants"](t)||_i["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(r))}const Jc=jc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Wo(r){return Jc.test(String.fromCodePoint(r))}function Xo(r,t){return!(!t&&Wo(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||_i.Khmer(r))}function Yc(r){for(const t of r)if(Wo(t.charCodeAt(0)))return!0;return!1}const tr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ki{constructor(t,n){this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hc,this.transition={})}isSupportedScript(t){return function(n,o){for(const A of n)if(!Xo(A.charCodeAt(0),o))return!1;return!0}(t,tr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,n=t-Math.floor(t),o=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*o}:{fromScale:.5,toScale:1,t:1-(1-o)*n}}}class el{constructor(t,n){this.property=t,this.value=n,this.expression=function(o,A){if(Fo(o))return new Pn(o,A);if(io(o)){const p=no(o,A);if(p.result==="error")throw new Error(p.value.map(m=>`${m.key}: ${m.message}`).join(", "));return p.value}{let p=o;return A.type==="color"&&typeof o=="string"?p=Xi.parse(o):A.type!=="padding"||typeof o!="number"&&!Array.isArray(o)?A.type==="variableAnchorOffsetCollection"&&Array.isArray(o)&&(p=_n.parse(o)):p=yn.parse(o),{kind:"constant",evaluate:()=>p}}}(n===void 0?t.specification.default:n,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,n,o){return this.property.possiblyEvaluate(this,t,n,o)}}class sa{constructor(t){this.property=t,this.value=new el(t,void 0)}transitioned(t,n){return new tl(this.property,this.value,n,zt({},t.transition,this.transition),t.now)}untransitioned(){return new tl(this.property,this.value,null,{},0)}}class Hl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return mt(this._values[t].value.value)}setValue(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new sa(this._values[t].property)),this._values[t].value=new el(this._values[t].property,n===null?void 0:mt(n))}getTransition(t){return mt(this._values[t].transition)}setTransition(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new sa(this._values[t].property)),this._values[t].transition=mt(n)||void 0}serialize(){const t={};for(const n of Object.keys(this._values)){const o=this.getValue(n);o!==void 0&&(t[n]=o);const A=this.getTransition(n);A!==void 0&&(t[`${n}-transition`]=A)}return t}transitioned(t,n){const o=new Kc(this._properties);for(const A of Object.keys(this._values))o._values[A]=this._values[A].transitioned(t,n._values[A]);return o}untransitioned(){const t=new Kc(this._properties);for(const n of Object.keys(this._values))t._values[n]=this._values[n].untransitioned();return t}}class tl{constructor(t,n,o,A,p){this.property=t,this.value=n,this.begin=p+A.delay||0,this.end=this.begin+A.duration||0,t.specification.transition&&(A.delay||A.duration)&&(this.prior=o)}possiblyEvaluate(t,n,o){const A=t.now||0,p=this.value.possiblyEvaluate(t,n,o),m=this.prior;if(m){if(A>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(A<this.begin)return m.possiblyEvaluate(t,n,o);{const x=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(t,n,o),p,function(B){if(B<=0)return 0;if(B>=1)return 1;const S=B*B,M=S*B;return 4*(B<.5?M:3*(B-S)+M-.75)}(x))}}return p}}class Kc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,n,o){const A=new Ao(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].possiblyEvaluate(t,n,o);return A}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class il{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return mt(this._values[t].value)}setValue(t,n){this._values[t]=new el(this._values[t].property,n===null?void 0:mt(n))}serialize(){const t={};for(const n of Object.keys(this._values)){const o=this.getValue(n);o!==void 0&&(t[n]=o)}return t}possiblyEvaluate(t,n,o){const A=new Ao(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].possiblyEvaluate(t,n,o);return A}}class on{constructor(t,n,o){this.property=t,this.value=n,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,n,o,A){return this.property.evaluate(this.value,this.parameters,t,n,o,A)}}class Ao{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ii{constructor(t){this.specification=t}possiblyEvaluate(t,n){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(n)}interpolate(t,n,o){const A=zr[this.specification.type];return A?A(t,n,o):t}}class Ai{constructor(t,n){this.specification=t,this.overrides=n}possiblyEvaluate(t,n,o,A){return new on(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(n,null,{},o,A)}:t.expression,n)}interpolate(t,n,o){if(t.value.kind!=="constant"||n.value.kind!=="constant")return t;if(t.value.value===void 0||n.value.value===void 0)return new on(this,{kind:"constant",value:void 0},t.parameters);const A=zr[this.specification.type];if(A){const p=A(t.value.value,n.value.value,o);return new on(this,{kind:"constant",value:p},t.parameters)}return t}evaluate(t,n,o,A,p,m){return t.kind==="constant"?t.value:t.evaluate(n,o,A,p,m)}}class rl extends Ai{possiblyEvaluate(t,n,o,A){if(t.value===void 0)return new on(this,{kind:"constant",value:void 0},n);if(t.expression.kind==="constant"){const p=t.expression.evaluate(n,null,{},o,A),m=t.property.specification.type==="resolvedImage"&&typeof p!="string"?p.name:p,x=this._calculate(m,m,m,n);return new on(this,{kind:"constant",value:x},n)}if(t.expression.kind==="camera"){const p=this._calculate(t.expression.evaluate({zoom:n.zoom-1}),t.expression.evaluate({zoom:n.zoom}),t.expression.evaluate({zoom:n.zoom+1}),n);return new on(this,{kind:"constant",value:p},n)}return new on(this,t.expression,n)}evaluate(t,n,o,A,p,m){if(t.kind==="source"){const x=t.evaluate(n,o,A,p,m);return this._calculate(x,x,x,n)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(n.zoom)-1},o,A),t.evaluate({zoom:Math.floor(n.zoom)},o,A),t.evaluate({zoom:Math.floor(n.zoom)+1},o,A),n):t.value}_calculate(t,n,o,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:o,to:n}}interpolate(t){return t}}class $c{constructor(t){this.specification=t}possiblyEvaluate(t,n,o,A){if(t.value!==void 0){if(t.expression.kind==="constant"){const p=t.expression.evaluate(n,null,{},o,A);return this._calculate(p,p,p,n)}return this._calculate(t.expression.evaluate(new Ki(Math.floor(n.zoom-1),n)),t.expression.evaluate(new Ki(Math.floor(n.zoom),n)),t.expression.evaluate(new Ki(Math.floor(n.zoom+1),n)),n)}}_calculate(t,n,o,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:o,to:n}}interpolate(t){return t}}class Hn{constructor(t){this.specification=t}possiblyEvaluate(t,n,o,A){return!!t.expression.evaluate(n,null,{},o,A)}interpolate(){return!1}}class bn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in t){const o=t[n];o.specification.overridable&&this.overridableProperties.push(n);const A=this.defaultPropertyValues[n]=new el(o,void 0),p=this.defaultTransitionablePropertyValues[n]=new sa(o);this.defaultTransitioningPropertyValues[n]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=A.possiblyEvaluate({})}}}Nt("DataDrivenProperty",Ai),Nt("DataConstantProperty",ii),Nt("CrossFadedDataDrivenProperty",rl),Nt("CrossFadedProperty",$c),Nt("ColorRampProperty",Hn);const g="-transition";class e extends It{constructor(t,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new il(n.layout)),n.paint)){this._transitionablePaint=new Hl(n.paint);for(const o in t.paint)this.setPaintProperty(o,t.paint[o],{validate:!1});for(const o in t.layout)this.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ao(n.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,n,o={}){n!=null&&this._validate(Ru,`layers.${this.id}.layout.${t}`,t,n,o)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,n):this.visibility=n)}getPaintProperty(t){return t.endsWith(g)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,n,o={}){if(n!=null&&this._validate(Ul,`layers.${this.id}.paint.${t}`,t,n,o))return!1;if(t.endsWith(g))return this._transitionablePaint.setTransition(t.slice(0,-11),n||void 0),!1;{const A=this._transitionablePaint._values[t],p=A.property.specification["property-type"]==="cross-faded-data-driven",m=A.value.isDataDriven(),x=A.value;this._transitionablePaint.setValue(t,n),this._handleSpecialPaintPropertyUpdate(t);const B=this._transitionablePaint._values[t].value;return B.isDataDriven()||m||p||this._handleOverridablePaintPropertyUpdate(t,x,B)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,n,o){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,n){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,n)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Gt(t,(n,o)=>!(n===void 0||o==="layout"&&!Object.keys(n).length||o==="paint"&&!Object.keys(n).length))}_validate(t,n,o,A,p={}){return(!p||p.validate!==!1)&&Vc(this,t.call(Ls,{key:n,layerType:this.type,objectKey:o,value:A,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const n=this.paint.get(t);if(n instanceof on&&Ps(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}const a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class c{constructor(t,n){this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class h{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,n){return t._trim(),n&&(t.isTransferred=!0,n.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const n=Object.create(this.prototype);return n.arrayBuffer=t.arrayBuffer,n.length=t.length,n.capacity=t.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function f(r,t=1){let n=0,o=0;return{members:r.map(A=>{const p=a[A.type].BYTES_PER_ELEMENT,m=n=w(n,Math.max(t,p)),x=A.components||1;return o=Math.max(o,p),n+=p*x,{name:A.name,type:A.type,components:x,offset:m}}),size:w(n,Math.max(o,t)),alignment:t}}function w(r,t){return Math.ceil(r/t)*t}class E extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n){const o=this.length;return this.resize(o+1),this.emplace(o,t,n)}emplace(t,n,o){const A=2*t;return this.int16[A+0]=n,this.int16[A+1]=o,t}}E.prototype.bytesPerElement=4,Nt("StructArrayLayout2i4",E);class Q extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,n,o)}emplace(t,n,o,A){const p=3*t;return this.int16[p+0]=n,this.int16[p+1]=o,this.int16[p+2]=A,t}}Q.prototype.bytesPerElement=6,Nt("StructArrayLayout3i6",Q);class k extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,o,A)}emplace(t,n,o,A,p){const m=4*t;return this.int16[m+0]=n,this.int16[m+1]=o,this.int16[m+2]=A,this.int16[m+3]=p,t}}k.prototype.bytesPerElement=8,Nt("StructArrayLayout4i8",k);class R extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,n,o,A,p,m)}emplace(t,n,o,A,p,m,x){const B=6*t;return this.int16[B+0]=n,this.int16[B+1]=o,this.int16[B+2]=A,this.int16[B+3]=p,this.int16[B+4]=m,this.int16[B+5]=x,t}}R.prototype.bytesPerElement=12,Nt("StructArrayLayout2i4i12",R);class z extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,n,o,A,p,m)}emplace(t,n,o,A,p,m,x){const B=4*t,S=8*t;return this.int16[B+0]=n,this.int16[B+1]=o,this.uint8[S+4]=A,this.uint8[S+5]=p,this.uint8[S+6]=m,this.uint8[S+7]=x,t}}z.prototype.bytesPerElement=8,Nt("StructArrayLayout2i4ub8",z);class ee extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n){const o=this.length;return this.resize(o+1),this.emplace(o,t,n)}emplace(t,n,o){const A=2*t;return this.float32[A+0]=n,this.float32[A+1]=o,t}}ee.prototype.bytesPerElement=8,Nt("StructArrayLayout2f8",ee);class oe extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m,x,B,S,M){const P=this.length;return this.resize(P+1),this.emplace(P,t,n,o,A,p,m,x,B,S,M)}emplace(t,n,o,A,p,m,x,B,S,M,P){const U=10*t;return this.uint16[U+0]=n,this.uint16[U+1]=o,this.uint16[U+2]=A,this.uint16[U+3]=p,this.uint16[U+4]=m,this.uint16[U+5]=x,this.uint16[U+6]=B,this.uint16[U+7]=S,this.uint16[U+8]=M,this.uint16[U+9]=P,t}}oe.prototype.bytesPerElement=20,Nt("StructArrayLayout10ui20",oe);class ce extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m,x,B,S,M,P,U){const K=this.length;return this.resize(K+1),this.emplace(K,t,n,o,A,p,m,x,B,S,M,P,U)}emplace(t,n,o,A,p,m,x,B,S,M,P,U,K){const re=12*t;return this.int16[re+0]=n,this.int16[re+1]=o,this.int16[re+2]=A,this.int16[re+3]=p,this.uint16[re+4]=m,this.uint16[re+5]=x,this.uint16[re+6]=B,this.uint16[re+7]=S,this.int16[re+8]=M,this.int16[re+9]=P,this.int16[re+10]=U,this.int16[re+11]=K,t}}ce.prototype.bytesPerElement=24,Nt("StructArrayLayout4i4ui4i24",ce);class ye extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,n,o)}emplace(t,n,o,A){const p=3*t;return this.float32[p+0]=n,this.float32[p+1]=o,this.float32[p+2]=A,t}}ye.prototype.bytesPerElement=12,Nt("StructArrayLayout3f12",ye);class be extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint32[1*t+0]=n,t}}be.prototype.bytesPerElement=4,Nt("StructArrayLayout1ul4",be);class Ce extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m,x,B,S){const M=this.length;return this.resize(M+1),this.emplace(M,t,n,o,A,p,m,x,B,S)}emplace(t,n,o,A,p,m,x,B,S,M){const P=10*t,U=5*t;return this.int16[P+0]=n,this.int16[P+1]=o,this.int16[P+2]=A,this.int16[P+3]=p,this.int16[P+4]=m,this.int16[P+5]=x,this.uint32[U+3]=B,this.uint16[P+8]=S,this.uint16[P+9]=M,t}}Ce.prototype.bytesPerElement=20,Nt("StructArrayLayout6i1ul2ui20",Ce);class ke extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,n,o,A,p,m)}emplace(t,n,o,A,p,m,x){const B=6*t;return this.int16[B+0]=n,this.int16[B+1]=o,this.int16[B+2]=A,this.int16[B+3]=p,this.int16[B+4]=m,this.int16[B+5]=x,t}}ke.prototype.bytesPerElement=12,Nt("StructArrayLayout2i2i2i12",ke);class fe extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p){const m=this.length;return this.resize(m+1),this.emplace(m,t,n,o,A,p)}emplace(t,n,o,A,p,m){const x=4*t,B=8*t;return this.float32[x+0]=n,this.float32[x+1]=o,this.float32[x+2]=A,this.int16[B+6]=p,this.int16[B+7]=m,t}}fe.prototype.bytesPerElement=16,Nt("StructArrayLayout2f1f2i16",fe);class ze extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,n,o,A,p,m)}emplace(t,n,o,A,p,m,x){const B=16*t,S=4*t,M=8*t;return this.uint8[B+0]=n,this.uint8[B+1]=o,this.float32[S+1]=A,this.float32[S+2]=p,this.int16[M+6]=m,this.int16[M+7]=x,t}}ze.prototype.bytesPerElement=16,Nt("StructArrayLayout2ub2f2i16",ze);class Ue extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,n,o)}emplace(t,n,o,A){const p=3*t;return this.uint16[p+0]=n,this.uint16[p+1]=o,this.uint16[p+2]=A,t}}Ue.prototype.bytesPerElement=6,Nt("StructArrayLayout3ui6",Ue);class Je extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m,x,B,S,M,P,U,K,re,ae,me,we){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,t,n,o,A,p,m,x,B,S,M,P,U,K,re,ae,me,we)}emplace(t,n,o,A,p,m,x,B,S,M,P,U,K,re,ae,me,we,Ye){const Le=24*t,qe=12*t,et=48*t;return this.int16[Le+0]=n,this.int16[Le+1]=o,this.uint16[Le+2]=A,this.uint16[Le+3]=p,this.uint32[qe+2]=m,this.uint32[qe+3]=x,this.uint32[qe+4]=B,this.uint16[Le+10]=S,this.uint16[Le+11]=M,this.uint16[Le+12]=P,this.float32[qe+7]=U,this.float32[qe+8]=K,this.uint8[et+36]=re,this.uint8[et+37]=ae,this.uint8[et+38]=me,this.uint32[qe+10]=we,this.int16[Le+22]=Ye,t}}Je.prototype.bytesPerElement=48,Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Je);class ct extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,o,A,p,m,x,B,S,M,P,U,K,re,ae,me,we,Ye,Le,qe,et,xt,jt,pi,qt,Lt,oi,Wt){const Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,t,n,o,A,p,m,x,B,S,M,P,U,K,re,ae,me,we,Ye,Le,qe,et,xt,jt,pi,qt,Lt,oi,Wt)}emplace(t,n,o,A,p,m,x,B,S,M,P,U,K,re,ae,me,we,Ye,Le,qe,et,xt,jt,pi,qt,Lt,oi,Wt,Yt){const lt=32*t,ci=16*t;return this.int16[lt+0]=n,this.int16[lt+1]=o,this.int16[lt+2]=A,this.int16[lt+3]=p,this.int16[lt+4]=m,this.int16[lt+5]=x,this.int16[lt+6]=B,this.int16[lt+7]=S,this.uint16[lt+8]=M,this.uint16[lt+9]=P,this.uint16[lt+10]=U,this.uint16[lt+11]=K,this.uint16[lt+12]=re,this.uint16[lt+13]=ae,this.uint16[lt+14]=me,this.uint16[lt+15]=we,this.uint16[lt+16]=Ye,this.uint16[lt+17]=Le,this.uint16[lt+18]=qe,this.uint16[lt+19]=et,this.uint16[lt+20]=xt,this.uint16[lt+21]=jt,this.uint16[lt+22]=pi,this.uint32[ci+12]=qt,this.float32[ci+13]=Lt,this.float32[ci+14]=oi,this.uint16[lt+30]=Wt,this.uint16[lt+31]=Yt,t}}ct.prototype.bytesPerElement=64,Nt("StructArrayLayout8i15ui1ul2f2ui64",ct);class wt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.float32[1*t+0]=n,t}}wt.prototype.bytesPerElement=4,Nt("StructArrayLayout1f4",wt);class Rt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,n,o)}emplace(t,n,o,A){const p=3*t;return this.uint16[6*t+0]=n,this.float32[p+1]=o,this.float32[p+2]=A,t}}Rt.prototype.bytesPerElement=12,Nt("StructArrayLayout1ui2f12",Rt);class Ht extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,n,o)}emplace(t,n,o,A){const p=4*t;return this.uint32[2*t+0]=n,this.uint16[p+2]=o,this.uint16[p+3]=A,t}}Ht.prototype.bytesPerElement=8,Nt("StructArrayLayout1ul2ui8",Ht);class Pt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n){const o=this.length;return this.resize(o+1),this.emplace(o,t,n)}emplace(t,n,o){const A=2*t;return this.uint16[A+0]=n,this.uint16[A+1]=o,t}}Pt.prototype.bytesPerElement=4,Nt("StructArrayLayout2ui4",Pt);class Mt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint16[1*t+0]=n,t}}Mt.prototype.bytesPerElement=2,Nt("StructArrayLayout1ui2",Mt);class Xt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,o,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,n,o,A)}emplace(t,n,o,A,p){const m=4*t;return this.float32[m+0]=n,this.float32[m+1]=o,this.float32[m+2]=A,this.float32[m+3]=p,t}}Xt.prototype.bytesPerElement=16,Nt("StructArrayLayout4f16",Xt);class Ii extends c{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new H(this.anchorPointX,this.anchorPointY)}}Ii.prototype.size=20;class b extends Ce{get(t){return new Ii(this,t)}}Nt("CollisionBoxArray",b);class v extends c{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}v.prototype.size=48;class _ extends Je{get(t){return new v(this,t)}}Nt("PlacedSymbolArray",_);class D extends c{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}D.prototype.size=64;class T extends ct{get(t){return new D(this,t)}}Nt("SymbolInstanceArray",T);class F extends wt{getoffsetX(t){return this.float32[1*t+0]}}Nt("GlyphOffsetArray",F);class Z extends Q{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Nt("SymbolLineVertexArray",Z);class G extends c{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}G.prototype.size=12;class ne extends Rt{get(t){return new G(this,t)}}Nt("TextAnchorOffsetArray",ne);class $ extends c{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}$.prototype.size=8;class W extends Ht{get(t){return new $(this,t)}}Nt("FeatureIndexArray",W);class ge extends E{}class se extends E{}class X extends E{}class Ie extends R{}class xe extends z{}class Qe extends ee{}class Pe extends oe{}class Oe extends ce{}class Te extends ye{}class Ke extends be{}class te extends ke{}class N extends ze{}class he extends Ue{}class le extends Pt{}const ue=f([{name:"a_pos",components:2,type:"Int16"}],4),{members:de}=ue;class Me{constructor(t=[]){this.segments=t}prepareSegment(t,n,o,A){let p=this.segments[this.segments.length-1];return t>Me.MAX_VERTEX_ARRAY_LENGTH&&Et(`Max vertices per segment is ${Me.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!p||p.vertexLength+t>Me.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==A)&&(p={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},A!==void 0&&(p.sortKey=A),this.segments.push(p)),p}get(){return this.segments}destroy(){for(const t of this.segments)for(const n in t.vaos)t.vaos[n].destroy()}static simpleSegment(t,n,o,A){return new Me([{vertexOffset:t,primitiveOffset:n,vertexLength:o,primitiveLength:A,vaos:{},sortKey:0}])}}function De(r,t){return 256*(r=Ft(Math.floor(r),0,255))+Ft(Math.floor(t),0,255)}Me.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nt("SegmentVector",Me);const Fe=f([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var We={exports:{}},rt={exports:{}};rt.exports=function(r,t){var n,o,A,p,m,x,B,S;for(o=r.length-(n=3&r.length),A=t,m=3432918353,x=461845907,S=0;S<o;)B=255&r.charCodeAt(S)|(255&r.charCodeAt(++S))<<8|(255&r.charCodeAt(++S))<<16|(255&r.charCodeAt(++S))<<24,++S,A=27492+(65535&(p=5*(65535&(A=(A^=B=(65535&(B=(B=(65535&B)*m+(((B>>>16)*m&65535)<<16)&4294967295)<<15|B>>>17))*x+(((B>>>16)*x&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(p>>>16)&65535)<<16);switch(B=0,n){case 3:B^=(255&r.charCodeAt(S+2))<<16;case 2:B^=(255&r.charCodeAt(S+1))<<8;case 1:A^=B=(65535&(B=(B=(65535&(B^=255&r.charCodeAt(S)))*m+(((B>>>16)*m&65535)<<16)&4294967295)<<15|B>>>17))*x+(((B>>>16)*x&65535)<<16)&4294967295}return A^=r.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0};var at=rt.exports,yt={exports:{}};yt.exports=function(r,t){for(var n,o=r.length,A=t^o,p=0;o>=4;)n=1540483477*(65535&(n=255&r.charCodeAt(p)|(255&r.charCodeAt(++p))<<8|(255&r.charCodeAt(++p))<<16|(255&r.charCodeAt(++p))<<24))+((1540483477*(n>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),o-=4,++p;switch(o){case 3:A^=(255&r.charCodeAt(p+2))<<16;case 2:A^=(255&r.charCodeAt(p+1))<<8;case 1:A=1540483477*(65535&(A^=255&r.charCodeAt(p)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0};var Tt=at,it=yt.exports;We.exports=Tt,We.exports.murmur3=Tt,We.exports.murmur2=it;var $e=q(We.exports);class dt{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,n,o,A){this.ids.push($t(t)),this.positions.push(n,o,A)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=$t(t);let o=0,A=this.ids.length-1;for(;o<A;){const m=o+A>>1;this.ids[m]>=n?A=m:o=m+1}const p=[];for(;this.ids[o]===n;)p.push({index:this.positions[3*o],start:this.positions[3*o+1],end:this.positions[3*o+2]}),o++;return p}static serialize(t,n){const o=new Float64Array(t.ids),A=new Uint32Array(t.positions);return St(o,A,0,o.length-1),n&&n.push(o.buffer,A.buffer),{ids:o,positions:A}}static deserialize(t){const n=new dt;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}function $t(r){const t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:$e(String(r))}function St(r,t,n,o){for(;n<o;){const A=r[n+o>>1];let p=n-1,m=o+1;for(;;){do p++;while(r[p]<A);do m--;while(r[m]>A);if(p>=m)break;si(r,p,m),si(t,3*p,3*m),si(t,3*p+1,3*m+1),si(t,3*p+2,3*m+2)}m-n<o-m?(St(r,t,n,m),n=m+1):(St(r,t,m+1,o),o=m)}}function si(r,t,n){const o=r[t];r[t]=r[n],r[n]=o}Nt("FeaturePositionMap",dt);class Dt{constructor(t,n){this.gl=t.gl,this.location=n}}class ei extends Dt{constructor(t,n){super(t,n),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Kt extends Dt{constructor(t,n){super(t,n),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class ui extends Dt{constructor(t,n){super(t,n),this.current=Xi.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Jt=new Float32Array(16);function Ji(r){return[De(255*r.r,255*r.g),De(255*r.b,255*r.a)]}class Di{constructor(t,n,o){this.value=t,this.uniformNames=n.map(A=>`u_${A}`),this.type=o}setUniform(t,n,o){t.set(o.constantOr(this.value))}getBinding(t,n,o){return this.type==="color"?new ui(t,n):new ei(t,n)}}class zi{constructor(t,n){this.uniformNames=n.map(o=>`u_${o}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=t.tlbr}setUniform(t,n,o,A){const p=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&t.set(p)}getBinding(t,n,o){return o.substr(0,9)==="u_pattern"?new Kt(t,n):new ei(t,n)}}class ki{constructor(t,n,o,A){this.expression=t,this.type=o,this.maxValue=0,this.paintVertexAttributes=n.map(p=>({name:`a_${p}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new A}populatePaintArray(t,n,o,A,p){const m=this.paintVertexArray.length,x=this.expression.evaluate(new Ki(0),n,{},A,[],p);this.paintVertexArray.resize(t),this._setPaintValue(m,t,x)}updatePaintArray(t,n,o,A){const p=this.expression.evaluate({zoom:0},o,A);this._setPaintValue(t,n,p)}_setPaintValue(t,n,o){if(this.type==="color"){const A=Ji(o);for(let p=t;p<n;p++)this.paintVertexArray.emplace(p,A[0],A[1])}else{for(let A=t;A<n;A++)this.paintVertexArray.emplace(A,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qr{constructor(t,n,o,A,p,m){this.expression=t,this.uniformNames=n.map(x=>`u_${x}_t`),this.type=o,this.useIntegerZoom=A,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=n.map(x=>({name:`a_${x}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(t,n,o,A,p){const m=this.expression.evaluate(new Ki(this.zoom),n,{},A,[],p),x=this.expression.evaluate(new Ki(this.zoom+1),n,{},A,[],p),B=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(B,t,m,x)}updatePaintArray(t,n,o,A){const p=this.expression.evaluate({zoom:this.zoom},o,A),m=this.expression.evaluate({zoom:this.zoom+1},o,A);this._setPaintValue(t,n,p,m)}_setPaintValue(t,n,o,A){if(this.type==="color"){const p=Ji(o),m=Ji(A);for(let x=t;x<n;x++)this.paintVertexArray.emplace(x,p[0],p[1],m[0],m[1])}else{for(let p=t;p<n;p++)this.paintVertexArray.emplace(p,o,A);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(A))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,n){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,A=Ft(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(A)}getBinding(t,n,o){return new ei(t,n)}}class xn{constructor(t,n,o,A,p,m){this.expression=t,this.type=n,this.useIntegerZoom=o,this.zoom=A,this.layerId=m,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p}populatePaintArray(t,n,o){const A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(A,t,n.patterns&&n.patterns[this.layerId],o)}updatePaintArray(t,n,o,A,p){this._setPaintValues(t,n,o.patterns&&o.patterns[this.layerId],p)}_setPaintValues(t,n,o,A){if(!A||!o)return;const{min:p,mid:m,max:x}=o,B=A[p],S=A[m],M=A[x];if(B&&S&&M)for(let P=t;P<n;P++)this.zoomInPaintVertexArray.emplace(P,S.tl[0],S.tl[1],S.br[0],S.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],S.pixelRatio,B.pixelRatio),this.zoomOutPaintVertexArray.emplace(P,S.tl[0],S.tl[1],S.br[0],S.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],S.pixelRatio,M.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Fe.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Fe.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fo{constructor(t,n,o){this.binders={},this._buffers=[];const A=[];for(const p in t.paint._values){if(!o(p))continue;const m=t.paint.get(p);if(!(m instanceof on&&Ps(m.property.specification)))continue;const x=Fs(p,t.type),B=m.value,S=m.property.specification.type,M=m.property.useIntegerZoom,P=m.property.specification["property-type"],U=P==="cross-faded"||P==="cross-faded-data-driven";if(B.kind==="constant")this.binders[p]=U?new zi(B.value,x):new Di(B.value,x,S),A.push(`/u_${p}`);else if(B.kind==="source"||U){const K=zs(p,S,"source");this.binders[p]=U?new xn(B,S,M,n,K,t.id):new ki(B,x,S,K),A.push(`/a_${p}`)}else{const K=zs(p,S,"composite");this.binders[p]=new qr(B,x,S,M,n,K),A.push(`/z_${p}`)}}this.cacheKey=A.sort().join("")}getMaxValue(t){const n=this.binders[t];return n instanceof ki||n instanceof qr?n.maxValue:0}populatePaintArrays(t,n,o,A,p){for(const m in this.binders){const x=this.binders[m];(x instanceof ki||x instanceof qr||x instanceof xn)&&x.populatePaintArray(t,n,o,A,p)}}setConstantPatternPositions(t,n){for(const o in this.binders){const A=this.binders[o];A instanceof zi&&A.setConstantPatternPositions(t,n)}}updatePaintArrays(t,n,o,A,p){let m=!1;for(const x in t){const B=n.getPositions(x);for(const S of B){const M=o.feature(S.index);for(const P in this.binders){const U=this.binders[P];if((U instanceof ki||U instanceof qr||U instanceof xn)&&U.expression.isStateDependent===!0){const K=A.paint.get(P);U.expression=K.value,U.updatePaintArray(S.start,S.end,M,t[x],p),m=!0}}}}return m}defines(){const t=[];for(const n in this.binders){const o=this.binders[n];(o instanceof Di||o instanceof zi)&&t.push(...o.uniformNames.map(A=>`#define HAS_UNIFORM_${A}`))}return t}getBinderAttributes(){const t=[];for(const n in this.binders){const o=this.binders[n];if(o instanceof ki||o instanceof qr)for(let A=0;A<o.paintVertexAttributes.length;A++)t.push(o.paintVertexAttributes[A].name);else if(o instanceof xn)for(let A=0;A<Fe.members.length;A++)t.push(Fe.members[A].name)}return t}getBinderUniforms(){const t=[];for(const n in this.binders){const o=this.binders[n];if(o instanceof Di||o instanceof zi||o instanceof qr)for(const A of o.uniformNames)t.push(A)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,n){const o=[];for(const A in this.binders){const p=this.binders[A];if(p instanceof Di||p instanceof zi||p instanceof qr){for(const m of p.uniformNames)if(n[m]){const x=p.getBinding(t,n[m],m);o.push({name:m,property:A,binding:x})}}}return o}setUniforms(t,n,o,A){for(const{name:p,property:m,binding:x}of n)this.binders[m].setUniform(x,A,o.get(m),p)}updatePaintBuffers(t){this._buffers=[];for(const n in this.binders){const o=this.binders[n];if(t&&o instanceof xn){const A=t.fromScale===2?o.zoomInPaintVertexBuffer:o.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(o instanceof ki||o instanceof qr)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(t){for(const n in this.binders){const o=this.binders[n];(o instanceof ki||o instanceof qr||o instanceof xn)&&o.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const n=this.binders[t];(n instanceof ki||n instanceof qr||n instanceof xn)&&n.destroy()}}}class mi{constructor(t,n,o=()=>!0){this.programConfigurations={};for(const A of t)this.programConfigurations[A.id]=new fo(A,n,o);this.needsUpload=!1,this._featureMap=new dt,this._bufferOffset=0}populatePaintArrays(t,n,o,A,p,m){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(t,n,A,p,m);n.id!==void 0&&this._featureMap.add(n.id,o,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,n,o,A){for(const p of o)this.needsUpload=this.programConfigurations[p.id].updatePaintArrays(t,this._featureMap,n,p,A)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Fs(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function zs(r,t,n){const o={color:{source:ee,composite:Xt},number:{source:wt,composite:ee}},A=function(p){return{"line-pattern":{source:Pe,composite:Pe},"fill-pattern":{source:Pe,composite:Pe},"fill-extrusion-pattern":{source:Pe,composite:Pe}}[p]}(r);return A&&A[n]||o[t][n]}Nt("ConstantBinder",Di),Nt("CrossFadedConstantBinder",zi),Nt("SourceExpressionBinder",ki),Nt("CrossFadedCompositeBinder",xn),Nt("CompositeExpressionBinder",qr),Nt("ProgramConfiguration",fo,{omit:["_buffers"]}),Nt("ProgramConfigurationSet",mi);const Gr=8192,jl=Math.pow(2,14)-1,Ln=-jl-1;function Na(r){const t=Gr/r.extent,n=r.loadGeometry();for(let o=0;o<n.length;o++){const A=n[o];for(let p=0;p<A.length;p++){const m=A[p],x=Math.round(m.x*t),B=Math.round(m.y*t);m.x=Ft(x,Ln,jl),m.y=Ft(B,Ln,jl),(x<m.x||x>m.x+1||B<m.y||B>m.y+1)&&Et("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function nl(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?Na(r):[]}}function zu(r,t,n,o,A){r.emplaceBack(2*t+(o+1)/2,2*n+(A+1)/2)}class Jl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new se,this.indexArray=new he,this.segments=new Me,this.programConfigurations=new mi(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,o){const A=this.layers[0],p=[];let m=null,x=!1;A.type==="circle"&&(m=A.layout.get("circle-sort-key"),x=!m.isConstant());for(const{feature:B,id:S,index:M,sourceLayerIndex:P}of t){const U=this.layers[0]._featureFilter.needGeometry,K=nl(B,U);if(!this.layers[0]._featureFilter.filter(new Ki(this.zoom),K,o))continue;const re=x?m.evaluate(K,{},o):void 0,ae={id:S,properties:B.properties,type:B.type,sourceLayerIndex:P,index:M,geometry:U?K.geometry:Na(B),patterns:{},sortKey:re};p.push(ae)}x&&p.sort((B,S)=>B.sortKey-S.sortKey);for(const B of p){const{geometry:S,index:M,sourceLayerIndex:P}=B,U=t[M].feature;this.addFeature(B,S,M,o),n.featureIndex.insert(U,S,M,P,this.index)}}update(t,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,de),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,n,o,A){for(const p of n)for(const m of p){const x=m.x,B=m.y;if(x<0||x>=Gr||B<0||B>=Gr)continue;const S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=S.vertexLength;zu(this.layoutVertexArray,x,B,-1,-1),zu(this.layoutVertexArray,x,B,1,-1),zu(this.layoutVertexArray,x,B,1,1),zu(this.layoutVertexArray,x,B,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),S.vertexLength+=4,S.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,{},A)}}function Ua(r,t){for(let n=0;n<r.length;n++)if(Gu(t,r[n]))return!0;for(let n=0;n<t.length;n++)if(Gu(r,t[n]))return!0;return!!Yd(r,t)}function Ba(r,t,n){return!!Gu(r,t)||!!Kd(t,r,n)}function Eh(r,t){if(r.length===1)return mp(t,r[0]);for(let n=0;n<t.length;n++){const o=t[n];for(let A=0;A<o.length;A++)if(Gu(r,o[A]))return!0}for(let n=0;n<r.length;n++)if(mp(t,r[n]))return!0;for(let n=0;n<t.length;n++)if(Yd(r,t[n]))return!0;return!1}function Qh(r,t,n){if(r.length>1){if(Yd(r,t))return!0;for(let o=0;o<t.length;o++)if(Kd(t[o],r,n))return!0}for(let o=0;o<r.length;o++)if(Kd(r[o],t,n))return!0;return!1}function Yd(r,t){if(r.length===0||t.length===0)return!1;for(let n=0;n<r.length-1;n++){const o=r[n],A=r[n+1];for(let p=0;p<t.length-1;p++)if(wv(o,A,t[p],t[p+1]))return!0}return!1}function wv(r,t,n,o){return ni(r,n,o)!==ni(t,n,o)&&ni(r,t,n)!==ni(r,t,o)}function Kd(r,t,n){const o=n*n;if(t.length===1)return r.distSqr(t[0])<o;for(let A=1;A<t.length;A++)if(pp(r,t[A-1],t[A])<o)return!0;return!1}function pp(r,t,n){const o=t.distSqr(n);if(o===0)return r.distSqr(t);const A=((r.x-t.x)*(n.x-t.x)+(r.y-t.y)*(n.y-t.y))/o;return r.distSqr(A<0?t:A>1?n:n.sub(t)._mult(A)._add(t))}function mp(r,t){let n,o,A,p=!1;for(let m=0;m<r.length;m++){n=r[m];for(let x=0,B=n.length-1;x<n.length;B=x++)o=n[x],A=n[B],o.y>t.y!=A.y>t.y&&t.x<(A.x-o.x)*(t.y-o.y)/(A.y-o.y)+o.x&&(p=!p)}return p}function Gu(r,t){let n=!1;for(let o=0,A=r.length-1;o<r.length;A=o++){const p=r[o],m=r[A];p.y>t.y!=m.y>t.y&&t.x<(m.x-p.x)*(t.y-p.y)/(m.y-p.y)+p.x&&(n=!n)}return n}function Cv(r,t,n){const o=n[0],A=n[2];if(r.x<o.x&&t.x<o.x||r.x>A.x&&t.x>A.x||r.y<o.y&&t.y<o.y||r.y>A.y&&t.y>A.y)return!1;const p=ni(r,t,n[0]);return p!==ni(r,t,n[1])||p!==ni(r,t,n[2])||p!==ni(r,t,n[3])}function Sh(r,t,n){const o=t.paint.get(r).value;return o.kind==="constant"?o.value:n.programConfigurations.get(t.id).getMaxValue(r)}function TA(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function PA(r,t,n,o,A){if(!t[0]&&!t[1])return r;const p=H.convert(t)._mult(A);n==="viewport"&&p._rotate(-o);const m=[];for(let x=0;x<r.length;x++)m.push(r[x].sub(p));return m}let yp,_p;Nt("CircleBucket",Jl,{omit:["layers"]});var Bv={get paint(){return _p=_p||new bn({"circle-radius":new Ai(ve.paint_circle["circle-radius"]),"circle-color":new Ai(ve.paint_circle["circle-color"]),"circle-blur":new Ai(ve.paint_circle["circle-blur"]),"circle-opacity":new Ai(ve.paint_circle["circle-opacity"]),"circle-translate":new ii(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new ii(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ii(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ii(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ai(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ai(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ai(ve.paint_circle["circle-stroke-opacity"])})},get layout(){return yp=yp||new bn({"circle-sort-key":new Ai(ve.layout_circle["circle-sort-key"])})}},jn=1e-6,Nu=typeof Float32Array<"u"?Float32Array:Array;function $d(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ip(r,t,n){var o=t[0],A=t[1],p=t[2],m=t[3],x=t[4],B=t[5],S=t[6],M=t[7],P=t[8],U=t[9],K=t[10],re=t[11],ae=t[12],me=t[13],we=t[14],Ye=t[15],Le=n[0],qe=n[1],et=n[2],xt=n[3];return r[0]=Le*o+qe*x+et*P+xt*ae,r[1]=Le*A+qe*B+et*U+xt*me,r[2]=Le*p+qe*S+et*K+xt*we,r[3]=Le*m+qe*M+et*re+xt*Ye,r[4]=(Le=n[4])*o+(qe=n[5])*x+(et=n[6])*P+(xt=n[7])*ae,r[5]=Le*A+qe*B+et*U+xt*me,r[6]=Le*p+qe*S+et*K+xt*we,r[7]=Le*m+qe*M+et*re+xt*Ye,r[8]=(Le=n[8])*o+(qe=n[9])*x+(et=n[10])*P+(xt=n[11])*ae,r[9]=Le*A+qe*B+et*U+xt*me,r[10]=Le*p+qe*S+et*K+xt*we,r[11]=Le*m+qe*M+et*re+xt*Ye,r[12]=(Le=n[12])*o+(qe=n[13])*x+(et=n[14])*P+(xt=n[15])*ae,r[13]=Le*A+qe*B+et*U+xt*me,r[14]=Le*p+qe*S+et*K+xt*we,r[15]=Le*m+qe*M+et*re+xt*Ye,r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var Dh,Ev=Ip;function RA(r,t,n){var o=t[0],A=t[1],p=t[2],m=t[3];return r[0]=n[0]*o+n[4]*A+n[8]*p+n[12]*m,r[1]=n[1]*o+n[5]*A+n[9]*p+n[13]*m,r[2]=n[2]*o+n[6]*A+n[10]*p+n[14]*m,r[3]=n[3]*o+n[7]*A+n[11]*p+n[15]*m,r}Dh=new Nu(4),Nu!=Float32Array&&(Dh[0]=0,Dh[1]=0,Dh[2]=0,Dh[3]=0);class Qv extends e{constructor(t){super(t,Bv)}createBucket(t){return new Jl(t)}queryRadius(t){const n=t;return Sh("circle-radius",this,n)+Sh("circle-stroke-width",this,n)+TA(this.paint.get("circle-translate"))}queryIntersectsFeature(t,n,o,A,p,m,x,B){const S=PA(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,x),M=this.paint.get("circle-radius").evaluate(n,o)+this.paint.get("circle-stroke-width").evaluate(n,o),P=this.paint.get("circle-pitch-alignment")==="map",U=P?S:function(re,ae){return re.map(me=>vp(me,ae))}(S,B),K=P?M*x:M;for(const re of A)for(const ae of re){const me=P?ae:vp(ae,B);let we=K;const Ye=RA([],[ae.x,ae.y,0,1],B);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=Ye[3]/m.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=m.cameraToCenterDistance/Ye[3]),Ba(U,me,we))return!0}return!1}}function vp(r,t){const n=RA([],[r.x,r.y,0,1],t);return new H(n[0]/n[3],n[1]/n[3])}class bp extends Jl{}let xp;Nt("HeatmapBucket",bp,{omit:["layers"]});var Sv={get paint(){return xp=xp||new bn({"heatmap-radius":new Ai(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ai(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ii(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hn(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ii(ve.paint_heatmap["heatmap-opacity"])})}};function Zd(r,{width:t,height:n},o,A){if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==t*n*o)throw new RangeError(`mismatched image size. expected: ${A.length} but got: ${t*n*o}`)}else A=new Uint8Array(t*n*o);return r.width=t,r.height=n,r.data=A,r}function wp(r,{width:t,height:n},o){if(t===r.width&&n===r.height)return;const A=Zd({},{width:t,height:n},o);Wd(r,A,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,n)},o),r.width=t,r.height=n,r.data=A.data}function Wd(r,t,n,o,A,p){if(A.width===0||A.height===0)return t;if(A.width>r.width||A.height>r.height||n.x>r.width-A.width||n.y>r.height-A.height)throw new RangeError("out of range source coordinates for image copy");if(A.width>t.width||A.height>t.height||o.x>t.width-A.width||o.y>t.height-A.height)throw new RangeError("out of range destination coordinates for image copy");const m=r.data,x=t.data;if(m===x)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<A.height;B++){const S=((n.y+B)*r.width+n.x)*p,M=((o.y+B)*t.width+o.x)*p;for(let P=0;P<A.width*p;P++)x[M+P]=m[S+P]}return t}class kh{constructor(t,n){Zd(this,t,1,n)}resize(t){wp(this,t,1)}clone(){return new kh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,o,A,p){Wd(t,n,o,A,p,1)}}class Oa{constructor(t,n){Zd(this,t,4,n)}resize(t){wp(this,t,4)}replace(t,n){n?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Oa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,o,A,p){Wd(t,n,o,A,p,4)}}function Cp(r){const t={},n=r.resolution||256,o=r.clips?r.clips.length:1,A=r.image||new Oa({width:n,height:o});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const p=(m,x,B)=>{t[r.evaluationKey]=B;const S=r.expression.evaluate(t);A.data[m+x+0]=Math.floor(255*S.r/S.a),A.data[m+x+1]=Math.floor(255*S.g/S.a),A.data[m+x+2]=Math.floor(255*S.b/S.a),A.data[m+x+3]=Math.floor(255*S.a)};if(r.clips)for(let m=0,x=0;m<o;++m,x+=4*n)for(let B=0,S=0;B<n;B++,S+=4){const M=B/(n-1),{start:P,end:U}=r.clips[m];p(x,S,P*(1-M)+U*M)}else for(let m=0,x=0;m<n;m++,x+=4)p(0,x,m/(n-1));return A}Nt("AlphaImage",kh),Nt("RGBAImage",Oa);const Xd="big-fb";class Dv extends e{createBucket(t){return new bp(t)}constructor(t){super(t,Sv),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Xd)&&this.heatmapFbos.delete(Xd)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Bp;var kv={get paint(){return Bp=Bp||new bn({"hillshade-illumination-direction":new ii(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ii(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ii(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ii(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ii(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ii(ve.paint_hillshade["hillshade-accent-color"])})}};class Mv extends e{constructor(t){super(t,kv)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Tv=f([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pv}=Tv;function Ep(r,t,n=2){const o=t&&t.length,A=o?t[0]*n:r.length;let p=Qp(r,0,A,n,!0);const m=[];if(!p||p.next===p.prev)return m;let x,B,S;if(o&&(p=function(M,P,U,K){const re=[];for(let ae=0,me=P.length;ae<me;ae++){const we=Qp(M,P[ae]*K,ae<me-1?P[ae+1]*K:M.length,K,!1);we===we.next&&(we.steiner=!0),re.push(Ov(we))}re.sort(Gv);for(let ae=0;ae<re.length;ae++)U=Nv(re[ae],U);return U}(r,t,p,n)),r.length>80*n){x=1/0,B=1/0;let M=-1/0,P=-1/0;for(let U=n;U<A;U+=n){const K=r[U],re=r[U+1];K<x&&(x=K),re<B&&(B=re),K>M&&(M=K),re>P&&(P=re)}S=Math.max(M-x,P-B),S=S!==0?32767/S:0}return Mh(p,m,n,x,B,S,0),m}function Qp(r,t,n,o,A){let p;if(A===function(m,x,B,S){let M=0;for(let P=x,U=B-S;P<B;P+=S)M+=(m[U]-m[P])*(m[P+1]+m[U+1]),U=P;return M}(r,t,n,o)>0)for(let m=t;m<n;m+=o)p=kp(m/o|0,r[m],r[m+1],p);else for(let m=n-o;m>=t;m-=o)p=kp(m/o|0,r[m],r[m+1],p);return p&&LA(p,p.next)&&(Ph(p),p=p.next),p}function Zc(r,t){if(!r)return r;t||(t=r);let n,o=r;do if(n=!1,o.steiner||!LA(o,o.next)&&Yr(o.prev,o,o.next)!==0)o=o.next;else{if(Ph(o),o=t=o.prev,o===o.next)break;n=!0}while(n||o!==t);return t}function Mh(r,t,n,o,A,p,m){if(!r)return;!m&&p&&function(B,S,M,P){let U=B;do U.z===0&&(U.z=ef(U.x,U.y,S,M,P)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==B);U.prevZ.nextZ=null,U.prevZ=null,function(K){let re,ae=1;do{let me,we=K;K=null;let Ye=null;for(re=0;we;){re++;let Le=we,qe=0;for(let xt=0;xt<ae&&(qe++,Le=Le.nextZ,Le);xt++);let et=ae;for(;qe>0||et>0&&Le;)qe!==0&&(et===0||!Le||we.z<=Le.z)?(me=we,we=we.nextZ,qe--):(me=Le,Le=Le.nextZ,et--),Ye?Ye.nextZ=me:K=me,me.prevZ=Ye,Ye=me;we=Le}Ye.nextZ=null,ae*=2}while(re>1)}(U)}(r,o,A,p);let x=r;for(;r.prev!==r.next;){const B=r.prev,S=r.next;if(p?Lv(r,o,A,p):Rv(r))t.push(B.i,r.i,S.i),Ph(r),r=S.next,x=S.next;else if((r=S)===x){m?m===1?Mh(r=Fv(Zc(r),t),t,n,o,A,p,2):m===2&&zv(r,t,n,o,A,p):Mh(Zc(r),t,n,o,A,p,1);break}}}function Rv(r){const t=r.prev,n=r,o=r.next;if(Yr(t,n,o)>=0)return!1;const A=t.x,p=n.x,m=o.x,x=t.y,B=n.y,S=o.y,M=A<p?A<m?A:m:p<m?p:m,P=x<B?x<S?x:S:B<S?B:S,U=A>p?A>m?A:m:p>m?p:m,K=x>B?x>S?x:S:B>S?B:S;let re=o.next;for(;re!==t;){if(re.x>=M&&re.x<=U&&re.y>=P&&re.y<=K&&Uu(A,x,p,B,m,S,re.x,re.y)&&Yr(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function Lv(r,t,n,o){const A=r.prev,p=r,m=r.next;if(Yr(A,p,m)>=0)return!1;const x=A.x,B=p.x,S=m.x,M=A.y,P=p.y,U=m.y,K=x<B?x<S?x:S:B<S?B:S,re=M<P?M<U?M:U:P<U?P:U,ae=x>B?x>S?x:S:B>S?B:S,me=M>P?M>U?M:U:P>U?P:U,we=ef(K,re,t,n,o),Ye=ef(ae,me,t,n,o);let Le=r.prevZ,qe=r.nextZ;for(;Le&&Le.z>=we&&qe&&qe.z<=Ye;){if(Le.x>=K&&Le.x<=ae&&Le.y>=re&&Le.y<=me&&Le!==A&&Le!==m&&Uu(x,M,B,P,S,U,Le.x,Le.y)&&Yr(Le.prev,Le,Le.next)>=0||(Le=Le.prevZ,qe.x>=K&&qe.x<=ae&&qe.y>=re&&qe.y<=me&&qe!==A&&qe!==m&&Uu(x,M,B,P,S,U,qe.x,qe.y)&&Yr(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Le&&Le.z>=we;){if(Le.x>=K&&Le.x<=ae&&Le.y>=re&&Le.y<=me&&Le!==A&&Le!==m&&Uu(x,M,B,P,S,U,Le.x,Le.y)&&Yr(Le.prev,Le,Le.next)>=0)return!1;Le=Le.prevZ}for(;qe&&qe.z<=Ye;){if(qe.x>=K&&qe.x<=ae&&qe.y>=re&&qe.y<=me&&qe!==A&&qe!==m&&Uu(x,M,B,P,S,U,qe.x,qe.y)&&Yr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function Fv(r,t){let n=r;do{const o=n.prev,A=n.next.next;!LA(o,A)&&Sp(o,n,n.next,A)&&Th(o,A)&&Th(A,o)&&(t.push(o.i,n.i,A.i),Ph(n),Ph(n.next),n=r=A),n=n.next}while(n!==r);return Zc(n)}function zv(r,t,n,o,A,p){let m=r;do{let x=m.next.next;for(;x!==m.prev;){if(m.i!==x.i&&Vv(m,x)){let B=Dp(m,x);return m=Zc(m,m.next),B=Zc(B,B.next),Mh(m,t,n,o,A,p,0),void Mh(B,t,n,o,A,p,0)}x=x.next}m=m.next}while(m!==r)}function Gv(r,t){return r.x-t.x}function Nv(r,t){const n=function(A,p){let m=p;const x=A.x,B=A.y;let S,M=-1/0;do{if(B<=m.y&&B>=m.next.y&&m.next.y!==m.y){const ae=m.x+(B-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(ae<=x&&ae>M&&(M=ae,S=m.x<m.next.x?m:m.next,ae===x))return S}m=m.next}while(m!==p);if(!S)return null;const P=S,U=S.x,K=S.y;let re=1/0;m=S;do{if(x>=m.x&&m.x>=U&&x!==m.x&&Uu(B<K?x:M,B,U,K,B<K?M:x,B,m.x,m.y)){const ae=Math.abs(B-m.y)/(x-m.x);Th(m,A)&&(ae<re||ae===re&&(m.x>S.x||m.x===S.x&&Uv(S,m)))&&(S=m,re=ae)}m=m.next}while(m!==P);return S}(r,t);if(!n)return t;const o=Dp(n,r);return Zc(o,o.next),Zc(n,n.next)}function Uv(r,t){return Yr(r.prev,r,t.prev)<0&&Yr(t.next,r,r.next)<0}function ef(r,t,n,o,A){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-n)*A|0)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-o)*A|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ov(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function Uu(r,t,n,o,A,p,m,x){return(A-m)*(t-x)>=(r-m)*(p-x)&&(r-m)*(o-x)>=(n-m)*(t-x)&&(n-m)*(p-x)>=(A-m)*(o-x)}function Vv(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(n,o){let A=n;do{if(A.i!==n.i&&A.next.i!==n.i&&A.i!==o.i&&A.next.i!==o.i&&Sp(A,A.next,n,o))return!0;A=A.next}while(A!==n);return!1}(r,t)&&(Th(r,t)&&Th(t,r)&&function(n,o){let A=n,p=!1;const m=(n.x+o.x)/2,x=(n.y+o.y)/2;do A.y>x!=A.next.y>x&&A.next.y!==A.y&&m<(A.next.x-A.x)*(x-A.y)/(A.next.y-A.y)+A.x&&(p=!p),A=A.next;while(A!==n);return p}(r,t)&&(Yr(r.prev,r,t.prev)||Yr(r,t.prev,t))||LA(r,t)&&Yr(r.prev,r,r.next)>0&&Yr(t.prev,t,t.next)>0)}function Yr(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function LA(r,t){return r.x===t.x&&r.y===t.y}function Sp(r,t,n,o){const A=zA(Yr(r,t,n)),p=zA(Yr(r,t,o)),m=zA(Yr(n,o,r)),x=zA(Yr(n,o,t));return A!==p&&m!==x||!(A!==0||!FA(r,n,t))||!(p!==0||!FA(r,o,t))||!(m!==0||!FA(n,r,o))||!(x!==0||!FA(n,t,o))}function FA(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function zA(r){return r>0?1:r<0?-1:0}function Th(r,t){return Yr(r.prev,r,r.next)<0?Yr(r,t,r.next)>=0&&Yr(r,r.prev,t)>=0:Yr(r,t,r.prev)<0||Yr(r,r.next,t)<0}function Dp(r,t){const n=tf(r.i,r.x,r.y),o=tf(t.i,t.x,t.y),A=r.next,p=t.prev;return r.next=t,t.prev=r,n.next=A,A.prev=n,o.next=n,n.prev=o,p.next=o,o.prev=p,o}function kp(r,t,n,o){const A=tf(r,t,n);return o?(A.next=o.next,A.prev=o,o.next.prev=A,o.next=A):(A.prev=A,A.next=A),A}function Ph(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function tf(r,t,n){return{i:r,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function rf(r,t,n){const o=n.patternDependencies;let A=!1;for(const p of t){const m=p.paint.get(`${r}-pattern`);m.isConstant()||(A=!0);const x=m.constantOr(null);x&&(A=!0,o[x.to]=!0,o[x.from]=!0)}return A}function nf(r,t,n,o,A){const p=A.patternDependencies;for(const m of t){const x=m.paint.get(`${r}-pattern`).value;if(x.kind!=="constant"){let B=x.evaluate({zoom:o-1},n,{},A.availableImages),S=x.evaluate({zoom:o},n,{},A.availableImages),M=x.evaluate({zoom:o+1},n,{},A.availableImages);B=B&&B.name?B.name:B,S=S&&S.name?S.name:S,M=M&&M.name?M.name:M,p[B]=!0,p[S]=!0,p[M]=!0,n.patterns[m.id]={min:B,mid:S,max:M}}}return n}class af{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new X,this.indexArray=new he,this.indexArray2=new le,this.programConfigurations=new mi(t.layers,t.zoom),this.segments=new Me,this.segments2=new Me,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,o){this.hasPattern=rf("fill",this.layers,n);const A=this.layers[0].layout.get("fill-sort-key"),p=!A.isConstant(),m=[];for(const{feature:x,id:B,index:S,sourceLayerIndex:M}of t){const P=this.layers[0]._featureFilter.needGeometry,U=nl(x,P);if(!this.layers[0]._featureFilter.filter(new Ki(this.zoom),U,o))continue;const K=p?A.evaluate(U,{},o,n.availableImages):void 0,re={id:B,properties:x.properties,type:x.type,sourceLayerIndex:M,index:S,geometry:P?U.geometry:Na(x),patterns:{},sortKey:K};m.push(re)}p&&m.sort((x,B)=>x.sortKey-B.sortKey);for(const x of m){const{geometry:B,index:S,sourceLayerIndex:M}=x;if(this.hasPattern){const P=nf("fill",this.layers,x,this.zoom,n);this.patternFeatures.push(P)}else this.addFeature(x,B,S,o,{});n.featureIndex.insert(t[S].feature,B,S,M,this.index)}}update(t,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,o)}addFeatures(t,n,o){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,n,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Pv),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,n,o,A,p){for(const m of ws(n,500)){let x=0;for(const K of m)x+=K.length;const B=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),S=B.vertexLength,M=[],P=[];for(const K of m){if(K.length===0)continue;K!==m[0]&&P.push(M.length/2);const re=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),ae=re.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(ae+K.length-1,ae),M.push(K[0].x),M.push(K[0].y);for(let me=1;me<K.length;me++)this.layoutVertexArray.emplaceBack(K[me].x,K[me].y),this.indexArray2.emplaceBack(ae+me-1,ae+me),M.push(K[me].x),M.push(K[me].y);re.vertexLength+=K.length,re.primitiveLength+=K.length}const U=Ep(M,P);for(let K=0;K<U.length;K+=3)this.indexArray.emplaceBack(S+U[K],S+U[K+1],S+U[K+2]);B.vertexLength+=x,B.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,p,A)}}let Mp,Tp;Nt("FillBucket",af,{omit:["layers","patternFeatures"]});var qv={get paint(){return Tp=Tp||new bn({"fill-antialias":new ii(ve.paint_fill["fill-antialias"]),"fill-opacity":new Ai(ve.paint_fill["fill-opacity"]),"fill-color":new Ai(ve.paint_fill["fill-color"]),"fill-outline-color":new Ai(ve.paint_fill["fill-outline-color"]),"fill-translate":new ii(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new ii(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new rl(ve.paint_fill["fill-pattern"])})},get layout(){return Mp=Mp||new bn({"fill-sort-key":new Ai(ve.layout_fill["fill-sort-key"])})}};class Hv extends e{constructor(t){super(t,qv)}recalculate(t,n){super.recalculate(t,n);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new af(t)}queryRadius(){return TA(this.paint.get("fill-translate"))}queryIntersectsFeature(t,n,o,A,p,m,x){return Eh(PA(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,x),A)}isTileClipped(){return!0}}const jv=f([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Jv=f([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Yv}=jv;var Yl={},Kv=Y,Pp=Ou;function Ou(r,t,n,o,A){this.properties={},this.extent=n,this.type=0,this._pbf=r,this._geometry=-1,this._keys=o,this._values=A,r.readFields($v,this,t)}function $v(r,t,n){r==1?t.id=n.readVarint():r==2?function(o,A){for(var p=o.readVarint()+o.pos;o.pos<p;){var m=A._keys[o.readVarint()],x=A._values[o.readVarint()];A.properties[m]=x}}(n,t):r==3?t.type=n.readVarint():r==4&&(t._geometry=n.pos)}function Zv(r){for(var t,n,o=0,A=0,p=r.length,m=p-1;A<p;m=A++)o+=((n=r[m]).x-(t=r[A]).x)*(t.y+n.y);return o}Ou.types=["Unknown","Point","LineString","Polygon"],Ou.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,n=r.readVarint()+r.pos,o=1,A=0,p=0,m=0,x=[];r.pos<n;){if(A<=0){var B=r.readVarint();o=7&B,A=B>>3}if(A--,o===1||o===2)p+=r.readSVarint(),m+=r.readSVarint(),o===1&&(t&&x.push(t),t=[]),t.push(new Kv(p,m));else{if(o!==7)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&x.push(t),x},Ou.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,n=1,o=0,A=0,p=0,m=1/0,x=-1/0,B=1/0,S=-1/0;r.pos<t;){if(o<=0){var M=r.readVarint();n=7&M,o=M>>3}if(o--,n===1||n===2)(A+=r.readSVarint())<m&&(m=A),A>x&&(x=A),(p+=r.readSVarint())<B&&(B=p),p>S&&(S=p);else if(n!==7)throw new Error("unknown command "+n)}return[m,B,x,S]},Ou.prototype.toGeoJSON=function(r,t,n){var o,A,p=this.extent*Math.pow(2,n),m=this.extent*r,x=this.extent*t,B=this.loadGeometry(),S=Ou.types[this.type];function M(K){for(var re=0;re<K.length;re++){var ae=K[re];K[re]=[360*(ae.x+m)/p-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+x)/p)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(o=0;o<B.length;o++)P[o]=B[o][0];M(B=P);break;case 2:for(o=0;o<B.length;o++)M(B[o]);break;case 3:for(B=function(K){var re=K.length;if(re<=1)return[K];for(var ae,me,we=[],Ye=0;Ye<re;Ye++){var Le=Zv(K[Ye]);Le!==0&&(me===void 0&&(me=Le<0),me===Le<0?(ae&&we.push(ae),ae=[K[Ye]]):ae.push(K[Ye]))}return ae&&we.push(ae),we}(B),o=0;o<B.length;o++)for(A=0;A<B[o].length;A++)M(B[o][A])}B.length===1?B=B[0]:S="Multi"+S;var U={type:"Feature",geometry:{type:S,coordinates:B},properties:this.properties};return"id"in this&&(U.id=this.id),U};var Wv=Pp,Rp=Lp;function Lp(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Xv,this,t),this.length=this._features.length}function Xv(r,t,n){r===15?t.version=n.readVarint():r===1?t.name=n.readString():r===5?t.extent=n.readVarint():r===2?t._features.push(n.pos):r===3?t._keys.push(n.readString()):r===4&&t._values.push(function(o){for(var A=null,p=o.readVarint()+o.pos;o.pos<p;){var m=o.readVarint()>>3;A=m===1?o.readString():m===2?o.readFloat():m===3?o.readDouble():m===4?o.readVarint64():m===5?o.readVarint():m===6?o.readSVarint():m===7?o.readBoolean():null}return A}(n))}Lp.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new Wv(this._pbf,t,this.extent,this._keys,this._values)};var e1=Rp;function t1(r,t,n){if(r===3){var o=new e1(n,n.readVarint()+n.pos);o.length&&(t[o.name]=o)}}Yl.VectorTile=function(r,t){this.layers=r.readFields(t1,{},t)},Yl.VectorTileFeature=Pp,Yl.VectorTileLayer=Rp;const i1=Yl.VectorTileFeature.types,sf=Math.pow(2,13);function Rh(r,t,n,o,A,p,m,x){r.emplaceBack(t,n,2*Math.floor(o*sf)+m,A*sf*2,p*sf*2,Math.round(x))}class of{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ie,this.centroidVertexArray=new ge,this.indexArray=new he,this.programConfigurations=new mi(t.layers,t.zoom),this.segments=new Me,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,o){this.features=[],this.hasPattern=rf("fill-extrusion",this.layers,n);for(const{feature:A,id:p,index:m,sourceLayerIndex:x}of t){const B=this.layers[0]._featureFilter.needGeometry,S=nl(A,B);if(!this.layers[0]._featureFilter.filter(new Ki(this.zoom),S,o))continue;const M={id:p,sourceLayerIndex:x,index:m,geometry:B?S.geometry:Na(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(nf("fill-extrusion",this.layers,M,this.zoom,n)):this.addFeature(M,M.geometry,m,o,{}),n.featureIndex.insert(A,M.geometry,m,x,this.index,!0)}}addFeatures(t,n,o){for(const A of this.features){const{geometry:p}=A;this.addFeature(A,p,A.index,n,o)}}update(t,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Yv),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Jv.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,n,o,A,p){for(const m of ws(n,500)){const x={x:0,y:0,vertexCount:0};let B=0;for(const re of m)B+=re.length;let S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const re of m){if(re.length===0||n1(re))continue;let ae=0;for(let me=0;me<re.length;me++){const we=re[me];if(me>=1){const Ye=re[me-1];if(!r1(we,Ye)){S.vertexLength+4>Me.MAX_VERTEX_ARRAY_LENGTH&&(S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Le=we.sub(Ye)._perp()._unit(),qe=Ye.dist(we);ae+qe>32768&&(ae=0),Rh(this.layoutVertexArray,we.x,we.y,Le.x,Le.y,0,0,ae),Rh(this.layoutVertexArray,we.x,we.y,Le.x,Le.y,0,1,ae),x.x+=2*we.x,x.y+=2*we.y,x.vertexCount+=2,ae+=qe,Rh(this.layoutVertexArray,Ye.x,Ye.y,Le.x,Le.y,0,0,ae),Rh(this.layoutVertexArray,Ye.x,Ye.y,Le.x,Le.y,0,1,ae),x.x+=2*Ye.x,x.y+=2*Ye.y,x.vertexCount+=2;const et=S.vertexLength;this.indexArray.emplaceBack(et,et+2,et+1),this.indexArray.emplaceBack(et+1,et+2,et+3),S.vertexLength+=4,S.primitiveLength+=2}}}}if(S.vertexLength+B>Me.MAX_VERTEX_ARRAY_LENGTH&&(S=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray)),i1[t.type]!=="Polygon")continue;const M=[],P=[],U=S.vertexLength;for(const re of m)if(re.length!==0){re!==m[0]&&P.push(M.length/2);for(let ae=0;ae<re.length;ae++){const me=re[ae];Rh(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),x.x+=me.x,x.y+=me.y,x.vertexCount+=1,M.push(me.x),M.push(me.y)}}const K=Ep(M,P);for(let re=0;re<K.length;re+=3)this.indexArray.emplaceBack(U+K[re],U+K[re+2],U+K[re+1]);S.primitiveLength+=K.length/3,S.vertexLength+=B;for(let re=0;re<x.vertexCount;re++){const ae=Math.floor(x.x/x.vertexCount),me=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(ae,me)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,p,A)}}function r1(r,t){return r.x===t.x&&(r.x<0||r.x>Gr)||r.y===t.y&&(r.y<0||r.y>Gr)}function n1(r){return r.every(t=>t.x<0)||r.every(t=>t.x>Gr)||r.every(t=>t.y<0)||r.every(t=>t.y>Gr)}let Fp;Nt("FillExtrusionBucket",of,{omit:["layers","features"]});var a1={get paint(){return Fp=Fp||new bn({"fill-extrusion-opacity":new ii(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ai(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ii(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ii(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rl(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ai(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ai(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ii(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class s1 extends e{constructor(t){super(t,a1)}createBucket(t){return new of(t)}queryRadius(){return TA(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,n,o,A,p,m,x,B){const S=PA(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(n,o),P=this.paint.get("fill-extrusion-base").evaluate(n,o),U=function(re,ae,me,we){const Ye=[];for(const Le of re){const qe=[Le.x,Le.y,0,1];RA(qe,qe,ae),Ye.push(new H(qe[0]/qe[3],qe[1]/qe[3]))}return Ye}(S,B),K=function(re,ae,me,we){const Ye=[],Le=[],qe=we[8]*ae,et=we[9]*ae,xt=we[10]*ae,jt=we[11]*ae,pi=we[8]*me,qt=we[9]*me,Lt=we[10]*me,oi=we[11]*me;for(const Wt of re){const Yt=[],lt=[];for(const ci of Wt){const ai=ci.x,vi=ci.y,pr=we[0]*ai+we[4]*vi+we[12],ur=we[1]*ai+we[5]*vi+we[13],ln=we[2]*ai+we[6]*vi+we[14],As=we[3]*ai+we[7]*vi+we[15],Cn=ln+xt,cn=As+jt,Jn=pr+pi,Yn=ur+qt,Kn=ln+Lt,Hr=As+oi,un=new H((pr+qe)/cn,(ur+et)/cn);un.z=Cn/cn,Yt.push(un);const Fn=new H(Jn/Hr,Yn/Hr);Fn.z=Kn/Hr,lt.push(Fn)}Ye.push(Yt),Le.push(lt)}return[Ye,Le]}(A,P,M,B);return function(re,ae,me){let we=1/0;Eh(me,ae)&&(we=zp(me,ae[0]));for(let Ye=0;Ye<ae.length;Ye++){const Le=ae[Ye],qe=re[Ye];for(let et=0;et<Le.length-1;et++){const xt=Le[et],jt=[xt,Le[et+1],qe[et+1],qe[et],xt];Ua(me,jt)&&(we=Math.min(we,zp(me,jt)))}}return we!==1/0&&we}(K[0],K[1],U)}}function Lh(r,t){return r.x*t.x+r.y*t.y}function zp(r,t){if(r.length===1){let n=0;const o=t[n++];let A;for(;!A||o.equals(A);)if(A=t[n++],!A)return 1/0;for(;n<t.length;n++){const p=t[n],m=r[0],x=A.sub(o),B=p.sub(o),S=m.sub(o),M=Lh(x,x),P=Lh(x,B),U=Lh(B,B),K=Lh(S,x),re=Lh(S,B),ae=M*U-P*P,me=(U*K-P*re)/ae,we=(M*re-P*K)/ae,Ye=o.z*(1-me-we)+A.z*me+p.z*we;if(isFinite(Ye))return Ye}return 1/0}{let n=1/0;for(const o of t)n=Math.min(n,o.z);return n}}const o1=f([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:l1}=o1,c1=f([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:u1}=c1,h1=Yl.VectorTileFeature.types,A1=Math.cos(Math.PI/180*37.5),Gp=Math.pow(2,14)/.5;class lf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new xe,this.layoutVertexArray2=new Qe,this.indexArray=new he,this.programConfigurations=new mi(t.layers,t.zoom),this.segments=new Me,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,o){this.hasPattern=rf("line",this.layers,n);const A=this.layers[0].layout.get("line-sort-key"),p=!A.isConstant(),m=[];for(const{feature:x,id:B,index:S,sourceLayerIndex:M}of t){const P=this.layers[0]._featureFilter.needGeometry,U=nl(x,P);if(!this.layers[0]._featureFilter.filter(new Ki(this.zoom),U,o))continue;const K=p?A.evaluate(U,{},o):void 0,re={id:B,properties:x.properties,type:x.type,sourceLayerIndex:M,index:S,geometry:P?U.geometry:Na(x),patterns:{},sortKey:K};m.push(re)}p&&m.sort((x,B)=>x.sortKey-B.sortKey);for(const x of m){const{geometry:B,index:S,sourceLayerIndex:M}=x;if(this.hasPattern){const P=nf("line",this.layers,x,this.zoom,n);this.patternFeatures.push(P)}else this.addFeature(x,B,S,o,{});n.featureIndex.insert(t[S].feature,B,S,M,this.index)}}update(t,n,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,o)}addFeatures(t,n,o){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,n,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,u1)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,l1),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,n,o,A,p){const m=this.layers[0].layout,x=m.get("line-join").evaluate(t,{}),B=m.get("line-cap"),S=m.get("line-miter-limit"),M=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const P of n)this.addLine(P,t,x,B,S,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,p,A)}addLine(t,n,o,A,p,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<t.length-1;we++)this.totalDistance+=t[we].dist(t[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=h1[n.type]==="Polygon";let B=t.length;for(;B>=2&&t[B-1].equals(t[B-2]);)B--;let S=0;for(;S<B-1&&t[S].equals(t[S+1]);)S++;if(B<(x?3:2))return;o==="bevel"&&(p=1.05);const M=this.overscaling<=16?15*Gr/(512*this.overscaling):0,P=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let U,K,re,ae,me;this.e1=this.e2=-1,x&&(U=t[B-2],me=t[S].sub(U)._unit()._perp());for(let we=S;we<B;we++){if(re=we===B-1?x?t[S+1]:void 0:t[we+1],re&&t[we].equals(re))continue;me&&(ae=me),U&&(K=U),U=t[we],me=re?re.sub(U)._unit()._perp():ae,ae=ae||me;let Ye=ae.add(me);Ye.x===0&&Ye.y===0||Ye._unit();const Le=ae.x*me.x+ae.y*me.y,qe=Ye.x*me.x+Ye.y*me.y,et=qe!==0?1/qe:1/0,xt=2*Math.sqrt(2-2*qe),jt=qe<A1&&K&&re,pi=ae.x*me.y-ae.y*me.x>0;if(jt&&we>S){const oi=U.dist(K);if(oi>2*M){const Wt=U.sub(U.sub(K)._mult(M/oi)._round());this.updateDistance(K,Wt),this.addCurrentVertex(Wt,ae,0,0,P),K=Wt}}const qt=K&&re;let Lt=qt?o:x?"butt":A;if(qt&&Lt==="round"&&(et<m?Lt="miter":et<=2&&(Lt="fakeround")),Lt==="miter"&&et>p&&(Lt="bevel"),Lt==="bevel"&&(et>2&&(Lt="flipbevel"),et<p&&(Lt="miter")),K&&this.updateDistance(K,U),Lt==="miter")Ye._mult(et),this.addCurrentVertex(U,Ye,0,0,P);else if(Lt==="flipbevel"){if(et>100)Ye=me.mult(-1);else{const oi=et*ae.add(me).mag()/ae.sub(me).mag();Ye._perp()._mult(oi*(pi?-1:1))}this.addCurrentVertex(U,Ye,0,0,P),this.addCurrentVertex(U,Ye.mult(-1),0,0,P)}else if(Lt==="bevel"||Lt==="fakeround"){const oi=-Math.sqrt(et*et-1),Wt=pi?oi:0,Yt=pi?0:oi;if(K&&this.addCurrentVertex(U,ae,Wt,Yt,P),Lt==="fakeround"){const lt=Math.round(180*xt/Math.PI/20);for(let ci=1;ci<lt;ci++){let ai=ci/lt;if(ai!==.5){const pr=ai-.5;ai+=ai*pr*(ai-1)*((1.0904+Le*(Le*(3.55645-1.43519*Le)-3.2452))*pr*pr+(.848013+Le*(.215638*Le-1.06021)))}const vi=me.sub(ae)._mult(ai)._add(ae)._unit()._mult(pi?-1:1);this.addHalfVertex(U,vi.x,vi.y,!1,pi,0,P)}}re&&this.addCurrentVertex(U,me,-Wt,-Yt,P)}else if(Lt==="butt")this.addCurrentVertex(U,Ye,0,0,P);else if(Lt==="square"){const oi=K?1:-1;this.addCurrentVertex(U,Ye,oi,oi,P)}else Lt==="round"&&(K&&(this.addCurrentVertex(U,ae,0,0,P),this.addCurrentVertex(U,ae,1,1,P,!0)),re&&(this.addCurrentVertex(U,me,-1,-1,P,!0),this.addCurrentVertex(U,me,0,0,P)));if(jt&&we<B-1){const oi=U.dist(re);if(oi>2*M){const Wt=U.add(re.sub(U)._mult(M/oi)._round());this.updateDistance(U,Wt),this.addCurrentVertex(Wt,me,0,0,P),U=Wt}}}}addCurrentVertex(t,n,o,A,p,m=!1){const x=n.y*A-n.x,B=-n.y-n.x*A;this.addHalfVertex(t,n.x+n.y*o,n.y-n.x*o,m,!1,o,p),this.addHalfVertex(t,x,B,m,!0,-A,p),this.distance>Gp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,n,o,A,p,m))}addHalfVertex({x:t,y:n},o,A,p,m,x,B){const S=.5*(this.lineClips?this.scaledDistance*(Gp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(p?1:0),(n<<1)+(m?1:0),Math.round(63*o)+128,Math.round(63*A)+128,1+(x===0?0:x<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),B.primitiveLength++),m?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,n){this.distance+=t.dist(n),this.updateScaledDistance()}}let Np,Up;Nt("LineBucket",lf,{omit:["layers","patternFeatures"]});var Op={get paint(){return Up=Up||new bn({"line-opacity":new Ai(ve.paint_line["line-opacity"]),"line-color":new Ai(ve.paint_line["line-color"]),"line-translate":new ii(ve.paint_line["line-translate"]),"line-translate-anchor":new ii(ve.paint_line["line-translate-anchor"]),"line-width":new Ai(ve.paint_line["line-width"]),"line-gap-width":new Ai(ve.paint_line["line-gap-width"]),"line-offset":new Ai(ve.paint_line["line-offset"]),"line-blur":new Ai(ve.paint_line["line-blur"]),"line-dasharray":new $c(ve.paint_line["line-dasharray"]),"line-pattern":new rl(ve.paint_line["line-pattern"]),"line-gradient":new Hn(ve.paint_line["line-gradient"])})},get layout(){return Np=Np||new bn({"line-cap":new ii(ve.layout_line["line-cap"]),"line-join":new Ai(ve.layout_line["line-join"]),"line-miter-limit":new ii(ve.layout_line["line-miter-limit"]),"line-round-limit":new ii(ve.layout_line["line-round-limit"]),"line-sort-key":new Ai(ve.layout_line["line-sort-key"])})}};class d1 extends Ai{possiblyEvaluate(t,n){return n=new Ki(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(t,n)}evaluate(t,n,o,A){return n=zt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(t,n,o,A)}}let GA;class f1 extends e{constructor(t){super(t,Op),this.gradientVersion=0,GA||(GA=new d1(Op.paint.properties["line-width"].specification),GA.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const n=this.gradientExpression();this.stepInterpolant=!!function(o){return o._styleExpression!==void 0}(n)&&n._styleExpression.expression instanceof ns,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,n){super.recalculate(t,n),this.paint._values["line-floorwidth"]=GA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new lf(t)}queryRadius(t){const n=t,o=Vp(Sh("line-width",this,n),Sh("line-gap-width",this,n)),A=Sh("line-offset",this,n);return o/2+Math.abs(A)+TA(this.paint.get("line-translate"))}queryIntersectsFeature(t,n,o,A,p,m,x){const B=PA(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,x),S=x/2*Vp(this.paint.get("line-width").evaluate(n,o),this.paint.get("line-gap-width").evaluate(n,o)),M=this.paint.get("line-offset").evaluate(n,o);return M&&(A=function(P,U){const K=[];for(let re=0;re<P.length;re++){const ae=P[re],me=[];for(let we=0;we<ae.length;we++){const Ye=ae[we-1],Le=ae[we],qe=ae[we+1],et=we===0?new H(0,0):Le.sub(Ye)._unit()._perp(),xt=we===ae.length-1?new H(0,0):qe.sub(Le)._unit()._perp(),jt=et._add(xt)._unit(),pi=jt.x*xt.x+jt.y*xt.y;pi!==0&&jt._mult(1/pi),me.push(jt._mult(U)._add(Le))}K.push(me)}return K}(A,M*x)),function(P,U,K){for(let re=0;re<U.length;re++){const ae=U[re];if(P.length>=3){for(let me=0;me<ae.length;me++)if(Gu(P,ae[me]))return!0}if(Qh(P,ae,K))return!0}return!1}(B,A,S)}isTileClipped(){return!0}}function Vp(r,t){return t>0?t+2*r:r}const g1=f([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),p1=f([{name:"a_projected_pos",components:3,type:"Float32"}],4);f([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const m1=f([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);f([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const qp=f([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),y1=f([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function _1(r,t,n){return r.sections.forEach(o=>{o.text=function(A,p,m){const x=p.layout.get("text-transform").evaluate(m,{});return x==="uppercase"?A=A.toLocaleUpperCase():x==="lowercase"&&(A=A.toLocaleLowerCase()),tr.applyArabicShaping&&(A=tr.applyArabicShaping(A)),A}(o.text,t,n)}),r}f([{name:"triangle",components:3,type:"Uint16"}]),f([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),f([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),f([{type:"Float32",name:"offsetX"}]),f([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),f([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Fh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var an=24,Hp=cr,jp=function(r,t,n,o,A){var p,m,x=8*A-o-1,B=(1<<x)-1,S=B>>1,M=-7,P=A-1,U=-1,K=r[t+P];for(P+=U,p=K&(1<<-M)-1,K>>=-M,M+=x;M>0;p=256*p+r[t+P],P+=U,M-=8);for(m=p&(1<<-M)-1,p>>=-M,M+=o;M>0;m=256*m+r[t+P],P+=U,M-=8);if(p===0)p=1-S;else{if(p===B)return m?NaN:1/0*(K?-1:1);m+=Math.pow(2,o),p-=S}return(K?-1:1)*m*Math.pow(2,p-o)},Jp=function(r,t,n,o,A,p){var m,x,B,S=8*p-A-1,M=(1<<S)-1,P=M>>1,U=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=0,re=1,ae=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,m=M):(m=Math.floor(Math.log(t)/Math.LN2),t*(B=Math.pow(2,-m))<1&&(m--,B*=2),(t+=m+P>=1?U/B:U*Math.pow(2,1-P))*B>=2&&(m++,B/=2),m+P>=M?(x=0,m=M):m+P>=1?(x=(t*B-1)*Math.pow(2,A),m+=P):(x=t*Math.pow(2,P-1)*Math.pow(2,A),m=0));A>=8;r[n+K]=255&x,K+=re,x/=256,A-=8);for(m=m<<A|x,S+=A;S>0;r[n+K]=255&m,K+=re,m/=256,S-=8);r[n+K-re]|=128*ae};function cr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}cr.Varint=0,cr.Fixed64=1,cr.Bytes=2,cr.Fixed32=5;var cf=4294967296,Yp=1/cf,Kp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function al(r){return r.type===cr.Bytes?r.readVarint()+r.pos:r.pos+1}function Vu(r,t,n){return n?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function $p(r,t,n){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(o);for(var A=n.pos-1;A>=r;A--)n.buf[A+o]=n.buf[A]}function I1(r,t){for(var n=0;n<r.length;n++)t.writeVarint(r[n])}function v1(r,t){for(var n=0;n<r.length;n++)t.writeSVarint(r[n])}function b1(r,t){for(var n=0;n<r.length;n++)t.writeFloat(r[n])}function x1(r,t){for(var n=0;n<r.length;n++)t.writeDouble(r[n])}function w1(r,t){for(var n=0;n<r.length;n++)t.writeBoolean(r[n])}function C1(r,t){for(var n=0;n<r.length;n++)t.writeFixed32(r[n])}function B1(r,t){for(var n=0;n<r.length;n++)t.writeSFixed32(r[n])}function E1(r,t){for(var n=0;n<r.length;n++)t.writeFixed64(r[n])}function Q1(r,t){for(var n=0;n<r.length;n++)t.writeSFixed64(r[n])}function NA(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function qu(r,t,n){r[n]=t,r[n+1]=t>>>8,r[n+2]=t>>>16,r[n+3]=t>>>24}function Zp(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}cr.prototype={destroy:function(){this.buf=null},readFields:function(r,t,n){for(n=n||this.length;this.pos<n;){var o=this.readVarint(),A=o>>3,p=this.pos;this.type=7&o,r(A,t,this),this.pos===p&&this.skip(o)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=NA(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Zp(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=NA(this.buf,this.pos)+NA(this.buf,this.pos+4)*cf;return this.pos+=8,r},readSFixed64:function(){var r=NA(this.buf,this.pos)+Zp(this.buf,this.pos+4)*cf;return this.pos+=8,r},readFloat:function(){var r=jp(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=jp(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,n,o=this.buf;return t=127&(n=o[this.pos++]),n<128?t:(t|=(127&(n=o[this.pos++]))<<7,n<128?t:(t|=(127&(n=o[this.pos++]))<<14,n<128?t:(t|=(127&(n=o[this.pos++]))<<21,n<128?t:function(A,p,m){var x,B,S=m.buf;if(x=(112&(B=S[m.pos++]))>>4,B<128||(x|=(127&(B=S[m.pos++]))<<3,B<128)||(x|=(127&(B=S[m.pos++]))<<10,B<128)||(x|=(127&(B=S[m.pos++]))<<17,B<128)||(x|=(127&(B=S[m.pos++]))<<24,B<128)||(x|=(1&(B=S[m.pos++]))<<31,B<128))return Vu(A,x,p);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=o[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&Kp?function(n,o,A){return Kp.decode(n.subarray(o,A))}(this.buf,t,r):function(n,o,A){for(var p="",m=o;m<A;){var x,B,S,M=n[m],P=null,U=M>239?4:M>223?3:M>191?2:1;if(m+U>A)break;U===1?M<128&&(P=M):U===2?(192&(x=n[m+1]))==128&&(P=(31&M)<<6|63&x)<=127&&(P=null):U===3?(B=n[m+2],(192&(x=n[m+1]))==128&&(192&B)==128&&((P=(15&M)<<12|(63&x)<<6|63&B)<=2047||P>=55296&&P<=57343)&&(P=null)):U===4&&(B=n[m+2],S=n[m+3],(192&(x=n[m+1]))==128&&(192&B)==128&&(192&S)==128&&((P=(15&M)<<18|(63&x)<<12|(63&B)<<6|63&S)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,U=1):P>65535&&(P-=65536,p+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),p+=String.fromCharCode(P),m+=U}return p}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==cr.Bytes)return r.push(this.readVarint(t));var n=al(this);for(r=r||[];this.pos<n;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==cr.Bytes)return r.push(this.readSVarint());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==cr.Bytes)return r.push(this.readBoolean());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==cr.Bytes)return r.push(this.readFloat());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==cr.Bytes)return r.push(this.readDouble());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==cr.Bytes)return r.push(this.readFixed32());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==cr.Bytes)return r.push(this.readSFixed32());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==cr.Bytes)return r.push(this.readFixed64());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==cr.Bytes)return r.push(this.readSFixed64());var t=al(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===cr.Varint)for(;this.buf[this.pos++]>127;);else if(t===cr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===cr.Fixed32)this.pos+=4;else{if(t!==cr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),qu(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),qu(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),qu(this.buf,-1&r,this.pos),qu(this.buf,Math.floor(r*Yp),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),qu(this.buf,-1&r,this.pos),qu(this.buf,Math.floor(r*Yp),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,n){var o,A;if(t>=0?(o=t%4294967296|0,A=t/4294967296|0):(A=~(-t/4294967296),4294967295^(o=~(-t%4294967296))?o=o+1|0:(o=0,A=A+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(p,m,x){x.buf[x.pos++]=127&p|128,p>>>=7,x.buf[x.pos++]=127&p|128,p>>>=7,x.buf[x.pos++]=127&p|128,p>>>=7,x.buf[x.pos++]=127&p|128,x.buf[x.pos]=127&(p>>>=7)}(o,0,n),function(p,m){var x=(7&p)<<4;m.buf[m.pos++]|=x|((p>>>=3)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p)))))}(A,n)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(o,A,p){for(var m,x,B=0;B<A.length;B++){if((m=A.charCodeAt(B))>55295&&m<57344){if(!x){m>56319||B+1===A.length?(o[p++]=239,o[p++]=191,o[p++]=189):x=m;continue}if(m<56320){o[p++]=239,o[p++]=191,o[p++]=189,x=m;continue}m=x-55296<<10|m-56320|65536,x=null}else x&&(o[p++]=239,o[p++]=191,o[p++]=189,x=null);m<128?o[p++]=m:(m<2048?o[p++]=m>>6|192:(m<65536?o[p++]=m>>12|224:(o[p++]=m>>18|240,o[p++]=m>>12&63|128),o[p++]=m>>6&63|128),o[p++]=63&m|128)}return p}(this.buf,r,this.pos);var n=this.pos-t;n>=128&&$p(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(r){this.realloc(4),Jp(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Jp(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=r[n]},writeRawMessage:function(r,t){this.pos++;var n=this.pos;r(t,this);var o=this.pos-n;o>=128&&$p(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeMessage:function(r,t,n){this.writeTag(r,cr.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,I1,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,v1,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,w1,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,b1,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,x1,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,C1,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,B1,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,E1,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,Q1,t)},writeBytesField:function(r,t){this.writeTag(r,cr.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,cr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,cr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,cr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,cr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,cr.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,cr.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,cr.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,cr.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,cr.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,!!t)}};var uf=q(Hp);const hf=3;function S1(r,t,n){r===1&&n.readMessage(D1,t)}function D1(r,t,n){if(r===3){const{id:o,bitmap:A,width:p,height:m,left:x,top:B,advance:S}=n.readMessage(k1,{});t.push({id:o,bitmap:new kh({width:p+2*hf,height:m+2*hf},A),metrics:{width:p,height:m,left:x,top:B,advance:S}})}}function k1(r,t,n){r===1?t.id=n.readVarint():r===2?t.bitmap=n.readBytes():r===3?t.width=n.readVarint():r===4?t.height=n.readVarint():r===5?t.left=n.readSVarint():r===6?t.top=n.readSVarint():r===7&&(t.advance=n.readVarint())}const Wp=hf;function Xp(r){let t=0,n=0;for(const m of r)t+=m.w*m.h,n=Math.max(n,m.w);r.sort((m,x)=>x.h-m.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let A=0,p=0;for(const m of r)for(let x=o.length-1;x>=0;x--){const B=o[x];if(!(m.w>B.w||m.h>B.h)){if(m.x=B.x,m.y=B.y,p=Math.max(p,m.y+m.h),A=Math.max(A,m.x+m.w),m.w===B.w&&m.h===B.h){const S=o.pop();x<o.length&&(o[x]=S)}else m.h===B.h?(B.x+=m.w,B.w-=m.w):m.w===B.w?(B.y+=m.h,B.h-=m.h):(o.push({x:B.x+m.w,y:B.y,w:B.w-m.w,h:m.h}),B.y+=m.h,B.h-=m.h);break}}return{w:A,h:p,fill:t/(A*p)||0}}const oa=1;class Af{constructor(t,{pixelRatio:n,version:o,stretchX:A,stretchY:p,content:m,textFitWidth:x,textFitHeight:B}){this.paddedRect=t,this.pixelRatio=n,this.stretchX=A,this.stretchY=p,this.content=m,this.version=o,this.textFitWidth=x,this.textFitHeight=B}get tl(){return[this.paddedRect.x+oa,this.paddedRect.y+oa]}get br(){return[this.paddedRect.x+this.paddedRect.w-oa,this.paddedRect.y+this.paddedRect.h-oa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*oa)/this.pixelRatio,(this.paddedRect.h-2*oa)/this.pixelRatio]}}class em{constructor(t,n){const o={},A={};this.haveRenderCallbacks=[];const p=[];this.addImages(t,o,p),this.addImages(n,A,p);const{w:m,h:x}=Xp(p),B=new Oa({width:m||1,height:x||1});for(const S in t){const M=t[S],P=o[S].paddedRect;Oa.copy(M.data,B,{x:0,y:0},{x:P.x+oa,y:P.y+oa},M.data)}for(const S in n){const M=n[S],P=A[S].paddedRect,U=P.x+oa,K=P.y+oa,re=M.data.width,ae=M.data.height;Oa.copy(M.data,B,{x:0,y:0},{x:U,y:K},M.data),Oa.copy(M.data,B,{x:0,y:ae-1},{x:U,y:K-1},{width:re,height:1}),Oa.copy(M.data,B,{x:0,y:0},{x:U,y:K+ae},{width:re,height:1}),Oa.copy(M.data,B,{x:re-1,y:0},{x:U-1,y:K},{width:1,height:ae}),Oa.copy(M.data,B,{x:0,y:0},{x:U+re,y:K},{width:1,height:ae})}this.image=B,this.iconPositions=o,this.patternPositions=A}addImages(t,n,o){for(const A in t){const p=t[A],m={x:0,y:0,w:p.data.width+2*oa,h:p.data.height+2*oa};o.push(m),n[A]=new Af(m,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(A)}}patchUpdatedImages(t,n){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const o in t.updatedImages)this.patchUpdatedImage(this.iconPositions[o],t.getImage(o),n),this.patchUpdatedImage(this.patternPositions[o],t.getImage(o),n)}patchUpdatedImage(t,n,o){if(!t||!n||t.version===n.version)return;t.version=n.version;const[A,p]=t.tl;o.update(n.data,void 0,{x:A,y:p})}}var Kl;Nt("ImagePosition",Af),Nt("ImageAtlas",em),I.ah=void 0,(Kl=I.ah||(I.ah={}))[Kl.none=0]="none",Kl[Kl.horizontal=1]="horizontal",Kl[Kl.vertical=2]="vertical",Kl[Kl.horizontalOnly=3]="horizontalOnly";const zh=-17;class Gh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,n){const o=new Gh;return o.scale=t||1,o.fontStack=n,o}static forImage(t){const n=new Gh;return n.imageName=t,n}}class Hu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,n){const o=new Hu;for(let A=0;A<t.sections.length;A++){const p=t.sections[A];p.image?o.addImageSection(p):o.addTextSection(p,n)}return o}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let n="";for(let o=0;o<t.length;o++){const A=t.charCodeAt(o+1)||null,p=t.charCodeAt(o-1)||null;n+=A&&ql(A)&&!Fh[t[o+1]]||p&&ql(p)&&!Fh[t[o-1]]||!Fh[t[o]]?t[o]:Fh[t[o]]}return n}(this.text)}trim(){let t=0;for(let o=0;o<this.text.length&&OA[this.text.charCodeAt(o)];o++)t++;let n=this.text.length;for(let o=this.text.length-1;o>=0&&o>=t&&OA[this.text.charCodeAt(o)];o--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}substring(t,n){const o=new Hu;return o.text=this.text.substring(t,n),o.sectionIndex=this.sectionIndex.slice(t,n),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,n)=>Math.max(t,this.sections[n].scale),0)}addTextSection(t,n){this.text+=t.text,this.sections.push(Gh.forText(t.scale,t.fontStack||n));const o=this.sections.length-1;for(let A=0;A<t.text.length;++A)this.sectionIndex.push(o)}addImageSection(t){const n=t.image?t.image.name:"";if(n.length===0)return void Et("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCharCode(o),this.sections.push(Gh.forImage(n)),this.sectionIndex.push(this.sections.length-1)):Et("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function UA(r,t,n,o,A,p,m,x,B,S,M,P,U,K,re){const ae=Hu.fromFeature(r,A);let me;P===I.ah.vertical&&ae.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:Ye}=tr;if(we&&ae.sections.length===1){me=[];const et=we(ae.toString(),df(ae,S,p,t,o,K));for(const xt of et){const jt=new Hu;jt.text=xt,jt.sections=ae.sections;for(let pi=0;pi<xt.length;pi++)jt.sectionIndex.push(0);me.push(jt)}}else if(Ye){me=[];const et=Ye(ae.text,ae.sectionIndex,df(ae,S,p,t,o,K));for(const xt of et){const jt=new Hu;jt.text=xt[0],jt.sectionIndex=xt[1],jt.sections=ae.sections,me.push(jt)}}else me=function(et,xt){const jt=[],pi=et.text;let qt=0;for(const Lt of xt)jt.push(et.substring(qt,Lt)),qt=Lt;return qt<pi.length&&jt.push(et.substring(qt,pi.length)),jt}(ae,df(ae,S,p,t,o,K));const Le=[],qe={positionedLines:Le,text:ae.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:P,iconsInText:!1,verticalizable:!1};return function(et,xt,jt,pi,qt,Lt,oi,Wt,Yt,lt,ci,ai){let vi=0,pr=zh,ur=0,ln=0;const As=Wt==="right"?1:Wt==="left"?0:.5;let Cn=0;for(const Hr of qt){Hr.trim();const un=Hr.getMaxScale(),Fn=(un-1)*an,Bn={positionedGlyphs:[],lineOffset:0};et.positionedLines[Cn]=Bn;const $n=Bn.positionedGlyphs;let En=0;if(!Hr.length()){pr+=Lt,++Cn;continue}for(let la=0;la<Hr.length();la++){const $i=Hr.getSection(la),vr=Hr.getSectionIndex(la),xr=Hr.getCharCode(la);let Ea=0,Nr=null,Ku=null,po=null,mo=an;const ds=!(Yt===I.ah.horizontal||!ci&&!aa(xr)||ci&&(OA[xr]||(cn=xr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(cn)))));if($i.imageName){const Ha=pi[$i.imageName];if(!Ha)continue;po=$i.imageName,et.iconsInText=et.iconsInText||!0,Ku=Ha.paddedRect;const fn=Ha.displaySize;$i.scale=$i.scale*an/ai,Nr={width:fn[0],height:fn[1],left:oa,top:-Wp,advance:ds?fn[1]:fn[0]},Ea=Fn+(an-fn[1]*$i.scale),mo=Nr.advance;const sl=ds?fn[0]*$i.scale-an*un:fn[1]*$i.scale-an*un;sl>0&&sl>En&&(En=sl)}else{const Ha=jt[$i.fontStack],fn=Ha&&Ha[xr];if(fn&&fn.rect)Ku=fn.rect,Nr=fn.metrics;else{const sl=xt[$i.fontStack],Hh=sl&&sl[xr];if(!Hh)continue;Nr=Hh.metrics}Ea=(un-$i.scale)*an}ds?(et.verticalizable=!0,$n.push({glyph:xr,imageName:po,x:vi,y:pr+Ea,vertical:ds,scale:$i.scale,fontStack:$i.fontStack,sectionIndex:vr,metrics:Nr,rect:Ku}),vi+=mo*$i.scale+lt):($n.push({glyph:xr,imageName:po,x:vi,y:pr+Ea,vertical:ds,scale:$i.scale,fontStack:$i.fontStack,sectionIndex:vr,metrics:Nr,rect:Ku}),vi+=Nr.advance*$i.scale+lt)}$n.length!==0&&(ur=Math.max(vi-lt,ur),R1($n,0,$n.length-1,As,En)),vi=0;const qa=Lt*un+En;Bn.lineOffset=Math.max(En,Fn),pr+=qa,ln=Math.max(qa,ln),++Cn}var cn;const Jn=pr-zh,{horizontalAlign:Yn,verticalAlign:Kn}=ff(oi);(function(Hr,un,Fn,Bn,$n,En,qa,la,$i){const vr=(un-Fn)*$n;let xr=0;xr=En!==qa?-la*Bn-zh:(-Bn*$i+.5)*qa;for(const Ea of Hr)for(const Nr of Ea.positionedGlyphs)Nr.x+=vr,Nr.y+=xr})(et.positionedLines,As,Yn,Kn,ur,ln,Lt,Jn,qt.length),et.top+=-Kn*Jn,et.bottom=et.top+Jn,et.left+=-Yn*ur,et.right=et.left+ur}(qe,t,n,o,me,m,x,B,P,S,U,re),!function(et){for(const xt of et)if(xt.positionedGlyphs.length!==0)return!1;return!0}(Le)&&qe}const OA={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},M1={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},T1={40:!0};function tm(r,t,n,o,A,p){if(t.imageName){const m=o[t.imageName];return m?m.displaySize[0]*t.scale*an/p+A:0}{const m=n[t.fontStack],x=m&&m[r];return x?x.metrics.advance*t.scale+A:0}}function im(r,t,n,o){const A=Math.pow(r-t,2);return o?r<t?A/2:2*A:A+Math.abs(n)*n}function P1(r,t,n){let o=0;return r===10&&(o-=1e4),n&&(o+=150),r!==40&&r!==65288||(o+=50),t!==41&&t!==65289||(o+=50),o}function rm(r,t,n,o,A,p){let m=null,x=im(t,n,A,p);for(const B of o){const S=im(t-B.x,n,A,p)+B.badness;S<=x&&(m=B,x=S)}return{index:r,x:t,priorBreak:m,badness:x}}function nm(r){return r?nm(r.priorBreak).concat(r.index):[]}function df(r,t,n,o,A,p){if(!r)return[];const m=[],x=function(P,U,K,re,ae,me){let we=0;for(let Ye=0;Ye<P.length();Ye++){const Le=P.getSection(Ye);we+=tm(P.getCharCode(Ye),Le,re,ae,U,me)}return we/Math.max(1,Math.ceil(we/K))}(r,t,n,o,A,p),B=r.text.indexOf("")>=0;let S=0;for(let P=0;P<r.length();P++){const U=r.getSection(P),K=r.getCharCode(P);if(OA[K]||(S+=tm(K,U,o,A,t,p)),P<r.length()-1){const re=!((M=K)<11904)&&(!!_i["CJK Compatibility Forms"](M)||!!_i["CJK Compatibility"](M)||!!_i["CJK Strokes"](M)||!!_i["CJK Symbols and Punctuation"](M)||!!_i["Enclosed CJK Letters and Months"](M)||!!_i["Halfwidth and Fullwidth Forms"](M)||!!_i["Ideographic Description Characters"](M)||!!_i["Vertical Forms"](M)||Ca.test(String.fromCodePoint(M)));(M1[K]||re||U.imageName||P!==r.length()-2&&T1[r.getCharCode(P+1)])&&m.push(rm(P+1,S,x,m,P1(K,r.getCharCode(P+1),re&&B),!1))}}var M;return nm(rm(r.length(),S,x,m,0,!0))}function ff(r){let t=.5,n=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function R1(r,t,n,o,A){if(!o&&!A)return;const p=r[n],m=(r[n].x+p.metrics.advance*p.scale)*o;for(let x=t;x<=n;x++)r[x].x-=m,r[x].y+=A}function L1(r,t,n){const{horizontalAlign:o,verticalAlign:A}=ff(n),p=t[0]-r.displaySize[0]*o,m=t[1]-r.displaySize[1]*A;return{image:r,top:m,bottom:m+r.displaySize[1],left:p,right:p+r.displaySize[0]}}function am(r){var t,n;let o=r.left,A=r.top,p=r.right-o,m=r.bottom-A;const x=(t=r.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",B=(n=r.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",S=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(B==="proportional"){if(x==="stretchOnly"&&p/m<S||x==="proportional"){const M=Math.ceil(m*S);o*=M/p,p=M}}else if(x==="proportional"&&B==="stretchOnly"&&S!==0&&p/m>S){const M=Math.ceil(p/S);A*=M/m,m=M}return{x1:o,y1:A,x2:o+p,y2:A+m}}function sm(r,t,n,o,A,p){const m=r.image;let x;if(m.content){const me=m.content,we=m.pixelRatio||1;x=[me[0]/we,me[1]/we,m.displaySize[0]-me[2]/we,m.displaySize[1]-me[3]/we]}const B=t.left*p,S=t.right*p;let M,P,U,K;n==="width"||n==="both"?(K=A[0]+B-o[3],P=A[0]+S+o[1]):(K=A[0]+(B+S-m.displaySize[0])/2,P=K+m.displaySize[0]);const re=t.top*p,ae=t.bottom*p;return n==="height"||n==="both"?(M=A[1]+re-o[0],U=A[1]+ae+o[2]):(M=A[1]+(re+ae-m.displaySize[1])/2,U=M+m.displaySize[1]),{image:m,top:M,right:P,bottom:U,left:K,collisionPadding:x}}const Nh=255,go=128,$l=Nh*go;function om(r,t){const{expression:n}=t;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Ki(r+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:A}=n;let p=0;for(;p<o.length&&o[p]<=r;)p++;p=Math.max(0,p-1);let m=p;for(;m<o.length&&o[m]<r+1;)m++;m=Math.min(o.length-1,m);const x=o[p],B=o[m];return n.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:B,interpolationType:A}:{kind:"camera",minZoom:x,maxZoom:B,minSize:n.evaluate(new Ki(x)),maxSize:n.evaluate(new Ki(B)),interpolationType:A}}}function gf(r,t,n){let o="never";const A=r.get(t);return A?o=A:r.get(n)&&(o="always"),o}const F1=Yl.VectorTileFeature.types,z1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function VA(r,t,n,o,A,p,m,x,B,S,M,P,U){const K=x?Math.min($l,Math.round(x[0])):0,re=x?Math.min($l,Math.round(x[1])):0;r.emplaceBack(t,n,Math.round(32*o),Math.round(32*A),p,m,(K<<1)+(B?1:0),re,16*S,16*M,256*P,256*U)}function pf(r,t,n){r.emplaceBack(t.x,t.y,n),r.emplaceBack(t.x,t.y,n),r.emplaceBack(t.x,t.y,n),r.emplaceBack(t.x,t.y,n)}function G1(r){for(const t of r.sections)if(Yc(t.text))return!0;return!1}class mf{constructor(t){this.layoutVertexArray=new Oe,this.indexArray=new he,this.programConfigurations=t,this.segments=new Me,this.dynamicLayoutVertexArray=new Te,this.opacityVertexArray=new Ke,this.hasVisibleVertices=!1,this.placedSymbolArray=new _}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,n,o,A){this.isEmpty()||(o&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,g1.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,p1.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,z1,!0),this.opacityVertexBuffer.itemSize=1),(o||A)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Nt("SymbolBuffers",mf);class yf{constructor(t,n,o){this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new o,this.segments=new Me,this.collisionVertexArray=new N}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,m1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Nt("CollisionBuffers",yf);class ju{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(m=>m.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$d([]),this.placementViewportMatrix=$d([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=om(this.zoom,n["text-size"]),this.iconSizeData=om(this.zoom,n["icon-size"]);const o=this.layers[0].layout,A=o.get("symbol-sort-key"),p=o.get("symbol-z-order");this.canOverlap=gf(o,"text-overlap","text-allow-overlap")!=="never"||gf(o,"icon-overlap","icon-allow-overlap")!=="never"||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&!A.isConstant(),this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,o.get("symbol-placement")==="point"&&(this.writingModes=o.get("text-writing-mode").map(m=>I.ah[m])),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=t.sourceID}createArrays(){this.text=new mf(new mi(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new mf(new mi(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new F,this.lineVertexArray=new Z,this.symbolInstances=new T,this.textAnchorOffsets=new ne}calculateGlyphDependencies(t,n,o,A,p){for(let m=0;m<t.length;m++)if(n[t.charCodeAt(m)]=!0,(o||A)&&p){const x=Fh[t.charAt(m)];x&&(n[x.charCodeAt(0)]=!0)}}populate(t,n,o){const A=this.layers[0],p=A.layout,m=p.get("text-font"),x=p.get("text-field"),B=p.get("icon-image"),S=(x.value.kind!=="constant"||x.value.value instanceof Dn&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),M=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,P=p.get("symbol-sort-key");if(this.features=[],!S&&!M)return;const U=n.iconDependencies,K=n.glyphDependencies,re=n.availableImages,ae=new Ki(this.zoom);for(const{feature:me,id:we,index:Ye,sourceLayerIndex:Le}of t){const qe=A._featureFilter.needGeometry,et=nl(me,qe);if(!A._featureFilter.filter(ae,et,o))continue;let xt,jt;if(qe||(et.geometry=Na(me)),S){const qt=A.getValueAndResolveTokens("text-field",et,o,re),Lt=Dn.factory(qt),oi=this.hasRTLText=this.hasRTLText||G1(Lt);(!oi||tr.getRTLTextPluginStatus()==="unavailable"||oi&&tr.isParsed())&&(xt=_1(Lt,A,et))}if(M){const qt=A.getValueAndResolveTokens("icon-image",et,o,re);jt=qt instanceof In?qt:In.fromString(qt)}if(!xt&&!jt)continue;const pi=this.sortFeaturesByKey?P.evaluate(et,{},o):void 0;if(this.features.push({id:we,text:xt,icon:jt,index:Ye,sourceLayerIndex:Le,geometry:et.geometry,properties:me.properties,type:F1[me.type],sortKey:pi}),jt&&(U[jt.name]=!0),xt){const qt=m.evaluate(et,{},o).join(","),Lt=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(I.ah.vertical)>=0;for(const oi of xt.sections)if(oi.image)U[oi.image.name]=!0;else{const Wt=Ol(xt.toString()),Yt=oi.fontStack||qt,lt=K[Yt]=K[Yt]||{};this.calculateGlyphDependencies(oi.text,lt,Lt,this.allowVerticalPlacement,Wt)}}}p.get("symbol-placement")==="line"&&(this.features=function(me){const we={},Ye={},Le=[];let qe=0;function et(qt){Le.push(me[qt]),qe++}function xt(qt,Lt,oi){const Wt=Ye[qt];return delete Ye[qt],Ye[Lt]=Wt,Le[Wt].geometry[0].pop(),Le[Wt].geometry[0]=Le[Wt].geometry[0].concat(oi[0]),Wt}function jt(qt,Lt,oi){const Wt=we[Lt];return delete we[Lt],we[qt]=Wt,Le[Wt].geometry[0].shift(),Le[Wt].geometry[0]=oi[0].concat(Le[Wt].geometry[0]),Wt}function pi(qt,Lt,oi){const Wt=oi?Lt[0][Lt[0].length-1]:Lt[0][0];return`${qt}:${Wt.x}:${Wt.y}`}for(let qt=0;qt<me.length;qt++){const Lt=me[qt],oi=Lt.geometry,Wt=Lt.text?Lt.text.toString():null;if(!Wt){et(qt);continue}const Yt=pi(Wt,oi),lt=pi(Wt,oi,!0);if(Yt in Ye&&lt in we&&Ye[Yt]!==we[lt]){const ci=jt(Yt,lt,oi),ai=xt(Yt,lt,Le[ci].geometry);delete we[Yt],delete Ye[lt],Ye[pi(Wt,Le[ai].geometry,!0)]=ai,Le[ci].geometry=null}else Yt in Ye?xt(Yt,lt,oi):lt in we?jt(Yt,lt,oi):(et(qt),we[Yt]=qe-1,Ye[lt]=qe-1)}return Le.filter(qt=>qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,we)=>me.sortKey-we.sortKey)}update(t,n,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,n,this.layers,o),this.icon.programConfigurations.updatePaintArrays(t,n,this.layers,o))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,n){const o=this.lineVertexArray.length;if(t.segment!==void 0){let A=t.dist(n[t.segment+1]),p=t.dist(n[t.segment]);const m={};for(let x=t.segment+1;x<n.length;x++)m[x]={x:n[x].x,y:n[x].y,tileUnitDistanceFromAnchor:A},x<n.length-1&&(A+=n[x+1].dist(n[x]));for(let x=t.segment||0;x>=0;x--)m[x]={x:n[x].x,y:n[x].y,tileUnitDistanceFromAnchor:p},x>0&&(p+=n[x-1].dist(n[x]));for(let x=0;x<n.length;x++){const B=m[x];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(t,n,o,A,p,m,x,B,S,M,P,U){const K=t.indexArray,re=t.layoutVertexArray,ae=t.segments.prepareSegment(4*n.length,re,K,this.canOverlap?m.sortKey:void 0),me=this.glyphOffsetArray.length,we=ae.vertexLength,Ye=this.allowVerticalPlacement&&x===I.ah.vertical?Math.PI/2:0,Le=m.text&&m.text.sections;for(let qe=0;qe<n.length;qe++){const{tl:et,tr:xt,bl:jt,br:pi,tex:qt,pixelOffsetTL:Lt,pixelOffsetBR:oi,minFontScaleX:Wt,minFontScaleY:Yt,glyphOffset:lt,isSDF:ci,sectionIndex:ai}=n[qe],vi=ae.vertexLength,pr=lt[1];VA(re,B.x,B.y,et.x,pr+et.y,qt.x,qt.y,o,ci,Lt.x,Lt.y,Wt,Yt),VA(re,B.x,B.y,xt.x,pr+xt.y,qt.x+qt.w,qt.y,o,ci,oi.x,Lt.y,Wt,Yt),VA(re,B.x,B.y,jt.x,pr+jt.y,qt.x,qt.y+qt.h,o,ci,Lt.x,oi.y,Wt,Yt),VA(re,B.x,B.y,pi.x,pr+pi.y,qt.x+qt.w,qt.y+qt.h,o,ci,oi.x,oi.y,Wt,Yt),pf(t.dynamicLayoutVertexArray,B,Ye),K.emplaceBack(vi,vi+1,vi+2),K.emplaceBack(vi+1,vi+2,vi+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),qe!==n.length-1&&ai===n[qe+1].sectionIndex||t.programConfigurations.populatePaintArrays(re.length,m,m.index,{},U,Le&&Le[ai])}t.placedSymbolArray.emplaceBack(B.x,B.y,me,this.glyphOffsetArray.length-me,we,S,M,B.segment,o?o[0]:0,o?o[1]:0,A[0],A[1],x,0,!1,0,P)}_addCollisionDebugVertex(t,n,o,A,p,m){return n.emplaceBack(0,0),t.emplaceBack(o.x,o.y,A,p,Math.round(m.x),Math.round(m.y))}addCollisionDebugVertices(t,n,o,A,p,m,x){const B=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),S=B.vertexLength,M=p.layoutVertexArray,P=p.collisionVertexArray,U=x.anchorX,K=x.anchorY;this._addCollisionDebugVertex(M,P,m,U,K,new H(t,n)),this._addCollisionDebugVertex(M,P,m,U,K,new H(o,n)),this._addCollisionDebugVertex(M,P,m,U,K,new H(o,A)),this._addCollisionDebugVertex(M,P,m,U,K,new H(t,A)),B.vertexLength+=4;const re=p.indexArray;re.emplaceBack(S,S+1),re.emplaceBack(S+1,S+2),re.emplaceBack(S+2,S+3),re.emplaceBack(S+3,S),B.primitiveLength+=4}addDebugCollisionBoxes(t,n,o,A){for(let p=t;p<n;p++){const m=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,A?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,o)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new yf(te,qp.members,le),this.iconCollisionBox=new yf(te,qp.members,le);for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(t,n,o,A,p,m,x,B,S){const M={};for(let P=n;P<o;P++){const U=t.get(P);M.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},M.textFeatureIndex=U.featureIndex;break}for(let P=A;P<p;P++){const U=t.get(P);M.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},M.verticalTextFeatureIndex=U.featureIndex;break}for(let P=m;P<x;P++){const U=t.get(P);M.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},M.iconFeatureIndex=U.featureIndex;break}for(let P=B;P<S;P++){const U=t.get(P);M.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},M.verticalIconFeatureIndex=U.featureIndex;break}return M}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,n){const o=t.placedSymbolArray.get(n),A=o.vertexStartIndex+4*o.numGlyphs;for(let p=o.vertexStartIndex;p<A;p+=4)t.indexArray.emplaceBack(p,p+1,p+2),t.indexArray.emplaceBack(p+1,p+2,p+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(t),o=Math.cos(t),A=[],p=[],m=[];for(let x=0;x<this.symbolInstances.length;++x){m.push(x);const B=this.symbolInstances.get(x);A.push(0|Math.round(n*B.anchorX+o*B.anchorY)),p.push(B.featureIndex)}return m.sort((x,B)=>A[x]-A[B]||p[B]-p[x]),m}addToSortKeyRanges(t,n){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===n?o.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const o=this.symbolInstances.get(n);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((A,p,m)=>{A>=0&&m.indexOf(A)===p&&this.addIndicesForPlacedSymbol(this.text,A)}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let lm,cm;Nt("SymbolBucket",ju,{omit:["layers","collisionBoxArray","features","compareText"]}),ju.MAX_GLYPHS=65535,ju.addDynamicAttributes=pf;var _f={get paint(){return cm=cm||new bn({"icon-opacity":new Ai(ve.paint_symbol["icon-opacity"]),"icon-color":new Ai(ve.paint_symbol["icon-color"]),"icon-halo-color":new Ai(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ai(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ai(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new ii(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new ii(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ai(ve.paint_symbol["text-opacity"]),"text-color":new Ai(ve.paint_symbol["text-color"],{runtimeType:lr,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new Ai(ve.paint_symbol["text-halo-color"]),"text-halo-width":new Ai(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Ai(ve.paint_symbol["text-halo-blur"]),"text-translate":new ii(ve.paint_symbol["text-translate"]),"text-translate-anchor":new ii(ve.paint_symbol["text-translate-anchor"])})},get layout(){return lm=lm||new bn({"symbol-placement":new ii(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new ii(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ii(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ai(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ii(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ii(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ii(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ii(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new ii(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ii(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ai(ve.layout_symbol["icon-size"]),"icon-text-fit":new ii(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ii(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ai(ve.layout_symbol["icon-image"]),"icon-rotate":new Ai(ve.layout_symbol["icon-rotate"]),"icon-padding":new Ai(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new ii(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Ai(ve.layout_symbol["icon-offset"]),"icon-anchor":new Ai(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ii(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ii(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ii(ve.layout_symbol["text-rotation-alignment"]),"text-field":new Ai(ve.layout_symbol["text-field"]),"text-font":new Ai(ve.layout_symbol["text-font"]),"text-size":new Ai(ve.layout_symbol["text-size"]),"text-max-width":new Ai(ve.layout_symbol["text-max-width"]),"text-line-height":new ii(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Ai(ve.layout_symbol["text-letter-spacing"]),"text-justify":new Ai(ve.layout_symbol["text-justify"]),"text-radial-offset":new Ai(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ii(ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ai(ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ai(ve.layout_symbol["text-anchor"]),"text-max-angle":new ii(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new ii(ve.layout_symbol["text-writing-mode"]),"text-rotate":new Ai(ve.layout_symbol["text-rotate"]),"text-padding":new ii(ve.layout_symbol["text-padding"]),"text-keep-upright":new ii(ve.layout_symbol["text-keep-upright"]),"text-transform":new Ai(ve.layout_symbol["text-transform"]),"text-offset":new Ai(ve.layout_symbol["text-offset"]),"text-allow-overlap":new ii(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new ii(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new ii(ve.layout_symbol["text-ignore-placement"]),"text-optional":new ii(ve.layout_symbol["text-optional"])})}};class um{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Lr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(t.formattedSection))return n.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Nt("FormatSectionOverride",um,{omit:["defaultValue"]});class qA extends e{constructor(t){super(t,_f)}recalculate(t,n){if(super.recalculate(t,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const o=this.layout.get("text-writing-mode");if(o){const A=[];for(const p of o)A.indexOf(p)<0&&A.push(p);this.layout._values["text-writing-mode"]=A}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,n,o,A){const p=this.layout.get(t).evaluate(n,{},o,A),m=this._unevaluatedLayout._values[t];return m.isDataDriven()||io(m.value)||!p?p:function(x,B){return B.replace(/{([^{}]+)}/g,(S,M)=>x&&M in x?String(x[M]):"")}(n.properties,p)}createBucket(t){return new ju(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of _f.paint.overridableProperties){if(!qA.hasPaintOverride(this.layout,t))continue;const n=this.paint.get(t),o=new um(n),A=new Go(o,n.property.specification);let p=null;p=n.value.kind==="constant"||n.value.kind==="source"?new Uo("source",A):new ro("composite",A,n.value.zoomStops),this.paint._values[t]=new on(n.property,p,n.parameters)}}_handleOverridablePaintPropertyUpdate(t,n,o){return!(!this.layout||n.isDataDriven()||o.isDataDriven())&&qA.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,n){const o=t.get("text-field"),A=_f.paint.properties[n];let p=!1;const m=x=>{for(const B of x)if(A.overrides&&A.overrides.hasOverride(B))return void(p=!0)};if(o.value.kind==="constant"&&o.value.value instanceof Dn)m(o.value.value.sections);else if(o.value.kind==="source"){const x=S=>{p||(S instanceof Xn&&Vr(S.value)===ya?m(S.value.sections):S instanceof Sl?m(S.sections):S.eachChild(x))},B=o.value;B._styleExpression&&x(B._styleExpression.expression)}return p}}let hm;var N1={get paint(){return hm=hm||new bn({"background-color":new ii(ve.paint_background["background-color"]),"background-pattern":new $c(ve.paint_background["background-pattern"]),"background-opacity":new ii(ve.paint_background["background-opacity"])})}};class U1 extends e{constructor(t){super(t,N1)}}let Am;var O1={get paint(){return Am=Am||new bn({"raster-opacity":new ii(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new ii(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ii(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ii(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new ii(ve.paint_raster["raster-saturation"]),"raster-contrast":new ii(ve.paint_raster["raster-contrast"]),"raster-resampling":new ii(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new ii(ve.paint_raster["raster-fade-duration"])})}};class V1 extends e{constructor(t){super(t,O1)}}class q1 extends e{constructor(t){super(t,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class H1{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const If=63710088e-1;class Zl{constructor(t,n){if(isNaN(t)||isNaN(n))throw new Error(`Invalid LngLat object: (${t}, ${n})`);if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zl(Ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const n=Math.PI/180,o=this.lat*n,A=t.lat*n,p=Math.sin(o)*Math.sin(A)+Math.cos(o)*Math.cos(A)*Math.cos((t.lng-this.lng)*n);return If*Math.acos(Math.min(p,1))}static convert(t){if(t instanceof Zl)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Zl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Zl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const dm=2*Math.PI*If;function fm(r){return dm*Math.cos(r*Math.PI/180)}function gm(r){return(180+r)/360}function pm(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function mm(r,t){return r/fm(t)}function vf(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class Uh{constructor(t,n,o=0){this.x=+t,this.y=+n,this.z=+o}static fromLngLat(t,n=0){const o=Zl.convert(t);return new Uh(gm(o.lng),pm(o.lat),mm(n,o.lat))}toLngLat(){return new Zl(360*this.x-180,vf(this.y))}toAltitude(){return this.z*fm(vf(this.y))}meterInMercatorCoordinateUnits(){return 1/dm*(t=vf(this.y),1/Math.cos(t*Math.PI/180));var t}}function ym(r,t,n){var o=2*Math.PI*6378137/256/Math.pow(2,n);return[r*o-2*Math.PI*6378137/2,t*o-2*Math.PI*6378137/2]}class bf{constructor(t,n,o){if(!function(A,p,m){return!(A<0||A>25||m<0||m>=Math.pow(2,A)||p<0||p>=Math.pow(2,A))}(t,n,o))throw new Error(`x=${n}, y=${o}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=n,this.y=o,this.key=Oh(0,t,t,n,o)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,n,o){const A=(m=this.y,x=this.z,B=ym(256*(p=this.x),256*(m=Math.pow(2,x)-m-1),x),S=ym(256*(p+1),256*(m+1),x),B[0]+","+B[1]+","+S[0]+","+S[1]);var p,m,x,B,S;const M=function(P,U,K){let re,ae="";for(let me=P;me>0;me--)re=1<<me-1,ae+=(U&re?1:0)+(K&re?2:0);return ae}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,A)}isChildOf(t){const n=this.z-t.z;return n>0&&t.x===this.x>>n&&t.y===this.y>>n}getTilePoint(t){const n=Math.pow(2,this.z);return new H((t.x*n-this.x)*Gr,(t.y*n-this.y)*Gr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _m{constructor(t,n){this.wrap=t,this.canonical=n,this.key=Oh(t,n.z,n.z,n.x,n.y)}}class Va{constructor(t,n,o,A,p){if(t<o)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${o}`);this.overscaledZ=t,this.wrap=n,this.canonical=new bf(o,+A,+p),this.key=Oh(n,t,o,A,p)}clone(){return new Va(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?new Va(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Va(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(t,n){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?Oh(this.wrap*+n,t,this.canonical.z,this.canonical.x,this.canonical.y):Oh(this.wrap*+n,t,t,this.canonical.x>>o,this.canonical.y>>o)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const n=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>n&&t.canonical.y===this.canonical.y>>n}children(t){if(this.overscaledZ>=t)return[new Va(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,o=2*this.canonical.x,A=2*this.canonical.y;return[new Va(n,this.wrap,n,o,A),new Va(n,this.wrap,n,o+1,A),new Va(n,this.wrap,n,o,A+1),new Va(n,this.wrap,n,o+1,A+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Va(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Va(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _m(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Uh(t.x-this.wrap,t.y))}}function Oh(r,t,n,o,A){(r*=2)<0&&(r=-1*r-1);const p=1<<n;return(p*p*r+p*A+o).toString(36)+n.toString(36)+t.toString(36)}Nt("CanonicalTileID",bf),Nt("OverscaledTileID",Va,{omit:["posMatrix"]});class Im{constructor(t,n,o,A=1,p=1,m=1,x=0){if(this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(o&&!["mapbox","terrarium","custom"].includes(o))return void Et(`"${o}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;const B=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),o){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=A,this.greenFactor=p,this.blueFactor=m,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let S=0;S<B;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(B,S)]=this.data[this._idx(B-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,B)]=this.data[this._idx(S,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<B;S++)for(let M=0;M<B;M++){const P=this.get(S,M);P>this.max&&(this.max=P),P<this.min&&(this.min=P)}}get(t,n){const o=new Uint8Array(this.data.buffer),A=4*this._idx(t,n);return this.unpack(o[A],o[A+1],o[A+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,n){if(t<-1||t>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(t+1)}unpack(t,n,o){return t*this.redFactor+n*this.greenFactor+o*this.blueFactor-this.baseShift}getPixels(){return new Oa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,n,o){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let A=n*this.dim,p=n*this.dim+this.dim,m=o*this.dim,x=o*this.dim+this.dim;switch(n){case-1:A=p-1;break;case 1:p=A+1}switch(o){case-1:m=x-1;break;case 1:x=m+1}const B=-n*this.dim,S=-o*this.dim;for(let M=m;M<x;M++)for(let P=A;P<p;P++)this.data[this._idx(P,M)]=t.data[this._idx(P+B,M+S)]}}Nt("DEMData",Im);class vm{constructor(t){this._stringToNumber={},this._numberToString=[];for(let n=0;n<t.length;n++){const o=t[n];this._stringToNumber[o]=n,this._numberToString[n]=o}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class bm{constructor(t,n,o,A,p){this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=o,t._y=A,this.properties=t.properties,this.id=p}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(t[n]=this[n]);return t}}class xm{constructor(t,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new uo(Gr,16,0),this.grid3D=new uo(Gr,16,0),this.featureIndexArray=new W,this.promoteId=n}insert(t,n,o,A,p,m){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,A,p);const B=m?this.grid3D:this.grid;for(let S=0;S<n.length;S++){const M=n[S],P=[1/0,1/0,-1/0,-1/0];for(let U=0;U<M.length;U++){const K=M[U];P[0]=Math.min(P[0],K.x),P[1]=Math.min(P[1],K.y),P[2]=Math.max(P[2],K.x),P[3]=Math.max(P[3],K.y)}P[0]<Gr&&P[1]<Gr&&P[2]>=0&&P[3]>=0&&B.insert(x,P[0],P[1],P[2],P[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Yl.VectorTile(new uf(this.rawTileData)).layers,this.sourceLayerCoder=new vm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,n,o,A){this.loadVTLayers();const p=t.params||{},m=Gr/t.tileSize/t.scale,x=so(p.filter),B=t.queryGeometry,S=t.queryPadding*m,M=Cm(B),P=this.grid.query(M.minX-S,M.minY-S,M.maxX+S,M.maxY+S),U=Cm(t.cameraQueryGeometry),K=this.grid3D.query(U.minX-S,U.minY-S,U.maxX+S,U.maxY+S,(me,we,Ye,Le)=>function(qe,et,xt,jt,pi){for(const Lt of qe)if(et<=Lt.x&&xt<=Lt.y&&jt>=Lt.x&&pi>=Lt.y)return!0;const qt=[new H(et,xt),new H(et,pi),new H(jt,pi),new H(jt,xt)];if(qe.length>2){for(const Lt of qt)if(Gu(qe,Lt))return!0}for(let Lt=0;Lt<qe.length-1;Lt++)if(Cv(qe[Lt],qe[Lt+1],qt))return!0;return!1}(t.cameraQueryGeometry,me-S,we-S,Ye+S,Le+S));for(const me of K)P.push(me);P.sort(j1);const re={};let ae;for(let me=0;me<P.length;me++){const we=P[me];if(we===ae)continue;ae=we;const Ye=this.featureIndexArray.get(we);let Le=null;this.loadMatchingFeature(re,Ye.bucketIndex,Ye.sourceLayerIndex,Ye.featureIndex,x,p.layers,p.availableImages,n,o,A,(qe,et,xt)=>(Le||(Le=Na(qe)),et.queryIntersectsFeature(B,qe,xt,Le,this.z,t.transform,m,t.pixelPosMatrix)))}return re}loadMatchingFeature(t,n,o,A,p,m,x,B,S,M,P){const U=this.bucketLayerIDs[n];if(m&&!function(me,we){for(let Ye=0;Ye<me.length;Ye++)if(we.indexOf(me[Ye])>=0)return!0;return!1}(m,U))return;const K=this.sourceLayerCoder.decode(o),re=this.vtLayers[K].feature(A);if(p.needGeometry){const me=nl(re,!0);if(!p.filter(new Ki(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!p.filter(new Ki(this.tileID.overscaledZ),re))return;const ae=this.getId(re,K);for(let me=0;me<U.length;me++){const we=U[me];if(m&&m.indexOf(we)<0)continue;const Ye=B[we];if(!Ye)continue;let Le={};ae&&M&&(Le=M.getState(Ye.sourceLayer||"_geojsonTileLayer",ae));const qe=zt({},S[we]);qe.paint=wm(qe.paint,Ye.paint,re,Le,x),qe.layout=wm(qe.layout,Ye.layout,re,Le,x);const et=!P||P(re,Ye,Le);if(!et)continue;const xt=new bm(re,this.z,this.x,this.y,ae);xt.layer=qe;let jt=t[we];jt===void 0&&(jt=t[we]=[]),jt.push({featureIndex:A,feature:xt,intersectionZ:et})}}lookupSymbolFeatures(t,n,o,A,p,m,x,B){const S={};this.loadVTLayers();const M=so(p);for(const P of t)this.loadMatchingFeature(S,o,A,P,M,m,x,B,n);return S}hasLayer(t){for(const n of this.bucketLayerIDs)for(const o of n)if(t===o)return!0;return!1}getId(t,n){let o=t.id;return this.promoteId&&(o=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof o=="boolean"&&(o=Number(o))),o}}function wm(r,t,n,o,A){return Bt(r,(p,m)=>{const x=t instanceof Ao?t.get(m):null;return x&&x.evaluate?x.evaluate(n,o,A):x})}function Cm(r){let t=1/0,n=1/0,o=-1/0,A=-1/0;for(const p of r)t=Math.min(t,p.x),n=Math.min(n,p.y),o=Math.max(o,p.x),A=Math.max(A,p.y);return{minX:t,minY:n,maxX:o,maxY:A}}function j1(r,t){return t-r}function Bm(r,t,n,o,A){const p=[];for(let m=0;m<r.length;m++){const x=r[m];let B;for(let S=0;S<x.length-1;S++){let M=x[S],P=x[S+1];M.x<t&&P.x<t||(M.x<t?M=new H(t,M.y+(t-M.x)/(P.x-M.x)*(P.y-M.y))._round():P.x<t&&(P=new H(t,M.y+(t-M.x)/(P.x-M.x)*(P.y-M.y))._round()),M.y<n&&P.y<n||(M.y<n?M=new H(M.x+(n-M.y)/(P.y-M.y)*(P.x-M.x),n)._round():P.y<n&&(P=new H(M.x+(n-M.y)/(P.y-M.y)*(P.x-M.x),n)._round()),M.x>=o&&P.x>=o||(M.x>=o?M=new H(o,M.y+(o-M.x)/(P.x-M.x)*(P.y-M.y))._round():P.x>=o&&(P=new H(o,M.y+(o-M.x)/(P.x-M.x)*(P.y-M.y))._round()),M.y>=A&&P.y>=A||(M.y>=A?M=new H(M.x+(A-M.y)/(P.y-M.y)*(P.x-M.x),A)._round():P.y>=A&&(P=new H(M.x+(A-M.y)/(P.y-M.y)*(P.x-M.x),A)._round()),B&&M.equals(B[B.length-1])||(B=[M],p.push(B)),B.push(P)))))}}return p}Nt("FeatureIndex",xm,{omit:["rawTileData","sourceLayerCoder"]});class Wl extends H{constructor(t,n,o,A){super(t,n),this.angle=o,A!==void 0&&(this.segment=A)}clone(){return new Wl(this.x,this.y,this.angle,this.segment)}}function Em(r,t,n,o,A){if(t.segment===void 0||n===0)return!0;let p=t,m=t.segment+1,x=0;for(;x>-n/2;){if(m--,m<0)return!1;x-=r[m].dist(p),p=r[m]}x+=r[m].dist(r[m+1]),m++;const B=[];let S=0;for(;x<n/2;){const M=r[m],P=r[m+1];if(!P)return!1;let U=r[m-1].angleTo(M)-M.angleTo(P);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:x,angleDelta:U}),S+=U;x-B[0].distance>o;)S-=B.shift().angleDelta;if(S>A)return!1;m++,x+=M.dist(P)}return!0}function Qm(r){let t=0;for(let n=0;n<r.length-1;n++)t+=r[n].dist(r[n+1]);return t}function Sm(r,t,n){return r?.6*t*n:0}function Dm(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function J1(r,t,n,o,A,p){const m=Sm(n,A,p),x=Dm(n,o)*p;let B=0;const S=Qm(r)/2;for(let M=0;M<r.length-1;M++){const P=r[M],U=r[M+1],K=P.dist(U);if(B+K>S){const re=(S-B)/K,ae=zr.number(P.x,U.x,re),me=zr.number(P.y,U.y,re),we=new Wl(ae,me,U.angleTo(P),M);return we._round(),!m||Em(r,we,x,m,t)?we:void 0}B+=K}}function Y1(r,t,n,o,A,p,m,x,B){const S=Sm(o,p,m),M=Dm(o,A),P=M*m,U=r[0].x===0||r[0].x===B||r[0].y===0||r[0].y===B;return t-P<t/4&&(t=P+t/4),km(r,U?t/2*x%t:(M/2+2*p)*m*x%t,t,S,n,P,U,!1,B)}function km(r,t,n,o,A,p,m,x,B){const S=p/2,M=Qm(r);let P=0,U=t-n,K=[];for(let re=0;re<r.length-1;re++){const ae=r[re],me=r[re+1],we=ae.dist(me),Ye=me.angleTo(ae);for(;U+n<P+we;){U+=n;const Le=(U-P)/we,qe=zr.number(ae.x,me.x,Le),et=zr.number(ae.y,me.y,Le);if(qe>=0&&qe<B&&et>=0&&et<B&&U-S>=0&&U+S<=M){const xt=new Wl(qe,et,Ye,re);xt._round(),o&&!Em(r,xt,p,o,A)||K.push(xt)}}P+=we}return x||K.length||m||(K=km(r,P/2,n,o,A,p,m,!0,B)),K}Nt("Anchor",Wl);const Ju=oa;function Mm(r,t,n,o){const A=[],p=r.image,m=p.pixelRatio,x=p.paddedRect.w-2*Ju,B=p.paddedRect.h-2*Ju;let S={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom};const M=p.stretchX||[[0,x]],P=p.stretchY||[[0,B]],U=(lt,ci)=>lt+ci[1]-ci[0],K=M.reduce(U,0),re=P.reduce(U,0),ae=x-K,me=B-re;let we=0,Ye=K,Le=0,qe=re,et=0,xt=ae,jt=0,pi=me;if(p.content&&o){const lt=p.content,ci=lt[2]-lt[0],ai=lt[3]-lt[1];(p.textFitWidth||p.textFitHeight)&&(S=am(r)),we=HA(M,0,lt[0]),Le=HA(P,0,lt[1]),Ye=HA(M,lt[0],lt[2]),qe=HA(P,lt[1],lt[3]),et=lt[0]-we,jt=lt[1]-Le,xt=ci-Ye,pi=ai-qe}const qt=S.x1,Lt=S.y1,oi=S.x2-qt,Wt=S.y2-Lt,Yt=(lt,ci,ai,vi)=>{const pr=jA(lt.stretch-we,Ye,oi,qt),ur=JA(lt.fixed-et,xt,lt.stretch,K),ln=jA(ci.stretch-Le,qe,Wt,Lt),As=JA(ci.fixed-jt,pi,ci.stretch,re),Cn=jA(ai.stretch-we,Ye,oi,qt),cn=JA(ai.fixed-et,xt,ai.stretch,K),Jn=jA(vi.stretch-Le,qe,Wt,Lt),Yn=JA(vi.fixed-jt,pi,vi.stretch,re),Kn=new H(pr,ln),Hr=new H(Cn,ln),un=new H(Cn,Jn),Fn=new H(pr,Jn),Bn=new H(ur/m,As/m),$n=new H(cn/m,Yn/m),En=t*Math.PI/180;if(En){const $i=Math.sin(En),vr=Math.cos(En),xr=[vr,-$i,$i,vr];Kn._matMult(xr),Hr._matMult(xr),Fn._matMult(xr),un._matMult(xr)}const qa=lt.stretch+lt.fixed,la=ci.stretch+ci.fixed;return{tl:Kn,tr:Hr,bl:Fn,br:un,tex:{x:p.paddedRect.x+Ju+qa,y:p.paddedRect.y+Ju+la,w:ai.stretch+ai.fixed-qa,h:vi.stretch+vi.fixed-la},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bn,pixelOffsetBR:$n,minFontScaleX:xt/m/oi,minFontScaleY:pi/m/Wt,isSDF:n}};if(o&&(p.stretchX||p.stretchY)){const lt=Tm(M,ae,K),ci=Tm(P,me,re);for(let ai=0;ai<lt.length-1;ai++){const vi=lt[ai],pr=lt[ai+1];for(let ur=0;ur<ci.length-1;ur++)A.push(Yt(vi,ci[ur],pr,ci[ur+1]))}}else A.push(Yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:B+1}));return A}function HA(r,t,n){let o=0;for(const A of r)o+=Math.max(t,Math.min(n,A[1]))-Math.max(t,Math.min(n,A[0]));return o}function Tm(r,t,n){const o=[{fixed:-Ju,stretch:0}];for(const[A,p]of r){const m=o[o.length-1];o.push({fixed:A-m.stretch,stretch:m.stretch}),o.push({fixed:A-m.stretch,stretch:m.stretch+(p-A)})}return o.push({fixed:t+Ju,stretch:n}),o}function jA(r,t,n,o){return r/t*n+o}function JA(r,t,n,o){return r-t*n/o}class YA{constructor(t,n,o,A,p,m,x,B,S,M){var P;if(this.boxStartIndex=t.length,S){let U=m.top,K=m.bottom;const re=m.collisionPadding;re&&(U-=re[1],K+=re[3]);let ae=K-U;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{const U=!((P=m.image)===null||P===void 0)&&P.content&&(m.image.textFitWidth||m.image.textFitHeight)?am(m):{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom};U.y1=U.y1*x-B[0],U.y2=U.y2*x+B[2],U.x1=U.x1*x-B[3],U.x2=U.x2*x+B[1];const K=m.collisionPadding;if(K&&(U.x1-=K[0]*x,U.y1-=K[1]*x,U.x2+=K[2]*x,U.y2+=K[3]*x),M){const re=new H(U.x1,U.y1),ae=new H(U.x2,U.y1),me=new H(U.x1,U.y2),we=new H(U.x2,U.y2),Ye=M*Math.PI/180;re._rotate(Ye),ae._rotate(Ye),me._rotate(Ye),we._rotate(Ye),U.x1=Math.min(re.x,ae.x,me.x,we.x),U.x2=Math.max(re.x,ae.x,me.x,we.x),U.y1=Math.min(re.y,ae.y,me.y,we.y),U.y2=Math.max(re.y,ae.y,me.y,we.y)}t.emplaceBack(n.x,n.y,U.x1,U.y1,U.x2,U.y2,o,A,p)}this.boxEndIndex=t.length}}class K1{constructor(t=[],n=(o,A)=>o<A?-1:o>A?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:o}=this,A=n[t];for(;t>0;){const p=t-1>>1,m=n[p];if(o(A,m)>=0)break;n[t]=m,t=p}n[t]=A}_down(t){const{data:n,compare:o}=this,A=this.length>>1,p=n[t];for(;t<A;){let m=1+(t<<1);const x=m+1;if(x<this.length&&o(n[x],n[m])<0&&(m=x),o(n[m],p)>=0)break;n[t]=n[m],t=m}n[t]=p}}function $1(r,t=1,n=!1){let o=1/0,A=1/0,p=-1/0,m=-1/0;const x=r[0];for(let K=0;K<x.length;K++){const re=x[K];(!K||re.x<o)&&(o=re.x),(!K||re.y<A)&&(A=re.y),(!K||re.x>p)&&(p=re.x),(!K||re.y>m)&&(m=re.y)}const B=Math.min(p-o,m-A);let S=B/2;const M=new K1([],Z1);if(B===0)return new H(o,A);for(let K=o;K<p;K+=B)for(let re=A;re<m;re+=B)M.push(new Yu(K+S,re+S,S,r));let P=function(K){let re=0,ae=0,me=0;const we=K[0];for(let Ye=0,Le=we.length,qe=Le-1;Ye<Le;qe=Ye++){const et=we[Ye],xt=we[qe],jt=et.x*xt.y-xt.x*et.y;ae+=(et.x+xt.x)*jt,me+=(et.y+xt.y)*jt,re+=3*jt}return new Yu(ae/re,me/re,0,K)}(r),U=M.length;for(;M.length;){const K=M.pop();(K.d>P.d||!P.d)&&(P=K,n&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,U)),K.max-P.d<=t||(S=K.h/2,M.push(new Yu(K.p.x-S,K.p.y-S,S,r)),M.push(new Yu(K.p.x+S,K.p.y-S,S,r)),M.push(new Yu(K.p.x-S,K.p.y+S,S,r)),M.push(new Yu(K.p.x+S,K.p.y+S,S,r)),U+=4)}return n&&(console.log(`num probes: ${U}`),console.log(`best distance: ${P.d}`)),P.p}function Z1(r,t){return t.max-r.max}function Yu(r,t,n,o){this.p=new H(r,t),this.h=n,this.d=function(A,p){let m=!1,x=1/0;for(let B=0;B<p.length;B++){const S=p[B];for(let M=0,P=S.length,U=P-1;M<P;U=M++){const K=S[M],re=S[U];K.y>A.y!=re.y>A.y&&A.x<(re.x-K.x)*(A.y-K.y)/(re.y-K.y)+K.x&&(m=!m),x=Math.min(x,pp(A,K,re))}}return(m?1:-1)*Math.sqrt(x)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}var wn;I.aq=void 0,(wn=I.aq||(I.aq={}))[wn.center=1]="center",wn[wn.left=2]="left",wn[wn.right=3]="right",wn[wn.top=4]="top",wn[wn.bottom=5]="bottom",wn[wn["top-left"]=6]="top-left",wn[wn["top-right"]=7]="top-right",wn[wn["bottom-left"]=8]="bottom-left",wn[wn["bottom-right"]=9]="bottom-right";const Xl=7,xf=Number.POSITIVE_INFINITY;function Pm(r,t){return t[1]!==xf?function(n,o,A){let p=0,m=0;switch(o=Math.abs(o),A=Math.abs(A),n){case"top-right":case"top-left":case"top":m=A-Xl;break;case"bottom-right":case"bottom-left":case"bottom":m=-A+Xl}switch(n){case"top-right":case"bottom-right":case"right":p=-o;break;case"top-left":case"bottom-left":case"left":p=o}return[p,m]}(r,t[0],t[1]):function(n,o){let A=0,p=0;o<0&&(o=0);const m=o/Math.SQRT2;switch(n){case"top-right":case"top-left":p=m-Xl;break;case"bottom-right":case"bottom-left":p=-m+Xl;break;case"bottom":p=-o+Xl;break;case"top":p=o-Xl}switch(n){case"top-right":case"bottom-right":A=-m;break;case"top-left":case"bottom-left":A=m;break;case"left":A=o;break;case"right":A=-o}return[A,p]}(r,t[0])}function Rm(r,t,n){var o;const A=r.layout,p=(o=A.get("text-variable-anchor-offset"))===null||o===void 0?void 0:o.evaluate(t,{},n);if(p){const x=p.values,B=[];for(let S=0;S<x.length;S+=2){const M=B[S]=x[S],P=x[S+1].map(U=>U*an);M.startsWith("top")?P[1]-=Xl:M.startsWith("bottom")&&(P[1]+=Xl),B[S+1]=P}return new _n(B)}const m=A.get("text-variable-anchor");if(m){let x;x=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[A.get("text-radial-offset").evaluate(t,{},n)*an,xf]:A.get("text-offset").evaluate(t,{},n).map(S=>S*an);const B=[];for(const S of m)B.push(S,Pm(S,x));return new _n(B)}return null}function wf(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function W1(r,t,n,o,A,p,m,x,B,S,M){let P=p.textMaxSize.evaluate(t,{});P===void 0&&(P=m);const U=r.layers[0].layout,K=U.get("icon-offset").evaluate(t,{},M),re=Fm(n.horizontal),ae=m/24,me=r.tilePixelRatio*ae,we=r.tilePixelRatio*P/24,Ye=r.tilePixelRatio*x,Le=r.tilePixelRatio*U.get("symbol-spacing"),qe=U.get("text-padding")*r.tilePixelRatio,et=function(lt,ci,ai,vi=1){const pr=lt.get("icon-padding").evaluate(ci,{},ai),ur=pr&&pr.values;return[ur[0]*vi,ur[1]*vi,ur[2]*vi,ur[3]*vi]}(U,t,M,r.tilePixelRatio),xt=U.get("text-max-angle")/180*Math.PI,jt=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",pi=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",qt=U.get("symbol-placement"),Lt=Le/2,oi=U.get("icon-text-fit");let Wt;o&&oi!=="none"&&(r.allowVerticalPlacement&&n.vertical&&(Wt=sm(o,n.vertical,oi,U.get("icon-text-fit-padding"),K,ae)),re&&(o=sm(o,re,oi,U.get("icon-text-fit-padding"),K,ae)));const Yt=(lt,ci)=>{ci.x<0||ci.x>=Gr||ci.y<0||ci.y>=Gr||function(ai,vi,pr,ur,ln,As,Cn,cn,Jn,Yn,Kn,Hr,un,Fn,Bn,$n,En,qa,la,$i,vr,xr,Ea,Nr,Ku){const po=ai.addToLineVertexArray(vi,pr);let mo,ds,Ha,fn,sl=0,Hh=0,Um=0,Om=0,Mf=-1,Tf=-1;const ol={};let Vm=$e("");if(ai.allowVerticalPlacement&&ur.vertical){const zn=cn.layout.get("text-rotate").evaluate(vr,{},Nr)+90;Ha=new YA(Jn,vi,Yn,Kn,Hr,ur.vertical,un,Fn,Bn,zn),Cn&&(fn=new YA(Jn,vi,Yn,Kn,Hr,Cn,En,qa,Bn,zn))}if(ln){const zn=cn.layout.get("icon-rotate").evaluate(vr,{}),ja=cn.layout.get("icon-text-fit")!=="none",Wc=Mm(ln,zn,Ea,ja),Ns=Cn?Mm(Cn,zn,Ea,ja):void 0;ds=new YA(Jn,vi,Yn,Kn,Hr,ln,En,qa,!1,zn),sl=4*Wc.length;const Xc=ai.iconSizeData;let yo=null;Xc.kind==="source"?(yo=[go*cn.layout.get("icon-size").evaluate(vr,{})],yo[0]>$l&&Et(`${ai.layerIds[0]}: Value for "icon-size" is >= ${Nh}. Reduce your "icon-size".`)):Xc.kind==="composite"&&(yo=[go*xr.compositeIconSizes[0].evaluate(vr,{},Nr),go*xr.compositeIconSizes[1].evaluate(vr,{},Nr)],(yo[0]>$l||yo[1]>$l)&&Et(`${ai.layerIds[0]}: Value for "icon-size" is >= ${Nh}. Reduce your "icon-size".`)),ai.addSymbols(ai.icon,Wc,yo,$i,la,vr,I.ah.none,vi,po.lineStartIndex,po.lineLength,-1,Nr),Mf=ai.icon.placedSymbolArray.length-1,Ns&&(Hh=4*Ns.length,ai.addSymbols(ai.icon,Ns,yo,$i,la,vr,I.ah.vertical,vi,po.lineStartIndex,po.lineLength,-1,Nr),Tf=ai.icon.placedSymbolArray.length-1)}const qm=Object.keys(ur.horizontal);for(const zn of qm){const ja=ur.horizontal[zn];if(!mo){Vm=$e(ja.text);const Ns=cn.layout.get("text-rotate").evaluate(vr,{},Nr);mo=new YA(Jn,vi,Yn,Kn,Hr,ja,un,Fn,Bn,Ns)}const Wc=ja.positionedLines.length===1;if(Um+=Lm(ai,vi,ja,As,cn,Bn,vr,$n,po,ur.vertical?I.ah.horizontal:I.ah.horizontalOnly,Wc?qm:[zn],ol,Mf,xr,Nr),Wc)break}ur.vertical&&(Om+=Lm(ai,vi,ur.vertical,As,cn,Bn,vr,$n,po,I.ah.vertical,["vertical"],ol,Tf,xr,Nr));const tb=mo?mo.boxStartIndex:ai.collisionBoxArray.length,ib=mo?mo.boxEndIndex:ai.collisionBoxArray.length,rb=Ha?Ha.boxStartIndex:ai.collisionBoxArray.length,nb=Ha?Ha.boxEndIndex:ai.collisionBoxArray.length,ab=ds?ds.boxStartIndex:ai.collisionBoxArray.length,sb=ds?ds.boxEndIndex:ai.collisionBoxArray.length,ob=fn?fn.boxStartIndex:ai.collisionBoxArray.length,lb=fn?fn.boxEndIndex:ai.collisionBoxArray.length;let Gs=-1;const $A=(zn,ja)=>zn&&zn.circleDiameter?Math.max(zn.circleDiameter,ja):ja;Gs=$A(mo,Gs),Gs=$A(Ha,Gs),Gs=$A(ds,Gs),Gs=$A(fn,Gs);const Hm=Gs>-1?1:0;Hm&&(Gs*=Ku/an),ai.glyphOffsetArray.length>=ju.MAX_GLYPHS&&Et("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vr.sortKey!==void 0&&ai.addToSortKeyRanges(ai.symbolInstances.length,vr.sortKey);const cb=Rm(cn,vr,Nr),[ub,hb]=function(zn,ja){const Wc=zn.length,Ns=ja==null?void 0:ja.values;if((Ns==null?void 0:Ns.length)>0)for(let Xc=0;Xc<Ns.length;Xc+=2){const yo=Ns[Xc+1];zn.emplaceBack(I.aq[Ns[Xc]],yo[0],yo[1])}return[Wc,zn.length]}(ai.textAnchorOffsets,cb);ai.symbolInstances.emplaceBack(vi.x,vi.y,ol.right>=0?ol.right:-1,ol.center>=0?ol.center:-1,ol.left>=0?ol.left:-1,ol.vertical||-1,Mf,Tf,Vm,tb,ib,rb,nb,ab,sb,ob,lb,Yn,Um,Om,sl,Hh,Hm,0,un,Gs,ub,hb)}(r,ci,lt,n,o,A,Wt,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,me,[qe,qe,qe,qe],jt,B,Ye,et,pi,K,t,p,S,M,m)};if(qt==="line")for(const lt of Bm(t.geometry,0,0,Gr,Gr)){const ci=Y1(lt,Le,xt,n.vertical||re,o,24,we,r.overscaling,Gr);for(const ai of ci)re&&X1(r,re.text,Lt,ai)||Yt(lt,ai)}else if(qt==="line-center"){for(const lt of t.geometry)if(lt.length>1){const ci=J1(lt,xt,n.vertical||re,o,24,we);ci&&Yt(lt,ci)}}else if(t.type==="Polygon")for(const lt of ws(t.geometry,0)){const ci=$1(lt,16);Yt(lt[0],new Wl(ci.x,ci.y,0))}else if(t.type==="LineString")for(const lt of t.geometry)Yt(lt,new Wl(lt[0].x,lt[0].y,0));else if(t.type==="Point")for(const lt of t.geometry)for(const ci of lt)Yt([ci],new Wl(ci.x,ci.y,0))}function Lm(r,t,n,o,A,p,m,x,B,S,M,P,U,K,re){const ae=function(Ye,Le,qe,et,xt,jt,pi,qt){const Lt=et.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,oi=[];for(const Wt of Le.positionedLines)for(const Yt of Wt.positionedGlyphs){if(!Yt.rect)continue;const lt=Yt.rect||{};let ci=Wp+1,ai=!0,vi=1,pr=0;const ur=(xt||qt)&&Yt.vertical,ln=Yt.metrics.advance*Yt.scale/2;if(qt&&Le.verticalizable&&(pr=Wt.lineOffset/2-(Yt.imageName?-(an-Yt.metrics.width*Yt.scale)/2:(Yt.scale-1)*an)),Yt.imageName){const $i=pi[Yt.imageName];ai=$i.sdf,vi=$i.pixelRatio,ci=oa/vi}const As=xt?[Yt.x+ln,Yt.y]:[0,0];let Cn=xt?[0,0]:[Yt.x+ln+qe[0],Yt.y+qe[1]-pr],cn=[0,0];ur&&(cn=Cn,Cn=[0,0]);const Jn=Yt.metrics.isDoubleResolution?2:1,Yn=(Yt.metrics.left-ci)*Yt.scale-ln+Cn[0],Kn=(-Yt.metrics.top-ci)*Yt.scale+Cn[1],Hr=Yn+lt.w/Jn*Yt.scale/vi,un=Kn+lt.h/Jn*Yt.scale/vi,Fn=new H(Yn,Kn),Bn=new H(Hr,Kn),$n=new H(Yn,un),En=new H(Hr,un);if(ur){const $i=new H(-ln,ln-zh),vr=-Math.PI/2,xr=an/2-ln,Ea=new H(5-zh-xr,-(Yt.imageName?xr:0)),Nr=new H(...cn);Fn._rotateAround(vr,$i)._add(Ea)._add(Nr),Bn._rotateAround(vr,$i)._add(Ea)._add(Nr),$n._rotateAround(vr,$i)._add(Ea)._add(Nr),En._rotateAround(vr,$i)._add(Ea)._add(Nr)}if(Lt){const $i=Math.sin(Lt),vr=Math.cos(Lt),xr=[vr,-$i,$i,vr];Fn._matMult(xr),Bn._matMult(xr),$n._matMult(xr),En._matMult(xr)}const qa=new H(0,0),la=new H(0,0);oi.push({tl:Fn,tr:Bn,bl:$n,br:En,tex:lt,writingMode:Le.writingMode,glyphOffset:As,sectionIndex:Yt.sectionIndex,isSDF:ai,pixelOffsetTL:qa,pixelOffsetBR:la,minFontScaleX:0,minFontScaleY:0})}return oi}(0,n,x,A,p,m,o,r.allowVerticalPlacement),me=r.textSizeData;let we=null;me.kind==="source"?(we=[go*A.layout.get("text-size").evaluate(m,{})],we[0]>$l&&Et(`${r.layerIds[0]}: Value for "text-size" is >= ${Nh}. Reduce your "text-size".`)):me.kind==="composite"&&(we=[go*K.compositeTextSizes[0].evaluate(m,{},re),go*K.compositeTextSizes[1].evaluate(m,{},re)],(we[0]>$l||we[1]>$l)&&Et(`${r.layerIds[0]}: Value for "text-size" is >= ${Nh}. Reduce your "text-size".`)),r.addSymbols(r.text,ae,we,x,p,m,S,t,B.lineStartIndex,B.lineLength,U,re);for(const Ye of M)P[Ye]=r.text.placedSymbolArray.length-1;return 4*ae.length}function Fm(r){for(const t in r)return r[t];return null}function X1(r,t,n,o){const A=r.compareText;if(t in A){const p=A[t];for(let m=p.length-1;m>=0;m--)if(o.dist(p[m])<n)return!0}else A[t]=[];return A[t].push(o),!1}const zm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Cf{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,o]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const A=o>>4;if(A!==1)throw new Error(`Got v${A} data when expected v1.`);const p=zm[15&o];if(!p)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new Cf(x,m,p,t)}constructor(t,n=64,o=Float64Array,A){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=o,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const p=zm.indexOf(this.ArrayType),m=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-x%8)%8;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);A&&A instanceof ArrayBuffer?(this.data=A,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+B,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+m+x+B),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+B,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+p]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=t,this.coords[this._pos++]=n,o}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Bf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,o,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:m,nodeSize:x}=this,B=[0,p.length-1,0],S=[];for(;B.length;){const M=B.pop()||0,P=B.pop()||0,U=B.pop()||0;if(P-U<=x){for(let me=U;me<=P;me++){const we=m[2*me],Ye=m[2*me+1];we>=t&&we<=o&&Ye>=n&&Ye<=A&&S.push(p[me])}continue}const K=U+P>>1,re=m[2*K],ae=m[2*K+1];re>=t&&re<=o&&ae>=n&&ae<=A&&S.push(p[K]),(M===0?t<=re:n<=ae)&&(B.push(U),B.push(K-1),B.push(1-M)),(M===0?o>=re:A>=ae)&&(B.push(K+1),B.push(P),B.push(1-M))}return S}within(t,n,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:A,coords:p,nodeSize:m}=this,x=[0,A.length-1,0],B=[],S=o*o;for(;x.length;){const M=x.pop()||0,P=x.pop()||0,U=x.pop()||0;if(P-U<=m){for(let me=U;me<=P;me++)Nm(p[2*me],p[2*me+1],t,n)<=S&&B.push(A[me]);continue}const K=U+P>>1,re=p[2*K],ae=p[2*K+1];Nm(re,ae,t,n)<=S&&B.push(A[K]),(M===0?t-o<=re:n-o<=ae)&&(x.push(U),x.push(K-1),x.push(1-M)),(M===0?t+o>=re:n+o>=ae)&&(x.push(K+1),x.push(P),x.push(1-M))}return B}}function Bf(r,t,n,o,A,p){if(A-o<=n)return;const m=o+A>>1;Gm(r,t,m,o,A,p),Bf(r,t,n,o,m-1,1-p),Bf(r,t,n,m+1,A,1-p)}function Gm(r,t,n,o,A,p){for(;A>o;){if(A-o>600){const S=A-o+1,M=n-o+1,P=Math.log(S),U=.5*Math.exp(2*P/3),K=.5*Math.sqrt(P*U*(S-U)/S)*(M-S/2<0?-1:1);Gm(r,t,n,Math.max(o,Math.floor(n-M*U/S+K)),Math.min(A,Math.floor(n+(S-M)*U/S+K)),p)}const m=t[2*n+p];let x=o,B=A;for(Vh(r,t,o,n),t[2*A+p]>m&&Vh(r,t,o,A);x<B;){for(Vh(r,t,x,B),x++,B--;t[2*x+p]<m;)x++;for(;t[2*B+p]>m;)B--}t[2*o+p]===m?Vh(r,t,o,B):(B++,Vh(r,t,B,A)),B<=n&&(o=B+1),n<=B&&(A=B-1)}}function Vh(r,t,n,o){Ef(r,n,o),Ef(t,2*n,2*o),Ef(t,2*n+1,2*o+1)}function Ef(r,t,n){const o=r[t];r[t]=r[n],r[n]=o}function Nm(r,t,n,o){const A=r-n,p=t-o;return A*A+p*p}var Qf;I.bg=void 0,(Qf=I.bg||(I.bg={})).create="create",Qf.load="load",Qf.fullLoad="fullLoad";let KA=null,qh=[];const Sf=1e3/60,Df="loadTime",kf="fullLoadTime",eb={mark(r){performance.mark(r)},frame(r){const t=r;KA!=null&&qh.push(t-KA),KA=t},clearMetrics(){KA=null,qh=[],performance.clearMeasures(Df),performance.clearMeasures(kf);for(const r in I.bg)performance.clearMarks(I.bg[r])},getPerformanceMetrics(){performance.measure(Df,I.bg.create,I.bg.load),performance.measure(kf,I.bg.create,I.bg.fullLoad);const r=performance.getEntriesByName(Df)[0].duration,t=performance.getEntriesByName(kf)[0].duration,n=qh.length,o=1/(qh.reduce((p,m)=>p+m,0)/n/1e3),A=qh.filter(p=>p>Sf).reduce((p,m)=>p+(m-Sf)/Sf,0);return{loadTime:r,fullLoadTime:t,fps:o,percentDroppedFrames:A/(n+A)*100,totalFrames:n}}};I.$=class extends k{},I.A=Nu,I.B=Bh,I.C=function(r){if(wi==null){const t=r.navigator?r.navigator.userAgent:null;wi=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return wi},I.D=ii,I.E=It,I.F=class{constructor(r,t){this.target=r,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new H1(()=>this.process()),this.subscription=function(n,o,A,p){return n.addEventListener(o,A,!1),{unsubscribe:()=>{n.removeEventListener(o,A,!1)}}}(this.target,"message",n=>this.receive(n)),this.globalScope=Li(self)?r:window}registerMessageHandler(r,t){this.messageHandlers[r]=t}sendAsync(r,t){return new Promise((n,o)=>{const A=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[A]={resolve:n,reject:o},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[A];const x={id:A,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)},{once:!0});const p=[],m=Object.assign(Object.assign({},r),{id:A,sourceMapId:this.mapId,origin:location.origin,data:na(r.data,p)});this.target.postMessage(m,{transfer:p})})}receive(r){const t=r.data,n=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[n];const o=this.abortControllers[n];return delete this.abortControllers[n],void(o&&o.abort())}if(Li(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(this.taskQueue.length===0)return;const r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){return l(this,void 0,void 0,function*(){if(t.type==="<response>"){const A=this.resolveRejects[r];return delete this.resolveRejects[r],A?void(t.error?A.reject(ho(t.error)):A.resolve(ho(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const n=ho(t.data),o=new AbortController;this.abortControllers[r]=o;try{const A=yield this.messageHandlers[t.type](t.sourceMapId,n,o);this.completeTask(r,null,A)}catch(A){this.completeTask(r,A)}})}completeTask(r,t,n){const o=[];delete this.abortControllers[r];const A={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?na(t):null,data:na(n,o)};this.target.postMessage(A,{transfer:o})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},I.G=$r,I.H=function(){var r=new Nu(16);return Nu!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},I.I=Af,I.J=function(r,t,n){var o,A,p,m,x,B,S,M,P,U,K,re,ae=n[0],me=n[1],we=n[2];return t===r?(r[12]=t[0]*ae+t[4]*me+t[8]*we+t[12],r[13]=t[1]*ae+t[5]*me+t[9]*we+t[13],r[14]=t[2]*ae+t[6]*me+t[10]*we+t[14],r[15]=t[3]*ae+t[7]*me+t[11]*we+t[15]):(A=t[1],p=t[2],m=t[3],x=t[4],B=t[5],S=t[6],M=t[7],P=t[8],U=t[9],K=t[10],re=t[11],r[0]=o=t[0],r[1]=A,r[2]=p,r[3]=m,r[4]=x,r[5]=B,r[6]=S,r[7]=M,r[8]=P,r[9]=U,r[10]=K,r[11]=re,r[12]=o*ae+x*me+P*we+t[12],r[13]=A*ae+B*me+U*we+t[13],r[14]=p*ae+S*me+K*we+t[14],r[15]=m*ae+M*me+re*we+t[15]),r},I.K=function(r,t,n){var o=n[0],A=n[1],p=n[2];return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=t[3]*o,r[4]=t[4]*A,r[5]=t[5]*A,r[6]=t[6]*A,r[7]=t[7]*A,r[8]=t[8]*p,r[9]=t[9]*p,r[10]=t[10]*p,r[11]=t[11]*p,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},I.L=Ip,I.M=function(r,t){const n={};for(let o=0;o<t.length;o++){const A=t[o];A in r&&(n[A]=r[A])}return n},I.N=Zl,I.O=gm,I.P=H,I.Q=pm,I.R=Oa,I.S=Va,I.T=Hl,I.U=pt,I.V=_t,I.W=nr,I.X=Gr,I.Y=f,I.Z=Uh,I._=l,I.a=sn,I.a$=function(r,t){var n=r[0],o=r[1],A=r[2],p=r[3],m=r[4],x=r[5],B=r[6],S=r[7],M=r[8],P=r[9],U=r[10],K=r[11],re=r[12],ae=r[13],me=r[14],we=r[15],Ye=t[0],Le=t[1],qe=t[2],et=t[3],xt=t[4],jt=t[5],pi=t[6],qt=t[7],Lt=t[8],oi=t[9],Wt=t[10],Yt=t[11],lt=t[12],ci=t[13],ai=t[14],vi=t[15];return Math.abs(n-Ye)<=jn*Math.max(1,Math.abs(n),Math.abs(Ye))&&Math.abs(o-Le)<=jn*Math.max(1,Math.abs(o),Math.abs(Le))&&Math.abs(A-qe)<=jn*Math.max(1,Math.abs(A),Math.abs(qe))&&Math.abs(p-et)<=jn*Math.max(1,Math.abs(p),Math.abs(et))&&Math.abs(m-xt)<=jn*Math.max(1,Math.abs(m),Math.abs(xt))&&Math.abs(x-jt)<=jn*Math.max(1,Math.abs(x),Math.abs(jt))&&Math.abs(B-pi)<=jn*Math.max(1,Math.abs(B),Math.abs(pi))&&Math.abs(S-qt)<=jn*Math.max(1,Math.abs(S),Math.abs(qt))&&Math.abs(M-Lt)<=jn*Math.max(1,Math.abs(M),Math.abs(Lt))&&Math.abs(P-oi)<=jn*Math.max(1,Math.abs(P),Math.abs(oi))&&Math.abs(U-Wt)<=jn*Math.max(1,Math.abs(U),Math.abs(Wt))&&Math.abs(K-Yt)<=jn*Math.max(1,Math.abs(K),Math.abs(Yt))&&Math.abs(re-lt)<=jn*Math.max(1,Math.abs(re),Math.abs(lt))&&Math.abs(ae-ci)<=jn*Math.max(1,Math.abs(ae),Math.abs(ci))&&Math.abs(me-ai)<=jn*Math.max(1,Math.abs(me),Math.abs(ai))&&Math.abs(we-vi)<=jn*Math.max(1,Math.abs(we),Math.abs(vi))},I.a0=Me,I.a1=bf,I.a2=ht,I.a3=r=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const o of r){const A=window.document.createElement("source");hn(o)||(t.crossOrigin="Anonymous"),A.src=o,t.appendChild(A)}})},I.a4=function(){return Zt++},I.a5=b,I.a6=ju,I.a7=so,I.a8=nl,I.a9=bm,I.aA=function(r){if(r.type==="custom")return new q1(r);switch(r.type){case"background":return new U1(r);case"circle":return new Qv(r);case"fill":return new Hv(r);case"fill-extrusion":return new s1(r);case"heatmap":return new Dv(r);case"hillshade":return new Mv(r);case"line":return new f1(r);case"raster":return new V1(r);case"symbol":return new qA(r)}},I.aB=mt,I.aC=function(r,t){if(!r)return[{command:"setStyle",args:[t]}];let n=[];try{if(!gt(r.version,t.version))return[{command:"setStyle",args:[t]}];gt(r.center,t.center)||n.push({command:"setCenter",args:[t.center]}),gt(r.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),gt(r.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),gt(r.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),gt(r.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),gt(r.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),gt(r.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),gt(r.light,t.light)||n.push({command:"setLight",args:[t.light]}),gt(r.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),gt(r.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),gt(r.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const o={},A=[];(function(m,x,B,S){let M;for(M in x=x||{},m=m||{})Object.prototype.hasOwnProperty.call(m,M)&&(Object.prototype.hasOwnProperty.call(x,M)||fi(M,B,S));for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(m,M)?gt(m[M],x[M])||(m[M].type==="geojson"&&x[M].type==="geojson"&&hi(m,x,M)?bt(B,{command:"setGeoJSONSourceData",args:[M,x[M].data]}):Ot(M,x,B,S)):Ct(M,x,B))})(r.sources,t.sources,A,o);const p=[];r.layers&&r.layers.forEach(m=>{"source"in m&&o[m.source]?n.push({command:"removeLayer",args:[m.id]}):p.push(m)}),n=n.concat(A),function(m,x,B){x=x||[];const S=(m=m||[]).map(Ti),M=x.map(Ti),P=m.reduce(qi,{}),U=x.reduce(qi,{}),K=S.slice(),re=Object.create(null);let ae,me,we,Ye,Le;for(let qe=0,et=0;qe<S.length;qe++)ae=S[qe],Object.prototype.hasOwnProperty.call(U,ae)?et++:(bt(B,{command:"removeLayer",args:[ae]}),K.splice(K.indexOf(ae,et),1));for(let qe=0,et=0;qe<M.length;qe++)ae=M[M.length-1-qe],K[K.length-1-qe]!==ae&&(Object.prototype.hasOwnProperty.call(P,ae)?(bt(B,{command:"removeLayer",args:[ae]}),K.splice(K.lastIndexOf(ae,K.length-et),1)):et++,Ye=K[K.length-qe],bt(B,{command:"addLayer",args:[U[ae],Ye]}),K.splice(K.length-qe,0,ae),re[ae]=!0);for(let qe=0;qe<M.length;qe++)if(ae=M[qe],me=P[ae],we=U[ae],!re[ae]&&!gt(me,we))if(gt(me.source,we.source)&&gt(me["source-layer"],we["source-layer"])&&gt(me.type,we.type)){for(Le in di(me.layout,we.layout,B,ae,null,"setLayoutProperty"),di(me.paint,we.paint,B,ae,null,"setPaintProperty"),gt(me.filter,we.filter)||bt(B,{command:"setFilter",args:[ae,we.filter]}),gt(me.minzoom,we.minzoom)&&gt(me.maxzoom,we.maxzoom)||bt(B,{command:"setLayerZoomRange",args:[ae,we.minzoom,we.maxzoom]}),me)Object.prototype.hasOwnProperty.call(me,Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?di(me[Le],we[Le],B,ae,Le.slice(6),"setPaintProperty"):gt(me[Le],we[Le])||bt(B,{command:"setLayerProperty",args:[ae,Le,we[Le]]}));for(Le in we)Object.prototype.hasOwnProperty.call(we,Le)&&!Object.prototype.hasOwnProperty.call(me,Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?di(me[Le],we[Le],B,ae,Le.slice(6),"setPaintProperty"):gt(me[Le],we[Le])||bt(B,{command:"setLayerProperty",args:[ae,Le,we[Le]]}))}else bt(B,{command:"removeLayer",args:[ae]}),Ye=K[K.lastIndexOf(ae)+1],bt(B,{command:"addLayer",args:[we,Ye]})}(p,t.layers,n)}catch(o){console.warn("Unable to compute style diff:",o),n=[{command:"setStyle",args:[t]}]}return n},I.aD=function(r){const t=[],n=r.id;return n===void 0&&t.push({message:`layers.${n}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${n}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},I.aE=function r(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(!r(t[o],n[o]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(const o in t)if(!r(t[o],n[o]))return!1;return!0}return t===n},I.aF=Bt,I.aG=Gt,I.aH=class extends Dt{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},I.aI=ei,I.aJ=class extends Dt{constructor(r,t){super(r,t),this.current=Jt}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},I.aK=Kt,I.aL=ui,I.aM=Xi,I.aN=class extends Dt{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},I.aO=class extends Dt{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},I.aP=function(r,t,n,o,A,p,m){var x=1/(t-n),B=1/(o-A),S=1/(p-m);return r[0]=-2*x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*B,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*S,r[11]=0,r[12]=(t+n)*x,r[13]=(A+o)*B,r[14]=(m+p)*S,r[15]=1,r},I.aQ=Ev,I.aR=class extends fe{},I.aS=y1,I.aT=class extends Ue{},I.aU=Xd,I.aV=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},I.aW=Cp,I.aX=ge,I.aY=he,I.aZ=class extends Mt{},I.a_=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]},I.aa=function(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,o,A,p)=>{const m=A||p;return t[o]=!m||m.toLowerCase(),""}),t["max-age"]){const n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t},I.ab=function(r,t){const n=[];for(const o in r)o in t||n.push(o);return n},I.ac=Ft,I.ad=function(r,t,n){var o=Math.sin(n),A=Math.cos(n),p=t[0],m=t[1],x=t[2],B=t[3],S=t[4],M=t[5],P=t[6],U=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=p*A+S*o,r[1]=m*A+M*o,r[2]=x*A+P*o,r[3]=B*A+U*o,r[4]=S*A-p*o,r[5]=M*A-m*o,r[6]=P*A-x*o,r[7]=U*A-B*o,r},I.ae=function(r){var t=new Nu(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},I.af=RA,I.ag=function(r,t){let n=0,o=0;if(r.kind==="constant")o=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:A,minZoom:p,maxZoom:m}=r,x=A?Ft(Wr.interpolationFactor(A,t,p,m),0,1):0;r.kind==="camera"?o=zr.number(r.minSize,r.maxSize,x):n=x}return{uSizeT:n,uSize:o}},I.ai=function(r,{uSize:t,uSizeT:n},{lowerSize:o,upperSize:A}){return r.kind==="source"?o/go:r.kind==="composite"?zr.number(o/go,A/go,n):t},I.aj=pf,I.ak=function(r,t,n,o){const A=t.y-r.y,p=t.x-r.x,m=o.y-n.y,x=o.x-n.x,B=m*p-x*A;if(B===0)return null;const S=(x*(r.y-n.y)-m*(r.x-n.x))/B;return new H(r.x+S*p,r.y+S*A)},I.al=Bm,I.am=Ua,I.an=$d,I.ao=function(r){let t=1/0,n=1/0,o=-1/0,A=-1/0;for(const p of r)t=Math.min(t,p.x),n=Math.min(n,p.y),o=Math.max(o,p.x),A=Math.max(A,p.y);return[t,n,o,A]},I.ap=an,I.ar=gf,I.as=function(r,t){var n=t[0],o=t[1],A=t[2],p=t[3],m=t[4],x=t[5],B=t[6],S=t[7],M=t[8],P=t[9],U=t[10],K=t[11],re=t[12],ae=t[13],me=t[14],we=t[15],Ye=n*x-o*m,Le=n*B-A*m,qe=n*S-p*m,et=o*B-A*x,xt=o*S-p*x,jt=A*S-p*B,pi=M*ae-P*re,qt=M*me-U*re,Lt=M*we-K*re,oi=P*me-U*ae,Wt=P*we-K*ae,Yt=U*we-K*me,lt=Ye*Yt-Le*Wt+qe*oi+et*Lt-xt*qt+jt*pi;return lt?(r[0]=(x*Yt-B*Wt+S*oi)*(lt=1/lt),r[1]=(A*Wt-o*Yt-p*oi)*lt,r[2]=(ae*jt-me*xt+we*et)*lt,r[3]=(U*xt-P*jt-K*et)*lt,r[4]=(B*Lt-m*Yt-S*qt)*lt,r[5]=(n*Yt-A*Lt+p*qt)*lt,r[6]=(me*qe-re*jt-we*Le)*lt,r[7]=(M*jt-U*qe+K*Le)*lt,r[8]=(m*Wt-x*Lt+S*pi)*lt,r[9]=(o*Lt-n*Wt-p*pi)*lt,r[10]=(re*xt-ae*qe+we*Ye)*lt,r[11]=(P*qe-M*xt-K*Ye)*lt,r[12]=(x*qt-m*oi-B*pi)*lt,r[13]=(n*oi-o*qt+A*pi)*lt,r[14]=(ae*Le-re*et-me*Ye)*lt,r[15]=(M*et-P*Le+U*Ye)*lt,r):null},I.at=wf,I.au=ff,I.av=Cf,I.aw=function(){const r={},t=ve.$version;for(const n in ve.$root){const o=ve.$root[n];if(o.required){let A=null;A=n==="version"?t:o.type==="array"?[]:{},A!=null&&(r[n]=A)}}return r},I.ax=Hc,I.ay=ar,I.az=function(r){r=r.slice();const t=Object.create(null);for(let n=0;n<r.length;n++)t[r[n].id]=r[n];for(let n=0;n<r.length;n++)"ref"in r[n]&&(r[n]=Vt(r[n],t[r[n].ref]));return r},I.b=bi,I.b0=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},I.b1=function(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r[2]=t[2]*n[2],r[3]=t[3]*n[3],r},I.b2=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]},I.b3=Ut,I.b4=_m,I.b5=mm,I.b6=function(r,t,n,o,A){var p,m=1/Math.tan(t/2);return r[0]=m/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=m,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,A!=null&&A!==1/0?(r[10]=(A+o)*(p=1/(o-A)),r[14]=2*A*o*p):(r[10]=-1,r[14]=-2*o),r},I.b7=function(r,t,n){var o=Math.sin(n),A=Math.cos(n),p=t[4],m=t[5],x=t[6],B=t[7],S=t[8],M=t[9],P=t[10],U=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=p*A+S*o,r[5]=m*A+M*o,r[6]=x*A+P*o,r[7]=B*A+U*o,r[8]=S*A-p*o,r[9]=M*A-m*o,r[10]=P*A-x*o,r[11]=U*A-B*o,r},I.b8=ut,I.b9=ft,I.bA=Hp,I.bB=function(r){return r.message===Yi},I.bC=No,I.bD=tr,I.ba=function(r){return r*Math.PI/180},I.bb=function(r,t){const{x:n,y:o}=Uh.fromLngLat(t);return!(r<0||r>25||o<0||o>=1||n<0||n>=1)},I.bc=function(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},I.bd=class extends Q{},I.be=If,I.bf=eb,I.bh=dr,I.bi=function(r,t){sn.REGISTERED_PROTOCOLS[r]=t},I.bj=function(r){delete sn.REGISTERED_PROTOCOLS[r]},I.bk=function(r,t){const n={};for(let A=0;A<r.length;A++){const p=t&&t[r[A].id]||ls(r[A]);t&&(t[r[A].id]=p);let m=n[p];m||(m=n[p]=[]),m.push(r[A])}const o=[];for(const A in n)o.push(n[A]);return o},I.bl=Nt,I.bm=vm,I.bn=xm,I.bo=em,I.bp=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=Gr/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;const t=r.bucket.layers[0],n=t.layout,o=t._unevaluatedLayout._values,A={layoutIconSize:o["icon-size"].possiblyEvaluate(new Ki(r.bucket.zoom+1),r.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new Ki(r.bucket.zoom+1),r.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new Ki(18))};if(r.bucket.textSizeData.kind==="composite"){const{minZoom:S,maxZoom:M}=r.bucket.textSizeData;A.compositeTextSizes=[o["text-size"].possiblyEvaluate(new Ki(S),r.canonical),o["text-size"].possiblyEvaluate(new Ki(M),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){const{minZoom:S,maxZoom:M}=r.bucket.iconSizeData;A.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new Ki(S),r.canonical),o["icon-size"].possiblyEvaluate(new Ki(M),r.canonical)]}const p=n.get("text-line-height")*an,m=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",x=n.get("text-keep-upright"),B=n.get("text-size");for(const S of r.bucket.features){const M=n.get("text-font").evaluate(S,{},r.canonical).join(","),P=B.evaluate(S,{},r.canonical),U=A.layoutTextSize.evaluate(S,{},r.canonical),K=A.layoutIconSize.evaluate(S,{},r.canonical),re={horizontal:{},vertical:void 0},ae=S.text;let me,we=[0,0];if(ae){const qe=ae.toString(),et=n.get("text-letter-spacing").evaluate(S,{},r.canonical)*an,xt=Lu(qe)?et:0,jt=n.get("text-anchor").evaluate(S,{},r.canonical),pi=Rm(t,S,r.canonical);if(!pi){const Wt=n.get("text-radial-offset").evaluate(S,{},r.canonical);we=Wt?Pm(jt,[Wt*an,xf]):n.get("text-offset").evaluate(S,{},r.canonical).map(Yt=>Yt*an)}let qt=m?"center":n.get("text-justify").evaluate(S,{},r.canonical);const Lt=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(S,{},r.canonical)*an:1/0,oi=()=>{r.bucket.allowVerticalPlacement&&Ol(qe)&&(re.vertical=UA(ae,r.glyphMap,r.glyphPositions,r.imagePositions,M,Lt,p,jt,"left",xt,we,I.ah.vertical,!0,U,P))};if(!m&&pi){const Wt=new Set;if(qt==="auto")for(let lt=0;lt<pi.values.length;lt+=2)Wt.add(wf(pi.values[lt]));else Wt.add(qt);let Yt=!1;for(const lt of Wt)if(!re.horizontal[lt])if(Yt)re.horizontal[lt]=re.horizontal[0];else{const ci=UA(ae,r.glyphMap,r.glyphPositions,r.imagePositions,M,Lt,p,"center",lt,xt,we,I.ah.horizontal,!1,U,P);ci&&(re.horizontal[lt]=ci,Yt=ci.positionedLines.length===1)}oi()}else{qt==="auto"&&(qt=wf(jt));const Wt=UA(ae,r.glyphMap,r.glyphPositions,r.imagePositions,M,Lt,p,jt,qt,xt,we,I.ah.horizontal,!1,U,P);Wt&&(re.horizontal[qt]=Wt),oi(),Ol(qe)&&m&&x&&(re.vertical=UA(ae,r.glyphMap,r.glyphPositions,r.imagePositions,M,Lt,p,jt,qt,xt,we,I.ah.vertical,!1,U,P))}}let Ye=!1;if(S.icon&&S.icon.name){const qe=r.imageMap[S.icon.name];qe&&(me=L1(r.imagePositions[S.icon.name],n.get("icon-offset").evaluate(S,{},r.canonical),n.get("icon-anchor").evaluate(S,{},r.canonical)),Ye=!!qe.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=Ye:r.bucket.sdfIcons!==Ye&&Et("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==r.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}const Le=Fm(re.horizontal)||re.vertical;r.bucket.iconsInText=!!Le&&Le.iconsInText,(Le||me)&&W1(r.bucket,S,re,me,r.imageMap,A,U,K,we,Ye,r.canonical)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},I.bq=lf,I.br=af,I.bs=of,I.bt=Yl,I.bu=uf,I.bv=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},I.bw=function(r,t,n,o,A){return l(this,void 0,void 0,function*(){if(_t())try{return yield nr(r,t,n,o,A)}catch{}return function(p,m,x,B,S){const M=p.width,P=p.height;Kr&&Ar||(Kr=new OffscreenCanvas(M,P),Ar=Kr.getContext("2d",{willReadFrequently:!0})),Kr.width=M,Kr.height=P,Ar.drawImage(p,0,0,M,P);const U=Ar.getImageData(m,x,B,S);return Ar.clearRect(0,0,M,P),U.data}(r,t,n,o,A)})},I.bx=Im,I.by=q,I.bz=Y,I.c=kr,I.d=r=>l(void 0,void 0,void 0,function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(t)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),I.e=zt,I.f=r=>new Promise((t,n)=>{const o=new Image;o.onload=()=>{t(o),URL.revokeObjectURL(o.src),o.onload=null,window.requestAnimationFrame(()=>{o.src=Pi})},o.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const A=new Blob([new Uint8Array(r)],{type:"image/png"});o.src=r.byteLength?URL.createObjectURL(A):Pi}),I.g=Er,I.h=(r,t)=>rn(zt(r,{type:"json"}),t),I.i=Li,I.j=tt,I.k=Ge,I.l=(r,t)=>rn(zt(r,{type:"arrayBuffer"}),t),I.m=rn,I.n=function(r){return new uf(r).readFields(S1,[])},I.o=kh,I.p=Xp,I.q=bn,I.r=Ko,I.s=hn,I.t=Vc,I.u=Ls,I.v=ve,I.w=Et,I.x=function([r,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(n),y:r*Math.sin(t)*Math.sin(n),z:r*Math.cos(n)}},I.y=zr,I.z=Ki}),y("worker",["./shared"],function(I){class l{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,j){for(const pe of J){this._layerConfigs[pe.id]=pe;const Re=this._layers[pe.id]=I.aA(pe);Re._featureFilter=I.a7(Re.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(const pe of j)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const ie=I.bk(Object.values(this._layerConfigs),this.keyCache);for(const pe of ie){const Re=pe.map(Ze=>this._layers[Ze.id]),Ne=Re[0];if(Ne.visibility==="none")continue;const je=Ne.source||"";let Ee=this.familiesBySource[je];Ee||(Ee=this.familiesBySource[je]={});const Xe=Ne.sourceLayer||"_geojsonTileLayer";let At=Ee[Xe];At||(At=Ee[Xe]=[]),At.push(Re)}}}class q{constructor(J){const j={},ie=[];for(const je in J){const Ee=J[je],Xe=j[je]={};for(const At in Ee){const Ze=Ee[+At];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const kt={x:0,y:0,w:Ze.bitmap.width+2,h:Ze.bitmap.height+2};ie.push(kt),Xe[At]={rect:kt,metrics:Ze.metrics}}}const{w:pe,h:Re}=I.p(ie),Ne=new I.o({width:pe||1,height:Re||1});for(const je in J){const Ee=J[je];for(const Xe in Ee){const At=Ee[+Xe];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const Ze=j[je][Xe].rect;I.o.copy(At.bitmap,Ne,{x:0,y:0},{x:Ze.x+1,y:Ze.y+1},At.bitmap)}}this.image=Ne,this.positions=j}}I.bl("GlyphAtlas",q);class Y{constructor(J){this.tileID=new I.S(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[]}parse(J,j,ie,pe){return I._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new I.a5;const Re=new I.bm(Object.keys(J.layers).sort()),Ne=new I.bn(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const je={},Ee={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie},Xe=j.familiesBySource[this.source];for(const Bi in Xe){const Wi=J.layers[Bi];if(!Wi)continue;Wi.version===1&&I.w(`Vector tile source "${this.source}" layer "${Bi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _r=Re.encode(Bi),Zr=[];for(let jr=0;jr<Wi.length;jr++){const dn=Wi.feature(jr),Ys=Ne.getId(dn,Bi);Zr.push({feature:dn,id:Ys,index:jr,sourceLayerIndex:_r})}for(const jr of Xe[Bi]){const dn=jr[0];dn.source!==this.source&&I.w(`layer.source = ${dn.source} does not equal this.source = ${this.source}`),dn.minzoom&&this.zoom<Math.floor(dn.minzoom)||dn.maxzoom&&this.zoom>=dn.maxzoom||dn.visibility!=="none"&&(O(jr,this.zoom,ie),(je[dn.id]=dn.createBucket({index:Ne.bucketLayerIDs.length,layers:jr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_r,sourceID:this.source})).populate(Zr,Ee,this.tileID.canonical),Ne.bucketLayerIDs.push(jr.map(Ys=>Ys.id)))}}const At=I.aF(Ee.glyphDependencies,Bi=>Object.keys(Bi).map(Number));this.inFlightDependencies.forEach(Bi=>Bi==null?void 0:Bi.abort()),this.inFlightDependencies=[];let Ze=Promise.resolve({});if(Object.keys(At).length){const Bi=new AbortController;this.inFlightDependencies.push(Bi),Ze=pe.sendAsync({type:"GG",data:{stacks:At,source:this.source,tileID:this.tileID,type:"glyphs"}},Bi)}const kt=Object.keys(Ee.iconDependencies);let li=Promise.resolve({});if(kt.length){const Bi=new AbortController;this.inFlightDependencies.push(Bi),li=pe.sendAsync({type:"GI",data:{icons:kt,source:this.source,tileID:this.tileID,type:"icons"}},Bi)}const gi=Object.keys(Ee.patternDependencies);let Oi=Promise.resolve({});if(gi.length){const Bi=new AbortController;this.inFlightDependencies.push(Bi),Oi=pe.sendAsync({type:"GI",data:{icons:gi,source:this.source,tileID:this.tileID,type:"patterns"}},Bi)}const[Ci,Gi,Qi]=yield Promise.all([Ze,li,Oi]),Fr=new q(Ci),gr=new I.bo(Gi,Qi);for(const Bi in je){const Wi=je[Bi];Wi instanceof I.a6?(O(Wi.layers,this.zoom,ie),I.bp({bucket:Wi,glyphMap:Ci,glyphPositions:Fr.positions,imageMap:Gi,imagePositions:gr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Wi.hasPattern&&(Wi instanceof I.bq||Wi instanceof I.br||Wi instanceof I.bs)&&(O(Wi.layers,this.zoom,ie),Wi.addFeatures(Ee,this.tileID.canonical,gr.patternPositions))}return this.status="done",{buckets:Object.values(je).filter(Bi=>!Bi.isEmpty()),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fr.image,imageAtlas:gr,glyphMap:this.returnDependencies?Ci:null,iconMap:this.returnDependencies?Gi:null,glyphPositions:this.returnDependencies?Fr.positions:null}})}}function O(_e,J,j){const ie=new I.z(J);for(const pe of _e)pe.recalculate(ie,j)}class H{constructor(J,j,ie){this.actor=J,this.layerIndex=j,this.availableImages=ie,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,j){return I._(this,void 0,void 0,function*(){const ie=yield I.l(J.request,j);try{return{vectorTile:new I.bt.VectorTile(new I.bu(ie.data)),rawData:ie.data,cacheControl:ie.cacheControl,expires:ie.expires}}catch(pe){const Re=new Uint8Array(ie.data);let Ne=`Unable to parse the tile at ${J.request.url}, `;throw Ne+=Re[0]===31&&Re[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(Ne)}})}loadTile(J){return I._(this,void 0,void 0,function*(){const j=J.uid,ie=!!(J&&J.request&&J.request.collectResourceTiming)&&new I.bv(J.request),pe=new Y(J);this.loading[j]=pe;const Re=new AbortController;pe.abort=Re;try{const Ne=yield this.loadVectorTile(J,Re);if(delete this.loading[j],!Ne)return null;const je=Ne.rawData,Ee={};Ne.expires&&(Ee.expires=Ne.expires),Ne.cacheControl&&(Ee.cacheControl=Ne.cacheControl);const Xe={};if(ie){const Ze=ie.finish();Ze&&(Xe.resourceTiming=JSON.parse(JSON.stringify(Ze)))}pe.vectorTile=Ne.vectorTile;const At=pe.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[j]=pe,this.fetching[j]={rawTileData:je,cacheControl:Ee,resourceTiming:Xe};try{const Ze=yield At;return I.e({rawTileData:je.slice(0)},Ze,Ee,Xe)}finally{delete this.fetching[j]}}catch(Ne){throw delete this.loading[j],pe.status="done",this.loaded[j]=pe,Ne}})}reloadTile(J){return I._(this,void 0,void 0,function*(){const j=J.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ie=this.loaded[j];if(ie.showCollisionBoxes=J.showCollisionBoxes,ie.status==="parsing"){const pe=yield ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor);let Re;if(this.fetching[j]){const{rawTileData:Ne,cacheControl:je,resourceTiming:Ee}=this.fetching[j];delete this.fetching[j],Re=I.e({rawTileData:Ne.slice(0)},pe,je,Ee)}else Re=pe;return Re}if(ie.status==="done"&&ie.vectorTile)return ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(J){return I._(this,void 0,void 0,function*(){const j=this.loading,ie=J.uid;j&&j[ie]&&j[ie].abort&&(j[ie].abort.abort(),delete j[ie])})}removeTile(J){return I._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class V{constructor(){this.loaded={}}loadTile(J){return I._(this,void 0,void 0,function*(){const{uid:j,encoding:ie,rawImageData:pe,redFactor:Re,greenFactor:Ne,blueFactor:je,baseShift:Ee}=J,Xe=pe.width+2,At=pe.height+2,Ze=I.b(pe)?new I.R({width:Xe,height:At},yield I.bw(pe,-1,-1,Xe,At)):pe,kt=new I.bx(j,Ze,ie,Re,Ne,je,Ee);return this.loaded=this.loaded||{},this.loaded[j]=kt,kt})}removeTile(J){const j=this.loaded,ie=J.uid;j&&j[ie]&&delete j[ie]}}function Ae(_e,J){if(_e.length!==0){Ve(_e[0],J);for(var j=1;j<_e.length;j++)Ve(_e[j],!J)}}function Ve(_e,J){for(var j=0,ie=0,pe=0,Re=_e.length,Ne=Re-1;pe<Re;Ne=pe++){var je=(_e[pe][0]-_e[Ne][0])*(_e[Ne][1]+_e[pe][1]),Ee=j+je;ie+=Math.abs(j)>=Math.abs(je)?j-Ee+je:je-Ee+j,j=Ee}j+ie>=0!=!!J&&_e.reverse()}var Be=I.by(function _e(J,j){var ie,pe=J&&J.type;if(pe==="FeatureCollection")for(ie=0;ie<J.features.length;ie++)_e(J.features[ie],j);else if(pe==="GeometryCollection")for(ie=0;ie<J.geometries.length;ie++)_e(J.geometries[ie],j);else if(pe==="Feature")_e(J.geometry,j);else if(pe==="Polygon")Ae(J.coordinates,j);else if(pe==="MultiPolygon")for(ie=0;ie<J.coordinates.length;ie++)Ae(J.coordinates[ie],j);return J});const ot=I.bt.VectorTileFeature.prototype.toGeoJSON;var pt={exports:{}},_t=I.bz,ut=I.bt.VectorTileFeature,ft=Ft;function Ft(_e,J){this.options=J||{},this.features=_e,this.length=_e.length}function Ut(_e,J){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=J||4096}Ft.prototype.feature=function(_e){return new Ut(this.features[_e],this.options.extent)},Ut.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var J=0;J<_e.length;J++){for(var j=_e[J],ie=[],pe=0;pe<j.length;pe++)ie.push(new _t(j[pe][0],j[pe][1]));this.geometry.push(ie)}return this.geometry},Ut.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,J=1/0,j=-1/0,ie=1/0,pe=-1/0,Re=0;Re<_e.length;Re++)for(var Ne=_e[Re],je=0;je<Ne.length;je++){var Ee=Ne[je];J=Math.min(J,Ee.x),j=Math.max(j,Ee.x),ie=Math.min(ie,Ee.y),pe=Math.max(pe,Ee.y)}return[J,ie,j,pe]},Ut.prototype.toGeoJSON=ut.prototype.toGeoJSON;var zt=I.bA,Zt=ft;function Bt(_e){var J=new zt;return function(j,ie){for(var pe in j.layers)ie.writeMessage(3,Gt,j.layers[pe])}(_e,J),J.finish()}function Gt(_e,J){var j;J.writeVarintField(15,_e.version||1),J.writeStringField(1,_e.name||""),J.writeVarintField(5,_e.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<_e.length;j++)ie.feature=_e.feature(j),J.writeMessage(2,mt,ie);var pe=ie.keys;for(j=0;j<pe.length;j++)J.writeStringField(3,pe[j]);var Re=ie.values;for(j=0;j<Re.length;j++)J.writeMessage(4,wi,Re[j])}function mt(_e,J){var j=_e.feature;j.id!==void 0&&J.writeVarintField(1,j.id),J.writeMessage(2,st,_e),J.writeVarintField(3,j.type),J.writeMessage(4,Li,j)}function st(_e,J){var j=_e.feature,ie=_e.keys,pe=_e.values,Re=_e.keycache,Ne=_e.valuecache;for(var je in j.properties){var Ee=j.properties[je],Xe=Re[je];if(Ee!==null){Xe===void 0&&(ie.push(je),Re[je]=Xe=ie.length-1),J.writeVarint(Xe);var At=typeof Ee;At!=="string"&&At!=="boolean"&&At!=="number"&&(Ee=JSON.stringify(Ee));var Ze=At+":"+Ee,kt=Ne[Ze];kt===void 0&&(pe.push(Ee),Ne[Ze]=kt=pe.length-1),J.writeVarint(kt)}}}function Et(_e,J){return(J<<3)+(7&_e)}function ni(_e){return _e<<1^_e>>31}function Li(_e,J){for(var j=_e.loadGeometry(),ie=_e.type,pe=0,Re=0,Ne=j.length,je=0;je<Ne;je++){var Ee=j[je],Xe=1;ie===1&&(Xe=Ee.length),J.writeVarint(Et(1,Xe));for(var At=ie===3?Ee.length-1:Ee.length,Ze=0;Ze<At;Ze++){Ze===1&&ie!==1&&J.writeVarint(Et(2,At-1));var kt=Ee[Ze].x-pe,li=Ee[Ze].y-Re;J.writeVarint(ni(kt)),J.writeVarint(ni(li)),pe+=kt,Re+=li}ie===3&&J.writeVarint(Et(7,1))}}function wi(_e,J){var j=typeof _e;j==="string"?J.writeStringField(1,_e):j==="boolean"?J.writeBooleanField(7,_e):j==="number"&&(_e%1!=0?J.writeDoubleField(3,_e):_e<0?J.writeSVarintField(6,_e):J.writeVarintField(5,_e))}pt.exports=Bt,pt.exports.fromVectorTileJs=Bt,pt.exports.fromGeojsonVt=function(_e,J){J=J||{};var j={};for(var ie in _e)j[ie]=new Zt(_e[ie].features,J),j[ie].name=ie,j[ie].version=J.version,j[ie].extent=J.extent;return Bt({layers:j})},pt.exports.GeoJSONWrapper=Zt;var bi=I.by(pt.exports);const Pi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},nr=Math.fround||(Kr=new Float32Array(1),_e=>(Kr[0]=+_e,Kr[0]));var Kr;const Ar=3,Yi=5,kr=6;class sn{constructor(J){this.options=Object.assign(Object.create(Pi),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){const{log:j,minZoom:ie,maxZoom:pe}=this.options;j&&console.time("total time");const Re=`prepare ${J.length} points`;j&&console.time(Re),this.points=J;const Ne=[];for(let Ee=0;Ee<J.length;Ee++){const Xe=J[Ee];if(!Xe.geometry)continue;const[At,Ze]=Xe.geometry.coordinates,kt=nr(dr(At)),li=nr(ar(Ze));Ne.push(kt,li,1/0,Ee,-1,1),this.options.reduce&&Ne.push(0)}let je=this.trees[pe+1]=this._createTree(Ne);j&&console.timeEnd(Re);for(let Ee=pe;Ee>=ie;Ee--){const Xe=+Date.now();je=this.trees[Ee]=this._createTree(this._cluster(je,Ee)),j&&console.log("z%d: %d clusters in %dms",Ee,je.numItems,+Date.now()-Xe)}return j&&console.timeEnd("total time"),this}getClusters(J,j){let ie=((J[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,J[1]));let Re=J[2]===180?180:((J[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)ie=-180,Re=180;else if(ie>Re){const Ze=this.getClusters([ie,pe,180,Ne],j),kt=this.getClusters([-180,pe,Re,Ne],j);return Ze.concat(kt)}const je=this.trees[this._limitZoom(j)],Ee=je.range(dr(ie),ar(Ne),dr(Re),ar(pe)),Xe=je.data,At=[];for(const Ze of Ee){const kt=this.stride*Ze;At.push(Xe[kt+Yi]>1?Er(Xe,kt,this.clusterProps):this.points[Xe[kt+Ar]])}return At}getChildren(J){const j=this._getOriginId(J),ie=this._getOriginZoom(J),pe="No cluster with the specified id.",Re=this.trees[ie];if(!Re)throw new Error(pe);const Ne=Re.data;if(j*this.stride>=Ne.length)throw new Error(pe);const je=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),Ee=Re.within(Ne[j*this.stride],Ne[j*this.stride+1],je),Xe=[];for(const At of Ee){const Ze=At*this.stride;Ne[Ze+4]===J&&Xe.push(Ne[Ze+Yi]>1?Er(Ne,Ze,this.clusterProps):this.points[Ne[Ze+Ar]])}if(Xe.length===0)throw new Error(pe);return Xe}getLeaves(J,j,ie){const pe=[];return this._appendLeaves(pe,J,j=j||10,ie=ie||0,0),pe}getTile(J,j,ie){const pe=this.trees[this._limitZoom(J)],Re=Math.pow(2,J),{extent:Ne,radius:je}=this.options,Ee=je/Ne,Xe=(ie-Ee)/Re,At=(ie+1+Ee)/Re,Ze={features:[]};return this._addTileFeatures(pe.range((j-Ee)/Re,Xe,(j+1+Ee)/Re,At),pe.data,j,ie,Re,Ze),j===0&&this._addTileFeatures(pe.range(1-Ee/Re,Xe,1,At),pe.data,Re,ie,Re,Ze),j===Re-1&&this._addTileFeatures(pe.range(0,Xe,Ee/Re,At),pe.data,-1,ie,Re,Ze),Ze.features.length?Ze:null}getClusterExpansionZoom(J){let j=this._getOriginZoom(J)-1;for(;j<=this.options.maxZoom;){const ie=this.getChildren(J);if(j++,ie.length!==1)break;J=ie[0].properties.cluster_id}return j}_appendLeaves(J,j,ie,pe,Re){const Ne=this.getChildren(j);for(const je of Ne){const Ee=je.properties;if(Ee&&Ee.cluster?Re+Ee.point_count<=pe?Re+=Ee.point_count:Re=this._appendLeaves(J,Ee.cluster_id,ie,pe,Re):Re<pe?Re++:J.push(je),J.length===ie)break}return Re}_createTree(J){const j=new I.av(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<J.length;ie+=this.stride)j.add(J[ie],J[ie+1]);return j.finish(),j.data=J,j}_addTileFeatures(J,j,ie,pe,Re,Ne){for(const je of J){const Ee=je*this.stride,Xe=j[Ee+Yi]>1;let At,Ze,kt;if(Xe)At=$r(j,Ee,this.clusterProps),Ze=j[Ee],kt=j[Ee+1];else{const Oi=this.points[j[Ee+Ar]];At=Oi.properties;const[Ci,Gi]=Oi.geometry.coordinates;Ze=dr(Ci),kt=ar(Gi)}const li={type:1,geometry:[[Math.round(this.options.extent*(Ze*Re-ie)),Math.round(this.options.extent*(kt*Re-pe))]],tags:At};let gi;gi=Xe||this.options.generateId?j[Ee+Ar]:this.points[j[Ee+Ar]].id,gi!==void 0&&(li.id=gi),Ne.features.push(li)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,j){const{radius:ie,extent:pe,reduce:Re,minPoints:Ne}=this.options,je=ie/(pe*Math.pow(2,j)),Ee=J.data,Xe=[],At=this.stride;for(let Ze=0;Ze<Ee.length;Ze+=At){if(Ee[Ze+2]<=j)continue;Ee[Ze+2]=j;const kt=Ee[Ze],li=Ee[Ze+1],gi=J.within(Ee[Ze],Ee[Ze+1],je),Oi=Ee[Ze+Yi];let Ci=Oi;for(const Gi of gi){const Qi=Gi*At;Ee[Qi+2]>j&&(Ci+=Ee[Qi+Yi])}if(Ci>Oi&&Ci>=Ne){let Gi,Qi=kt*Oi,Fr=li*Oi,gr=-1;const Bi=((Ze/At|0)<<5)+(j+1)+this.points.length;for(const Wi of gi){const _r=Wi*At;if(Ee[_r+2]<=j)continue;Ee[_r+2]=j;const Zr=Ee[_r+Yi];Qi+=Ee[_r]*Zr,Fr+=Ee[_r+1]*Zr,Ee[_r+4]=Bi,Re&&(Gi||(Gi=this._map(Ee,Ze,!0),gr=this.clusterProps.length,this.clusterProps.push(Gi)),Re(Gi,this._map(Ee,_r)))}Ee[Ze+4]=Bi,Xe.push(Qi/Ci,Fr/Ci,1/0,Bi,-1,Ci),Re&&Xe.push(gr)}else{for(let Gi=0;Gi<At;Gi++)Xe.push(Ee[Ze+Gi]);if(Ci>1)for(const Gi of gi){const Qi=Gi*At;if(!(Ee[Qi+2]<=j)){Ee[Qi+2]=j;for(let Fr=0;Fr<At;Fr++)Xe.push(Ee[Qi+Fr])}}}}return Xe}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,j,ie){if(J[j+Yi]>1){const Ne=this.clusterProps[J[j+kr]];return ie?Object.assign({},Ne):Ne}const pe=this.points[J[j+Ar]].properties,Re=this.options.map(pe);return ie&&Re===pe?Object.assign({},Re):Re}}function Er(_e,J,j){return{type:"Feature",id:_e[J+Ar],properties:$r(_e,J,j),geometry:{type:"Point",coordinates:[(ie=_e[J],360*(ie-.5)),rn(_e[J+1])]}};var ie}function $r(_e,J,j){const ie=_e[J+Yi],pe=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,Re=_e[J+kr],Ne=Re===-1?{}:Object.assign({},j[Re]);return Object.assign(Ne,{cluster:!0,cluster_id:_e[J+Ar],point_count:ie,point_count_abbreviated:pe})}function dr(_e){return _e/360+.5}function ar(_e){const J=Math.sin(_e*Math.PI/180),j=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return j<0?0:j>1?1:j}function rn(_e){const J=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function hn(_e,J,j,ie){let pe=ie;const Re=J+(j-J>>1);let Ne,je=j-J;const Ee=_e[J],Xe=_e[J+1],At=_e[j],Ze=_e[j+1];for(let kt=J+3;kt<j;kt+=3){const li=pa(_e[kt],_e[kt+1],Ee,Xe,At,Ze);if(li>pe)Ne=kt,pe=li;else if(li===pe){const gi=Math.abs(kt-Re);gi<je&&(Ne=kt,je=gi)}}pe>ie&&(Ne-J>3&&hn(_e,J,Ne,ie),_e[Ne+2]=pe,j-Ne>3&&hn(_e,Ne,j,ie))}function pa(_e,J,j,ie,pe,Re){let Ne=pe-j,je=Re-ie;if(Ne!==0||je!==0){const Ee=((_e-j)*Ne+(J-ie)*je)/(Ne*Ne+je*je);Ee>1?(j=pe,ie=Re):Ee>0&&(j+=Ne*Ee,ie+=je*Ee)}return Ne=_e-j,je=J-ie,Ne*Ne+je*je}function Se(_e,J,j,ie){const pe={id:_e??null,type:J,geometry:j,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")Ge(pe,j);else if(J==="Polygon")Ge(pe,j[0]);else if(J==="MultiLineString")for(const Re of j)Ge(pe,Re);else if(J==="MultiPolygon")for(const Re of j)Ge(pe,Re[0]);return pe}function Ge(_e,J){for(let j=0;j<J.length;j+=3)_e.minX=Math.min(_e.minX,J[j]),_e.minY=Math.min(_e.minY,J[j+1]),_e.maxX=Math.max(_e.maxX,J[j]),_e.maxY=Math.max(_e.maxY,J[j+1])}function tt(_e,J,j,ie){if(!J.geometry)return;const pe=J.geometry.coordinates;if(pe&&pe.length===0)return;const Re=J.geometry.type,Ne=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2);let je=[],Ee=J.id;if(j.promoteId?Ee=J.properties[j.promoteId]:j.generateId&&(Ee=ie||0),Re==="Point")It(pe,je);else if(Re==="MultiPoint")for(const Xe of pe)It(Xe,je);else if(Re==="LineString")ve(pe,je,Ne,!1);else if(Re==="MultiLineString"){if(j.lineMetrics){for(const Xe of pe)je=[],ve(Xe,je,Ne,!1),_e.push(Se(Ee,"LineString",je,J.properties));return}vt(pe,je,Ne,!1)}else if(Re==="Polygon")vt(pe,je,Ne,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(const Xe of J.geometry.geometries)tt(_e,{id:Ee,geometry:Xe,properties:J.properties},j,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Xe of pe){const At=[];vt(Xe,At,Ne,!0),je.push(At)}}_e.push(Se(Ee,Re,je,J.properties))}function It(_e,J){J.push(Vt(_e[0]),gt(_e[1]),0)}function ve(_e,J,j,ie){let pe,Re,Ne=0;for(let Ee=0;Ee<_e.length;Ee++){const Xe=Vt(_e[Ee][0]),At=gt(_e[Ee][1]);J.push(Xe,At,0),Ee>0&&(Ne+=ie?(pe*At-Xe*Re)/2:Math.sqrt(Math.pow(Xe-pe,2)+Math.pow(At-Re,2))),pe=Xe,Re=At}const je=J.length-3;J[2]=1,hn(J,0,je,j),J[je+2]=1,J.size=Math.abs(Ne),J.start=0,J.end=J.size}function vt(_e,J,j,ie){for(let pe=0;pe<_e.length;pe++){const Re=[];ve(_e[pe],Re,j,ie),J.push(Re)}}function Vt(_e){return _e/360+.5}function gt(_e){const J=Math.sin(_e*Math.PI/180),j=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return j<0?0:j>1?1:j}function bt(_e,J,j,ie,pe,Re,Ne,je){if(ie/=J,Re>=(j/=J)&&Ne<ie)return _e;if(Ne<j||Re>=ie)return null;const Ee=[];for(const Xe of _e){const At=Xe.geometry;let Ze=Xe.type;const kt=pe===0?Xe.minX:Xe.minY,li=pe===0?Xe.maxX:Xe.maxY;if(kt>=j&&li<ie){Ee.push(Xe);continue}if(li<j||kt>=ie)continue;let gi=[];if(Ze==="Point"||Ze==="MultiPoint")Ct(At,gi,j,ie,pe);else if(Ze==="LineString")fi(At,gi,j,ie,pe,!1,je.lineMetrics);else if(Ze==="MultiLineString")hi(At,gi,j,ie,pe,!1);else if(Ze==="Polygon")hi(At,gi,j,ie,pe,!0);else if(Ze==="MultiPolygon")for(const Oi of At){const Ci=[];hi(Oi,Ci,j,ie,pe,!0),Ci.length&&gi.push(Ci)}if(gi.length){if(je.lineMetrics&&Ze==="LineString"){for(const Oi of gi)Ee.push(Se(Xe.id,Ze,Oi,Xe.tags));continue}Ze!=="LineString"&&Ze!=="MultiLineString"||(gi.length===1?(Ze="LineString",gi=gi[0]):Ze="MultiLineString"),Ze!=="Point"&&Ze!=="MultiPoint"||(Ze=gi.length===3?"Point":"MultiPoint"),Ee.push(Se(Xe.id,Ze,gi,Xe.tags))}}return Ee.length?Ee:null}function Ct(_e,J,j,ie,pe){for(let Re=0;Re<_e.length;Re+=3){const Ne=_e[Re+pe];Ne>=j&&Ne<=ie&&di(J,_e[Re],_e[Re+1],_e[Re+2])}}function fi(_e,J,j,ie,pe,Re,Ne){let je=Ot(_e);const Ee=pe===0?Ti:qi;let Xe,At,Ze=_e.start;for(let Ci=0;Ci<_e.length-3;Ci+=3){const Gi=_e[Ci],Qi=_e[Ci+1],Fr=_e[Ci+2],gr=_e[Ci+3],Bi=_e[Ci+4],Wi=pe===0?Gi:Qi,_r=pe===0?gr:Bi;let Zr=!1;Ne&&(Xe=Math.sqrt(Math.pow(Gi-gr,2)+Math.pow(Qi-Bi,2))),Wi<j?_r>j&&(At=Ee(je,Gi,Qi,gr,Bi,j),Ne&&(je.start=Ze+Xe*At)):Wi>ie?_r<ie&&(At=Ee(je,Gi,Qi,gr,Bi,ie),Ne&&(je.start=Ze+Xe*At)):di(je,Gi,Qi,Fr),_r<j&&Wi>=j&&(At=Ee(je,Gi,Qi,gr,Bi,j),Zr=!0),_r>ie&&Wi<=ie&&(At=Ee(je,Gi,Qi,gr,Bi,ie),Zr=!0),!Re&&Zr&&(Ne&&(je.end=Ze+Xe*At),J.push(je),je=Ot(_e)),Ne&&(Ze+=Xe)}let kt=_e.length-3;const li=_e[kt],gi=_e[kt+1],Oi=pe===0?li:gi;Oi>=j&&Oi<=ie&&di(je,li,gi,_e[kt+2]),kt=je.length-3,Re&&kt>=3&&(je[kt]!==je[0]||je[kt+1]!==je[1])&&di(je,je[0],je[1],je[2]),je.length&&J.push(je)}function Ot(_e){const J=[];return J.size=_e.size,J.start=_e.start,J.end=_e.end,J}function hi(_e,J,j,ie,pe,Re){for(const Ne of _e)fi(Ne,J,j,ie,pe,Re,!1)}function di(_e,J,j,ie){_e.push(J,j,ie)}function Ti(_e,J,j,ie,pe,Re){const Ne=(Re-J)/(ie-J);return di(_e,Re,j+(pe-j)*Ne,1),Ne}function qi(_e,J,j,ie,pe,Re){const Ne=(Re-j)/(pe-j);return di(_e,J+(ie-J)*Ne,Re,1),Ne}function ht(_e,J){const j=[];for(let ie=0;ie<_e.length;ie++){const pe=_e[ie],Re=pe.type;let Ne;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")Ne=fr(pe.geometry,J);else if(Re==="MultiLineString"||Re==="Polygon"){Ne=[];for(const je of pe.geometry)Ne.push(fr(je,J))}else if(Re==="MultiPolygon"){Ne=[];for(const je of pe.geometry){const Ee=[];for(const Xe of je)Ee.push(fr(Xe,J));Ne.push(Ee)}}j.push(Se(pe.id,Re,Ne,pe.tags))}return j}function fr(_e,J){const j=[];j.size=_e.size,_e.start!==void 0&&(j.start=_e.start,j.end=_e.end);for(let ie=0;ie<_e.length;ie+=3)j.push(_e[ie]+J,_e[ie+1],_e[ie+2]);return j}function Zi(_e,J){if(_e.transformed)return _e;const j=1<<_e.z,ie=_e.x,pe=_e.y;for(const Re of _e.features){const Ne=Re.geometry,je=Re.type;if(Re.geometry=[],je===1)for(let Ee=0;Ee<Ne.length;Ee+=2)Re.geometry.push(Rr(Ne[Ee],Ne[Ee+1],J,j,ie,pe));else for(let Ee=0;Ee<Ne.length;Ee++){const Xe=[];for(let At=0;At<Ne[Ee].length;At+=2)Xe.push(Rr(Ne[Ee][At],Ne[Ee][At+1],J,j,ie,pe));Re.geometry.push(Xe)}}return _e.transformed=!0,_e}function Rr(_e,J,j,ie,pe,Re){return[Math.round(j*(_e*ie-pe)),Math.round(j*(J*ie-Re))]}function Lr(_e,J,j,ie,pe){const Re=J===pe.maxZoom?0:pe.tolerance/((1<<J)*pe.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:_e.length,source:null,x:j,y:ie,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const je of _e)Qt(Ne,je,Re,pe);return Ne}function Qt(_e,J,j,ie){const pe=J.geometry,Re=J.type,Ne=[];if(_e.minX=Math.min(_e.minX,J.minX),_e.minY=Math.min(_e.minY,J.minY),_e.maxX=Math.max(_e.maxX,J.maxX),_e.maxY=Math.max(_e.maxY,J.maxY),Re==="Point"||Re==="MultiPoint")for(let je=0;je<pe.length;je+=3)Ne.push(pe[je],pe[je+1]),_e.numPoints++,_e.numSimplified++;else if(Re==="LineString")Ei(Ne,pe,_e,j,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(let je=0;je<pe.length;je++)Ei(Ne,pe[je],_e,j,Re==="Polygon",je===0);else if(Re==="MultiPolygon")for(let je=0;je<pe.length;je++){const Ee=pe[je];for(let Xe=0;Xe<Ee.length;Xe++)Ei(Ne,Ee[Xe],_e,j,!0,Xe===0)}if(Ne.length){let je=J.tags||null;if(Re==="LineString"&&ie.lineMetrics){je={};for(const Xe in J.tags)je[Xe]=J.tags[Xe];je.mapbox_clip_start=pe.start/pe.size,je.mapbox_clip_end=pe.end/pe.size}const Ee={geometry:Ne,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:je};J.id!==null&&(Ee.id=J.id),_e.features.push(Ee)}}function Ei(_e,J,j,ie,pe,Re){const Ne=ie*ie;if(ie>0&&J.size<(pe?Ne:ie))return void(j.numPoints+=J.length/3);const je=[];for(let Ee=0;Ee<J.length;Ee+=3)(ie===0||J[Ee+2]>Ne)&&(j.numSimplified++,je.push(J[Ee],J[Ee+1])),j.numPoints++;pe&&function(Ee,Xe){let At=0;for(let Ze=0,kt=Ee.length,li=kt-2;Ze<kt;li=Ze,Ze+=2)At+=(Ee[Ze]-Ee[li])*(Ee[Ze+1]+Ee[li+1]);if(At>0===Xe)for(let Ze=0,kt=Ee.length;Ze<kt/2;Ze+=2){const li=Ee[Ze],gi=Ee[Ze+1];Ee[Ze]=Ee[kt-2-Ze],Ee[Ze+1]=Ee[kt-1-Ze],Ee[kt-2-Ze]=li,Ee[kt-1-Ze]=gi}}(je,Re),_e.push(je)}const ti={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class lr{constructor(J,j){const ie=(j=this.options=function(Re,Ne){for(const je in Ne)Re[je]=Ne[je];return Re}(Object.create(ti),j)).debug;if(ie&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=function(Re,Ne){const je=[];if(Re.type==="FeatureCollection")for(let Ee=0;Ee<Re.features.length;Ee++)tt(je,Re.features[Ee],Ne,Ee);else tt(je,Re.type==="Feature"?Re:{geometry:Re},Ne);return je}(J,j);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Re,Ne){const je=Ne.buffer/Ne.extent;let Ee=Re;const Xe=bt(Re,1,-1-je,je,0,-1,2,Ne),At=bt(Re,1,1-je,2+je,0,-1,2,Ne);return(Xe||At)&&(Ee=bt(Re,1,-je,1+je,0,-1,2,Ne)||[],Xe&&(Ee=ht(Xe,1).concat(Ee)),At&&(Ee=Ee.concat(ht(At,-1)))),Ee}(pe,j),pe.length&&this.splitTile(pe,0,0,0),ie&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,j,ie,pe,Re,Ne,je){const Ee=[J,j,ie,pe],Xe=this.options,At=Xe.debug;for(;Ee.length;){pe=Ee.pop(),ie=Ee.pop(),j=Ee.pop(),J=Ee.pop();const Ze=1<<j,kt=An(j,ie,pe);let li=this.tiles[kt];if(!li&&(At>1&&console.time("creation"),li=this.tiles[kt]=Lr(J,j,ie,pe,Xe),this.tileCoords.push({z:j,x:ie,y:pe}),At)){At>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,ie,pe,li.numFeatures,li.numPoints,li.numSimplified),console.timeEnd("creation"));const Zr=`z${j}`;this.stats[Zr]=(this.stats[Zr]||0)+1,this.total++}if(li.source=J,Re==null){if(j===Xe.indexMaxZoom||li.numPoints<=Xe.indexMaxPoints)continue}else{if(j===Xe.maxZoom||j===Re)continue;if(Re!=null){const Zr=Re-j;if(ie!==Ne>>Zr||pe!==je>>Zr)continue}}if(li.source=null,J.length===0)continue;At>1&&console.time("clipping");const gi=.5*Xe.buffer/Xe.extent,Oi=.5-gi,Ci=.5+gi,Gi=1+gi;let Qi=null,Fr=null,gr=null,Bi=null,Wi=bt(J,Ze,ie-gi,ie+Ci,0,li.minX,li.maxX,Xe),_r=bt(J,Ze,ie+Oi,ie+Gi,0,li.minX,li.maxX,Xe);J=null,Wi&&(Qi=bt(Wi,Ze,pe-gi,pe+Ci,1,li.minY,li.maxY,Xe),Fr=bt(Wi,Ze,pe+Oi,pe+Gi,1,li.minY,li.maxY,Xe),Wi=null),_r&&(gr=bt(_r,Ze,pe-gi,pe+Ci,1,li.minY,li.maxY,Xe),Bi=bt(_r,Ze,pe+Oi,pe+Gi,1,li.minY,li.maxY,Xe),_r=null),At>1&&console.timeEnd("clipping"),Ee.push(Qi||[],j+1,2*ie,2*pe),Ee.push(Fr||[],j+1,2*ie,2*pe+1),Ee.push(gr||[],j+1,2*ie+1,2*pe),Ee.push(Bi||[],j+1,2*ie+1,2*pe+1)}}getTile(J,j,ie){J=+J,j=+j,ie=+ie;const pe=this.options,{extent:Re,debug:Ne}=pe;if(J<0||J>24)return null;const je=1<<J,Ee=An(J,j=j+je&je-1,ie);if(this.tiles[Ee])return Zi(this.tiles[Ee],Re);Ne>1&&console.log("drilling down to z%d-%d-%d",J,j,ie);let Xe,At=J,Ze=j,kt=ie;for(;!Xe&&At>0;)At--,Ze>>=1,kt>>=1,Xe=this.tiles[An(At,Ze,kt)];return Xe&&Xe.source?(Ne>1&&(console.log("found parent tile z%d-%d-%d",At,Ze,kt),console.time("drilling down")),this.splitTile(Xe.source,At,Ze,kt,J,j,ie),Ne>1&&console.timeEnd("drilling down"),this.tiles[Ee]?Zi(this.tiles[Ee],Re):null):null}}function An(_e,J,j){return 32*((1<<_e)*j+J)+_e}function xi(_e,J){return J?_e.properties[J]:_e.id}function ma(_e,J){if(_e==null)return!0;if(_e.type==="Feature")return xi(_e,J)!=null;if(_e.type==="FeatureCollection"){const j=new Set;for(const ie of _e.features){const pe=xi(ie,J);if(pe==null||j.has(pe))return!1;j.add(pe)}return!0}return!1}function ya(_e,J){const j=new Map;if(_e!=null)if(_e.type==="Feature")j.set(xi(_e,J),_e);else for(const ie of _e.features)j.set(xi(ie,J),ie);return j}class is extends H{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,j){return I._(this,void 0,void 0,function*(){const ie=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pe=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!pe)return null;const Re=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=I.X,this.length=je.length,this._features=je}feature(je){return new class{constructor(Ee){this._feature=Ee,this.extent=I.X,this.type=Ee.type,this.properties=Ee.tags,"id"in Ee&&!isNaN(Ee.id)&&(this.id=parseInt(Ee.id,10))}loadGeometry(){if(this._feature.type===1){const Ee=[];for(const Xe of this._feature.geometry)Ee.push([new I.P(Xe[0],Xe[1])]);return Ee}{const Ee=[];for(const Xe of this._feature.geometry){const At=[];for(const Ze of Xe)At.push(new I.P(Ze[0],Ze[1]));Ee.push(At)}return Ee}}toGeoJSON(Ee,Xe,At){return ot.call(this,Ee,Xe,At)}}(this._features[je])}}(pe.features);let Ne=bi(Re);return Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),{vectorTile:Re,rawData:Ne.buffer}})}loadData(J){return I._(this,void 0,void 0,function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();const ie=!!(J&&J.request&&J.request.collectResourceTiming)&&new I.bv(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest),this._geoJSONIndex=J.cluster?new sn(function({superclusterOptions:Ne,clusterProperties:je}){if(!je||!Ne)return Ne;const Ee={},Xe={},At={accumulated:null,zoom:0},Ze={properties:null},kt=Object.keys(je);for(const li of kt){const[gi,Oi]=je[li],Ci=I.bC(Oi),Gi=I.bC(typeof gi=="string"?[gi,["accumulated"],["get",li]]:gi);Ee[li]=Ci.value,Xe[li]=Gi.value}return Ne.map=li=>{Ze.properties=li;const gi={};for(const Oi of kt)gi[Oi]=Ee[Oi].evaluate(At,Ze);return gi},Ne.reduce=(li,gi)=>{Ze.properties=gi;for(const Oi of kt)At.accumulated=li[Oi],li[Oi]=Xe[Oi].evaluate(At,Ze)},Ne}(J)).load((yield this._pendingData).features):(pe=yield this._pendingData,new lr(pe,J.geojsonVtOptions)),this.loaded={};const Re={};if(ie){const Ne=ie.finish();Ne&&(Re.resourceTiming={},Re.resourceTiming[J.source]=JSON.parse(JSON.stringify(Ne)))}return Re}catch(Re){if(delete this._pendingRequest,I.bB(Re))return{abandoned:!0};throw Re}var pe})}getData(){return I._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){const j=this.loaded;return j&&j[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,j){return I._(this,void 0,void 0,function*(){let ie=yield this.loadGeoJSON(J,j);if(delete this._pendingRequest,typeof ie!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(Be(ie,!0),J.filter){const pe=I.bC(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(Ne=>`${Ne.key}: ${Ne.message}`).join(", "));ie={type:"FeatureCollection",features:ie.features.filter(Ne=>pe.value.evaluate({zoom:0},Ne))}}return ie})}loadGeoJSON(J,j){return I._(this,void 0,void 0,function*(){const{promoteId:ie}=J;if(J.request){const pe=yield I.h(J.request,j);return this._dataUpdateable=ma(pe.data,ie)?ya(pe.data,ie):void 0,pe.data}if(typeof J.data=="string")try{const pe=JSON.parse(J.data);return this._dataUpdateable=ma(pe,ie)?ya(pe,ie):void 0,pe}catch{throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return function(pe,Re,Ne){var je,Ee,Xe,At;if(Re.removeAll&&pe.clear(),Re.remove)for(const Ze of Re.remove)pe.delete(Ze);if(Re.add)for(const Ze of Re.add){const kt=xi(Ze,Ne);kt!=null&&pe.set(kt,Ze)}if(Re.update)for(const Ze of Re.update){let kt=pe.get(Ze.id);if(kt==null)continue;const li=!Ze.removeAllProperties&&(((je=Ze.removeProperties)===null||je===void 0?void 0:je.length)>0||((Ee=Ze.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0);if((Ze.newGeometry||Ze.removeAllProperties||li)&&(kt=Object.assign({},kt),pe.set(Ze.id,kt),li&&(kt.properties=Object.assign({},kt.properties))),Ze.newGeometry&&(kt.geometry=Ze.newGeometry),Ze.removeAllProperties)kt.properties={};else if(((Xe=Ze.removeProperties)===null||Xe===void 0?void 0:Xe.length)>0)for(const gi of Ze.removeProperties)Object.prototype.hasOwnProperty.call(kt.properties,gi)&&delete kt.properties[gi];if(((At=Ze.addOrUpdateProperties)===null||At===void 0?void 0:At.length)>0)for(const{key:gi,value:Oi}of Ze.addOrUpdateProperties)kt.properties[gi]=Oi}}(this._dataUpdateable,J.dataDiff,ie),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return I._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class mn{constructor(J){this.self=J,this.actor=new I.F(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(j,ie)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=ie},this.self.addProtocol=I.bi,this.self.removeProtocol=I.bj,this.self.registerRTLTextPlugin=j=>{if(I.bD.isParsed())throw new Error("RTL text plugin already registered.");I.bD.setMethods(j)},this.actor.registerMessageHandler("LDT",(j,ie)=>this._getDEMWorkerSource(j,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RDT",(j,ie)=>I._(this,void 0,void 0,function*(){this._getDEMWorkerSource(j,ie.source).removeTile(ie)})),this.actor.registerMessageHandler("GCEZ",(j,ie)=>I._(this,void 0,void 0,function*(){return this._getWorkerSource(j,ie.type,ie.source).getClusterExpansionZoom(ie)})),this.actor.registerMessageHandler("GCC",(j,ie)=>I._(this,void 0,void 0,function*(){return this._getWorkerSource(j,ie.type,ie.source).getClusterChildren(ie)})),this.actor.registerMessageHandler("GCL",(j,ie)=>I._(this,void 0,void 0,function*(){return this._getWorkerSource(j,ie.type,ie.source).getClusterLeaves(ie)})),this.actor.registerMessageHandler("LD",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).loadData(ie)),this.actor.registerMessageHandler("GD",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).getData()),this.actor.registerMessageHandler("LT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).reloadTile(ie)),this.actor.registerMessageHandler("AT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).abortTile(ie)),this.actor.registerMessageHandler("RMT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).removeTile(ie)),this.actor.registerMessageHandler("RS",(j,ie)=>I._(this,void 0,void 0,function*(){if(!this.workerSources[j]||!this.workerSources[j][ie.type]||!this.workerSources[j][ie.type][ie.source])return;const pe=this.workerSources[j][ie.type][ie.source];delete this.workerSources[j][ie.type][ie.source],pe.removeSource!==void 0&&pe.removeSource(ie)})),this.actor.registerMessageHandler("RM",j=>I._(this,void 0,void 0,function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j]})),this.actor.registerMessageHandler("SR",(j,ie)=>I._(this,void 0,void 0,function*(){this.referrer=ie})),this.actor.registerMessageHandler("SRPS",(j,ie)=>this._syncRTLPluginState(j,ie)),this.actor.registerMessageHandler("IS",(j,ie)=>I._(this,void 0,void 0,function*(){this.self.importScripts(ie)})),this.actor.registerMessageHandler("SI",(j,ie)=>this._setImages(j,ie)),this.actor.registerMessageHandler("UL",(j,ie)=>I._(this,void 0,void 0,function*(){this._getLayerIndex(j).update(ie.layers,ie.removedIds)})),this.actor.registerMessageHandler("SL",(j,ie)=>I._(this,void 0,void 0,function*(){this._getLayerIndex(j).replace(ie)}))}_setImages(J,j){return I._(this,void 0,void 0,function*(){this.availableImages[J]=j;for(const ie in this.workerSources[J]){const pe=this.workerSources[J][ie];for(const Re in pe)pe[Re].availableImages=j}})}_syncRTLPluginState(J,j){return I._(this,void 0,void 0,function*(){if(I.bD.isParsed())return I.bD.getState();if(j.pluginStatus!=="loading")return I.bD.setState(j),j;const ie=j.pluginURL;if(this.self.importScripts(ie),I.bD.isParsed()){const pe={pluginStatus:"loaded",pluginURL:ie};return I.bD.setState(pe),pe}throw I.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ie}`)})}_getAvailableImages(J){let j=this.availableImages[J];return j||(j=[]),j}_getLayerIndex(J){let j=this.layerIndexes[J];return j||(j=this.layerIndexes[J]=new l),j}_getWorkerSource(J,j,ie){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][j]||(this.workerSources[J][j]={}),!this.workerSources[J][j][ie]){const pe={sendAsync:(Re,Ne)=>(Re.targetMapId=J,this.actor.sendAsync(Re,Ne))};switch(j){case"vector":this.workerSources[J][j][ie]=new H(pe,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][j][ie]=new is(pe,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][j][ie]=new this.externalWorkerSourceTypes[j](pe,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][j][ie]}_getDEMWorkerSource(J,j){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][j]||(this.demWorkerSources[J][j]=new V),this.demWorkerSources[J][j]}}return I.i(self)&&(self.worker=new mn(self)),mn}),y("index",["exports","./shared"],function(I,l){var q="4.7.1";let Y,O;const H={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:g=>new Promise((e,a)=>{const c=requestAnimationFrame(e);g.signal.addEventListener("abort",()=>{cancelAnimationFrame(c),a(l.c())})}),getImageData(g,e=0){return this.getImageCanvasContext(g).getImageData(-e,-e,g.width+2*e,g.height+2*e)},getImageCanvasContext(g){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=g.width,e.height=g.height,a.drawImage(g,0,0,g.width,g.height),a},resolveURL:g=>(Y||(Y=document.createElement("a")),Y.href=g,Y.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class V{static testProp(e){if(!V.docStyle)return e[0];for(let a=0;a<e.length;a++)if(e[a]in V.docStyle)return e[a];return e[0]}static create(e,a,c){const h=window.document.createElement(e);return a!==void 0&&(h.className=a),c&&c.appendChild(h),h}static createNS(e,a){return window.document.createElementNS(e,a)}static disableDrag(){V.docStyle&&V.selectProp&&(V.userSelect=V.docStyle[V.selectProp],V.docStyle[V.selectProp]="none")}static enableDrag(){V.docStyle&&V.selectProp&&(V.docStyle[V.selectProp]=V.userSelect)}static setTransform(e,a){e.style[V.transformProp]=a}static addEventListener(e,a,c,h={}){e.addEventListener(a,c,"passive"in h?h:h.capture)}static removeEventListener(e,a,c,h={}){e.removeEventListener(a,c,"passive"in h?h:h.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",V.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",V.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",V.suppressClickInternal,!0)},0)}static getScale(e){const a=e.getBoundingClientRect();return{x:a.width/e.offsetWidth||1,y:a.height/e.offsetHeight||1,boundingClientRect:a}}static getPoint(e,a,c){const h=a.boundingClientRect;return new l.P((c.clientX-h.left)/a.x-e.clientLeft,(c.clientY-h.top)/a.y-e.clientTop)}static mousePos(e,a){const c=V.getScale(e);return V.getPoint(e,c,a)}static touchPos(e,a){const c=[],h=V.getScale(e);for(let f=0;f<a.length;f++)c.push(V.getPoint(e,h,a[f]));return c}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}V.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,V.selectProp=V.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),V.transformProp=V.testProp(["transform","WebkitTransform"]);const Ae={supported:!1,testSupport:function(g){!ot&&Be&&(pt?_t(g):Ve=g)}};let Ve,Be,ot=!1,pt=!1;function _t(g){const e=g.createTexture();g.bindTexture(g.TEXTURE_2D,e);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Be),g.isContextLost())return;Ae.supported=!0}catch{}g.deleteTexture(e),ot=!0}var ut;typeof document<"u"&&(Be=document.createElement("img"),Be.onload=()=>{Ve&&_t(Ve),Ve=null,pt=!0},Be.onerror=()=>{ot=!0,Ve=null},Be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let e,a,c,h;g.resetRequestQueue=()=>{e=[],a=0,c=0,h={}},g.addThrottleControl=Q=>{const k=c++;return h[k]=Q,k},g.removeThrottleControl=Q=>{delete h[Q],w()},g.getImage=(Q,k,R=!0)=>new Promise((z,ee)=>{Ae.supported&&(Q.headers||(Q.headers={}),Q.headers.accept="image/webp,*/*"),l.e(Q,{type:"image"}),e.push({abortController:k,requestParameters:Q,supportImageRefresh:R,state:"queued",onError:oe=>{ee(oe)},onSuccess:oe=>{z(oe)}}),w()});const f=Q=>l._(this,void 0,void 0,function*(){Q.state="running";const{requestParameters:k,supportImageRefresh:R,onError:z,onSuccess:ee,abortController:oe}=Q,ce=R===!1&&!l.i(self)&&!l.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((Ce,ke)=>Ce&&ke==="accept",!0));a++;const ye=ce?E(k,oe):l.m(k,oe);try{const Ce=yield ye;delete Q.abortController,Q.state="completed",Ce.data instanceof HTMLImageElement||l.b(Ce.data)?ee(Ce):Ce.data&&ee({data:yield(be=Ce.data,typeof createImageBitmap=="function"?l.d(be):l.f(be)),cacheControl:Ce.cacheControl,expires:Ce.expires})}catch(Ce){delete Q.abortController,z(Ce)}finally{a--,w()}var be}),w=()=>{const Q=(()=>{for(const k of Object.keys(h))if(h[k]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=a;k<Q&&e.length>0;k++){const R=e.shift();R.abortController.signal.aborted?k--:f(R)}},E=(Q,k)=>new Promise((R,z)=>{const ee=new Image,oe=Q.url,ce=Q.credentials;ce&&ce==="include"?ee.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!l.s(oe))&&(ee.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{ee.src="",z(l.c())}),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,R({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,k.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=oe})}(ut||(ut={})),ut.resetRequestQueue();class ft{constructor(e){this._transformRequestFn=e}transformRequest(e,a){return this._transformRequestFn&&this._transformRequestFn(e,a)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Ft(g){var e=new l.A(3);return e[0]=g[0],e[1]=g[1],e[2]=g[2],e}var Ut,zt=function(g,e,a){return g[0]=e[0]-a[0],g[1]=e[1]-a[1],g[2]=e[2]-a[2],g};Ut=new l.A(3),l.A!=Float32Array&&(Ut[0]=0,Ut[1]=0,Ut[2]=0);var Zt=function(g){var e=g[0],a=g[1];return e*e+a*a};function Bt(g){const e=[];if(typeof g=="string")e.push({id:"default",url:g});else if(g&&g.length>0){const a=[];for(const{id:c,url:h}of g){const f=`${c}${h}`;a.indexOf(f)===-1&&(a.push(f),e.push({id:c,url:h}))}}return e}function Gt(g,e,a){const c=g.split("?");return c[0]+=`${e}${a}`,c.join("?")}(function(){var g=new l.A(2);l.A!=Float32Array&&(g[0]=0,g[1]=0)})();class mt{constructor(e,a,c,h){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(a,h)}update(e,a,c){const{width:h,height:f}=e,w=!(this.size&&this.size[0]===h&&this.size[1]===f||c),{context:E}=this,{gl:Q}=E;if(this.useMipmap=!!(a&&a.useMipmap),Q.bindTexture(Q.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===Q.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[h,f],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||l.b(e)?Q.texImage2D(Q.TEXTURE_2D,0,this.format,this.format,Q.UNSIGNED_BYTE,e):Q.texImage2D(Q.TEXTURE_2D,0,this.format,h,f,0,this.format,Q.UNSIGNED_BYTE,e.data);else{const{x:k,y:R}=c||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||l.b(e)?Q.texSubImage2D(Q.TEXTURE_2D,0,k,R,Q.RGBA,Q.UNSIGNED_BYTE,e):Q.texSubImage2D(Q.TEXTURE_2D,0,k,R,h,f,Q.RGBA,Q.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Q.generateMipmap(Q.TEXTURE_2D)}bind(e,a,c){const{context:h}=this,{gl:f}=h;f.bindTexture(f.TEXTURE_2D,this.texture),c!==f.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=f.LINEAR),e!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,c||e),this.filter=e),a!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function st(g){const{userImage:e}=g;return!!(e&&e.render&&e.render())&&(g.data.replace(new Uint8Array(e.data.buffer)),!0)}class Et extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:a,promiseResolve:c}of this.requestors)c(this._getImagesForIds(a));this.requestors=[]}}getImage(e){const a=this.images[e];if(a&&!a.data&&a.spriteData){const c=a.spriteData;a.data=new l.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),a.spriteData=null}return a}addImage(e,a){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,a)&&(this.images[e]=a)}_validate(e,a){let c=!0;const h=a.data||a.spriteData;return this._validateStretch(a.stretchX,h&&h.width)||(this.fire(new l.j(new Error(`Image "${e}" has invalid "stretchX" value`))),c=!1),this._validateStretch(a.stretchY,h&&h.height)||(this.fire(new l.j(new Error(`Image "${e}" has invalid "stretchY" value`))),c=!1),this._validateContent(a.content,a)||(this.fire(new l.j(new Error(`Image "${e}" has invalid "content" value`))),c=!1),c}_validateStretch(e,a){if(!e)return!0;let c=0;for(const h of e){if(h[0]<c||h[1]<h[0]||a<h[1])return!1;c=h[1]}return!0}_validateContent(e,a){if(!e)return!0;if(e.length!==4)return!1;const c=a.spriteData,h=c&&c.width||a.data.width,f=c&&c.height||a.data.height;return!(e[0]<0||h<e[0]||e[1]<0||f<e[1]||e[2]<0||h<e[2]||e[3]<0||f<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,a,c=!0){const h=this.getImage(e);if(c&&(h.data.width!==a.data.width||h.data.height!==a.data.height))throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=h.version+1,this.images[e]=a,this.updatedImages[e]=!0}removeImage(e){const a=this.images[e];delete this.images[e],delete this.patterns[e],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((a,c)=>{let h=!0;if(!this.isLoaded())for(const f of e)this.images[f]||(h=!1);this.isLoaded()||h?a(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:a})})}_getImagesForIds(e){const a={};for(const c of e){let h=this.getImage(c);h||(this.fire(new l.k("styleimagemissing",{id:c})),h=this.getImage(c)),h?a[c]={data:h.data.clone(),pixelRatio:h.pixelRatio,sdf:h.sdf,version:h.version,stretchX:h.stretchX,stretchY:h.stretchY,content:h.content,textFitWidth:h.textFitWidth,textFitHeight:h.textFitHeight,hasRenderCallback:!!(h.userImage&&h.userImage.render)}:l.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:e,height:a}=this.atlasImage;return{width:e,height:a}}getPattern(e){const a=this.patterns[e],c=this.getImage(e);if(!c)return null;if(a&&a.position.version===c.version)return a.position;if(a)a.position.version=c.version;else{const h={w:c.data.width+2,h:c.data.height+2,x:0,y:0},f=new l.I(h,c);this.patterns[e]={bin:h,position:f}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const a=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new mt(e,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const f in this.patterns)e.push(this.patterns[f].bin);const{w:a,h:c}=l.p(e),h=this.atlasImage;h.resize({width:a||1,height:c||1});for(const f in this.patterns){const{bin:w}=this.patterns[f],E=w.x+1,Q=w.y+1,k=this.getImage(f).data,R=k.width,z=k.height;l.R.copy(k,h,{x:0,y:0},{x:E,y:Q},{width:R,height:z}),l.R.copy(k,h,{x:0,y:z-1},{x:E,y:Q-1},{width:R,height:1}),l.R.copy(k,h,{x:0,y:0},{x:E,y:Q+z},{width:R,height:1}),l.R.copy(k,h,{x:R-1,y:0},{x:E-1,y:Q},{width:1,height:z}),l.R.copy(k,h,{x:0,y:0},{x:E+R,y:Q},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const a of e){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const c=this.getImage(a);c||l.w(`Image with ID: "${a}" was not found`),st(c)&&this.updateImage(a,c)}}}const ni=1e20;function Li(g,e,a,c,h,f,w,E,Q){for(let k=e;k<e+c;k++)wi(g,a*f+k,f,h,w,E,Q);for(let k=a;k<a+h;k++)wi(g,k*f+e,1,c,w,E,Q)}function wi(g,e,a,c,h,f,w){f[0]=0,w[0]=-ni,w[1]=ni,h[0]=g[e];for(let E=1,Q=0,k=0;E<c;E++){h[E]=g[e+E*a];const R=E*E;do{const z=f[Q];k=(h[E]-h[z]+R-z*z)/(E-z)/2}while(k<=w[Q]&&--Q>-1);Q++,f[Q]=E,w[Q]=k,w[Q+1]=ni}for(let E=0,Q=0;E<c;E++){for(;w[Q+1]<E;)Q++;const k=f[Q],R=E-k;g[e+E*a]=h[k]+R*R}}class bi{constructor(e,a){this.requestManager=e,this.localIdeographFontFamily=a,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return l._(this,void 0,void 0,function*(){const a=[];for(const f in e)for(const w of e[f])a.push(this._getAndCacheGlyphsPromise(f,w));const c=yield Promise.all(a),h={};for(const{stack:f,id:w,glyph:E}of c)h[f]||(h[f]={}),h[f][w]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return h})}_getAndCacheGlyphsPromise(e,a){return l._(this,void 0,void 0,function*(){let c=this.entries[e];c||(c=this.entries[e]={glyphs:{},requests:{},ranges:{}});let h=c.glyphs[a];if(h!==void 0)return{stack:e,id:a,glyph:h};if(h=this._tinySDF(c,e,a),h)return c.glyphs[a]=h,{stack:e,id:a,glyph:h};const f=Math.floor(a/256);if(256*f>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[f])return{stack:e,id:a,glyph:h};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[f]){const E=bi.loadGlyphRange(e,f,this.url,this.requestManager);c.requests[f]=E}const w=yield c.requests[f];for(const E in w)this._doesCharSupportLocalGlyph(+E)||(c.glyphs[+E]=w[+E]);return c.ranges[f]=!0,{stack:e,id:a,glyph:w[a]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,a,c){const h=this.localIdeographFontFamily;if(!h||!this._doesCharSupportLocalGlyph(c))return;let f=e.tinySDF;if(!f){let E="400";/bold/i.test(a)?E="900":/medium/i.test(a)?E="500":/light/i.test(a)&&(E="200"),f=e.tinySDF=new bi.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:h,fontWeight:E})}const w=f.draw(String.fromCharCode(c));return{id:c,bitmap:new l.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}bi.loadGlyphRange=function(g,e,a,c){return l._(this,void 0,void 0,function*(){const h=256*e,f=h+255,w=c.transformRequest(a.replace("{fontstack}",g).replace("{range}",`${h}-${f}`),"Glyphs"),E=yield l.l(w,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${e}, ${h}-${f}`);const Q={};for(const k of l.n(E.data))Q[k.id]=k;return Q})},bi.TinySDF=class{constructor({fontSize:g=24,buffer:e=3,radius:a=8,cutoff:c=.25,fontFamily:h="sans-serif",fontWeight:f="normal",fontStyle:w="normal"}={}){this.buffer=e,this.cutoff=c,this.radius=a;const E=this.size=g+4*e,Q=this._createCanvas(E),k=this.ctx=Q.getContext("2d",{willReadFrequently:!0});k.font=`${w} ${f} ${g}px ${h}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(g){const e=document.createElement("canvas");return e.width=e.height=g,e}draw(g){const{width:e,actualBoundingBoxAscent:a,actualBoundingBoxDescent:c,actualBoundingBoxLeft:h,actualBoundingBoxRight:f}=this.ctx.measureText(g),w=Math.ceil(a),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-h))),Q=Math.min(this.size-this.buffer,w+Math.ceil(c)),k=E+2*this.buffer,R=Q+2*this.buffer,z=Math.max(k*R,0),ee=new Uint8ClampedArray(z),oe={data:ee,width:k,height:R,glyphWidth:E,glyphHeight:Q,glyphTop:w,glyphLeft:0,glyphAdvance:e};if(E===0||Q===0)return oe;const{ctx:ce,buffer:ye,gridInner:be,gridOuter:Ce}=this;ce.clearRect(ye,ye,E,Q),ce.fillText(g,ye,ye+w);const ke=ce.getImageData(ye,ye,E,Q);Ce.fill(ni,0,z),be.fill(0,0,z);for(let fe=0;fe<Q;fe++)for(let ze=0;ze<E;ze++){const Ue=ke.data[4*(fe*E+ze)+3]/255;if(Ue===0)continue;const Je=(fe+ye)*k+ze+ye;if(Ue===1)Ce[Je]=0,be[Je]=ni;else{const ct=.5-Ue;Ce[Je]=ct>0?ct*ct:0,be[Je]=ct<0?ct*ct:0}}Li(Ce,0,0,k,R,k,this.f,this.v,this.z),Li(be,ye,ye,E,Q,k,this.f,this.v,this.z);for(let fe=0;fe<z;fe++){const ze=Math.sqrt(Ce[fe])-Math.sqrt(be[fe]);ee[fe]=Math.round(255-255*(ze/this.radius+this.cutoff))}return oe}};class Pi{constructor(){this.specification=l.v.light.position}possiblyEvaluate(e,a){return l.x(e.expression.evaluate(a))}interpolate(e,a,c){return{x:l.y.number(e.x,a.x,c),y:l.y.number(e.y,a.y,c),z:l.y.number(e.z,a.z,c)}}}let nr;class Kr extends l.E{constructor(e){super(),nr=nr||new l.q({anchor:new l.D(l.v.light.anchor),position:new Pi,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(nr),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,a={}){if(!this._validate(l.r,e,a))for(const c in e){const h=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),h):this._transitionable.setValue(c,h)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,c){return(!c||c.validate!==!1)&&l.t(this,e.call(l.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ar=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Yi extends l.E{constructor(e){super(),this._transitionable=new l.T(Ar),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(e,a={}){if(!this._validate(l.B,e,a)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const c in e){const h=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),h):this._transitionable.setValue(c,h)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,c={}){return(c==null?void 0:c.validate)!==!1&&l.t(this,e.call(l.u,l.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class kr{constructor(e,a){this.width=e,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,a){const c=e.join(",")+String(a);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(e,a)),this.dashEntry[c]}getDashRanges(e,a,c){const h=[];let f=e.length%2==1?-e[e.length-1]*c:0,w=e[0]*c,E=!0;h.push({left:f,right:w,isDash:E,zeroLength:e[0]===0});let Q=e[0];for(let k=1;k<e.length;k++){E=!E;const R=e[k];f=Q*c,Q+=R,w=Q*c,h.push({left:f,right:w,isDash:E,zeroLength:R===0})}return h}addRoundDash(e,a,c){const h=a/2;for(let f=-c;f<=c;f++){const w=this.width*(this.nextRow+c+f);let E=0,Q=e[E];for(let k=0;k<this.width;k++){k/Q.right>1&&(Q=e[++E]);const R=Math.abs(k-Q.left),z=Math.abs(k-Q.right),ee=Math.min(R,z);let oe;const ce=f/c*(h+1);if(Q.isDash){const ye=h-Math.abs(ce);oe=Math.sqrt(ee*ee+ye*ye)}else oe=h-Math.sqrt(ee*ee+ce*ce);this.data[w+k]=Math.max(0,Math.min(255,oe+128))}}}addRegularDash(e){for(let E=e.length-1;E>=0;--E){const Q=e[E],k=e[E+1];Q.zeroLength?e.splice(E,1):k&&k.isDash===Q.isDash&&(k.left=Q.left,e.splice(E,1))}const a=e[0],c=e[e.length-1];a.isDash===c.isDash&&(a.left=c.left-this.width,c.right=a.right+this.width);const h=this.width*this.nextRow;let f=0,w=e[f];for(let E=0;E<this.width;E++){E/w.right>1&&(w=e[++f]);const Q=Math.abs(E-w.left),k=Math.abs(E-w.right),R=Math.min(Q,k);this.data[h+E]=Math.max(0,Math.min(255,(w.isDash?R:-R)+128))}}addDash(e,a){const c=a?7:0,h=2*c+1;if(this.nextRow+h>this.height)return l.w("LineAtlas out of space"),null;let f=0;for(let E=0;E<e.length;E++)f+=e[E];if(f!==0){const E=this.width/f,Q=this.getDashRanges(e,this.width,E);a?this.addRoundDash(Q,E,c):this.addRegularDash(Q)}const w={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:f};return this.nextRow+=h,this.dirty=!0,w}bind(e){const a=e.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const sn="maplibre_preloaded_worker_pool";class Er{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Er.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[sn]}numActive(){return Object.keys(this.active).length}}const $r=Math.floor(H.hardwareConcurrency/2);let dr,ar;function rn(){return dr||(dr=new Er),dr}Er.workerCount=l.C(globalThis)?Math.max(Math.min($r,3),1):1;class hn{constructor(e,a){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=a;const c=this.workerPool.acquire(a);for(let h=0;h<c.length;h++){const f=new l.F(c[h],a);f.name=`Worker ${h}`,this.actors.push(f)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,a){const c=[];for(const h of this.actors)c.push(h.sendAsync({type:e,data:a}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,a){for(const c of this.actors)c.registerMessageHandler(e,a)}}function pa(){return ar||(ar=new hn(rn(),l.G),ar.registerMessageHandler("GR",(g,e,a)=>l.m(e,a))),ar}function Se(g,e){const a=l.H();return l.J(a,a,[1,1,0]),l.K(a,a,[.5*g.width,.5*g.height,1]),l.L(a,a,g.calculatePosMatrix(e.toUnwrapped()))}function Ge(g,e,a,c,h,f){const w=function(z,ee,oe){if(z)for(const ce of z){const ye=ee[ce];if(ye&&ye.source===oe&&ye.type==="fill-extrusion")return!0}else for(const ce in ee){const ye=ee[ce];if(ye.source===oe&&ye.type==="fill-extrusion")return!0}return!1}(h&&h.layers,e,g.id),E=f.maxPitchScaleFactor(),Q=g.tilesIn(c,E,w);Q.sort(tt);const k=[];for(const z of Q)k.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(e,a,g._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,h,f,E,Se(g.transform,z.tileID))});const R=function(z){const ee={},oe={};for(const ce of z){const ye=ce.queryResults,be=ce.wrappedTileID,Ce=oe[be]=oe[be]||{};for(const ke in ye){const fe=ye[ke],ze=Ce[ke]=Ce[ke]||{},Ue=ee[ke]=ee[ke]||[];for(const Je of fe)ze[Je.featureIndex]||(ze[Je.featureIndex]=!0,Ue.push(Je))}}return ee}(k);for(const z in R)R[z].forEach(ee=>{const oe=ee.feature,ce=g.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=ce});return R}function tt(g,e){const a=g.tileID,c=e.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}function It(g,e,a){return l._(this,void 0,void 0,function*(){let c=g;if(g.url?c=(yield l.h(e.transformRequest(g.url,"Source"),a)).data:yield H.frameAsync(a),!c)return null;const h=l.M(l.e(c,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(h.vectorLayerIds=c.vector_layers.map(f=>f.id)),h})}class ve{constructor(e,a){e&&(a?this.setSouthWest(e).setNorthEast(a):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof l.N?new l.N(e.lng,e.lat):l.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof l.N?new l.N(e.lng,e.lat):l.N.convert(e),this}extend(e){const a=this._sw,c=this._ne;let h,f;if(e instanceof l.N)h=e,f=e;else{if(!(e instanceof ve))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(ve.convert(e)):this.extend(l.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(l.N.convert(e)):this;if(h=e._sw,f=e._ne,!h||!f)return this}return a||c?(a.lng=Math.min(h.lng,a.lng),a.lat=Math.min(h.lat,a.lat),c.lng=Math.max(f.lng,c.lng),c.lat=Math.max(f.lat,c.lat)):(this._sw=new l.N(h.lng,h.lat),this._ne=new l.N(f.lng,f.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:a,lat:c}=l.N.convert(e);let h=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h}static convert(e){return e instanceof ve?e:e&&new ve(e)}static fromLngLat(e,a=0){const c=360*a/40075017,h=c/Math.cos(Math.PI/180*e.lat);return new ve(new l.N(e.lng-h,e.lat-c),new l.N(e.lng+h,e.lat+c))}adjustAntiMeridian(){const e=new l.N(this._sw.lng,this._sw.lat),a=new l.N(this._ne.lng,this._ne.lat);return new ve(e,e.lng>a.lng?new l.N(a.lng+360,a.lat):a)}}class vt{constructor(e,a,c){this.bounds=ve.convert(this.validateBounds(e)),this.minzoom=a||0,this.maxzoom=c||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const a=Math.pow(2,e.z),c=Math.floor(l.O(this.bounds.getWest())*a),h=Math.floor(l.Q(this.bounds.getNorth())*a),f=Math.ceil(l.O(this.bounds.getEast())*a),w=Math.ceil(l.Q(this.bounds.getSouth())*a);return e.x>=c&&e.x<f&&e.y>=h&&e.y<w}}class Vt extends l.E{constructor(e,a,c,h){if(super(),this.id=e,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(a,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(l.e(this,e),e.bounds&&(this.tileBounds=new vt(e.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new l.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(a,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request.collectResourceTiming=this._collectResourceTiming;let h="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((f,w)=>{e.reloadPromise={resolve:f,reject:w}})}else e.actor=this.dispatcher.getActor(),h="LT";e.abortController=new AbortController;try{const f=yield e.actor.sendAsync({type:h,data:c},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,f)}catch(f){if(delete e.abortController,e.aborted)return;if(f&&f.status!==404)throw f;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,a){if(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),e.reloadPromise){const c=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(c.resolve).catch(c.reject)}}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class gt extends l.E{constructor(e,a,c,h){super(),this.id=e,this.dispatcher=c,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},a),l.e(this,l.M(a,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(l.e(this,e),e.bounds&&(this.tileBounds=new vt(e.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new l.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return l.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const c=yield ut.getImage(this.map._requestManager.transformRequest(a,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&e.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const h=this.map.painter.context,f=h.gl,w=c.data;e.texture=this.map.painter.getTileTexture(w.width),e.texture?e.texture.update(w,{useMipmap:!0}):(e.texture=new mt(h,w,f.RGBA,{useMipmap:!0}),e.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(c){if(delete e.abortController,e.aborted)e.state="unloaded";else if(c)throw e.state="errored",c}})}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class bt extends gt{constructor(e,a,c,h){super(e,a,c,h),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(a,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const h=yield ut.getImage(c,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){const f=h.data;this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const w=l.b(f)&&l.U()?f:yield this.readImageNow(f),E={type:this.type,uid:e.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const Q=yield e.actor.sendAsync({type:"LDT",data:E});e.dem=Q,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}readImageNow(e){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.V()){const a=e.width+2,c=e.height+2;try{return new l.R({width:a,height:c},yield l.W(e,-1,-1,a,c))}catch{}}return H.getImageData(e,1)})}_getNeighboringTiles(e){const a=e.canonical,c=Math.pow(2,a.z),h=(a.x-1+c)%c,f=a.x===0?e.wrap-1:e.wrap,w=(a.x+1+c)%c,E=a.x+1===c?e.wrap+1:e.wrap,Q={};return Q[new l.S(e.overscaledZ,f,a.z,h,a.y).key]={backfilled:!1},Q[new l.S(e.overscaledZ,E,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(Q[new l.S(e.overscaledZ,f,a.z,h,a.y-1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,e.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,E,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<c&&(Q[new l.S(e.overscaledZ,f,a.z,h,a.y+1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,e.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,E,a.z,w,a.y+1).key]={backfilled:!1}),Q}unloadTile(e){return l._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Ct extends l.E{constructor(e,a,c,h){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(h),this._data=a.data,this._options=l.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const f=l.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*f,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*f,extent:l.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:l.X,radius:(a.clusterRadius||50)*f,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return l._(this,void 0,void 0,function*(){const e=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,a,c){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:a,offset:c}})}_updateWorkerData(e){return l._(this,void 0,void 0,function*(){const a=l.e({type:this.type},this.workerOptions);e?a.dataDiff=e:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(H.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let h=null;c.resourceTiming&&c.resourceTiming[this.id]&&(h=c.resourceTiming[this.id].slice(0));const f={dataType:"source"};this._collectResourceTiming&&h&&h.length>0&&l.e(f,{resourceTiming:h}),this.fire(new l.k("data",Object.assign(Object.assign({},f),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},f),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(c))}})}loaded(){return this._pendingLoads===0}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.actor?"RT":"LT";e.actor=this.actor;const c={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const h=yield this.actor.sendAsync({type:a,data:c},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(h,this.map.painter,a==="RT")})}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var fi=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ot extends l.E{constructor(e,a,c,h){super(),this.id=e,this.dispatcher=c,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(h),this.options=a}load(e){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield ut.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,e&&(this.coordinates=e),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new l.j(a))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const a=e.map(l.Z.fromLngLat);this.tileID=function(h){let f=1/0,w=1/0,E=-1/0,Q=-1/0;for(const ee of h)f=Math.min(f,ee.x),w=Math.min(w,ee.y),E=Math.max(E,ee.x),Q=Math.max(Q,ee.y);const k=Math.max(E-f,Q-w),R=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),z=Math.pow(2,R);return new l.a1(R,Math.floor((f+E)/2*z),Math.floor((w+Q)/2*z))}(a),this.minzoom=this.maxzoom=this.tileID.z;const c=a.map(h=>this.tileID.getTilePoint(h)._round());return this._boundsArray=new l.$,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,l.X,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,l.X),this._boundsArray.emplaceBack(c[2].x,c[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,a=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new mt(e,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let c=!1;for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,c=!0)}c&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class hi extends Ot{constructor(e,a,c,h){super(e,a,c,h),this.roundZoom=!0,this.type="video",this.options=a}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const a of e.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield l.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new l.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const a=this.video.seekable;e<a.start(0)||e>a.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,a=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new mt(e,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let c=!1;for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,c=!0)}c&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class di extends Ot{constructor(e,a,c,h){super(e,a,c,h),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(f=>!Array.isArray(f)||f.length!==2||f.some(w=>typeof w!="number"))||this.fire(new l.j(new l.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${e}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,c=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new mt(a,this.canvas,c.RGBA,{premultiply:!0});let h=!1;for(const f in this.tiles){const w=this.tiles[f];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,h=!0)}h&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Ti={},qi=g=>{switch(g){case"geojson":return Ct;case"image":return Ot;case"raster":return gt;case"raster-dem":return bt;case"vector":return Vt;case"video":return hi;case"canvas":return di}return Ti[g]},ht="RTLPluginLoaded";class fr extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pa()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return l._(this,arguments,void 0,function*(a,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=H.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(ht))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Zi=null;function Rr(){return Zi||(Zi=new fr),Zi}class Lr{constructor(e,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=l.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const a=e+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,a,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(h,f){const w={};if(!f)return w;for(const E of h){const Q=E.layerIds.map(k=>f.getLayer(k)).filter(Boolean);if(Q.length!==0){E.layers=Q,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(k=>Q.filter(R=>R.id===k)[0]));for(const k of Q)w[k.id]=E}}return w}(e.buckets,a.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const f=this.buckets[h];if(f instanceof l.a6){if(this.hasSymbolBuckets=!0,!c)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const f=this.buckets[h];if(f instanceof l.a6&&f.hasRTLText){this.hasRTLText=!0,Rr().lazyLoad();break}}this.queryPadding=0;for(const h in this.buckets){const f=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(h).queryRadius(f))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const c in this.buckets){const h=this.buckets[c];h.uploadPending()&&h.upload(e)}const a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mt(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mt(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,a,c,h,f,w,E,Q,k,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:f,scale:w,tileSize:this.tileSize,pixelPosMatrix:R,transform:Q,params:E,queryPadding:this.queryPadding*k},e,a,c):{}}querySourceFeatures(e,a){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const h=c.loadVTLayers(),f=a&&a.sourceLayer?a.sourceLayer:"",w=h._geojsonTileLayer||h[f];if(!w)return;const E=l.a7(a&&a.filter),{z:Q,x:k,y:R}=this.tileID.canonical,z={z:Q,x:k,y:R};for(let ee=0;ee<w.length;ee++){const oe=w.feature(ee);if(E.needGeometry){const be=l.a8(oe,!0);if(!E.filter(new l.z(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!E.filter(new l.z(this.tileID.overscaledZ),oe))continue;const ce=c.getId(oe,f),ye=new l.a9(oe,Q,k,R,ce);ye.tile=z,e.push(ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const a=this.expirationTime;if(e.cacheControl){const c=l.aa(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const c=Date.now();let h=!1;if(this.expirationTime>c)h=!1;else if(a)if(this.expirationTime<a)h=!0;else{const f=this.expirationTime-a;f?this.expirationTime=c+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!a.style.hasLayer(h))continue;const f=this.buckets[h],w=f.layers[0].sourceLayer||"_geojsonTileLayer",E=c[w],Q=e[w];if(!E||!Q||Object.keys(Q).length===0)continue;f.update(Q,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=a&&a.style&&a.style.getLayer(h);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(f)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=H.now()+e}setDependencies(e,a){const c={};for(const h of a)c[h]=!0;this.dependencies[e]=c}hasDependency(e,a){for(const c of e){const h=this.dependencies[c];if(h){for(const f of a)if(h[f])return!0}}return!1}}class Qt{constructor(e,a){this.max=e,this.onRemove=a,this.reset()}reset(){for(const e in this.data)for(const a of this.data[e])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(e,a,c){const h=e.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const f={value:a,timeout:void 0};if(c!==void 0&&(f.timeout=setTimeout(()=>{this.remove(e,f)},c)),this.data[h].push(f),this.order.push(h),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const a=this.data[e].shift();return a.timeout&&clearTimeout(a.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),a.value}getByKey(e){const a=this.data[e];return a?a[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,a){if(!this.has(e))return this;const c=e.wrapped().key,h=a===void 0?0:this.data[c].indexOf(a),f=this.data[c][h];return this.data[c].splice(h,1),f.timeout&&clearTimeout(f.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(f.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(e){const a=[];for(const c in this.data)for(const h of this.data[c])e(h.value)||a.push(h);for(const c of a)this.remove(c.value.tileID,c)}}class Ei{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,a,c){const h=String(a);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][h]=this.stateChanges[e][h]||{},l.e(this.stateChanges[e][h],c),this.deletedStates[e]===null){this.deletedStates[e]={};for(const f in this.state[e])f!==h&&(this.deletedStates[e][f]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][h]===null){this.deletedStates[e][h]={};for(const f in this.state[e][h])c[f]||(this.deletedStates[e][h][f]=null)}else for(const f in c)this.deletedStates[e]&&this.deletedStates[e][h]&&this.deletedStates[e][h][f]===null&&delete this.deletedStates[e][h][f]}removeFeatureState(e,a,c){if(this.deletedStates[e]===null)return;const h=String(a);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&a!==void 0)this.deletedStates[e][h]!==null&&(this.deletedStates[e][h]=this.deletedStates[e][h]||{},this.deletedStates[e][h][c]=null);else if(a!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][h])for(c in this.deletedStates[e][h]={},this.stateChanges[e][h])this.deletedStates[e][h][c]=null;else this.deletedStates[e][h]=null;else this.deletedStates[e]=null}getState(e,a){const c=String(a),h=l.e({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const f=this.deletedStates[e][a];if(f===null)return{};for(const w in f)delete h[w]}return h}initializeTileState(e,a){e.setFeatureState(this.state,a)}coalesceChanges(e,a){const c={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const f={};for(const w in this.stateChanges[h])this.state[h][w]||(this.state[h][w]={}),l.e(this.state[h][w],this.stateChanges[h][w]),f[w]=this.state[h][w];c[h]=f}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const f={};if(this.deletedStates[h]===null)for(const w in this.state[h])f[w]={},this.state[h][w]={};else for(const w in this.deletedStates[h]){if(this.deletedStates[h][w]===null)this.state[h][w]={};else for(const E of Object.keys(this.deletedStates[h][w]))delete this.state[h][w][E];f[w]=this.state[h][w]}c[h]=c[h]||{},l.e(c[h],f)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const h in e)e[h].setFeatureState(c,a)}}class ti extends l.E{constructor(e,a,c){super(),this.id=e,this.dispatcher=c,this.on("data",h=>this._dataHandler(h)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((h,f,w,E)=>{const Q=new(qi(f.type))(h,f,w,E);if(Q.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${Q.id}`);return Q})(e,a,c,this),this._tiles={},this._cache=new Qt(0,h=>this._unloadTile(h)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ei,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const a=this._tiles[e];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,a,c){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,a,c)}catch(h){e.state="errored",h.status!==404?this._source.fire(new l.j(h,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new l.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const c=this._tiles[a];c.upload(e),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(lr).map(e=>e.key)}getRenderableIds(e){const a=[];for(const c in this._tiles)this._isIdRenderable(c,e)&&a.push(this._tiles[c]);return e?a.sort((c,h)=>{const f=c.tileID,w=h.tileID,E=new l.P(f.canonical.x,f.canonical.y)._rotate(this.transform.angle),Q=new l.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return f.overscaledZ-w.overscaledZ||Q.y-E.y||Q.x-E.x}).map(c=>c.tileID.key):a.map(c=>c.tileID).sort(lr).map(c=>c.key)}hasRenderableParent(e){const a=this.findLoadedParent(e,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(e,a){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(a||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,a){return l._(this,void 0,void 0,function*(){const c=this._tiles[e];c&&(c.state!=="loading"&&(c.state=a),yield this._loadTile(c,e,a))})}_tileLoaded(e,a,c){e.timeAdded=H.now(),c==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(a,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const a=this.getRenderableIds();for(let h=0;h<a.length;h++){const f=a[h];if(e.neighboringTiles&&e.neighboringTiles[f]){const w=this.getTileByID(f);c(e,w),c(w,e)}}function c(h,f){h.needsHillshadePrepare=!0,h.needsTerrainPrepare=!0;let w=f.tileID.canonical.x-h.tileID.canonical.x;const E=f.tileID.canonical.y-h.tileID.canonical.y,Q=Math.pow(2,h.tileID.canonical.z),k=f.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+Q)===1?w+=Q:Math.abs(w-Q)===1&&(w-=Q)),f.dem&&h.dem&&(h.dem.backfillBorder(f.dem,w,E),h.neighboringTiles&&h.neighboringTiles[k]&&(h.neighboringTiles[k].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,a,c,h){for(const f in this._tiles){let w=this._tiles[f];if(h[f]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>c)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const k=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[k.key],w&&w.hasData()&&(E=k)}let Q=E;for(;Q.overscaledZ>a;)if(Q=Q.scaledTo(Q.overscaledZ-1),e[Q.key]){h[E.key]=E;break}}}findLoadedParent(e,a){if(e.key in this._loadedParentTiles){const c=this._loadedParentTiles[e.key];return c&&c.tileID.overscaledZ>=a?c:null}for(let c=e.overscaledZ-1;c>=a;c--){const h=e.scaledTo(c),f=this._getLoadedTile(h);if(f)return f}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const a=this._tiles[e.key];return a&&a.hasData()?a:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const a=Math.ceil(e.width/this._source.tileSize)+1,c=Math.ceil(e.height/this._source.tileSize)+1,h=Math.floor(a*c*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),f=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(f)}handleWrapJump(e){const a=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,a){const c={};for(const h in this._tiles){const f=this._tiles[h];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+a),c[f.tileID.key]=f}this._tiles=c;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(h,this._tiles[h])}}_updateCoveredAndRetainedTiles(e,a,c,h,f,w){const E={},Q={},k=Object.keys(e),R=H.now();for(const z of k){const ee=e[z],oe=this._tiles[z];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=R)continue;const ce=this.findLoadedParent(ee,a),ye=this.findLoadedSibling(ee),be=ce||ye||null;be&&(this._addTile(be.tileID),E[be.tileID.key]=be.tileID),Q[z]=ee}this._retainLoadedChildren(Q,h,c,e);for(const z in E)e[z]||(this._coveredTiles[z]=!0,e[z]=E[z]);if(w){const z={},ee={};for(const oe of f)this._tiles[oe.key].hasData()?z[oe.key]=oe:ee[oe.key]=oe;for(const oe in ee){const ce=ee[oe].children(this._source.maxzoom);this._tiles[ce[0].key]&&this._tiles[ce[1].key]&&this._tiles[ce[2].key]&&this._tiles[ce[3].key]&&(z[ce[0].key]=e[ce[0].key]=ce[0],z[ce[1].key]=e[ce[1].key]=ce[1],z[ce[2].key]=e[ce[2].key]=ce[2],z[ce[3].key]=e[ce[3].key]=ce[3],delete ee[oe])}for(const oe in ee){const ce=ee[oe],ye=this.findLoadedParent(ce,this._source.minzoom),be=this.findLoadedSibling(ce),Ce=ye||be||null;if(Ce){z[Ce.tileID.key]=e[Ce.tileID.key]=Ce.tileID;for(const ke in z)z[ke].isChildOf(Ce.tileID)&&delete z[ke]}}for(const oe in this._tiles)z[oe]||(this._coveredTiles[oe]=!0)}}update(e,a){if(!this._sourceLoaded||this._paused)return;let c;this.transform=e,this.terrain=a,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new l.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(c=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(c=c.filter(R=>this._source.hasTile(R)))):c=[];const h=e.coveringZoomLevel(this._source),f=Math.max(h-ti.maxOverzooming,this._source.minzoom),w=Math.max(h+ti.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const z of c)if(z.canonical.z>this._source.minzoom){const ee=z.scaledTo(z.canonical.z-1);R[ee.key]=ee;const oe=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));R[oe.key]=oe}c=c.concat(Object.values(R))}const E=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Q=this._updateRetainedTiles(c,h);An(this._source.type)&&this._updateCoveredAndRetainedTiles(Q,f,w,h,c,a);for(const R in Q)this._tiles[R].clearFadeHold();const k=l.ab(this._tiles,Q);for(const R of k){const z=this._tiles[R];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,a){var c;const h={},f={},w=Math.max(a-ti.maxOverzooming,this._source.minzoom),E=Math.max(a+ti.maxUnderzooming,this._source.minzoom),Q={};for(const k of e){const R=this._addTile(k);h[k.key]=k,R.hasData()||a<this._source.maxzoom&&(Q[k.key]=k)}this._retainLoadedChildren(Q,a,E,h);for(const k of e){let R=this._tiles[k.key];if(R.hasData())continue;if(a+1>this._source.maxzoom){const ee=k.children(this._source.maxzoom)[0],oe=this.getTile(ee);if(oe&&oe.hasData()){h[ee.key]=ee;continue}}else{const ee=k.children(this._source.maxzoom);if(h[ee[0].key]&&h[ee[1].key]&&h[ee[2].key]&&h[ee[3].key])continue}let z=R.wasRequested();for(let ee=k.overscaledZ-1;ee>=w;--ee){const oe=k.scaledTo(ee);if(f[oe.key])break;if(f[oe.key]=!0,R=this.getTile(oe),!R&&z&&(R=this._addTile(oe)),R){const ce=R.hasData();if((ce||!(!((c=this.map)===null||c===void 0)&&c.cancelPendingTileRequestsWhileZooming)||z)&&(h[oe.key]=oe),z=R.wasRequested(),ce)break}}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const a=[];let c,h=this._tiles[e].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){c=this._loadedParentTiles[h.key];break}a.push(h.key);const f=h.scaledTo(h.overscaledZ-1);if(c=this._getLoadedTile(f),c)break;h=f}for(const f of a)this._loadedParentTiles[f]=c}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const a=this._tiles[e].tileID,c=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=c}}_addTile(e){let a=this._tiles[e.key];if(a)return a;a=this._cache.getAndRemove(e),a&&(this._setTileReloadTimer(e.key,a),a.tileID=e,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,a)));const c=a;return a||(a=new Lr(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(a,e.key,a.state)),a.uses++,this._tiles[e.key]=a,c||this._source.fire(new l.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(e,a){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const c=a.getExpiryTimeout();c&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},c))}_removeTile(e){const a=this._tiles[e];a&&(a.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(e){const a=e.sourceDataType;e.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,a,c){const h=[],f=this.transform;if(!f)return h;const w=c?f.getCameraQueryGeometry(e):e,E=e.map(ce=>f.pointCoordinate(ce,this.terrain)),Q=w.map(ce=>f.pointCoordinate(ce,this.terrain)),k=this.getIds();let R=1/0,z=1/0,ee=-1/0,oe=-1/0;for(const ce of Q)R=Math.min(R,ce.x),z=Math.min(z,ce.y),ee=Math.max(ee,ce.x),oe=Math.max(oe,ce.y);for(let ce=0;ce<k.length;ce++){const ye=this._tiles[k[ce]];if(ye.holdingForFade())continue;const be=ye.tileID,Ce=Math.pow(2,f.zoom-ye.tileID.overscaledZ),ke=a*ye.queryPadding*l.X/ye.tileSize/Ce,fe=[be.getTilePoint(new l.Z(R,z)),be.getTilePoint(new l.Z(ee,oe))];if(fe[0].x-ke<l.X&&fe[0].y-ke<l.X&&fe[1].x+ke>=0&&fe[1].y+ke>=0){const ze=E.map(Je=>be.getTilePoint(Je)),Ue=Q.map(Je=>be.getTilePoint(Je));h.push({tile:ye,tileID:be,queryGeometry:ze,cameraQueryGeometry:Ue,scale:Ce})}}return h}getVisibleCoordinates(e){const a=this.getRenderableIds(e).map(c=>this._tiles[c].tileID);for(const c of a)c.posMatrix=this.transform.calculatePosMatrix(c.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(An(this._source.type)){const e=H.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=e)return!0}return!1}setFeatureState(e,a,c){this._state.updateState(e=e||"_geojsonTileLayer",a,c)}removeFeatureState(e,a,c){this._state.removeFeatureState(e=e||"_geojsonTileLayer",a,c)}getFeatureState(e,a){return this._state.getState(e=e||"_geojsonTileLayer",a)}setDependencies(e,a,c){const h=this._tiles[e];h&&h.setDependencies(a,c)}reloadTilesForDependencies(e,a){for(const c in this._tiles)this._tiles[c].hasDependency(e,a)&&this._reloadTile(c,"reloading");this._cache.filter(c=>!c.hasDependency(e,a))}}function lr(g,e){const a=Math.abs(2*g.wrap)-+(g.wrap<0),c=Math.abs(2*e.wrap)-+(e.wrap<0);return g.overscaledZ-e.overscaledZ||c-a||e.canonical.y-g.canonical.y||e.canonical.x-g.canonical.x}function An(g){return g==="raster"||g==="image"||g==="video"}ti.maxOverzooming=10,ti.maxUnderzooming=3;class xi{constructor(e,a){this.reset(e,a)}reset(e,a){this.points=e||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=l.ac(e,0,1);let a=1,c=this._distances[a];const h=e*this.paddedLength+this.padding;for(;c<h&&a<this._distances.length;)c=this._distances[++a];const f=a-1,w=this._distances[f],E=c-w,Q=E>0?(h-w)/E:0;return this.points[f].mult(1-Q).add(this.points[a].mult(Q))}}function ma(g,e){let a=!0;return g==="always"||g!=="never"&&e!=="never"||(a=!1),a}class ya{constructor(e,a,c){const h=this.boxCells=[],f=this.circleCells=[];this.xCellCount=Math.ceil(e/c),this.yCellCount=Math.ceil(a/c);for(let w=0;w<this.xCellCount*this.yCellCount;w++)h.push([]),f.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=a,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,a,c,h,f){this._forEachCell(a,c,h,f,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(f)}insertCircle(e,a,c,h){this._forEachCell(a-h,c-h,a+h,c+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(a),this.circles.push(c),this.circles.push(h)}_insertBoxCell(e,a,c,h,f,w){this.boxCells[f].push(w)}_insertCircleCell(e,a,c,h,f,w){this.circleCells[f].push(w)}_query(e,a,c,h,f,w,E){if(c<0||e>this.width||h<0||a>this.height)return[];const Q=[];if(e<=0&&a<=0&&this.width<=c&&this.height<=h){if(f)return[{key:null,x1:e,y1:a,x2:c,y2:h}];for(let k=0;k<this.boxKeys.length;k++)Q.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const R=this.circles[3*k],z=this.circles[3*k+1],ee=this.circles[3*k+2];Q.push({key:this.circleKeys[k],x1:R-ee,y1:z-ee,x2:R+ee,y2:z+ee})}}else this._forEachCell(e,a,c,h,this._queryCell,Q,{hitTest:f,overlapMode:w,seenUids:{box:{},circle:{}}},E);return Q}query(e,a,c,h){return this._query(e,a,c,h,!1,null)}hitTest(e,a,c,h,f,w){return this._query(e,a,c,h,!0,f,w).length>0}hitTestCircle(e,a,c,h,f){const w=e-c,E=e+c,Q=a-c,k=a+c;if(E<0||w>this.width||k<0||Q>this.height)return!1;const R=[];return this._forEachCell(w,Q,E,k,this._queryCellCircle,R,{hitTest:!0,overlapMode:h,circle:{x:e,y:a,radius:c},seenUids:{box:{},circle:{}}},f),R.length>0}_queryCell(e,a,c,h,f,w,E,Q){const{seenUids:k,hitTest:R,overlapMode:z}=E,ee=this.boxCells[f];if(ee!==null){const ce=this.bboxes;for(const ye of ee)if(!k.box[ye]){k.box[ye]=!0;const be=4*ye,Ce=this.boxKeys[ye];if(e<=ce[be+2]&&a<=ce[be+3]&&c>=ce[be+0]&&h>=ce[be+1]&&(!Q||Q(Ce))&&(!R||!ma(z,Ce.overlapMode))&&(w.push({key:Ce,x1:ce[be],y1:ce[be+1],x2:ce[be+2],y2:ce[be+3]}),R))return!0}}const oe=this.circleCells[f];if(oe!==null){const ce=this.circles;for(const ye of oe)if(!k.circle[ye]){k.circle[ye]=!0;const be=3*ye,Ce=this.circleKeys[ye];if(this._circleAndRectCollide(ce[be],ce[be+1],ce[be+2],e,a,c,h)&&(!Q||Q(Ce))&&(!R||!ma(z,Ce.overlapMode))){const ke=ce[be],fe=ce[be+1],ze=ce[be+2];if(w.push({key:Ce,x1:ke-ze,y1:fe-ze,x2:ke+ze,y2:fe+ze}),R)return!0}}}return!1}_queryCellCircle(e,a,c,h,f,w,E,Q){const{circle:k,seenUids:R,overlapMode:z}=E,ee=this.boxCells[f];if(ee!==null){const ce=this.bboxes;for(const ye of ee)if(!R.box[ye]){R.box[ye]=!0;const be=4*ye,Ce=this.boxKeys[ye];if(this._circleAndRectCollide(k.x,k.y,k.radius,ce[be+0],ce[be+1],ce[be+2],ce[be+3])&&(!Q||Q(Ce))&&!ma(z,Ce.overlapMode))return w.push(!0),!0}}const oe=this.circleCells[f];if(oe!==null){const ce=this.circles;for(const ye of oe)if(!R.circle[ye]){R.circle[ye]=!0;const be=3*ye,Ce=this.circleKeys[ye];if(this._circlesCollide(ce[be],ce[be+1],ce[be+2],k.x,k.y,k.radius)&&(!Q||Q(Ce))&&!ma(z,Ce.overlapMode))return w.push(!0),!0}}}_forEachCell(e,a,c,h,f,w,E,Q){const k=this._convertToXCellCoord(e),R=this._convertToYCellCoord(a),z=this._convertToXCellCoord(c),ee=this._convertToYCellCoord(h);for(let oe=k;oe<=z;oe++)for(let ce=R;ce<=ee;ce++)if(f.call(this,e,a,c,h,this.xCellCount*ce+oe,w,E,Q))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,a,c,h,f,w){const E=h-e,Q=f-a,k=c+w;return k*k>E*E+Q*Q}_circleAndRectCollide(e,a,c,h,f,w,E){const Q=(w-h)/2,k=Math.abs(e-(h+Q));if(k>Q+c)return!1;const R=(E-f)/2,z=Math.abs(a-(f+R));if(z>R+c)return!1;if(k<=Q||z<=R)return!0;const ee=k-Q,oe=z-R;return ee*ee+oe*oe<=c*c}}function is(g,e,a,c,h){const f=l.H();return e?(l.K(f,f,[1/h,1/h,1]),a||l.ad(f,f,c.angle)):l.L(f,c.labelPlaneMatrix,g),f}function mn(g,e,a,c,h){if(e){const f=l.ae(g);return l.K(f,f,[h,h,1]),a||l.ad(f,f,-c.angle),f}return c.glCoordMatrix}function _e(g,e,a,c){let h;c?(h=[g,e,c(g,e),1],l.af(h,h,a)):(h=[g,e,0,1],Oi(h,h,a));const f=h[3];return{point:new l.P(h[0]/f,h[1]/f),signedDistanceFromCamera:f,isOccluded:!1}}function J(g,e){return .5+g/e*.5}function j(g,e){return g.x>=-e[0]&&g.x<=e[0]&&g.y>=-e[1]&&g.y<=e[1]}function ie(g,e,a,c,h,f,w,E,Q,k,R,z,ee,oe,ce){const ye=c?g.textSizeData:g.iconSizeData,be=l.ag(ye,a.transform.zoom),Ce=[256/a.width*2+1,256/a.height*2+1],ke=c?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ke.clear();const fe=g.lineVertexArray,ze=c?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ue=a.transform.width/a.transform.height;let Je=!1;for(let ct=0;ct<ze.length;ct++){const wt=ze.get(ct);if(wt.hidden||wt.writingMode===l.ah.vertical&&!Je){gi(wt.numGlyphs,ke);continue}Je=!1;const Rt=_e(wt.anchorX,wt.anchorY,e,ce);if(!j(Rt.point,Ce)){gi(wt.numGlyphs,ke);continue}const Ht=J(a.transform.cameraToCenterDistance,Rt.signedDistanceFromCamera),Pt=l.ai(ye,be,wt),Mt=w?Pt/Ht:Pt*Ht,Xt={getElevation:ce,labelPlaneMatrix:h,lineVertexArray:fe,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:k,tileAnchorPoint:new l.P(wt.anchorX,wt.anchorY),unwrappedTileID:R,width:z,height:ee,translation:oe},Ii=Ne(Xt,wt,Mt,!1,E,e,f,g.glyphOffsetArray,ke,Ue,Q);Je=Ii.useVertical,(Ii.notEnoughRoom||Je||Ii.needsFlipping&&Ne(Xt,wt,Mt,!0,E,e,f,g.glyphOffsetArray,ke,Ue,Q).notEnoughRoom)&&gi(wt.numGlyphs,ke)}c?g.text.dynamicLayoutVertexBuffer.updateData(ke):g.icon.dynamicLayoutVertexBuffer.updateData(ke)}function pe(g,e,a,c,h,f,w,E){const Q=f.glyphStartIndex+f.numGlyphs,k=f.lineStartIndex,R=f.lineStartIndex+f.lineLength,z=e.getoffsetX(f.glyphStartIndex),ee=e.getoffsetX(Q-1),oe=kt(g*z,a,c,h,f.segment,k,R,E,w);if(!oe)return null;const ce=kt(g*ee,a,c,h,f.segment,k,R,E,w);return ce?E.projectionCache.anyProjectionOccluded?null:{first:oe,last:ce}:null}function Re(g,e,a,c){return g===l.ah.horizontal&&Math.abs(a.y-e.y)>Math.abs(a.x-e.x)*c?{useVertical:!0}:(g===l.ah.vertical?e.y<a.y:e.x>a.x)?{needsFlipping:!0}:null}function Ne(g,e,a,c,h,f,w,E,Q,k,R){const z=a/24,ee=e.lineOffsetX*z,oe=e.lineOffsetY*z;let ce;if(e.numGlyphs>1){const ye=e.glyphStartIndex+e.numGlyphs,be=e.lineStartIndex,Ce=e.lineStartIndex+e.lineLength,ke=pe(z,E,ee,oe,c,e,R,g);if(!ke)return{notEnoughRoom:!0};const fe=_e(ke.first.point.x,ke.first.point.y,w,g.getElevation).point,ze=_e(ke.last.point.x,ke.last.point.y,w,g.getElevation).point;if(h&&!c){const Ue=Re(e.writingMode,fe,ze,k);if(Ue)return Ue}ce=[ke.first];for(let Ue=e.glyphStartIndex+1;Ue<ye-1;Ue++)ce.push(kt(z*E.getoffsetX(Ue),ee,oe,c,e.segment,be,Ce,g,R));ce.push(ke.last)}else{if(h&&!c){const be=_e(g.tileAnchorPoint.x,g.tileAnchorPoint.y,f,g.getElevation).point,Ce=e.lineStartIndex+e.segment+1,ke=new l.P(g.lineVertexArray.getx(Ce),g.lineVertexArray.gety(Ce)),fe=_e(ke.x,ke.y,f,g.getElevation),ze=fe.signedDistanceFromCamera>0?fe.point:function(Je,ct,wt,Rt,Ht,Pt){return je(Je,ct,wt,1,Ht,Pt)}(g.tileAnchorPoint,ke,be,0,f,g),Ue=Re(e.writingMode,be,ze,k);if(Ue)return Ue}const ye=kt(z*E.getoffsetX(e.glyphStartIndex),ee,oe,c,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,g,R);if(!ye||g.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[ye]}for(const ye of ce)l.aj(Q,ye.point,ye.angle);return{}}function je(g,e,a,c,h,f){const w=g.add(g.sub(e)._unit()),E=h!==void 0?_e(w.x,w.y,h,f.getElevation).point:Xe(w.x,w.y,f).point,Q=a.sub(E);return a.add(Q._mult(c/Q.mag()))}function Ee(g,e,a){const c=e.projectionCache;if(c.projections[g])return c.projections[g];const h=new l.P(e.lineVertexArray.getx(g),e.lineVertexArray.gety(g)),f=Xe(h.x,h.y,e);if(f.signedDistanceFromCamera>0)return c.projections[g]=f.point,c.anyProjectionOccluded=c.anyProjectionOccluded||f.isOccluded,f.point;const w=g-a.direction;return function(E,Q,k,R,z){return je(E,Q,k,R,void 0,z)}(a.distanceFromAnchor===0?e.tileAnchorPoint:new l.P(e.lineVertexArray.getx(w),e.lineVertexArray.gety(w)),h,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,e)}function Xe(g,e,a){const c=g+a.translation[0],h=e+a.translation[1];let f;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(f=a.projection.projectTileCoordinates(c,h,a.unwrappedTileID,a.getElevation),f.point.x=(.5*f.point.x+.5)*a.width,f.point.y=(.5*-f.point.y+.5)*a.height):(f=_e(c,h,a.labelPlaneMatrix,a.getElevation),f.isOccluded=!1),f}function At(g,e,a){return g._unit()._perp()._mult(e*a)}function Ze(g,e,a,c,h,f,w,E,Q){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];const k=a.add(e);if(g+Q.direction<c||g+Q.direction>=h)return E.projectionCache.offsets[g]=k,k;const R=Ee(g+Q.direction,E,Q),z=At(R.sub(a),w,Q.direction),ee=a.add(z),oe=R.add(z);return E.projectionCache.offsets[g]=l.ak(f,k,ee,oe)||k,E.projectionCache.offsets[g]}function kt(g,e,a,c,h,f,w,E,Q){const k=c?g-e:g+e;let R=k>0?1:-1,z=0;c&&(R*=-1,z=Math.PI),R<0&&(z+=Math.PI);let ee,oe=R>0?f+h:f+h+1;E.projectionCache.cachedAnchorPoint?ee=E.projectionCache.cachedAnchorPoint:(ee=Xe(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=ee);let ce,ye,be=ee,Ce=ee,ke=0,fe=0;const ze=Math.abs(k),Ue=[];let Je;for(;ke+fe<=ze;){if(oe+=R,oe<f||oe>=w)return null;ke+=fe,Ce=be,ye=ce;const Rt={absOffsetX:ze,direction:R,distanceFromAnchor:ke,previousVertex:Ce};if(be=Ee(oe,E,Rt),a===0)Ue.push(Ce),Je=be.sub(Ce);else{let Ht;const Pt=be.sub(Ce);Ht=Pt.mag()===0?At(Ee(oe+R,E,Rt).sub(be),a,R):At(Pt,a,R),ye||(ye=Ce.add(Ht)),ce=Ze(oe,Ht,be,f,w,ye,a,E,Rt),Ue.push(ye),Je=ce.sub(ye)}fe=Je.mag()}const ct=Je._mult((ze-ke)/fe)._add(ye||Ce),wt=z+Math.atan2(be.y-Ce.y,be.x-Ce.x);return Ue.push(ct),{point:ct,angle:Q?wt:0,path:Ue}}const li=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gi(g,e){for(let a=0;a<g;a++){const c=e.length;e.resize(c+4),e.float32.set(li,3*c)}}function Oi(g,e,a){const c=e[0],h=e[1];return g[0]=a[0]*c+a[4]*h+a[12],g[1]=a[1]*c+a[5]*h+a[13],g[3]=a[3]*c+a[7]*h+a[15],g}const Ci=100;class Gi{constructor(e,a,c=new ya(e.width+200,e.height+200,25),h=new ya(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=a,this.grid=c,this.ignoredGrid=h,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Ci,this.screenBottomBoundary=e.height+Ci,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,a,c,h,f,w,E,Q,k,R,z){const ee=e.anchorPointX+Q[0],oe=e.anchorPointY+Q[1],ce=this.projectAndGetPerspectiveRatio(h,ee,oe,f,R),ye=c*ce.perspectiveRatio;let be;if(w||E)be=this._projectCollisionBox(e,ye,h,f,w,E,Q,ce,R,z);else{const Ue=ce.point.x+(z?z.x*ye:0),Je=ce.point.y+(z?z.y*ye:0);be={allPointsOccluded:!1,box:[Ue+e.x1*ye,Je+e.y1*ye,Ue+e.x2*ye,Je+e.y2*ye]}}const[Ce,ke,fe,ze]=be.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?be.allPointsOccluded:this.mapProjection.isOccluded(ee,oe,f))||ce.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ce,ke,fe,ze)||a!=="always"&&this.grid.hitTest(Ce,ke,fe,ze,a,k)?{box:[Ce,ke,fe,ze],placeable:!1,offscreen:!1}:{box:[Ce,ke,fe,ze],placeable:!0,offscreen:this.isOffscreen(Ce,ke,fe,ze)}}placeCollisionCircles(e,a,c,h,f,w,E,Q,k,R,z,ee,oe,ce,ye,be){const Ce=[],ke=new l.P(a.anchorX,a.anchorY),fe=this.getPerspectiveRatio(w,ke.x,ke.y,E,be),ze=(z?f/fe:f*fe)/l.ap,Ue={getElevation:be,labelPlaneMatrix:Q,lineVertexArray:c,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ke,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:ye},Je=pe(ze,h,a.lineOffsetX*ze,a.lineOffsetY*ze,!1,a,!1,Ue);let ct=!1,wt=!1,Rt=!0;if(Je){const Ht=.5*oe*fe+ce,Pt=new l.P(-100,-100),Mt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Xt=new xi,Ii=Je.first,b=Je.last;let v=[];for(let T=Ii.path.length-1;T>=1;T--)v.push(Ii.path[T]);for(let T=1;T<b.path.length;T++)v.push(b.path[T]);const _=2.5*Ht;if(k){const T=this.projectPathToScreenSpace(v,Ue,k);v=T.some(F=>F.signedDistanceFromCamera<=0)?[]:T.map(F=>F.point)}let D=[];if(v.length>0){const T=v[0].clone(),F=v[0].clone();for(let Z=1;Z<v.length;Z++)T.x=Math.min(T.x,v[Z].x),T.y=Math.min(T.y,v[Z].y),F.x=Math.max(F.x,v[Z].x),F.y=Math.max(F.y,v[Z].y);D=T.x>=Pt.x&&F.x<=Mt.x&&T.y>=Pt.y&&F.y<=Mt.y?[v]:F.x<Pt.x||T.x>Mt.x||F.y<Pt.y||T.y>Mt.y?[]:l.al([v],Pt.x,Pt.y,Mt.x,Mt.y)}for(const T of D){Xt.reset(T,.25*Ht);let F=0;F=Xt.length<=.5*Ht?1:Math.ceil(Xt.paddedLength/_)+1;for(let Z=0;Z<F;Z++){const G=Z/Math.max(F-1,1),ne=Xt.lerp(G),$=ne.x+Ci,W=ne.y+Ci;Ce.push($,W,Ht,0);const ge=$-Ht,se=W-Ht,X=$+Ht,Ie=W+Ht;if(Rt=Rt&&this.isOffscreen(ge,se,X,Ie),wt=wt||this.isInsideGrid(ge,se,X,Ie),e!=="always"&&this.grid.hitTestCircle($,W,Ht,e,ee)&&(ct=!0,!R))return{circles:[],offscreen:!1,collisionDetected:ct}}}}return{circles:!R&&ct||!wt||fe<this.perspectiveRatioCutoff?[]:Ce,offscreen:Rt,collisionDetected:ct}}projectPathToScreenSpace(e,a,c){return e.map(h=>_e(h.x,h.y,c,a.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let c=1/0,h=1/0,f=-1/0,w=-1/0;for(const R of e){const z=new l.P(R.x+Ci,R.y+Ci);c=Math.min(c,z.x),h=Math.min(h,z.y),f=Math.max(f,z.x),w=Math.max(w,z.y),a.push(z)}const E=this.grid.query(c,h,f,w).concat(this.ignoredGrid.query(c,h,f,w)),Q={},k={};for(const R of E){const z=R.key;if(Q[z.bucketInstanceId]===void 0&&(Q[z.bucketInstanceId]={}),Q[z.bucketInstanceId][z.featureIndex])continue;const ee=[new l.P(R.x1,R.y1),new l.P(R.x2,R.y1),new l.P(R.x2,R.y2),new l.P(R.x1,R.y2)];l.am(a,ee)&&(Q[z.bucketInstanceId][z.featureIndex]=!0,k[z.bucketInstanceId]===void 0&&(k[z.bucketInstanceId]=[]),k[z.bucketInstanceId].push(z.featureIndex))}return k}insertCollisionBox(e,a,c,h,f,w){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:f,collisionGroupID:w,overlapMode:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,a,c,h,f,w){const E=c?this.ignoredGrid:this.grid,Q={bucketInstanceId:h,featureIndex:f,collisionGroupID:w,overlapMode:a};for(let k=0;k<e.length;k+=4)E.insertCircle(Q,e[k],e[k+1],e[k+2])}projectAndGetPerspectiveRatio(e,a,c,h,f){let w;f?(w=[a,c,f(a,c),1],l.af(w,w,e)):(w=[a,c,0,1],Oi(w,w,e));const E=w[3];return{point:new l.P((w[0]/E+1)/2*this.transform.width+Ci,(-w[1]/E+1)/2*this.transform.height+Ci),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(e,a,c,h,f){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,c,h,f):_e(a,c,e,f);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(e,a,c,h){return c<Ci||e>=this.screenRightBoundary||h<Ci||a>this.screenBottomBoundary}isInsideGrid(e,a,c,h){return c>=0&&e<this.gridRightBoundary&&h>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const e=l.an([]);return l.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,a,c,h,f,w,E,Q,k,R){let z=new l.P(1,0),ee=new l.P(0,1);const oe=new l.P(e.anchorPointX+E[0],e.anchorPointY+E[1]);if(w&&!f){const Rt=this.projectAndGetPerspectiveRatio(c,oe.x+1,oe.y,h,k).point.sub(Q.point).unit(),Ht=Math.atan(Rt.y/Rt.x)+(Rt.x<0?Math.PI:0),Pt=Math.sin(Ht),Mt=Math.cos(Ht);z=new l.P(Mt,Pt),ee=new l.P(-Pt,Mt)}else if(!w&&f){const Rt=-this.transform.angle,Ht=Math.sin(Rt),Pt=Math.cos(Rt);z=new l.P(Pt,Ht),ee=new l.P(-Ht,Pt)}let ce=Q.point,ye=a;if(f){ce=oe;const Rt=this.transform.zoom-Math.floor(this.transform.zoom);ye=Math.pow(2,-Rt),ye*=this.mapProjection.getPitchedTextCorrection(this.transform,oe,h),R||(ye*=l.ac(.5+Q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(ce=ce.add(z.mult(R.x*ye)).add(ee.mult(R.y*ye)));const be=e.x1*ye,Ce=e.x2*ye,ke=(be+Ce)/2,fe=e.y1*ye,ze=e.y2*ye,Ue=(fe+ze)/2,Je=[{offsetX:be,offsetY:fe},{offsetX:ke,offsetY:fe},{offsetX:Ce,offsetY:fe},{offsetX:Ce,offsetY:Ue},{offsetX:Ce,offsetY:ze},{offsetX:ke,offsetY:ze},{offsetX:be,offsetY:ze},{offsetX:be,offsetY:Ue}];let ct=[];for(const{offsetX:Rt,offsetY:Ht}of Je)ct.push(new l.P(ce.x+z.x*Rt+ee.x*Ht,ce.y+z.y*Rt+ee.y*Ht));let wt=!1;if(f){const Rt=ct.map(Ht=>this.projectAndGetPerspectiveRatio(c,Ht.x,Ht.y,h,k));wt=Rt.some(Ht=>!Ht.isOccluded),ct=Rt.map(Ht=>Ht.point)}else wt=!0;return{box:l.ao(ct),allPointsOccluded:!wt}}}function Qi(g,e,a){return e*(l.X/(g.tileSize*Math.pow(2,a-g.tileID.overscaledZ)))}class Fr{constructor(e,a,c,h){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?a:-a))):h&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class gr{constructor(e,a,c,h,f){this.text=new Fr(e?e.text:null,a,c,f),this.icon=new Fr(e?e.icon:null,a,h,f)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bi{constructor(e,a,c){this.text=e,this.icon=a,this.skipFade=c}}class Wi{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class _r{constructor(e,a,c,h,f){this.bucketInstanceId=e,this.featureIndex=a,this.sourceLayerIndex=c,this.bucketIndex=h,this.tileID=f}}class Zr{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const a=++this.maxGroupID;this.collisionGroups[e]={ID:a,predicate:c=>c.collisionGroupID===a}}return this.collisionGroups[e]}}function jr(g,e,a,c,h){const{horizontalAlign:f,verticalAlign:w}=l.au(g);return new l.P(-(f-.5)*e+c[0]*h,-(w-.5)*a+c[1]*h)}class dn{constructor(e,a,c,h,f,w){this.transform=e.clone(),this.terrain=c,this.collisionIndex=new Gi(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Zr(f),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const a=this.terrain;return a?(c,h)=>a.getElevation(e,c,h):null}getBucketParts(e,a,c,h){const f=c.getBucket(a),w=c.latestFeatureIndex;if(!f||!w||a.id!==f.layerIds[0])return;const E=c.collisionBoxArray,Q=f.layers[0].layout,k=f.layers[0].paint,R=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),z=c.tileSize/l.X,ee=c.tileID.toUnwrapped(),oe=this.transform.calculatePosMatrix(ee),ce=Q.get("text-pitch-alignment")==="map",ye=Q.get("text-rotation-alignment")==="map",be=Qi(c,1,this.transform.zoom),Ce=this.collisionIndex.mapProjection.translatePosition(this.transform,c,k.get("text-translate"),k.get("text-translate-anchor")),ke=this.collisionIndex.mapProjection.translatePosition(this.transform,c,k.get("icon-translate"),k.get("icon-translate-anchor")),fe=is(oe,ce,ye,this.transform,be);let ze=null;if(ce){const Je=mn(oe,ce,ye,this.transform,be);ze=l.L([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[f.bucketInstanceId]=new _r(f.bucketInstanceId,w,f.sourceLayerIndex,f.index,c.tileID);const Ue={bucket:f,layout:Q,translationText:Ce,translationIcon:ke,posMatrix:oe,unwrappedTileID:ee,textLabelPlaneMatrix:fe,labelToScreenMatrix:ze,scale:R,textPixelRatio:z,holdingForFade:c.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:l.ag(f.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(f.sourceID)};if(h)for(const Je of f.sortKeyRanges){const{sortKey:ct,symbolInstanceStart:wt,symbolInstanceEnd:Rt}=Je;e.push({sortKey:ct,symbolInstanceStart:wt,symbolInstanceEnd:Rt,parameters:Ue})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:f.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(e,a,c,h,f,w,E,Q,k,R,z,ee,oe,ce,ye,be,Ce,ke,fe){const ze=l.aq[e.textAnchor],Ue=[e.textOffset0,e.textOffset1],Je=jr(ze,c,h,Ue,f),ct=this.collisionIndex.placeCollisionBox(a,ee,Q,k,R,E,w,be,z.predicate,fe,Je);if((!ke||this.collisionIndex.placeCollisionBox(ke,ee,Q,k,R,E,w,Ce,z.predicate,fe,Je).placeable)&&ct.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),oe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[oe.crossTileID]={textOffset:Ue,width:c,height:h,anchor:ze,textBoxScale:f,prevAnchor:wt},this.markUsedJustification(ce,ze,oe,ye),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,ye,oe),this.placedOrientations[oe.crossTileID]=ye),{shift:Je,placedGlyphBoxes:ct}}}placeLayerBucketPart(e,a,c){const{bucket:h,layout:f,translationText:w,translationIcon:E,posMatrix:Q,unwrappedTileID:k,textLabelPlaneMatrix:R,labelToScreenMatrix:z,textPixelRatio:ee,holdingForFade:oe,collisionBoxArray:ce,partiallyEvaluatedTextSize:ye,collisionGroup:be}=e.parameters,Ce=f.get("text-optional"),ke=f.get("icon-optional"),fe=l.ar(f,"text-overlap","text-allow-overlap"),ze=fe==="always",Ue=l.ar(f,"icon-overlap","icon-allow-overlap"),Je=Ue==="always",ct=f.get("text-rotation-alignment")==="map",wt=f.get("text-pitch-alignment")==="map",Rt=f.get("icon-text-fit")!=="none",Ht=f.get("symbol-z-order")==="viewport-y",Pt=ze&&(Je||!h.hasIconData()||ke),Mt=Je&&(ze||!h.hasTextData()||Ce);!h.collisionArrays&&ce&&h.deserializeCollisionBoxes(ce);const Xt=this._getTerrainElevationFunc(this.retainedQueryData[h.bucketInstanceId].tileID),Ii=(b,v,_)=>{var D,T;if(a[b.crossTileID])return;if(oe)return void(this.placements[b.crossTileID]=new Bi(!1,!1,!1));let F=!1,Z=!1,G=!0,ne=null,$={box:null,placeable:!1,offscreen:null},W={box:null,placeable:!1,offscreen:null},ge=null,se=null,X=null,Ie=0,xe=0,Qe=0;v.textFeatureIndex?Ie=v.textFeatureIndex:b.useRuntimeCollisionCircles&&(Ie=b.featureIndex),v.verticalTextFeatureIndex&&(xe=v.verticalTextFeatureIndex);const Pe=v.textBox;if(Pe){const te=ue=>{let de=l.ah.horizontal;if(h.allowVerticalPlacement&&!ue&&this.prevPlacement){const Me=this.prevPlacement.placedOrientations[b.crossTileID];Me&&(this.placedOrientations[b.crossTileID]=Me,de=Me,this.markUsedOrientation(h,de,b))}return de},N=(ue,de)=>{if(h.allowVerticalPlacement&&b.numVerticalGlyphVertices>0&&v.verticalTextBox){for(const Me of h.writingModes)if(Me===l.ah.vertical?($=de(),W=$):$=ue(),$&&$.placeable)break}else $=ue()},he=b.textAnchorOffsetStartIndex,le=b.textAnchorOffsetEndIndex;if(le===he){const ue=(de,Me)=>{const De=this.collisionIndex.placeCollisionBox(de,fe,ee,Q,k,wt,ct,w,be.predicate,Xt);return De&&De.placeable&&(this.markUsedOrientation(h,Me,b),this.placedOrientations[b.crossTileID]=Me),De};N(()=>ue(Pe,l.ah.horizontal),()=>{const de=v.verticalTextBox;return h.allowVerticalPlacement&&b.numVerticalGlyphVertices>0&&de?ue(de,l.ah.vertical):{box:null,offscreen:null}}),te($&&$.placeable)}else{let ue=l.aq[(T=(D=this.prevPlacement)===null||D===void 0?void 0:D.variableOffsets[b.crossTileID])===null||T===void 0?void 0:T.anchor];const de=(De,Fe,We)=>{const rt=De.x2-De.x1,at=De.y2-De.y1,yt=b.textBoxScale,Tt=Rt&&Ue==="never"?Fe:null;let it=null,$e=fe==="never"?1:2,dt="never";ue&&$e++;for(let $t=0;$t<$e;$t++){for(let St=he;St<le;St++){const si=h.textAnchorOffsets.get(St);if(ue&&si.textAnchor!==ue)continue;const Dt=this.attemptAnchorPlacement(si,De,rt,at,yt,ct,wt,ee,Q,k,be,dt,b,h,We,w,E,Tt,Xt);if(Dt&&(it=Dt.placedGlyphBoxes,it&&it.placeable))return F=!0,ne=Dt.shift,it}ue?ue=null:dt=fe}return c&&!it&&(it={box:this.collisionIndex.placeCollisionBox(Pe,"always",ee,Q,k,wt,ct,w,be.predicate,Xt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),it};N(()=>de(Pe,v.iconBox,l.ah.horizontal),()=>{const De=v.verticalTextBox;return h.allowVerticalPlacement&&(!$||!$.placeable)&&b.numVerticalGlyphVertices>0&&De?de(De,v.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}}),$&&(F=$.placeable,G=$.offscreen);const Me=te($&&$.placeable);if(!F&&this.prevPlacement){const De=this.prevPlacement.variableOffsets[b.crossTileID];De&&(this.variableOffsets[b.crossTileID]=De,this.markUsedJustification(h,De.anchor,b,Me))}}}if(ge=$,F=ge&&ge.placeable,G=ge&&ge.offscreen,b.useRuntimeCollisionCircles){const te=h.text.placedSymbolArray.get(b.centerJustifiedTextSymbolIndex),N=l.ai(h.textSizeData,ye,te),he=f.get("text-padding");se=this.collisionIndex.placeCollisionCircles(fe,te,h.lineVertexArray,h.glyphOffsetArray,N,Q,k,R,z,c,wt,be.predicate,b.collisionCircleDiameter,he,w,Xt),se.circles.length&&se.collisionDetected&&!c&&l.w("Collisions detected, but collision boxes are not shown"),F=ze||se.circles.length>0&&!se.collisionDetected,G=G&&se.offscreen}if(v.iconFeatureIndex&&(Qe=v.iconFeatureIndex),v.iconBox){const te=N=>this.collisionIndex.placeCollisionBox(N,Ue,ee,Q,k,wt,ct,E,be.predicate,Xt,Rt&&ne?ne:void 0);W&&W.placeable&&v.verticalIconBox?(X=te(v.verticalIconBox),Z=X.placeable):(X=te(v.iconBox),Z=X.placeable),G=G&&X.offscreen}const Oe=Ce||b.numHorizontalGlyphVertices===0&&b.numVerticalGlyphVertices===0,Te=ke||b.numIconVertices===0;Oe||Te?Te?Oe||(Z=Z&&F):F=Z&&F:Z=F=Z&&F;const Ke=Z&&X.placeable;if(F&&ge.placeable&&this.collisionIndex.insertCollisionBox(ge.box,fe,f.get("text-ignore-placement"),h.bucketInstanceId,W&&W.placeable&&xe?xe:Ie,be.ID),Ke&&this.collisionIndex.insertCollisionBox(X.box,Ue,f.get("icon-ignore-placement"),h.bucketInstanceId,Qe,be.ID),se&&F&&this.collisionIndex.insertCollisionCircles(se.circles,fe,f.get("text-ignore-placement"),h.bucketInstanceId,Ie,be.ID),c&&this.storeCollisionData(h.bucketInstanceId,_,v,ge,X,se),b.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(h.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[b.crossTileID]=new Bi(F||Pt,Z||Mt,G||h.justReloaded),a[b.crossTileID]=!0};if(Ht){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const b=h.getSortedSymbolIndexes(this.transform.angle);for(let v=b.length-1;v>=0;--v){const _=b[v];Ii(h.symbolInstances.get(_),h.collisionArrays[_],_)}}else for(let b=e.symbolInstanceStart;b<e.symbolInstanceEnd;b++)Ii(h.symbolInstances.get(b),h.collisionArrays[b],b);if(c&&h.bucketInstanceId in this.collisionCircleArrays){const b=this.collisionCircleArrays[h.bucketInstanceId];l.as(b.invProjMatrix,Q),b.viewportMatrix=this.collisionIndex.getViewportMatrix()}h.justReloaded=!1}storeCollisionData(e,a,c,h,f,w){if(c.textBox||c.iconBox){let E,Q;this.collisionBoxArrays.has(e)?E=this.collisionBoxArrays.get(e):(E=new Map,this.collisionBoxArrays.set(e,E)),E.has(a)?Q=E.get(a):(Q={text:null,icon:null},E.set(a,Q)),c.textBox&&(Q.text=h.box),c.iconBox&&(Q.icon=f.box)}if(w){let E=this.collisionCircleArrays[e];E===void 0&&(E=this.collisionCircleArrays[e]=new Wi);for(let Q=0;Q<w.circles.length;Q+=4)E.circles.push(w.circles[Q+0]),E.circles.push(w.circles[Q+1]),E.circles.push(w.circles[Q+2]),E.circles.push(w.collisionDetected?1:0)}}markUsedJustification(e,a,c,h){let f;f=h===l.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[l.at(a)];const w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const E of w)E>=0&&(e.text.placedSymbolArray.get(E).crossTileID=f>=0&&E!==f?0:c.crossTileID)}markUsedOrientation(e,a,c){const h=a===l.ah.horizontal||a===l.ah.horizontalOnly?a:0,f=a===l.ah.vertical?a:0,w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const E of w)e.text.placedSymbolArray.get(E).placedOrientation=h;c.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=f)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let c=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const h=a?a.symbolFadeChange(e):1,f=a?a.opacities:{},w=a?a.variableOffsets:{},E=a?a.placedOrientations:{};for(const Q in this.placements){const k=this.placements[Q],R=f[Q];R?(this.opacities[Q]=new gr(R,h,k.text,k.icon),c=c||k.text!==R.text.placed||k.icon!==R.icon.placed):(this.opacities[Q]=new gr(null,h,k.text,k.icon,k.skipFade),c=c||k.text||k.icon)}for(const Q in f){const k=f[Q];if(!this.opacities[Q]){const R=new gr(k,h,!1,!1);R.isHidden()||(this.opacities[Q]=R,c=c||k.text.placed||k.icon.placed)}}for(const Q in w)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=w[Q]);for(const Q in E)this.placedOrientations[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.placedOrientations[Q]=E[Q]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:e)}updateLayerOpacities(e,a){const c={};for(const h of a){const f=h.getBucket(e);f&&h.latestFeatureIndex&&e.id===f.layerIds[0]&&this.updateBucketOpacities(f,h.tileID,c,h.collisionBoxArray)}}updateBucketOpacities(e,a,c,h){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const f=e.layers[0],w=f.layout,E=new gr(null,0,!1,!1,!0),Q=w.get("text-allow-overlap"),k=w.get("icon-allow-overlap"),R=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=w.get("text-rotation-alignment")==="map",ee=w.get("text-pitch-alignment")==="map",oe=w.get("icon-text-fit")!=="none",ce=new gr(null,0,Q&&(k||!e.hasIconData()||w.get("icon-optional")),k&&(Q||!e.hasTextData()||w.get("text-optional")),!0);!e.collisionArrays&&h&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(h);const ye=(Ce,ke,fe)=>{for(let ze=0;ze<ke/4;ze++)Ce.opacityVertexArray.emplaceBack(fe);Ce.hasVisibleVertices=Ce.hasVisibleVertices||fe!==ka},be=this.collisionBoxArrays.get(e.bucketInstanceId);for(let Ce=0;Ce<e.symbolInstances.length;Ce++){const ke=e.symbolInstances.get(Ce),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:ze,crossTileID:Ue}=ke;let Je=this.opacities[Ue];c[Ue]?Je=E:Je||(Je=ce,this.opacities[Ue]=Je),c[Ue]=!0;const ct=ke.numIconVertices>0,wt=this.placedOrientations[ke.crossTileID],Rt=wt===l.ah.vertical,Ht=wt===l.ah.horizontal||wt===l.ah.horizontalOnly;if(fe>0||ze>0){const Mt=In(Je.text);ye(e.text,fe,Rt?ka:Mt),ye(e.text,ze,Ht?ka:Mt);const Xt=Je.text.isHidden();[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(v=>{v>=0&&(e.text.placedSymbolArray.get(v).hidden=Xt||Rt?1:0)}),ke.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(ke.verticalPlacedTextSymbolIndex).hidden=Xt||Ht?1:0);const Ii=this.variableOffsets[ke.crossTileID];Ii&&this.markUsedJustification(e,Ii.anchor,ke,wt);const b=this.placedOrientations[ke.crossTileID];b&&(this.markUsedJustification(e,"left",ke,b),this.markUsedOrientation(e,b,ke))}if(ct){const Mt=In(Je.icon),Xt=!(oe&&ke.verticalPlacedIconSymbolIndex&&Rt);ke.placedIconSymbolIndex>=0&&(ye(e.icon,ke.numIconVertices,Xt?Mt:ka),e.icon.placedSymbolArray.get(ke.placedIconSymbolIndex).hidden=Je.icon.isHidden()),ke.verticalPlacedIconSymbolIndex>=0&&(ye(e.icon,ke.numVerticalIconVertices,Xt?ka:Mt),e.icon.placedSymbolArray.get(ke.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}const Pt=be&&be.has(Ce)?be.get(Ce):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Mt=e.collisionArrays[Ce];if(Mt){let Xt=new l.P(0,0);if(Mt.textBox||Mt.verticalTextBox){let Ii=!0;if(R){const b=this.variableOffsets[Ue];b?(Xt=jr(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale),z&&Xt._rotate(ee?this.transform.angle:-this.transform.angle)):Ii=!1}if(Mt.textBox||Mt.verticalTextBox){let b;Mt.textBox&&(b=Rt),Mt.verticalTextBox&&(b=Ht),Ys(e.textCollisionBox.collisionVertexArray,Je.text.placed,!Ii||b,Pt.text,Xt.x,Xt.y)}}if(Mt.iconBox||Mt.verticalIconBox){const Ii=!!(!Ht&&Mt.verticalIconBox);let b;Mt.iconBox&&(b=Ii),Mt.verticalIconBox&&(b=!Ii),Ys(e.iconCollisionBox.collisionVertexArray,Je.icon.placed,b,Pt.icon,oe?Xt.x:0,oe?Xt.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const Ce=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=Ce.invProjMatrix,e.placementViewportMatrix=Ce.viewportMatrix,e.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,a){const c=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*c>e}setStale(){this.stale=!0}}function Ys(g,e,a,c,h,f){c&&c.length!==0||(c=[0,0,0,0]);const w=c[0]-Ci,E=c[1]-Ci,Q=c[2]-Ci,k=c[3]-Ci;g.emplaceBack(e?1:0,a?1:0,h||0,f||0,w,E),g.emplaceBack(e?1:0,a?1:0,h||0,f||0,Q,E),g.emplaceBack(e?1:0,a?1:0,h||0,f||0,Q,k),g.emplaceBack(e?1:0,a?1:0,h||0,f||0,w,k)}const Xi=Math.pow(2,25),Ic=Math.pow(2,24),vc=Math.pow(2,17),Dn=Math.pow(2,16),yn=Math.pow(2,9),mh=Math.pow(2,8),_n=Math.pow(2,1);function In(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const e=g.placed?1:0,a=Math.floor(127*g.opacity);return a*Xi+e*Ic+a*vc+e*Dn+a*yn+e*mh+a*_n+e}const ka=0;function Un(){return{isOccluded:(g,e,a)=>!1,getPitchedTextCorrection:(g,e,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(g,e,a,c){throw new Error("Not implemented.")},translatePosition:(g,e,a,c)=>function(h,f,w,E,Q=!1){if(!w[0]&&!w[1])return[0,0];const k=Q?E==="map"?h.angle:0:E==="viewport"?-h.angle:0;if(k){const R=Math.sin(k),z=Math.cos(k);w=[w[0]*z-w[1]*R,w[0]*R+w[1]*z]}return[Q?w[0]:Qi(f,w[0],h.zoom),Q?w[1]:Qi(f,w[1],h.zoom)]}(g,e,a,c),getCircleRadiusCorrection:g=>1}}class Vr{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,a,c,h,f){const w=this._bucketParts;for(;this._currentTileIndex<e.length;)if(a.getBucketParts(w,h,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,f())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((E,Q)=>E.sortKey-Q.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,f())return!0;return!1}}class Eo{constructor(e,a,c,h,f,w,E,Q){this.placement=new dn(e,Un(),a,w,E,Q),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(e,a,c){const h=H.now(),f=()=>!this._forceFullPlacement&&H.now()-h>2;for(;this._currentPlacementIndex>=0;){const w=a[e[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Vr(w)),this._inProgressLayer.continuePlacement(c[w.source],this.placement,this._showCollisionBoxes,w,f))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Xn=512/l.X/2;class Mr{constructor(e,a,c){this.tileID=e,this.bucketInstanceId=c,this._symbolsByKey={};const h=new Map;for(let f=0;f<a.length;f++){const w=a.get(f),E=w.key,Q=h.get(E);Q?Q.push(w):h.set(E,[w])}for(const[f,w]of h){const E={positions:w.map(Q=>({x:Math.floor(Q.anchorX*Xn),y:Math.floor(Q.anchorY*Xn)})),crossTileIDs:w.map(Q=>Q.crossTileID)};if(E.positions.length>128){const Q=new l.av(E.positions.length,16,Uint16Array);for(const{x:k,y:R}of E.positions)Q.add(k,R);Q.finish(),delete E.positions,E.index=Q}this._symbolsByKey[f]=E}}getScaledCoordinates(e,a){const{x:c,y:h,z:f}=this.tileID.canonical,{x:w,y:E,z:Q}=a.canonical,k=Xn/Math.pow(2,Q-f),R=(E*l.X+e.anchorY)*k,z=h*l.X*Xn;return{x:Math.floor((w*l.X+e.anchorX)*k-c*l.X*Xn),y:Math.floor(R-z)}}findMatches(e,a,c){const h=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let f=0;f<e.length;f++){const w=e.get(f);if(w.crossTileID)continue;const E=this._symbolsByKey[w.key];if(!E)continue;const Q=this.getScaledCoordinates(w,a);if(E.index){const k=E.index.range(Q.x-h,Q.y-h,Q.x+h,Q.y+h).sort();for(const R of k){const z=E.crossTileIDs[R];if(!c[z]){c[z]=!0,w.crossTileID=z;break}}}else if(E.positions)for(let k=0;k<E.positions.length;k++){const R=E.positions[k],z=E.crossTileIDs[k];if(Math.abs(R.x-Q.x)<=h&&Math.abs(R.y-Q.y)<=h&&!c[z]){c[z]=!0,w.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class vl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class kn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const a=Math.round((e-this.lng)/360);if(a!==0)for(const c in this.indexes){const h=this.indexes[c],f={};for(const w in h){const E=h[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+a),f[E.tileID.key]=E}this.indexes[c]=f}this.lng=e}addBucket(e,a,c){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let f=0;f<a.symbolInstances.length;f++)a.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const h=this.usedCrossTileIDs[e.overscaledZ];for(const f in this.indexes){const w=this.indexes[f];if(Number(f)>e.overscaledZ)for(const E in w){const Q=w[E];Q.tileID.isChildOf(e)&&Q.findMatches(a.symbolInstances,e,h)}else{const E=w[e.scaledTo(Number(f)).key];E&&E.findMatches(a.symbolInstances,e,h)}}for(let f=0;f<a.symbolInstances.length;f++){const w=a.symbolInstances.get(f);w.crossTileID||(w.crossTileID=c.generate(),h[w.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Mr(e,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(e,a){for(const c of a.getCrossTileIDsLists())for(const h of c)delete this.usedCrossTileIDs[e][h]}removeStaleBuckets(e){let a=!1;for(const c in this.indexes){const h=this.indexes[c];for(const f in h)e[h[f].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,h[f]),delete h[f],a=!0)}return a}}class Qo{constructor(){this.layerIndexes={},this.crossTileIDs=new vl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,a,c){let h=this.layerIndexes[e.id];h===void 0&&(h=this.layerIndexes[e.id]=new kn);let f=!1;const w={};h.handleWrapJump(c);for(const E of a){const Q=E.getBucket(e);Q&&e.id===Q.layerIds[0]&&(Q.bucketInstanceId||(Q.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(E.tileID,Q,this.crossTileIDs)&&(f=!0),w[Q.bucketInstanceId]=!0)}return h.removeStaleBuckets(w)&&(f=!0),f}pruneUnusedLayers(e){const a={};e.forEach(c=>{a[c]=!0});for(const c in this.layerIndexes)a[c]||delete this.layerIndexes[c]}}const ea=(g,e)=>l.t(g,e&&e.filter(a=>a.identifier!=="source.canvas")),yh=l.aw();class bl extends l.E{constructor(e,a={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const h=this.sourceCaches[c].getSource().type;h!=="vector"&&h!=="geojson"||this.sourceCaches[c].reload()}},this.map=e,this.dispatcher=new hn(rn(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(c,h)=>this.getGlyphs(c,h)),this.dispatcher.registerMessageHandler("GI",(c,h)=>this.getImages(c,h)),this.imageManager=new Et,this.imageManager.setEventedParent(this),this.glyphManager=new bi(e._requestManager,a.localIdeographFontFamily),this.lineAtlas=new kr(256,512),this.crossTileSymbolIndex=new Qo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),Rr().on(ht,this._rtlPluginLoaded),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const h=this.sourceCaches[c.sourceId];if(!h)return;const f=h.getSource();if(f&&f.vectorLayerIds)for(const w in this._layers){const E=this._layers[w];E.source===f.id&&this._validateLayer(E)}})}loadURL(e,a={},c){this.fire(new l.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const h=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const f=this._loadStyleRequest;l.h(h,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,a,c)}).catch(w=>{this._loadStyleRequest=null,w&&!f.signal.aborted&&this.fire(new l.j(w))})}loadJSON(e,a={},c){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,H.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(e,a,c)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(yh,{validate:!1})}_load(e,a,c){var h;const f=a.transformStyle?a.transformStyle(c,e):e;if(!a.validate||!ea(this,l.u(f))){this._loaded=!0,this.stylesheet=f;for(const w in f.sources)this.addSource(w,f.sources[w],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs),this._createLayers(),this.light=new Kr(this.stylesheet.light),this.sky=new Yi(this.stylesheet.sky),this.map.setTerrain((h=this.stylesheet.terrain)!==null&&h!==void 0?h:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const e=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of e){const c=l.aA(a);c.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=c}}_loadSprite(e,a=!1,c=void 0){let h;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(f,w,E,Q){return l._(this,void 0,void 0,function*(){const k=Bt(f),R=E>1?"@2x":"",z={},ee={};for(const{id:oe,url:ce}of k){const ye=w.transformRequest(Gt(ce,R,".json"),"SpriteJSON");z[oe]=l.h(ye,Q);const be=w.transformRequest(Gt(ce,R,".png"),"SpriteImage");ee[oe]=ut.getImage(be,Q)}return yield Promise.all([...Object.values(z),...Object.values(ee)]),function(oe,ce){return l._(this,void 0,void 0,function*(){const ye={};for(const be in oe){ye[be]={};const Ce=H.getImageCanvasContext((yield ce[be]).data),ke=(yield oe[be]).data;for(const fe in ke){const{width:ze,height:Ue,x:Je,y:ct,sdf:wt,pixelRatio:Rt,stretchX:Ht,stretchY:Pt,content:Mt,textFitWidth:Xt,textFitHeight:Ii}=ke[fe];ye[be][fe]={data:null,pixelRatio:Rt,sdf:wt,stretchX:Ht,stretchY:Pt,content:Mt,textFitWidth:Xt,textFitHeight:Ii,spriteData:{width:ze,height:Ue,x:Je,y:ct,context:Ce}}}}return ye})}(z,ee)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(f=>{if(this._spriteRequest=null,f)for(const w in f){this._spritesImagesIds[w]=[];const E=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(Q=>!(Q in f)):[];for(const Q of E)this.imageManager.removeImage(Q),this._changedImages[Q]=!0;for(const Q in f[w]){const k=w==="default"?Q:`${w}:${Q}`;this._spritesImagesIds[w].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,f[w][Q],!1):this.imageManager.addImage(k,f[w][Q]),a&&(this._changedImages[k]=!0)}}}).catch(f=>{this._spriteRequest=null,h=f,this.fire(new l.j(h))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),c&&c(h)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(e){const a=this.sourceCaches[e.source];if(!a)return;const c=e.sourceLayer;if(!c)return;const h=a.getSource();(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(c)===-1)&&this.fire(new l.j(new Error(`Source layer "${c}" does not exist on source "${h.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,a=!1){const c=this._serializedAllLayers();if(!e||e.length===0)return Object.values(a?l.aB(c):c);const h=[];for(const f of e)if(c[f]){const w=a?l.aB(c[f]):c[f];h.push(w)}return h}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const a=Object.keys(this._layers);for(const c of a){const h=this._layers[c];h.type!=="custom"&&(e[c]=h.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const a=this._changed;if(a){const h=Object.keys(this._updatedLayers),f=Object.keys(this._removedLayers);(h.length||f.length)&&this._updateWorkerLayers(h,f);for(const w in this._updatedSources){const E=this._updatedSources[w];if(E==="reload")this._reloadSource(w);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const c={};for(const h in this.sourceCaches){const f=this.sourceCaches[h];c[h]=f.used,f.used=!1}for(const h of this._order){const f=this._layers[h];f.recalculate(e,this._availableImages),!f.isHidden(e.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}for(const h in c){const f=this.sourceCaches[h];!!c[h]!=!!f.used&&f.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:h}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,a&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,a={}){var c;this._checkLoaded();const h=this.serialize();if(e=a.transformStyle?a.transformStyle(h,e):e,((c=a.validate)===null||c===void 0||c)&&ea(this,l.u(e)))return!1;(e=l.aB(e)).layers=l.az(e.layers);const f=l.aC(h,e),w=this._getOperationsToPerform(f);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const E of w.operations)E();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const a=[],c=[];for(const h of e)switch(h.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,h.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,h.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,h.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,h.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,h.args));break;case"addSource":a.push(()=>this.addSource.apply(this,h.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,h.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,h.args));break;case"setLight":a.push(()=>this.setLight.apply(this,h.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,h.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,h.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,h.args));break;case"setSky":a.push(()=>this.setSky.apply(this,h.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,h.args));break;case"setTransition":a.push(()=>{});break;default:c.push(h.command)}return{operations:a,unimplemented:c}}addImage(e,a){if(this.getImage(e))return this.fire(new l.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,a),this._afterImageUpdated(e)}updateImage(e,a){this.imageManager.updateImage(e,a)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new l.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,a,c={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(l.u.source,`sources.${e}`,a,null,c))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const h=this.sourceCaches[e]=new ti(e,a,this.dispatcher);h.style=this,h.setEventedParent(this,()=>({isSourceLoaded:h.loaded(),source:h.serialize(),sourceId:e})),h.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===e)return this.fire(new l.j(new Error(`Source "${e}" cannot be removed while layer "${c}" is using it.`)));const a=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],a.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,a){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const c=this.sourceCaches[e].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(a),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,a,c={}){this._checkLoaded();const h=e.id;if(this.getLayer(h))return void this.fire(new l.j(new Error(`Layer "${h}" already exists on this map.`)));let f;if(e.type==="custom"){if(ea(this,l.aD(e)))return;f=l.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(h,e.source),e=l.aB(e),e=l.e(e,{source:h})),this._validate(l.u.layer,`layers.${h}`,e,{arrayIndex:-1},c))return;f=l.aA(e),this._validateLayer(f),f.setEventedParent(this,{layer:{id:h}})}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new l.j(new Error(`Cannot add layer "${h}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,h),this._layerOrderChanged=!0,this._layers[h]=f,this._removedLayers[h]&&f.source&&f.type!=="custom"){const E=this._removedLayers[h];delete this._removedLayers[h],E.type!==f.type?this._updatedSources[f.source]="clear":(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause())}this._updateLayer(f),f.onAdd&&f.onAdd(this.map)}}moveLayer(e,a){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new l.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===a)return;const c=this._order.indexOf(e);this._order.splice(c,1);const h=a?this._order.indexOf(a):this._order.length;a&&h===-1?this.fire(new l.j(new Error(`Cannot move layer "${e}" before non-existing layer "${a}".`))):(this._order.splice(h,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const a=this._layers[e];if(!a)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${e}".`)));a.setEventedParent(null);const c=this._order.indexOf(e);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=a,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],a.onRemove&&a.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,a,c){this._checkLoaded();const h=this.getLayer(e);h?h.minzoom===a&&h.maxzoom===c||(a!=null&&(h.minzoom=a),c!=null&&(h.maxzoom=c),this._updateLayer(h)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,a,c={}){this._checkLoaded();const h=this.getLayer(e);if(h){if(!l.aE(h.filter,a))return a==null?(h.filter=void 0,void this._updateLayer(h)):void(this._validate(l.u.filter,`layers.${h.id}.filter`,a,null,c)||(h.filter=l.aB(a),this._updateLayer(h)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return l.aB(this.getLayer(e).filter)}setLayoutProperty(e,a,c,h={}){this._checkLoaded();const f=this.getLayer(e);f?l.aE(f.getLayoutProperty(a),c)||(f.setLayoutProperty(a,c,h),this._updateLayer(f)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,a){const c=this.getLayer(e);if(c)return c.getLayoutProperty(a);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,a,c,h={}){this._checkLoaded();const f=this.getLayer(e);f?l.aE(f.getPaintProperty(a),c)||(f.setPaintProperty(a,c,h)&&this._updateLayer(f),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,a){return this.getLayer(e).getPaintProperty(a)}setFeatureState(e,a){this._checkLoaded();const c=e.source,h=e.sourceLayer,f=this.sourceCaches[c];if(f===void 0)return void this.fire(new l.j(new Error(`The source '${c}' does not exist in the map's style.`)));const w=f.getSource().type;w==="geojson"&&h?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||h?(e.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),f.setFeatureState(h,e.id,a)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,a){this._checkLoaded();const c=e.source,h=this.sourceCaches[c];if(h===void 0)return void this.fire(new l.j(new Error(`The source '${c}' does not exist in the map's style.`)));const f=h.getSource().type,w=f==="vector"?e.sourceLayer:void 0;f!=="vector"||w?a&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):h.removeFeatureState(w,e.id,a):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const a=e.source,c=e.sourceLayer,h=this.sourceCaches[a];if(h!==void 0)return h.getSource().type!=="vector"||c?(e.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),h.getFeatureState(c,e.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=l.aF(this.sourceCaches,f=>f.serialize()),a=this._serializeByIds(this._order,!0),c=this.map.getTerrain()||void 0,h=this.stylesheet;return l.aG({version:h.version,name:h.name,metadata:h.metadata,light:h.light,sky:h.sky,center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,sprite:h.sprite,glyphs:h.glyphs,transition:h.transition,sources:e,layers:a,terrain:c},f=>f!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const a=w=>this._layers[w].type==="fill-extrusion",c={},h=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(a(E)){c[E]=w;for(const Q of e){const k=Q[E];if(k)for(const R of k)h.push(R)}}}h.sort((w,E)=>E.intersectionZ-w.intersectionZ);const f=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(a(E))for(let Q=h.length-1;Q>=0;Q--){const k=h[Q].feature;if(c[k.layer.id]<w)break;f.push(k),h.pop()}else for(const Q of e){const k=Q[E];if(k)for(const R of k)f.push(R.feature)}}return f}queryRenderedFeatures(e,a,c){a&&a.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const h={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const E of a.layers){const Q=this._layers[E];if(!Q)return this.fire(new l.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];h[Q.source]=!0}}const f=[];a.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const E in this.sourceCaches)a.layers&&!h[E]||f.push(Ge(this.sourceCaches[E],this._layers,w,e,a,c));return this.placement&&f.push(function(E,Q,k,R,z,ee,oe){const ce={},ye=ee.queryRenderedSymbols(R),be=[];for(const Ce of Object.keys(ye).map(Number))be.push(oe[Ce]);be.sort(tt);for(const Ce of be){const ke=Ce.featureIndex.lookupSymbolFeatures(ye[Ce.bucketInstanceId],Q,Ce.bucketIndex,Ce.sourceLayerIndex,z.filter,z.layers,z.availableImages,E);for(const fe in ke){const ze=ce[fe]=ce[fe]||[],Ue=ke[fe];Ue.sort((Je,ct)=>{const wt=Ce.featureSortOrder;if(wt){const Rt=wt.indexOf(Je.featureIndex);return wt.indexOf(ct.featureIndex)-Rt}return ct.featureIndex-Je.featureIndex});for(const Je of Ue)ze.push(Je)}}for(const Ce in ce)ce[Ce].forEach(ke=>{const fe=ke.feature,ze=k[E[Ce].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=ze});return ce}(this._layers,w,this.sourceCaches,e,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)}querySourceFeatures(e,a){a&&a.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",a.filter,null,a);const c=this.sourceCaches[e];return c?function(h,f){const w=h.getRenderableIds().map(k=>h.getTileByID(k)),E=[],Q={};for(let k=0;k<w.length;k++){const R=w[k],z=R.tileID.canonical.key;Q[z]||(Q[z]=!0,R.querySourceFeatures(E,f))}return E}(c,a):[]}getLight(){return this.light.getLight()}setLight(e,a={}){this._checkLoaded();const c=this.light.getLight();let h=!1;for(const w in e)if(!l.aE(e[w],c[w])){h=!0;break}if(!h)return;const f={now:H.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,a),this.light.updateTransitions(f)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,a={}){const c=this.getSky();let h=!1;if(!e&&!c)return;if(e&&!c)h=!0;else if(!e&&c)h=!0;else for(const w in e)if(!l.aE(e[w],c[w])){h=!0;break}if(!h)return;const f={now:H.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,a),this.sky.updateTransitions(f)}_validate(e,a,c,h,f={}){return(!f||f.validate!==!1)&&ea(this,e.call(l.u,l.e({key:a,style:this.serialize(),value:c,styleSpec:l.v},h)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Rr().off(ht,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const c=this.sourceCaches[a];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const a in this.sourceCaches)this.sourceCaches[a].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,a,c,h,f=!1){let w=!1,E=!1;const Q={};for(const k of this._order){const R=this._layers[k];if(R.type!=="symbol")continue;if(!Q[R.source]){const ee=this.sourceCaches[R.source];Q[R.source]=ee.getRenderableIds(!0).map(oe=>ee.getTileByID(oe)).sort((oe,ce)=>ce.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ce.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(R,Q[R.source],e.center.lng);w=w||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((f=f||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(H.now(),e.zoom))&&(this.pauseablePlacement=new Eo(e,this.map.terrain,this._order,f,a,c,h,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(H.now()),E=!0),w&&this.pauseablePlacement.placement.setStale()),E||w)for(const k of this._order){const R=this._layers[k];R.type==="symbol"&&this.placement.updateLayerOpacities(R,Q[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(H.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,a){return l._(this,void 0,void 0,function*(){const c=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const h=this.sourceCaches[a.source];return h&&h.setDependencies(a.tileID.key,a.type,a.icons),c})}getGlyphs(e,a){return l._(this,void 0,void 0,function*(){const c=yield this.glyphManager.getGlyphs(a.stacks),h=this.sourceCaches[a.source];return h&&h.setDependencies(a.tileID.key,a.type,[""]),c})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,a={}){this._checkLoaded(),e&&this._validate(l.u.glyphs,"glyphs",e,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,a,c={},h){this._checkLoaded();const f=[{id:e,url:a}],w=[...Bt(this.stylesheet.sprite),...f];this._validate(l.u.sprite,"sprite",w,null,c)||(this.stylesheet.sprite=w,this._loadSprite(f,!0,h))}removeSprite(e){this._checkLoaded();const a=Bt(this.stylesheet.sprite);if(a.find(c=>c.id===e)){if(this._spritesImagesIds[e])for(const c of this._spritesImagesIds[e])this.imageManager.removeImage(c),this._changedImages[c]=!0;a.splice(a.findIndex(c=>c.id===e),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Bt(this.stylesheet.sprite)}setSprite(e,a={},c){this._checkLoaded(),e&&this._validate(l.u.sprite,"sprite",e,null,a)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,c):(this._unloadSprite(),c&&c(null)))}}var Is=l.Y([{name:"a_pos",type:"Int16",components:2}]);const Ma={prelude:Hi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Hi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Hi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Hi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Hi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Hi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Hi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Hi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Hi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Hi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Hi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Hi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Hi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Hi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Hi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Hi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Hi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Hi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Hi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Hi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Hi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Hi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Hi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Hi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Hi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Hi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Hi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Hi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Hi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Hi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Hi(g,e){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=e.match(/attribute ([\w]+) ([\w]+)/g),h=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),f=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=f?f.concat(h):h,E={};return{fragmentSource:g=g.replace(a,(Q,k,R,z,ee)=>(E[ee]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
varying ${R} ${z} ${ee};
#else
uniform ${R} ${z} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${R} ${z} ${ee} = u_${ee};
#endif
`)),vertexSource:e=e.replace(a,(Q,k,R,z,ee)=>{const oe=z==="float"?"vec2":"vec4",ce=ee.match(/color/)?"color":oe;return E[ee]?k==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${R} ${oe} a_${ee};
varying ${R} ${z} ${ee};
#else
uniform ${R} ${z} u_${ee};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${ce}(a_${ee}, u_${ee}_t);
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${R} ${oe} a_${ee};
#else
uniform ${R} ${z} u_${ee};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${R} ${z} ${ee} = a_${ee};
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${R} ${z} ${ee} = unpack_mix_${ce}(a_${ee}, u_${ee}_t);
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`}),staticAttributes:c,staticUniforms:w}}class bc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,a,c,h,f,w,E,Q,k){this.context=e;let R=this.boundPaintVertexBuffers.length!==h.length;for(let z=0;!R&&z<h.length;z++)this.boundPaintVertexBuffers[z]!==h[z]&&(R=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==c||R||this.boundIndexBuffer!==f||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==Q||this.boundDynamicVertexBuffer3!==k?this.freshBind(a,c,h,f,w,E,Q,k):(e.bindVertexArray.set(this.vao),E&&E.bind(),f&&f.dynamicDraw&&f.bind(),Q&&Q.bind(),k&&k.bind())}freshBind(e,a,c,h,f,w,E,Q){const k=e.numAttributes,R=this.context,z=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=h,this.boundVertexOffset=f,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=Q,a.enableAttributes(z,e);for(const ee of c)ee.enableAttributes(z,e);w&&w.enableAttributes(z,e),E&&E.enableAttributes(z,e),Q&&Q.enableAttributes(z,e),a.bind(),a.setVertexAttribPointers(z,e,f);for(const ee of c)ee.bind(),ee.setVertexAttribPointers(z,e,f);w&&(w.bind(),w.setVertexAttribPointers(z,e,f)),h&&h.bind(),E&&(E.bind(),E.setVertexAttribPointers(z,e,f)),Q&&(Q.bind(),Q.setVertexAttribPointers(z,e,f)),R.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const So=(g,e,a,c,h)=>({u_matrix:g,u_texture:0,u_ele_delta:e,u_fog_matrix:a,u_fog_color:c?c.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:c?c.calculateFogBlendOpacity(h):0,u_horizon_color:c?c.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1});function rs(g){const e=[];for(let a=0;a<g.length;a++){if(g[a]===null)continue;const c=g[a].split(" ");e.push(c.pop())}return e}class xc{constructor(e,a,c,h,f,w){const E=e.gl;this.program=E.createProgram();const Q=rs(a.staticAttributes),k=c?c.getBinderAttributes():[],R=Q.concat(k),z=Ma.prelude.staticUniforms?rs(Ma.prelude.staticUniforms):[],ee=a.staticUniforms?rs(a.staticUniforms):[],oe=c?c.getBinderUniforms():[],ce=z.concat(ee).concat(oe),ye=[];for(const Je of ce)ye.indexOf(Je)<0&&ye.push(Je);const be=c?c.defines():[];f&&be.push("#define OVERDRAW_INSPECTOR;"),w&&be.push("#define TERRAIN3D;");const Ce=be.concat(Ma.prelude.fragmentSource,a.fragmentSource).join(`
`),ke=be.concat(Ma.prelude.vertexSource,a.vertexSource).join(`
`),fe=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(fe,Ce),E.compileShader(fe),!E.getShaderParameter(fe,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(fe)}`);E.attachShader(this.program,fe);const ze=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ze,ke),E.compileShader(ze),!E.getShaderParameter(ze,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(ze)}`);E.attachShader(this.program,ze),this.attributes={};const Ue={};this.numAttributes=R.length;for(let Je=0;Je<this.numAttributes;Je++)R[Je]&&(E.bindAttribLocation(this.program,Je,R[Je]),this.attributes[R[Je]]=Je);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(ze),E.deleteShader(fe);for(let Je=0;Je<ye.length;Je++){const ct=ye[Je];if(ct&&!Ue[ct]){const wt=E.getUniformLocation(this.program,ct);wt&&(Ue[ct]=wt)}}this.fixedUniforms=h(e,Ue),this.terrainUniforms=((Je,ct)=>({u_depth:new l.aH(Je,ct.u_depth),u_terrain:new l.aH(Je,ct.u_terrain),u_terrain_dim:new l.aI(Je,ct.u_terrain_dim),u_terrain_matrix:new l.aJ(Je,ct.u_terrain_matrix),u_terrain_unpack:new l.aK(Je,ct.u_terrain_unpack),u_terrain_exaggeration:new l.aI(Je,ct.u_terrain_exaggeration)}))(e,Ue),this.binderUniforms=c?c.getUniforms(e,Ue):[]}draw(e,a,c,h,f,w,E,Q,k,R,z,ee,oe,ce,ye,be,Ce,ke){const fe=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(c),e.setStencilMode(h),e.setColorMode(f),e.setCullFace(w),Q){e.activeTexture.set(fe.TEXTURE2),fe.bindTexture(fe.TEXTURE_2D,Q.depthTexture),e.activeTexture.set(fe.TEXTURE3),fe.bindTexture(fe.TEXTURE_2D,Q.texture);for(const Ue in this.terrainUniforms)this.terrainUniforms[Ue].set(Q[Ue])}for(const Ue in this.fixedUniforms)this.fixedUniforms[Ue].set(E[Ue]);ye&&ye.setUniforms(e,this.binderUniforms,oe,{zoom:ce});let ze=0;switch(a){case fe.LINES:ze=2;break;case fe.TRIANGLES:ze=3;break;case fe.LINE_STRIP:ze=1}for(const Ue of ee.get()){const Je=Ue.vaos||(Ue.vaos={});(Je[k]||(Je[k]=new bc)).bind(e,this,R,ye?ye.getPaintVertexBuffers():[],z,Ue.vertexOffset,be,Ce,ke),fe.drawElements(a,Ue.primitiveLength*ze,fe.UNSIGNED_SHORT,Ue.primitiveOffset*ze*2)}}}function xl(g,e,a){const c=1/Qi(a,1,e.transform.tileZoom),h=Math.pow(2,a.tileID.overscaledZ),f=a.tileSize*Math.pow(2,e.transform.tileZoom)/h,w=f*(a.tileID.canonical.x+a.tileID.wrap*h),E=f*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[w>>16,E>>16],u_pixel_coord_lower:[65535&w,65535&E]}}const Do=(g,e,a,c)=>{const h=e.style.light,f=h.properties.get("position"),w=[f.x,f.y,f.z],E=function(){var k=new l.A(9);return l.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();h.properties.get("anchor")==="viewport"&&function(k,R){var z=Math.sin(R),ee=Math.cos(R);k[0]=ee,k[1]=z,k[2]=0,k[3]=-z,k[4]=ee,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(E,-e.transform.angle),function(k,R,z){var ee=R[0],oe=R[1],ce=R[2];k[0]=ee*z[0]+oe*z[3]+ce*z[6],k[1]=ee*z[1]+oe*z[4]+ce*z[7],k[2]=ee*z[2]+oe*z[5]+ce*z[8]}(w,w,E);const Q=h.properties.get("color");return{u_matrix:g,u_lightpos:w,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[Q.r,Q.g,Q.b],u_vertical_gradient:+a,u_opacity:c}},_a=(g,e,a,c,h,f,w)=>l.e(Do(g,e,a,c),xl(f,e,w),{u_height_factor:-Math.pow(2,h.overscaledZ)/w.tileSize/8}),ns=g=>({u_matrix:g}),vs=(g,e,a,c)=>l.e(ns(g),xl(a,e,c)),_h=(g,e)=>({u_matrix:g,u_world:e}),ko=(g,e,a,c,h)=>l.e(vs(g,e,a,c),{u_world:h}),Ih=(g,e,a,c)=>{const h=g.transform;let f,w;if(c.paint.get("circle-pitch-alignment")==="map"){const E=Qi(a,1,h.zoom);f=!0,w=[E,E]}else f=!1,w=h.pixelsToGLUnits;return{u_camera_to_center_distance:h.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(e.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+f,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:w}},Ta=(g,e,a)=>({u_matrix:g,u_inv_matrix:e,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),Ks=(g,e,a=1)=>({u_matrix:g,u_color:e,u_overlay:0,u_overlay_scale:a}),zr=g=>({u_matrix:g}),Wr=(g,e,a,c)=>({u_matrix:g,u_extrude_scale:Qi(e,1,a),u_intensity:c}),bs=(g,e,a,c)=>{const h=l.H();l.aP(h,0,g.width,g.height,0,0,1);const f=g.context.gl;return{u_matrix:h,u_world:[f.drawingBufferWidth,f.drawingBufferHeight],u_image:a,u_color_ramp:c,u_opacity:e.paint.get("heatmap-opacity")}};function wl(g,e){const a=Math.pow(2,e.canonical.z),c=e.canonical.y;return[new l.Z(0,c/a).toLngLat().lat,new l.Z(0,(c+1)/a).toLngLat().lat]}const $s=(g,e,a,c)=>{const h=g.transform;return{u_matrix:Bl(g,e,a,c),u_ratio:1/Qi(e,1,h.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Cl=(g,e,a,c,h)=>l.e($s(g,e,a,h),{u_image:0,u_image_height:c}),xs=(g,e,a,c,h)=>{const f=g.transform,w=wc(e,f);return{u_matrix:Bl(g,e,a,h),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Qi(e,1,f.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},yu=(g,e,a,c,h,f)=>{const w=g.lineAtlas,E=wc(e,g.transform),Q=a.layout.get("line-cap")==="round",k=w.getDash(c.from,Q),R=w.getDash(c.to,Q),z=k.width*h.fromScale,ee=R.width*h.toScale;return l.e($s(g,e,a,f),{u_patternscale_a:[E/z,-k.height/2],u_patternscale_b:[E/ee,-R.height/2],u_sdfgamma:w.width/(256*Math.min(z,ee)*g.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:R.y,u_mix:h.t})};function wc(g,e){return 1/Qi(g,1,e.tileZoom)}function Bl(g,e,a,c){return g.translatePosMatrix(c?c.posMatrix:e.tileID.posMatrix,e,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const El=(g,e,a,c,h)=>{return{u_matrix:g,u_tl_parent:e,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(w=h.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(f=h.paint.get("raster-contrast"),f>0?1/(1-f):1+f),u_spin_weights:vh(h.paint.get("raster-hue-rotate"))};var f,w};function vh(g){g*=Math.PI/180;const e=Math.sin(g),a=Math.cos(g);return[(2*a+1)/3,(-Math.sqrt(3)*e-a+1)/3,(Math.sqrt(3)*e-a+1)/3]}const Cc=(g,e,a,c,h,f,w,E,Q,k,R,z,ee,oe)=>{const ce=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:ce.width/ce.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:Q,u_coord_matrix:k,u_is_text:+z,u_pitch_with_map:+c,u_is_along_line:h,u_is_variable_anchor:f,u_texsize:ee,u_texture:0,u_translation:R,u_pitched_scale:oe}},Mo=(g,e,a,c,h,f,w,E,Q,k,R,z,ee,oe,ce)=>{const ye=w.transform;return l.e(Cc(g,e,a,c,h,f,w,E,Q,k,R,z,ee,ce),{u_gamma_scale:c?Math.cos(ye._pitch)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+oe})},Ql=(g,e,a,c,h,f,w,E,Q,k,R,z,ee,oe)=>l.e(Mo(g,e,a,c,h,f,w,E,Q,k,R,!0,z,!0,oe),{u_texsize_icon:ee,u_texture_icon:1}),Sl=(g,e,a)=>({u_matrix:g,u_opacity:e,u_color:a}),Bc=(g,e,a,c,h,f)=>l.e(function(w,E,Q,k){const R=Q.imageManager.getPattern(w.from.toString()),z=Q.imageManager.getPattern(w.to.toString()),{width:ee,height:oe}=Q.imageManager.getPixelSize(),ce=Math.pow(2,k.tileID.overscaledZ),ye=k.tileSize*Math.pow(2,Q.transform.tileZoom)/ce,be=ye*(k.tileID.canonical.x+k.tileID.wrap*ce),Ce=ye*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[ee,oe],u_mix:E.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Qi(k,1,Q.transform.tileZoom),u_pixel_coord_upper:[be>>16,Ce>>16],u_pixel_coord_lower:[65535&be,65535&Ce]}}(c,f,a,h),{u_matrix:g,u_opacity:e}),Ec={fillExtrusion:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_lightpos:new l.aN(g,e.u_lightpos),u_lightintensity:new l.aI(g,e.u_lightintensity),u_lightcolor:new l.aN(g,e.u_lightcolor),u_vertical_gradient:new l.aI(g,e.u_vertical_gradient),u_opacity:new l.aI(g,e.u_opacity)}),fillExtrusionPattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_lightpos:new l.aN(g,e.u_lightpos),u_lightintensity:new l.aI(g,e.u_lightintensity),u_lightcolor:new l.aN(g,e.u_lightcolor),u_vertical_gradient:new l.aI(g,e.u_vertical_gradient),u_height_factor:new l.aI(g,e.u_height_factor),u_image:new l.aH(g,e.u_image),u_texsize:new l.aO(g,e.u_texsize),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade),u_opacity:new l.aI(g,e.u_opacity)}),fill:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix)}),fillPattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_image:new l.aH(g,e.u_image),u_texsize:new l.aO(g,e.u_texsize),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade)}),fillOutline:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_world:new l.aO(g,e.u_world)}),fillOutlinePattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_world:new l.aO(g,e.u_world),u_image:new l.aH(g,e.u_image),u_texsize:new l.aO(g,e.u_texsize),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade)}),circle:(g,e)=>({u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_scale_with_map:new l.aH(g,e.u_scale_with_map),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_extrude_scale:new l.aO(g,e.u_extrude_scale),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_matrix:new l.aJ(g,e.u_matrix)}),collisionBox:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_pixel_extrude_scale:new l.aO(g,e.u_pixel_extrude_scale)}),collisionCircle:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_inv_matrix:new l.aJ(g,e.u_inv_matrix),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_viewport_size:new l.aO(g,e.u_viewport_size)}),debug:(g,e)=>({u_color:new l.aL(g,e.u_color),u_matrix:new l.aJ(g,e.u_matrix),u_overlay:new l.aH(g,e.u_overlay),u_overlay_scale:new l.aI(g,e.u_overlay_scale)}),clippingMask:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix)}),heatmap:(g,e)=>({u_extrude_scale:new l.aI(g,e.u_extrude_scale),u_intensity:new l.aI(g,e.u_intensity),u_matrix:new l.aJ(g,e.u_matrix)}),heatmapTexture:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_world:new l.aO(g,e.u_world),u_image:new l.aH(g,e.u_image),u_color_ramp:new l.aH(g,e.u_color_ramp),u_opacity:new l.aI(g,e.u_opacity)}),hillshade:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_image:new l.aH(g,e.u_image),u_latrange:new l.aO(g,e.u_latrange),u_light:new l.aO(g,e.u_light),u_shadow:new l.aL(g,e.u_shadow),u_highlight:new l.aL(g,e.u_highlight),u_accent:new l.aL(g,e.u_accent)}),hillshadePrepare:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_image:new l.aH(g,e.u_image),u_dimension:new l.aO(g,e.u_dimension),u_zoom:new l.aI(g,e.u_zoom),u_unpack:new l.aK(g,e.u_unpack)}),line:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels)}),lineGradient:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels),u_image:new l.aH(g,e.u_image),u_image_height:new l.aI(g,e.u_image_height)}),linePattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_texsize:new l.aO(g,e.u_texsize),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_image:new l.aH(g,e.u_image),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade)}),lineSDF:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels),u_patternscale_a:new l.aO(g,e.u_patternscale_a),u_patternscale_b:new l.aO(g,e.u_patternscale_b),u_sdfgamma:new l.aI(g,e.u_sdfgamma),u_image:new l.aH(g,e.u_image),u_tex_y_a:new l.aI(g,e.u_tex_y_a),u_tex_y_b:new l.aI(g,e.u_tex_y_b),u_mix:new l.aI(g,e.u_mix)}),raster:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_tl_parent:new l.aO(g,e.u_tl_parent),u_scale_parent:new l.aI(g,e.u_scale_parent),u_buffer_scale:new l.aI(g,e.u_buffer_scale),u_fade_t:new l.aI(g,e.u_fade_t),u_opacity:new l.aI(g,e.u_opacity),u_image0:new l.aH(g,e.u_image0),u_image1:new l.aH(g,e.u_image1),u_brightness_low:new l.aI(g,e.u_brightness_low),u_brightness_high:new l.aI(g,e.u_brightness_high),u_saturation_factor:new l.aI(g,e.u_saturation_factor),u_contrast_factor:new l.aI(g,e.u_contrast_factor),u_spin_weights:new l.aN(g,e.u_spin_weights)}),symbolIcon:(g,e)=>({u_is_size_zoom_constant:new l.aH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(g,e.u_is_size_feature_constant),u_size_t:new l.aI(g,e.u_size_t),u_size:new l.aI(g,e.u_size),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_pitch:new l.aI(g,e.u_pitch),u_rotate_symbol:new l.aH(g,e.u_rotate_symbol),u_aspect_ratio:new l.aI(g,e.u_aspect_ratio),u_fade_change:new l.aI(g,e.u_fade_change),u_matrix:new l.aJ(g,e.u_matrix),u_label_plane_matrix:new l.aJ(g,e.u_label_plane_matrix),u_coord_matrix:new l.aJ(g,e.u_coord_matrix),u_is_text:new l.aH(g,e.u_is_text),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_is_along_line:new l.aH(g,e.u_is_along_line),u_is_variable_anchor:new l.aH(g,e.u_is_variable_anchor),u_texsize:new l.aO(g,e.u_texsize),u_texture:new l.aH(g,e.u_texture),u_translation:new l.aO(g,e.u_translation),u_pitched_scale:new l.aI(g,e.u_pitched_scale)}),symbolSDF:(g,e)=>({u_is_size_zoom_constant:new l.aH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(g,e.u_is_size_feature_constant),u_size_t:new l.aI(g,e.u_size_t),u_size:new l.aI(g,e.u_size),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_pitch:new l.aI(g,e.u_pitch),u_rotate_symbol:new l.aH(g,e.u_rotate_symbol),u_aspect_ratio:new l.aI(g,e.u_aspect_ratio),u_fade_change:new l.aI(g,e.u_fade_change),u_matrix:new l.aJ(g,e.u_matrix),u_label_plane_matrix:new l.aJ(g,e.u_label_plane_matrix),u_coord_matrix:new l.aJ(g,e.u_coord_matrix),u_is_text:new l.aH(g,e.u_is_text),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_is_along_line:new l.aH(g,e.u_is_along_line),u_is_variable_anchor:new l.aH(g,e.u_is_variable_anchor),u_texsize:new l.aO(g,e.u_texsize),u_texture:new l.aH(g,e.u_texture),u_gamma_scale:new l.aI(g,e.u_gamma_scale),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_is_halo:new l.aH(g,e.u_is_halo),u_translation:new l.aO(g,e.u_translation),u_pitched_scale:new l.aI(g,e.u_pitched_scale)}),symbolTextAndIcon:(g,e)=>({u_is_size_zoom_constant:new l.aH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(g,e.u_is_size_feature_constant),u_size_t:new l.aI(g,e.u_size_t),u_size:new l.aI(g,e.u_size),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_pitch:new l.aI(g,e.u_pitch),u_rotate_symbol:new l.aH(g,e.u_rotate_symbol),u_aspect_ratio:new l.aI(g,e.u_aspect_ratio),u_fade_change:new l.aI(g,e.u_fade_change),u_matrix:new l.aJ(g,e.u_matrix),u_label_plane_matrix:new l.aJ(g,e.u_label_plane_matrix),u_coord_matrix:new l.aJ(g,e.u_coord_matrix),u_is_text:new l.aH(g,e.u_is_text),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_is_along_line:new l.aH(g,e.u_is_along_line),u_is_variable_anchor:new l.aH(g,e.u_is_variable_anchor),u_texsize:new l.aO(g,e.u_texsize),u_texsize_icon:new l.aO(g,e.u_texsize_icon),u_texture:new l.aH(g,e.u_texture),u_texture_icon:new l.aH(g,e.u_texture_icon),u_gamma_scale:new l.aI(g,e.u_gamma_scale),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_is_halo:new l.aH(g,e.u_is_halo),u_translation:new l.aO(g,e.u_translation),u_pitched_scale:new l.aI(g,e.u_pitched_scale)}),background:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_opacity:new l.aI(g,e.u_opacity),u_color:new l.aL(g,e.u_color)}),backgroundPattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_opacity:new l.aI(g,e.u_opacity),u_image:new l.aH(g,e.u_image),u_pattern_tl_a:new l.aO(g,e.u_pattern_tl_a),u_pattern_br_a:new l.aO(g,e.u_pattern_br_a),u_pattern_tl_b:new l.aO(g,e.u_pattern_tl_b),u_pattern_br_b:new l.aO(g,e.u_pattern_br_b),u_texsize:new l.aO(g,e.u_texsize),u_mix:new l.aI(g,e.u_mix),u_pattern_size_a:new l.aO(g,e.u_pattern_size_a),u_pattern_size_b:new l.aO(g,e.u_pattern_size_b),u_scale_a:new l.aI(g,e.u_scale_a),u_scale_b:new l.aI(g,e.u_scale_b),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(g,e.u_tile_units_to_pixels)}),terrain:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_texture:new l.aH(g,e.u_texture),u_ele_delta:new l.aI(g,e.u_ele_delta),u_fog_matrix:new l.aJ(g,e.u_fog_matrix),u_fog_color:new l.aL(g,e.u_fog_color),u_fog_ground_blend:new l.aI(g,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(g,e.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(g,e.u_horizon_color),u_horizon_fog_blend:new l.aI(g,e.u_horizon_fog_blend)}),terrainDepth:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ele_delta:new l.aI(g,e.u_ele_delta)}),terrainCoords:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_texture:new l.aH(g,e.u_texture),u_terrain_coords_id:new l.aI(g,e.u_terrain_coords_id),u_ele_delta:new l.aI(g,e.u_ele_delta)}),sky:(g,e)=>({u_sky_color:new l.aL(g,e.u_sky_color),u_horizon_color:new l.aL(g,e.u_horizon_color),u_horizon:new l.aI(g,e.u_horizon),u_sky_horizon_blend:new l.aI(g,e.u_sky_horizon_blend)})};class Mn{constructor(e,a,c){this.context=e;const h=e.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Qc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dl{constructor(e,a,c,h){this.length=a.length,this.attributes=c,this.itemSize=a.bytesPerElement,this.dynamicDraw=h,this.context=e;const f=e.gl;this.buffer=f.createBuffer(),e.bindVertexBuffer.set(this.buffer),f.bufferData(f.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,a){for(let c=0;c<this.attributes.length;c++){const h=a.attributes[this.attributes[c].name];h!==void 0&&e.enableVertexAttribArray(h)}}setVertexAttribPointers(e,a,c){for(let h=0;h<this.attributes.length;h++){const f=this.attributes[h],w=a.attributes[f.name];w!==void 0&&e.vertexAttribPointer(w,f.components,e[Qc[f.type]],!1,this.itemSize,f.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pa=new WeakMap;function Ra(g){var e;if(Pa.has(g))return Pa.get(g);{const a=(e=g.getParameter(g.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Pa.set(g,a),a}}class Ni{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class as extends Ni{getDefault(){return l.aM.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class kl extends Ni{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class ta extends Ni{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class To extends Ni{getDefault(){return[!0,!0,!0,!0]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ia extends Ni{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class bh extends Ni{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class _u extends Ni{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const a=this.current;(e.func!==a.func||e.ref!==a.ref||e.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Sc extends Ni{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Iu extends Ni{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=e,this.dirty=!1}}class vu extends Ni{getDefault(){return[0,1]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class bu extends Ni{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=e,this.dirty=!1}}class xu extends Ni{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ss extends Ni{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.BLEND):a.disable(a.BLEND),this.current=e,this.dirty=!1}}class Dc extends Ni{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class wu extends Ni{getDefault(){return l.aM.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Zs extends Ni{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Ws extends Ni{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=e,this.dirty=!1}}class ws extends Ni{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class kc extends Ni{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class vn extends Ni{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Mc extends Ni{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Tc extends Ni{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Po extends Ni{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class La extends Ni{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class os extends Ni{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Ro extends Ni{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Ia extends Ni{getDefault(){return null}set(e){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Tn extends Ni{getDefault(){return null}set(e){var a;if(e===this.current&&!this.dirty)return;const c=this.gl;Ra(c)?c.bindVertexArray(e):(a=c.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ml extends Ni{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Xs extends Ni{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Tl extends Ni{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Cs extends Ni{constructor(e,a){super(e),this.context=e,this.parent=a}getDefault(){return null}}class Bs extends Cs{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Pl extends Cs{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Cu extends Cs{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class xh{constructor(e,a,c,h,f){this.context=e,this.width=a,this.height=c;const w=e.gl,E=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Bs(e,E),h)this.depthAttachment=f?new Cu(e,E):new Pl(e,E);else if(f)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,a=this.colorAttachment.get();if(a&&e.deleteTexture(a),this.depthAttachment){const c=this.depthAttachment.get();c&&e.deleteRenderbuffer(c)}e.deleteFramebuffer(this.framebuffer)}}class Tr{constructor(e,a,c){this.blendFunction=e,this.blendColor=a,this.mask=c}}Tr.Replace=[1,0],Tr.disabled=new Tr(Tr.Replace,l.aM.transparent,[!1,!1,!1,!1]),Tr.unblended=new Tr(Tr.Replace,l.aM.transparent,[!0,!0,!0,!0]),Tr.alphaBlended=new Tr([1,771],l.aM.transparent,[!0,!0,!0,!0]);class wh{constructor(e){var a,c;if(this.gl=e,this.clearColor=new as(this),this.clearDepth=new kl(this),this.clearStencil=new ta(this),this.colorMask=new To(this),this.depthMask=new ia(this),this.stencilMask=new bh(this),this.stencilFunc=new _u(this),this.stencilOp=new Sc(this),this.stencilTest=new Iu(this),this.depthRange=new vu(this),this.depthTest=new bu(this),this.depthFunc=new xu(this),this.blend=new ss(this),this.blendFunc=new Dc(this),this.blendColor=new wu(this),this.blendEquation=new Zs(this),this.cullFace=new Ws(this),this.cullFaceSide=new ws(this),this.frontFace=new kc(this),this.program=new vn(this),this.activeTexture=new Mc(this),this.viewport=new Tc(this),this.bindFramebuffer=new Po(this),this.bindRenderbuffer=new La(this),this.bindTexture=new os(this),this.bindVertexBuffer=new Ro(this),this.bindElementBuffer=new Ia(this),this.bindVertexArray=new Tn(this),this.pixelStoreUnpack=new Ml(this),this.pixelStoreUnpackPremultiplyAlpha=new Xs(this),this.pixelStoreUnpackFlipY=new Tl(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Ra(e)){this.HALF_FLOAT=e.HALF_FLOAT;const h=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=e.RGBA16F)!==null&&a!==void 0?a:h==null?void 0:h.RGBA16F_EXT,this.RGB16F=(c=e.RGB16F)!==null&&c!==void 0?c:h==null?void 0:h.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const h=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=h==null?void 0:h.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,a){return new Mn(this,e,a)}createVertexBuffer(e,a,c){return new Dl(this,e,a,c)}createRenderbuffer(e,a,c){const h=this.gl,f=h.createRenderbuffer();return this.bindRenderbuffer.set(f),h.renderbufferStorage(h.RENDERBUFFER,e,a,c),this.bindRenderbuffer.set(null),f}createFramebuffer(e,a,c,h){return new xh(this,e,a,c,h)}clear({color:e,depth:a,stencil:c}){const h=this.gl;let f=0;e&&(f|=h.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(f|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c!==void 0&&(f|=h.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),h.clear(f)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){l.aE(e.blendFunction,Tr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Ra(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var a;return Ra(this.gl)?this.gl.deleteVertexArray(e):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Si{constructor(e,a,c){this.func=e,this.mask=a,this.range=c}}Si.ReadOnly=!1,Si.ReadWrite=!0,Si.disabled=new Si(519,Si.ReadOnly,[0,1]);const Pc=7680;class er{constructor(e,a,c,h,f,w){this.test=e,this.ref=a,this.mask=c,this.fail=h,this.depthFail=f,this.pass=w}}er.disabled=new er({func:519,mask:0},0,0,Pc,Pc,Pc);class ji{constructor(e,a,c){this.enable=e,this.mode=a,this.frontFace=c}}let Es;function Qs(g,e,a,c,h){const f=g.context,w=f.gl,E=g.useProgram("collisionBox"),Q=[];let k=0,R=0;for(let Ce=0;Ce<c.length;Ce++){const ke=c[Ce],fe=e.getTile(ke).getBucket(a);if(!fe)continue;const ze=h?fe.textCollisionBox:fe.iconCollisionBox,Ue=fe.collisionCircleArray;if(Ue.length>0){const Je=l.H();l.aQ(Je,fe.placementInvProjMatrix,g.transform.glCoordMatrix),l.aQ(Je,Je,fe.placementViewportMatrix),Q.push({circleArray:Ue,circleOffset:R,transform:ke.posMatrix,invTransform:Je,coord:ke}),k+=Ue.length/4,R=k}ze&&E.draw(f,w.LINES,Si.disabled,er.disabled,g.colorModeForRenderPass(),ji.disabled,{u_matrix:ke.posMatrix,u_pixel_extrude_scale:[1/(z=g.transform).width,1/z.height]},g.style.map.terrain&&g.style.map.terrain.getTerrainData(ke),a.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,g.transform.zoom,null,null,ze.collisionVertexBuffer)}var z;if(!h||!Q.length)return;const ee=g.useProgram("collisionCircle"),oe=new l.aR;oe.resize(4*k),oe._trim();let ce=0;for(const Ce of Q)for(let ke=0;ke<Ce.circleArray.length/4;ke++){const fe=4*ke,ze=Ce.circleArray[fe+0],Ue=Ce.circleArray[fe+1],Je=Ce.circleArray[fe+2],ct=Ce.circleArray[fe+3];oe.emplace(ce++,ze,Ue,Je,ct,0),oe.emplace(ce++,ze,Ue,Je,ct,1),oe.emplace(ce++,ze,Ue,Je,ct,2),oe.emplace(ce++,ze,Ue,Je,ct,3)}(!Es||Es.length<2*k)&&(Es=function(Ce){const ke=2*Ce,fe=new l.aT;fe.resize(ke),fe._trim();for(let ze=0;ze<ke;ze++){const Ue=6*ze;fe.uint16[Ue+0]=4*ze+0,fe.uint16[Ue+1]=4*ze+1,fe.uint16[Ue+2]=4*ze+2,fe.uint16[Ue+3]=4*ze+2,fe.uint16[Ue+4]=4*ze+3,fe.uint16[Ue+5]=4*ze+0}return fe}(k));const ye=f.createIndexBuffer(Es,!0),be=f.createVertexBuffer(oe,l.aS.members,!0);for(const Ce of Q){const ke=Ta(Ce.transform,Ce.invTransform,g.transform);ee.draw(f,w.TRIANGLES,Si.disabled,er.disabled,g.colorModeForRenderPass(),ji.disabled,ke,g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ce.coord),a.id,be,ye,l.a0.simpleSegment(0,2*Ce.circleOffset,Ce.circleArray.length,Ce.circleArray.length/2),null,g.transform.zoom,null,null,null)}be.destroy(),ye.destroy()}ji.disabled=new ji(!1,1029,2305),ji.backCCW=new ji(!0,1029,2305);const Rl=l.an(new Float32Array(16));function Ss(g,e,a,c,h,f){const{horizontalAlign:w,verticalAlign:E}=l.au(g);return new l.P((-(w-.5)*e/h+c[0])*f,(-(E-.5)*a/h+c[1])*f)}function Ds(g,e,a,c,h,f){const w=e.tileAnchorPoint.add(new l.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let E=c.mult(f);a||(E=E.rotate(-h));const Q=w.add(E);return _e(Q.x,Q.y,e.labelPlaneMatrix,e.getElevation).point}if(a){const E=Xe(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(g),Q=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(c.rotate(Q))}return g.add(c)}function nn(g,e,a,c,h,f,w,E,Q,k,R,z,ee,oe){const ce=g.text.placedSymbolArray,ye=g.text.dynamicLayoutVertexArray,be=g.icon.dynamicLayoutVertexArray,Ce={};ye.clear();for(let ke=0;ke<ce.length;ke++){const fe=ce.get(ke),ze=fe.hidden||!fe.crossTileID||g.allowVerticalPlacement&&!fe.placedOrientation?null:c[fe.crossTileID];if(ze){const Ue=new l.P(fe.anchorX,fe.anchorY),Je={getElevation:oe,width:h.width,height:h.height,labelPlaneMatrix:f,lineVertexArray:null,pitchWithMap:a,projection:R,projectionCache:null,tileAnchorPoint:Ue,translation:z,unwrappedTileID:ee},ct=a?_e(Ue.x,Ue.y,w,oe):Xe(Ue.x,Ue.y,Je),wt=J(h.cameraToCenterDistance,ct.signedDistanceFromCamera);let Rt=l.ai(g.textSizeData,Q,fe)*wt/l.ap;a&&(Rt*=g.tilePixelRatio/E);const{width:Ht,height:Pt,anchor:Mt,textOffset:Xt,textBoxScale:Ii}=ze,b=Ss(Mt,Ht,Pt,Xt,Ii,Rt),v=R.getPitchedTextCorrection(h,Ue.add(new l.P(z[0],z[1])),ee),_=Ds(ct.point,Je,e,b,h.angle,v),D=g.allowVerticalPlacement&&fe.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let T=0;T<fe.numGlyphs;T++)l.aj(ye,_,D);k&&fe.associatedIconIndex>=0&&(Ce[fe.associatedIconIndex]={shiftedAnchor:_,angle:D})}else gi(fe.numGlyphs,ye)}if(k){be.clear();const ke=g.icon.placedSymbolArray;for(let fe=0;fe<ke.length;fe++){const ze=ke.get(fe);if(ze.hidden)gi(ze.numGlyphs,be);else{const Ue=Ce[fe];if(Ue)for(let Je=0;Je<ze.numGlyphs;Je++)l.aj(be,Ue.shiftedAnchor,Ue.angle);else gi(ze.numGlyphs,be)}}g.icon.dynamicLayoutVertexBuffer.updateData(be)}g.text.dynamicLayoutVertexBuffer.updateData(ye)}function Ll(g,e,a){return a.iconsInText&&e?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Rc(g,e,a,c,h,f,w,E,Q,k,R,z){const ee=g.context,oe=ee.gl,ce=g.transform,ye=Un(),be=E==="map",Ce=Q==="map",ke=E!=="viewport"&&a.layout.get("symbol-placement")!=="point",fe=be&&!Ce&&!ke,ze=!Ce&&ke,Ue=!a.layout.get("symbol-sort-key").isConstant();let Je=!1;const ct=g.depthModeForSublayer(0,Si.ReadOnly),wt=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Rt=[],Ht=ye.getCircleRadiusCorrection(ce);for(const Pt of c){const Mt=e.getTile(Pt),Xt=Mt.getBucket(a);if(!Xt)continue;const Ii=h?Xt.text:Xt.icon;if(!Ii||!Ii.segments.get().length||!Ii.hasVisibleVertices)continue;const b=Ii.programConfigurations.get(a.id),v=h||Xt.sdfIcons,_=h?Xt.textSizeData:Xt.iconSizeData,D=Ce||ce.pitch!==0,T=g.useProgram(Ll(v,h,Xt),b),F=l.ag(_,ce.zoom),Z=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Pt);let G,ne,$,W,ge=[0,0],se=null;if(h)ne=Mt.glyphAtlasTexture,$=oe.LINEAR,G=Mt.glyphAtlasTexture.size,Xt.iconsInText&&(ge=Mt.imageAtlasTexture.size,se=Mt.imageAtlasTexture,W=D||g.options.rotating||g.options.zooming||_.kind==="composite"||_.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const De=a.layout.get("icon-size").constantOr(0)!==1||Xt.iconsNeedLinear;ne=Mt.imageAtlasTexture,$=v||g.options.rotating||g.options.zooming||De||D?oe.LINEAR:oe.NEAREST,G=Mt.imageAtlasTexture.size}const X=Qi(Mt,1,g.transform.zoom),Ie=ze?Pt.posMatrix:Rl,xe=is(Ie,Ce,be,g.transform,X),Qe=mn(Ie,Ce,be,g.transform,X),Pe=mn(Pt.posMatrix,Ce,be,g.transform,X),Oe=ye.translatePosition(g.transform,Mt,f,w),Te=wt&&Xt.hasTextData(),Ke=a.layout.get("icon-text-fit")!=="none"&&Te&&Xt.hasIconData();if(ke){const De=g.style.map.terrain?(We,rt)=>g.style.map.terrain.getElevation(Pt,We,rt):null,Fe=a.layout.get("text-rotation-alignment")==="map";ie(Xt,Pt.posMatrix,g,h,xe,Pe,Ce,k,Fe,ye,Pt.toUnwrapped(),ce.width,ce.height,Oe,De)}const te=Pt.posMatrix,N=h&&wt||Ke,he=ke||N?Rl:xe,le=Qe,ue=v&&a.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let de;de=v?Xt.iconsInText?Ql(_.kind,F,fe,Ce,ke,N,g,te,he,le,Oe,G,ge,Ht):Mo(_.kind,F,fe,Ce,ke,N,g,te,he,le,Oe,h,G,!0,Ht):Cc(_.kind,F,fe,Ce,ke,N,g,te,he,le,Oe,h,G,Ht);const Me={program:T,buffers:Ii,uniformValues:de,atlasTexture:ne,atlasTextureIcon:se,atlasInterpolation:$,atlasInterpolationIcon:W,isSDF:v,hasHalo:ue};if(Ue&&Xt.canOverlap){Je=!0;const De=Ii.segments.get();for(const Fe of De)Rt.push({segments:new l.a0([Fe]),sortKey:Fe.sortKey,state:Me,terrainData:Z})}else Rt.push({segments:Ii.segments,sortKey:0,state:Me,terrainData:Z})}Je&&Rt.sort((Pt,Mt)=>Pt.sortKey-Mt.sortKey);for(const Pt of Rt){const Mt=Pt.state;if(ee.activeTexture.set(oe.TEXTURE0),Mt.atlasTexture.bind(Mt.atlasInterpolation,oe.CLAMP_TO_EDGE),Mt.atlasTextureIcon&&(ee.activeTexture.set(oe.TEXTURE1),Mt.atlasTextureIcon&&Mt.atlasTextureIcon.bind(Mt.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Mt.isSDF){const Xt=Mt.uniformValues;Mt.hasHalo&&(Xt.u_is_halo=1,Fl(Mt.buffers,Pt.segments,a,g,Mt.program,ct,R,z,Xt,Pt.terrainData)),Xt.u_is_halo=0}Fl(Mt.buffers,Pt.segments,a,g,Mt.program,ct,R,z,Mt.uniformValues,Pt.terrainData)}}function Fl(g,e,a,c,h,f,w,E,Q,k){const R=c.context;h.draw(R,R.gl.TRIANGLES,f,w,E,ji.disabled,Q,k,a.id,g.layoutVertexBuffer,g.indexBuffer,e,a.paint,c.transform.zoom,g.programConfigurations.get(a.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function ks(g,e,a,c){const h=g.context,f=h.gl,w=er.disabled,E=new Tr([f.ONE,f.ONE],l.aM.transparent,[!0,!0,!0,!0]),Q=e.getBucket(a);if(!Q)return;const k=c.key;let R=a.heatmapFbos.get(k);R||(R=va(h,e.tileSize,e.tileSize),a.heatmapFbos.set(k,R)),h.bindFramebuffer.set(R.framebuffer),h.viewport.set([0,0,e.tileSize,e.tileSize]),h.clear({color:l.aM.transparent});const z=Q.programConfigurations.get(a.id),ee=g.useProgram("heatmap",z),oe=g.style.map.terrain.getTerrainData(c);ee.draw(h,f.TRIANGLES,Si.disabled,w,E,ji.disabled,Wr(c.posMatrix,e,g.transform.zoom,a.paint.get("heatmap-intensity")),oe,a.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,a.paint,g.transform.zoom,z)}function Ms(g,e,a){const c=g.context,h=c.gl;c.setColorMode(g.colorModeForRenderPass());const f=Ts(c,e),w=a.key,E=e.heatmapFbos.get(w);E&&(c.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,E.colorAttachment.get()),c.activeTexture.set(h.TEXTURE1),f.bind(h.LINEAR,h.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(c,h.TRIANGLES,Si.disabled,er.disabled,g.colorModeForRenderPass(),ji.disabled,bs(g,e,0,1),null,e.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,e.paint,g.transform.zoom),E.destroy(),e.heatmapFbos.delete(w))}function va(g,e,a){var c,h;const f=g.gl,w=f.createTexture();f.bindTexture(f.TEXTURE_2D,w),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);const E=(c=g.HALF_FLOAT)!==null&&c!==void 0?c:f.UNSIGNED_BYTE,Q=(h=g.RGBA16F)!==null&&h!==void 0?h:f.RGBA;f.texImage2D(f.TEXTURE_2D,0,Q,e,a,0,f.RGBA,E,null);const k=g.createFramebuffer(e,a,!1,!1);return k.colorAttachment.set(w),k}function Ts(g,e){return e.colorRampTexture||(e.colorRampTexture=new mt(g,e.colorRamp,g.gl.RGBA)),e.colorRampTexture}function Lo(g,e,a,c,h){if(!a||!c||!c.imageAtlas)return;const f=c.imageAtlas.patternPositions;let w=f[a.to.toString()],E=f[a.from.toString()];if(!w&&E&&(w=E),!E&&w&&(E=w),!w||!E){const Q=h.getPaintProperty(e);w=f[Q],E=f[Q]}w&&E&&g.setConstantPatternPositions(w,E)}function eo(g,e,a,c,h,f,w){const E=g.context.gl,Q="fill-pattern",k=a.paint.get(Q),R=k&&k.constantOr(1),z=a.getCrossfadeParameters();let ee,oe,ce,ye,be;w?(oe=R&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=E.LINES):(oe=R?"fillPattern":"fill",ee=E.TRIANGLES);const Ce=k.constantOr(null);for(const ke of c){const fe=e.getTile(ke);if(R&&!fe.patternsLoaded())continue;const ze=fe.getBucket(a);if(!ze)continue;const Ue=ze.programConfigurations.get(a.id),Je=g.useProgram(oe,Ue),ct=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ke);R&&(g.context.activeTexture.set(E.TEXTURE0),fe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Ue.updatePaintBuffers(z)),Lo(Ue,Q,Ce,fe,a);const wt=ct?ke:null,Rt=g.translatePosMatrix(wt?wt.posMatrix:ke.posMatrix,fe,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){ye=ze.indexBuffer2,be=ze.segments2;const Ht=[E.drawingBufferWidth,E.drawingBufferHeight];ce=oe==="fillOutlinePattern"&&R?ko(Rt,g,z,fe,Ht):_h(Rt,Ht)}else ye=ze.indexBuffer,be=ze.segments,ce=R?vs(Rt,g,z,fe):ns(Rt);Je.draw(g.context,ee,h,g.stencilModeForClipping(ke),f,ji.disabled,ce,ct,a.id,ze.layoutVertexBuffer,ye,be,a.paint,g.transform.zoom,Ue)}}function ba(g,e,a,c,h,f,w){const E=g.context,Q=E.gl,k="fill-extrusion-pattern",R=a.paint.get(k),z=R.constantOr(1),ee=a.getCrossfadeParameters(),oe=a.paint.get("fill-extrusion-opacity"),ce=R.constantOr(null);for(const ye of c){const be=e.getTile(ye),Ce=be.getBucket(a);if(!Ce)continue;const ke=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ye),fe=Ce.programConfigurations.get(a.id),ze=g.useProgram(z?"fillExtrusionPattern":"fillExtrusion",fe);z&&(g.context.activeTexture.set(Q.TEXTURE0),be.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),fe.updatePaintBuffers(ee)),Lo(fe,k,ce,be,a);const Ue=g.translatePosMatrix(ye.posMatrix,be,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Je=a.paint.get("fill-extrusion-vertical-gradient"),ct=z?_a(Ue,g,Je,oe,ye,ee,be):Do(Ue,g,Je,oe);ze.draw(E,E.gl.TRIANGLES,h,f,w,ji.backCCW,ct,ke,a.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,a.paint,g.transform.zoom,fe,g.style.map.terrain&&Ce.centroidVertexBuffer)}}function Ps(g,e,a,c,h,f,w){const E=g.context,Q=E.gl,k=a.fbo;if(!k)return;const R=g.useProgram("hillshade"),z=g.style.map.terrain&&g.style.map.terrain.getTerrainData(e);E.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,k.colorAttachment.get()),R.draw(E,Q.TRIANGLES,h,f,w,ji.disabled,((ee,oe,ce,ye)=>{const be=ce.paint.get("hillshade-shadow-color"),Ce=ce.paint.get("hillshade-highlight-color"),ke=ce.paint.get("hillshade-accent-color");let fe=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=ee.transform.angle);const ze=!ee.options.moving;return{u_matrix:ye?ye.posMatrix:ee.transform.calculatePosMatrix(oe.tileID.toUnwrapped(),ze),u_image:0,u_latrange:wl(0,oe.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),fe],u_shadow:be,u_highlight:Ce,u_accent:ke}})(g,a,c,z?e:null),z,c.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function Lc(g,e,a,c,h,f){const w=g.context,E=w.gl,Q=e.dem;if(Q&&Q.data){const k=Q.dim,R=Q.stride,z=Q.getPixels();if(w.activeTexture.set(E.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||g.getTileTexture(R),e.demTexture){const oe=e.demTexture;oe.update(z,{premultiply:!1}),oe.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else e.demTexture=new mt(w,z,E.RGBA,{premultiply:!1}),e.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);w.activeTexture.set(E.TEXTURE0);let ee=e.fbo;if(!ee){const oe=new mt(w,{width:k,height:k,data:null},E.RGBA);oe.bind(E.LINEAR,E.CLAMP_TO_EDGE),ee=e.fbo=w.createFramebuffer(k,k,!0,!1),ee.colorAttachment.set(oe.texture)}w.bindFramebuffer.set(ee.framebuffer),w.viewport.set([0,0,k,k]),g.useProgram("hillshadePrepare").draw(w,E.TRIANGLES,c,h,f,ji.disabled,((oe,ce)=>{const ye=ce.stride,be=l.H();return l.aP(be,0,l.X,-l.X,0,0,1),l.J(be,be,[0,-l.X,0]),{u_matrix:be,u_image:1,u_dimension:[ye,ye],u_zoom:oe.overscaledZ,u_unpack:ce.getUnpackVector()}})(e.tileID,Q),null,a.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function zl(g,e,a,c,h,f){const w=c.paint.get("raster-fade-duration");if(!f&&w>0){const E=H.now(),Q=(E-g.timeAdded)/w,k=e?(E-e.timeAdded)/w:-1,R=a.getSource(),z=h.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),ee=!e||Math.abs(e.tileID.overscaledZ-z)>Math.abs(g.tileID.overscaledZ-z),oe=ee&&g.refreshedUponExpiration?1:l.ac(ee?Q:1-k,0,1);return g.refreshedUponExpiration&&Q>=1&&(g.refreshedUponExpiration=!1),e?{opacity:1,mix:1-oe}:{opacity:oe,mix:0}}return{opacity:1,mix:0}}const Ui=new l.aM(1,0,0,1),Fo=new l.aM(0,1,0,1),Bu=new l.aM(0,0,1,1),Fc=new l.aM(1,0,1,1),to=new l.aM(0,1,1,1);function Eu(g,e,a,c){zo(g,0,e+a/2,g.transform.width,a,c)}function Qu(g,e,a,c){zo(g,e-a/2,0,a,g.transform.height,c)}function zo(g,e,a,c,h,f){const w=g.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(e*g.pixelRatio,a*g.pixelRatio,c*g.pixelRatio,h*g.pixelRatio),w.clear({color:f}),E.disable(E.SCISSOR_TEST)}function Su(g,e,a){const c=g.context,h=c.gl,f=a.posMatrix,w=g.useProgram("debug"),E=Si.disabled,Q=er.disabled,k=g.colorModeForRenderPass(),R="$debug",z=g.style.map.terrain&&g.style.map.terrain.getTerrainData(a);c.activeTexture.set(h.TEXTURE0);const ee=e.getTileByID(a.key).latestRawTileData,oe=Math.floor((ee&&ee.byteLength||0)/1024),ce=e.getTile(a).tileSize,ye=512/Math.min(ce,512)*(a.overscaledZ/g.transform.zoom)*.5;let be=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(be+=` => ${a.overscaledZ}`),function(Ce,ke){Ce.initDebugOverlayCanvas();const fe=Ce.debugOverlayCanvas,ze=Ce.context.gl,Ue=Ce.debugOverlayCanvas.getContext("2d");Ue.clearRect(0,0,fe.width,fe.height),Ue.shadowColor="white",Ue.shadowBlur=2,Ue.lineWidth=1.5,Ue.strokeStyle="white",Ue.textBaseline="top",Ue.font="bold 36px Open Sans, sans-serif",Ue.fillText(ke,5,5),Ue.strokeText(ke,5,5),Ce.debugOverlayTexture.update(fe),Ce.debugOverlayTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE)}(g,`${be} ${oe}kB`),w.draw(c,h.TRIANGLES,E,Q,Tr.alphaBlended,ji.disabled,Ks(f,l.aM.transparent,ye),null,R,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),w.draw(c,h.LINE_STRIP,E,Q,k,ji.disabled,Ks(f,l.aM.red),z,R,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function Go(g,e,a){const c=g.context,h=c.gl,f=g.colorModeForRenderPass(),w=new Si(h.LEQUAL,Si.ReadWrite,g.depthRangeFor3D),E=g.useProgram("terrain"),Q=e.getTerrainMesh();c.bindFramebuffer.set(null),c.viewport.set([0,0,g.width,g.height]);for(const k of a){const R=g.renderToTexture.getTexture(k),z=e.getTerrainData(k.tileID);c.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,R.texture);const ee=g.transform.calculatePosMatrix(k.tileID.toUnwrapped()),oe=e.getMeshFrameDelta(g.transform.zoom),ce=g.transform.calculateFogMatrix(k.tileID.toUnwrapped()),ye=So(ee,oe,ce,g.style.sky,g.transform.pitch);E.draw(c,h.TRIANGLES,w,er.disabled,f,ji.backCCW,ye,z,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}class io{constructor(e,a,c){this.vertexBuffer=e,this.indexBuffer=a,this.segments=c}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class No{constructor(e,a){this.context=new wh(e),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ti.maxUnderzooming+ti.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qo}resize(e,a,c){if(this.width=Math.floor(e*c),this.height=Math.floor(a*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style._order)this.style._layers[h].resize()}setup(){const e=this.context,a=new l.aX;a.emplaceBack(0,0),a.emplaceBack(l.X,0),a.emplaceBack(0,l.X),a.emplaceBack(l.X,l.X),this.tileExtentBuffer=e.createVertexBuffer(a,Is.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const c=new l.aX;c.emplaceBack(0,0),c.emplaceBack(l.X,0),c.emplaceBack(0,l.X),c.emplaceBack(l.X,l.X),this.debugBuffer=e.createVertexBuffer(c,Is.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const h=new l.$;h.emplaceBack(0,0,0,0),h.emplaceBack(l.X,0,l.X,0),h.emplaceBack(0,l.X,0,l.X),h.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=e.createVertexBuffer(h,fi.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const f=new l.aX;f.emplaceBack(0,0),f.emplaceBack(1,0),f.emplaceBack(0,1),f.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(f,Is.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const w=new l.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(w);const E=new l.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(E);const Q=this.context.gl;this.stencilClearMode=new er({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO)}clearStencil(){const e=this.context,a=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=l.H();l.aP(c,0,this.width,this.height,0,0,1),l.K(c,c,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,a.TRIANGLES,Si.disabled,this.stencilClearMode,Tr.disabled,ji.disabled,zr(c),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,a){if(this.currentStencilSource===e.source||!e.isTileClipped()||!a||!a.length)return;this.currentStencilSource=e.source;const c=this.context,h=c.gl;this.nextStencilID+a.length>256&&this.clearStencil(),c.setColorMode(Tr.disabled),c.setDepthMode(Si.disabled);const f=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const E=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,Q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);f.draw(c,h.TRIANGLES,Si.disabled,new er({func:h.ALWAYS,mask:0},E,255,h.KEEP,h.KEEP,h.REPLACE),Tr.disabled,ji.disabled,zr(w.posMatrix),Q,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,a=this.context.gl;return new er({func:a.NOTEQUAL,mask:255},e,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(e){const a=this.context.gl;return new er({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(e){const a=this.context.gl,c=e.sort((w,E)=>E.overscaledZ-w.overscaledZ),h=c[c.length-1].overscaledZ,f=c[0].overscaledZ-h+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();const w={};for(let E=0;E<f;E++)w[E+h]=new er({func:a.GEQUAL,mask:255},E+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=f,[w,c]}return[{[h]:er.disabled},c]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Tr([e.CONSTANT_COLOR,e.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Tr.unblended:Tr.alphaBlended}depthModeForSublayer(e,a,c){if(!this.opaquePassEnabledForLayer())return Si.disabled;const h=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Si(c||this.context.gl.LEQUAL,a,[h,h])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,a){this.style=e,this.options=a,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(H.now()),this.imageManager.beginFrame();const c=this.style._order,h=this.style.sourceCaches,f={},w={},E={};for(const Q in h){const k=h[Q];k.used&&k.prepare(this.context),f[Q]=k.getVisibleCoordinates(),w[Q]=f[Q].slice().reverse(),E[Q]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Q=0;Q<c.length;Q++)if(this.style._layers[c[Q]].is3D()){this.opaquePassCutoff=Q;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Q of c){const k=this.style._layers[Q];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const R=w[k.source];(k.type==="custom"||R.length)&&this.renderLayer(this,h[k.source],k,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Q,k){const R=Q.context,z=R.gl,ee=((Ce,ke,fe)=>({u_sky_color:Ce.properties.get("sky-color"),u_horizon_color:Ce.properties.get("horizon-color"),u_horizon:(ke.height/2+ke.getHorizon())*fe,u_sky_horizon_blend:Ce.properties.get("sky-horizon-blend")*ke.height/2*fe}))(k,Q.style.map.transform,Q.pixelRatio),oe=new Si(z.LEQUAL,Si.ReadWrite,[0,1]),ce=er.disabled,ye=Q.colorModeForRenderPass(),be=Q.useProgram("sky");if(!k.mesh){const Ce=new l.aX;Ce.emplaceBack(-1,-1),Ce.emplaceBack(1,-1),Ce.emplaceBack(1,1),Ce.emplaceBack(-1,1);const ke=new l.aY;ke.emplaceBack(0,1,2),ke.emplaceBack(0,2,3),k.mesh=new io(R.createVertexBuffer(Ce,Is.members),R.createIndexBuffer(ke),l.a0.simpleSegment(0,0,Ce.length,ke.length))}be.draw(R,z.TRIANGLES,oe,ce,ye,ji.disabled,ee,void 0,"sky",k.mesh.vertexBuffer,k.mesh.indexBuffer,k.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const Q=this.style._layers[c[this.currentLayer]],k=h[Q.source],R=f[Q.source];this._renderTileClippingMasks(Q,R),this.renderLayer(this,k,Q,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const Q=this.style._layers[c[this.currentLayer]],k=h[Q.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Q))continue;const R=(Q.type==="symbol"?E:w)[Q.source];this._renderTileClippingMasks(Q,f[Q.source]),this.renderLayer(this,k,Q,R)}if(this.options.showTileBoundaries){const Q=function(k,R){let z=null;const ee=Object.values(k._layers).flatMap(be=>be.source&&!be.isHidden(R)?[k.sourceCaches[be.source]]:[]),oe=ee.filter(be=>be.getSource().type==="vector"),ce=ee.filter(be=>be.getSource().type!=="vector"),ye=be=>{(!z||z.getSource().maxzoom<be.getSource().maxzoom)&&(z=be)};return oe.forEach(be=>ye(be)),z||ce.forEach(be=>ye(be)),z}(this.style,this.transform.zoom);Q&&function(k,R,z){for(let ee=0;ee<z.length;ee++)Su(k,R,z[ee])}(this,Q,Q.getVisibleCoordinates())}this.options.showPadding&&function(Q){const k=Q.transform.padding;Eu(Q,Q.transform.height-(k.top||0),3,Ui),Eu(Q,k.bottom||0,3,Fo),Qu(Q,k.left||0,3,Bu),Qu(Q,Q.transform.width-(k.right||0),3,Fc);const R=Q.transform.centerPoint;(function(z,ee,oe,ce){zo(z,ee-1,oe-10,2,20,ce),zo(z,ee-10,oe-1,20,2,ce)})(Q,R.x,Q.transform.height-R.y,to)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,c=this.transform.modelViewProjectionMatrix;let h=this.terrainFacilitator.dirty;h||(h=e?!l.a_(a,c):!l.a$(a,c)),h||(h=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),h&&(l.b0(a,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(f,w){const E=f.context,Q=E.gl,k=Tr.unblended,R=new Si(Q.LEQUAL,Si.ReadWrite,[0,1]),z=w.getTerrainMesh(),ee=w.sourceCache.getRenderableTiles(),oe=f.useProgram("terrainDepth");E.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),E.clear({color:l.aM.transparent,depth:1});for(const ce of ee){const ye=w.getTerrainData(ce.tileID),be={u_matrix:f.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(f.transform.zoom)};oe.draw(E,Q.TRIANGLES,R,er.disabled,k,ji.backCCW,be,ye,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain),function(f,w){const E=f.context,Q=E.gl,k=Tr.unblended,R=new Si(Q.LEQUAL,Si.ReadWrite,[0,1]),z=w.getTerrainMesh(),ee=w.getCoordsTexture(),oe=w.sourceCache.getRenderableTiles(),ce=f.useProgram("terrainCoords");E.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),E.clear({color:l.aM.transparent,depth:1}),w.coordsIndex=[];for(const ye of oe){const be=w.getTerrainData(ye.tileID);E.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,ee.texture);const Ce={u_matrix:f.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(f.transform.zoom)};ce.draw(E,Q.TRIANGLES,R,er.disabled,k,ji.backCCW,Ce,be,"terrain",z.vertexBuffer,z.indexBuffer,z.segments),w.coordsIndex.push(ye.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain))}renderLayer(e,a,c,h){if(!c.isHidden(this.transform.zoom)&&(c.type==="background"||c.type==="custom"||(h||[]).length))switch(this.id=c.id,c.type){case"symbol":(function(f,w,E,Q,k){if(f.renderPass!=="translucent")return;const R=er.disabled,z=f.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ee,oe,ce,ye,be,Ce,ke,fe,ze){const Ue=oe.transform,Je=Un(),ct=be==="map",wt=Ce==="map";for(const Rt of ee){const Ht=ye.getTile(Rt),Pt=Ht.getBucket(ce);if(!Pt||!Pt.text||!Pt.text.segments.get().length)continue;const Mt=l.ag(Pt.textSizeData,Ue.zoom),Xt=Qi(Ht,1,oe.transform.zoom),Ii=is(Rt.posMatrix,wt,ct,oe.transform,Xt),b=ce.layout.get("icon-text-fit")!=="none"&&Pt.hasIconData();if(Mt){const v=Math.pow(2,Ue.zoom-Ht.tileID.overscaledZ),_=oe.style.map.terrain?(T,F)=>oe.style.map.terrain.getElevation(Rt,T,F):null,D=Je.translatePosition(Ue,Ht,ke,fe);nn(Pt,ct,wt,ze,Ue,Ii,Rt.posMatrix,v,Mt,b,Je,D,Rt.toUnwrapped(),_)}}}(Q,f,E,w,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),k),E.paint.get("icon-opacity").constantOr(1)!==0&&Rc(f,w,E,Q,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),R,z),E.paint.get("text-opacity").constantOr(1)!==0&&Rc(f,w,E,Q,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),R,z),w.map.showCollisionBoxes&&(Qs(f,w,E,Q,!0),Qs(f,w,E,Q,!1))})(e,a,c,h,this.style.placement.variableOffsets);break;case"circle":(function(f,w,E,Q){if(f.renderPass!=="translucent")return;const k=E.paint.get("circle-opacity"),R=E.paint.get("circle-stroke-width"),z=E.paint.get("circle-stroke-opacity"),ee=!E.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(R.constantOr(1)===0||z.constantOr(1)===0))return;const oe=f.context,ce=oe.gl,ye=f.depthModeForSublayer(0,Si.ReadOnly),be=er.disabled,Ce=f.colorModeForRenderPass(),ke=[];for(let fe=0;fe<Q.length;fe++){const ze=Q[fe],Ue=w.getTile(ze),Je=Ue.getBucket(E);if(!Je)continue;const ct=Je.programConfigurations.get(E.id),wt=f.useProgram("circle",ct),Rt=Je.layoutVertexBuffer,Ht=Je.indexBuffer,Pt=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ze),Mt={programConfiguration:ct,program:wt,layoutVertexBuffer:Rt,indexBuffer:Ht,uniformValues:Ih(f,ze,Ue,E),terrainData:Pt};if(ee){const Xt=Je.segments.get();for(const Ii of Xt)ke.push({segments:new l.a0([Ii]),sortKey:Ii.sortKey,state:Mt})}else ke.push({segments:Je.segments,sortKey:0,state:Mt})}ee&&ke.sort((fe,ze)=>fe.sortKey-ze.sortKey);for(const fe of ke){const{programConfiguration:ze,program:Ue,layoutVertexBuffer:Je,indexBuffer:ct,uniformValues:wt,terrainData:Rt}=fe.state;Ue.draw(oe,ce.TRIANGLES,ye,be,Ce,ji.disabled,wt,Rt,E.id,Je,ct,fe.segments,E.paint,f.transform.zoom,ze)}})(e,a,c,h);break;case"heatmap":(function(f,w,E,Q){if(E.paint.get("heatmap-opacity")===0)return;const k=f.context;if(f.style.map.terrain){for(const R of Q){const z=w.getTile(R);w.hasRenderableParent(R)||(f.renderPass==="offscreen"?ks(f,z,E,R):f.renderPass==="translucent"&&Ms(f,E,R))}k.viewport.set([0,0,f.width,f.height])}else f.renderPass==="offscreen"?function(R,z,ee,oe){const ce=R.context,ye=ce.gl,be=er.disabled,Ce=new Tr([ye.ONE,ye.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(ke,fe,ze){const Ue=ke.gl;ke.activeTexture.set(Ue.TEXTURE1),ke.viewport.set([0,0,fe.width/4,fe.height/4]);let Je=ze.heatmapFbos.get(l.aU);Je?(Ue.bindTexture(Ue.TEXTURE_2D,Je.colorAttachment.get()),ke.bindFramebuffer.set(Je.framebuffer)):(Je=va(ke,fe.width/4,fe.height/4),ze.heatmapFbos.set(l.aU,Je))})(ce,R,ee),ce.clear({color:l.aM.transparent});for(let ke=0;ke<oe.length;ke++){const fe=oe[ke];if(z.hasRenderableParent(fe))continue;const ze=z.getTile(fe),Ue=ze.getBucket(ee);if(!Ue)continue;const Je=Ue.programConfigurations.get(ee.id),ct=R.useProgram("heatmap",Je),{zoom:wt}=R.transform;ct.draw(ce,ye.TRIANGLES,Si.disabled,be,Ce,ji.disabled,Wr(fe.posMatrix,ze,wt,ee.paint.get("heatmap-intensity")),null,ee.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,ee.paint,R.transform.zoom,Je)}ce.viewport.set([0,0,R.width,R.height])}(f,w,E,Q):f.renderPass==="translucent"&&function(R,z){const ee=R.context,oe=ee.gl;ee.setColorMode(R.colorModeForRenderPass());const ce=z.heatmapFbos.get(l.aU);ce&&(ee.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ce.colorAttachment.get()),ee.activeTexture.set(oe.TEXTURE1),Ts(ee,z).bind(oe.LINEAR,oe.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(ee,oe.TRIANGLES,Si.disabled,er.disabled,R.colorModeForRenderPass(),ji.disabled,bs(R,z,0,1),null,z.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,z.paint,R.transform.zoom))}(f,E)})(e,a,c,h);break;case"line":(function(f,w,E,Q){if(f.renderPass!=="translucent")return;const k=E.paint.get("line-opacity"),R=E.paint.get("line-width");if(k.constantOr(1)===0||R.constantOr(1)===0)return;const z=f.depthModeForSublayer(0,Si.ReadOnly),ee=f.colorModeForRenderPass(),oe=E.paint.get("line-dasharray"),ce=E.paint.get("line-pattern"),ye=ce.constantOr(1),be=E.paint.get("line-gradient"),Ce=E.getCrossfadeParameters(),ke=ye?"linePattern":oe?"lineSDF":be?"lineGradient":"line",fe=f.context,ze=fe.gl;let Ue=!0;for(const Je of Q){const ct=w.getTile(Je);if(ye&&!ct.patternsLoaded())continue;const wt=ct.getBucket(E);if(!wt)continue;const Rt=wt.programConfigurations.get(E.id),Ht=f.context.program.get(),Pt=f.useProgram(ke,Rt),Mt=Ue||Pt.program!==Ht,Xt=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Je),Ii=ce.constantOr(null);if(Ii&&ct.imageAtlas){const _=ct.imageAtlas,D=_.patternPositions[Ii.to.toString()],T=_.patternPositions[Ii.from.toString()];D&&T&&Rt.setConstantPatternPositions(D,T)}const b=Xt?Je:null,v=ye?xs(f,ct,E,Ce,b):oe?yu(f,ct,E,oe,Ce,b):be?Cl(f,ct,E,wt.lineClipsArray.length,b):$s(f,ct,E,b);if(ye)fe.activeTexture.set(ze.TEXTURE0),ct.imageAtlasTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE),Rt.updatePaintBuffers(Ce);else if(oe&&(Mt||f.lineAtlas.dirty))fe.activeTexture.set(ze.TEXTURE0),f.lineAtlas.bind(fe);else if(be){const _=wt.gradients[E.id];let D=_.texture;if(E.gradientVersion!==_.version){let T=256;if(E.stepInterpolant){const F=w.getSource().maxzoom,Z=Je.canonical.z===F?Math.ceil(1<<f.transform.maxZoom-Je.canonical.z):1;T=l.ac(l.aV(wt.maxLineLength/l.X*1024*Z),256,fe.maxTextureSize)}_.gradient=l.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:T,image:_.gradient||void 0,clips:wt.lineClipsArray}),_.texture?_.texture.update(_.gradient):_.texture=new mt(fe,_.gradient,ze.RGBA),_.version=E.gradientVersion,D=_.texture}fe.activeTexture.set(ze.TEXTURE0),D.bind(E.stepInterpolant?ze.NEAREST:ze.LINEAR,ze.CLAMP_TO_EDGE)}Pt.draw(fe,ze.TRIANGLES,z,f.stencilModeForClipping(Je),ee,ji.disabled,v,Xt,E.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,E.paint,f.transform.zoom,Rt,wt.layoutVertexBuffer2),Ue=!1}})(e,a,c,h);break;case"fill":(function(f,w,E,Q){const k=E.paint.get("fill-color"),R=E.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const z=f.colorModeForRenderPass(),ee=E.paint.get("fill-pattern"),oe=f.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&k.constantOr(l.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===oe){const ce=f.depthModeForSublayer(1,f.renderPass==="opaque"?Si.ReadWrite:Si.ReadOnly);eo(f,w,E,Q,ce,z,!1)}if(f.renderPass==="translucent"&&E.paint.get("fill-antialias")){const ce=f.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Si.ReadOnly);eo(f,w,E,Q,ce,z,!0)}})(e,a,c,h);break;case"fill-extrusion":(function(f,w,E,Q){const k=E.paint.get("fill-extrusion-opacity");if(k!==0&&f.renderPass==="translucent"){const R=new Si(f.context.gl.LEQUAL,Si.ReadWrite,f.depthRangeFor3D);if(k!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))ba(f,w,E,Q,R,er.disabled,Tr.disabled),ba(f,w,E,Q,R,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const z=f.colorModeForRenderPass();ba(f,w,E,Q,R,er.disabled,z)}}})(e,a,c,h);break;case"hillshade":(function(f,w,E,Q){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const k=f.context,R=f.depthModeForSublayer(0,Si.ReadOnly),z=f.colorModeForRenderPass(),[ee,oe]=f.renderPass==="translucent"?f.stencilConfigForOverlap(Q):[{},Q];for(const ce of oe){const ye=w.getTile(ce);ye.needsHillshadePrepare!==void 0&&ye.needsHillshadePrepare&&f.renderPass==="offscreen"?Lc(f,ye,E,R,er.disabled,z):f.renderPass==="translucent"&&Ps(f,ce,ye,E,R,ee[ce.overscaledZ],z)}k.viewport.set([0,0,f.width,f.height])})(e,a,c,h);break;case"raster":(function(f,w,E,Q){if(f.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!Q.length)return;const k=f.context,R=k.gl,z=w.getSource(),ee=f.useProgram("raster"),oe=f.colorModeForRenderPass(),[ce,ye]=z instanceof Ot?[{},Q]:f.stencilConfigForOverlap(Q),be=ye[ye.length-1].overscaledZ,Ce=!f.options.moving;for(const ke of ye){const fe=f.depthModeForSublayer(ke.overscaledZ-be,E.paint.get("raster-opacity")===1?Si.ReadWrite:Si.ReadOnly,R.LESS),ze=w.getTile(ke);ze.registerFadeDuration(E.paint.get("raster-fade-duration"));const Ue=w.findLoadedParent(ke,0),Je=w.findLoadedSibling(ke),ct=zl(ze,Ue||Je||null,w,E,f.transform,f.style.map.terrain);let wt,Rt;const Ht=E.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;k.activeTexture.set(R.TEXTURE0),ze.texture.bind(Ht,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(R.TEXTURE1),Ue?(Ue.texture.bind(Ht,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,Ue.tileID.overscaledZ-ze.tileID.overscaledZ),Rt=[ze.tileID.canonical.x*wt%1,ze.tileID.canonical.y*wt%1]):ze.texture.bind(Ht,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),ze.texture.useMipmap&&k.extTextureFilterAnisotropic&&f.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax);const Pt=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ke),Mt=Pt?ke:null,Xt=Mt?Mt.posMatrix:f.transform.calculatePosMatrix(ke.toUnwrapped(),Ce),Ii=El(Xt,Rt||[0,0],wt||1,ct,E);z instanceof Ot?ee.draw(k,R.TRIANGLES,fe,er.disabled,oe,ji.disabled,Ii,Pt,E.id,z.boundsBuffer,f.quadTriangleIndexBuffer,z.boundsSegments):ee.draw(k,R.TRIANGLES,fe,ce[ke.overscaledZ],oe,ji.disabled,Ii,Pt,E.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}})(e,a,c,h);break;case"background":(function(f,w,E,Q){const k=E.paint.get("background-color"),R=E.paint.get("background-opacity");if(R===0)return;const z=f.context,ee=z.gl,oe=f.transform,ce=oe.tileSize,ye=E.paint.get("background-pattern");if(f.isPatternMissing(ye))return;const be=!ye&&k.a===1&&R===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==be)return;const Ce=er.disabled,ke=f.depthModeForSublayer(0,be==="opaque"?Si.ReadWrite:Si.ReadOnly),fe=f.colorModeForRenderPass(),ze=f.useProgram(ye?"backgroundPattern":"background"),Ue=Q||oe.coveringTiles({tileSize:ce,terrain:f.style.map.terrain});ye&&(z.activeTexture.set(ee.TEXTURE0),f.imageManager.bind(f.context));const Je=E.getCrossfadeParameters();for(const ct of Ue){const wt=Q?ct.posMatrix:f.transform.calculatePosMatrix(ct.toUnwrapped()),Rt=ye?Bc(wt,R,f,ye,{tileID:ct,tileSize:ce},Je):Sl(wt,R,k),Ht=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ct);ze.draw(z,ee.TRIANGLES,ke,Ce,fe,ji.disabled,Rt,Ht,E.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}})(e,0,c,h);break;case"custom":(function(f,w,E){const Q=f.context,k=E.implementation;if(f.renderPass==="offscreen"){const R=k.prerender;R&&(f.setCustomLayerDefaults(),Q.setColorMode(f.colorModeForRenderPass()),R.call(k,Q.gl,f.transform.customLayerMatrix()),Q.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),Q.setColorMode(f.colorModeForRenderPass()),Q.setStencilMode(er.disabled);const R=k.renderingMode==="3d"?new Si(f.context.gl.LEQUAL,Si.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Si.ReadOnly);Q.setDepthMode(R),k.render(Q.gl,f.transform.customLayerMatrix(),{farZ:f.transform.farZ,nearZ:f.transform.nearZ,fov:f.transform._fov,modelViewProjectionMatrix:f.transform.modelViewProjectionMatrix,projectionMatrix:f.transform.projectionMatrix}),Q.setDirty(),f.setBaseState(),Q.bindFramebuffer.set(null)}})(e,0,c)}}translatePosMatrix(e,a,c,h,f){if(!c[0]&&!c[1])return e;const w=f?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(w){const k=Math.sin(w),R=Math.cos(w);c=[c[0]*R-c[1]*k,c[0]*k+c[1]*R]}const E=[f?c[0]:Qi(a,c[0],this.transform.zoom),f?c[1]:Qi(a,c[1],this.transform.zoom),0],Q=new Float32Array(16);return l.J(Q,e,E),Q}saveTileTexture(e){const a=this._tileTextures[e.size[0]];a?a.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const a=this._tileTextures[e];return a&&a.length>0?a.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const a=this.imageManager.getPattern(e.from.toString()),c=this.imageManager.getPattern(e.to.toString());return!a||!c}useProgram(e,a){this.cache=this.cache||{};const c=e+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[c]||(this.cache[c]=new xc(this.context,Ma[e],a,Ec[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new mt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:a}=this.context.gl;return this.width!==e||this.height!==a}}class Uo{constructor(e,a){this.points=e,this.planes=a}static fromInvProjectionMatrix(e,a,c){const h=Math.pow(2,c),f=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const Q=1/(E=l.af([],E,e))[3]/a*h;return l.b1(E,E,[Q,Q,1/E[3],Q])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const Q=function(ee,oe){var ce=oe[0],ye=oe[1],be=oe[2],Ce=ce*ce+ye*ye+be*be;return Ce>0&&(Ce=1/Math.sqrt(Ce)),ee[0]=oe[0]*Ce,ee[1]=oe[1]*Ce,ee[2]=oe[2]*Ce,ee}([],function(ee,oe,ce){var ye=oe[0],be=oe[1],Ce=oe[2],ke=ce[0],fe=ce[1],ze=ce[2];return ee[0]=be*ze-Ce*fe,ee[1]=Ce*ke-ye*ze,ee[2]=ye*fe-be*ke,ee}([],zt([],f[E[0]],f[E[1]]),zt([],f[E[2]],f[E[1]]))),k=-((R=Q)[0]*(z=f[E[1]])[0]+R[1]*z[1]+R[2]*z[2]);var R,z;return Q.concat(k)});return new Uo(f,w)}}class ro{constructor(e,a){this.min=e,this.max=a,this.center=function(c,h,f){return c[0]=.5*h[0],c[1]=.5*h[1],c[2]=.5*h[2],c}([],function(c,h,f){return c[0]=h[0]+f[0],c[1]=h[1]+f[1],c[2]=h[2]+f[2],c}([],this.min,this.max))}quadrant(e){const a=[e%2==0,e<2],c=Ft(this.min),h=Ft(this.max);for(let f=0;f<a.length;f++)c[f]=a[f]?this.min[f]:this.center[f],h[f]=a[f]?this.center[f]:this.max[f];return h[2]=this.max[2],new ro(c,h)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let c=!0;for(let h=0;h<e.planes.length;h++){const f=e.planes[h];let w=0;for(let E=0;E<a.length;E++)l.b2(f,a[E])>=0&&w++;if(w===0)return 0;w!==a.length&&(c=!1)}if(c)return 2;for(let h=0;h<3;h++){let f=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<e.points.length;E++){const Q=e.points[E][h]-this.min[h];f=Math.min(f,Q),w=Math.max(w,Q)}if(w<0||f>this.max[h]-this.min[h])return 0}return 1}}class no{constructor(e=0,a=0,c=0,h=0){if(isNaN(e)||e<0||isNaN(a)||a<0||isNaN(c)||c<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=a,this.left=c,this.right=h}interpolate(e,a,c){return a.top!=null&&e.top!=null&&(this.top=l.y.number(e.top,a.top,c)),a.bottom!=null&&e.bottom!=null&&(this.bottom=l.y.number(e.bottom,a.bottom,c)),a.left!=null&&e.left!=null&&(this.left=l.y.number(e.left,a.left,c)),a.right!=null&&e.right!=null&&(this.right=l.y.number(e.right,a.right,c)),this}getCenter(e,a){const c=l.ac((this.left+e-this.right)/2,0,e),h=l.ac((this.top+a-this.bottom)/2,0,a);return new l.P(c,h)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new no(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Pn=85.051129;class ao{constructor(e,a,c,h,f){this.tileSize=512,this._renderWorldCopies=f===void 0||!!f,this._minZoom=e||0,this._maxZoom=a||22,this._minPitch=c??0,this._maxPitch=h??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new no,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new ao(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const a=-l.b3(e,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var c=new l.A(4);return l.A!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c}(),function(c,h,f){var w=h[0],E=h[1],Q=h[2],k=h[3],R=Math.sin(f),z=Math.cos(f);c[0]=w*z+Q*R,c[1]=E*z+k*R,c[2]=w*-R+Q*z,c[3]=E*-R+k*z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const a=l.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const a=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,a,c){this._unmodified=!1,this._edgeInsets.interpolate(e,a,c),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const a=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(e){const a=[new l.b4(0,e)];if(this._renderWorldCopies){const c=this.pointCoordinate(new l.P(0,0)),h=this.pointCoordinate(new l.P(this.width,0)),f=this.pointCoordinate(new l.P(this.width,this.height)),w=this.pointCoordinate(new l.P(0,this.height)),E=Math.floor(Math.min(c.x,h.x,f.x,w.x)),Q=Math.floor(Math.max(c.x,h.x,f.x,w.x)),k=1;for(let R=E-k;R<=Q+k;R++)R!==0&&a.push(new l.b4(R,e))}return a}coveringTiles(e){var a,c;let h=this.coveringZoomLevel(e);const f=h;if(e.minzoom!==void 0&&h<e.minzoom)return[];e.maxzoom!==void 0&&h>e.maxzoom&&(h=e.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),E=l.Z.fromLngLat(this.center),Q=Math.pow(2,h),k=[Q*w.x,Q*w.y,0],R=[Q*E.x,Q*E.y,0],z=Uo.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,h);let ee=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ee=h);const oe=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,ce=fe=>({aabb:new ro([fe*Q,0,0],[(fe+1)*Q,Q,0]),zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),ye=[],be=[],Ce=h,ke=e.reparseOverscaled?f:h;if(this._renderWorldCopies)for(let fe=1;fe<=3;fe++)ye.push(ce(-fe)),ye.push(ce(fe));for(ye.push(ce(0));ye.length>0;){const fe=ye.pop(),ze=fe.x,Ue=fe.y;let Je=fe.fullyVisible;if(!Je){const Pt=fe.aabb.intersects(z);if(Pt===0)continue;Je=Pt===2}const ct=e.terrain?k:R,wt=fe.aabb.distanceX(ct),Rt=fe.aabb.distanceY(ct),Ht=Math.max(Math.abs(wt),Math.abs(Rt));if(fe.zoom===Ce||Ht>oe+(1<<Ce-fe.zoom)-2&&fe.zoom>=ee){const Pt=Ce-fe.zoom,Mt=k[0]-.5-(ze<<Pt),Xt=k[1]-.5-(Ue<<Pt);be.push({tileID:new l.S(fe.zoom===Ce?ke:fe.zoom,fe.wrap,fe.zoom,ze,Ue),distanceSq:Zt([R[0]-.5-ze,R[1]-.5-Ue]),tileDistanceToCamera:Math.sqrt(Mt*Mt+Xt*Xt)})}else for(let Pt=0;Pt<4;Pt++){const Mt=(ze<<1)+Pt%2,Xt=(Ue<<1)+(Pt>>1),Ii=fe.zoom+1;let b=fe.aabb.quadrant(Pt);if(e.terrain){const v=new l.S(Ii,fe.wrap,Ii,Mt,Xt),_=e.terrain.getMinMaxElevation(v),D=(a=_.minElevation)!==null&&a!==void 0?a:this.elevation,T=(c=_.maxElevation)!==null&&c!==void 0?c:this.elevation;b=new ro([b.min[0],b.min[1],D],[b.max[0],b.max[1],T])}ye.push({aabb:b,zoom:Ii,x:Mt,y:Xt,wrap:fe.wrap,fullyVisible:Je})}}return be.sort((fe,ze)=>fe.distanceSq-ze.distanceSq).map(fe=>fe.tileID)}resize(e,a){this.width=e,this.height=a,this.pixelsToGLUnits=[2/e,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const a=l.ac(e.lat,-85.051129,Pn);return new l.P(l.O(e.lng)*this.worldSize,l.Q(a)*this.worldSize)}unproject(e){return new l.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const a=this.elevation,c=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,h=this.pointLocation(this.centerPoint,e),f=e.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-f))return;const w=c+a-f,E=Math.cos(this._pitch)*this.cameraToCenterDistance/w/l.b5(1,h.lat),Q=this.scaleZoom(E/this.tileSize);this._elevation=f,this._center=h,this.zoom=Q}setLocationAtPoint(e,a){const c=this.pointCoordinate(a),h=this.pointCoordinate(this.centerPoint),f=this.locationCoordinate(e),w=new l.Z(f.x-(c.x-h.x),f.y-(c.y-h.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,a){return a?this.coordinatePoint(this.locationCoordinate(e),a.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,a){return this.coordinateLocation(this.pointCoordinate(e,a))}locationCoordinate(e){return l.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,a){if(a){const ee=a.pointCoordinate(e);if(ee!=null)return ee}const c=[e.x,e.y,0,1],h=[e.x,e.y,1,1];l.af(c,c,this.pixelMatrixInverse),l.af(h,h,this.pixelMatrixInverse);const f=c[3],w=h[3],E=c[1]/f,Q=h[1]/w,k=c[2]/f,R=h[2]/w,z=k===R?0:(0-k)/(R-k);return new l.Z(l.y.number(c[0]/f,h[0]/w,z)/this.worldSize,l.y.number(E,Q,z)/this.worldSize)}coordinatePoint(e,a=0,c=this.pixelMatrix){const h=[e.x*this.worldSize,e.y*this.worldSize,a,1];return l.af(h,h,c),new l.P(h[0]/h[3],h[1]/h[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new ve().extend(this.pointLocation(new l.P(0,e))).extend(this.pointLocation(new l.P(this.width,e))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ve([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Pn])}calculateTileMatrix(e){const a=e.canonical,c=this.worldSize/this.zoomScale(a.z),h=a.x+Math.pow(2,a.z)*e.wrap,f=l.an(new Float64Array(16));return l.J(f,f,[h*c,a.y*c,0]),l.K(f,f,[c/l.X,c/l.X,1]),f}calculatePosMatrix(e,a=!1){const c=e.key,h=a?this._alignedPosMatrixCache:this._posMatrixCache;if(h[c])return h[c];const f=this.calculateTileMatrix(e);return l.L(f,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,f),h[c]=new Float32Array(f),h[c]}calculateFogMatrix(e){const a=e.key,c=this._fogMatrixCache;if(c[a])return c[a];const h=this.calculateTileMatrix(e);return l.L(h,this.fogMatrix,h),c[a]=new Float32Array(h),c[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,a){a=l.ac(+a,this.minZoom,this.maxZoom);const c={center:new l.N(e.lng,e.lat),zoom:a};let h=this.lngRange;if(!this._renderWorldCopies&&h===null){const fe=179.9999999999;h=[-fe,fe]}const f=this.tileSize*this.zoomScale(c.zoom);let w=0,E=f,Q=0,k=f,R=0,z=0;const{x:ee,y:oe}=this.size;if(this.latRange){const fe=this.latRange;w=l.Q(fe[1])*f,E=l.Q(fe[0])*f,E-w<oe&&(R=oe/(E-w))}h&&(Q=l.b3(l.O(h[0])*f,0,f),k=l.b3(l.O(h[1])*f,0,f),k<Q&&(k+=f),k-Q<ee&&(z=ee/(k-Q)));const{x:ce,y:ye}=this.project.call({worldSize:f},e);let be,Ce;const ke=Math.max(z||0,R||0);if(ke){const fe=new l.P(z?(k+Q)/2:ce,R?(E+w)/2:ye);return c.center=this.unproject.call({worldSize:f},fe).wrap(),c.zoom+=this.scaleZoom(ke),c}if(this.latRange){const fe=oe/2;ye-fe<w&&(Ce=w+fe),ye+fe>E&&(Ce=E-fe)}if(h){const fe=(Q+k)/2;let ze=ce;this._renderWorldCopies&&(ze=l.b3(ce,fe-f/2,fe+f/2));const Ue=ee/2;ze-Ue<Q&&(be=Q+Ue),ze+Ue>k&&(be=k-Ue)}if(be!==void 0||Ce!==void 0){const fe=new l.P(be??ce,Ce??ye);c.center=this.unproject.call({worldSize:f},fe).wrap()}return c}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:a,zoom:c}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=c,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,a=this.point.x,c=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let h=l.an(new Float64Array(16));l.K(h,h,[this.width/2,-this.height/2,1]),l.J(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=l.an(new Float64Array(16)),l.K(h,h,[1,-1,1]),l.J(h,h,[-1,-1,0]),l.K(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h;const f=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),E=f-w*this._pixelPerMeter/Math.cos(this._pitch),Q=w<0?E:f,k=Math.PI/2+this._pitch,R=this._fov*(.5+e.y/this.height),z=Math.sin(R)*Q/Math.sin(l.ac(Math.PI-k-R,.01,Math.PI-.01)),ee=this.getHorizon(),oe=2*Math.atan(ee/this.cameraToCenterDistance)*(.5+e.y/(2*ee)),ce=Math.sin(oe)*Q/Math.sin(l.ac(Math.PI-k-oe,.01,Math.PI-.01)),ye=Math.min(z,ce);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ye+Q),this.nearZ=this.height/50,h=new Float64Array(16),l.b6(h,this._fov,this.width/this.height,this.nearZ,this.farZ),h[8]=2*-e.x/this.width,h[9]=2*e.y/this.height,this.projectionMatrix=l.ae(h),l.K(h,h,[1,-1,1]),l.J(h,h,[0,0,-this.cameraToCenterDistance]),l.b7(h,h,this._pitch),l.ad(h,h,this.angle),l.J(h,h,[-a,-c,0]),this.mercatorMatrix=l.K([],h,[this.worldSize,this.worldSize,this.worldSize]),l.K(h,h,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,h),l.J(h,h,[0,0,-this.elevation]),this.modelViewProjectionMatrix=h,this.invModelViewProjectionMatrix=l.as([],h),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,f,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-a,-c,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,h);const be=this.width%2/2,Ce=this.height%2/2,ke=Math.cos(this.angle),fe=Math.sin(this.angle),ze=a-Math.round(a)+ke*be+fe*Ce,Ue=c-Math.round(c)+ke*Ce+fe*be,Je=new Float64Array(h);if(l.J(Je,Je,[ze>.5?ze-1:ze,Ue>.5?Ue-1:Ue,0]),this.alignedModelViewProjectionMatrix=Je,h=l.as(new Float64Array(16),this.pixelMatrix),!h)throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new l.P(0,0)),a=[e.x*this.worldSize,e.y*this.worldSize,0,1];return l.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,e))}getCameraQueryGeometry(e){const a=this.getCameraPoint();if(e.length===1)return[e[0],a];{let c=a.x,h=a.y,f=a.x,w=a.y;for(const E of e)c=Math.min(c,E.x),h=Math.min(h,E.y),f=Math.max(f,E.x),w=Math.max(w,E.y);return[new l.P(c,h),new l.P(f,h),new l.P(f,w),new l.P(c,w),new l.P(c,h)]}}lngLatToCameraDepth(e,a){const c=this.locationCoordinate(e),h=[c.x*this.worldSize,c.y*this.worldSize,a,1];return l.af(h,h,this.modelViewProjectionMatrix),h[2]/h[3]}}function Oo(g,e){let a,c=!1,h=null,f=null;const w=()=>{h=null,c&&(g.apply(f,a),h=setTimeout(w,e),c=!1)};return(...E)=>(c=!0,f=this,a=E,h||w(),h)}class Du{constructor(e){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let c;return a.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(c=h)}),(c&&c[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:c,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const c=a.join("/");let h=c;h.split("&").length>0&&(h=h.split("&")[0]),this._hashName&&(h=`${this._hashName}=${c}`);let f=window.location.hash.replace(h,"");f.startsWith("#&")?f=f.slice(0,1)+f.slice(2):f==="#"&&(f="");let w=window.location.href.replace(/(#.+)?$/,f);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Oo(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const a=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,h=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),f=Math.pow(10,h),w=Math.round(a.lng*f)/f,E=Math.round(a.lat*f)/f,Q=this._map.getBearing(),k=this._map.getPitch();let R="";if(R+=e?`/${w}/${E}/${c}`:`${c}/${E}/${w}`,(Q||k)&&(R+="/"+Math.round(10*Q)/10),k&&(R+=`/${Math.round(k)}`),this._hashName){const z=this._hashName;let ee=!1;const oe=window.location.hash.slice(1).split("&").map(ce=>{const ye=ce.split("=")[0];return ye===z?(ee=!0,`${ye}=${R}`):ce}).filter(ce=>ce);return ee||oe.push(`${z}=${R}`),`#${oe.join("&")}`}return`#${R}`}}const so={linearity:.3,easing:l.b8(0,0,.3,1)},Ch=l.e({deceleration:2500,maxSpeed:1400},so),ku=l.e({deceleration:20,maxSpeed:1400},so),oo=l.e({deceleration:1e3,maxSpeed:360},so),Vo=l.e({deceleration:1e3,maxSpeed:90},so);class Mu{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:H.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,a=H.now();for(;e.length>0&&a-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:f}of this._inertiaBuffer)a.zoom+=f.zoomDelta||0,a.bearing+=f.bearingDelta||0,a.pitch+=f.pitchDelta||0,f.panDelta&&a.pan._add(f.panDelta),f.around&&(a.around=f.around),f.pinchAround&&(a.pinchAround=f.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(a.pan.mag()){const f=ra(a.pan.mag(),c,l.e({},Ch,e||{}));h.offset=a.pan.mult(f.amount/a.pan.mag()),h.center=this._map.transform.center,qo(h,f)}if(a.zoom){const f=ra(a.zoom,c,ku);h.zoom=this._map.transform.zoom+f.amount,qo(h,f)}if(a.bearing){const f=ra(a.bearing,c,oo);h.bearing=this._map.transform.bearing+l.ac(f.amount,-179,179),qo(h,f)}if(a.pitch){const f=ra(a.pitch,c,Vo);h.pitch=this._map.transform.pitch+f.amount,qo(h,f)}if(h.zoom||h.bearing){const f=a.pinchAround===void 0?a.around:a.pinchAround;h.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),l.e(h,{noMoveStart:!0})}}function qo(g,e){(!g.duration||g.duration<e.duration)&&(g.duration=e.duration,g.easing=e.easing)}function ra(g,e,a){const{maxSpeed:c,linearity:h,deceleration:f}=a,w=l.ac(g*h/(e/1e3),-c,c),E=Math.abs(w)/(f*h);return{easing:a.easing,duration:1e3*E,amount:w*(E/2)}}class Xr extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,c,h={}){const f=V.mousePos(a.getCanvas(),c),w=a.unproject(f);super(e,l.e({point:f,lngLat:w,originalEvent:c},h)),this._defaultPrevented=!1,this.target=a}}class ls extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,c){const h=e==="touchend"?c.changedTouches:c.touches,f=V.touchPos(a.getCanvasContainer(),h),w=f.map(Q=>a.unproject(Q)),E=f.reduce((Q,k,R,z)=>Q.add(k.div(z.length)),new l.P(0,0));super(e,{points:f,point:E,lngLats:w,lngLat:a.unproject(E),originalEvent:c}),this._defaultPrevented=!1}}class lo extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,c){super(e,{originalEvent:c}),this._defaultPrevented=!1}}class Ir{constructor(e,a){this._map=e,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new lo(e.type,this._map,e))}mousedown(e,a){return this._mousedownPos=a,this._firePreventable(new Xr(e.type,this._map,e))}mouseup(e){this._map.fire(new Xr(e.type,this._map,e))}click(e,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Xr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Xr(e.type,this._map,e))}mouseover(e){this._map.fire(new Xr(e.type,this._map,e))}mouseout(e){this._map.fire(new Xr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ls(e.type,this._map,e))}touchmove(e){this._map.fire(new ls(e.type,this._map,e))}touchend(e){this._map.fire(new ls(e.type,this._map,e))}touchcancel(e){this._map.fire(new ls(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xa{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Xr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Xr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jr{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(l.P.convert(e),this._map.terrain)}}class Fa{constructor(e,a){this._map=e,this._tr=new Jr(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,a){this.isEnabled()&&e.shiftKey&&e.button===0&&(V.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(e,a){if(!this._active)return;const c=a;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const h=this._startPos;this._lastPos=c,this._box||(this._box=V.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const f=Math.min(h.x,c.x),w=Math.max(h.x,c.x),E=Math.min(h.y,c.y),Q=Math.max(h.y,c.y);V.setTransform(this._box,`translate(${f}px,${E}px)`),this._box.style.width=w-f+"px",this._box.style.height=Q-E+"px"}mouseupWindow(e,a){if(!this._active||e.button!==0)return;const c=this._startPos,h=a;if(this.reset(),V.suppressClick(),c.x!==h.x||c.y!==h.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:e})),{cameraAnimation:f=>f.fitScreenCoordinates(c,h,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(V.remove(this._box),this._box=null),V.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,a){return this._map.fire(new l.k(e,{originalEvent:a}))}}function cs(g,e){if(g.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${e.length}`);const a={};for(let c=0;c<g.length;c++)a[g[c].identifier]=e[c];return a}class zc{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,a,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),c.length===this.numTouches&&(this.centroid=function(h){const f=new l.P(0,0);for(const w of h)f._add(w);return f.div(h.length)}(a),this.touches=cs(c,a)))}touchmove(e,a,c){if(this.aborted||!this.centroid)return;const h=cs(c,a);for(const f in this.touches){const w=h[f];(!w||w.dist(this.touches[f])>30)&&(this.aborted=!0)}}touchend(e,a,c){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class us{constructor(e){this.singleTap=new zc(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,a,c){this.singleTap.touchstart(e,a,c)}touchmove(e,a,c){this.singleTap.touchmove(e,a,c)}touchend(e,a,c){const h=this.singleTap.touchend(e,a,c);if(h){const f=e.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(h)<30;if(f&&w||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class Ho{constructor(e){this._tr=new Jr(e),this._zoomIn=new us({numTouches:1,numTaps:2}),this._zoomOut=new us({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,a,c){this._zoomIn.touchstart(e,a,c),this._zoomOut.touchstart(e,a,c)}touchmove(e,a,c){this._zoomIn.touchmove(e,a,c),this._zoomOut.touchmove(e,a,c)}touchend(e,a,c){const h=this._zoomIn.touchend(e,a,c),f=this._zoomOut.touchend(e,a,c),w=this._tr;return h?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(h)},{originalEvent:e})}):f?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(f)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rs{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const a=this._moveFunction(...e);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(e,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,a){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const h=a.length?a[0]:a;return!this._moved&&h.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=h,this._move(c,h))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&V.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Tu={0:1,2:2};class za{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const a=V.mouseButton(e);this._eventButton=a}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(a,c){const h=Tu[c];return a.buttons===void 0||(a.buttons&h)!==h}(e,this._eventButton)}isValidEndEvent(e){return V.mouseButton(e)===this._eventButton}}class Gc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Gl=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=e=>{e.preventDefault()}},Nc=({enable:g,clickTolerance:e,bearingDegreesPerPixelMoved:a=.8})=>{const c=new za({checkCorrectEvent:h=>V.mouseButton(h)===0&&h.ctrlKey||V.mouseButton(h)===2});return new Rs({clickTolerance:e,move:(h,f)=>({bearingDelta:(f.x-h.x)*a}),moveStateManager:c,enable:g,assignEvents:Gl})},hs=({enable:g,clickTolerance:e,pitchDegreesPerPixelMoved:a=-.5})=>{const c=new za({checkCorrectEvent:h=>V.mouseButton(h)===0&&h.ctrlKey||V.mouseButton(h)===2});return new Rs({clickTolerance:e,move:(h,f)=>({pitchDelta:(f.y-h.y)*a}),moveStateManager:c,enable:g,assignEvents:Gl})};class Pu{constructor(e,a){this._clickTolerance=e.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,a,c){return this._calculateTransform(e,a,c)}touchmove(e,a,c){if(this._active){if(!this._shouldBePrevented(c.length))return e.preventDefault(),this._calculateTransform(e,a,c);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,a,c){this._calculateTransform(e,a,c),this._active&&this._shouldBePrevented(c.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,a,c){c.length>0&&(this._active=!0);const h=cs(c,a),f=new l.P(0,0),w=new l.P(0,0);let E=0;for(const k in h){const R=h[k],z=this._touches[k];z&&(f._add(R),w._add(R.sub(z)),E++,h[k]=R)}if(this._touches=h,this._shouldBePrevented(E)||!w.mag())return;const Q=w.div(E);return this._sum._add(Q),this._sum.mag()<this._clickTolerance?void 0:{around:f.div(E),panDelta:Q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,a,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([a[0],a[1]]))}touchmove(e,a,c){if(!this._firstTwoTouches)return;e.preventDefault();const[h,f]=this._firstTwoTouches,w=jo(c,a,h),E=jo(c,a,f);if(!w||!E)return;const Q=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],Q,e)}touchend(e,a,c){if(!this._firstTwoTouches)return;const[h,f]=this._firstTwoTouches,w=jo(c,a,h),E=jo(c,a,f);w&&E||(this._active&&V.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function jo(g,e,a){for(let c=0;c<g.length;c++)if(g[c].identifier===a)return e[c]}function Jo(g,e){return Math.log(g/e)/Math.LN2}class Uc extends Nl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,a){const c=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Jo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Jo(this._distance,c),pinchAround:a}}}function On(g,e){return 180*g.angleWith(e)/Math.PI}class Yo extends Nl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,a,c){const h=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:On(this._vector,h),pinchAround:a}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const a=25/(Math.PI*this._minDiameter)*360,c=On(e,this._startVector);return Math.abs(c)<a}}function Ga(g){return Math.abs(g.y)>Math.abs(g.x)}class Oc extends Nl{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,a,c){super.touchstart(e,a,c),this._currentTouchCount=c.length}_start(e){this._lastPoints=e,Ga(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,a,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const h=e[0].sub(this._lastPoints[0]),f=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(h,f,c.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(h.y+f.y)/2*-.5}):void 0}gestureBeginsVertically(e,a,c){if(this._valid!==void 0)return this._valid;const h=e.mag()>=2,f=a.mag()>=2;if(!h&&!f)return;if(!h||!f)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const w=e.y>0==a.y>0;return Ga(e)&&Ga(a)&&w}}const Vn={panStep:100,bearingStep:15,pitchStep:10};class qn{constructor(e){this._tr=new Jr(e);const a=Vn;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let a=0,c=0,h=0,f=0,w=0;switch(e.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:e.shiftKey?c=-1:(e.preventDefault(),f=-1);break;case 39:e.shiftKey?c=1:(e.preventDefault(),f=1);break;case 38:e.shiftKey?h=1:(e.preventDefault(),w=-1);break;case 40:e.shiftKey?h=-1:(e.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(c=0,h=0),{cameraAnimation:E=>{const Q=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:co,zoom:a?Math.round(Q.zoom)+a*(e.shiftKey?2:1):Q.zoom,bearing:Q.bearing+c*this._bearingStep,pitch:Q.pitch+h*this._pitchStep,offset:[-f*this._panStep,-w*this._panStep],center:Q.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function co(g){return g*(2-g)}const Rn=4.000244140625;class Ls{constructor(e,a){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=e,this._tr=new Jr(e),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let a=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const c=H.now(),h=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,a!==0&&a%Rn==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(h*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),e.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=e,this._delta-=a,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=V.mousePos(this._map.getCanvas(),e),c=this._tr;this._around=a.y>c.transform.height/2-c.transform.getHorizon()?l.N.convert(this._aroundCenter?c.center:c.unproject(a)):l.N.convert(c.center),this._aroundPoint=c.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const Q=this._type==="wheel"&&Math.abs(this._delta)>Rn?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&k!==0&&(k=1/k);const R=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,c=this._startZoom,h=this._easing;let f,w=!1;const E=H.now()-this._lastWheelEventTime;if(this._type==="wheel"&&c&&h&&E){const Q=Math.min(E/200,1),k=h(Q);f=l.y.number(c,a,k),Q<1?this._frameId||(this._frameId=!0):w=!0}else f=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:f-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let a=l.b9;if(this._prevEase){const c=this._prevEase,h=(H.now()-c.start)/c.duration,f=c.easing(h+.01)-c.easing(h),w=.27/Math.sqrt(f*f+1e-4)*.01,E=Math.sqrt(.0729-w*w);a=l.b8(w,E,.25,1)}return this._prevEase={start:H.now(),duration:e,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ko{constructor(e,a){this._clickZoom=e,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bh{constructor(e){this._tr=new Jr(e),this.reset()}reset(){this._active=!1}dblclick(e,a){return e.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ul{constructor(){this._tap=new us({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,a,c){if(!this._swipePoint)if(this._tapTime){const h=a[0],f=e.timeStamp-this._tapTime<500,w=this._tapPoint.dist(h)<30;f&&w?c.length>0&&(this._swipePoint=h,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(e,a,c)}touchmove(e,a,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const h=a[0],f=h.y-this._swipePoint.y;return this._swipePoint=h,e.preventDefault(),this._active=!0,{zoomDelta:f/128}}}else this._tap.touchmove(e,a,c)}touchend(e,a,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const h=this._tap.touchend(e,a,c);h&&(this._tapTime=e.timeStamp,this._tapPoint=h)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ru{constructor(e,a,c){this._el=e,this._mousePan=a,this._touchPan=c}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vc{constructor(e,a,c){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=a,this._mousePitch=c}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class uo{constructor(e,a,c,h){this._el=e,this._touchZoom=a,this._touchRotate=c,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class wa{constructor(e,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=V.create("div","maplibregl-cooperative-gesture-screen",e);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),h=document.createElement("div");h.className="maplibregl-desktop-message",h.textContent=a,this._container.appendChild(h);const f=document.createElement("div");f.className="maplibregl-mobile-message",f.textContent=c,this._container.appendChild(f),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(V.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,a){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:e,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Nt=g=>g.zoom||g.drag||g.pitch||g.rotate;class qc extends l.k{}function $o(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Zo{constructor(e,a){this.handleWindowEvent=h=>{this.handleEvent(h,`${h.type}Window`)},this.handleEvent=(h,f)=>{if(h.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=h.type==="renderFrame"?void 0:h,E={needsRenderFrame:!1},Q={},k={},R=h.touches,z=R?this._getMapTouches(R):void 0,ee=z?V.touchPos(this._map.getCanvas(),z):V.mousePos(this._map.getCanvas(),h);for(const{handlerName:ye,handler:be,allowed:Ce}of this._handlers){if(!be.isEnabled())continue;let ke;this._blockedByActive(k,Ce,ye)?be.reset():be[f||h.type]&&(ke=be[f||h.type](h,ee,z),this.mergeHandlerResult(E,Q,ke,ye,w),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()),(ke||be.isActive())&&(k[ye]=be)}const oe={};for(const ye in this._previousActiveHandlers)k[ye]||(oe[ye]=w);this._previousActiveHandlers=k,(Object.keys(oe).length||$o(E))&&(this._changes.push([E,Q,oe]),this._triggerRenderFrame()),(Object.keys(k).length||$o(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=E;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mu(e),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[h,f,w]of this._listeners)V.addEventListener(h,f,h===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[e,a,c]of this._listeners)V.removeEventListener(e,a,e===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(e){const a=this._map,c=a.getCanvasContainer();this._add("mapEvent",new Ir(a,e));const h=a.boxZoom=new Fa(a,e);this._add("boxZoom",h),e.interactive&&e.boxZoom&&h.enable();const f=a.cooperativeGestures=new wa(a,e.cooperativeGestures);this._add("cooperativeGestures",f),e.cooperativeGestures&&f.enable();const w=new Ho(a),E=new Bh(a);a.doubleClickZoom=new Ko(E,w),this._add("tapZoom",w),this._add("clickZoom",E),e.interactive&&e.doubleClickZoom&&a.doubleClickZoom.enable();const Q=new Ul;this._add("tapDragZoom",Q);const k=a.touchPitch=new Oc(a);this._add("touchPitch",k),e.interactive&&e.touchPitch&&a.touchPitch.enable(e.touchPitch);const R=Nc(e),z=hs(e);a.dragRotate=new Vc(e,R,z),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),e.interactive&&e.dragRotate&&a.dragRotate.enable();const ee=(({enable:ke,clickTolerance:fe})=>{const ze=new za({checkCorrectEvent:Ue=>V.mouseButton(Ue)===0&&!Ue.ctrlKey});return new Rs({clickTolerance:fe,move:(Ue,Je)=>({around:Je,panDelta:Je.sub(Ue)}),activateOnStart:!0,moveStateManager:ze,enable:ke,assignEvents:Gl})})(e),oe=new Pu(e,a);a.dragPan=new Ru(c,ee,oe),this._add("mousePan",ee),this._add("touchPan",oe,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&a.dragPan.enable(e.dragPan);const ce=new Yo,ye=new Uc;a.touchZoomRotate=new uo(c,ye,ce,Q),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&a.touchZoomRotate.enable(e.touchZoomRotate);const be=a.scrollZoom=new Ls(a,()=>this._triggerRenderFrame());this._add("scrollZoom",be,["mousePan"]),e.interactive&&e.scrollZoom&&a.scrollZoom.enable(e.scrollZoom);const Ce=a.keyboard=new qn(a);this._add("keyboard",Ce),e.interactive&&e.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new xa(a))}_add(e,a,c){this._handlers.push({handlerName:e,handler:a,allowed:c}),this._handlersById[e]=a}stop(e){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Nt(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,a,c){for(const h in e)if(h!==c&&(!a||a.indexOf(h)<0))return!0;return!1}_getMapTouches(e){const a=[];for(const c of e)this._el.contains(c.target)&&a.push(c);return a}mergeHandlerResult(e,a,c,h,f){if(!c)return;l.e(e,c);const w={handlerName:h,originalEvent:c.originalEvent||f};c.zoomDelta!==void 0&&(a.zoom=w),c.panDelta!==void 0&&(a.drag=w),c.pitchDelta!==void 0&&(a.pitch=w),c.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const e={},a={},c={};for(const[h,f,w]of this._changes)h.panDelta&&(e.panDelta=(e.panDelta||new l.P(0,0))._add(h.panDelta)),h.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+h.pitchDelta),h.around!==void 0&&(e.around=h.around),h.pinchAround!==void 0&&(e.pinchAround=h.pinchAround),h.noInertia&&(e.noInertia=h.noInertia),l.e(a,f),l.e(c,w);this._updateMapTransform(e,a,c),this._changes=[]}_updateMapTransform(e,a,c){const h=this._map,f=h._getTransformForUpdate(),w=h.terrain;if(!($o(e)||w&&this._terrainMovement))return this._fireEvents(a,c,!0);let{panDelta:E,zoomDelta:Q,bearingDelta:k,pitchDelta:R,around:z,pinchAround:ee}=e;ee!==void 0&&(z=ee),h._stop(!0),z=z||h.transform.centerPoint;const oe=f.pointLocation(E?z.sub(E):z);k&&(f.bearing+=k),R&&(f.pitch+=R),Q&&(f.zoom+=Q),w?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?f.center=f.pointLocation(f.centerPoint.sub(E)):f.setLocationAtPoint(oe,z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,f.setLocationAtPoint(oe,z)):f.setLocationAtPoint(oe,z),h._applyUpdatedTransform(f),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(a,c,!0)}_fireEvents(e,a,c){const h=Nt(this._eventsInProgress),f=Nt(e),w={};for(const z in e){const{originalEvent:ee}=e[z];this._eventsInProgress[z]||(w[`${z}start`]=ee),this._eventsInProgress[z]=e[z]}!h&&f&&this._fireEvent("movestart",f.originalEvent);for(const z in w)this._fireEvent(z,w[z]);f&&this._fireEvent("move",f.originalEvent);for(const z in e){const{originalEvent:ee}=e[z];this._fireEvent(z,ee)}const E={};let Q;for(const z in this._eventsInProgress){const{handlerName:ee,originalEvent:oe}=this._eventsInProgress[z];this._handlersById[ee].isActive()||(delete this._eventsInProgress[z],Q=a[ee]||oe,E[`${z}end`]=Q)}for(const z in E)this._fireEvent(z,E[z]);const k=Nt(this._eventsInProgress),R=(h||f)&&!k;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const z=this._map._getTransformForUpdate();z.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(z)}if(c&&R){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;!z||!z.essential&&H.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:Q})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:Q})),this._updatingCamera=!1}}_fireEvent(e,a){this._map.fire(new l.k(e,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new qc("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class na extends l.E{constructor(e,a){super(),this._renderFrameCallback=()=>{const c=Math.min((H.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,a){return this.jumpTo({center:e},a)}panBy(e,a,c){return e=l.P.convert(e).mult(-1),this.panTo(this.transform.center,l.e({offset:e},a),c)}panTo(e,a,c){return this.easeTo(l.e({center:e},a),c)}getZoom(){return this.transform.zoom}setZoom(e,a){return this.jumpTo({zoom:e},a),this}zoomTo(e,a,c){return this.easeTo(l.e({zoom:e},a),c)}zoomIn(e,a){return this.zoomTo(this.getZoom()+1,e,a),this}zoomOut(e,a){return this.zoomTo(this.getZoom()-1,e,a),this}getBearing(){return this.transform.bearing}setBearing(e,a){return this.jumpTo({bearing:e},a),this}getPadding(){return this.transform.padding}setPadding(e,a){return this.jumpTo({padding:e},a),this}rotateTo(e,a,c){return this.easeTo(l.e({bearing:e},a),c)}resetNorth(e,a){return this.rotateTo(0,l.e({duration:1e3},e),a),this}resetNorthPitch(e,a){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},e),a),this}snapToNorth(e,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,a):this}getPitch(){return this.transform.pitch}setPitch(e,a){return this.jumpTo({pitch:e},a),this}cameraForBounds(e,a){e=ve.convert(e).adjustAntiMeridian();const c=a&&a.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),c,a)}_cameraForBoxAndBearing(e,a,c,h){const f={top:0,bottom:0,right:0,left:0};if(typeof(h=l.e({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const Pt=h.padding;h.padding={top:Pt,bottom:Pt,right:Pt,left:Pt}}h.padding=l.e(f,h.padding);const w=this.transform,E=w.padding,Q=new ve(e,a),k=w.project(Q.getNorthWest()),R=w.project(Q.getNorthEast()),z=w.project(Q.getSouthEast()),ee=w.project(Q.getSouthWest()),oe=l.ba(-c),ce=k.rotate(oe),ye=R.rotate(oe),be=z.rotate(oe),Ce=ee.rotate(oe),ke=new l.P(Math.max(ce.x,ye.x,Ce.x,be.x),Math.max(ce.y,ye.y,Ce.y,be.y)),fe=new l.P(Math.min(ce.x,ye.x,Ce.x,be.x),Math.min(ce.y,ye.y,Ce.y,be.y)),ze=ke.sub(fe),Ue=(w.width-(E.left+E.right+h.padding.left+h.padding.right))/ze.x,Je=(w.height-(E.top+E.bottom+h.padding.top+h.padding.bottom))/ze.y;if(Je<0||Ue<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ct=Math.min(w.scaleZoom(w.scale*Math.min(Ue,Je)),h.maxZoom),wt=l.P.convert(h.offset),Rt=new l.P((h.padding.left-h.padding.right)/2,(h.padding.top-h.padding.bottom)/2).rotate(l.ba(c)),Ht=wt.add(Rt).mult(w.scale/w.zoomScale(ct));return{center:w.unproject(k.add(z).div(2).sub(Ht)),zoom:ct,bearing:c}}fitBounds(e,a,c){return this._fitInternal(this.cameraForBounds(e,a),a,c)}fitScreenCoordinates(e,a,c,h,f){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(e)),this.transform.pointLocation(l.P.convert(a)),c,h),h,f)}_fitInternal(e,a,c){return e?(delete(a=l.e(e,a)).padding,a.linear?this.easeTo(a,c):this.flyTo(a,c)):this}jumpTo(e,a){this.stop();const c=this._getTransformForUpdate();let h=!1,f=!1,w=!1;return"zoom"in e&&c.zoom!==+e.zoom&&(h=!0,c.zoom=+e.zoom),e.center!==void 0&&(c.center=l.N.convert(e.center)),"bearing"in e&&c.bearing!==+e.bearing&&(f=!0,c.bearing=+e.bearing),"pitch"in e&&c.pitch!==+e.pitch&&(w=!0,c.pitch=+e.pitch),e.padding==null||c.isPaddingEqual(e.padding)||(c.padding=e.padding),this._applyUpdatedTransform(c),this.fire(new l.k("movestart",a)).fire(new l.k("move",a)),h&&this.fire(new l.k("zoomstart",a)).fire(new l.k("zoom",a)).fire(new l.k("zoomend",a)),f&&this.fire(new l.k("rotatestart",a)).fire(new l.k("rotate",a)).fire(new l.k("rotateend",a)),w&&this.fire(new l.k("pitchstart",a)).fire(new l.k("pitch",a)).fire(new l.k("pitchend",a)),this.fire(new l.k("moveend",a))}calculateCameraOptionsFromTo(e,a,c,h=0){const f=l.Z.fromLngLat(e,a),w=l.Z.fromLngLat(c,h),E=w.x-f.x,Q=w.y-f.y,k=w.z-f.z,R=Math.hypot(E,Q,k);if(R===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(E,Q),ee=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),oe=180*Math.atan2(E,-Q)/Math.PI;let ce=180*Math.acos(z/R)/Math.PI;return ce=k<0?90-ce:90+ce,{center:w.toLngLat(),zoom:ee,pitch:ce,bearing:oe}}easeTo(e,a){var c;this._stop(!1,e.easeId),((e=l.e({offset:[0,0],duration:500,easing:l.b9},e)).animate===!1||!e.essential&&H.prefersReducedMotion)&&(e.duration=0);const h=this._getTransformForUpdate(),f=h.zoom,w=h.bearing,E=h.pitch,Q=h.padding,k="bearing"in e?this._normalizeBearing(e.bearing,w):w,R="pitch"in e?+e.pitch:E,z="padding"in e?e.padding:h.padding,ee=l.P.convert(e.offset);let oe=h.centerPoint.add(ee);const ce=h.pointLocation(oe),{center:ye,zoom:be}=h.getConstrained(l.N.convert(e.center||ce),(c=e.zoom)!==null&&c!==void 0?c:f);this._normalizeCenter(ye,h);const Ce=h.project(ce),ke=h.project(ye).sub(Ce),fe=h.zoomScale(be-f);let ze,Ue;e.around&&(ze=l.N.convert(e.around),Ue=h.locationPoint(ze));const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||be!==f,this._rotating=this._rotating||w!==k,this._pitching=this._pitching||R!==E,this._padding=!h.isPaddingEqual(z),this._easeId=e.easeId,this._prepareEase(a,e.noMoveStart,Je),this.terrain&&this._prepareElevation(ye),this._ease(ct=>{if(this._zooming&&(h.zoom=l.y.number(f,be,ct)),this._rotating&&(h.bearing=l.y.number(w,k,ct)),this._pitching&&(h.pitch=l.y.number(E,R,ct)),this._padding&&(h.interpolatePadding(Q,z,ct),oe=h.centerPoint.add(ee)),this.terrain&&!e.freezeElevation&&this._updateElevation(ct),ze)h.setLocationAtPoint(ze,Ue);else{const wt=h.zoomScale(h.zoom-f),Rt=be>f?Math.min(2,fe):Math.max(.5,fe),Ht=Math.pow(Rt,1-ct),Pt=h.unproject(Ce.add(ke.mult(ct*Ht)).mult(wt));h.setLocationAtPoint(h.renderWorldCopies?Pt.wrap():Pt,oe)}this._applyUpdatedTransform(h),this._fireMoveEvents(a)},ct=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a,ct)},e),this}_prepareEase(e,a,c={}){this._moving=!0,a||c.moving||this.fire(new l.k("movestart",e)),this._zooming&&!c.zooming&&this.fire(new l.k("zoomstart",e)),this._rotating&&!c.rotating&&this.fire(new l.k("rotatestart",e)),this._pitching&&!c.pitching&&this.fire(new l.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&a!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(c-(a-(c*e+this._elevationStart))/(1-e)),this._elevationTarget=a}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const a=e.getCameraPosition(),c=this.terrain.getElevationForLngLatZoom(a.lngLat,e.zoom);if(a.altitude<c){const h=this.calculateCameraOptionsFromTo(a.lngLat,c,e.center,e.elevation);return{pitch:h.pitch,zoom:h.zoom}}return{}}_applyUpdatedTransform(e){const a=[];if(this.terrain&&a.push(h=>this._elevateCameraIfInsideTerrain(h)),this.transformCameraUpdate&&a.push(h=>this.transformCameraUpdate(h)),!a.length)return;const c=e.clone();for(const h of a){const f=c.clone(),{center:w,zoom:E,pitch:Q,bearing:k,elevation:R}=h(f);w&&(f.center=w),E!==void 0&&(f.zoom=E),Q!==void 0&&(f.pitch=Q),k!==void 0&&(f.bearing=k),R!==void 0&&(f.elevation=R),c.apply(f)}this.transform.apply(c)}_fireMoveEvents(e){this.fire(new l.k("move",e)),this._zooming&&this.fire(new l.k("zoom",e)),this._rotating&&this.fire(new l.k("rotate",e)),this._pitching&&this.fire(new l.k("pitch",e))}_afterEase(e,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const c=this._zooming,h=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,c&&this.fire(new l.k("zoomend",e)),h&&this.fire(new l.k("rotateend",e)),f&&this.fire(new l.k("pitchend",e)),this.fire(new l.k("moveend",e))}flyTo(e,a){var c;if(!e.essential&&H.prefersReducedMotion){const v=l.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(v,a)}this.stop(),e=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},e);const h=this._getTransformForUpdate(),f=h.zoom,w=h.bearing,E=h.pitch,Q=h.padding,k="bearing"in e?this._normalizeBearing(e.bearing,w):w,R="pitch"in e?+e.pitch:E,z="padding"in e?e.padding:h.padding,ee=l.P.convert(e.offset);let oe=h.centerPoint.add(ee);const ce=h.pointLocation(oe),{center:ye,zoom:be}=h.getConstrained(l.N.convert(e.center||ce),(c=e.zoom)!==null&&c!==void 0?c:f);this._normalizeCenter(ye,h);const Ce=h.zoomScale(be-f),ke=h.project(ce),fe=h.project(ye).sub(ke);let ze=e.curve;const Ue=Math.max(h.width,h.height),Je=Ue/Ce,ct=fe.mag();if("minZoom"in e){const v=l.ac(Math.min(e.minZoom,f,be),h.minZoom,h.maxZoom),_=Ue/h.zoomScale(v-f);ze=Math.sqrt(_/ct*2)}const wt=ze*ze;function Rt(v){const _=(Je*Je-Ue*Ue+(v?-1:1)*wt*wt*ct*ct)/(2*(v?Je:Ue)*wt*ct);return Math.log(Math.sqrt(_*_+1)-_)}function Ht(v){return(Math.exp(v)-Math.exp(-v))/2}function Pt(v){return(Math.exp(v)+Math.exp(-v))/2}const Mt=Rt(!1);let Xt=function(v){return Pt(Mt)/Pt(Mt+ze*v)},Ii=function(v){return Ue*((Pt(Mt)*(Ht(_=Mt+ze*v)/Pt(_))-Ht(Mt))/wt)/ct;var _},b=(Rt(!0)-Mt)/ze;if(Math.abs(ct)<1e-6||!isFinite(b)){if(Math.abs(Ue-Je)<1e-6)return this.easeTo(e,a);const v=Je<Ue?-1:1;b=Math.abs(Math.log(Je/Ue))/ze,Ii=()=>0,Xt=_=>Math.exp(v*ze*_)}return e.duration="duration"in e?+e.duration:1e3*b/("screenSpeed"in e?+e.screenSpeed/ze:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=w!==k,this._pitching=R!==E,this._padding=!h.isPaddingEqual(z),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(ye),this._ease(v=>{const _=v*b,D=1/Xt(_);h.zoom=v===1?be:f+h.scaleZoom(D),this._rotating&&(h.bearing=l.y.number(w,k,v)),this._pitching&&(h.pitch=l.y.number(E,R,v)),this._padding&&(h.interpolatePadding(Q,z,v),oe=h.centerPoint.add(ee)),this.terrain&&!e.freezeElevation&&this._updateElevation(v);const T=v===1?ye:h.unproject(ke.add(fe.mult(Ii(_))).mult(D));h.setLocationAtPoint(h.renderWorldCopies?T.wrap():T,oe),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,a){var c;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,a)}return e||(c=this.handlers)===null||c===void 0||c.stop(!1),this}_ease(e,a,c){c.animate===!1||c.duration===0?(e(1),a()):(this._easeStart=H.now(),this._easeOptions=c,this._onEaseFrame=e,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,a){e=l.b3(e,-180,180);const c=Math.abs(e-a);return Math.abs(e-360-a)<c&&(e-=360),Math.abs(e+360-a)<c&&(e+=360),e}_normalizeCenter(e,a){if(!a.renderWorldCopies||a.lngRange)return;const c=e.lng-a.center.lng;e.lng+=c>180?-360:c<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const ho={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Hc{constructor(e=ho){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=V.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=V.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=V.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){V.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,a){const c=this._map._getUIString(`AttributionControl.${a}`);e.title=c,e.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(h=>typeof h!="string"?"":h)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}const a=this._map.style.sourceCaches;for(const h in a){const f=a[h];if(f.used||f.usedForTerrain){const w=f.getSource();w.attribution&&e.indexOf(w.attribution)<0&&e.push(w.attribution)}}e=e.filter(h=>String(h).trim()),e.sort((h,f)=>h.length-f.length),e=e.filter((h,f)=>{for(let w=f+1;w<e.length;w++)if(e[w].indexOf(h)>=0)return!1;return!0});const c=e.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,e.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _i{constructor(e={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const c=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=V.create("div","maplibregl-ctrl");const a=V.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){V.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ol{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const a=++this._id;return this._queue.push({callback:e,id:a,cancelled:!1}),a}remove(e){const a=this._currentlyRunning,c=a?this._queue.concat(a):this._queue;for(const h of c)if(h.id===e)return void(h.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const c of a)if(!c.cancelled&&(c.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Lu=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class jc extends l.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,a){this.sourceCache.update(e,a),this._renderableTilesKeys=[];const c={};for(const h of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))c[h.key]=!0,this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),l.aP(h.posMatrix,0,l.X,0,l.X,0,1),this._tiles[h.key]=new Lr(h,this.tileSize));for(const h in this._tiles)c[h]||delete this._tiles[h]}freeRtt(e){for(const a in this._tiles){const c=this._tiles[a];(!e||c.tileID.equals(e)||c.tileID.isChildOf(e)||e.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const a={};for(const c of this._renderableTilesKeys){const h=this._tiles[c].tileID;if(h.canonical.equals(e.canonical)){const f=e.clone();f.posMatrix=new Float64Array(16),l.aP(f.posMatrix,0,l.X,0,l.X,0,1),a[c]=f}else if(h.canonical.isChildOf(e.canonical)){const f=e.clone();f.posMatrix=new Float64Array(16);const w=h.canonical.z-e.canonical.z,E=h.canonical.x-(h.canonical.x>>w<<w),Q=h.canonical.y-(h.canonical.y>>w<<w),k=l.X>>w;l.aP(f.posMatrix,0,k,0,k,0,1),l.J(f.posMatrix,f.posMatrix,[-E*k,-Q*k,0]),a[c]=f}else if(e.canonical.isChildOf(h.canonical)){const f=e.clone();f.posMatrix=new Float64Array(16);const w=e.canonical.z-h.canonical.z,E=e.canonical.x-(e.canonical.x>>w<<w),Q=e.canonical.y-(e.canonical.y>>w<<w),k=l.X>>w;l.aP(f.posMatrix,0,l.X,0,l.X,0,1),l.J(f.posMatrix,f.posMatrix,[E*k,Q*k,0]),l.K(f.posMatrix,f.posMatrix,[1/2**w,1/2**w,0]),a[c]=f}}return a}getSourceTile(e,a){const c=this.sourceCache._source;let h=e.overscaledZ-this.deltaZoom;if(h>c.maxzoom&&(h=c.maxzoom),h<c.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(h).key);let f=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!f||!f.dem)&&a)for(;h>=c.minzoom&&(!f||!f.dem);)f=this.sourceCache.getTileByID(e.scaledTo(h--).key);return f}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=e)}}class Fu{constructor(e,a,c){this.painter=e,this.sourceCache=new jc(a),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,a,c,h=l.X){var f;if(!(a>=0&&a<h&&c>=0&&c<h))return 0;const w=this.getTerrainData(e),E=(f=w.tile)===null||f===void 0?void 0:f.dem;if(!E)return 0;const Q=function(ce,ye,be){var Ce=ye[0],ke=ye[1];return ce[0]=be[0]*Ce+be[4]*ke+be[12],ce[1]=be[1]*Ce+be[5]*ke+be[13],ce}([],[a/h*l.X,c/h*l.X],w.u_terrain_matrix),k=[Q[0]*E.dim,Q[1]*E.dim],R=Math.floor(k[0]),z=Math.floor(k[1]),ee=k[0]-R,oe=k[1]-z;return E.get(R,z)*(1-ee)*(1-oe)+E.get(R+1,z)*ee*(1-oe)+E.get(R,z+1)*(1-ee)*oe+E.get(R+1,z+1)*ee*oe}getElevationForLngLatZoom(e,a){if(!l.bb(a,e.wrap()))return 0;const{tileID:c,mercatorX:h,mercatorY:f}=this._getOverscaledTileIDFromLngLatZoom(e,a);return this.getElevation(c,h%l.X,f%l.X,l.X)}getElevation(e,a,c,h=l.X){return this.getDEMElevation(e,a,c,h)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const h=this.painter.context,f=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new mt(h,f,h.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new mt(h,new l.R({width:1,height:1}),h.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const a=this.sourceCache.getSourceTile(e,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const h=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new mt(h,a.dem.getPixels(),h.gl.RGBA,{premultiply:!1}),a.demTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const c=a&&a+a.tileID.key+e.key;if(c&&!this._demMatrixCache[c]){const h=this.sourceCache.sourceCache._source.maxzoom;let f=e.canonical.z-a.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=h?f=e.canonical.z-h:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=e.canonical.x-(e.canonical.x>>f<<f),E=e.canonical.y-(e.canonical.y>>f<<f),Q=l.bc(new Float64Array(16),[1/(l.X<<f),1/(l.X<<f),0]);l.J(Q,Q,[w*l.X,E*l.X,0]),this._demMatrixCache[e.key]={matrix:Q,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(e){const a=this.painter,c=a.width/devicePixelRatio,h=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===h||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new mt(a.context,{width:c,height:h,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new mt(a.context,{width:c,height:h,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(c,h,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,c,h))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let f=0,w=0;f<this._coordsTextureSize;f++)for(let E=0;E<this._coordsTextureSize;E++,w+=4)a[w+0]=255&E,a[w+1]=255&f,a[w+2]=E>>8<<4|f>>8,a[w+3]=0;const c=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),h=new mt(e,c,e.gl.RGBA,{premultiply:!1});return h.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=h,h}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),c=this.painter.context,h=c.gl,f=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),h.readPixels(f,E-w-1,1,1,h.RGBA,h.UNSIGNED_BYTE,a),c.bindFramebuffer.set(null);const Q=a[0]+(a[2]>>4<<8),k=a[1]+((15&a[2])<<8),R=this.coordsIndex[255-a[3]],z=R&&this.sourceCache.getTileByID(R);if(!z)return null;const ee=this._coordsTextureSize,oe=(1<<z.tileID.canonical.z)*ee;return new l.Z((z.tileID.canonical.x*ee+Q)/oe+z.tileID.wrap,(z.tileID.canonical.y*ee+k)/oe,this.getElevation(z.tileID,Q,k,ee))}depthAtPoint(e){const a=new Uint8Array(4),c=this.painter.context,h=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),h.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,h.RGBA,h.UNSIGNED_BYTE,a),c.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,a=new l.bd,c=new l.aY,h=this.meshSize,f=l.X/h,w=h*h;for(let z=0;z<=h;z++)for(let ee=0;ee<=h;ee++)a.emplaceBack(ee*f,z*f,0);for(let z=0;z<w;z+=h+1)for(let ee=0;ee<h;ee++)c.emplaceBack(ee+z,h+ee+z+1,h+ee+z+2),c.emplaceBack(ee+z,h+ee+z+2,ee+z+1);const E=a.length,Q=E+2*(h+1);for(const z of[0,1])for(let ee=0;ee<=h;ee++)for(const oe of[0,1])a.emplaceBack(ee*f,z*l.X,oe);for(let z=0;z<2*h;z+=2)c.emplaceBack(Q+z,Q+z+1,Q+z+3),c.emplaceBack(Q+z,Q+z+3,Q+z+2),c.emplaceBack(E+z,E+z+3,E+z+1),c.emplaceBack(E+z,E+z+2,E+z+3);const k=a.length,R=k+2*(h+1);for(const z of[0,1])for(let ee=0;ee<=h;ee++)for(const oe of[0,1])a.emplaceBack(z*l.X,ee*f,oe);for(let z=0;z<2*h;z+=2)c.emplaceBack(k+z,k+z+1,k+z+3),c.emplaceBack(k+z,k+z+3,k+z+2),c.emplaceBack(R+z,R+z+3,R+z+1),c.emplaceBack(R+z,R+z+2,R+z+3);return this._mesh=new io(e.createVertexBuffer(a,Lu.members),e.createIndexBuffer(c),l.a0.simpleSegment(0,0,a.length,c.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*l.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,a){var c;const{tileID:h}=this._getOverscaledTileIDFromLngLatZoom(e,a);return(c=this.getMinMaxElevation(h).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(e){const a=this.getTerrainData(e).tile,c={minElevation:null,maxElevation:null};return a&&a.dem&&(c.minElevation=a.dem.min*this.exaggeration,c.maxElevation=a.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(e,a){const c=l.Z.fromLngLat(e.wrap()),h=(1<<a)*l.X,f=c.x*h,w=c.y*h,E=Math.floor(f/l.X),Q=Math.floor(w/l.X);return{tileID:new l.S(a,0,a,E,Q),mercatorX:f,mercatorY:w}}}class Vl{constructor(e,a,c){this._context=e,this._size=a,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new mt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(c.texture),{id:e,fbo:a,texture:c,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>e.id!==a),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const Ca={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class aa{constructor(e,a){this.painter=e,this.terrain=a,this.pool=new Vl(e.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(c=>!e._layers[c].isHidden(a)),this._coordsDescendingInv={};for(const c in e.sourceCaches){this._coordsDescendingInv[c]={};const h=e.sourceCaches[c].getVisibleCoordinates();for(const f of h){const w=this.terrain.sourceCache.getTerrainCoords(f);for(const E in w)this._coordsDescendingInv[c][E]||(this._coordsDescendingInv[c][E]=[]),this._coordsDescendingInv[c][E].push(w[E])}}this._coordsDescendingInvStr={};for(const c of e._order){const h=e._layers[c],f=h.source;if(Ca[h.type]&&!this._coordsDescendingInvStr[f]){this._coordsDescendingInvStr[f]={};for(const w in this._coordsDescendingInv[f])this._coordsDescendingInvStr[f][w]=this._coordsDescendingInv[f][w].map(E=>E.key).sort().join()}}for(const c of this._renderableTiles)for(const h in this._coordsDescendingInvStr){const f=this._coordsDescendingInvStr[h][c.tileID.key];f&&f!==c.rttCoords[h]&&(c.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const a=e.type,c=this.painter,h=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Ca[a]&&(this._prevType&&Ca[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(e.id),!h))return!0;if(Ca[this._prevType]||Ca[a]&&h){this._prevType=a;const f=this._stacks.length-1,w=this._stacks[f]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(Go(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[f]){const k=this.pool.getObjectForId(E.rtt[f].id);if(k.stamp===E.rtt[f].stamp){this.pool.useObject(k);continue}}const Q=this.pool.getOrCreateFreeObject();this.pool.useObject(Q),this.pool.stampObject(Q),E.rtt[f]={id:Q.id,stamp:Q.stamp},c.context.bindFramebuffer.set(Q.fbo.framebuffer),c.context.clear({color:l.aM.transparent,stencil:0}),c.currentStencilSource=void 0;for(let k=0;k<w.length;k++){const R=c.style._layers[w[k]],z=R.source?this._coordsDescendingInv[R.source][E.tileID.key]:[E.tileID];c.context.viewport.set([0,0,Q.fbo.width,Q.fbo.height]),c._renderTileClippingMasks(R,z),c.renderLayer(c,c.style.sourceCaches[R.source],R,z),R.source&&(E.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][E.tileID.key])}}return Go(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ca[a]}return!1}}const ql={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Jc=q,Wo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ho,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Xo=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Yc={showCompass:!0,showZoom:!0,visualizePitch:!1};class tr{constructor(e,a,c=!1){this.mousedown=w=>{this.startMouse(l.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),V.mousePos(this.element,w)),V.addEventListener(window,"mousemove",this.mousemove),V.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,V.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=V.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),V.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=V.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const h=e.dragRotate._mouseRotate.getClickTolerance(),f=e.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=Nc({clickTolerance:h,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:E,bearingDegreesPerPixelMoved:Q=.8})=>{const k=new Gc;return new Rs({clickTolerance:E,move:(R,z)=>({bearingDelta:(z.x-R.x)*Q}),moveStateManager:k,enable:w,assignEvents:Xo})})({clickTolerance:h,enable:!0}),this.map=e,c&&(this.mousePitch=hs({clickTolerance:f,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:E,pitchDegreesPerPixelMoved:Q=-.5})=>{const k=new Gc;return new Rs({clickTolerance:E,move:(R,z)=>({pitchDelta:(z.y-R.y)*Q}),moveStateManager:k,enable:w,assignEvents:Xo})})({clickTolerance:f,enable:!0})),V.addEventListener(a,"mousedown",this.mousedown),V.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),V.addEventListener(a,"touchcancel",this.reset)}startMouse(e,a){this.mouseRotate.dragStart(e,a),this.mousePitch&&this.mousePitch.dragStart(e,a),V.disableDrag()}startTouch(e,a){this.touchRotate.dragStart(e,a),this.touchPitch&&this.touchPitch.dragStart(e,a),V.disableDrag()}moveMouse(e,a){const c=this.map,{bearingDelta:h}=this.mouseRotate.dragMove(e,a)||{};if(h&&c.setBearing(c.getBearing()+h),this.mousePitch){const{pitchDelta:f}=this.mousePitch.dragMove(e,a)||{};f&&c.setPitch(c.getPitch()+f)}}moveTouch(e,a){const c=this.map,{bearingDelta:h}=this.touchRotate.dragMove(e,a)||{};if(h&&c.setBearing(c.getBearing()+h),this.touchPitch){const{pitchDelta:f}=this.touchPitch.dragMove(e,a)||{};f&&c.setPitch(c.getPitch()+f)}}off(){const e=this.element;V.removeEventListener(e,"mousedown",this.mousedown),V.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),V.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.removeEventListener(window,"touchend",this.touchend),V.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){V.enableDrag(),V.removeEventListener(window,"mousemove",this.mousemove),V.removeEventListener(window,"mouseup",this.mouseup),V.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),V.removeEventListener(window,"touchend",this.touchend)}}let Ki;function el(g,e,a){const c=new l.N(g.lng,g.lat);if(g=new l.N(g.lng,g.lat),e){const h=new l.N(g.lng-360,g.lat),f=new l.N(g.lng+360,g.lat),w=a.locationPoint(g).distSqr(e);a.locationPoint(h).distSqr(e)<w?g=h:a.locationPoint(f).distSqr(e)<w&&(g=f)}for(;Math.abs(g.lng-a.center.lng)>180;){const h=a.locationPoint(g);if(h.x>=0&&h.y>=0&&h.x<=a.width&&h.y<=a.height)break;g.lng>a.center.lng?g.lng-=360:g.lng+=360}return g.lng!==c.lng&&a.locationPoint(g).y>a.height/2-a.getHorizon()?g:c}const sa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hl(g,e,a){const c=g.classList;for(const h in sa)c.remove(`maplibregl-${a}-anchor-${h}`);c.add(`maplibregl-${a}-anchor-${e}`)}class tl extends l.E{constructor(e){if(super(),this._onKeyPress=a=>{const c=a.code,h=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&h!==32&&h!==13||this.togglePopup()},this._onMapClick=a=>{const c=a.originalEvent.target,h=this._element;this._popup&&(c===h||h.contains(c))&&this.togglePopup()},this._update=a=>{var c;if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?el(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),V.setTransform(this._element,`${sa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${f}`),H.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=l.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=V.create("div");const a=V.createNS("http://www.w3.org/2000/svg","svg"),c=41,h=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${c}px`),a.setAttributeNS(null,"width",`${h}px`),a.setAttributeNS(null,"viewBox",`0 0 ${h} ${c}`);const f=V.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"stroke","none"),f.setAttributeNS(null,"stroke-width","1"),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"fill-rule","evenodd");const w=V.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const E=V.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const Q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ce of Q){const ke=V.createNS("http://www.w3.org/2000/svg","ellipse");ke.setAttributeNS(null,"opacity","0.04"),ke.setAttributeNS(null,"cx","10.5"),ke.setAttributeNS(null,"cy","5.80029008"),ke.setAttributeNS(null,"rx",Ce.rx),ke.setAttributeNS(null,"ry",Ce.ry),E.appendChild(ke)}const k=V.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);const R=V.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(R);const z=V.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const ee=V.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(ee);const oe=V.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const ce=V.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ye=V.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#000000"),ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962");const be=V.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#FFFFFF"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962"),ce.appendChild(ye),ce.appendChild(be),w.appendChild(E),w.appendChild(k),w.appendChild(z),w.appendChild(oe),w.appendChild(ce),a.appendChild(w),a.setAttributeNS(null,"height",c*this._scale+"px"),a.setAttributeNS(null,"width",h*this._scale+"px"),this._element.appendChild(a),this._offset=l.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Hl(this._element,this._anchor,"marker"),e&&e.className)for(const a of e.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),V.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=l.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const h=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var a,c;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const h=this._map,f=h.terrain.depthAtPoint(this._pos),w=h.terrain.getElevationForLngLatZoom(this._lngLat,h.transform.tileZoom);if(h.transform.lngLatToCameraDepth(this._lngLat,w)-f<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/h.transform._pixelPerMeter,Q=Math.sin(h.getPitch()*Math.PI/180)*E,k=h.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),R=h.transform.lngLatToCameraDepth(this._lngLat,w+Q)-k>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=l.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,a){return e===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Kc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let il=0,on=!1;const Ao={maxWidth:100,unit:"metric"};function ii(g,e,a){const c=a&&a.maxWidth||100,h=g._container.clientHeight/2,f=g.unproject([0,h]),w=g.unproject([c,h]),E=f.distanceTo(w);if(a&&a.unit==="imperial"){const Q=3.2808*E;Q>5280?Ai(e,c,Q/5280,g._getUIString("ScaleControl.Miles")):Ai(e,c,Q,g._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Ai(e,c,E/1852,g._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Ai(e,c,E/1e3,g._getUIString("ScaleControl.Kilometers")):Ai(e,c,E,g._getUIString("ScaleControl.Meters"))}function Ai(g,e,a,c){const h=function(f){const w=Math.pow(10,`${Math.floor(f)}`.length-1);let E=f/w;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(Q){const k=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*k)/k}(E),w*E}(a);g.style.width=e*(h/a)+"px",g.innerHTML=`${h}&nbsp;${c}`}const rl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},$c=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hn(g){if(g){if(typeof g=="number"){const e=Math.round(Math.abs(g)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,g),"top-left":new l.P(e,e),"top-right":new l.P(-e,e),bottom:new l.P(0,-g),"bottom-left":new l.P(e,-e),"bottom-right":new l.P(-e,-e),left:new l.P(g,0),right:new l.P(-g,0)}}if(g instanceof l.P||Array.isArray(g)){const e=l.P.convert(g);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:l.P.convert(g.center||[0,0]),top:l.P.convert(g.top||[0,0]),"top-left":l.P.convert(g["top-left"]||[0,0]),"top-right":l.P.convert(g["top-right"]||[0,0]),bottom:l.P.convert(g.bottom||[0,0]),"bottom-left":l.P.convert(g["bottom-left"]||[0,0]),"bottom-right":l.P.convert(g["bottom-right"]||[0,0]),left:l.P.convert(g.left||[0,0]),right:l.P.convert(g.right||[0,0])}}return Hn(new l.P(0,0))}const bn=q;I.AJAXError=l.bh,I.Evented=l.E,I.LngLat=l.N,I.MercatorCoordinate=l.Z,I.Point=l.P,I.addProtocol=l.bi,I.config=l.a,I.removeProtocol=l.bj,I.AttributionControl=Hc,I.BoxZoomHandler=Fa,I.CanvasSource=di,I.CooperativeGesturesHandler=wa,I.DoubleClickZoomHandler=Ko,I.DragPanHandler=Ru,I.DragRotateHandler=Vc,I.EdgeInsets=no,I.FullscreenControl=class extends l.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var e;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=a==null?void 0:a.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){V.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=V.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);V.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},I.GeoJSONSource=Ct,I.GeolocateControl=class extends l.E{constructor(g){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const a=new l.N(e.coords.longitude,e.coords.latitude),c=e.coords.accuracy,h=this._map.getBearing(),f=l.e({bearing:h},this.options.fitBoundsOptions),w=ve.fromLngLat(a,c);this._map.fitBounds(w,f,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const a=new l.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&on)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=V.create("button","maplibregl-ctrl-geolocate",this._container),V.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=V.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new tl({element:this._dotElement}),this._circleElement=V.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))})}},this.options=l.e({},Kc,g)}onAdd(g){return this._map=g,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(e=!1){if(Ki!==void 0&&!e)return Ki;if(window.navigator.permissions===void 0)return Ki=!!window.navigator.geolocation,Ki;try{Ki=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ki=!!window.navigator.geolocation}return Ki})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),V.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,il=0,on=!1}_isOutOfMapMaxBounds(g){const e=this._map.getMaxBounds(),a=g.coords;return e&&(a.longitude<e.getWest()||a.longitude>e.getEast()||a.latitude<e.getSouth()||a.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),e=g.getSouthEast(),a=g.getNorthEast(),c=e.distanceTo(a),h=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":il--,on=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),il++,il>1?(g={maximumAge:6e5,timeout:0},on=!0):(g=this.options.positionOptions,on=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},I.Hash=Du,I.ImageSource=Ot,I.KeyboardHandler=qn,I.LngLatBounds=ve,I.LogoControl=_i,I.Map=class extends na{constructor(g){l.bf.mark(l.bg.create);const e=Object.assign(Object.assign({},Wo),g);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ao(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ol,this._controls=[],this._mapId=l.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ql),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ut.addThrottleControl(()=>this.isMoving()),this._requestManager=new ft(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const c=Oo(h=>{this._trackResize&&!this._removed&&(this.resize(h),this.redraw())},50);this._resizeObserver=new ResizeObserver(h=>{a?c(h):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zo(this,e),this._hash=e.hash&&new Du(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,l.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Hc(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new _i,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(g,e){if(e===void 0&&(e=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=g.onAdd(this);this._controls.push(g);const c=this._controlPositions[e];return e.indexOf("bottom")!==-1?c.insertBefore(a,c.firstChild):c.appendChild(a),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(g);return e>-1&&this._controls.splice(e,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,e,a,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,e,a,c)}resize(g){var e;const a=this._containerDimensions(),c=a[0],h=a[1],f=this._getClampedPixelRatio(c,h);if(this._resizeCanvas(c,h,f),this.painter.resize(c,h,f),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const Q=this._getClampedPixelRatio(c,h);this._resizeCanvas(c,h,Q),this.painter.resize(c,h,Q)}this.transform.resize(c,h),(e=this._requestedCameraState)===null||e===void 0||e.resize(c,h);const w=!this._moving;return w&&(this.stop(),this.fire(new l.k("movestart",g)).fire(new l.k("move",g))),this.fire(new l.k("resize",g)),w&&this.fire(new l.k("moveend",g)),this}_getClampedPixelRatio(g,e){const{0:a,1:c}=this._maxCanvasSize,h=this.getPixelRatio(),f=g*h,w=e*h;return Math.min(f>a?a/f:1,w>c?c/w:1)*h}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(ve.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(l.N.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(l.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,e,a){if(g==="mouseenter"||g==="mouseover"){let c=!1;return{layers:e,listener:a,delegates:{mousemove:f=>{const w=e.filter(Q=>this.getLayer(Q)),E=w.length!==0?this.queryRenderedFeatures(f.point,{layers:w}):[];E.length?c||(c=!0,a.call(this,new Xr(g,this,f.originalEvent,{features:E}))):c=!1},mouseout:()=>{c=!1}}}}if(g==="mouseleave"||g==="mouseout"){let c=!1;return{layers:e,listener:a,delegates:{mousemove:w=>{const E=e.filter(Q=>this.getLayer(Q));(E.length!==0?this.queryRenderedFeatures(w.point,{layers:E}):[]).length?c=!0:c&&(c=!1,a.call(this,new Xr(g,this,w.originalEvent)))},mouseout:w=>{c&&(c=!1,a.call(this,new Xr(g,this,w.originalEvent)))}}}}{const c=h=>{const f=e.filter(E=>this.getLayer(E)),w=f.length!==0?this.queryRenderedFeatures(h.point,{layers:f}):[];w.length&&(h.features=w,a.call(this,h),delete h.features)};return{layers:e,listener:a,delegates:{[g]:c}}}}_saveDelegatedListener(g,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(e)}_removeDelegatedListener(g,e,a){if(!this._delegatedListeners||!this._delegatedListeners[g])return;const c=this._delegatedListeners[g];for(let h=0;h<c.length;h++){const f=c[h];if(f.listener===a&&f.layers.length===e.length&&f.layers.every(w=>e.includes(w))){for(const w in f.delegates)this.off(w,f.delegates[w]);return void c.splice(h,1)}}}on(g,e,a){if(a===void 0)return super.on(g,e);const c=this._createDelegatedListener(g,typeof e=="string"?[e]:e,a);this._saveDelegatedListener(g,c);for(const h in c.delegates)this.on(h,c.delegates[h]);return this}once(g,e,a){if(a===void 0)return super.once(g,e);const c=typeof e=="string"?[e]:e,h=this._createDelegatedListener(g,c,a);for(const f in h.delegates){const w=h.delegates[f];h.delegates[f]=(...E)=>{this._removeDelegatedListener(g,c,a),w(...E)}}this._saveDelegatedListener(g,h);for(const f in h.delegates)this.once(f,h.delegates[f]);return this}off(g,e,a){return a===void 0?super.off(g,e):(this._removeDelegatedListener(g,typeof e=="string"?[e]:e,a),this)}queryRenderedFeatures(g,e){if(!this.style)return[];let a;const c=g instanceof l.P||Array.isArray(g),h=c?g:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(c?{}:g)||{},h instanceof l.P||typeof h[0]=="number")a=[l.P.convert(h)];else{const f=l.P.convert(h[0]),w=l.P.convert(h[1]);a=[f,new l.P(w.x,f.y),w,new l.P(f.x,w.y),f]}return this.style.queryRenderedFeatures(a,e,this.transform)}querySourceFeatures(g,e){return this.style.querySourceFeatures(g,e)}setStyle(g,e){return(e=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(g,e))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const e=this._locale[g];if(e==null)throw new Error(`Missing UI string '${g}'`);return e}_updateStyle(g,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,e));const a=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new bl(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,e,a):this.style.loadJSON(g,e,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new bl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,e){if(typeof g=="string"){const a=this._requestManager.transformRequest(g,"Style");l.h(a,new AbortController).then(c=>{this._updateDiff(c.data,e)}).catch(c=>{c&&this.fire(new l.j(c))})}else typeof g=="object"&&this._updateDiff(g,e)}_updateDiff(g,e){try{this.style.setState(g,e)&&this._update(!0)}catch(a){l.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(g,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(g,e){return this._lazyInitEmptyStyle(),this.style.addSource(g,e),this._update(!0)}isSourceLoaded(g){const e=this.style&&this.style.sourceCaches[g];if(e!==void 0)return e.loaded();this.fire(new l.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const e=this.style.sourceCaches[g.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&e.reload();for(const a in this.style._layers){const c=this.style._layers[a];c.type==="hillshade"&&c.source===g.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Fu(this.painter,e,g),this.painter.renderToTexture=new aa(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==g.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:g})),this}getTerrain(){var g,e;return(e=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const e in g){const a=g[e]._tiles;for(const c in a){const h=a[c];if(h.state!=="loaded"&&h.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,e,a={}){const{pixelRatio:c=1,sdf:h=!1,stretchX:f,stretchY:w,content:E,textFitWidth:Q,textFitHeight:k}=a;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||l.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:z,data:ee}=e,oe=e;return this.style.addImage(g,{data:new l.R({width:R,height:z},new Uint8Array(ee)),pixelRatio:c,stretchX:f,stretchY:w,content:E,textFitWidth:Q,textFitHeight:k,sdf:h,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,g),this}}{const{width:R,height:z,data:ee}=H.getImageData(e);this.style.addImage(g,{data:new l.R({width:R,height:z},ee),pixelRatio:c,stretchX:f,stretchY:w,content:E,textFitWidth:Q,textFitHeight:k,sdf:h,version:0})}}updateImage(g,e){const a=this.style.getImage(g);if(!a)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=e instanceof HTMLImageElement||l.b(e)?H.getImageData(e):e,{width:h,height:f,data:w}=c;if(h===void 0||f===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==a.data.width||f!==a.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(e instanceof HTMLImageElement||l.b(e));return a.data.replace(w,E),this.style.updateImage(g,a),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return ut.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,e){return this._lazyInitEmptyStyle(),this.style.addLayer(g,e),this._update(!0)}moveLayer(g,e){return this.style.moveLayer(g,e),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,e,a){return this.style.setLayerZoomRange(g,e,a),this._update(!0)}setFilter(g,e,a={}){return this.style.setFilter(g,e,a),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,e,a,c={}){return this.style.setPaintProperty(g,e,a,c),this._update(!0)}getPaintProperty(g,e){return this.style.getPaintProperty(g,e)}setLayoutProperty(g,e,a,c={}){return this.style.setLayoutProperty(g,e,a,c),this._update(!0)}getLayoutProperty(g,e){return this.style.getLayoutProperty(g,e)}setGlyphs(g,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,e,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,e,a,c=>{c||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,e,a=>{a||this._update(!0)}),this}setLight(g,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(g){return this._lazyInitEmptyStyle(),this.style.setSky(g),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,e){return this.style.setFeatureState(g,e),this._update()}removeFeatureState(g,e){return this.style.removeFeatureState(g,e),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,e=0;return this._container&&(g=this._container.clientWidth||400,e=this._container.clientHeight||300),[g,e]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const e=this._canvasContainer=V.create("div","maplibregl-canvas-container",g);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=V.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),c=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],c);const h=this._controlContainer=V.create("div","maplibregl-control-container",g),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{f[w]=V.create("div",`maplibregl-ctrl-${w} `,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,e,a){this._canvas.width=Math.floor(a*g),this._canvas.height=Math.floor(a*e),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",c=>{e={requestedAttributes:g},c&&(e.statusMessage=c.statusMessage,e.type=c.type)},{once:!0});const a=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!a){const c="Failed to initialize WebGL";throw e?(e.message=c,new Error(JSON.stringify(e))):new Error(c)}this.painter=new No(a,this.transform),Ae.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const h=this.transform.zoom,f=H.now();this.style.zoomHistory.update(h,f);const w=new l.z(h,{now:f,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=w.crossFadingFactor();E===1&&E===this._crossFadingFactor||(a=!0,this._crossFadingFactor=E),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const c=this._sourcesDirty||this._styleDirty||this._placementDirty;return c||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ut.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),V.remove(this._canvasContainer),V.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,H.frameAsync(this._frameRequest).then(g=>{l.bf.frame(g),this._frameRequest=null,this._render(g)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return Jc}getCameraTargetElevation(){return this.transform.elevation}},I.MapMouseEvent=Xr,I.MapTouchEvent=ls,I.MapWheelEvent=lo,I.Marker=tl,I.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const e=this._map.getZoom(),a=e===this._map.getMaxZoom(),c=e===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,a)=>{const c=this._map._getUIString(`NavigationControl.${a}`);e.title=c,e.setAttribute("aria-label",c)},this.options=l.e({},Yc,g),this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),V.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),V.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=V.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new tr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){V.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,e){const a=V.create("button",g,this._container);return a.type="button",a.addEventListener("click",e),a}},I.Popup=class extends l.E{constructor(g){super(),this.remove=()=>(this._content&&V.remove(this._content),this._container&&(V.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=V.create("div","maplibregl-popup",this._map.getContainer()),this._tip=V.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?el(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!e)return;const c=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let h=this.options.anchor;const f=Hn(this.options.offset);if(!h){const E=this._container.offsetWidth,Q=this._container.offsetHeight;let k;k=c.y+f.bottom.y<Q?["top"]:c.y>this._map.transform.height-Q?["bottom"]:[],c.x<E/2?k.push("left"):c.x>this._map.transform.width-E/2&&k.push("right"),h=k.length===0?"bottom":k.join("-")}let w=c.add(f[h]);this.options.subpixelPositioning||(w=w.round()),V.setTransform(this._container,`${sa[h]} translate(${w.x}px,${w.y}px)`),Hl(this._container,h,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(rl),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=l.N.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const e=document.createDocumentFragment(),a=document.createElement("body");let c;for(a.innerHTML=g;c=a.firstChild,c;)e.appendChild(c);return this.setDOMContent(e)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=V.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=V.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector($c);g&&g.focus()}},I.RasterDEMTileSource=bt,I.RasterTileSource=gt,I.ScaleControl=class{constructor(g){this._onMove=()=>{ii(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,ii(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ao),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){V.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},I.ScrollZoomHandler=Ls,I.Style=bl,I.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=V.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=V.create("button","maplibregl-ctrl-terrain",this._container),V.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){V.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},I.TwoFingersTouchPitchHandler=Oc,I.TwoFingersTouchRotateHandler=Yo,I.TwoFingersTouchZoomHandler=Uc,I.TwoFingersTouchZoomRotateHandler=uo,I.VectorTileSource=Vt,I.VideoSource=hi,I.addSourceType=(g,e)=>l._(void 0,void 0,void 0,function*(){if(qi(g))throw new Error(`A source type called "${g}" already exists.`);((a,c)=>{Ti[a]=c})(g,e)}),I.clearPrewarmedResources=function(){const g=dr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(sn),dr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},I.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},I.getRTLTextPluginStatus=function(){return Rr().getRTLTextPluginStatus()},I.getVersion=function(){return bn},I.getWorkerCount=function(){return Er.workerCount},I.getWorkerUrl=function(){return l.a.WORKER_URL},I.importScriptInWorkers=function(g){return pa().broadcast("IS",g)},I.prewarm=function(){rn().acquire(sn)},I.setMaxParallelImageRequests=function(g){l.a.MAX_PARALLEL_IMAGE_REQUESTS=g},I.setRTLTextPlugin=function(g,e){return Rr().setRTLTextPlugin(g,e)},I.setWorkerCount=function(g){Er.workerCount=g},I.setWorkerUrl=function(g){l.a.WORKER_URL=g}});var C=u;return C})})(cI);var ys=cI.exports;const ad=FB(ys);/*!
* @indoorequal/vue-maplibre-gl v7.7.1
* (c) 2024 Franois de Metz <francois@2metz.fr>
* @license MIT
*/var zB=Object.defineProperty,GB=(i,s,u)=>s in i?zB(i,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[s]=u,$g=(i,s,u)=>GB(i,typeof s!="symbol"?s+"":s,u);const NB=Symbol("map"),dc=NB,EA=Symbol("isLoaded"),UB=Symbol("isInitialized"),hI=UB,yl=Symbol("componentId"),_l=Symbol("sourceId"),fc=Symbol("sourceLayerRegistry"),AI=Symbol("marker"),Fi=Gn({style:"https://demotiles.maplibre.org/style.json",center:Object.freeze([0,0]),zoom:1,trackResize:!1}),OB=["error","load","idle","remove","render","resize","webglcontextlost","webglcontextrestored","dataloading","data","tiledataloading","sourcedataloading","styledataloading","sourcedata","styledata","styleimagemissing","dataabort","sourcedataabort","boxzoomcancel","boxzoomstart","boxzoomend","touchcancel","touchmove","touchend","touchstart","click","contextmenu","dblclick","mousemove","mouseup","mousedown","mouseout","mouseover","movestart","move","moveend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","dragstart","drag","dragend","pitchstart","pitch","pitchend","wheel","terrain","cooperativegestureprevented"];function VB(i,s,u,d){return y=>u.emit(d,{type:y.type,map:s,component:i,event:y})}function qB(i,s){const u=ys.LngLat.convert(i),d=ys.LngLat.convert(s);return u.lng===d.lng&&u.lat===d.lat}var QA=(i=>(i.TOP_LEFT="top-left",i.TOP_RIGHT="top-right",i.BOTTOM_LEFT="bottom-left",i.BOTTOM_RIGHT="bottom-right",i))(QA||{});const gc=Object.values(QA),o0=new Map,HB=Symbol("default");function jB(i,s,u=HB){var d;let y=o0.get(u);return y||(y=Gn({isLoaded:!1,isMounted:!1,language:null}),o0.set(u,y)),y.isLoaded=((d=s.value)==null?void 0:d.loaded())||!1,y.isMounted=!1,y.component=i,y.map=s.value,y}const dI=or({name:"MglMap",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},antialias:{type:Boolean,default:()=>Fi.antialias},attributionControl:{type:[Boolean,Object],default:()=>Fi.attributionControl},bearing:{type:Number,default:()=>Fi.bearing},bearingSnap:{type:Number,default:()=>Fi.bearingSnap},bounds:{type:[Array,Object],default:()=>Fi.bounds},boxZoom:{type:Boolean,default:()=>Fi.boxZoom},center:{type:[Array,Object],default:()=>Fi.center},clickTolerance:{type:Number,default:()=>Fi.clickTolerance},collectResourceTiming:{type:Boolean,default:()=>Fi.collectResourceTiming},crossSourceCollisions:{type:Boolean,default:()=>Fi.crossSourceCollisions},dragPan:{type:Boolean,default:()=>Fi.dragPan},dragRotate:{type:Boolean,default:()=>Fi.dragRotate},doubleClickZoom:{type:Boolean,default:()=>Fi.doubleClickZoom},hash:{type:[Boolean,String],default:()=>Fi.hash},fadeDuration:{type:Number,default:()=>Fi.fadeDuration},failIfMajorPerformanceCaveat:{type:Boolean,default:()=>Fi.failIfMajorPerformanceCaveat},fitBoundsOptions:{type:Object,default:()=>Fi.fitBoundsOptions},interactive:{type:Boolean,default:()=>Fi.interactive},keyboard:{type:Boolean,default:()=>Fi.keyboard},locale:{type:Object,default:()=>Fi.locale},localIdeographFontFamily:{type:String,default:()=>Fi.localIdeographFontFamily},logoPosition:{type:[String],validator:i=>i in QA,default:()=>Fi.logoPosition},maxBounds:{type:[Array,Object],default:()=>Fi.maxBounds},maxPitch:{type:Number,default:()=>Fi.maxPitch},maxZoom:{type:Number,default:()=>Fi.maxZoom},minPitch:{type:Number,default:()=>Fi.minPitch},minZoom:{type:Number,default:()=>Fi.minZoom},preserveDrawingBuffer:{type:Boolean,default:()=>Fi.preserveDrawingBuffer},pitch:{type:Number,default:()=>Fi.pitch},pitchWithRotate:{type:Boolean,default:()=>Fi.pitchWithRotate},refreshExpiredTiles:{type:Boolean,default:()=>Fi.refreshExpiredTiles},renderWorldCopies:{type:Boolean,default:()=>Fi.renderWorldCopies},scrollZoom:{type:Boolean,default:()=>Fi.scrollZoom},mapStyle:{type:[String,Object],default:()=>Fi.style},trackResize:{type:Boolean,default:()=>Fi.trackResize},transformRequest:{type:Function,default:Fi.transformRequest},transformCameraUpdate:{type:Function,default:Fi.transformCameraUpdate},touchZoomRotate:{type:Boolean,default:()=>Fi.touchZoomRotate},touchPitch:{type:Boolean,default:()=>Fi.touchPitch},zoom:{type:Number,default:()=>Fi.zoom},maxTileCacheSize:{type:Number,default:()=>Fi.maxTileCacheSize},mapKey:{type:[String,Symbol]},pixelRatio:{type:Number,default:()=>Fi.pixelRatio},validateStyle:{type:Boolean,default:()=>Fi.validateStyle},cooperativeGestures:{type:Object,default:()=>Fi.cooperativeGestures}},emits:["map:error","map:load","map:idle","map:remove","map:render","map:resize","map:webglcontextlost","map:webglcontextrestored","map:dataloading","map:data","map:tiledataloading","map:sourcedataloading","map:styledataloading","map:sourcedata","map:styledata","map:styleimagemissing","map:dataabort","map:sourcedataabort","map:boxzoomcancel","map:boxzoomstart","map:boxzoomend","map:touchcancel","map:touchmove","map:touchend","map:touchstart","map:click","map:contextmenu","map:dblclick","map:mousemove","map:mouseup","map:mousedown","map:mouseout","map:mouseover","map:movestart","map:move","map:moveend","map:zoomstart","map:zoom","map:zoomend","map:rotatestart","map:rotate","map:rotateend","map:dragstart","map:drag","map:dragend","map:pitchstart","map:pitch","map:pitchend","map:wheel","map:terrain","map:cooperativegestureprevented","update:center","update:zoom","update:pitch","update:bearing"],slots:Object,setup(i,s){const u=eg(xA()),d=sr(),y=sr(),C=Br(!1),I=Br(!1),l=new Map,q=jB(u,y,i.mapKey);br(dc,y),br(EA,I),br(hI,C),br(yl,u.uid),br(_l,""),ri(()=>i.bearing,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setBearing(V))}),ri(()=>i.bounds,V=>{var Ae;V&&((Ae=y.value)==null||Ae.fitBounds(V,i.fitBoundsOptions))}),ri(()=>i.center,V=>{var Ae,Ve;const Be=(Ae=y.value)==null?void 0:Ae.getCenter();V&&Be&&!qB(V,Be)&&((Ve=y.value)==null||Ve.setCenter(V))}),ri(()=>i.maxBounds,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setMaxBounds(V))}),ri(()=>i.maxPitch,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setMaxPitch(V))}),ri(()=>i.maxZoom,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setMaxZoom(V))}),ri(()=>i.minPitch,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setMinPitch(V))}),ri(()=>i.minZoom,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setMinZoom(V))}),ri(()=>i.pitch,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setPitch(V))}),ri(()=>i.renderWorldCopies,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setRenderWorldCopies(V))}),ri(()=>i.mapStyle,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setStyle(V))}),ri(()=>i.transformRequest,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setTransformRequest(V))}),ri(()=>i.zoom,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setZoom(V))}),ri(()=>i.zoom,V=>{var Ae;V&&((Ae=y.value)==null||Ae.setZoom(V))});function Y(){q.isMounted=!0;const V={...i,style:i.mapStyle,container:d.value};for(const Ae of Object.keys(V))V[Ae]===void 0&&delete V[Ae];if(y.value=eg(new ys.Map(V)),q.map=y.value,C.value=!0,l.set("__load",()=>(I.value=!0,q.isLoaded=!0)),y.value.on("load",l.get("__load")),l.set("__moveend",()=>s.emit("update:center",y.value.getCenter())),y.value.on("moveend",l.get("__moveend")),l.set("__zoomend",()=>s.emit("update:zoom",y.value.getZoom())),y.value.on("zoomend",l.get("__zoomend")),l.set("__pitchend",()=>s.emit("update:pitch",y.value.getPitch())),y.value.on("pitchend",l.get("__pitchend")),l.set("__rotateend",()=>s.emit("update:bearing",y.value.getBearing())),y.value.on("rotateend",l.get("__rotateend")),u.vnode.props){for(const Ae of OB)if(u.vnode.props["onMap:"+Ae]){const Ve=`map:${Ae}`,Be=VB(u,y.value,s,Ve);l.set(Ae,Be),y.value.on(Ae,Be)}}y.value.getCanvas().addEventListener("webglcontextlost",H)}async function O(){q.isMounted=!1,q.isLoaded=!1,I.value=!1,y.value&&(y.value.getCanvas().removeEventListener("webglcontextlost",H),C.value=!1,l.forEach((V,Ae)=>{y.value.off(Ae.startsWith("__")?Ae.substring(2):Ae,V)}),y.value.remove())}function H(){O(),fl(Y)}return _s(Y),pn(O),s.expose({map:y}),()=>[Wa("div",{ref:d,style:{height:i.height,width:i.width}}),C.value&&s.slots.default?s.slots.default({}):void 0]},render(){return null}});function JB(i,s,u){ri(i,d=>{var y,C;d&&gc.indexOf(d)===-1||((y=s.value)!=null&&y.hasControl(u)&&s.value.removeControl(u),(C=s.value)==null||C.addControl(u,d))},{immediate:!0})}function fu(i,s){const u=Vi(dc),d=Vi(hI),y=sr();return y.value=i(),JB(()=>s.position,u,y.value),pn(()=>{var C;return d.value&&((C=u.value)==null?void 0:C.removeControl(y.value))}),{control:y,map:u}}const YB=or({name:"MglAttributionControl",props:{position:{type:String,validator:i=>gc.indexOf(i)!==-1},compact:Boolean,customAttribution:[String,Array]},setup(i){fu(()=>new ys.AttributionControl({compact:i.compact,customAttribution:i.customAttribution}),i)},render(){return null}});class KB{constructor(s,u){$g(this,"container"),this.isAdded=s,this.container=document.createElement("div"),this.setClasses(u)}getDefaultPosition(){return QA.TOP_LEFT}onAdd(){return fl(()=>this.isAdded.value=!0),this.container}onRemove(){this.isAdded.value=!1,this.container.remove()}setClasses(s){this.container.className=s}}const $B=or({name:"MglCustomControl",props:{position:{type:String,validator:i=>gc.indexOf(i)!==-1},class:{type:String,default:"maplibregl-ctrl maplibregl-ctrl-group"}},slots:Object,setup(i,{slots:s}){const u=Br(!1),{control:d}=fu(()=>new KB(u,i.class),i);return ri(()=>i.class,()=>d.value.setClasses(i.class)),()=>{var y;return u.value?Wa(ax,{to:d.value.container},(y=s.default)==null?void 0:y.call(s,{})):Bo("custom-component")}},render(){return null}}),ZB=or({name:"MglFullscreenControl",props:{position:{type:String,validator:i=>gc.indexOf(i)!==-1},container:{type:Object,default:null}},setup(i){const{control:s,map:u}=fu(()=>new ys.FullscreenControl({container:i.container||void 0}),i);function d(){fl(()=>{var y;return(y=u.value)==null?void 0:y.resize()})}s.value.on("fullscreenstart",d),s.value.on("fullscreenend",d),pn(()=>{s.value.off("fullscreenstart",d),s.value.off("fullscreenend",d)})},render(){return null}}),WB=or({name:"MglGeolocateControl",props:{position:{type:String,default:QA.TOP_RIGHT,validator:i=>gc.indexOf(i)!==-1},positionOptions:{type:Object,default:()=>({enableHighAccuracy:!1,timeout:6e3})},fitBoundsOptions:{type:Object,default:()=>({maxZoom:15})},trackUserLocation:{type:Boolean,default:!1},showAccuracyCircle:{type:Boolean,default:!0},showUserLocation:{type:Boolean,default:!0}},emits:["trackuserlocationstart","trackuserlocationend","userlocationlostfocus","userlocationfocus","geolocate","error","outofmaxbounds"],setup(i,s){const{control:u}=fu(()=>new ys.GeolocateControl({positionOptions:i.positionOptions,fitBoundsOptions:i.fitBoundsOptions,trackUserLocation:i.trackUserLocation,showAccuracyCircle:i.showAccuracyCircle,showUserLocation:i.showUserLocation}),i);function d(y){const C=I=>{s.emit(y,I)};u.value.on(y,C),pn(()=>{u.value.off(y,C)})}d("trackuserlocationstart"),d("trackuserlocationend"),d("userlocationlostfocus"),d("userlocationfocus"),d("geolocate"),d("error"),d("outofmaxbounds")},render(){return null}}),fI=or({name:"MglNavigationControl",props:{position:{type:String,validator:i=>gc.indexOf(i)!==-1},showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:Boolean},setup(i){fu(()=>new ys.NavigationControl({showCompass:i.showCompass,showZoom:i.showZoom,visualizePitch:i.visualizePitch}),i)},render(){return null}});var gI=(i=>(i.IMPERIAL="imperial",i.METRIC="metric",i.NAUTICAL="nautical",i))(gI||{});const XB=Object.values(gI),eE=or({name:"MglScaleControl",props:{position:{type:String,validator:i=>gc.indexOf(i)!==-1},maxWidth:{type:Number,default:100},unit:{type:String,default:"metric",validator:i=>XB.indexOf(i)!==-1}},setup(i){fu(()=>new ys.ScaleControl({maxWidth:i.maxWidth,unit:i.unit}),i)},render(){return null}}),tE=or({name:"MglLogoControl",props:{position:{type:String,validator:i=>gc.indexOf(i)!==-1},compact:{type:Boolean}},setup(i){fu(()=>new ys.LogoControl({compact:i.compact}),i)},render(){return null}}),iE=or({name:"MglMarker",emits:["dragstart","drag","dragend","update:coordinates"],props:{coordinates:{type:[Object,Array],required:!0},offset:[Object,Array],anchor:String,color:String,draggable:Boolean,clickTolerance:Number,rotation:Number,rotationAlignment:String,pitchAlignment:String,scale:Number,opacity:String,opacityWhenCovered:String,subpixelPositioning:{type:Boolean,default:!1}},setup(i,{slots:s,emit:u}){const d=Vi(dc),y=sr(),C=Br(),I=Br(!1),l=new Map;function q(Y,O){const H=()=>{O&&O(),u(Y)};y.value.on(Y,H),l.set(Y,H)}return br(AI,y),_s(()=>{const Y={...i};s.marker&&(Y.element=C.value),y.value=new ys.Marker(Y),y.value.setLngLat(i.coordinates).addTo(d.value),q("dragstart"),q("drag",()=>{var O;u("update:coordinates",(O=y.value)==null?void 0:O.getLngLat())}),q("dragend",()=>{var O;u("update:coordinates",(O=y.value)==null?void 0:O.getLngLat())}),I.value=!0}),ri(()=>i.coordinates,Y=>{var O;return(O=y.value)==null?void 0:O.setLngLat(Y)},{deep:!0}),ri(()=>i.draggable,Y=>{var O;return(O=y.value)==null?void 0:O.setDraggable(Y)}),ri(()=>i.offset,Y=>{var O;return(O=y.value)==null?void 0:O.setOffset(Y||[0,0])}),ri(()=>i.pitchAlignment,Y=>{var O;return(O=y.value)==null?void 0:O.setPitchAlignment(Y||"auto")}),ri(()=>i.rotation,Y=>{var O;return(O=y.value)==null?void 0:O.setRotation(Y)}),ri(()=>i.rotationAlignment,Y=>{var O;return(O=y.value)==null?void 0:O.setRotationAlignment(Y||"auto")}),ri(()=>i.opacity,Y=>{var O;return(O=y.value)==null?void 0:O.setOpacity(Y,i.opacityWhenCovered)}),ri(()=>i.opacityWhenCovered,Y=>{var O;return(O=y.value)==null?void 0:O.setOpacity(i.opacity,Y)}),ri(()=>i.subpixelPositioning,Y=>{var O;return(O=y.value)==null?void 0:O.setSubpixelPositioning(Y)}),pn(()=>{var Y;l.forEach((O,H)=>{var V;(V=y.value)==null||V.off(H,O)}),(Y=y.value)==null||Y.remove()}),()=>[Wa("div",s.default&&I.value?s.default({}):void 0),Wa("div",{ref:C},s.marker?s.marker():void 0)]},render(){return null}}),rE=or({name:"MglPopup",emits:["open","close"],props:{coordinates:{type:[Object,Array],required:!1},closeButton:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},closeOnMove:{type:Boolean,required:!1,default:!1},focusAfterOpen:{type:Boolean,required:!1,default:!0},anchor:{type:String,required:!1},offset:{type:[Number,Object,Array],required:!1},className:{type:String,required:!1},maxWidth:{type:String,default:"240px"},subpixelPositioning:{type:Boolean,default:!1},text:{type:String,required:!1}},setup(i,{slots:s,emit:u,expose:d}){const y=Vi(dc),C=Vi(AI,void 0),I=Br(),l=new ys.Popup(i);C&&C.value?C.value.setPopup(l):i.coordinates&&y&&l.setLngLat(i.coordinates).addTo(y.value),i.text&&l.setText(i.text);function q(Y){const O=()=>u(Y);l.on(Y,O),pn(()=>{l.off(Y,O)})}return q("open"),q("close"),d({remove(){l.remove()}}),ri(()=>i.coordinates,Y=>{Y&&l.setLngLat(Y)},{deep:!0}),ri(()=>i.text,Y=>l.setText(Y||"")),ri(()=>i.offset,Y=>l.setOffset(Y)),ri(()=>i.maxWidth,Y=>l.setMaxWidth(Y)),ri(()=>i.className,(Y,O)=>{O&&l.removeClassName(O),Y&&l.addClassName(Y)}),ri(()=>i.subpixelPositioning,Y=>l.setSubpixelPositioning(Y)),_s(()=>{I.value&&!i.text&&l.setDOMContent(I.value)}),pn(()=>{l.remove()}),()=>[Wa("div",{ref:I},s.default?s.default():void 0)]},render(){return null}});let gu=class{constructor(){$g(this,"unmountHandlers",new Map)}registerUnmountHandler(s,u){this.unmountHandlers.set(s,u)}unregisterUnmountHandler(s){this.unmountHandlers.delete(s)}unmount(){this.unmountHandlers.forEach(s=>s())}};const pI=class fg{static genSourceOpts(s){const u={...s};for(const d of Object.keys(u))(u[d]===void 0||d==="sourceId")&&delete u[d];return u}static getSourceRef(s,u){const d=typeof u=="string",y=String(s)+(d?u:"");let C=fg.REFS.get(y);return C||(C=Br(d?null:void 0),fg.REFS.set(y,C)),C}};$g(pI,"REFS",new Map);let Il=pI;function pu(i,s,u){const d=Vi(dc),y=Vi(EA);function C(){y.value&&(d.value.addSource(s.sourceId,Il.genSourceOpts(s)),i.value=d.value.getSource(s.sourceId))}return ri(y,C,{immediate:!0}),d.value.on("style.load",C),pn(()=>{y.value&&(u.unmount(),d.value.removeSource(s.sourceId)),d.value.off("style.load",C)})}const nE=or({name:"MglCanvasSource",props:{sourceId:{type:String,required:!0},coordinates:Array,animate:Boolean,canvas:[Object,String]},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"canvas"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),ri(yr(i.coordinates)?i.coordinates:()=>i.coordinates,I=>{var l;(l=d.value)==null||l.setCoordinates(I)},{immediate:!0}),()=>[Bo("Canvas Source"),d.value&&s.default?s.default({}):void 0]}}),aE=or({name:"MglGeoJsonSource",props:{sourceId:{type:String,required:!0},data:{type:[Object,String],required:!0},maxzoom:Number,attribution:String,buffer:Number,tolerance:Number,cluster:Boolean,clusterRadius:Number,clusterMaxZoom:Number,clusterMinPoints:Number,clusterProperties:Object,lineMetrics:Boolean,generateId:Boolean,promoteId:[Object,String],filter:[Array,String,Object]},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"geojson"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),ri(yr(i.data)?i.data:()=>i.data,I=>{var l;(l=d.value)==null||l.setData(I||{type:"FeatureCollection",features:[]})},{immediate:!0}),()=>[Bo("GeoJSON Source"),d.value&&s.default?s.default({}):void 0]}}),sE=or({name:"MglImageSource",props:{sourceId:{type:String,required:!0},url:String,coordinates:Array},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"image"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),ri(yr(i.coordinates)?i.coordinates:()=>i.coordinates,I=>{var l;(l=d.value)==null||l.setCoordinates(I)},{immediate:!0}),()=>[Bo("Image Source"),d.value&&s.default?s.default({}):void 0]}}),oE=or({name:"MglRasterSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,minzoom:Number,maxzoom:Number,tileSize:Number,scheme:String,attribution:String,volatile:Boolean},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"raster"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),()=>[Bo("Raster Source"),d.value&&s.default?s.default({}):void 0]}}),lE=or({name:"MglRasterDemSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,minzoom:Number,maxzoom:Number,tileSize:Number,attribution:String,encoding:String,volatile:Boolean,redFactor:Number,blueFactor:Number,greenFactor:Number,baseShift:Number},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"raster-dem"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),()=>[Bo("RasterDem Source"),d.value&&s.default?s.default({}):void 0]}}),cE=or({name:"MglVectorSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:{type:Array,validator:function(i){return i.length===4}},scheme:String,minzoom:Number,maxzoom:Number,attribution:String,promoteId:[Object,String],volatile:Boolean},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"vector"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),ri(yr(i.tiles)?i.tiles:()=>i.tiles,I=>{var l;(l=d.value)==null||l.setTiles(I||[])},{immediate:!0}),ri(yr(i.url)?i.url:()=>i.url,I=>{var l;(l=d.value)==null||l.setUrl(I||"")},{immediate:!0}),()=>[Bo("Vector Source"),d.value&&s.default?s.default({}):void 0]}}),uE=or({name:"MglVideoSource",props:{sourceId:{type:String,required:!0},urls:Array,coordinates:Array},slots:Object,setup(i,{slots:s}){const u=Vi(yl),d=Il.getSourceRef(u,i.sourceId),y=new gu,C={...i,type:"video"};return br(_l,i.sourceId),br(fc,y),pu(d,C,y),ri(yr(i.coordinates)?i.coordinates:()=>i.coordinates,I=>{var l;(l=d.value)==null||l.setCoordinates(I)},{immediate:!0}),()=>[Bo("Video Source"),d.value&&s.default?s.default({}):void 0]}}),Js=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"];function pc(){return{layerId:{type:String,required:!0},source:String,metadata:[Object,Array,String,Number],sourceLayer:String,minzoom:Number,maxzoom:Number,filter:Object,before:String,layout:Object,paint:Object}}function hE(i,s,u,d){const y={id:i,type:s,source:u.source||d,metadata:u.metadata,minzoom:u.minzoom,maxzoom:u.maxzoom,"source-layer":u.sourceLayer,filter:u.filter,paint:u.paint,layout:u.layout};for(const C of Object.keys(y))y[C]===void 0&&delete y[C];return y}function AE(i,s,u){if(u.props)for(const d of Js){const y="on"+d.charAt(0).toUpperCase()+d.substr(1);u.props[y]&&i.on(d,s,u.props[y])}}function dE(i,s,u){if(u.props)for(const d of Js){const y="on"+d.charAt(0).toUpperCase()+d.substr(1);u.props[y]&&i.off(d,s,u.props[y])}}function mI(i,s){const u=Vi(dc),d=Vi(EA),y=Vi(fc);function C(){d.value&&(s&&dE(u.value,i,s.vnode),u.value.getLayer(i)&&u.value.removeLayer(i))}y.registerUnmountHandler(i,C),pn(()=>{y.unregisterUnmountHandler(i),C()})}const fE=or({name:"MglBackgroundLayer",props:{layerId:{type:String,required:!0},metadata:[Object,Array,String,Number],minzoom:Number,maxzoom:Number,before:String,layout:Object,paint:Object},emits:[...Js],setup(i){const s=Vi(dc),u=Vi(EA);return mI(i.layerId),ri(()=>i.layout,d=>{if(d)for(const[y,C]of Object.entries(d))s.value.setLayoutProperty(i.layerId,y,C)}),ri(()=>i.paint,d=>{if(d)for(const[y,C]of Object.entries(d))s.value.setPaintProperty(i.layerId,y,C)}),ri(u,d=>{d&&s.value.addLayer({id:i.layerId,type:"background",metadata:i.metadata,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:i.layout,paint:i.paint},i.before||void 0)},{immediate:!0}),()=>Bo("Background Layer")}});function mc(i,s){const u=Vi(_l);if(!u&&!s.source)return;const d=xA(),y=Vi(dc),C=Vi(EA),I=Vi(yl),l=Il.getSourceRef(I,s.source||u);return mI(s.layerId,d),ri(()=>s.minzoom,()=>y.value.setLayerZoomRange(s.layerId,s.minzoom||0,s.maxzoom||24)),ri(()=>s.maxzoom,()=>y.value.setLayerZoomRange(s.layerId,s.minzoom||0,s.maxzoom||24)),ri(()=>s.layout,q=>{if(q)for(const[Y,O]of Object.entries(q))y.value.setLayoutProperty(s.layerId,Y,O)}),ri(()=>s.paint,q=>{if(q)for(const[Y,O]of Object.entries(q))y.value.setPaintProperty(s.layerId,Y,O)}),ri(()=>s.filter,q=>y.value.setFilter(s.layerId,q)),ri([C,l],([q,Y])=>{q&&(Y||Y===void 0)&&(y.value.addLayer(hE(s.layerId,i,s,u),s.before||void 0),AE(y.value,s.layerId,d.vnode))},{immediate:!0}),()=>Bo(`${i} Layer`)}const gE=or({name:"MglCircleLayer",props:{...pc()},emits:[...Js],setup(i){return mc("circle",i)}}),pE=or({name:"MglFillLayer",props:{...pc()},emits:[...Js],setup(i){return mc("fill",i)}}),mE=or({name:"MglFillExtrusionLayer",props:{...pc()},emits:[...Js],setup(i){return mc("fill-extrusion",i)}}),yE=or({name:"MglHeatmapLayer",props:{...pc()},emits:[...Js],setup(i){return mc("heatmap",i)}}),_E=or({name:"MglHillshadeLayer",props:{...pc()},emits:[...Js],setup(i){return mc("hillshade",i)}}),IE=or({name:"MglLineLayer",props:{...pc()},emits:[...Js],setup(i){return mc("line",i)}}),vE=or({name:"MglRasterLayer",props:{...pc()},emits:[...Js],setup(i){return mc("raster",i)}}),bE=or({name:"MglSymbolLayer",props:{...pc()},emits:[...Js],setup(i){return mc("symbol",i)}}),xE=Object.freeze(Object.defineProperty({__proto__:null,MglAttributionControl:YB,MglBackgroundLayer:fE,MglCanvasSource:nE,MglCircleLayer:gE,MglCustomControl:$B,MglFillExtrusionLayer:mE,MglFillLayer:pE,MglFullscreenControl:ZB,MglGeoJsonSource:aE,MglGeolocateControl:WB,MglHeatmapLayer:yE,MglHillshadeLayer:_E,MglImageSource:sE,MglLineLayer:IE,MglLogoControl:tE,MglMap:dI,MglMarker:iE,MglNavigationControl:fI,MglPopup:rE,MglRasterDemSource:lE,MglRasterLayer:vE,MglRasterSource:oE,MglScaleControl:eE,MglSymbolLayer:bE,MglVectorSource:cE,MglVideoSource:uE},Symbol.toStringTag,{value:"Module"})),wE=function(i){Object.entries(xE).forEach(([s,u])=>{i.component(s,u)})};var Ya=Uint8Array,ih=Uint16Array,CE=Int32Array,yI=new Ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_I=new Ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),BE=new Ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),II=function(i,s){for(var u=new ih(31),d=0;d<31;++d)u[d]=s+=1<<i[d-1];for(var y=new CE(u[30]),d=1;d<30;++d)for(var C=u[d];C<u[d+1];++C)y[C]=C-u[d]<<5|d;return{b:u,r:y}},vI=II(yI,2),bI=vI.b,EE=vI.r;bI[28]=258,EE[258]=28;var QE=II(_I,0),SE=QE.b,gg=new ih(32768);for(var Ur=0;Ur<32768;++Ur){var tc=(Ur&43690)>>1|(Ur&21845)<<1;tc=(tc&52428)>>2|(tc&13107)<<2,tc=(tc&61680)>>4|(tc&3855)<<4,gg[Ur]=((tc&65280)>>8|(tc&255)<<8)>>1}var sA=function(i,s,u){for(var d=i.length,y=0,C=new ih(s);y<d;++y)i[y]&&++C[i[y]-1];var I=new ih(s);for(y=1;y<s;++y)I[y]=I[y-1]+C[y-1]<<1;var l;if(u){l=new ih(1<<s);var q=15-s;for(y=0;y<d;++y)if(i[y])for(var Y=y<<4|i[y],O=s-i[y],H=I[i[y]-1]++<<O,V=H|(1<<O)-1;H<=V;++H)l[gg[H]>>q]=Y}else for(l=new ih(d),y=0;y<d;++y)i[y]&&(l[y]=gg[I[i[y]-1]++]>>15-i[y]);return l},SA=new Ya(288);for(var Ur=0;Ur<144;++Ur)SA[Ur]=8;for(var Ur=144;Ur<256;++Ur)SA[Ur]=9;for(var Ur=256;Ur<280;++Ur)SA[Ur]=7;for(var Ur=280;Ur<288;++Ur)SA[Ur]=8;var xI=new Ya(32);for(var Ur=0;Ur<32;++Ur)xI[Ur]=5;var DE=sA(SA,9,1),kE=sA(xI,5,1),Kf=function(i){for(var s=i[0],u=1;u<i.length;++u)i[u]>s&&(s=i[u]);return s},Us=function(i,s,u){var d=s/8|0;return(i[d]|i[d+1]<<8)>>(s&7)&u},$f=function(i,s){var u=s/8|0;return(i[u]|i[u+1]<<8|i[u+2]<<16)>>(s&7)},ME=function(i){return(i+7)/8|0},TE=function(i,s,u){return(u==null||u>i.length)&&(u=i.length),new Ya(i.subarray(s,u))},PE=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ja=function(i,s,u){var d=new Error(s||PE[i]);if(d.code=i,Error.captureStackTrace&&Error.captureStackTrace(d,Ja),!u)throw d;return d},Zg=function(i,s,u,d){var y=i.length,C=0;if(!y||s.f&&!s.l)return u||new Ya(0);var I=!u,l=I||s.i!=2,q=s.i;I&&(u=new Ya(y*3));var Y=function(pa){var Se=u.length;if(pa>Se){var Ge=new Ya(Math.max(Se*2,pa));Ge.set(u),u=Ge}},O=s.f||0,H=s.p||0,V=s.b||0,Ae=s.l,Ve=s.d,Be=s.m,ot=s.n,pt=y*8;do{if(!Ae){O=Us(i,H,1);var _t=Us(i,H+1,3);if(H+=3,_t)if(_t==1)Ae=DE,Ve=kE,Be=9,ot=5;else if(_t==2){var Ut=Us(i,H,31)+257,zt=Us(i,H+10,15)+4,Zt=Ut+Us(i,H+5,31)+1;H+=14;for(var Bt=new Ya(Zt),Gt=new Ya(19),mt=0;mt<zt;++mt)Gt[BE[mt]]=Us(i,H+mt*3,7);H+=zt*3;for(var st=Kf(Gt),Et=(1<<st)-1,ni=sA(Gt,st,1),mt=0;mt<Zt;){var Li=ni[Us(i,H,Et)];H+=Li&15;var ut=Li>>4;if(ut<16)Bt[mt++]=ut;else{var wi=0,bi=0;for(ut==16?(bi=3+Us(i,H,3),H+=2,wi=Bt[mt-1]):ut==17?(bi=3+Us(i,H,7),H+=3):ut==18&&(bi=11+Us(i,H,127),H+=7);bi--;)Bt[mt++]=wi}}var Pi=Bt.subarray(0,Ut),nr=Bt.subarray(Ut);Be=Kf(Pi),ot=Kf(nr),Ae=sA(Pi,Be,1),Ve=sA(nr,ot,1)}else Ja(1);else{var ut=ME(H)+4,ft=i[ut-4]|i[ut-3]<<8,Ft=ut+ft;if(Ft>y){q&&Ja(0);break}l&&Y(V+ft),u.set(i.subarray(ut,Ft),V),s.b=V+=ft,s.p=H=Ft*8,s.f=O;continue}if(H>pt){q&&Ja(0);break}}l&&Y(V+131072);for(var Kr=(1<<Be)-1,Ar=(1<<ot)-1,Yi=H;;Yi=H){var wi=Ae[$f(i,H)&Kr],kr=wi>>4;if(H+=wi&15,H>pt){q&&Ja(0);break}if(wi||Ja(2),kr<256)u[V++]=kr;else if(kr==256){Yi=H,Ae=null;break}else{var sn=kr-254;if(kr>264){var mt=kr-257,Er=yI[mt];sn=Us(i,H,(1<<Er)-1)+bI[mt],H+=Er}var $r=Ve[$f(i,H)&Ar],dr=$r>>4;$r||Ja(3),H+=$r&15;var nr=SE[dr];if(dr>3){var Er=_I[dr];nr+=$f(i,H)&(1<<Er)-1,H+=Er}if(H>pt){q&&Ja(0);break}l&&Y(V+131072);var ar=V+sn;if(V<nr){var rn=C-nr,hn=Math.min(nr,ar);for(rn+V<0&&Ja(3);V<hn;++V)u[V]=d[rn+V]}for(;V<ar;++V)u[V]=u[V-nr]}}s.l=Ae,s.p=Yi,s.b=V,s.f=O,Ae&&(O=1,s.m=Be,s.d=Ve,s.n=ot)}while(!O);return V!=u.length&&I?TE(u,0,V):u.subarray(0,V)},RE=new Ya(0),LE=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&Ja(6,"invalid gzip data");var s=i[3],u=10;s&4&&(u+=(i[10]|i[11]<<8)+2);for(var d=(s>>3&1)+(s>>4&1);d>0;d-=!i[u++]);return u+(s&2)},FE=function(i){var s=i.length;return(i[s-4]|i[s-3]<<8|i[s-2]<<16|i[s-1]<<24)>>>0},zE=function(i,s){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&Ja(6,"invalid zlib data"),(i[1]>>5&1)==+!s&&Ja(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function GE(i,s){return Zg(i,{i:2},s,s)}function NE(i,s){var u=LE(i);return u+8>i.length&&Ja(6,"invalid gzip data"),Zg(i.subarray(u,-8),{i:2},new Ya(FE(i)),s)}function UE(i,s){return Zg(i.subarray(zE(i,s),-4),{i:2},s,s)}function OE(i,s){return i[0]==31&&i[1]==139&&i[2]==8?NE(i,s):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?GE(i,s):UE(i,s)}var VE=typeof TextDecoder<"u"&&new TextDecoder,qE=0;try{VE.decode(RE,{stream:!0}),qE=1}catch{}var HE=Object.defineProperty,oA=Math.pow,Cr=(i,s)=>HE(i,"name",{value:s,configurable:!0}),Sn=(i,s,u)=>new Promise((d,y)=>{var C=q=>{try{l(u.next(q))}catch(Y){y(Y)}},I=q=>{try{l(u.throw(q))}catch(Y){y(Y)}},l=q=>q.done?d(q.value):Promise.resolve(q.value).then(C,I);l((u=u.apply(i,s)).next())});Cr((i,s)=>{let u=!1,d="",y=L.GridLayer.extend({createTile:Cr((C,I)=>{let l=document.createElement("img"),q=new AbortController,Y=q.signal;return l.cancel=()=>{q.abort()},u||(i.getHeader().then(O=>{O.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):O.tileType===2?d="image/png":O.tileType===3?d="image/jpeg":O.tileType===4?d="image/webp":O.tileType===5&&(d="image/avif")}),u=!0),i.getZxy(C.z,C.x,C.y,Y).then(O=>{if(O){let H=new Blob([O.data],{type:d}),V=window.URL.createObjectURL(H);l.src=V,l.cancel=void 0,I(void 0,l)}}).catch(O=>{if(O.name!=="AbortError")throw O}),l},"createTile"),_removeTile:Cr(function(C){let I=this._tiles[C];I&&(I.el.cancel&&I.el.cancel(),I.el.width=0,I.el.height=0,I.el.deleted=!0,L.DomUtil.remove(I.el),delete this._tiles[C],this.fire("tileunload",{tile:I.el,coords:this._keyToTileCoords(C)}))},"_removeTile")});return new y(s)},"leafletRasterLayer");var jE=Cr(i=>(s,u)=>{if(u instanceof AbortController)return i(s,u);let d=new AbortController;return i(s,d).then(y=>u(void 0,y.data,y.cacheControl||"",y.expires||""),y=>u(y)).catch(y=>u(y)),{cancel:Cr(()=>d.abort(),"cancel")}},"v3compat"),wI=class{constructor(s){this.tilev4=Cr((u,d)=>Sn(this,null,function*(){if(u.type==="json"){let Ae=u.url.substr(10),Ve=this.tiles.get(Ae);if(Ve||(Ve=new mg(Ae),this.tiles.set(Ae,Ve)),this.metadata)return{data:yield Ve.getTileJson(u.url)};let Be=yield Ve.getHeader();return{data:{tiles:[`${u.url}/{z}/{x}/{y}`],minzoom:Be.minZoom,maxzoom:Be.maxZoom,bounds:[Be.minLon,Be.minLat,Be.maxLon,Be.maxLat]}}}let y=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),C=u.url.match(y);if(!C)throw new Error("Invalid PMTiles protocol URL");let I=C[1],l=this.tiles.get(I);l||(l=new mg(I),this.tiles.set(I,l));let q=C[2],Y=C[3],O=C[4],H=yield l.getHeader(),V=yield l==null?void 0:l.getZxy(+q,+Y,+O,d.signal);if(V)return{data:new Uint8Array(V.data),cacheControl:V.cacheControl,expires:V.expires};if(H.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=jE(this.tilev4),this.tiles=new Map,this.metadata=(s==null?void 0:s.metadata)||!1,this.errorOnMissingTile=(s==null?void 0:s.errorOnMissingTile)||!1}add(s){this.tiles.set(s.source.getKey(),s)}get(s){return this.tiles.get(s)}};Cr(wI,"Protocol");var JE=wI;function CI(i,s){return(s>>>0)*4294967296+(i>>>0)}Cr(CI,"toNum");function BI(i,s){let u=s.buf,d=u[s.pos++],y=(d&112)>>4;if(d<128||(d=u[s.pos++],y|=(d&127)<<3,d<128)||(d=u[s.pos++],y|=(d&127)<<10,d<128)||(d=u[s.pos++],y|=(d&127)<<17,d<128)||(d=u[s.pos++],y|=(d&127)<<24,d<128)||(d=u[s.pos++],y|=(d&1)<<31,d<128))return CI(i,y);throw new Error("Expected varint not more than 10 bytes")}Cr(BI,"readVarintRemainder");function eh(i){let s=i.buf,u=s[i.pos++],d=u&127;return u<128||(u=s[i.pos++],d|=(u&127)<<7,u<128)||(u=s[i.pos++],d|=(u&127)<<14,u<128)||(u=s[i.pos++],d|=(u&127)<<21,u<128)?d:(u=s[i.pos],d|=(u&15)<<28,BI(d,i))}Cr(eh,"readVarint");function Wg(i,s,u,d){if(d===0){u===1&&(s[0]=i-1-s[0],s[1]=i-1-s[1]);let y=s[0];s[0]=s[1],s[1]=y}}Cr(Wg,"rotate");function EI(i,s){let u=oA(2,i),d=s,y=s,C=s,I=[0,0],l=1;for(;l<u;)d=1&C/2,y=1&(C^d),Wg(l,I,d,y),I[0]+=l*d,I[1]+=l*y,C=C/4,l*=2;return[i,I[0],I[1]]}Cr(EI,"idOnLevel");var YE=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function QI(i,s,u){if(i>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(s>oA(2,i)-1||u>oA(2,i)-1)throw new Error("tile x/y outside zoom level bounds");let d=YE[i],y=oA(2,i),C=0,I=0,l=0,q=[s,u],Y=y/2;for(;Y>0;)C=(q[0]&Y)>0?1:0,I=(q[1]&Y)>0?1:0,l+=Y*Y*(3*C^I),Wg(Y,q,C,I),Y=Y/2;return d+l}Cr(QI,"zxyToTileId");function KE(i){let s=0;for(let u=0;u<27;u++){let d=(1<<u)*(1<<u);if(s+d>i)return EI(u,i-s);s+=d}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Cr(KE,"tileIdToZxy");var $E=(i=>(i[i.Unknown=0]="Unknown",i[i.None=1]="None",i[i.Gzip=2]="Gzip",i[i.Brotli=3]="Brotli",i[i.Zstd=4]="Zstd",i))($E||{});function qd(i,s){return Sn(this,null,function*(){if(s===1||s===0)return i;if(s===2){if(typeof globalThis.DecompressionStream>"u")return OE(new Uint8Array(i));let u=new Response(i).body;if(!u)throw new Error("Failed to read response stream");let d=u.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(d).arrayBuffer()}throw new Error("Compression method not supported")})}Cr(qd,"defaultDecompress");var ZE=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(ZE||{});function SI(i){return i===1?".mvt":i===2?".png":i===3?".jpg":i===4?".webp":i===5?".avif":""}Cr(SI,"tileTypeExt");var WE=127;function DI(i,s){let u=0,d=i.length-1;for(;u<=d;){let y=d+u>>1,C=s-i[y].tileId;if(C>0)u=y+1;else if(C<0)d=y-1;else return i[y]}return d>=0&&(i[d].runLength===0||s-i[d].tileId<i[d].runLength)?i[d]:null}Cr(DI,"findTile");var XE=class{constructor(s){this.file=s}getKey(){return this.file.name}getBytes(s,u){return Sn(this,null,function*(){return{data:yield this.file.slice(s,s+u).arrayBuffer()}})}};Cr(XE,"FileSource");var kI=class{constructor(s,u=new Headers){this.url=s,this.customHeaders=u,this.mustReload=!1;let d="";"navigator"in globalThis&&(d=globalThis.navigator.userAgent||"");let y=d.indexOf("Windows")>-1,C=/Chrome|Chromium|Edg|OPR|Brave/.test(d);this.chromeWindowsNoCache=!1,y&&C&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(s){this.customHeaders=s}getBytes(s,u,d,y){return Sn(this,null,function*(){let C,I;d?I=d:(C=new AbortController,I=C.signal);let l=new Headers(this.customHeaders);l.set("range",`bytes=${s}-${s+u-1}`);let q;this.mustReload?q="reload":this.chromeWindowsNoCache&&(q="no-store");let Y=yield fetch(this.url,{signal:I,cache:q,headers:l});if(s===0&&Y.status===416){let V=Y.headers.get("Content-Range");if(!V||!V.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let Ae=+V.substr(8);Y=yield fetch(this.url,{signal:I,cache:"reload",headers:{range:`bytes=0-${Ae-1}`}})}let O=Y.headers.get("Etag");if(O!=null&&O.startsWith("W/")&&(O=null),Y.status===416||y&&O&&O!==y)throw this.mustReload=!0,new pg(`Server returned non-matching ETag ${y} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(Y.status>=300)throw new Error(`Bad response code: ${Y.status}`);let H=Y.headers.get("Content-Length");if(Y.status===200&&(!H||+H>u))throw C&&C.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield Y.arrayBuffer(),etag:O||void 0,cacheControl:Y.headers.get("Cache-Control")||void 0,expires:Y.headers.get("Expires")||void 0}})}};Cr(kI,"FetchSource");var e2=kI;function gs(i,s){let u=i.getUint32(s+4,!0),d=i.getUint32(s+0,!0);return u*oA(2,32)+d}Cr(gs,"getUint64");function MI(i,s){let u=new DataView(i),d=u.getUint8(7);if(d>3)throw new Error(`Archive is spec version ${d} but this library supports up to spec version 3`);return{specVersion:d,rootDirectoryOffset:gs(u,8),rootDirectoryLength:gs(u,16),jsonMetadataOffset:gs(u,24),jsonMetadataLength:gs(u,32),leafDirectoryOffset:gs(u,40),leafDirectoryLength:gs(u,48),tileDataOffset:gs(u,56),tileDataLength:gs(u,64),numAddressedTiles:gs(u,72),numTileEntries:gs(u,80),numTileContents:gs(u,88),clustered:u.getUint8(96)===1,internalCompression:u.getUint8(97),tileCompression:u.getUint8(98),tileType:u.getUint8(99),minZoom:u.getUint8(100),maxZoom:u.getUint8(101),minLon:u.getInt32(102,!0)/1e7,minLat:u.getInt32(106,!0)/1e7,maxLon:u.getInt32(110,!0)/1e7,maxLat:u.getInt32(114,!0)/1e7,centerZoom:u.getUint8(118),centerLon:u.getInt32(119,!0)/1e7,centerLat:u.getInt32(123,!0)/1e7,etag:s}}Cr(MI,"bytesToHeader");function Xg(i){let s={buf:new Uint8Array(i),pos:0},u=eh(s),d=[],y=0;for(let C=0;C<u;C++){let I=eh(s);d.push({tileId:y+I,offset:0,length:0,runLength:1}),y+=I}for(let C=0;C<u;C++)d[C].runLength=eh(s);for(let C=0;C<u;C++)d[C].length=eh(s);for(let C=0;C<u;C++){let I=eh(s);I===0&&C>0?d[C].offset=d[C-1].offset+d[C-1].length:d[C].offset=I-1}return d}Cr(Xg,"deserializeIndex");var TI=class extends Error{};Cr(TI,"EtagMismatch");var pg=TI;function ep(i,s){return Sn(this,null,function*(){let u=yield i.getBytes(0,16384);if(new DataView(u.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let d=u.data.slice(0,WE),y=MI(d,u.etag),C=u.data.slice(y.rootDirectoryOffset,y.rootDirectoryOffset+y.rootDirectoryLength),I=`${i.getKey()}|${y.etag||""}|${y.rootDirectoryOffset}|${y.rootDirectoryLength}`,l=Xg(yield s(C,y.internalCompression));return[y,[I,l.length,l]]})}Cr(ep,"getHeaderAndRoot");function tp(i,s,u,d,y){return Sn(this,null,function*(){let C=yield i.getBytes(u,d,void 0,y.etag),I=yield s(C.data,y.internalCompression),l=Xg(I);if(l.length===0)throw new Error("Empty directory is invalid");return l})}Cr(tp,"getDirectory");var t2=class{constructor(s=100,u=!0,d=qd){this.cache=new Map,this.maxCacheEntries=s,this.counter=1,this.decompress=d}getHeader(s){return Sn(this,null,function*(){let u=s.getKey(),d=this.cache.get(u);if(d)return d.lastUsed=this.counter++,d.data;let y=yield ep(s,this.decompress);return y[1]&&this.cache.set(y[1][0],{lastUsed:this.counter++,data:y[1][2]}),this.cache.set(u,{lastUsed:this.counter++,data:y[0]}),this.prune(),y[0]})}getDirectory(s,u,d,y){return Sn(this,null,function*(){let C=`${s.getKey()}|${y.etag||""}|${u}|${d}`,I=this.cache.get(C);if(I)return I.lastUsed=this.counter++,I.data;let l=yield tp(s,this.decompress,u,d,y);return this.cache.set(C,{lastUsed:this.counter++,data:l}),this.prune(),l})}prune(){if(this.cache.size>this.maxCacheEntries){let s=1/0,u;this.cache.forEach((d,y)=>{d.lastUsed<s&&(s=d.lastUsed,u=y)}),u&&this.cache.delete(u)}}invalidate(s){return Sn(this,null,function*(){this.cache.delete(s.getKey())})}};Cr(t2,"ResolvedValueCache");var PI=class{constructor(s=100,u=!0,d=qd){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=s,this.counter=1,this.decompress=d}getHeader(s){return Sn(this,null,function*(){let u=s.getKey(),d=this.cache.get(u);if(d)return d.lastUsed=this.counter++,yield d.data;let y=new Promise((C,I)=>{ep(s,this.decompress).then(l=>{l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:Promise.resolve(l[1][2])}),C(l[0]),this.prune()}).catch(l=>{I(l)})});return this.cache.set(u,{lastUsed:this.counter++,data:y}),y})}getDirectory(s,u,d,y){return Sn(this,null,function*(){let C=`${s.getKey()}|${y.etag||""}|${u}|${d}`,I=this.cache.get(C);if(I)return I.lastUsed=this.counter++,yield I.data;let l=new Promise((q,Y)=>{tp(s,this.decompress,u,d,y).then(O=>{q(O),this.prune()}).catch(O=>{Y(O)})});return this.cache.set(C,{lastUsed:this.counter++,data:l}),l})}prune(){if(this.cache.size>=this.maxCacheEntries){let s=1/0,u;this.cache.forEach((d,y)=>{d.lastUsed<s&&(s=d.lastUsed,u=y)}),u&&this.cache.delete(u)}}invalidate(s){return Sn(this,null,function*(){let u=s.getKey();if(this.invalidations.get(u))return yield this.invalidations.get(u);this.cache.delete(s.getKey());let d=new Promise((y,C)=>{this.getHeader(s).then(I=>{y(),this.invalidations.delete(u)}).catch(I=>{C(I)})});this.invalidations.set(u,d)})}};Cr(PI,"SharedPromiseCache");var i2=PI,RI=class{constructor(s,u,d){typeof s=="string"?this.source=new e2(s):this.source=s,d?this.decompress=d:this.decompress=qd,u?this.cache=u:this.cache=new i2}getHeader(){return Sn(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(s,u,d,y){return Sn(this,null,function*(){let C=QI(s,u,d),I=yield this.cache.getHeader(this.source);if(s<I.minZoom||s>I.maxZoom)return;let l=I.rootDirectoryOffset,q=I.rootDirectoryLength;for(let Y=0;Y<=3;Y++){let O=yield this.cache.getDirectory(this.source,l,q,I),H=DI(O,C);if(H){if(H.runLength>0){let V=yield this.source.getBytes(I.tileDataOffset+H.offset,H.length,y,I.etag);return{data:yield this.decompress(V.data,I.tileCompression),cacheControl:V.cacheControl,expires:V.expires}}l=I.leafDirectoryOffset+H.offset,q=H.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(s,u,d,y){return Sn(this,null,function*(){try{return yield this.getZxyAttempt(s,u,d,y)}catch(C){if(C instanceof pg)return this.cache.invalidate(this.source),yield this.getZxyAttempt(s,u,d,y);throw C}})}getMetadataAttempt(){return Sn(this,null,function*(){let s=yield this.cache.getHeader(this.source),u=yield this.source.getBytes(s.jsonMetadataOffset,s.jsonMetadataLength,void 0,s.etag),d=yield this.decompress(u.data,s.internalCompression),y=new TextDecoder("utf-8");return JSON.parse(y.decode(d))})}getMetadata(){return Sn(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(s){if(s instanceof pg)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw s}})}getTileJson(s){return Sn(this,null,function*(){let u=yield this.getHeader(),d=yield this.getMetadata(),y=SI(u.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${s}/{z}/{x}/{y}${y}`],vector_layers:d.vector_layers,attribution:d.attribution,description:d.description,name:d.name,version:d.version,bounds:[u.minLon,u.minLat,u.maxLon,u.maxLat],center:[u.centerLon,u.centerLat,u.centerZoom],minzoom:u.minZoom,maxzoom:u.maxZoom}})}};Cr(RI,"PMTiles");var mg=RI,yg={exports:{}};(function(i,s){(function(u,d){d(s)})(lI,function(u){function d(b){return(v,..._)=>C(b,v,_)}function y(b,v){return d(Y(b,v).get)}const{apply:C,construct:I,defineProperty:l,get:q,getOwnPropertyDescriptor:Y,getPrototypeOf:O,has:H,ownKeys:V,set:Ae,setPrototypeOf:Ve}=Reflect,{iterator:Be,species:ot,toStringTag:pt,for:_t}=Symbol,ut=Object,{create:ft,defineProperty:Ft,freeze:Ut,is:zt}=ut,Zt=Array.prototype[Be],Bt=d(Zt),Gt=ArrayBuffer;y(Gt.prototype,"byteLength");const mt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;mt&&y(mt.prototype,"byteLength");const st=O(Uint8Array);st.from;const Et=st.prototype;Et[Be],d(Et.keys),d(Et.values),d(Et.entries),d(Et.set),d(Et.reverse),d(Et.fill),d(Et.copyWithin),d(Et.sort),d(Et.slice),d(Et.subarray),y(Et,"buffer"),y(Et,"byteOffset"),y(Et,"length"),y(Et,pt);const ni=Uint8Array,Li=Uint16Array,wi=Uint32Array,bi=Float32Array,Pi=O([][Be]()),nr=d(Pi.next),Kr=d(function*(){}().next),Ar=O(Pi),Yi=d(DataView.prototype.getUint16),kr=WeakMap,sn=kr.prototype,Er=d(sn.get),$r=d(sn.set),dr=new kr,ar=ft(null,{next:{value:function(){const b=Er(dr,this);return nr(b)}},[Be]:{value:function(){return this}}}),rn=new kr,hn=ft(Ar,{next:{value:function(){const b=Er(rn,this);return Kr(b)},writable:!0,configurable:!0}});for(const b of V(Pi))b!=="next"&&Ft(hn,b,Y(Pi,b));const pa=new Gt(4),Se=new bi(pa),Ge=new wi(pa),tt=new Li(512),It=new ni(512);for(let b=0;b<256;++b){const v=b-127;v<-24?(tt[b]=0,tt[256|b]=32768,It[b]=24,It[256|b]=24):v<-14?(tt[b]=1024>>-v-14,tt[256|b]=1024>>-v-14|32768,It[b]=-v-1,It[256|b]=-v-1):v<=15?(tt[b]=v+15<<10,tt[256|b]=v+15<<10|32768,It[b]=13,It[256|b]=13):v<128?(tt[b]=31744,tt[256|b]=64512,It[b]=24,It[256|b]=24):(tt[b]=31744,tt[256|b]=64512,It[b]=13,It[256|b]=13)}const ve=new wi(2048);for(let b=1;b<1024;++b){let v=b<<13,_=0;for(;!(8388608&v);)v<<=1,_-=8388608;v&=-8388609,_+=947912704,ve[b]=v|_}for(let b=1024;b<2048;++b)ve[b]=939524096+(b-1024<<13);const vt=new wi(64);for(let b=1;b<31;++b)vt[b]=b<<23;vt[31]=1199570944,vt[32]=2147483648;for(let b=33;b<63;++b)vt[b]=2147483648+(b-32<<23);vt[63]=3347054592;const Vt=new Li(64);for(let b=1;b<64;++b)b!==32&&(Vt[b]=1024);function gt(b,v,..._){return function(D){const T=D>>10;return Ge[0]=ve[Vt[T]+(1023&D)]+vt[T],Se[0]}(Yi(b,v,...function(D){if(D[Be]===Zt&&Pi.next===nr)return D;const T=ft(ar);return $r(dr,T,Bt(D)),T}(_)))}function bt(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var Ct={exports:{}};function fi(b,v,_){const D=_&&_.debug||!1;D&&console.log("[xml-utils] getting "+v+" in "+b);const T=typeof b=="object"?b.outer:b,F=T.slice(0,T.indexOf(">")+1),Z=['"',"'"];for(let G=0;G<Z.length;G++){const ne=Z[G],$=v+"\\="+ne+"([^"+ne+"]*)"+ne;D&&console.log("[xml-utils] pattern:",$);const W=new RegExp($).exec(F);if(D&&console.log("[xml-utils] match:",W),W)return W[1]}}Ct.exports=fi,Ct.exports.default=fi;var Ot=bt(Ct.exports),hi={exports:{}},di={exports:{}},Ti={exports:{}};function qi(b,v,_){const D=new RegExp(v).exec(b.slice(_));return D?_+D.index:-1}Ti.exports=qi,Ti.exports.default=qi;var ht=Ti.exports,fr={exports:{}};function Zi(b,v,_){const D=new RegExp(v).exec(b.slice(_));return D?_+D.index+D[0].length-1:-1}fr.exports=Zi,fr.exports.default=Zi;var Rr=fr.exports,Lr={exports:{}};function Qt(b,v){const _=new RegExp(v,"g"),D=b.match(_);return D?D.length:0}Lr.exports=Qt,Lr.exports.default=Qt;var Ei=Lr.exports;const ti=ht,lr=Rr,An=Ei;function xi(b,v,_){const D=_&&_.debug||!1,T=!(_&&typeof _.nested===!1),F=_&&_.startIndex||0;D&&console.log("[xml-utils] starting findTagByName with",v," and ",_);const Z=ti(b,`<${v}[ 
>/]`,F);if(D&&console.log("[xml-utils] start:",Z),Z===-1)return;const G=b.slice(Z+v.length);let ne=lr(G,"^[^<]*[ /]>",0);const $=ne!==-1&&G[ne-1]==="/";if(D&&console.log("[xml-utils] selfClosing:",$),$===!1)if(T){let X=0,Ie=1,xe=0;for(;(ne=lr(G,"[ /]"+v+">",X))!==-1;){const Qe=G.substring(X,ne+1);if(Ie+=An(Qe,"<"+v+`[ 
	>]`),xe+=An(Qe,"</"+v+">"),xe>=Ie)break;X=ne}}else ne=lr(G,"[ /]"+v+">",0);const W=Z+v.length+ne+1;if(D&&console.log("[xml-utils] end:",W),W===-1)return;const ge=b.slice(Z,W);let se;return se=$?null:ge.slice(ge.indexOf(">")+1,ge.lastIndexOf("<")),{inner:se,outer:ge,start:Z,end:W}}di.exports=xi,di.exports.default=xi;const ma=di.exports;function ya(b,v,_){const D=[],T=_&&_.debug||!1,F=!_||typeof _.nested!="boolean"||_.nested;let Z,G=_&&_.startIndex||0;for(;Z=ma(b,v,{debug:T,startIndex:G});)G=F?Z.start+1+v.length:Z.end,D.push(Z);return T&&console.log("findTagsByName found",D.length,"tags"),D}hi.exports=ya,hi.exports.default=ya;var is=bt(hi.exports);const mn={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},_e={};for(const b in mn)mn.hasOwnProperty(b)&&(_e[mn[b]]=parseInt(b,10));const J=[_e.BitsPerSample,_e.ExtraSamples,_e.SampleFormat,_e.StripByteCounts,_e.StripOffsets,_e.StripRowCounts,_e.TileByteCounts,_e.TileOffsets,_e.SubIFDs],j={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ie={};for(const b in j)j.hasOwnProperty(b)&&(ie[j[b]]=parseInt(b,10));const pe=0,Re=1,Ne=2,je=3,Ee=5,Xe=6,At=8,Ze=0,kt=1,li=0,gi=1,Oi=2,Ci={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Gi=new Map;function Qi(b,v){Array.isArray(b)||(b=[b]),b.forEach(_=>Gi.set(_,v))}async function Fr(b){const v=Gi.get(b.Compression);if(!v)throw new Error(`Unknown compression method identifier: ${b.Compression}`);return new(await v())(b)}function gr(b,v,_,D=1){return new(Object.getPrototypeOf(b)).constructor(v*_*D)}function Bi(b,v,_){return(1-_)*b+_*v}function Wi(b,v,_,D,T,F="nearest"){switch(F.toLowerCase()){case"nearest":return function(Z,G,ne,$,W){const ge=G/$,se=ne/W;return Z.map(X=>{const Ie=gr(X,$,W);for(let xe=0;xe<W;++xe){const Qe=Math.min(Math.round(se*xe),ne-1);for(let Pe=0;Pe<$;++Pe){const Oe=Math.min(Math.round(ge*Pe),G-1),Te=X[Qe*G+Oe];Ie[xe*$+Pe]=Te}}return Ie})}(b,v,_,D,T);case"bilinear":case"linear":return function(Z,G,ne,$,W){const ge=G/$,se=ne/W;return Z.map(X=>{const Ie=gr(X,$,W);for(let xe=0;xe<W;++xe){const Qe=se*xe,Pe=Math.floor(Qe),Oe=Math.min(Math.ceil(Qe),ne-1);for(let Te=0;Te<$;++Te){const Ke=ge*Te,te=Ke%1,N=Math.floor(Ke),he=Math.min(Math.ceil(Ke),G-1),le=X[Pe*G+N],ue=X[Pe*G+he],de=X[Oe*G+N],Me=X[Oe*G+he],De=Bi(Bi(le,ue,te),Bi(de,Me,te),Qe%1);Ie[xe*$+Te]=De}}return Ie})}(b,v,_,D,T);default:throw new Error(`Unsupported resampling method: '${F}'`)}}function _r(b,v,_,D,T,F,Z="nearest"){switch(Z.toLowerCase()){case"nearest":return function(G,ne,$,W,ge,se){const X=ne/W,Ie=$/ge,xe=gr(G,W,ge,se);for(let Qe=0;Qe<ge;++Qe){const Pe=Math.min(Math.round(Ie*Qe),$-1);for(let Oe=0;Oe<W;++Oe){const Te=Math.min(Math.round(X*Oe),ne-1);for(let Ke=0;Ke<se;++Ke){const te=G[Pe*ne*se+Te*se+Ke];xe[Qe*W*se+Oe*se+Ke]=te}}}return xe}(b,v,_,D,T,F);case"bilinear":case"linear":return function(G,ne,$,W,ge,se){const X=ne/W,Ie=$/ge,xe=gr(G,W,ge,se);for(let Qe=0;Qe<ge;++Qe){const Pe=Ie*Qe,Oe=Math.floor(Pe),Te=Math.min(Math.ceil(Pe),$-1);for(let Ke=0;Ke<W;++Ke){const te=X*Ke,N=te%1,he=Math.floor(te),le=Math.min(Math.ceil(te),ne-1);for(let ue=0;ue<se;++ue){const de=G[Oe*ne*se+he*se+ue],Me=G[Oe*ne*se+le*se+ue],De=G[Te*ne*se+he*se+ue],Fe=G[Te*ne*se+le*se+ue],We=Bi(Bi(de,Me,N),Bi(De,Fe,N),Pe%1);xe[Qe*W*se+Ke*se+ue]=We}}}return xe}(b,v,_,D,T,F);default:throw new Error(`Unsupported resampling method: '${Z}'`)}}function Zr(b,v,_){let D=0;for(let T=v;T<_;++T)D+=b[T];return D}function jr(b,v,_){switch(b){case 1:if(v<=8)return new Uint8Array(_);if(v<=16)return new Uint16Array(_);if(v<=32)return new Uint32Array(_);break;case 2:if(v===8)return new Int8Array(_);if(v===16)return new Int16Array(_);if(v===32)return new Int32Array(_);break;case 3:switch(v){case 16:case 32:return new Float32Array(_);case 64:return new Float64Array(_)}}throw Error("Unsupported data format/bitsPerSample")}Qi([void 0,1],()=>Promise.resolve().then(function(){return ku}).then(b=>b.default)),Qi(5,()=>Promise.resolve().then(function(){return qo}).then(b=>b.default)),Qi(6,()=>{throw new Error("old style JPEG compression is not supported.")}),Qi(7,()=>Promise.resolve().then(function(){return Tu}).then(b=>b.default)),Qi([8,32946],()=>Promise.resolve().then(function(){return Ce}).then(b=>b.default)),Qi(32773,()=>Promise.resolve().then(function(){return ke}).then(b=>b.default)),Qi(34887,()=>Promise.resolve().then(function(){return Pt}).then(async b=>(await b.zstd.init(),b)).then(b=>b.default)),Qi(50001,()=>Promise.resolve().then(function(){return Mt}).then(b=>b.default));class dn{constructor(v,_,D,T,F,Z){this.fileDirectory=v,this.geoKeys=_,this.dataView=D,this.littleEndian=T,this.tiles=F?{}:null,this.isTiled=!v.StripOffsets;const G=v.PlanarConfiguration;if(this.planarConfiguration=G===void 0?1:G,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=Z}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return this.fileDirectory.SamplesPerPixel!==void 0?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip!==void 0?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(v){return this.isTiled||(v+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-v*this.getTileHeight()}getBytesPerPixel(){let v=0;for(let _=0;_<this.fileDirectory.BitsPerSample.length;++_)v+=this.getSampleByteSize(_);return v}getSampleByteSize(v){if(v>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${v} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[v]/8)}getReaderForSample(v){const _=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[v]:1,D=this.fileDirectory.BitsPerSample[v];switch(_){case 1:if(D<=8)return DataView.prototype.getUint8;if(D<=16)return DataView.prototype.getUint16;if(D<=32)return DataView.prototype.getUint32;break;case 2:if(D<=8)return DataView.prototype.getInt8;if(D<=16)return DataView.prototype.getInt16;if(D<=32)return DataView.prototype.getInt32;break;case 3:switch(D){case 16:return function(T,F){return gt(this,T,F)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(v=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[v]:1}getBitsPerSample(v=0){return this.fileDirectory.BitsPerSample[v]}getArrayForSample(v,_){return jr(this.getSampleFormat(v),this.getBitsPerSample(v),_)}async getTileOrStrip(v,_,D,T,F){const Z=Math.ceil(this.getWidth()/this.getTileWidth()),G=Math.ceil(this.getHeight()/this.getTileHeight());let ne;const{tiles:$}=this;let W,ge;this.planarConfiguration===1?ne=_*Z+v:this.planarConfiguration===2&&(ne=D*Z*G+_*Z+v),this.isTiled?(W=this.fileDirectory.TileOffsets[ne],ge=this.fileDirectory.TileByteCounts[ne]):(W=this.fileDirectory.StripOffsets[ne],ge=this.fileDirectory.StripByteCounts[ne]);const se=(await this.source.fetch([{offset:W,length:ge}],F))[0];let X;return $!==null&&$[ne]?X=$[ne]:(X=(async()=>{let Ie=await T.decode(this.fileDirectory,se);const xe=this.getSampleFormat(),Qe=this.getBitsPerSample();return function(Pe,Oe){return(Pe!==1&&Pe!==2||!(Oe<=32)||Oe%8!=0)&&(Pe!==3||Oe!==16&&Oe!==32&&Oe!==64)}(xe,Qe)&&(Ie=function(Pe,Oe,Te,Ke,te,N,he){const le=new DataView(Pe),ue=Te===2?1:Ke,de=jr(Oe,te,Te===2?he*N:he*N*Ke),Me=parseInt("1".repeat(te),2);if(Oe===1){let De;De=Te===1?Ke*te:te;let Fe=N*De;7&Fe&&(Fe=Fe+7&-8);for(let We=0;We<he;++We){const rt=We*Fe;for(let at=0;at<N;++at){const yt=rt+at*ue*te;for(let Tt=0;Tt<ue;++Tt){const it=yt+Tt*te,$e=(We*N+at)*ue+Tt,dt=Math.floor(it/8),$t=it%8;if($t+te<=8)de[$e]=le.getUint8(dt)>>8-te-$t&Me;else if($t+te<=16)de[$e]=le.getUint16(dt)>>16-te-$t&Me;else if($t+te<=24){const St=le.getUint16(dt)<<8|le.getUint8(dt+2);de[$e]=St>>24-te-$t&Me}else de[$e]=le.getUint32(dt)>>32-te-$t&Me}}}}return de.buffer}(Ie,xe,this.planarConfiguration,this.getSamplesPerPixel(),Qe,this.getTileWidth(),this.getBlockHeight(_))),Ie})(),$!==null&&($[ne]=X)),{x:v,y:_,sample:D,data:await X}}async _readRaster(v,_,D,T,F,Z,G,ne,$){const W=this.getTileWidth(),ge=this.getTileHeight(),se=this.getWidth(),X=this.getHeight(),Ie=Math.max(Math.floor(v[0]/W),0),xe=Math.min(Math.ceil(v[2]/W),Math.ceil(se/W)),Qe=Math.max(Math.floor(v[1]/ge),0),Pe=Math.min(Math.ceil(v[3]/ge),Math.ceil(X/ge)),Oe=v[2]-v[0];let Te=this.getBytesPerPixel();const Ke=[],te=[];for(let le=0;le<_.length;++le)this.planarConfiguration===1?Ke.push(Zr(this.fileDirectory.BitsPerSample,0,_[le])/8):Ke.push(0),te.push(this.getReaderForSample(_[le]));const N=[],{littleEndian:he}=this;for(let le=Qe;le<Pe;++le)for(let ue=Ie;ue<xe;++ue){let de;this.planarConfiguration===1&&(de=this.getTileOrStrip(ue,le,0,F,$));for(let Me=0;Me<_.length;++Me){const De=Me,Fe=_[Me];this.planarConfiguration===2&&(Te=this.getSampleByteSize(Fe),de=this.getTileOrStrip(ue,le,Fe,F,$));const We=de.then(rt=>{const at=rt.data,yt=new DataView(at),Tt=this.getBlockHeight(rt.y),it=rt.y*ge,$e=rt.x*W,dt=it+Tt,$t=(rt.x+1)*W,St=te[De],si=Math.min(Tt,Tt-(dt-v[3]),X-it),Dt=Math.min(W,W-($t-v[2]),se-$e);for(let ei=Math.max(0,v[1]-it);ei<si;++ei)for(let Kt=Math.max(0,v[0]-$e);Kt<Dt;++Kt){const ui=(ei*W+Kt)*Te,Jt=St.call(yt,ui+Ke[De],he);let Ji;T?(Ji=(ei+it-v[1])*Oe*_.length+(Kt+$e-v[0])*_.length+De,D[Ji]=Jt):(Ji=(ei+it-v[1])*Oe+Kt+$e-v[0],D[De][Ji]=Jt)}});N.push(We)}}if(await Promise.all(N),Z&&v[2]-v[0]!==Z||G&&v[3]-v[1]!==G){let le;return le=T?_r(D,v[2]-v[0],v[3]-v[1],Z,G,_.length,ne):Wi(D,v[2]-v[0],v[3]-v[1],Z,G,ne),le.width=Z,le.height=G,le}return D.width=Z||v[2]-v[0],D.height=G||v[3]-v[1],D}async readRasters({window:v,samples:_=[],interleave:D,pool:T=null,width:F,height:Z,resampleMethod:G,fillValue:ne,signal:$}={}){const W=v||[0,0,this.getWidth(),this.getHeight()];if(W[0]>W[2]||W[1]>W[3])throw new Error("Invalid subsets");const ge=(W[2]-W[0])*(W[3]-W[1]),se=this.getSamplesPerPixel();if(_&&_.length){for(let xe=0;xe<_.length;++xe)if(_[xe]>=se)return Promise.reject(new RangeError(`Invalid sample index '${_[xe]}'.`))}else for(let xe=0;xe<se;++xe)_.push(xe);let X;if(D)X=jr(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),ge*_.length),ne&&X.fill(ne);else{X=[];for(let xe=0;xe<_.length;++xe){const Qe=this.getArrayForSample(_[xe],ge);Array.isArray(ne)&&xe<ne.length?Qe.fill(ne[xe]):ne&&!Array.isArray(ne)&&Qe.fill(ne),X.push(Qe)}}const Ie=T||await Fr(this.fileDirectory);return await this._readRaster(W,_,X,D,Ie,F,Z,G,$)}async readRGB({window:v,interleave:_=!0,pool:D=null,width:T,height:F,resampleMethod:Z,enableAlpha:G=!1,signal:ne}={}){const $=v||[0,0,this.getWidth(),this.getHeight()];if($[0]>$[2]||$[1]>$[3])throw new Error("Invalid subsets");const W=this.fileDirectory.PhotometricInterpretation;if(W===Ne){let Pe=[0,1,2];if(this.fileDirectory.ExtraSamples!==Ze&&G){Pe=[];for(let Oe=0;Oe<this.fileDirectory.BitsPerSample.length;Oe+=1)Pe.push(Oe)}return this.readRasters({window:v,interleave:_,samples:Pe,pool:D,width:T,height:F,resampleMethod:Z,signal:ne})}let ge;switch(W){case pe:case Re:case je:ge=[0];break;case Ee:ge=[0,1,2,3];break;case Xe:case At:ge=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const se={window:$,interleave:!0,samples:ge,pool:D,width:T,height:F,resampleMethod:Z,signal:ne},{fileDirectory:X}=this,Ie=await this.readRasters(se),xe=2**this.fileDirectory.BitsPerSample[0];let Qe;switch(W){case pe:Qe=function(Pe,Oe){const{width:Te,height:Ke}=Pe,te=new Uint8Array(Te*Ke*3);let N;for(let he=0,le=0;he<Pe.length;++he,le+=3)N=256-Pe[he]/Oe*256,te[le]=N,te[le+1]=N,te[le+2]=N;return te}(Ie,xe);break;case Re:Qe=function(Pe,Oe){const{width:Te,height:Ke}=Pe,te=new Uint8Array(Te*Ke*3);let N;for(let he=0,le=0;he<Pe.length;++he,le+=3)N=Pe[he]/Oe*256,te[le]=N,te[le+1]=N,te[le+2]=N;return te}(Ie,xe);break;case je:Qe=function(Pe,Oe){const{width:Te,height:Ke}=Pe,te=new Uint8Array(Te*Ke*3),N=Oe.length/3,he=Oe.length/3*2;for(let le=0,ue=0;le<Pe.length;++le,ue+=3){const de=Pe[le];te[ue]=Oe[de]/65536*256,te[ue+1]=Oe[de+N]/65536*256,te[ue+2]=Oe[de+he]/65536*256}return te}(Ie,X.ColorMap);break;case Ee:Qe=function(Pe){const{width:Oe,height:Te}=Pe,Ke=new Uint8Array(Oe*Te*3);for(let te=0,N=0;te<Pe.length;te+=4,N+=3){const he=Pe[te],le=Pe[te+1],ue=Pe[te+2],de=Pe[te+3];Ke[N]=(255-he)/256*255*((255-de)/256),Ke[N+1]=(255-le)/256*255*((255-de)/256),Ke[N+2]=(255-ue)/256*255*((255-de)/256)}return Ke}(Ie);break;case Xe:Qe=function(Pe){const{width:Oe,height:Te}=Pe,Ke=new Uint8ClampedArray(Oe*Te*3);for(let te=0,N=0;te<Pe.length;te+=3,N+=3){const he=Pe[te],le=Pe[te+1],ue=Pe[te+2];Ke[N]=he+1.402*(ue-128),Ke[N+1]=he-.34414*(le-128)-.71414*(ue-128),Ke[N+2]=he+1.772*(le-128)}return Ke}(Ie);break;case At:Qe=function(Pe){const{width:Oe,height:Te}=Pe,Ke=new Uint8Array(Oe*Te*3);for(let te=0,N=0;te<Pe.length;te+=3,N+=3){let he,le,ue,de=(Pe[te+0]+16)/116,Me=(Pe[te+1]<<24>>24)/500+de,De=de-(Pe[te+2]<<24>>24)/200;Me=.95047*(Me*Me*Me>.008856?Me*Me*Me:(Me-16/116)/7.787),de=1*(de*de*de>.008856?de*de*de:(de-16/116)/7.787),De=1.08883*(De*De*De>.008856?De*De*De:(De-16/116)/7.787),he=3.2406*Me+-1.5372*de+-.4986*De,le=-.9689*Me+1.8758*de+.0415*De,ue=.0557*Me+-.204*de+1.057*De,he=he>.0031308?1.055*he**(1/2.4)-.055:12.92*he,le=le>.0031308?1.055*le**(1/2.4)-.055:12.92*le,ue=ue>.0031308?1.055*ue**(1/2.4)-.055:12.92*ue,Ke[N]=255*Math.max(0,Math.min(1,he)),Ke[N+1]=255*Math.max(0,Math.min(1,le)),Ke[N+2]=255*Math.max(0,Math.min(1,ue))}return Ke}(Ie);break;default:throw new Error("Unsupported photometric interpretation.")}if(!_){const Pe=new Uint8Array(Qe.length/3),Oe=new Uint8Array(Qe.length/3),Te=new Uint8Array(Qe.length/3);for(let Ke=0,te=0;Ke<Qe.length;Ke+=3,++te)Pe[te]=Qe[Ke],Oe[te]=Qe[Ke+1],Te[te]=Qe[Ke+2];Qe=[Pe,Oe,Te]}return Qe.width=Ie.width,Qe.height=Ie.height,Qe}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const v=[];for(let _=0;_<this.fileDirectory.ModelTiepoint.length;_+=6)v.push({i:this.fileDirectory.ModelTiepoint[_],j:this.fileDirectory.ModelTiepoint[_+1],k:this.fileDirectory.ModelTiepoint[_+2],x:this.fileDirectory.ModelTiepoint[_+3],y:this.fileDirectory.ModelTiepoint[_+4],z:this.fileDirectory.ModelTiepoint[_+5]});return v}getGDALMetadata(v=null){const _={};if(!this.fileDirectory.GDAL_METADATA)return null;const D=this.fileDirectory.GDAL_METADATA;let T=is(D,"Item");T=v===null?T.filter(F=>Ot(F,"sample")===void 0):T.filter(F=>Number(Ot(F,"sample"))===v);for(let F=0;F<T.length;++F){const Z=T[F];_[Ot(Z,"name")]=Z.inner}return _}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const v=this.fileDirectory.GDAL_NODATA;return Number(v.substring(0,v.length-1))}getOrigin(){const v=this.fileDirectory.ModelTiepoint,_=this.fileDirectory.ModelTransformation;if(v&&v.length===6)return[v[3],v[4],v[5]];if(_)return[_[3],_[7],_[11]];throw new Error("The image does not have an affine transformation.")}getResolution(v=null){const _=this.fileDirectory.ModelPixelScale,D=this.fileDirectory.ModelTransformation;if(_)return[_[0],-_[1],_[2]];if(D)return D[1]===0&&D[4]===0?[D[0],-D[5],D[10]]:[Math.sqrt(D[0]*D[0]+D[4]*D[4]),-Math.sqrt(D[1]*D[1]+D[5]*D[5]),D[10]];if(v){const[T,F,Z]=v.getResolution();return[T*v.getWidth()/this.getWidth(),F*v.getHeight()/this.getHeight(),Z*v.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(v=!1){const _=this.getHeight(),D=this.getWidth();if(this.fileDirectory.ModelTransformation&&!v){const[T,F,Z,G,ne,$,W,ge]=this.fileDirectory.ModelTransformation,se=[[0,0],[0,_],[D,0],[D,_]].map(([xe,Qe])=>[G+T*xe+F*Qe,ge+ne*xe+$*Qe]),X=se.map(xe=>xe[0]),Ie=se.map(xe=>xe[1]);return[Math.min(...X),Math.min(...Ie),Math.max(...X),Math.max(...Ie)]}{const T=this.getOrigin(),F=this.getResolution(),Z=T[0],G=T[1],ne=Z+F[0]*D,$=G+F[1]*_;return[Math.min(Z,ne),Math.min(G,$),Math.max(Z,ne),Math.max(G,$)]}}}class Ys{constructor(v){this._dataView=new DataView(v)}get buffer(){return this._dataView.buffer}getUint64(v,_){const D=this.getUint32(v,_),T=this.getUint32(v+4,_);let F;if(_){if(F=D+2**32*T,!Number.isSafeInteger(F))throw new Error(`${F} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return F}if(F=2**32*D+T,!Number.isSafeInteger(F))throw new Error(`${F} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return F}getInt64(v,_){let D=0;const T=(128&this._dataView.getUint8(v+(_?7:0)))>0;let F=!0;for(let Z=0;Z<8;Z++){let G=this._dataView.getUint8(v+(_?Z:7-Z));T&&(F?G!==0&&(G=255&~(G-1),F=!1):G=255&~G),D+=G*256**Z}return T&&(D=-D),D}getUint8(v,_){return this._dataView.getUint8(v,_)}getInt8(v,_){return this._dataView.getInt8(v,_)}getUint16(v,_){return this._dataView.getUint16(v,_)}getInt16(v,_){return this._dataView.getInt16(v,_)}getUint32(v,_){return this._dataView.getUint32(v,_)}getInt32(v,_){return this._dataView.getInt32(v,_)}getFloat16(v,_){return gt(this._dataView,v,_)}getFloat32(v,_){return this._dataView.getFloat32(v,_)}getFloat64(v,_){return this._dataView.getFloat64(v,_)}}class Xi{constructor(v,_,D,T){this._dataView=new DataView(v),this._sliceOffset=_,this._littleEndian=D,this._bigTiff=T}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(v,_){return this.sliceOffset<=v&&this.sliceTop>=v+_}readUint8(v){return this._dataView.getUint8(v-this._sliceOffset,this._littleEndian)}readInt8(v){return this._dataView.getInt8(v-this._sliceOffset,this._littleEndian)}readUint16(v){return this._dataView.getUint16(v-this._sliceOffset,this._littleEndian)}readInt16(v){return this._dataView.getInt16(v-this._sliceOffset,this._littleEndian)}readUint32(v){return this._dataView.getUint32(v-this._sliceOffset,this._littleEndian)}readInt32(v){return this._dataView.getInt32(v-this._sliceOffset,this._littleEndian)}readFloat32(v){return this._dataView.getFloat32(v-this._sliceOffset,this._littleEndian)}readFloat64(v){return this._dataView.getFloat64(v-this._sliceOffset,this._littleEndian)}readUint64(v){const _=this.readUint32(v),D=this.readUint32(v+4);let T;if(this._littleEndian){if(T=_+2**32*D,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}if(T=2**32*_+D,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}readInt64(v){let _=0;const D=(128&this._dataView.getUint8(v+(this._littleEndian?7:0)))>0;let T=!0;for(let F=0;F<8;F++){let Z=this._dataView.getUint8(v+(this._littleEndian?F:7-F));D&&(T?Z!==0&&(Z=255&~(Z-1),T=!1):Z=255&~Z),_+=Z*256**F}return D&&(_=-_),_}readOffset(v){return this._bigTiff?this.readUint64(v):this.readUint32(v)}}const Ic=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class vc{constructor(v=Ic,_){this.workers=null,this._awaitingDecoder=null,this.size=v,this.messageId=0,v&&(this._awaitingDecoder=_?Promise.resolve(_):new Promise(D=>{Promise.resolve().then(function(){return Ii}).then(T=>{D(T.create)})}),this._awaitingDecoder.then(D=>{this._awaitingDecoder=null,this.workers=[];for(let T=0;T<v;T++)this.workers.push({worker:D(),idle:!0})}))}async decode(v,_){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?Fr(v).then(D=>D.decode(v,_)):new Promise(D=>{const T=this.workers.find(G=>G.idle)||this.workers[Math.floor(Math.random()*this.size)];T.idle=!1;const F=this.messageId++,Z=G=>{G.data.id===F&&(T.idle=!0,D(G.data.decoded),T.worker.removeEventListener("message",Z))};T.worker.addEventListener("message",Z),T.worker.postMessage({fileDirectory:v,buffer:_,id:F},[_])})}destroy(){this.workers&&(this.workers.forEach(v=>{v.worker.terminate()}),this.workers=null)}}const Dn=`\r
\r
`;function yn(b){if(Object.fromEntries!==void 0)return Object.fromEntries(b);const v={};for(const[_,D]of b)v[_.toLowerCase()]=D;return v}function mh(b){return yn(b.split(`\r
`).map(v=>{const _=v.split(":").map(D=>D.trim());return _[0]=_[0].toLowerCase(),_}))}function _n(b){let v,_,D;return b&&([,v,_,D]=b.match(/bytes (\d+)-(\d+)\/(\d+)/),v=parseInt(v,10),_=parseInt(_,10),D=parseInt(D,10)),{start:v,end:_,total:D}}class In{async fetch(v,_=void 0){return Promise.all(v.map(D=>this.fetchSlice(D,_)))}async fetchSlice(v){throw new Error(`fetching of slice ${v} not possible, not implemented`)}get fileSize(){return null}async close(){}}class ka extends Map{constructor(v={}){if(super(),!(v.maxSize&&v.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof v.maxAge=="number"&&v.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=v.maxSize,this.maxAge=v.maxAge||Number.POSITIVE_INFINITY,this.onEviction=v.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(v){if(typeof this.onEviction=="function")for(const[_,D]of v)this.onEviction(_,D.value)}_deleteIfExpired(v,_){return typeof _.expiry=="number"&&_.expiry<=Date.now()&&(typeof this.onEviction=="function"&&this.onEviction(v,_.value),this.delete(v))}_getOrDeleteIfExpired(v,_){if(this._deleteIfExpired(v,_)===!1)return _.value}_getItemValue(v,_){return _.expiry?this._getOrDeleteIfExpired(v,_):_.value}_peek(v,_){const D=_.get(v);return this._getItemValue(v,D)}_set(v,_){this.cache.set(v,_),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(v,_){this.oldCache.delete(v),this._set(v,_)}*_entriesAscending(){for(const v of this.oldCache){const[_,D]=v;this.cache.has(_)||this._deleteIfExpired(_,D)===!1&&(yield v)}for(const v of this.cache){const[_,D]=v;this._deleteIfExpired(_,D)===!1&&(yield v)}}get(v){if(this.cache.has(v)){const _=this.cache.get(v);return this._getItemValue(v,_)}if(this.oldCache.has(v)){const _=this.oldCache.get(v);if(this._deleteIfExpired(v,_)===!1)return this._moveToRecent(v,_),_.value}}set(v,_,{maxAge:D=this.maxAge}={}){const T=typeof D=="number"&&D!==Number.POSITIVE_INFINITY?Date.now()+D:void 0;return this.cache.has(v)?this.cache.set(v,{value:_,expiry:T}):this._set(v,{value:_,expiry:T}),this}has(v){return this.cache.has(v)?!this._deleteIfExpired(v,this.cache.get(v)):!!this.oldCache.has(v)&&!this._deleteIfExpired(v,this.oldCache.get(v))}peek(v){return this.cache.has(v)?this._peek(v,this.cache):this.oldCache.has(v)?this._peek(v,this.oldCache):void 0}delete(v){const _=this.cache.delete(v);return _&&this._size--,this.oldCache.delete(v)||_}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(v){if(!(v&&v>0))throw new TypeError("`maxSize` must be a number greater than 0");const _=[...this._entriesAscending()],D=_.length-v;D<0?(this.cache=new Map(_),this.oldCache=new Map,this._size=_.length):(D>0&&this._emitEvictions(_.slice(0,D)),this.oldCache=new Map(_.slice(D)),this.cache=new Map,this._size=0),this.maxSize=v}*keys(){for(const[v]of this)yield v}*values(){for(const[,v]of this)yield v}*[Symbol.iterator](){for(const v of this.cache){const[_,D]=v;this._deleteIfExpired(_,D)===!1&&(yield[_,D.value])}for(const v of this.oldCache){const[_,D]=v;this.cache.has(_)||this._deleteIfExpired(_,D)===!1&&(yield[_,D.value])}}*entriesDescending(){let v=[...this.cache];for(let _=v.length-1;_>=0;--_){const D=v[_],[T,F]=D;this._deleteIfExpired(T,F)===!1&&(yield[T,F.value])}v=[...this.oldCache];for(let _=v.length-1;_>=0;--_){const D=v[_],[T,F]=D;this.cache.has(T)||this._deleteIfExpired(T,F)===!1&&(yield[T,F.value])}}*entriesAscending(){for(const[v,_]of this._entriesAscending())yield[v,_.value]}get size(){if(!this._size)return this.oldCache.size;let v=0;for(const _ of this.oldCache.keys())this.cache.has(_)||v++;return Math.min(this._size+v,this.maxSize)}entries(){return this.entriesAscending()}forEach(v,_=this){for(const[D,T]of this.entriesAscending())v.call(_,T,D,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Un extends Error{constructor(v){super(v),Error.captureStackTrace&&Error.captureStackTrace(this,Un),this.name="AbortError"}}class Vr extends Error{constructor(v,_){super(_),this.errors=v,this.message=_,this.name="AggregateError"}}const Eo=Vr;class Xn{constructor(v,_,D=null){this.offset=v,this.length=_,this.data=D}get top(){return this.offset+this.length}}class Mr{constructor(v,_,D){this.offset=v,this.length=_,this.blockIds=D}}class vl extends In{constructor(v,{blockSize:_=65536,cacheSize:D=100}={}){super(),this.source=v,this.blockSize=_,this.blockCache=new ka({maxSize:D,onEviction:(T,F)=>{this.evictedBlocks.set(T,F)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(v,_){const D=[],T=[],F=[];this.evictedBlocks.clear();for(const{offset:se,length:X}of v){let Ie=se+X;const{fileSize:xe}=this;xe!==null&&(Ie=Math.min(Ie,xe));for(let Qe=Math.floor(se/this.blockSize)*this.blockSize;Qe<Ie;Qe+=this.blockSize){const Pe=Math.floor(Qe/this.blockSize);this.blockCache.has(Pe)||this.blockRequests.has(Pe)||(this.blockIdsToFetch.add(Pe),T.push(Pe)),this.blockRequests.has(Pe)&&D.push(this.blockRequests.get(Pe)),F.push(Pe)}}await async function(se){return new Promise(X=>setTimeout(X,se))}(),this.fetchBlocks(_);const Z=[];for(const se of T)this.blockRequests.has(se)&&Z.push(this.blockRequests.get(se));await Promise.allSettled(D),await Promise.allSettled(Z);const G=[],ne=F.filter(se=>this.abortedBlockIds.has(se)||!this.blockCache.has(se));if(ne.forEach(se=>this.blockIdsToFetch.add(se)),ne.length>0&&_&&!_.aborted){this.fetchBlocks(null);for(const se of ne){const X=this.blockRequests.get(se);if(!X)throw new Error(`Block ${se} is not in the block requests`);G.push(X)}await Promise.allSettled(G)}if(_&&_.aborted)throw new Un("Request was aborted");const $=F.map(se=>this.blockCache.get(se)||this.evictedBlocks.get(se)),W=$.filter(se=>!se);if(W.length)throw new Eo(W,"Request failed");const ge=new Map(function(se,X){const Ie=Array.isArray(se)?se:Array.from(se),xe=Array.isArray(X)?X:Array.from(X);return Ie.map((Qe,Pe)=>[Qe,xe[Pe]])}(F,$));return this.readSliceData(v,ge)}fetchBlocks(v){if(this.blockIdsToFetch.size>0){const _=this.groupBlocks(this.blockIdsToFetch),D=this.source.fetch(_,v);for(let T=0;T<_.length;++T){const F=_[T];for(const Z of F.blockIds)this.blockRequests.set(Z,(async()=>{try{const G=(await D)[T],ne=Z*this.blockSize,$=ne-G.offset,W=Math.min($+this.blockSize,G.data.byteLength),ge=G.data.slice($,W),se=new Xn(ne,ge.byteLength,ge,Z);this.blockCache.set(Z,se),this.abortedBlockIds.delete(Z)}catch(G){if(G.name!=="AbortError")throw G;G.signal=v,this.blockCache.delete(Z),this.abortedBlockIds.add(Z)}finally{this.blockRequests.delete(Z)}})())}this.blockIdsToFetch.clear()}}groupBlocks(v){const _=Array.from(v).sort((Z,G)=>Z-G);if(_.length===0)return[];let D=[],T=null;const F=[];for(const Z of _)T===null||T+1===Z?(D.push(Z),T=Z):(F.push(new Mr(D[0]*this.blockSize,D.length*this.blockSize,D)),D=[Z],T=Z);return F.push(new Mr(D[0]*this.blockSize,D.length*this.blockSize,D)),F}readSliceData(v,_){return v.map(D=>{let T=D.offset+D.length;this.fileSize!==null&&(T=Math.min(this.fileSize,T));const F=Math.floor(D.offset/this.blockSize),Z=Math.floor(T/this.blockSize),G=new ArrayBuffer(D.length),ne=new Uint8Array(G);for(let $=F;$<=Z;++$){const W=_.get($),ge=W.offset-D.offset;let se,X=0,Ie=0;ge<0?X=-ge:ge>0&&(Ie=ge),se=W.top-T<0?W.length-X:T-W.offset-X;const xe=new Uint8Array(W.data,X,se);ne.set(xe,Ie)}return G})}}class kn{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(v){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Qo{constructor(v){this.url=v}async request({headers:v,signal:_}={}){throw new Error("request is not implemented")}}class ea extends kn{constructor(v){super(),this.response=v}get status(){return this.response.status}getHeader(v){return this.response.headers.get(v)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class yh extends Qo{constructor(v,_){super(v),this.credentials=_}async request({headers:v,signal:_}={}){const D=await fetch(this.url,{headers:v,credentials:this.credentials,signal:_});return new ea(D)}}class bl extends kn{constructor(v,_){super(),this.xhr=v,this.data=_}get status(){return this.xhr.status}getHeader(v){return this.xhr.getResponseHeader(v)}async getData(){return this.data}}class Is extends Qo{constructRequest(v,_){return new Promise((D,T)=>{const F=new XMLHttpRequest;F.open("GET",this.url),F.responseType="arraybuffer";for(const[Z,G]of Object.entries(v))F.setRequestHeader(Z,G);F.onload=()=>{const Z=F.response;D(new bl(F,Z))},F.onerror=T,F.onabort=()=>T(new Un("Request aborted")),F.send(),_&&(_.aborted&&F.abort(),_.addEventListener("abort",()=>F.abort()))})}async request({headers:v,signal:_}={}){return await this.constructRequest(v,_)}}var Ma={};class Hi extends kn{constructor(v,_){super(),this.response=v,this.dataPromise=_}get status(){return this.response.statusCode}getHeader(v){return this.response.headers[v]}async getData(){return await this.dataPromise}}class bc extends Qo{constructor(v){super(v),this.parsedUrl=Ma.parse(this.url),this.httpApi=(this.parsedUrl.protocol,Ma)}constructRequest(v,_){return new Promise((D,T)=>{const F=this.httpApi.get({...this.parsedUrl,headers:v},Z=>{const G=new Promise(ne=>{const $=[];Z.on("data",W=>{$.push(W)}),Z.on("end",()=>{const W=Buffer.concat($).buffer;ne(W)}),Z.on("error",T)});D(new Hi(Z,G))});F.on("error",T),_&&(_.aborted&&F.destroy(new Un("Request aborted")),_.addEventListener("abort",()=>F.destroy(new Un("Request aborted"))))})}async request({headers:v,signal:_}={}){return await this.constructRequest(v,_)}}class So extends In{constructor(v,_,D,T){super(),this.client=v,this.headers=_,this.maxRanges=D,this.allowFullFile=T,this._fileSize=null}async fetch(v,_){return this.maxRanges>=v.length?this.fetchSlices(v,_):(this.maxRanges>0&&v.length,Promise.all(v.map(D=>this.fetchSlice(D,_))))}async fetchSlices(v,_){const D=await this.client.request({headers:{...this.headers,Range:`bytes=${v.map(({offset:T,length:F})=>`${T}-${T+F}`).join(",")}`},signal:_});if(D.ok){if(D.status===206){const{type:T,params:F}=function(ge){const[se,...X]=ge.split(";").map(Ie=>Ie.trim());return{type:se,params:yn(X.map(Ie=>Ie.split("=")))}}(D.getHeader("content-type"));if(T==="multipart/byteranges"){const ge=function(se,X){let Ie=null;const xe=new TextDecoder("ascii"),Qe=[],Pe=`--${X}`,Oe=`${Pe}--`;for(let Te=0;Te<10;++Te)xe.decode(new Uint8Array(se,Te,Pe.length))===Pe&&(Ie=Te);if(Ie===null)throw new Error("Could not find initial boundary");for(;Ie<se.byteLength;){const Te=xe.decode(new Uint8Array(se,Ie,Math.min(Pe.length+1024,se.byteLength-Ie)));if(Te.length===0||Te.startsWith(Oe))break;if(!Te.startsWith(Pe))throw new Error("Part does not start with boundary");const Ke=Te.substr(Pe.length+2);if(Ke.length===0)break;const te=Ke.indexOf(Dn),N=mh(Ke.substr(0,te)),{start:he,end:le,total:ue}=_n(N["content-range"]),de=Ie+Pe.length+te+4,Me=parseInt(le,10)+1-parseInt(he,10);Qe.push({headers:N,data:se.slice(de,de+Me),offset:he,length:Me,fileSize:ue}),Ie=de+Me+4}return Qe}(await D.getData(),F.boundary);return this._fileSize=ge[0].fileSize||null,ge}const Z=await D.getData(),{start:G,end:ne,total:$}=_n(D.getHeader("content-range"));this._fileSize=$||null;const W=[{data:Z,offset:G,length:ne-G}];if(v.length>1){const ge=await Promise.all(v.slice(1).map(se=>this.fetchSlice(se,_)));return W.concat(ge)}return W}{if(!this.allowFullFile)throw new Error("Server responded with full file");const T=await D.getData();return this._fileSize=T.byteLength,[{data:T,offset:0,length:T.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(v,_){const{offset:D,length:T}=v,F=await this.client.request({headers:{...this.headers,Range:`bytes=${D}-${D+T}`},signal:_});if(F.ok){if(F.status===206){const Z=await F.getData(),{total:G}=_n(F.getHeader("content-range"));return this._fileSize=G||null,{data:Z,offset:D,length:T}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const Z=await F.getData();return this._fileSize=Z.byteLength,{data:Z,offset:0,length:Z.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function rs(b,{blockSize:v,cacheSize:_}){return v===null?b:new vl(b,{blockSize:v,cacheSize:_})}function xc(b,{forceXHR:v=!1,..._}={}){return typeof fetch!="function"||v?typeof XMLHttpRequest<"u"?function(D,{headers:T={},maxRanges:F=0,allowFullFile:Z=!1,...G}={}){const ne=new Is(D);return rs(new So(ne,T,F,Z),G)}(b,_):function(D,{headers:T={},maxRanges:F=0,allowFullFile:Z=!1,...G}={}){const ne=new bc(D);return rs(new So(ne,T,F,Z),G)}(b,_):function(D,{headers:T={},credentials:F,maxRanges:Z=0,allowFullFile:G=!1,...ne}={}){const $=new yh(D,F);return rs(new So($,T,Z,G),ne)}(b,_)}function xl(b,v){let _=b.length-v,D=0;do{for(let T=v;T>0;T--)b[D+v]+=b[D],D++;_-=v}while(_>0)}function Do(b,v,_){let D=0,T=b.length;const F=T/_;for(;T>v;){for(let G=v;G>0;--G)b[D+v]+=b[D],++D;T-=v}const Z=b.slice();for(let G=0;G<F;++G)for(let ne=0;ne<_;++ne)b[_*G+ne]=Z[(_-ne-1)*F+G]}class _a{async decode(v,_){const D=await this.decodeBlock(_),T=v.Predictor||1;if(T!==1){const F=!v.StripOffsets;return function(Z,G,ne,$,W,ge){if(!G||G===1)return Z;for(let Ie=0;Ie<W.length;++Ie){if(W[Ie]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(W[Ie]!==W[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const se=W[0]/8,X=ge===2?1:W.length;for(let Ie=0;Ie<$&&!(Ie*X*ne*se>=Z.byteLength);++Ie){let xe;if(G===2){switch(W[0]){case 8:xe=new Uint8Array(Z,Ie*X*ne*se,X*ne*se);break;case 16:xe=new Uint16Array(Z,Ie*X*ne*se,X*ne*se/2);break;case 32:xe=new Uint32Array(Z,Ie*X*ne*se,X*ne*se/4);break;default:throw new Error(`Predictor 2 not allowed with ${W[0]} bits per sample.`)}xl(xe,X)}else G===3&&(xe=new Uint8Array(Z,Ie*X*ne*se,X*ne*se),Do(xe,X,se))}return Z}(D,T,F?v.TileWidth:v.ImageWidth,F?v.TileLength:v.RowsPerStrip||v.ImageLength,v.BitsPerSample,v.PlanarConfiguration)}return D}}function ns(b){switch(b){case ie.BYTE:case ie.ASCII:case ie.SBYTE:case ie.UNDEFINED:return 1;case ie.SHORT:case ie.SSHORT:return 2;case ie.LONG:case ie.SLONG:case ie.FLOAT:case ie.IFD:return 4;case ie.RATIONAL:case ie.SRATIONAL:case ie.DOUBLE:case ie.LONG8:case ie.SLONG8:case ie.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${b}`)}}function vs(b,v,_,D){let T=null,F=null;const Z=ns(v);switch(v){case ie.BYTE:case ie.ASCII:case ie.UNDEFINED:T=new Uint8Array(_),F=b.readUint8;break;case ie.SBYTE:T=new Int8Array(_),F=b.readInt8;break;case ie.SHORT:T=new Uint16Array(_),F=b.readUint16;break;case ie.SSHORT:T=new Int16Array(_),F=b.readInt16;break;case ie.LONG:case ie.IFD:T=new Uint32Array(_),F=b.readUint32;break;case ie.SLONG:T=new Int32Array(_),F=b.readInt32;break;case ie.LONG8:case ie.IFD8:T=new Array(_),F=b.readUint64;break;case ie.SLONG8:T=new Array(_),F=b.readInt64;break;case ie.RATIONAL:T=new Uint32Array(2*_),F=b.readUint32;break;case ie.SRATIONAL:T=new Int32Array(2*_),F=b.readInt32;break;case ie.FLOAT:T=new Float32Array(_),F=b.readFloat32;break;case ie.DOUBLE:T=new Float64Array(_),F=b.readFloat64;break;default:throw new RangeError(`Invalid field type: ${v}`)}if(v!==ie.RATIONAL&&v!==ie.SRATIONAL)for(let G=0;G<_;++G)T[G]=F.call(b,D+G*Z);else for(let G=0;G<_;G+=2)T[G]=F.call(b,D+G*Z),T[G+1]=F.call(b,D+(G*Z+4));return v===ie.ASCII?new TextDecoder("utf-8").decode(T):T}class _h{constructor(v,_,D){this.fileDirectory=v,this.geoKeyDirectory=_,this.nextIFDByteOffset=D}}class ko extends Error{constructor(v){super(`No image at index ${v}`),this.index=v}}class Ih{async readRasters(v={}){const{window:_,width:D,height:T}=v;let{resX:F,resY:Z,bbox:G}=v;const ne=await this.getImage();let $=ne;const W=await this.getImageCount(),ge=ne.getBoundingBox();if(_&&G)throw new Error('Both "bbox" and "window" passed.');if(D||T){if(_){const[Ie,xe]=ne.getOrigin(),[Qe,Pe]=ne.getResolution();G=[Ie+_[0]*Qe,xe+_[1]*Pe,Ie+_[2]*Qe,xe+_[3]*Pe]}const X=G||ge;if(D){if(F)throw new Error("Both width and resX passed");F=(X[2]-X[0])/D}if(T){if(Z)throw new Error("Both width and resY passed");Z=(X[3]-X[1])/T}}if(F||Z){const X=[];for(let Ie=0;Ie<W;++Ie){const xe=await this.getImage(Ie),{SubfileType:Qe,NewSubfileType:Pe}=xe.fileDirectory;(Ie===0||Qe===2||1&Pe)&&X.push(xe)}X.sort((Ie,xe)=>Ie.getWidth()-xe.getWidth());for(let Ie=0;Ie<X.length;++Ie){const xe=X[Ie],Qe=(ge[2]-ge[0])/xe.getWidth(),Pe=(ge[3]-ge[1])/xe.getHeight();if($=xe,F&&F>Qe||Z&&Z>Pe)break}}let se=_;if(G){const[X,Ie]=ne.getOrigin(),[xe,Qe]=$.getResolution(ne);se=[Math.round((G[0]-X)/xe),Math.round((G[1]-Ie)/Qe),Math.round((G[2]-X)/xe),Math.round((G[3]-Ie)/Qe)],se=[Math.min(se[0],se[2]),Math.min(se[1],se[3]),Math.max(se[0],se[2]),Math.max(se[1],se[3])]}return $.readRasters({...v,window:se})}}class Ta extends Ih{constructor(v,_,D,T,F={}){super(),this.source=v,this.littleEndian=_,this.bigTiff=D,this.firstIFDOffset=T,this.cache=F.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(v,_){const D=this.bigTiff?4048:1024;return new Xi((await this.source.fetch([{offset:v,length:_!==void 0?_:D}]))[0],v,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(v){const _=this.bigTiff?20:12,D=this.bigTiff?8:2;let T=await this.getSlice(v);const F=this.bigTiff?T.readUint64(v):T.readUint16(v),Z=F*_+(this.bigTiff?16:6);T.covers(v,Z)||(T=await this.getSlice(v,Z));const G={};let ne=v+(this.bigTiff?8:2);for(let ge=0;ge<F;ne+=_,++ge){const se=T.readUint16(ne),X=T.readUint16(ne+2),Ie=this.bigTiff?T.readUint64(ne+4):T.readUint32(ne+4);let xe,Qe;const Pe=ns(X),Oe=ne+(this.bigTiff?12:8);if(Pe*Ie<=(this.bigTiff?8:4))xe=vs(T,X,Ie,Oe);else{const Te=T.readOffset(Oe),Ke=ns(X)*Ie;T.covers(Te,Ke)?xe=vs(T,X,Ie,Te):xe=vs(await this.getSlice(Te,Ke),X,Ie,Te)}Qe=Ie===1&&J.indexOf(se)===-1&&X!==ie.RATIONAL&&X!==ie.SRATIONAL?xe[0]:xe,G[mn[se]]=Qe}const $=function(ge){const se=ge.GeoKeyDirectory;if(!se)return null;const X={};for(let Ie=4;Ie<=4*se[3];Ie+=4){const xe=Ci[se[Ie]],Qe=se[Ie+1]?mn[se[Ie+1]]:null,Pe=se[Ie+2],Oe=se[Ie+3];let Te=null;if(Qe){if(Te=ge[Qe],Te==null)throw new Error(`Could not get value of geoKey '${xe}'.`);typeof Te=="string"?Te=Te.substring(Oe,Oe+Pe-1):Te.subarray&&(Te=Te.subarray(Oe,Oe+Pe),Pe===1&&(Te=Te[0]))}else Te=Oe;X[xe]=Te}return X}(G),W=T.readOffset(v+D+_*F);return new _h(G,$,W)}async requestIFD(v){if(this.ifdRequests[v])return this.ifdRequests[v];if(v===0)return this.ifdRequests[v]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[v];if(!this.ifdRequests[v-1])try{this.ifdRequests[v-1]=this.requestIFD(v-1)}catch(_){throw _ instanceof ko?new ko(v):_}return this.ifdRequests[v]=(async()=>{const _=await this.ifdRequests[v-1];if(_.nextIFDByteOffset===0)throw new ko(v);return this.parseFileDirectoryAt(_.nextIFDByteOffset)})(),this.ifdRequests[v]}async getImage(v=0){const _=await this.requestIFD(v);return new dn(_.fileDirectory,_.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let v=0,_=!0;for(;_;)try{await this.requestIFD(v),++v}catch(D){if(!(D instanceof ko))throw D;_=!1}return v}async getGhostValues(){const v=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const _="GDAL_STRUCTURAL_METADATA_SIZE=";let D=await this.getSlice(v,130);if(_===vs(D,ie.ASCII,30,v)){const T=vs(D,ie.ASCII,130,v).split(`
`)[0],F=Number(T.split("=")[1].split(" ")[0])+T.length;F>130&&(D=await this.getSlice(v,F));const Z=vs(D,ie.ASCII,F,v);this.ghostValues={},Z.split(`
`).filter(G=>G.length>0).map(G=>G.split("=")).forEach(([G,ne])=>{this.ghostValues[G]=ne})}return this.ghostValues}static async fromSource(v,_,D){const T=(await v.fetch([{offset:0,length:1024}],D))[0],F=new Ys(T),Z=F.getUint16(0,0);let G;if(Z===18761)G=!0;else{if(Z!==19789)throw new TypeError("Invalid byte order value.");G=!1}const ne=F.getUint16(2,G);let $;if(ne===42)$=!1;else{if(ne!==43)throw new TypeError("Invalid magic number.");if($=!0,F.getUint16(4,G)!==8)throw new Error("Unsupported offset byte-size.")}const W=$?F.getUint64(8,G):F.getUint32(4,G);return new Ta(v,G,$,W,_)}close(){return typeof this.source.close=="function"&&this.source.close()}}var Ks={exports:{}};(function(b,v){var _=function(){var D={},T=Math.PI/180,F=180/Math.PI,Z=6378137,G=20037508342789244e-9;function ne(W){return Number(W)===W&&W%1!=0}function $(W){if(W=W||{},this.size=W.size||256,this.expansion=W.antimeridian===!0?2:1,!D[this.size]){var ge=this.size,se=D[this.size]={};se.Bc=[],se.Cc=[],se.zc=[],se.Ac=[];for(var X=0;X<30;X++)se.Bc.push(ge/360),se.Cc.push(ge/(2*Math.PI)),se.zc.push(ge/2),se.Ac.push(ge),ge*=2}this.Bc=D[this.size].Bc,this.Cc=D[this.size].Cc,this.zc=D[this.size].zc,this.Ac=D[this.size].Ac}return $.prototype.px=function(W,ge){if(ne(ge)){var se=this.size*Math.pow(2,ge),X=se/2,Ie=se/360,xe=se/(2*Math.PI),Qe=se,Pe=Math.min(Math.max(Math.sin(T*W[1]),-.9999),.9999),Oe=X+W[0]*Ie,Te=X+.5*Math.log((1+Pe)/(1-Pe))*-xe;return Oe>Qe*this.expansion&&(Oe=Qe*this.expansion),Te>Qe&&(Te=Qe),[Oe,Te]}return X=this.zc[ge],Pe=Math.min(Math.max(Math.sin(T*W[1]),-.9999),.9999),Oe=Math.round(X+W[0]*this.Bc[ge]),Te=Math.round(X+.5*Math.log((1+Pe)/(1-Pe))*-this.Cc[ge]),Oe>this.Ac[ge]*this.expansion&&(Oe=this.Ac[ge]*this.expansion),Te>this.Ac[ge]&&(Te=this.Ac[ge]),[Oe,Te]},$.prototype.ll=function(W,ge){if(ne(ge)){var se=this.size*Math.pow(2,ge),X=se/360,Ie=se/(2*Math.PI),xe=se/2,Qe=(W[1]-xe)/-Ie;return[(W[0]-xe)/X,F*(2*Math.atan(Math.exp(Qe))-.5*Math.PI)]}return Qe=(W[1]-this.zc[ge])/-this.Cc[ge],[(W[0]-this.zc[ge])/this.Bc[ge],F*(2*Math.atan(Math.exp(Qe))-.5*Math.PI)]},$.prototype.bbox=function(W,ge,se,X,Ie){X&&(ge=Math.pow(2,se)-1-ge);var xe=[W*this.size,(+ge+1)*this.size],Qe=[(+W+1)*this.size,ge*this.size],Pe=this.ll(xe,se).concat(this.ll(Qe,se));return Ie==="900913"?this.convert(Pe,"900913"):Pe},$.prototype.xyz=function(W,ge,se,X){X==="900913"&&(W=this.convert(W,"WGS84"));var Ie=[W[0],W[1]],xe=[W[2],W[3]],Qe=this.px(Ie,ge),Pe=this.px(xe,ge),Oe=[Math.floor(Qe[0]/this.size),Math.floor((Pe[0]-1)/this.size)],Te=[Math.floor(Pe[1]/this.size),Math.floor((Qe[1]-1)/this.size)],Ke={minX:Math.min.apply(Math,Oe)<0?0:Math.min.apply(Math,Oe),minY:Math.min.apply(Math,Te)<0?0:Math.min.apply(Math,Te),maxX:Math.max.apply(Math,Oe),maxY:Math.max.apply(Math,Te)};if(se){var te={minY:Math.pow(2,ge)-1-Ke.maxY,maxY:Math.pow(2,ge)-1-Ke.minY};Ke.minY=te.minY,Ke.maxY=te.maxY}return Ke},$.prototype.convert=function(W,ge){return ge==="900913"?this.forward(W.slice(0,2)).concat(this.forward(W.slice(2,4))):this.inverse(W.slice(0,2)).concat(this.inverse(W.slice(2,4)))},$.prototype.forward=function(W){var ge=[Z*W[0]*T,Z*Math.log(Math.tan(.25*Math.PI+.5*W[1]*T))];return ge[0]>G&&(ge[0]=G),ge[0]<-G&&(ge[0]=-G),ge[1]>G&&(ge[1]=G),ge[1]<-G&&(ge[1]=-G),ge},$.prototype.inverse=function(W){return[W[0]*F/Z,(.5*Math.PI-2*Math.atan(Math.exp(-W[1]/Z)))*F]},$}();b.exports=_})(Ks);const zr=256,Wr=4007501668557849e-8,bs=new(bt(Ks.exports))({size:zr,antimeridian:!0}),wl=({x:b,y:v,z:_})=>bs.bbox(b,v,_,!1,"900913"),$s=36e5;let Cl;const xs=new ka({maxSize:16,maxAge:$s}),yu=new ka({maxSize:16,maxAge:$s}),wc=new ka({maxSize:1024,maxAge:$s}),Bl=b=>{Cl===void 0&&(Cl=new vc);const v=D=>{const T=xs.get(D);if(T)return T;{const F=async function(Z,G={},ne){return Ta.fromSource(xc(Z,G),ne)}(D);return xs.set(D,F),F}},_=async()=>{var F;const D=yu.get(b);if(D)return D;{const Z=await v(b),G=await Z.getImage(),ne=G.getGDALMetadata(0),$=G.fileDirectory,W=(F=G.fileDirectory)==null?void 0:F.Artist,ge=(([xe,Qe,Pe,Oe])=>[...bs.inverse([xe,Qe]),...bs.inverse([Pe,Oe])])(G.getBoundingBox()),se=[],X=await Z.getImageCount();for(let xe=0;xe<X;xe++){const Qe=await Z.getImage(xe),Pe=(T=Qe.getResolution(G)[0],Math.log2(Wr/(zr*T))),Oe=!!(1&Qe.fileDirectory.NewSubfileType),Te=!!(4&Qe.fileDirectory.NewSubfileType);se.push({zoom:Pe,isOverview:Oe,isMask:Te})}const Ie={offset:(ne==null?void 0:ne.OFFSET)!==void 0?parseFloat(ne.OFFSET):0,scale:(ne==null?void 0:ne.SCALE)!==void 0?parseFloat(ne.SCALE):1,noData:G.getGDALNoData()??void 0,photometricInterpretation:$==null?void 0:$.PhotometricInterpretation,bitsPerSample:$==null?void 0:$.BitsPerSample,colorMap:$==null?void 0:$.ColorMap,artist:W,bbox:ge,images:se};return yu.set(b,Ie),Ie}var T};return{getTilejson:async D=>{const{artist:T,images:F,bbox:Z}=await _(),G=F.map(ne=>ne.zoom);return{tilejson:"2.2.0",tiles:[D+"/{z}/{x}/{y}"],attribution:T,minzoom:Math.round(Math.min(...G)),maxzoom:Math.round(Math.max(...G)),bounds:Z}},getMetadata:_,getRawTile:async({z:D,x:T,y:F},Z=256)=>{const G=`${b}/${Z}/${D}/${T}/${F}`,ne=wc.get(G);if(ne)return ne;{const $=await v(b),{noData:W}=await _(),ge=W===void 0||isNaN(W)?1/0:W,se=$.readRasters({bbox:wl({x:T,y:F,z:D}),width:Z,height:Z,interleave:!1,resampleMethod:"nearest",pool:Cl,fillValue:ge});return wc.set(G,se),se}}}};function El(b,v){return b==null||v==null?NaN:b<v?-1:b>v?1:b>=v?0:NaN}function vh(b,v){return b==null||v==null?NaN:v<b?-1:v>b?1:v>=b?0:NaN}function Cc(b){let v,_,D;function T(F,Z,G=0,ne=F.length){if(G<ne){if(v(Z,Z)!==0)return ne;do{const $=G+ne>>>1;_(F[$],Z)<0?G=$+1:ne=$}while(G<ne)}return G}return b.length!==2?(v=El,_=(F,Z)=>El(b(F),Z),D=(F,Z)=>b(F)-Z):(v=b===El||b===vh?b:Mo,_=b,D=b),{left:T,center:function(F,Z,G=0,ne=F.length){const $=T(F,Z,G,ne-1);return $>G&&D(F[$-1],Z)>-D(F[$],Z)?$-1:$},right:function(F,Z,G=0,ne=F.length){if(G<ne){if(v(Z,Z)!==0)return ne;do{const $=G+ne>>>1;_(F[$],Z)<=0?G=$+1:ne=$}while(G<ne)}return G}}}function Mo(){return 0}const Ql=Cc(El).right;Cc(function(b){return b===null?NaN:+b}).center;const Sl=Math.sqrt(50),Bc=Math.sqrt(10),Ec=Math.sqrt(2);function Mn(b,v,_){const D=(v-b)/Math.max(0,_),T=Math.floor(Math.log10(D)),F=D/Math.pow(10,T),Z=F>=Sl?10:F>=Bc?5:F>=Ec?2:1;let G,ne,$;return T<0?($=Math.pow(10,-T)/Z,G=Math.round(b*$),ne=Math.round(v*$),G/$<b&&++G,ne/$>v&&--ne,$=-$):($=Math.pow(10,T)*Z,G=Math.round(b/$),ne=Math.round(v/$),G*$<b&&++G,ne*$>v&&--ne),ne<G&&.5<=_&&_<2?Mn(b,v,2*_):[G,ne,$]}function Qc(b,v,_){return Mn(b=+b,v=+v,_=+_)[2]}function Dl(b,v){switch(arguments.length){case 0:break;case 1:this.range(b);break;default:this.range(v).domain(b)}return this}function Pa(b,v,_){b.prototype=v.prototype=_,_.constructor=b}function Ra(b,v){var _=Object.create(b.prototype);for(var D in v)_[D]=v[D];return _}function Ni(){}var as=.7,kl=1/as,ta="\\s*([+-]?\\d+)\\s*",To="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bh=/^#([0-9a-f]{3,8})$/,_u=new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`),Sc=new RegExp(`^rgb\\(${ia},${ia},${ia}\\)$`),Iu=new RegExp(`^rgba\\(${ta},${ta},${ta},${To}\\)$`),vu=new RegExp(`^rgba\\(${ia},${ia},${ia},${To}\\)$`),bu=new RegExp(`^hsl\\(${To},${ia},${ia}\\)$`),xu=new RegExp(`^hsla\\(${To},${ia},${ia},${To}\\)$`),ss={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Dc(){return this.rgb().formatHex()}function wu(){return this.rgb().formatRgb()}function Zs(b){var v,_;return b=(b+"").trim().toLowerCase(),(v=bh.exec(b))?(_=v[1].length,v=parseInt(v[1],16),_===6?Ws(v):_===3?new vn(v>>8&15|v>>4&240,v>>4&15|240&v,(15&v)<<4|15&v,1):_===8?ws(v>>24&255,v>>16&255,v>>8&255,(255&v)/255):_===4?ws(v>>12&15|v>>8&240,v>>8&15|v>>4&240,v>>4&15|240&v,((15&v)<<4|15&v)/255):null):(v=_u.exec(b))?new vn(v[1],v[2],v[3],1):(v=Sc.exec(b))?new vn(255*v[1]/100,255*v[2]/100,255*v[3]/100,1):(v=Iu.exec(b))?ws(v[1],v[2],v[3],v[4]):(v=vu.exec(b))?ws(255*v[1]/100,255*v[2]/100,255*v[3]/100,v[4]):(v=bu.exec(b))?Ro(v[1],v[2]/100,v[3]/100,1):(v=xu.exec(b))?Ro(v[1],v[2]/100,v[3]/100,v[4]):ss.hasOwnProperty(b)?Ws(ss[b]):b==="transparent"?new vn(NaN,NaN,NaN,0):null}function Ws(b){return new vn(b>>16&255,b>>8&255,255&b,1)}function ws(b,v,_,D){return D<=0&&(b=v=_=NaN),new vn(b,v,_,D)}function kc(b,v,_,D){return arguments.length===1?((T=b)instanceof Ni||(T=Zs(T)),T?new vn((T=T.rgb()).r,T.g,T.b,T.opacity):new vn):new vn(b,v,_,D??1);var T}function vn(b,v,_,D){this.r=+b,this.g=+v,this.b=+_,this.opacity=+D}function Mc(){return`#${os(this.r)}${os(this.g)}${os(this.b)}`}function Tc(){const b=Po(this.opacity);return`${b===1?"rgb(":"rgba("}${La(this.r)}, ${La(this.g)}, ${La(this.b)}${b===1?")":`, ${b})`}`}function Po(b){return isNaN(b)?1:Math.max(0,Math.min(1,b))}function La(b){return Math.max(0,Math.min(255,Math.round(b)||0))}function os(b){return((b=La(b))<16?"0":"")+b.toString(16)}function Ro(b,v,_,D){return D<=0?b=v=_=NaN:_<=0||_>=1?b=v=NaN:v<=0&&(b=NaN),new Tn(b,v,_,D)}function Ia(b){if(b instanceof Tn)return new Tn(b.h,b.s,b.l,b.opacity);if(b instanceof Ni||(b=Zs(b)),!b)return new Tn;if(b instanceof Tn)return b;var v=(b=b.rgb()).r/255,_=b.g/255,D=b.b/255,T=Math.min(v,_,D),F=Math.max(v,_,D),Z=NaN,G=F-T,ne=(F+T)/2;return G?(Z=v===F?(_-D)/G+6*(_<D):_===F?(D-v)/G+2:(v-_)/G+4,G/=ne<.5?F+T:2-F-T,Z*=60):G=ne>0&&ne<1?0:Z,new Tn(Z,G,ne,b.opacity)}function Tn(b,v,_,D){this.h=+b,this.s=+v,this.l=+_,this.opacity=+D}function Ml(b){return(b=(b||0)%360)<0?b+360:b}function Xs(b){return Math.max(0,Math.min(1,b||0))}function Tl(b,v,_){return 255*(b<60?v+(_-v)*b/60:b<180?_:b<240?v+(_-v)*(240-b)/60:v)}Pa(Ni,Zs,{copy(b){return Object.assign(new this.constructor,this,b)},displayable(){return this.rgb().displayable()},hex:Dc,formatHex:Dc,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ia(this).formatHsl()},formatRgb:wu,toString:wu}),Pa(vn,kc,Ra(Ni,{brighter(b){return b=b==null?kl:Math.pow(kl,b),new vn(this.r*b,this.g*b,this.b*b,this.opacity)},darker(b){return b=b==null?as:Math.pow(as,b),new vn(this.r*b,this.g*b,this.b*b,this.opacity)},rgb(){return this},clamp(){return new vn(La(this.r),La(this.g),La(this.b),Po(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mc,formatHex:Mc,formatHex8:function(){return`#${os(this.r)}${os(this.g)}${os(this.b)}${os(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Tc,toString:Tc})),Pa(Tn,function(b,v,_,D){return arguments.length===1?Ia(b):new Tn(b,v,_,D??1)},Ra(Ni,{brighter(b){return b=b==null?kl:Math.pow(kl,b),new Tn(this.h,this.s,this.l*b,this.opacity)},darker(b){return b=b==null?as:Math.pow(as,b),new Tn(this.h,this.s,this.l*b,this.opacity)},rgb(){var b=this.h%360+360*(this.h<0),v=isNaN(b)||isNaN(this.s)?0:this.s,_=this.l,D=_+(_<.5?_:1-_)*v,T=2*_-D;return new vn(Tl(b>=240?b-240:b+120,T,D),Tl(b,T,D),Tl(b<120?b+240:b-120,T,D),this.opacity)},clamp(){return new Tn(Ml(this.h),Xs(this.s),Xs(this.l),Po(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const b=Po(this.opacity);return`${b===1?"hsl(":"hsla("}${Ml(this.h)}, ${100*Xs(this.s)}%, ${100*Xs(this.l)}%${b===1?")":`, ${b})`}`}}));var Cs=b=>()=>b;function Bs(b){return(b=+b)==1?Pl:function(v,_){return _-v?function(D,T,F){return D=Math.pow(D,F),T=Math.pow(T,F)-D,F=1/F,function(Z){return Math.pow(D+Z*T,F)}}(v,_,b):Cs(isNaN(v)?_:v)}}function Pl(b,v){var _=v-b;return _?function(D,T){return function(F){return D+F*T}}(b,_):Cs(isNaN(b)?v:b)}var Cu=function b(v){var _=Bs(v);function D(T,F){var Z=_((T=kc(T)).r,(F=kc(F)).r),G=_(T.g,F.g),ne=_(T.b,F.b),$=Pl(T.opacity,F.opacity);return function(W){return T.r=Z(W),T.g=G(W),T.b=ne(W),T.opacity=$(W),T+""}}return D.gamma=b,D}(1);function xh(b,v){v||(v=[]);var _,D=b?Math.min(v.length,b.length):0,T=v.slice();return function(F){for(_=0;_<D;++_)T[_]=b[_]*(1-F)+v[_]*F;return T}}function Tr(b,v){var _,D=v?v.length:0,T=b?Math.min(D,b.length):0,F=new Array(T),Z=new Array(D);for(_=0;_<T;++_)F[_]=Qs(b[_],v[_]);for(;_<D;++_)Z[_]=v[_];return function(G){for(_=0;_<T;++_)Z[_]=F[_](G);return Z}}function wh(b,v){var _=new Date;return b=+b,v=+v,function(D){return _.setTime(b*(1-D)+v*D),_}}function Si(b,v){return b=+b,v=+v,function(_){return b*(1-_)+v*_}}function Pc(b,v){var _,D={},T={};for(_ in b!==null&&typeof b=="object"||(b={}),v!==null&&typeof v=="object"||(v={}),v)_ in b?D[_]=Qs(b[_],v[_]):T[_]=v[_];return function(F){for(_ in D)T[_]=D[_](F);return T}}var er=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ji=new RegExp(er.source,"g");function Es(b,v){var _,D,T,F=er.lastIndex=ji.lastIndex=0,Z=-1,G=[],ne=[];for(b+="",v+="";(_=er.exec(b))&&(D=ji.exec(v));)(T=D.index)>F&&(T=v.slice(F,T),G[Z]?G[Z]+=T:G[++Z]=T),(_=_[0])===(D=D[0])?G[Z]?G[Z]+=D:G[++Z]=D:(G[++Z]=null,ne.push({i:Z,x:Si(_,D)})),F=ji.lastIndex;return F<v.length&&(T=v.slice(F),G[Z]?G[Z]+=T:G[++Z]=T),G.length<2?ne[0]?function($){return function(W){return $(W)+""}}(ne[0].x):function($){return function(){return $}}(v):(v=ne.length,function($){for(var W,ge=0;ge<v;++ge)G[(W=ne[ge]).i]=W.x($);return G.join("")})}function Qs(b,v){var _,D,T=typeof v;return v==null||T==="boolean"?Cs(v):(T==="number"?Si:T==="string"?(_=Zs(v))?(v=_,Cu):Es:v instanceof Zs?Cu:v instanceof Date?wh:(D=v,!ArrayBuffer.isView(D)||D instanceof DataView?Array.isArray(v)?Tr:typeof v.valueOf!="function"&&typeof v.toString!="function"||isNaN(v)?Pc:Si:xh))(b,v)}function Rl(b,v){return b=+b,v=+v,function(_){return Math.round(b*(1-_)+v*_)}}function Ss(b){return+b}var Ds=[0,1];function nn(b){return b}function Ll(b,v){return(v-=b=+b)?function(D){return(D-b)/v}:(_=isNaN(v)?NaN:.5,function(){return _});var _}function Rc(b,v,_){var D=b[0],T=b[1],F=v[0],Z=v[1];return T<D?(D=Ll(T,D),F=_(Z,F)):(D=Ll(D,T),F=_(F,Z)),function(G){return F(D(G))}}function Fl(b,v,_){var D=Math.min(b.length,v.length)-1,T=new Array(D),F=new Array(D),Z=-1;for(b[D]<b[0]&&(b=b.slice().reverse(),v=v.slice().reverse());++Z<D;)T[Z]=Ll(b[Z],b[Z+1]),F[Z]=_(v[Z],v[Z+1]);return function(G){var ne=Ql(b,G,1,D)-1;return F[ne](T[ne](G))}}function ks(){var b,v,_,D,T,F,Z=Ds,G=Ds,ne=Qs,$=nn;function W(){var se,X,Ie,xe=Math.min(Z.length,G.length);return $!==nn&&(se=Z[0],X=Z[xe-1],se>X&&(Ie=se,se=X,X=Ie),$=function(Qe){return Math.max(se,Math.min(X,Qe))}),D=xe>2?Fl:Rc,T=F=null,ge}function ge(se){return se==null||isNaN(se=+se)?_:(T||(T=D(Z.map(b),G,ne)))(b($(se)))}return ge.invert=function(se){return $(v((F||(F=D(G,Z.map(b),Si)))(se)))},ge.domain=function(se){return arguments.length?(Z=Array.from(se,Ss),W()):Z.slice()},ge.range=function(se){return arguments.length?(G=Array.from(se),W()):G.slice()},ge.rangeRound=function(se){return G=Array.from(se),ne=Rl,W()},ge.clamp=function(se){return arguments.length?($=!!se||nn,W()):$!==nn},ge.interpolate=function(se){return arguments.length?(ne=se,W()):ne},ge.unknown=function(se){return arguments.length?(_=se,ge):_},function(se,X){return b=se,v=X,W()}}function Ms(b,v){if((_=(b=v?b.toExponential(v-1):b.toExponential()).indexOf("e"))<0)return null;var _,D=b.slice(0,_);return[D.length>1?D[0]+D.slice(2):D,+b.slice(_+1)]}function va(b){return(b=Ms(Math.abs(b)))?b[1]:NaN}var Ts,Lo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eo(b){if(!(v=Lo.exec(b)))throw new Error("invalid format: "+b);var v;return new ba({fill:v[1],align:v[2],sign:v[3],symbol:v[4],zero:v[5],width:v[6],comma:v[7],precision:v[8]&&v[8].slice(1),trim:v[9],type:v[10]})}function ba(b){this.fill=b.fill===void 0?" ":b.fill+"",this.align=b.align===void 0?">":b.align+"",this.sign=b.sign===void 0?"-":b.sign+"",this.symbol=b.symbol===void 0?"":b.symbol+"",this.zero=!!b.zero,this.width=b.width===void 0?void 0:+b.width,this.comma=!!b.comma,this.precision=b.precision===void 0?void 0:+b.precision,this.trim=!!b.trim,this.type=b.type===void 0?"":b.type+""}function Ps(b,v){var _=Ms(b,v);if(!_)return b+"";var D=_[0],T=_[1];return T<0?"0."+new Array(-T).join("0")+D:D.length>T+1?D.slice(0,T+1)+"."+D.slice(T+1):D+new Array(T-D.length+2).join("0")}eo.prototype=ba.prototype,ba.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Lc={"%":(b,v)=>(100*b).toFixed(v),b:b=>Math.round(b).toString(2),c:b=>b+"",d:function(b){return Math.abs(b=Math.round(b))>=1e21?b.toLocaleString("en").replace(/,/g,""):b.toString(10)},e:(b,v)=>b.toExponential(v),f:(b,v)=>b.toFixed(v),g:(b,v)=>b.toPrecision(v),o:b=>Math.round(b).toString(8),p:(b,v)=>Ps(100*b,v),r:Ps,s:function(b,v){var _=Ms(b,v);if(!_)return b+"";var D=_[0],T=_[1],F=T-(Ts=3*Math.max(-8,Math.min(8,Math.floor(T/3))))+1,Z=D.length;return F===Z?D:F>Z?D+new Array(F-Z+1).join("0"):F>0?D.slice(0,F)+"."+D.slice(F):"0."+new Array(1-F).join("0")+Ms(b,Math.max(0,v+F-1))[0]},X:b=>Math.round(b).toString(16).toUpperCase(),x:b=>Math.round(b).toString(16)};function zl(b){return b}var Ui,Fo,Bu,Fc=Array.prototype.map,to=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Eu(b){var v,_,D=b.grouping===void 0||b.thousands===void 0?zl:(v=Fc.call(b.grouping,Number),_=b.thousands+"",function(se,X){for(var Ie=se.length,xe=[],Qe=0,Pe=v[0],Oe=0;Ie>0&&Pe>0&&(Oe+Pe+1>X&&(Pe=Math.max(1,X-Oe)),xe.push(se.substring(Ie-=Pe,Ie+Pe)),!((Oe+=Pe+1)>X));)Pe=v[Qe=(Qe+1)%v.length];return xe.reverse().join(_)}),T=b.currency===void 0?"":b.currency[0]+"",F=b.currency===void 0?"":b.currency[1]+"",Z=b.decimal===void 0?".":b.decimal+"",G=b.numerals===void 0?zl:function(se){return function(X){return X.replace(/[0-9]/g,function(Ie){return se[+Ie]})}}(Fc.call(b.numerals,String)),ne=b.percent===void 0?"%":b.percent+"",$=b.minus===void 0?"":b.minus+"",W=b.nan===void 0?"NaN":b.nan+"";function ge(se){var X=(se=eo(se)).fill,Ie=se.align,xe=se.sign,Qe=se.symbol,Pe=se.zero,Oe=se.width,Te=se.comma,Ke=se.precision,te=se.trim,N=se.type;N==="n"?(Te=!0,N="g"):Lc[N]||(Ke===void 0&&(Ke=12),te=!0,N="g"),(Pe||X==="0"&&Ie==="=")&&(Pe=!0,X="0",Ie="=");var he=Qe==="$"?T:Qe==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",le=Qe==="$"?F:/[%p]/.test(N)?ne:"",ue=Lc[N],de=/[defgprs%]/.test(N);function Me(De){var Fe,We,rt,at=he,yt=le;if(N==="c")yt=ue(De)+yt,De="";else{var Tt=(De=+De)<0||1/De<0;if(De=isNaN(De)?W:ue(Math.abs(De),Ke),te&&(De=function(dt){e:for(var $t,St=dt.length,si=1,Dt=-1;si<St;++si)switch(dt[si]){case".":Dt=$t=si;break;case"0":Dt===0&&(Dt=si),$t=si;break;default:if(!+dt[si])break e;Dt>0&&(Dt=0)}return Dt>0?dt.slice(0,Dt)+dt.slice($t+1):dt}(De)),Tt&&+De==0&&xe!=="+"&&(Tt=!1),at=(Tt?xe==="("?xe:$:xe==="-"||xe==="("?"":xe)+at,yt=(N==="s"?to[8+Ts/3]:"")+yt+(Tt&&xe==="("?")":""),de){for(Fe=-1,We=De.length;++Fe<We;)if(48>(rt=De.charCodeAt(Fe))||rt>57){yt=(rt===46?Z+De.slice(Fe+1):De.slice(Fe))+yt,De=De.slice(0,Fe);break}}}Te&&!Pe&&(De=D(De,1/0));var it=at.length+De.length+yt.length,$e=it<Oe?new Array(Oe-it+1).join(X):"";switch(Te&&Pe&&(De=D($e+De,$e.length?Oe-yt.length:1/0),$e=""),Ie){case"<":De=at+De+yt+$e;break;case"=":De=at+$e+De+yt;break;case"^":De=$e.slice(0,it=$e.length>>1)+at+De+yt+$e.slice(it);break;default:De=$e+at+De+yt}return G(De)}return Ke=Ke===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,Ke)):Math.max(0,Math.min(20,Ke)),Me.toString=function(){return se+""},Me}return{format:ge,formatPrefix:function(se,X){var Ie=ge(((se=eo(se)).type="f",se)),xe=3*Math.max(-8,Math.min(8,Math.floor(va(X)/3))),Qe=Math.pow(10,-xe),Pe=to[8+xe/3];return function(Oe){return Ie(Qe*Oe)+Pe}}}}function Qu(b,v,_,D){var T,F=function(G,ne,$){$=+$;const W=(ne=+ne)<(G=+G),ge=W?Qc(ne,G,$):Qc(G,ne,$);return(W?-1:1)*(ge<0?1/-ge:ge)}(b,v,_);switch((D=eo(D??",f")).type){case"s":var Z=Math.max(Math.abs(b),Math.abs(v));return D.precision!=null||isNaN(T=function(G,ne){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(va(ne)/3)))-va(Math.abs(G)))}(F,Z))||(D.precision=T),Bu(D,Z);case"":case"e":case"g":case"p":case"r":D.precision!=null||isNaN(T=function(G,ne){return G=Math.abs(G),ne=Math.abs(ne)-G,Math.max(0,va(ne)-va(G))+1}(F,Math.max(Math.abs(b),Math.abs(v))))||(D.precision=T-(D.type==="e"));break;case"f":case"%":D.precision!=null||isNaN(T=function(G){return Math.max(0,-va(Math.abs(G)))}(F))||(D.precision=T-2*(D.type==="%"))}return Fo(D)}function zo(b){var v=b.domain;return b.ticks=function(_){var D=v();return function(T,F,Z){if(!((Z=+Z)>0))return[];if((T=+T)==(F=+F))return[T];const G=F<T,[ne,$,W]=G?Mn(F,T,Z):Mn(T,F,Z);if(!($>=ne))return[];const ge=$-ne+1,se=new Array(ge);if(G)if(W<0)for(let X=0;X<ge;++X)se[X]=($-X)/-W;else for(let X=0;X<ge;++X)se[X]=($-X)*W;else if(W<0)for(let X=0;X<ge;++X)se[X]=(ne+X)/-W;else for(let X=0;X<ge;++X)se[X]=(ne+X)*W;return se}(D[0],D[D.length-1],_??10)},b.tickFormat=function(_,D){var T=v();return Qu(T[0],T[T.length-1],_??10,D)},b.nice=function(_){_==null&&(_=10);var D,T,F=v(),Z=0,G=F.length-1,ne=F[Z],$=F[G],W=10;for($<ne&&(T=ne,ne=$,$=T,T=Z,Z=G,G=T);W-- >0;){if((T=Qc(ne,$,_))===D)return F[Z]=ne,F[G]=$,v(F);if(T>0)ne=Math.floor(ne/T)*T,$=Math.ceil($/T)*T;else{if(!(T<0))break;ne=Math.ceil(ne*T)/T,$=Math.floor($*T)/T}D=T}return b},b}function Su(){var b=ks()(nn,nn);return b.copy=function(){return v=b,Su().domain(v.domain()).range(v.range()).interpolate(v.interpolate()).clamp(v.clamp()).unknown(v.unknown());var v},Dl.apply(b,arguments),zo(b)}function Go(){var b,v=[.5],_=[0,1],D=1;function T(F){return F!=null&&F<=F?_[Ql(v,F,0,D)]:b}return T.domain=function(F){return arguments.length?(v=Array.from(F),D=Math.min(v.length,_.length-1),T):v.slice()},T.range=function(F){return arguments.length?(_=Array.from(F),D=Math.min(v.length,_.length-1),T):_.slice()},T.invertExtent=function(F){var Z=_.indexOf(F);return[v[Z-1],v[Z]]},T.unknown=function(F){return arguments.length?(b=F,T):b},T.copy=function(){return Go().domain(v).range(_).unknown(b)},Dl.apply(T,arguments)}Ui=Eu({thousands:",",grouping:[3],currency:["$",""]}),Fo=Ui.format,Bu=Ui.formatPrefix;const io={BrewerYlGn3:["#f7fcb9","#addd8e","#31a354"],BrewerYlGn4:["#ffffcc","#c2e699","#78c679","#238443"],BrewerYlGn5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],BrewerYlGn6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],BrewerYlGn7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],BrewerYlGnBu3:["#edf8b1","#7fcdbb","#2c7fb8"],BrewerYlGnBu4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],BrewerYlGnBu5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],BrewerGnBu3:["#e0f3db","#a8ddb5","#43a2ca"],BrewerGnBu4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],BrewerGnBu5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],BrewerBuGn3:["#e5f5f9","#99d8c9","#2ca25f"],BrewerBuGn4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],BrewerBuGn5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],BrewerPuBuGn3:["#ece2f0","#a6bddb","#1c9099"],BrewerPuBuGn4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],BrewerPuBuGn5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],BrewerPuBu3:["#ece7f2","#a6bddb","#2b8cbe"],BrewerPuBu4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],BrewerPuBu5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BrewerBuPu3:["#e0ecf4","#9ebcda","#8856a7"],BrewerBuPu4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],BrewerBuPu5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],BrewerBuPu6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],BrewerBuPu7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],BrewerRdPu3:["#fde0dd","#fa9fb5","#c51b8a"],BrewerRdPu4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],BrewerRdPu5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],BrewerRdPu6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],BrewerRdPu7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],BrewerPuRd3:["#e7e1ef","#c994c7","#dd1c77"],BrewerPuRd4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],BrewerPuRd5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],BrewerPuRd6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],BrewerPuRd7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],BrewerOrRd3:["#fee8c8","#fdbb84","#e34a33"],BrewerOrRd4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],BrewerOrRd5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],BrewerOrRd6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],BrewerOrRd7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],BrewerYlOrRd3:["#ffeda0","#feb24c","#f03b20"],BrewerYlOrRd4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],BrewerYlOrRd5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],BrewerYlOrBr3:["#fff7bc","#fec44f","#d95f0e"],BrewerYlOrBr4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],BrewerYlOrBr5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],BrewerYlOrBr6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],BrewerYlOrBr7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],BrewerPurples3:["#efedf5","#bcbddc","#756bb1"],BrewerPurples4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],BrewerPurples5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],BrewerPurples6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],BrewerPurples7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],BrewerBlues3:["#deebf7","#9ecae1","#3182bd"],BrewerBlues4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],BrewerBlues5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],BrewerBlues6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],BrewerBlues7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],BrewerGreens3:["#e5f5e0","#a1d99b","#31a354"],BrewerGreens4:["#edf8e9","#bae4b3","#74c476","#238b45"],BrewerGreens5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],BrewerGreens6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],BrewerGreens7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],BrewerOranges3:["#fee6ce","#fdae6b","#e6550d"],BrewerOranges4:["#feedde","#fdbe85","#fd8d3c","#d94701"],BrewerOranges5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],BrewerOranges6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],BrewerOranges7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BrewerReds3:["#fee0d2","#fc9272","#de2d26"],BrewerReds4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],BrewerReds5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],BrewerReds6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],BrewerReds7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],BrewerGreys3:["#f0f0f0","#bdbdbd","#636363"],BrewerGreys4:["#f7f7f7","#cccccc","#969696","#525252"],BrewerGreys5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],BrewerGreys6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],BrewerGreys7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],BrewerPuOr3:["#f1a340","#f7f7f7","#998ec3"],BrewerPuOr4:["#e66101","#fdb863","#b2abd2","#5e3c99"],BrewerPuOr5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],BrewerPuOr6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],BrewerPuOr7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],BrewerPuOr8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerPuOr11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerBrBG3:["#d8b365","#f5f5f5","#5ab4ac"],BrewerBrBG4:["#a6611a","#dfc27d","#80cdc1","#018571"],BrewerBrBG5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],BrewerBrBG6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerBrBG11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerPRGn3:["#af8dc3","#f7f7f7","#7fbf7b"],BrewerPRGn4:["#7b3294","#c2a5cf","#a6dba0","#008837"],BrewerPRGn5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],BrewerPRGn6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPRGn11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPiYG3:["#e9a3c9","#f7f7f7","#a1d76a"],BrewerPiYG4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],BrewerPiYG5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],BrewerPiYG6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerPiYG11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerRdBu3:["#ef8a62","#f7f7f7","#67a9cf"],BrewerRdBu4:["#ca0020","#f4a582","#92c5de","#0571b0"],BrewerRdBu5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],BrewerRdBu6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdBu11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdGy3:["#ef8a62","#ffffff","#999999"],BrewerRdGy4:["#ca0020","#f4a582","#bababa","#404040"],BrewerRdGy5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],BrewerRdGy6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdGy11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdYlBu3:["#fc8d59","#ffffbf","#91bfdb"],BrewerRdYlBu4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],BrewerRdYlBu5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],BrewerRdYlBu6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerRdYlBu11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerSpectral3:["#fc8d59","#ffffbf","#99d594"],BrewerSpectral4:["#d7191c","#fdae61","#abdda4","#2b83ba"],BrewerSpectral5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],BrewerSpectral6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],BrewerSpectral7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],BrewerSpectral8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerSpectral11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerRdYlGn3:["#fc8d59","#ffffbf","#91cf60"],BrewerRdYlGn4:["#d7191c","#fdae61","#a6d96a","#1a9641"],BrewerRdYlGn5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],BrewerRdYlGn6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerRdYlGn11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerAccent3:["#7fc97f","#beaed4","#fdc086"],BrewerAccent4:["#7fc97f","#beaed4","#fdc086","#ffff99"],BrewerAccent5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],BrewerAccent6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],BrewerAccent7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],BrewerAccent8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],BrewerDark23:["#1b9e77","#d95f02","#7570b3"],BrewerDark24:["#1b9e77","#d95f02","#7570b3","#e7298a"],BrewerDark25:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],BrewerDark26:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],BrewerDark27:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],BrewerDark28:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],BrewerPaired3:["#a6cee3","#1f78b4","#b2df8a"],BrewerPaired4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],BrewerPaired5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],BrewerPaired6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],BrewerPaired7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],BrewerPaired8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],BrewerPaired9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],BrewerPaired10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],BrewerPaired11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],BrewerPaired12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],BrewerPastel13:["#fbb4ae","#b3cde3","#ccebc5"],BrewerPastel14:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],BrewerPastel15:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],BrewerPastel16:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],BrewerPastel17:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],BrewerPastel18:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],BrewerPastel19:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],BrewerPastel23:["#b3e2cd","#fdcdac","#cbd5e8"],BrewerPastel24:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],BrewerPastel25:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],BrewerPastel26:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],BrewerPastel27:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],BrewerPastel28:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],BrewerSet13:["#e41a1c","#377eb8","#4daf4a"],BrewerSet14:["#e41a1c","#377eb8","#4daf4a","#984ea3"],BrewerSet15:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],BrewerSet16:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],BrewerSet17:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],BrewerSet18:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],BrewerSet19:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],BrewerSet23:["#66c2a5","#fc8d62","#8da0cb"],BrewerSet24:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],BrewerSet25:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],BrewerSet26:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],BrewerSet27:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],BrewerSet28:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],BrewerSet33:["#8dd3c7","#ffffb3","#bebada"],BrewerSet34:["#8dd3c7","#ffffb3","#bebada","#fb8072"],BrewerSet35:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],BrewerSet36:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],BrewerSet37:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],BrewerSet38:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],BrewerSet39:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],BrewerSet310:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],BrewerSet311:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],BrewerSet312:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],CartoBurg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],CartoBurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],CartoRedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],CartoOrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],CartoPeach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],CartoPinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],CartoMint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],CartoBluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],CartoDarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],CartoEmrld:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],CartoBluYl:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],CartoTeal:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],CartoTealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],CartoPurp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],CartoPurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],CartoSunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],CartoMagenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],CartoSunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],CartoBrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],CartoArmyRose:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],CartoFall:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoGeyser:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoTemps:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],CartoTealRose:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],CartoTropic:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],CartoEarth:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"]},No=Object.keys(io),Uo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ro=b=>{const v=Uo.exec(b);if(v!==null)return[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16)];throw new Error(`Cannot parse hex color "${b}"`)},no=({colorScheme:b,customColors:v,min:_,max:D,isReverse:T=!1,isContinuous:F=!1})=>{let Z;if(b){if(G=b,!No.includes(G))throw new Error(`"${b}" is not a supported color scheme`);Z=io[b]}else{if(!(v.length>=2))throw new Error("You must provide at least 2 colors");Z=v}var G;const ne=Z.map(ro),$=T?ne.reverse():ne;if(F){const W=((ge,se,X)=>Array.from({length:X},(Ie,xe)=>ge+xe*(se-ge)/(X-1)))(_,D,$.length);return Su(W,$).clamp(!0)}{const W=((ge,se,X)=>Array.from({length:X-1},(Ie,xe)=>ge+(xe+1)*(se-ge)/X))(_,D,$.length);return Go(W,$)}};var Pn;(function(b){b[b.WhiteIsZero=0]="WhiteIsZero",b[b.BlackIsZero=1]="BlackIsZero",b[b.RGB=2]="RGB",b[b.Palette=3]="Palette",b[b.TransparencyMask=4]="TransparencyMask",b[b.CMYK=5]="CMYK",b[b.YCbCr=6]="YCbCr",b[b.CIELab=8]="CIELab",b[b.ICCLab=9]="ICCLab"})(Pn||(Pn={}));const ao=(b,{noData:v,photometricInterpretation:_,bitsPerSample:D,colorMap:T})=>{const F=D&&D[0]?2**D[0]:NaN,Z=v??0;let G;switch(_){case Pn.WhiteIsZero:G=function(ne,$,W){const ge=new Uint8ClampedArray(4*ne[0].length);let se;for(let X=0;X<ne[0].length;X++)se=255-ne[0][X]/$*255,ge[4*X]=se,ge[4*X+1]=se,ge[4*X+2]=se,ge[4*X+3]=ne[0][X]===W?0:255;return ge}(b,F,Z);break;case Pn.BlackIsZero:G=function(ne,$,W){const ge=new Uint8ClampedArray(4*ne[0].length);let se;for(let X=0;X<ne[0].length;X++)se=ne[0][X]/$*255,ge[4*X]=se,ge[4*X+1]=se,ge[4*X+2]=se,ge[4*X+3]=ne[0][X]===W?0:255;return ge}(b,F,Z);break;case Pn.RGB:G=function(ne,$){const[W,ge,se]=ne,X=new Uint8ClampedArray(4*ne[0].length);for(let Ie=0;Ie<ne[0].length;Ie++)X[4*Ie]=W[Ie],X[4*Ie+1]=ge[Ie],X[4*Ie+2]=se[Ie],X[4*Ie+3]=W[Ie]===$&&ge[Ie]==$&&se[Ie]==$?0:255;return X}(b,Z);break;case Pn.Palette:if(!T)throw new Error("colorMap for paletted image not found.");G=function(ne,$,W){const ge=new Uint8ClampedArray(4*ne[0].length),se=$.length/3,X=$.length/3*2;for(let Ie=0;Ie<ne[0].length;Ie++){const xe=ne[0][Ie];ge[4*Ie]=$[xe]/65536*256,ge[4*Ie+1]=$[xe+se]/65536*256,ge[4*Ie+2]=$[xe+X]/65536*256,ge[4*Ie+3]=ne[0][Ie]===W?0:255}return ge}(b,T,Z);break;case Pn.CMYK:G=function(ne,$){const W=new Uint8ClampedArray(4*ne[0].length),[ge,se,X,Ie]=ne;for(let xe=0;xe<ne.length;xe++){const Qe=ge[xe],Pe=se[xe],Oe=X[xe],Te=Ie[xe];W[4*xe]=(255-Qe)/256*255*((255-Te)/256),W[4*xe+1]=(255-Pe)/256*255*((255-Te)/256),W[4*xe+2]=(255-Oe)/256*255*((255-Te)/256),W[4*xe+3]=Qe===$&&Pe===$&&Oe===$&&Te===$?0:255}return W}(b,Z);break;case Pn.YCbCr:G=function(ne,$){const[W,ge,se]=ne,X=new Uint8ClampedArray(4*ne[0].length);for(let Ie=0;Ie<ne[0].length;Ie++){const xe=W[Ie],Qe=ge[Ie],Pe=se[Ie];X[4*Ie]=xe+1.402*(Pe-128),X[4*Ie+1]=xe-.34414*(Qe-128)-.71414*(Pe-128),X[4*Ie+2]=xe+1.772*(Qe-128),X[4*Ie+3]=xe===$&&Qe==$&&Pe==$?0:255}return X}(b,Z);break;case Pn.CIELab:G=function(ne,$){const W=new Uint8ClampedArray(ne[0].length);for(let ge=0;ge<ne.length;ge++){const se=ne[0][ge],X=ne[1][ge]<<24>>24,Ie=ne[2][ge]<<24>>24;let xe,Qe,Pe,Oe=(se+16)/116,Te=X/500+Oe,Ke=Oe-Ie/200;Te=.95047*(Te*Te*Te>.008856?Te*Te*Te:(Te-16/116)/7.787),Oe=1*(Oe*Oe*Oe>.008856?Oe*Oe*Oe:(Oe-16/116)/7.787),Ke=1.08883*(Ke*Ke*Ke>.008856?Ke*Ke*Ke:(Ke-16/116)/7.787),xe=3.2406*Te+-1.5372*Oe+-.4986*Ke,Qe=-.9689*Te+1.8758*Oe+.0415*Ke,Pe=.0557*Te+-.204*Oe+1.057*Ke,xe=xe>.0031308?1.055*xe**(1/2.4)-.055:12.92*xe,Qe=Qe>.0031308?1.055*Qe**(1/2.4)-.055:12.92*Qe,Pe=Pe>.0031308?1.055*Pe**(1/2.4)-.055:12.92*Pe,W[4*ge]=255*Math.max(0,Math.min(1,xe)),W[4*ge+1]=255*Math.max(0,Math.min(1,Qe)),W[4*ge+2]=255*Math.max(0,Math.min(1,Pe)),W[4*ge+3]=se===$&&X==$&&Ie==$?0:255}return W}(b,Z);break;default:throw new Error("Unsupported photometric interpretation.")}return G},Oo={};var Du=b=>Oo[b],so=(b,v)=>{Oo[b]=v};const Ch=async b=>{var Ie,xe;const v=new RegExp(/cog:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),_=b.match(v);if(!_)throw new Error(`Invalid COG protocol URL '${b}'`);const D=_[1].split("#"),T=D[0];D.shift();const F=D.join("#")??"",Z=parseInt(_[2]),G=parseInt(_[3]),ne=parseInt(_[4]),$=Bl(T),W=await $.getRawTile({z:Z,x:G,y:ne}),ge=await $.getMetadata();let se;const X=Du(T);if(X!==void 0)se=X(W,ge);else if(F.startsWith("dem"))se=((Qe,{offset:Pe,scale:Oe,noData:Te})=>{const Ke=Qe[0],te=Ke.length,N=new Uint8ClampedArray(4*te);for(let he=0;he<te;he++){const le=Pe+Ke[he]*Oe,ue=((le==Te?0:le)- -1e4)/.1;N[4*he]=Math.floor(ue/256/256)%256,N[4*he+1]=Math.floor(ue/256)%256,N[4*he+2]=ue%256,N[4*he+3]=255}return N})(W,ge);else if(F.startsWith("color")){const Qe=(Ie=F.split("color").pop())==null?void 0:Ie.substring(1);if(!Qe)throw new Error("Color params are not defined");{const Pe=(xe=Qe.match(/\[("#([0-9a-fA-F]{3,6})"(,(\s)?)?)+]/))==null?void 0:xe[0];let Oe,Te,Ke,te="",N=[];Pe?(N=JSON.parse(Pe),[Oe,Te,Ke]=Qe.replace(`${Pe},`,"").split(",")):[te,Oe,Te,Ke]=Qe.split(",");const he=parseFloat(Oe),le=parseFloat(Te),ue=(Ke==null?void 0:Ke.includes("-"))||!1,de=(Ke==null?void 0:Ke.includes("c"))||!1;se=((Me,{offset:De,scale:Fe,noData:We,colorScale:rt})=>{const at=Me[0],yt=at.length,Tt=new Uint8ClampedArray(4*yt),it=no(rt);for(let $e=0;$e<yt;$e++){const dt=De+at[$e]*Fe;if(dt===We||isNaN(dt)||dt===1/0)Tt[4*$e]=0,Tt[4*$e+1]=0,Tt[4*$e+2]=0,Tt[4*$e+3]=0;else{const $t=it(dt);Tt[4*$e]=$t[0],Tt[4*$e+1]=$t[1],Tt[4*$e+2]=$t[2],Tt[4*$e+3]=255}}return Tt})(W,{...ge,colorScale:{colorScheme:te,customColors:N,min:he,max:le,isReverse:ue,isContinuous:de}})}}else se=ao(W,ge);return await createImageBitmap(new ImageData(se,256,256))};var ku=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){return b}}});const oo=257;function Vo(b,v){for(let _=v.length-1;_>=0;_--)b.push(v[_]);return b}function Mu(b){const v=new Uint16Array(4093),_=new Uint8Array(4093);for(let Ie=0;Ie<=257;Ie++)v[Ie]=4096,_[Ie]=Ie;let D=258,T=9,F=0;function Z(){D=258,T=9}function G(Ie){const xe=function(Qe,Pe,Oe){const Te=Pe%8,Ke=Math.floor(Pe/8),te=8-Te,N=Pe+Oe-8*(Ke+1);let he=8*(Ke+2)-(Pe+Oe);const le=8*(Ke+2)-Pe;if(he=Math.max(0,he),Ke>=Qe.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),oo;let ue=Qe[Ke]&2**(8-Te)-1;ue<<=Oe-te;let de=ue;if(Ke+1<Qe.length){let Me=Qe[Ke+1]>>>he;Me<<=Math.max(0,Oe-le),de+=Me}if(N>8&&Ke+2<Qe.length){const Me=8*(Ke+3)-(Pe+Oe);de+=Qe[Ke+2]>>>Me}return de}(Ie,F,T);return F+=T,xe}function ne(Ie,xe){return _[D]=xe,v[D]=Ie,D++,D-1}function $(Ie){const xe=[];for(let Qe=Ie;Qe!==4096;Qe=v[Qe])xe.push(_[Qe]);return xe}const W=[];Z();const ge=new Uint8Array(b);let se,X=G(ge);for(;X!==oo;){if(X===256){for(Z(),X=G(ge);X===256;)X=G(ge);if(X===oo)break;if(X>256)throw new Error(`corrupted code at scanline ${X}`);Vo(W,$(X)),se=X}else if(X<D){const Ie=$(X);Vo(W,Ie),ne(se,Ie[Ie.length-1]),se=X}else{const Ie=$(se);if(!Ie)throw new Error(`Bogus entry. Not in dictionary, ${se} / ${D}, position: ${F}`);Vo(W,Ie),W.push(Ie[Ie.length-1]),ne(se,Ie[Ie.length-1]),se=X}D+1>=2**T&&(T===12?se=void 0:T++),X=G(ge)}return new Uint8Array(W)}var qo=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){return Mu(b).buffer}}});const ra=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Xr=4017,ls=799,lo=3406,Ir=2276,xa=1567,Jr=3784,Fa=5793,cs=2896;function zc(b,v){let _=0;const D=[];let T=16;for(;T>0&&!b[T-1];)--T;D.push({children:[],index:0});let F,Z=D[0];for(let G=0;G<T;G++){for(let ne=0;ne<b[G];ne++){for(Z=D.pop(),Z.children[Z.index]=v[_];Z.index>0;)Z=D.pop();for(Z.index++,D.push(Z);D.length<=G;)D.push(F={children:[],index:0}),Z.children[Z.index]=F.children,Z=F;_++}G+1<T&&(D.push(F={children:[],index:0}),Z.children[Z.index]=F.children,Z=F)}return D[0].children}function us(b,v,_,D,T,F,Z,G,ne){const{mcusPerLine:$,progressive:W}=_,ge=v;let se=v,X=0,Ie=0;function xe(){if(Ie>0)return Ie--,X>>Ie&1;if(X=b[se++],X===255){const it=b[se++];if(it)throw new Error(`unexpected marker: ${(X<<8|it).toString(16)}`)}return Ie=7,X>>>7}function Qe(it){let $e,dt=it;for(;($e=xe())!==null;){if(dt=dt[$e],typeof dt=="number")return dt;if(typeof dt!="object")throw new Error("invalid huffman sequence")}return null}function Pe(it){let $e=it,dt=0;for(;$e>0;){const $t=xe();if($t===null)return;dt=dt<<1|$t,--$e}return dt}function Oe(it){const $e=Pe(it);return $e>=1<<it-1?$e:$e+(-1<<it)+1}let Te=0,Ke,te=0;function N(it,$e,dt,$t,St){const si=dt%$,Dt=(dt/$|0)*it.v+$t,ei=si*it.h+St;$e(it,it.blocks[Dt][ei])}function he(it,$e,dt){const $t=dt/it.blocksPerLine|0,St=dt%it.blocksPerLine;$e(it,it.blocks[$t][St])}const le=D.length;let ue,de,Me,De,Fe,We;We=W?F===0?G===0?function(it,$e){const dt=Qe(it.huffmanTableDC),$t=dt===0?0:Oe(dt)<<ne;it.pred+=$t,$e[0]=it.pred}:function(it,$e){$e[0]|=xe()<<ne}:G===0?function(it,$e){if(Te>0)return void Te--;let dt=F;const $t=Z;for(;dt<=$t;){const St=Qe(it.huffmanTableAC),si=15&St,Dt=St>>4;if(si===0){if(Dt<15){Te=Pe(Dt)+(1<<Dt)-1;break}dt+=16}else dt+=Dt,$e[ra[dt]]=Oe(si)*(1<<ne),dt++}}:function(it,$e){let dt=F;const $t=Z;let St=0;for(;dt<=$t;){const si=ra[dt],Dt=$e[si]<0?-1:1;switch(te){case 0:{const ei=Qe(it.huffmanTableAC),Kt=15&ei;if(St=ei>>4,Kt===0)St<15?(Te=Pe(St)+(1<<St),te=4):(St=16,te=1);else{if(Kt!==1)throw new Error("invalid ACn encoding");Ke=Oe(Kt),te=St?2:3}continue}case 1:case 2:$e[si]?$e[si]+=(xe()<<ne)*Dt:(St--,St===0&&(te=te===2?3:0));break;case 3:$e[si]?$e[si]+=(xe()<<ne)*Dt:($e[si]=Ke<<ne,te=0);break;case 4:$e[si]&&($e[si]+=(xe()<<ne)*Dt)}dt++}te===4&&(Te--,Te===0&&(te=0))}:function(it,$e){const dt=Qe(it.huffmanTableDC),$t=dt===0?0:Oe(dt);it.pred+=$t,$e[0]=it.pred;let St=1;for(;St<64;){const si=Qe(it.huffmanTableAC),Dt=15&si,ei=si>>4;if(Dt===0){if(ei<15)break;St+=16}else St+=ei,$e[ra[St]]=Oe(Dt),St++}};let rt,at,yt=0;at=le===1?D[0].blocksPerLine*D[0].blocksPerColumn:$*_.mcusPerColumn;const Tt=T||at;for(;yt<at;){for(de=0;de<le;de++)D[de].pred=0;if(Te=0,le===1)for(ue=D[0],Fe=0;Fe<Tt;Fe++)he(ue,We,yt),yt++;else for(Fe=0;Fe<Tt;Fe++){for(de=0;de<le;de++){ue=D[de];const{h:it,v:$e}=ue;for(Me=0;Me<$e;Me++)for(De=0;De<it;De++)N(ue,We,yt,Me,De)}if(yt++,yt===at)break}if(Ie=0,rt=b[se]<<8|b[se+1],rt<65280)throw new Error("marker was not found");if(!(rt>=65488&&rt<=65495))break;se+=2}return se-ge}function Ho(b,v){const _=[],{blocksPerLine:D,blocksPerColumn:T}=v,F=D<<3,Z=new Int32Array(64),G=new Uint8Array(64);function ne($,W,ge){const se=v.quantizationTable;let X,Ie,xe,Qe,Pe,Oe,Te,Ke,te;const N=ge;let he;for(he=0;he<64;he++)N[he]=$[he]*se[he];for(he=0;he<8;++he){const le=8*he;N[1+le]!==0||N[2+le]!==0||N[3+le]!==0||N[4+le]!==0||N[5+le]!==0||N[6+le]!==0||N[7+le]!==0?(X=Fa*N[0+le]+128>>8,Ie=Fa*N[4+le]+128>>8,xe=N[2+le],Qe=N[6+le],Pe=cs*(N[1+le]-N[7+le])+128>>8,Ke=cs*(N[1+le]+N[7+le])+128>>8,Oe=N[3+le]<<4,Te=N[5+le]<<4,te=X-Ie+1>>1,X=X+Ie+1>>1,Ie=te,te=xe*Jr+Qe*xa+128>>8,xe=xe*xa-Qe*Jr+128>>8,Qe=te,te=Pe-Te+1>>1,Pe=Pe+Te+1>>1,Te=te,te=Ke+Oe+1>>1,Oe=Ke-Oe+1>>1,Ke=te,te=X-Qe+1>>1,X=X+Qe+1>>1,Qe=te,te=Ie-xe+1>>1,Ie=Ie+xe+1>>1,xe=te,te=Pe*Ir+Ke*lo+2048>>12,Pe=Pe*lo-Ke*Ir+2048>>12,Ke=te,te=Oe*ls+Te*Xr+2048>>12,Oe=Oe*Xr-Te*ls+2048>>12,Te=te,N[0+le]=X+Ke,N[7+le]=X-Ke,N[1+le]=Ie+Te,N[6+le]=Ie-Te,N[2+le]=xe+Oe,N[5+le]=xe-Oe,N[3+le]=Qe+Pe,N[4+le]=Qe-Pe):(te=Fa*N[0+le]+512>>10,N[0+le]=te,N[1+le]=te,N[2+le]=te,N[3+le]=te,N[4+le]=te,N[5+le]=te,N[6+le]=te,N[7+le]=te)}for(he=0;he<8;++he){const le=he;N[8+le]!==0||N[16+le]!==0||N[24+le]!==0||N[32+le]!==0||N[40+le]!==0||N[48+le]!==0||N[56+le]!==0?(X=Fa*N[0+le]+2048>>12,Ie=Fa*N[32+le]+2048>>12,xe=N[16+le],Qe=N[48+le],Pe=cs*(N[8+le]-N[56+le])+2048>>12,Ke=cs*(N[8+le]+N[56+le])+2048>>12,Oe=N[24+le],Te=N[40+le],te=X-Ie+1>>1,X=X+Ie+1>>1,Ie=te,te=xe*Jr+Qe*xa+2048>>12,xe=xe*xa-Qe*Jr+2048>>12,Qe=te,te=Pe-Te+1>>1,Pe=Pe+Te+1>>1,Te=te,te=Ke+Oe+1>>1,Oe=Ke-Oe+1>>1,Ke=te,te=X-Qe+1>>1,X=X+Qe+1>>1,Qe=te,te=Ie-xe+1>>1,Ie=Ie+xe+1>>1,xe=te,te=Pe*Ir+Ke*lo+2048>>12,Pe=Pe*lo-Ke*Ir+2048>>12,Ke=te,te=Oe*ls+Te*Xr+2048>>12,Oe=Oe*Xr-Te*ls+2048>>12,Te=te,N[0+le]=X+Ke,N[56+le]=X-Ke,N[8+le]=Ie+Te,N[48+le]=Ie-Te,N[16+le]=xe+Oe,N[40+le]=xe-Oe,N[24+le]=Qe+Pe,N[32+le]=Qe-Pe):(te=Fa*ge[he+0]+8192>>14,N[0+le]=te,N[8+le]=te,N[16+le]=te,N[24+le]=te,N[32+le]=te,N[40+le]=te,N[48+le]=te,N[56+le]=te)}for(he=0;he<64;++he){const le=128+(N[he]+8>>4);W[he]=le<0?0:le>255?255:le}}for(let $=0;$<T;$++){const W=$<<3;for(let ge=0;ge<8;ge++)_.push(new Uint8Array(F));for(let ge=0;ge<D;ge++){ne(v.blocks[$][ge],G,Z);let se=0;const X=ge<<3;for(let Ie=0;Ie<8;Ie++){const xe=_[W+Ie];for(let Qe=0;Qe<8;Qe++)xe[X+Qe]=G[se++]}}}return _}class Rs{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(v){let _=0;function D(){const G=v[_]<<8|v[_+1];return _+=2,G}function T(){const G=D(),ne=v.subarray(_,_+G-2);return _+=ne.length,ne}function F(G){let ne,$,W=0,ge=0;for($ in G.components)G.components.hasOwnProperty($)&&(ne=G.components[$],W<ne.h&&(W=ne.h),ge<ne.v&&(ge=ne.v));const se=Math.ceil(G.samplesPerLine/8/W),X=Math.ceil(G.scanLines/8/ge);for($ in G.components)if(G.components.hasOwnProperty($)){ne=G.components[$];const Ie=Math.ceil(Math.ceil(G.samplesPerLine/8)*ne.h/W),xe=Math.ceil(Math.ceil(G.scanLines/8)*ne.v/ge),Qe=se*ne.h,Pe=X*ne.v,Oe=[];for(let Te=0;Te<Pe;Te++){const Ke=[];for(let te=0;te<Qe;te++)Ke.push(new Int32Array(64));Oe.push(Ke)}ne.blocksPerLine=Ie,ne.blocksPerColumn=xe,ne.blocks=Oe}G.maxH=W,G.maxV=ge,G.mcusPerLine=se,G.mcusPerColumn=X}let Z=D();if(Z!==65496)throw new Error("SOI not found");for(Z=D();Z!==65497;){switch(Z){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const G=T();Z===65504&&G[0]===74&&G[1]===70&&G[2]===73&&G[3]===70&&G[4]===0&&(this.jfif={version:{major:G[5],minor:G[6]},densityUnits:G[7],xDensity:G[8]<<8|G[9],yDensity:G[10]<<8|G[11],thumbWidth:G[12],thumbHeight:G[13],thumbData:G.subarray(14,14+3*G[12]*G[13])}),Z===65518&&G[0]===65&&G[1]===100&&G[2]===111&&G[3]===98&&G[4]===101&&G[5]===0&&(this.adobe={version:G[6],flags0:G[7]<<8|G[8],flags1:G[9]<<8|G[10],transformCode:G[11]});break}case 65499:{const G=D()+_-2;for(;_<G;){const ne=v[_++],$=new Int32Array(64);if(ne>>4){if(ne>>4!=1)throw new Error("DQT: invalid table spec");for(let W=0;W<64;W++)$[ra[W]]=D()}else for(let W=0;W<64;W++)$[ra[W]]=v[_++];this.quantizationTables[15&ne]=$}break}case 65472:case 65473:case 65474:{D();const G={extended:Z===65473,progressive:Z===65474,precision:v[_++],scanLines:D(),samplesPerLine:D(),components:{},componentsOrder:[]},ne=v[_++];let $;for(let W=0;W<ne;W++){$=v[_];const ge=v[_+1]>>4,se=15&v[_+1],X=v[_+2];G.componentsOrder.push($),G.components[$]={h:ge,v:se,quantizationIdx:X},_+=3}F(G),this.frames.push(G);break}case 65476:{const G=D();for(let ne=2;ne<G;){const $=v[_++],W=new Uint8Array(16);let ge=0;for(let X=0;X<16;X++,_++)W[X]=v[_],ge+=W[X];const se=new Uint8Array(ge);for(let X=0;X<ge;X++,_++)se[X]=v[_];ne+=17+ge,$>>4?this.huffmanTablesAC[15&$]=zc(W,se):this.huffmanTablesDC[15&$]=zc(W,se)}break}case 65501:D(),this.resetInterval=D();break;case 65498:{D();const G=v[_++],ne=[],$=this.frames[0];for(let Ie=0;Ie<G;Ie++){const xe=$.components[v[_++]],Qe=v[_++];xe.huffmanTableDC=this.huffmanTablesDC[Qe>>4],xe.huffmanTableAC=this.huffmanTablesAC[15&Qe],ne.push(xe)}const W=v[_++],ge=v[_++],se=v[_++],X=us(v,_,$,ne,this.resetInterval,W,ge,se>>4,15&se);_+=X;break}case 65535:v[_]!==255&&_--;break;default:if(v[_-3]===255&&v[_-2]>=192&&v[_-2]<=254){_-=3;break}throw new Error(`unknown JPEG marker ${Z.toString(16)}`)}Z=D()}}getResult(){const{frames:v}=this;if(this.frames.length===0)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let W=0;W<this.frames.length;W++){const ge=this.frames[W].components;for(const se of Object.keys(ge))ge[se].quantizationTable=this.quantizationTables[ge[se].quantizationIdx],delete ge[se].quantizationIdx}const _=v[0],{components:D,componentsOrder:T}=_,F=[],Z=_.samplesPerLine,G=_.scanLines;for(let W=0;W<T.length;W++){const ge=D[T[W]];F.push({lines:Ho(0,ge),scaleX:ge.h/_.maxH,scaleY:ge.v/_.maxV})}const ne=new Uint8Array(Z*G*F.length);let $=0;for(let W=0;W<G;++W)for(let ge=0;ge<Z;++ge)for(let se=0;se<F.length;++se){const X=F[se];ne[$]=X.lines[0|W*X.scaleY][0|ge*X.scaleX],++$}return ne}}var Tu=Object.freeze({__proto__:null,default:class extends _a{constructor(b){super(),this.reader=new Rs,b.JPEGTables&&this.reader.parse(b.JPEGTables)}decodeBlock(b){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(b)),this.reader.getResult().buffer}}});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function za(b){let v=b.length;for(;--v>=0;)b[v]=0}const Gc=30,Gl=new Array(576);za(Gl);const Nc=new Array(60);za(Nc);const hs=new Array(512);za(hs);const Pu=new Array(256);za(Pu);const Nl=new Array(29);za(Nl);const jo=new Array(Gc);za(jo);var Jo=(b,v,_,D)=>{let T=65535&b,F=b>>>16&65535,Z=0;for(;_!==0;){Z=_>2e3?2e3:_,_-=Z;do T=T+v[D++]|0,F=F+T|0;while(--Z);T%=65521,F%=65521}return T|F<<16};const Uc=new Uint32Array((()=>{let b,v=[];for(var _=0;_<256;_++){b=_;for(var D=0;D<8;D++)b=1&b?3988292384^b>>>1:b>>>1;v[_]=b}return v})());var On=(b,v,_,D)=>{const T=Uc,F=D+_;b^=-1;for(let Z=D;Z<F;Z++)b=b>>>8^T[255&(b^v[Z])];return~b},Yo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ga={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const Oc=(b,v)=>Object.prototype.hasOwnProperty.call(b,v);var Vn={assign:function(b){const v=Array.prototype.slice.call(arguments,1);for(;v.length;){const _=v.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(const D in _)Oc(_,D)&&(b[D]=_[D])}}return b},flattenChunks:b=>{let v=0;for(let D=0,T=b.length;D<T;D++)v+=b[D].length;const _=new Uint8Array(v);for(let D=0,T=0,F=b.length;D<F;D++){let Z=b[D];_.set(Z,T),T+=Z.length}return _}};let qn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{qn=!1}const co=new Uint8Array(256);for(let b=0;b<256;b++)co[b]=b>=252?6:b>=248?5:b>=240?4:b>=224?3:b>=192?2:1;co[254]=co[254]=1;var Rn={string2buf:b=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(b);let v,_,D,T,F,Z=b.length,G=0;for(T=0;T<Z;T++)_=b.charCodeAt(T),(64512&_)==55296&&T+1<Z&&(D=b.charCodeAt(T+1),(64512&D)==56320&&(_=65536+(_-55296<<10)+(D-56320),T++)),G+=_<128?1:_<2048?2:_<65536?3:4;for(v=new Uint8Array(G),F=0,T=0;F<G;T++)_=b.charCodeAt(T),(64512&_)==55296&&T+1<Z&&(D=b.charCodeAt(T+1),(64512&D)==56320&&(_=65536+(_-55296<<10)+(D-56320),T++)),_<128?v[F++]=_:_<2048?(v[F++]=192|_>>>6,v[F++]=128|63&_):_<65536?(v[F++]=224|_>>>12,v[F++]=128|_>>>6&63,v[F++]=128|63&_):(v[F++]=240|_>>>18,v[F++]=128|_>>>12&63,v[F++]=128|_>>>6&63,v[F++]=128|63&_);return v},buf2string:(b,v)=>{const _=v||b.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(b.subarray(0,v));let D,T;const F=new Array(2*_);for(T=0,D=0;D<_;){let Z=b[D++];if(Z<128){F[T++]=Z;continue}let G=co[Z];if(G>4)F[T++]=65533,D+=G-1;else{for(Z&=G===2?31:G===3?15:7;G>1&&D<_;)Z=Z<<6|63&b[D++],G--;G>1?F[T++]=65533:Z<65536?F[T++]=Z:(Z-=65536,F[T++]=55296|Z>>10&1023,F[T++]=56320|1023&Z)}}return((Z,G)=>{if(G<65534&&Z.subarray&&qn)return String.fromCharCode.apply(null,Z.length===G?Z:Z.subarray(0,G));let ne="";for(let $=0;$<G;$++)ne+=String.fromCharCode(Z[$]);return ne})(F,T)},utf8border:(b,v)=>{(v=v||b.length)>b.length&&(v=b.length);let _=v-1;for(;_>=0&&(192&b[_])==128;)_--;return _<0||_===0?v:_+co[b[_]]>v?_:v}},Ls=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ko=16209;var Bh=function(b,v){let _,D,T,F,Z,G,ne,$,W,ge,se,X,Ie,xe,Qe,Pe,Oe,Te,Ke,te,N,he,le,ue;const de=b.state;_=b.next_in,le=b.input,D=_+(b.avail_in-5),T=b.next_out,ue=b.output,F=T-(v-b.avail_out),Z=T+(b.avail_out-257),G=de.dmax,ne=de.wsize,$=de.whave,W=de.wnext,ge=de.window,se=de.hold,X=de.bits,Ie=de.lencode,xe=de.distcode,Qe=(1<<de.lenbits)-1,Pe=(1<<de.distbits)-1;e:do{X<15&&(se+=le[_++]<<X,X+=8,se+=le[_++]<<X,X+=8),Oe=Ie[se&Qe];t:for(;;){if(Te=Oe>>>24,se>>>=Te,X-=Te,Te=Oe>>>16&255,Te===0)ue[T++]=65535&Oe;else{if(!(16&Te)){if(64&Te){if(32&Te){de.mode=16191;break e}b.msg="invalid literal/length code",de.mode=Ko;break e}Oe=Ie[(65535&Oe)+(se&(1<<Te)-1)];continue t}for(Ke=65535&Oe,Te&=15,Te&&(X<Te&&(se+=le[_++]<<X,X+=8),Ke+=se&(1<<Te)-1,se>>>=Te,X-=Te),X<15&&(se+=le[_++]<<X,X+=8,se+=le[_++]<<X,X+=8),Oe=xe[se&Pe];;){if(Te=Oe>>>24,se>>>=Te,X-=Te,Te=Oe>>>16&255,16&Te){if(te=65535&Oe,Te&=15,X<Te&&(se+=le[_++]<<X,X+=8,X<Te&&(se+=le[_++]<<X,X+=8)),te+=se&(1<<Te)-1,te>G){b.msg="invalid distance too far back",de.mode=Ko;break e}if(se>>>=Te,X-=Te,Te=T-F,te>Te){if(Te=te-Te,Te>$&&de.sane){b.msg="invalid distance too far back",de.mode=Ko;break e}if(N=0,he=ge,W===0){if(N+=ne-Te,Te<Ke){Ke-=Te;do ue[T++]=ge[N++];while(--Te);N=T-te,he=ue}}else if(W<Te){if(N+=ne+W-Te,Te-=W,Te<Ke){Ke-=Te;do ue[T++]=ge[N++];while(--Te);if(N=0,W<Ke){Te=W,Ke-=Te;do ue[T++]=ge[N++];while(--Te);N=T-te,he=ue}}}else if(N+=W-Te,Te<Ke){Ke-=Te;do ue[T++]=ge[N++];while(--Te);N=T-te,he=ue}for(;Ke>2;)ue[T++]=he[N++],ue[T++]=he[N++],ue[T++]=he[N++],Ke-=3;Ke&&(ue[T++]=he[N++],Ke>1&&(ue[T++]=he[N++]))}else{N=T-te;do ue[T++]=ue[N++],ue[T++]=ue[N++],ue[T++]=ue[N++],Ke-=3;while(Ke>2);Ke&&(ue[T++]=ue[N++],Ke>1&&(ue[T++]=ue[N++]))}break}if(64&Te){b.msg="invalid distance code",de.mode=Ko;break e}Oe=xe[(65535&Oe)+(se&(1<<Te)-1)]}}break}}while(_<D&&T<Z);Ke=X>>3,_-=Ke,X-=Ke<<3,se&=(1<<X)-1,b.next_in=_,b.next_out=T,b.avail_in=_<D?D-_+5:5-(_-D),b.avail_out=T<Z?Z-T+257:257-(T-Z),de.hold=se,de.bits=X};const Ul=15,Ru=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Vc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),uo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Nt=(b,v,_,D,T,F,Z,G)=>{const ne=G.bits;let $,W,ge,se,X,Ie,xe=0,Qe=0,Pe=0,Oe=0,Te=0,Ke=0,te=0,N=0,he=0,le=0,ue=null;const de=new Uint16Array(16),Me=new Uint16Array(16);let De,Fe,We,rt=null;for(xe=0;xe<=Ul;xe++)de[xe]=0;for(Qe=0;Qe<D;Qe++)de[v[_+Qe]]++;for(Te=ne,Oe=Ul;Oe>=1&&de[Oe]===0;Oe--);if(Te>Oe&&(Te=Oe),Oe===0)return T[F++]=20971520,T[F++]=20971520,G.bits=1,0;for(Pe=1;Pe<Oe&&de[Pe]===0;Pe++);for(Te<Pe&&(Te=Pe),N=1,xe=1;xe<=Ul;xe++)if(N<<=1,N-=de[xe],N<0)return-1;if(N>0&&(b===0||Oe!==1))return-1;for(Me[1]=0,xe=1;xe<Ul;xe++)Me[xe+1]=Me[xe]+de[xe];for(Qe=0;Qe<D;Qe++)v[_+Qe]!==0&&(Z[Me[v[_+Qe]]++]=Qe);if(b===0?(ue=rt=Z,Ie=20):b===1?(ue=Ru,rt=Vc,Ie=257):(ue=uo,rt=wa,Ie=0),le=0,Qe=0,xe=Pe,X=F,Ke=Te,te=0,ge=-1,he=1<<Te,se=he-1,b===1&&he>852||b===2&&he>592)return 1;for(;;){De=xe-te,Z[Qe]+1<Ie?(Fe=0,We=Z[Qe]):Z[Qe]>=Ie?(Fe=rt[Z[Qe]-Ie],We=ue[Z[Qe]-Ie]):(Fe=96,We=0),$=1<<xe-te,W=1<<Ke,Pe=W;do W-=$,T[X+(le>>te)+W]=De<<24|Fe<<16|We;while(W!==0);for($=1<<xe-1;le&$;)$>>=1;if($!==0?(le&=$-1,le+=$):le=0,Qe++,--de[xe]==0){if(xe===Oe)break;xe=v[_+Z[Qe]]}if(xe>Te&&(le&se)!==ge){for(te===0&&(te=Te),X+=Pe,Ke=xe-te,N=1<<Ke;Ke+te<Oe&&(N-=de[Ke+te],!(N<=0));)Ke++,N<<=1;if(he+=1<<Ke,b===1&&he>852||b===2&&he>592)return 1;ge=le&se,T[ge]=Te<<24|Ke<<16|X-F}}return le!==0&&(T[X+le]=xe-te<<24|64<<16),G.bits=Te,0};const{Z_FINISH:qc,Z_BLOCK:$o,Z_TREES:Zo,Z_OK:na,Z_STREAM_END:ho,Z_NEED_DICT:Hc,Z_STREAM_ERROR:_i,Z_DATA_ERROR:Ol,Z_MEM_ERROR:Lu,Z_BUF_ERROR:jc,Z_DEFLATED:Fu}=Ga,Vl=16180,Ca=16190,aa=16191,ql=16192,Jc=16194,Wo=16199,Xo=16200,Yc=16206,tr=16209,Ki=b=>(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24);function el(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const sa=b=>{if(!b)return 1;const v=b.state;return!v||v.strm!==b||v.mode<Vl||v.mode>16211?1:0},Hl=b=>{if(sa(b))return _i;const v=b.state;return b.total_in=b.total_out=v.total=0,b.msg="",v.wrap&&(b.adler=1&v.wrap),v.mode=Vl,v.last=0,v.havedict=0,v.flags=-1,v.dmax=32768,v.head=null,v.hold=0,v.bits=0,v.lencode=v.lendyn=new Int32Array(852),v.distcode=v.distdyn=new Int32Array(592),v.sane=1,v.back=-1,na},tl=b=>{if(sa(b))return _i;const v=b.state;return v.wsize=0,v.whave=0,v.wnext=0,Hl(b)},Kc=(b,v)=>{let _;if(sa(b))return _i;const D=b.state;return v<0?(_=0,v=-v):(_=5+(v>>4),v<48&&(v&=15)),v&&(v<8||v>15)?_i:(D.window!==null&&D.wbits!==v&&(D.window=null),D.wrap=_,D.wbits=v,tl(b))},il=(b,v)=>{if(!b)return _i;const _=new el;b.state=_,_.strm=b,_.window=null,_.mode=Vl;const D=Kc(b,v);return D!==na&&(b.state=null),D};let on,Ao,ii=!0;const Ai=b=>{if(ii){on=new Int32Array(512),Ao=new Int32Array(32);let v=0;for(;v<144;)b.lens[v++]=8;for(;v<256;)b.lens[v++]=9;for(;v<280;)b.lens[v++]=7;for(;v<288;)b.lens[v++]=8;for(Nt(1,b.lens,0,288,on,0,b.work,{bits:9}),v=0;v<32;)b.lens[v++]=5;Nt(2,b.lens,0,32,Ao,0,b.work,{bits:5}),ii=!1}b.lencode=on,b.lenbits=9,b.distcode=Ao,b.distbits=5},rl=(b,v,_,D)=>{let T;const F=b.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new Uint8Array(F.wsize)),D>=F.wsize?(F.window.set(v.subarray(_-F.wsize,_),0),F.wnext=0,F.whave=F.wsize):(T=F.wsize-F.wnext,T>D&&(T=D),F.window.set(v.subarray(_-D,_-D+T),F.wnext),(D-=T)?(F.window.set(v.subarray(_-D,_),0),F.wnext=D,F.whave=F.wsize):(F.wnext+=T,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=T))),0};var $c=(b,v)=>{let _,D,T,F,Z,G,ne,$,W,ge,se,X,Ie,xe,Qe,Pe,Oe,Te,Ke,te,N,he,le=0;const ue=new Uint8Array(4);let de,Me;const De=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sa(b)||!b.output||!b.input&&b.avail_in!==0)return _i;_=b.state,_.mode===aa&&(_.mode=ql),Z=b.next_out,T=b.output,ne=b.avail_out,F=b.next_in,D=b.input,G=b.avail_in,$=_.hold,W=_.bits,ge=G,se=ne,he=na;e:for(;;)switch(_.mode){case Vl:if(_.wrap===0){_.mode=ql;break}for(;W<16;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(2&_.wrap&&$===35615){_.wbits===0&&(_.wbits=15),_.check=0,ue[0]=255&$,ue[1]=$>>>8&255,_.check=On(_.check,ue,2,0),$=0,W=0,_.mode=16181;break}if(_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&$)<<8)+($>>8))%31){b.msg="incorrect header check",_.mode=tr;break}if((15&$)!==Fu){b.msg="unknown compression method",_.mode=tr;break}if($>>>=4,W-=4,N=8+(15&$),_.wbits===0&&(_.wbits=N),N>15||N>_.wbits){b.msg="invalid window size",_.mode=tr;break}_.dmax=1<<_.wbits,_.flags=0,b.adler=_.check=1,_.mode=512&$?16189:aa,$=0,W=0;break;case 16181:for(;W<16;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(_.flags=$,(255&_.flags)!==Fu){b.msg="unknown compression method",_.mode=tr;break}if(57344&_.flags){b.msg="unknown header flags set",_.mode=tr;break}_.head&&(_.head.text=$>>8&1),512&_.flags&&4&_.wrap&&(ue[0]=255&$,ue[1]=$>>>8&255,_.check=On(_.check,ue,2,0)),$=0,W=0,_.mode=16182;case 16182:for(;W<32;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}_.head&&(_.head.time=$),512&_.flags&&4&_.wrap&&(ue[0]=255&$,ue[1]=$>>>8&255,ue[2]=$>>>16&255,ue[3]=$>>>24&255,_.check=On(_.check,ue,4,0)),$=0,W=0,_.mode=16183;case 16183:for(;W<16;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}_.head&&(_.head.xflags=255&$,_.head.os=$>>8),512&_.flags&&4&_.wrap&&(ue[0]=255&$,ue[1]=$>>>8&255,_.check=On(_.check,ue,2,0)),$=0,W=0,_.mode=16184;case 16184:if(1024&_.flags){for(;W<16;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}_.length=$,_.head&&(_.head.extra_len=$),512&_.flags&&4&_.wrap&&(ue[0]=255&$,ue[1]=$>>>8&255,_.check=On(_.check,ue,2,0)),$=0,W=0}else _.head&&(_.head.extra=null);_.mode=16185;case 16185:if(1024&_.flags&&(X=_.length,X>G&&(X=G),X&&(_.head&&(N=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Uint8Array(_.head.extra_len)),_.head.extra.set(D.subarray(F,F+X),N)),512&_.flags&&4&_.wrap&&(_.check=On(_.check,D,X,F)),G-=X,F+=X,_.length-=X),_.length))break e;_.length=0,_.mode=16186;case 16186:if(2048&_.flags){if(G===0)break e;X=0;do N=D[F+X++],_.head&&N&&_.length<65536&&(_.head.name+=String.fromCharCode(N));while(N&&X<G);if(512&_.flags&&4&_.wrap&&(_.check=On(_.check,D,X,F)),G-=X,F+=X,N)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=16187;case 16187:if(4096&_.flags){if(G===0)break e;X=0;do N=D[F+X++],_.head&&N&&_.length<65536&&(_.head.comment+=String.fromCharCode(N));while(N&&X<G);if(512&_.flags&&4&_.wrap&&(_.check=On(_.check,D,X,F)),G-=X,F+=X,N)break e}else _.head&&(_.head.comment=null);_.mode=16188;case 16188:if(512&_.flags){for(;W<16;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(4&_.wrap&&$!==(65535&_.check)){b.msg="header crc mismatch",_.mode=tr;break}$=0,W=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),b.adler=_.check=0,_.mode=aa;break;case 16189:for(;W<32;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}b.adler=_.check=Ki($),$=0,W=0,_.mode=Ca;case Ca:if(_.havedict===0)return b.next_out=Z,b.avail_out=ne,b.next_in=F,b.avail_in=G,_.hold=$,_.bits=W,Hc;b.adler=_.check=1,_.mode=aa;case aa:if(v===$o||v===Zo)break e;case ql:if(_.last){$>>>=7&W,W-=7&W,_.mode=Yc;break}for(;W<3;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}switch(_.last=1&$,$>>>=1,W-=1,3&$){case 0:_.mode=16193;break;case 1:if(Ai(_),_.mode=Wo,v===Zo){$>>>=2,W-=2;break e}break;case 2:_.mode=16196;break;case 3:b.msg="invalid block type",_.mode=tr}$>>>=2,W-=2;break;case 16193:for($>>>=7&W,W-=7&W;W<32;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if((65535&$)!=($>>>16^65535)){b.msg="invalid stored block lengths",_.mode=tr;break}if(_.length=65535&$,$=0,W=0,_.mode=Jc,v===Zo)break e;case Jc:_.mode=16195;case 16195:if(X=_.length,X){if(X>G&&(X=G),X>ne&&(X=ne),X===0)break e;T.set(D.subarray(F,F+X),Z),G-=X,F+=X,ne-=X,Z+=X,_.length-=X;break}_.mode=aa;break;case 16196:for(;W<14;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(_.nlen=257+(31&$),$>>>=5,W-=5,_.ndist=1+(31&$),$>>>=5,W-=5,_.ncode=4+(15&$),$>>>=4,W-=4,_.nlen>286||_.ndist>30){b.msg="too many length or distance symbols",_.mode=tr;break}_.have=0,_.mode=16197;case 16197:for(;_.have<_.ncode;){for(;W<3;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}_.lens[De[_.have++]]=7&$,$>>>=3,W-=3}for(;_.have<19;)_.lens[De[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,de={bits:_.lenbits},he=Nt(0,_.lens,0,19,_.lencode,0,_.work,de),_.lenbits=de.bits,he){b.msg="invalid code lengths set",_.mode=tr;break}_.have=0,_.mode=16198;case 16198:for(;_.have<_.nlen+_.ndist;){for(;le=_.lencode[$&(1<<_.lenbits)-1],Qe=le>>>24,Pe=le>>>16&255,Oe=65535&le,!(Qe<=W);){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(Oe<16)$>>>=Qe,W-=Qe,_.lens[_.have++]=Oe;else{if(Oe===16){for(Me=Qe+2;W<Me;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if($>>>=Qe,W-=Qe,_.have===0){b.msg="invalid bit length repeat",_.mode=tr;break}N=_.lens[_.have-1],X=3+(3&$),$>>>=2,W-=2}else if(Oe===17){for(Me=Qe+3;W<Me;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}$>>>=Qe,W-=Qe,N=0,X=3+(7&$),$>>>=3,W-=3}else{for(Me=Qe+7;W<Me;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}$>>>=Qe,W-=Qe,N=0,X=11+(127&$),$>>>=7,W-=7}if(_.have+X>_.nlen+_.ndist){b.msg="invalid bit length repeat",_.mode=tr;break}for(;X--;)_.lens[_.have++]=N}}if(_.mode===tr)break;if(_.lens[256]===0){b.msg="invalid code -- missing end-of-block",_.mode=tr;break}if(_.lenbits=9,de={bits:_.lenbits},he=Nt(1,_.lens,0,_.nlen,_.lencode,0,_.work,de),_.lenbits=de.bits,he){b.msg="invalid literal/lengths set",_.mode=tr;break}if(_.distbits=6,_.distcode=_.distdyn,de={bits:_.distbits},he=Nt(2,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,de),_.distbits=de.bits,he){b.msg="invalid distances set",_.mode=tr;break}if(_.mode=Wo,v===Zo)break e;case Wo:_.mode=Xo;case Xo:if(G>=6&&ne>=258){b.next_out=Z,b.avail_out=ne,b.next_in=F,b.avail_in=G,_.hold=$,_.bits=W,Bh(b,se),Z=b.next_out,T=b.output,ne=b.avail_out,F=b.next_in,D=b.input,G=b.avail_in,$=_.hold,W=_.bits,_.mode===aa&&(_.back=-1);break}for(_.back=0;le=_.lencode[$&(1<<_.lenbits)-1],Qe=le>>>24,Pe=le>>>16&255,Oe=65535&le,!(Qe<=W);){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(Pe&&!(240&Pe)){for(Te=Qe,Ke=Pe,te=Oe;le=_.lencode[te+(($&(1<<Te+Ke)-1)>>Te)],Qe=le>>>24,Pe=le>>>16&255,Oe=65535&le,!(Te+Qe<=W);){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}$>>>=Te,W-=Te,_.back+=Te}if($>>>=Qe,W-=Qe,_.back+=Qe,_.length=Oe,Pe===0){_.mode=16205;break}if(32&Pe){_.back=-1,_.mode=aa;break}if(64&Pe){b.msg="invalid literal/length code",_.mode=tr;break}_.extra=15&Pe,_.mode=16201;case 16201:if(_.extra){for(Me=_.extra;W<Me;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}_.length+=$&(1<<_.extra)-1,$>>>=_.extra,W-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=16202;case 16202:for(;le=_.distcode[$&(1<<_.distbits)-1],Qe=le>>>24,Pe=le>>>16&255,Oe=65535&le,!(Qe<=W);){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(!(240&Pe)){for(Te=Qe,Ke=Pe,te=Oe;le=_.distcode[te+(($&(1<<Te+Ke)-1)>>Te)],Qe=le>>>24,Pe=le>>>16&255,Oe=65535&le,!(Te+Qe<=W);){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}$>>>=Te,W-=Te,_.back+=Te}if($>>>=Qe,W-=Qe,_.back+=Qe,64&Pe){b.msg="invalid distance code",_.mode=tr;break}_.offset=Oe,_.extra=15&Pe,_.mode=16203;case 16203:if(_.extra){for(Me=_.extra;W<Me;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}_.offset+=$&(1<<_.extra)-1,$>>>=_.extra,W-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){b.msg="invalid distance too far back",_.mode=tr;break}_.mode=16204;case 16204:if(ne===0)break e;if(X=se-ne,_.offset>X){if(X=_.offset-X,X>_.whave&&_.sane){b.msg="invalid distance too far back",_.mode=tr;break}X>_.wnext?(X-=_.wnext,Ie=_.wsize-X):Ie=_.wnext-X,X>_.length&&(X=_.length),xe=_.window}else xe=T,Ie=Z-_.offset,X=_.length;X>ne&&(X=ne),ne-=X,_.length-=X;do T[Z++]=xe[Ie++];while(--X);_.length===0&&(_.mode=Xo);break;case 16205:if(ne===0)break e;T[Z++]=_.length,ne--,_.mode=Xo;break;case Yc:if(_.wrap){for(;W<32;){if(G===0)break e;G--,$|=D[F++]<<W,W+=8}if(se-=ne,b.total_out+=se,_.total+=se,4&_.wrap&&se&&(b.adler=_.check=_.flags?On(_.check,T,se,Z-se):Jo(_.check,T,se,Z-se)),se=ne,4&_.wrap&&(_.flags?$:Ki($))!==_.check){b.msg="incorrect data check",_.mode=tr;break}$=0,W=0}_.mode=16207;case 16207:if(_.wrap&&_.flags){for(;W<32;){if(G===0)break e;G--,$+=D[F++]<<W,W+=8}if(4&_.wrap&&$!==(4294967295&_.total)){b.msg="incorrect length check",_.mode=tr;break}$=0,W=0}_.mode=16208;case 16208:he=ho;break e;case tr:he=Ol;break e;case 16210:return Lu;default:return _i}return b.next_out=Z,b.avail_out=ne,b.next_in=F,b.avail_in=G,_.hold=$,_.bits=W,(_.wsize||se!==b.avail_out&&_.mode<tr&&(_.mode<Yc||v!==qc))&&rl(b,b.output,b.next_out,se-b.avail_out),ge-=b.avail_in,se-=b.avail_out,b.total_in+=ge,b.total_out+=se,_.total+=se,4&_.wrap&&se&&(b.adler=_.check=_.flags?On(_.check,T,se,b.next_out-se):Jo(_.check,T,se,b.next_out-se)),b.data_type=_.bits+(_.last?64:0)+(_.mode===aa?128:0)+(_.mode===Wo||_.mode===Jc?256:0),(ge===0&&se===0||v===qc)&&he===na&&(he=jc),he},Hn={inflateReset:tl,inflateReset2:Kc,inflateResetKeep:Hl,inflateInit:b=>il(b,15),inflateInit2:il,inflate:$c,inflateEnd:b=>{if(sa(b))return _i;let v=b.state;return v.window&&(v.window=null),b.state=null,na},inflateGetHeader:(b,v)=>{if(sa(b))return _i;const _=b.state;return 2&_.wrap?(_.head=v,v.done=!1,na):_i},inflateSetDictionary:(b,v)=>{const _=v.length;let D,T,F;return sa(b)?_i:(D=b.state,D.wrap!==0&&D.mode!==Ca?_i:D.mode===Ca&&(T=1,T=Jo(T,v,_,0),T!==D.check)?Ol:(F=rl(b,v,_,_),F?(D.mode=16210,Lu):(D.havedict=1,na)))},inflateInfo:"pako inflate (from Nodeca project)"},bn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const g=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:a,Z_OK:c,Z_STREAM_END:h,Z_NEED_DICT:f,Z_STREAM_ERROR:w,Z_DATA_ERROR:E,Z_MEM_ERROR:Q}=Ga;function k(b){this.options=Vn.assign({chunkSize:65536,windowBits:15,to:""},b||{});const v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(v.windowBits>=0&&v.windowBits<16)||b&&b.windowBits||(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&(15&v.windowBits||(v.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ls,this.strm.avail_out=0;let _=Hn.inflateInit2(this.strm,v.windowBits);if(_!==c)throw new Error(Yo[_]);if(this.header=new bn,Hn.inflateGetHeader(this.strm,this.header),v.dictionary&&(typeof v.dictionary=="string"?v.dictionary=Rn.string2buf(v.dictionary):g.call(v.dictionary)==="[object ArrayBuffer]"&&(v.dictionary=new Uint8Array(v.dictionary)),v.raw&&(_=Hn.inflateSetDictionary(this.strm,v.dictionary),_!==c)))throw new Error(Yo[_])}function R(b,v){const _=new k(v);if(_.push(b),_.err)throw _.msg||Yo[_.err];return _.result}k.prototype.push=function(b,v){const _=this.strm,D=this.options.chunkSize,T=this.options.dictionary;let F,Z,G;if(this.ended)return!1;for(Z=v===~~v?v:v===!0?a:e,g.call(b)==="[object ArrayBuffer]"?_.input=new Uint8Array(b):_.input=b,_.next_in=0,_.avail_in=_.input.length;;){for(_.avail_out===0&&(_.output=new Uint8Array(D),_.next_out=0,_.avail_out=D),F=Hn.inflate(_,Z),F===f&&T&&(F=Hn.inflateSetDictionary(_,T),F===c?F=Hn.inflate(_,Z):F===E&&(F=f));_.avail_in>0&&F===h&&_.state.wrap>0&&b[_.next_in]!==0;)Hn.inflateReset(_),F=Hn.inflate(_,Z);switch(F){case w:case E:case f:case Q:return this.onEnd(F),this.ended=!0,!1}if(G=_.avail_out,_.next_out&&(_.avail_out===0||F===h))if(this.options.to==="string"){let ne=Rn.utf8border(_.output,_.next_out),$=_.next_out-ne,W=Rn.buf2string(_.output,ne);_.next_out=$,_.avail_out=D-$,$&&_.output.set(_.output.subarray(ne,ne+$),0),this.onData(W)}else this.onData(_.output.length===_.next_out?_.output:_.output.subarray(0,_.next_out));if(F!==c||G!==0){if(F===h)return F=Hn.inflateEnd(this.strm),this.onEnd(F),this.ended=!0,!0;if(_.avail_in===0)break}}return!0},k.prototype.onData=function(b){this.chunks.push(b)},k.prototype.onEnd=function(b){b===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vn.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};var z={Inflate:k,inflate:R,inflateRaw:function(b,v){return(v=v||{}).raw=!0,R(b,v)},ungzip:R,constants:Ga};const{Inflate:ee,inflate:oe,inflateRaw:ce,ungzip:ye}=z;var be=oe,Ce=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){return be(new Uint8Array(b)).buffer}}}),ke=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){const v=new DataView(b),_=[];for(let D=0;D<b.byteLength;++D){let T=v.getInt8(D);if(T<0){const F=v.getUint8(D+1);T=-T;for(let Z=0;Z<=T;++Z)_.push(F);D+=1}else{for(let F=0;F<=T;++F)_.push(v.getUint8(D+F+1));D+=T+1}}return new Uint8Array(_).buffer}}}),fe={exports:{}};(function(b){/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */(function(){var v,_,D,T,F,Z,G,ne,$,W,ge,se,X,Ie,xe,Qe,Pe=(v={defaultNoDataValue:-34027999387901484e22,decode:function(te,N){var he=(N=N||{}).encodedMaskData||N.encodedMaskData===null,le=F(te,N.inputOffset||0,he),ue=N.noDataValue!==null?N.noDataValue:v.defaultNoDataValue,de=_(le,N.pixelType||Float32Array,N.encodedMaskData,ue,N.returnMask),Me={width:le.width,height:le.height,pixelData:de.resultPixels,minValue:de.minValue,maxValue:le.pixels.maxValue,noDataValue:ue};return de.resultMask&&(Me.maskData=de.resultMask),N.returnEncodedMask&&le.mask&&(Me.encodedMaskData=le.mask.bitset?le.mask.bitset:null),N.returnFileInfo&&(Me.fileInfo=D(le),N.computeUsedBitDepths&&(Me.fileInfo.bitDepths=T(le))),Me}},_=function(te,N,he,le,ue){var de,Me,De,Fe=0,We=te.pixels.numBlocksX,rt=te.pixels.numBlocksY,at=Math.floor(te.width/We),yt=Math.floor(te.height/rt),Tt=2*te.maxZError,it=Number.MAX_VALUE;he=he||(te.mask?te.mask.bitset:null),Me=new N(te.width*te.height),ue&&he&&(De=new Uint8Array(te.width*te.height));for(var $e,dt,$t=new Float32Array(at*yt),St=0;St<=rt;St++){var si=St!==rt?yt:te.height%rt;if(si!==0)for(var Dt=0;Dt<=We;Dt++){var ei=Dt!==We?at:te.width%We;if(ei!==0){var Kt,ui,Jt,Ji,Di=St*te.width*yt+Dt*at,zi=te.width-ei,ki=te.pixels.blocks[Fe];if(ki.encoding<2?(ki.encoding===0?Kt=ki.rawData:(Z(ki.stuffedData,ki.bitsPerPixel,ki.numValidPixels,ki.offset,Tt,$t,te.pixels.maxValue),Kt=$t),ui=0):Jt=ki.encoding===2?0:ki.offset,he)for(dt=0;dt<si;dt++){for(7&Di&&(Ji=he[Di>>3],Ji<<=7&Di),$e=0;$e<ei;$e++)7&Di||(Ji=he[Di>>3]),128&Ji?(De&&(De[Di]=1),it=it>(de=ki.encoding<2?Kt[ui++]:Jt)?de:it,Me[Di++]=de):(De&&(De[Di]=0),Me[Di++]=le),Ji<<=1;Di+=zi}else if(ki.encoding<2)for(dt=0;dt<si;dt++){for($e=0;$e<ei;$e++)it=it>(de=Kt[ui++])?de:it,Me[Di++]=de;Di+=zi}else for(it=it>Jt?Jt:it,dt=0;dt<si;dt++){for($e=0;$e<ei;$e++)Me[Di++]=Jt;Di+=zi}if(ki.encoding===1&&ui!==ki.numValidPixels)throw"Block and Mask do not match";Fe++}}}return{resultPixels:Me,resultMask:De,minValue:it}},D=function(te){return{fileIdentifierString:te.fileIdentifierString,fileVersion:te.fileVersion,imageType:te.imageType,height:te.height,width:te.width,maxZError:te.maxZError,eofOffset:te.eofOffset,mask:te.mask?{numBlocksX:te.mask.numBlocksX,numBlocksY:te.mask.numBlocksY,numBytes:te.mask.numBytes,maxValue:te.mask.maxValue}:null,pixels:{numBlocksX:te.pixels.numBlocksX,numBlocksY:te.pixels.numBlocksY,numBytes:te.pixels.numBytes,maxValue:te.pixels.maxValue,noDataValue:te.noDataValue}}},T=function(te){for(var N=te.pixels.numBlocksX*te.pixels.numBlocksY,he={},le=0;le<N;le++){var ue=te.pixels.blocks[le];ue.encoding===0?he.float32=!0:ue.encoding===1?he[ue.bitsPerPixel]=!0:he[0]=!0}return Object.keys(he)},F=function(te,N,he){var le={},ue=new Uint8Array(te,N,10);if(le.fileIdentifierString=String.fromCharCode.apply(null,ue),le.fileIdentifierString.trim()!=="CntZImage")throw"Unexpected file identifier string: "+le.fileIdentifierString;N+=10;var de=new DataView(te,N,24);if(le.fileVersion=de.getInt32(0,!0),le.imageType=de.getInt32(4,!0),le.height=de.getUint32(8,!0),le.width=de.getUint32(12,!0),le.maxZError=de.getFloat64(16,!0),N+=24,!he)if(de=new DataView(te,N,16),le.mask={},le.mask.numBlocksY=de.getUint32(0,!0),le.mask.numBlocksX=de.getUint32(4,!0),le.mask.numBytes=de.getUint32(8,!0),le.mask.maxValue=de.getFloat32(12,!0),N+=16,le.mask.numBytes>0){var Me=new Uint8Array(Math.ceil(le.width*le.height/8)),De=(de=new DataView(te,N,le.mask.numBytes)).getInt16(0,!0),Fe=2,We=0;do{if(De>0)for(;De--;)Me[We++]=de.getUint8(Fe++);else{var rt=de.getUint8(Fe++);for(De=-De;De--;)Me[We++]=rt}De=de.getInt16(Fe,!0),Fe+=2}while(Fe<le.mask.numBytes);if(De!==-32768||We<Me.length)throw"Unexpected end of mask RLE encoding";le.mask.bitset=Me,N+=le.mask.numBytes}else le.mask.numBytes|le.mask.numBlocksY|le.mask.maxValue||(le.mask.bitset=new Uint8Array(Math.ceil(le.width*le.height/8)));de=new DataView(te,N,16),le.pixels={},le.pixels.numBlocksY=de.getUint32(0,!0),le.pixels.numBlocksX=de.getUint32(4,!0),le.pixels.numBytes=de.getUint32(8,!0),le.pixels.maxValue=de.getFloat32(12,!0),N+=16;var at=le.pixels.numBlocksX,yt=le.pixels.numBlocksY,Tt=at+(le.width%at>0?1:0),it=yt+(le.height%yt>0?1:0);le.pixels.blocks=new Array(Tt*it);for(var $e=0,dt=0;dt<it;dt++)for(var $t=0;$t<Tt;$t++){var St=0,si=te.byteLength-N;de=new DataView(te,N,Math.min(10,si));var Dt={};le.pixels.blocks[$e++]=Dt;var ei=de.getUint8(0);if(St++,Dt.encoding=63&ei,Dt.encoding>3)throw"Invalid block encoding ("+Dt.encoding+")";if(Dt.encoding!==2){if(ei!==0&&ei!==2){if(ei>>=6,Dt.offsetType=ei,ei===2)Dt.offset=de.getInt8(1),St++;else if(ei===1)Dt.offset=de.getInt16(1,!0),St+=2;else{if(ei!==0)throw"Invalid block offset type";Dt.offset=de.getFloat32(1,!0),St+=4}if(Dt.encoding===1)if(ei=de.getUint8(St),St++,Dt.bitsPerPixel=63&ei,ei>>=6,Dt.numValidPixelsType=ei,ei===2)Dt.numValidPixels=de.getUint8(St),St++;else if(ei===1)Dt.numValidPixels=de.getUint16(St,!0),St+=2;else{if(ei!==0)throw"Invalid valid pixel count type";Dt.numValidPixels=de.getUint32(St,!0),St+=4}}var Kt;if(N+=St,Dt.encoding!==3){if(Dt.encoding===0){var ui=(le.pixels.numBytes-1)/4;if(ui!==Math.floor(ui))throw"uncompressed block has invalid length";Kt=new ArrayBuffer(4*ui),new Uint8Array(Kt).set(new Uint8Array(te,N,4*ui));var Jt=new Float32Array(Kt);Dt.rawData=Jt,N+=4*ui}else if(Dt.encoding===1){var Ji=Math.ceil(Dt.numValidPixels*Dt.bitsPerPixel/8),Di=Math.ceil(Ji/4);Kt=new ArrayBuffer(4*Di),new Uint8Array(Kt).set(new Uint8Array(te,N,Ji)),Dt.stuffedData=new Uint32Array(Kt),N+=Ji}}}else N++}return le.eofOffset=N,le},Z=function(te,N,he,le,ue,de,Me){var De,Fe,We,rt=(1<<N)-1,at=0,yt=0,Tt=Math.ceil((Me-le)/ue),it=4*te.length-Math.ceil(N*he/8);for(te[te.length-1]<<=8*it,De=0;De<he;De++){if(yt===0&&(We=te[at++],yt=32),yt>=N)Fe=We>>>yt-N&rt,yt-=N;else{var $e=N-yt;Fe=(We&rt)<<$e&rt,Fe+=(We=te[at++])>>>(yt=32-$e)}de[De]=Fe<Tt?le+Fe*ue:Me}return de},v),Oe=(G=function(te,N,he,le,ue,de,Me,De){var Fe,We,rt,at,yt,Tt=(1<<he)-1,it=0,$e=0,dt=4*te.length-Math.ceil(he*le/8);if(te[te.length-1]<<=8*dt,ue)for(Fe=0;Fe<le;Fe++)$e===0&&(rt=te[it++],$e=32),$e>=he?(We=rt>>>$e-he&Tt,$e-=he):(We=(rt&Tt)<<(at=he-$e)&Tt,We+=(rt=te[it++])>>>($e=32-at)),N[Fe]=ue[We];else for(yt=Math.ceil((De-de)/Me),Fe=0;Fe<le;Fe++)$e===0&&(rt=te[it++],$e=32),$e>=he?(We=rt>>>$e-he&Tt,$e-=he):(We=(rt&Tt)<<(at=he-$e)&Tt,We+=(rt=te[it++])>>>($e=32-at)),N[Fe]=We<yt?de+We*Me:De},ne=function(te,N,he,le,ue,de){var Me,De=(1<<N)-1,Fe=0,We=0,rt=0,at=0,yt=0,Tt=[],it=4*te.length-Math.ceil(N*he/8);te[te.length-1]<<=8*it;var $e=Math.ceil((de-le)/ue);for(We=0;We<he;We++)at===0&&(Me=te[Fe++],at=32),at>=N?(yt=Me>>>at-N&De,at-=N):(yt=(Me&De)<<(rt=N-at)&De,yt+=(Me=te[Fe++])>>>(at=32-rt)),Tt[We]=yt<$e?le+yt*ue:de;return Tt.unshift(le),Tt},$=function(te,N,he,le,ue,de,Me,De){var Fe,We,rt,at,yt=(1<<he)-1,Tt=0,it=0,$e=0;if(ue)for(Fe=0;Fe<le;Fe++)it===0&&(rt=te[Tt++],it=32,$e=0),it>=he?(We=rt>>>$e&yt,it-=he,$e+=he):(We=rt>>>$e&yt,it=32-(at=he-it),We|=((rt=te[Tt++])&(1<<at)-1)<<he-at,$e=at),N[Fe]=ue[We];else{var dt=Math.ceil((De-de)/Me);for(Fe=0;Fe<le;Fe++)it===0&&(rt=te[Tt++],it=32,$e=0),it>=he?(We=rt>>>$e&yt,it-=he,$e+=he):(We=rt>>>$e&yt,it=32-(at=he-it),We|=((rt=te[Tt++])&(1<<at)-1)<<he-at,$e=at),N[Fe]=We<dt?de+We*Me:De}return N},W=function(te,N,he,le,ue,de){var Me,De=(1<<N)-1,Fe=0,We=0,rt=0,at=0,yt=0,Tt=0,it=[],$e=Math.ceil((de-le)/ue);for(We=0;We<he;We++)at===0&&(Me=te[Fe++],at=32,Tt=0),at>=N?(yt=Me>>>Tt&De,at-=N,Tt+=N):(yt=Me>>>Tt&De,at=32-(rt=N-at),yt|=((Me=te[Fe++])&(1<<rt)-1)<<N-rt,Tt=rt),it[We]=yt<$e?le+yt*ue:de;return it.unshift(le),it},ge=function(te,N,he,le){var ue,de,Me,De,Fe=(1<<he)-1,We=0,rt=0,at=4*te.length-Math.ceil(he*le/8);for(te[te.length-1]<<=8*at,ue=0;ue<le;ue++)rt===0&&(Me=te[We++],rt=32),rt>=he?(de=Me>>>rt-he&Fe,rt-=he):(de=(Me&Fe)<<(De=he-rt)&Fe,de+=(Me=te[We++])>>>(rt=32-De)),N[ue]=de;return N},se=function(te,N,he,le){var ue,de,Me,De,Fe=(1<<he)-1,We=0,rt=0,at=0;for(ue=0;ue<le;ue++)rt===0&&(Me=te[We++],rt=32,at=0),rt>=he?(de=Me>>>at&Fe,rt-=he,at+=he):(de=Me>>>at&Fe,rt=32-(De=he-rt),de|=((Me=te[We++])&(1<<De)-1)<<he-De,at=De),N[ue]=de;return N},X={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(te){for(var N=65535,he=65535,le=te.length,ue=Math.floor(le/2),de=0;ue;){var Me=ue>=359?359:ue;ue-=Me;do N+=te[de++]<<8,he+=N+=te[de++];while(--Me);N=(65535&N)+(N>>>16),he=(65535&he)+(he>>>16)}return 1&le&&(he+=N+=te[de]<<8),((he=(65535&he)+(he>>>16))<<16|(N=(65535&N)+(N>>>16)))>>>0},readHeaderInfo:function(te,N){var he=N.ptr,le=new Uint8Array(te,he,6),ue={};if(ue.fileIdentifierString=String.fromCharCode.apply(null,le),ue.fileIdentifierString.lastIndexOf("Lerc2",0)!==0)throw"Unexpected file identifier string (expect Lerc2 ): "+ue.fileIdentifierString;he+=6;var de,Me=new DataView(te,he,8),De=Me.getInt32(0,!0);if(ue.fileVersion=De,he+=4,De>=3&&(ue.checksum=Me.getUint32(4,!0),he+=4),Me=new DataView(te,he,12),ue.height=Me.getUint32(0,!0),ue.width=Me.getUint32(4,!0),he+=8,De>=4?(ue.numDims=Me.getUint32(8,!0),he+=4):ue.numDims=1,Me=new DataView(te,he,40),ue.numValidPixel=Me.getUint32(0,!0),ue.microBlockSize=Me.getInt32(4,!0),ue.blobSize=Me.getInt32(8,!0),ue.imageType=Me.getInt32(12,!0),ue.maxZError=Me.getFloat64(16,!0),ue.zMin=Me.getFloat64(24,!0),ue.zMax=Me.getFloat64(32,!0),he+=40,N.headerInfo=ue,N.ptr=he,De>=3&&(de=De>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(te,he-de,ue.blobSize-14))!==ue.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(te,N){var he=N.headerInfo,le=this.getDataTypeArray(he.imageType),ue=he.numDims*this.getDataTypeSize(he.imageType),de=this.readSubArray(te,N.ptr,le,ue),Me=this.readSubArray(te,N.ptr+ue,le,ue);N.ptr+=2*ue;var De,Fe=!0;for(De=0;De<he.numDims;De++)if(de[De]!==Me[De]){Fe=!1;break}return he.minValues=de,he.maxValues=Me,Fe},readSubArray:function(te,N,he,le){var ue;if(he===Uint8Array)ue=new Uint8Array(te,N,le);else{var de=new ArrayBuffer(le);new Uint8Array(de).set(new Uint8Array(te,N,le)),ue=new he(de)}return ue},readMask:function(te,N){var he,le,ue=N.ptr,de=N.headerInfo,Me=de.width*de.height,De=de.numValidPixel,Fe=new DataView(te,ue,4),We={};if(We.numBytes=Fe.getUint32(0,!0),ue+=4,(De===0||Me===De)&&We.numBytes!==0)throw"invalid mask";if(De===0)he=new Uint8Array(Math.ceil(Me/8)),We.bitset=he,le=new Uint8Array(Me),N.pixels.resultMask=le,ue+=We.numBytes;else if(We.numBytes>0){he=new Uint8Array(Math.ceil(Me/8));var rt=(Fe=new DataView(te,ue,We.numBytes)).getInt16(0,!0),at=2,yt=0,Tt=0;do{if(rt>0)for(;rt--;)he[yt++]=Fe.getUint8(at++);else for(Tt=Fe.getUint8(at++),rt=-rt;rt--;)he[yt++]=Tt;rt=Fe.getInt16(at,!0),at+=2}while(at<We.numBytes);if(rt!==-32768||yt<he.length)throw"Unexpected end of mask RLE encoding";le=new Uint8Array(Me);var it=0,$e=0;for($e=0;$e<Me;$e++)7&$e?(it=he[$e>>3],it<<=7&$e):it=he[$e>>3],128&it&&(le[$e]=1);N.pixels.resultMask=le,We.bitset=he,ue+=We.numBytes}return N.ptr=ue,N.mask=We,!0},readDataOneSweep:function(te,N,he,le){var ue,de=N.ptr,Me=N.headerInfo,De=Me.numDims,Fe=Me.width*Me.height,We=Me.imageType,rt=Me.numValidPixel*X.getDataTypeSize(We)*De,at=N.pixels.resultMask;if(he===Uint8Array)ue=new Uint8Array(te,de,rt);else{var yt=new ArrayBuffer(rt);new Uint8Array(yt).set(new Uint8Array(te,de,rt)),ue=new he(yt)}if(ue.length===Fe*De)N.pixels.resultPixels=le?X.swapDimensionOrder(ue,Fe,De,he,!0):ue;else{N.pixels.resultPixels=new he(Fe*De);var Tt=0,it=0,$e=0,dt=0;if(De>1){if(le){for(it=0;it<Fe;it++)if(at[it])for(dt=it,$e=0;$e<De;$e++,dt+=Fe)N.pixels.resultPixels[dt]=ue[Tt++]}else for(it=0;it<Fe;it++)if(at[it])for(dt=it*De,$e=0;$e<De;$e++)N.pixels.resultPixels[dt+$e]=ue[Tt++]}else for(it=0;it<Fe;it++)at[it]&&(N.pixels.resultPixels[it]=ue[Tt++])}return de+=rt,N.ptr=de,!0},readHuffmanTree:function(te,N){var he=this.HUFFMAN_LUT_BITS_MAX,le=new DataView(te,N.ptr,16);if(N.ptr+=16,le.getInt32(0,!0)<2)throw"unsupported Huffman version";var ue=le.getInt32(4,!0),de=le.getInt32(8,!0),Me=le.getInt32(12,!0);if(de>=Me)return!1;var De=new Uint32Array(Me-de);X.decodeBits(te,N,De);var Fe,We,rt,at,yt=[];for(Fe=de;Fe<Me;Fe++)yt[We=Fe-(Fe<ue?0:ue)]={first:De[Fe-de],second:null};var Tt=te.byteLength-N.ptr,it=Math.ceil(Tt/4),$e=new ArrayBuffer(4*it);new Uint8Array($e).set(new Uint8Array(te,N.ptr,Tt));var dt,$t=new Uint32Array($e),St=0,si=0;for(dt=$t[0],Fe=de;Fe<Me;Fe++)(at=yt[We=Fe-(Fe<ue?0:ue)].first)>0&&(yt[We].second=dt<<St>>>32-at,32-St>=at?(St+=at)===32&&(St=0,dt=$t[++si]):(St+=at-32,dt=$t[++si],yt[We].second|=dt>>>32-St));var Dt=0,ei=0,Kt=new Ie;for(Fe=0;Fe<yt.length;Fe++)yt[Fe]!==void 0&&(Dt=Math.max(Dt,yt[Fe].first));ei=Dt>=he?he:Dt;var ui,Jt,Ji,Di,zi,ki=[];for(Fe=de;Fe<Me;Fe++)if((at=yt[We=Fe-(Fe<ue?0:ue)].first)>0)if(ui=[at,We],at<=ei)for(Jt=yt[We].second<<ei-at,Ji=1<<ei-at,rt=0;rt<Ji;rt++)ki[Jt|rt]=ui;else for(Jt=yt[We].second,zi=Kt,Di=at-1;Di>=0;Di--)Jt>>>Di&1?(zi.right||(zi.right=new Ie),zi=zi.right):(zi.left||(zi.left=new Ie),zi=zi.left),Di!==0||zi.val||(zi.val=ui[1]);return{decodeLut:ki,numBitsLUTQick:ei,numBitsLUT:Dt,tree:Kt,stuffedData:$t,srcPtr:si,bitPos:St}},readHuffman:function(te,N,he,le){var ue,de,Me,De,Fe,We,rt,at,yt,Tt=N.headerInfo.numDims,it=N.headerInfo.height,$e=N.headerInfo.width,dt=$e*it,$t=this.readHuffmanTree(te,N),St=$t.decodeLut,si=$t.tree,Dt=$t.stuffedData,ei=$t.srcPtr,Kt=$t.bitPos,ui=$t.numBitsLUTQick,Jt=$t.numBitsLUT,Ji=N.headerInfo.imageType===0?128:0,Di=N.pixels.resultMask,zi=0;Kt>0&&(ei++,Kt=0);var ki,qr=Dt[ei],xn=N.encodeMode===1,fo=new he(dt*Tt),mi=fo;if(Tt<2||xn){for(ki=0;ki<Tt;ki++)if(Tt>1&&(mi=new he(fo.buffer,dt*ki,dt),zi=0),N.headerInfo.numValidPixel===$e*it)for(at=0,We=0;We<it;We++)for(rt=0;rt<$e;rt++,at++){if(de=0,Fe=De=qr<<Kt>>>32-ui,32-Kt<ui&&(Fe=De|=Dt[ei+1]>>>64-Kt-ui),St[Fe])de=St[Fe][1],Kt+=St[Fe][0];else for(Fe=De=qr<<Kt>>>32-Jt,32-Kt<Jt&&(Fe=De|=Dt[ei+1]>>>64-Kt-Jt),ue=si,yt=0;yt<Jt;yt++)if(!(ue=De>>>Jt-yt-1&1?ue.right:ue.left).left&&!ue.right){de=ue.val,Kt=Kt+yt+1;break}Kt>=32&&(Kt-=32,qr=Dt[++ei]),Me=de-Ji,xn?(Me+=rt>0?zi:We>0?mi[at-$e]:zi,Me&=255,mi[at]=Me,zi=Me):mi[at]=Me}else for(at=0,We=0;We<it;We++)for(rt=0;rt<$e;rt++,at++)if(Di[at]){if(de=0,Fe=De=qr<<Kt>>>32-ui,32-Kt<ui&&(Fe=De|=Dt[ei+1]>>>64-Kt-ui),St[Fe])de=St[Fe][1],Kt+=St[Fe][0];else for(Fe=De=qr<<Kt>>>32-Jt,32-Kt<Jt&&(Fe=De|=Dt[ei+1]>>>64-Kt-Jt),ue=si,yt=0;yt<Jt;yt++)if(!(ue=De>>>Jt-yt-1&1?ue.right:ue.left).left&&!ue.right){de=ue.val,Kt=Kt+yt+1;break}Kt>=32&&(Kt-=32,qr=Dt[++ei]),Me=de-Ji,xn?(rt>0&&Di[at-1]?Me+=zi:We>0&&Di[at-$e]?Me+=mi[at-$e]:Me+=zi,Me&=255,mi[at]=Me,zi=Me):mi[at]=Me}}else for(at=0,We=0;We<it;We++)for(rt=0;rt<$e;rt++)if(at=We*$e+rt,!Di||Di[at])for(ki=0;ki<Tt;ki++,at+=dt){if(de=0,Fe=De=qr<<Kt>>>32-ui,32-Kt<ui&&(Fe=De|=Dt[ei+1]>>>64-Kt-ui),St[Fe])de=St[Fe][1],Kt+=St[Fe][0];else for(Fe=De=qr<<Kt>>>32-Jt,32-Kt<Jt&&(Fe=De|=Dt[ei+1]>>>64-Kt-Jt),ue=si,yt=0;yt<Jt;yt++)if(!(ue=De>>>Jt-yt-1&1?ue.right:ue.left).left&&!ue.right){de=ue.val,Kt=Kt+yt+1;break}Kt>=32&&(Kt-=32,qr=Dt[++ei]),Me=de-Ji,mi[at]=Me}N.ptr=N.ptr+4*(ei+1)+(Kt>0?4:0),N.pixels.resultPixels=fo,Tt>1&&!le&&(N.pixels.resultPixels=X.swapDimensionOrder(fo,dt,Tt,he))},decodeBits:function(te,N,he,le,ue){var de=N.headerInfo,Me=de.fileVersion,De=0,Fe=te.byteLength-N.ptr>=5?5:te.byteLength-N.ptr,We=new DataView(te,N.ptr,Fe),rt=We.getUint8(0);De++;var at=rt>>6,yt=at===0?4:3-at,Tt=(32&rt)>0,it=31&rt,$e=0;if(yt===1)$e=We.getUint8(De),De++;else if(yt===2)$e=We.getUint16(De,!0),De+=2;else{if(yt!==4)throw"Invalid valid pixel count type";$e=We.getUint32(De,!0),De+=4}var dt,$t,St,si,Dt,ei,Kt,ui,Jt,Ji=2*de.maxZError,Di=de.numDims>1?de.maxValues[ue]:de.zMax;if(Tt){for(N.counter.lut++,ui=We.getUint8(De),De++,si=Math.ceil((ui-1)*it/8),Dt=Math.ceil(si/4),$t=new ArrayBuffer(4*Dt),St=new Uint8Array($t),N.ptr+=De,St.set(new Uint8Array(te,N.ptr,si)),Kt=new Uint32Array($t),N.ptr+=si,Jt=0;ui-1>>>Jt;)Jt++;si=Math.ceil($e*Jt/8),Dt=Math.ceil(si/4),$t=new ArrayBuffer(4*Dt),(St=new Uint8Array($t)).set(new Uint8Array(te,N.ptr,si)),dt=new Uint32Array($t),N.ptr+=si,ei=Me>=3?W(Kt,it,ui-1,le,Ji,Di):ne(Kt,it,ui-1,le,Ji,Di),Me>=3?$(dt,he,Jt,$e,ei):G(dt,he,Jt,$e,ei)}else N.counter.bitstuffer++,Jt=it,N.ptr+=De,Jt>0&&(si=Math.ceil($e*Jt/8),Dt=Math.ceil(si/4),$t=new ArrayBuffer(4*Dt),(St=new Uint8Array($t)).set(new Uint8Array(te,N.ptr,si)),dt=new Uint32Array($t),N.ptr+=si,Me>=3?le==null?se(dt,he,Jt,$e):$(dt,he,Jt,$e,!1,le,Ji,Di):le==null?ge(dt,he,Jt,$e):G(dt,he,Jt,$e,!1,le,Ji,Di))},readTiles:function(te,N,he,le){var ue=N.headerInfo,de=ue.width,Me=ue.height,De=de*Me,Fe=ue.microBlockSize,We=ue.imageType,rt=X.getDataTypeSize(We),at=Math.ceil(de/Fe),yt=Math.ceil(Me/Fe);N.pixels.numBlocksY=yt,N.pixels.numBlocksX=at,N.pixels.ptr=0;var Tt,it,$e,dt,$t,St,si,Dt,ei,Kt,ui=0,Jt=0,Ji=0,Di=0,zi=0,ki=0,qr=0,xn=0,fo=0,mi=0,Fs=0,zs=0,Gr=0,jl=0,Ln=0,Na=new he(Fe*Fe),nl=Me%Fe||Fe,zu=de%Fe||Fe,Jl=ue.numDims,Ua=N.pixels.resultMask,Ba=N.pixels.resultPixels,Eh=ue.fileVersion>=5?14:15,Qh=ue.zMax;for(Ji=0;Ji<yt;Ji++)for(zi=Ji!==yt-1?Fe:nl,Di=0;Di<at;Di++)for(mi=Ji*de*Fe+Di*Fe,Fs=de-(ki=Di!==at-1?Fe:zu),Dt=0;Dt<Jl;Dt++){if(Jl>1?(Kt=Ba,mi=Ji*de*Fe+Di*Fe,Ba=new he(N.pixels.resultPixels.buffer,De*Dt*rt,De),Qh=ue.maxValues[Dt]):Kt=null,qr=te.byteLength-N.ptr,it={},Ln=0,xn=(Tt=new DataView(te,N.ptr,Math.min(10,qr))).getUint8(0),Ln++,ei=ue.fileVersion>=5?4&xn:0,fo=xn>>6&255,(xn>>2&Eh)!=(Di*Fe>>3&Eh)||ei&&Dt===0)throw"integrity issue";if(($t=3&xn)>3)throw N.ptr+=Ln,"Invalid block encoding ("+$t+")";if($t!==2)if($t===0){if(ei)throw"integrity issue";if(N.counter.uncompressed++,N.ptr+=Ln,zs=(zs=zi*ki*rt)<(Gr=te.byteLength-N.ptr)?zs:Gr,$e=new ArrayBuffer(zs%rt==0?zs:zs+rt-zs%rt),new Uint8Array($e).set(new Uint8Array(te,N.ptr,zs)),dt=new he($e),jl=0,Ua)for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ua[mi]&&(Ba[mi]=dt[jl++]),mi++;mi+=Fs}else for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ba[mi++]=dt[jl++];mi+=Fs}N.ptr+=jl*rt}else if(St=X.getDataTypeUsed(ei&&We<6?4:We,fo),si=X.getOnePixel(it,Ln,St,Tt),Ln+=X.getDataTypeSize(St),$t===3)if(N.ptr+=Ln,N.counter.constantoffset++,Ua)for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ua[mi]&&(Ba[mi]=ei?Math.min(Qh,Kt[mi]+si):si),mi++;mi+=Fs}else for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ba[mi]=ei?Math.min(Qh,Kt[mi]+si):si,mi++;mi+=Fs}else if(N.ptr+=Ln,X.decodeBits(te,N,Na,si,Dt),Ln=0,ei)if(Ua)for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ua[mi]&&(Ba[mi]=Na[Ln++]+Kt[mi]),mi++;mi+=Fs}else for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ba[mi]=Na[Ln++]+Kt[mi],mi++;mi+=Fs}else if(Ua)for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ua[mi]&&(Ba[mi]=Na[Ln++]),mi++;mi+=Fs}else for(ui=0;ui<zi;ui++){for(Jt=0;Jt<ki;Jt++)Ba[mi++]=Na[Ln++];mi+=Fs}else{if(ei)if(Ua)for(ui=0;ui<zi;ui++)for(Jt=0;Jt<ki;Jt++)Ua[mi]&&(Ba[mi]=Kt[mi]),mi++;else for(ui=0;ui<zi;ui++)for(Jt=0;Jt<ki;Jt++)Ba[mi]=Kt[mi],mi++;N.counter.constant++,N.ptr+=Ln}}Jl>1&&!le&&(N.pixels.resultPixels=X.swapDimensionOrder(N.pixels.resultPixels,De,Jl,he))},formatFileInfo:function(te){return{fileIdentifierString:te.headerInfo.fileIdentifierString,fileVersion:te.headerInfo.fileVersion,imageType:te.headerInfo.imageType,height:te.headerInfo.height,width:te.headerInfo.width,numValidPixel:te.headerInfo.numValidPixel,microBlockSize:te.headerInfo.microBlockSize,blobSize:te.headerInfo.blobSize,maxZError:te.headerInfo.maxZError,pixelType:X.getPixelType(te.headerInfo.imageType),eofOffset:te.eofOffset,mask:te.mask?{numBytes:te.mask.numBytes}:null,pixels:{numBlocksX:te.pixels.numBlocksX,numBlocksY:te.pixels.numBlocksY,maxValue:te.headerInfo.zMax,minValue:te.headerInfo.zMin,noDataValue:te.noDataValue}}},constructConstantSurface:function(te,N){var he=te.headerInfo.zMax,le=te.headerInfo.zMin,ue=te.headerInfo.maxValues,de=te.headerInfo.numDims,Me=te.headerInfo.height*te.headerInfo.width,De=0,Fe=0,We=0,rt=te.pixels.resultMask,at=te.pixels.resultPixels;if(rt)if(de>1){if(N)for(De=0;De<de;De++)for(We=De*Me,he=ue[De],Fe=0;Fe<Me;Fe++)rt[Fe]&&(at[We+Fe]=he);else for(Fe=0;Fe<Me;Fe++)if(rt[Fe])for(We=Fe*de,De=0;De<de;De++)at[We+de]=ue[De]}else for(Fe=0;Fe<Me;Fe++)rt[Fe]&&(at[Fe]=he);else if(de>1&&le!==he)if(N)for(De=0;De<de;De++)for(We=De*Me,he=ue[De],Fe=0;Fe<Me;Fe++)at[We+Fe]=he;else for(Fe=0;Fe<Me;Fe++)for(We=Fe*de,De=0;De<de;De++)at[We+De]=ue[De];else for(Fe=0;Fe<Me*de;Fe++)at[Fe]=he},getDataTypeArray:function(te){var N;switch(te){case 0:N=Int8Array;break;case 1:N=Uint8Array;break;case 2:N=Int16Array;break;case 3:N=Uint16Array;break;case 4:N=Int32Array;break;case 5:N=Uint32Array;break;case 6:default:N=Float32Array;break;case 7:N=Float64Array}return N},getPixelType:function(te){var N;switch(te){case 0:N="S8";break;case 1:N="U8";break;case 2:N="S16";break;case 3:N="U16";break;case 4:N="S32";break;case 5:N="U32";break;case 6:default:N="F32";break;case 7:N="F64"}return N},isValidPixelValue:function(te,N){if(N==null)return!1;var he;switch(te){case 0:he=N>=-128&&N<=127;break;case 1:he=N>=0&&N<=255;break;case 2:he=N>=-32768&&N<=32767;break;case 3:he=N>=0&&N<=65536;break;case 4:he=N>=-2147483648&&N<=2147483647;break;case 5:he=N>=0&&N<=4294967296;break;case 6:he=N>=-34027999387901484e22&&N<=34027999387901484e22;break;case 7:he=N>=-17976931348623157e292&&N<=17976931348623157e292;break;default:he=!1}return he},getDataTypeSize:function(te){var N=0;switch(te){case 0:case 1:N=1;break;case 2:case 3:N=2;break;case 4:case 5:case 6:N=4;break;case 7:N=8;break;default:N=te}return N},getDataTypeUsed:function(te,N){var he=te;switch(te){case 2:case 4:he=te-N;break;case 3:case 5:he=te-2*N;break;case 6:he=N===0?te:N===1?2:1;break;case 7:he=N===0?te:te-2*N+1;break;default:he=te}return he},getOnePixel:function(te,N,he,le){var ue=0;switch(he){case 0:ue=le.getInt8(N);break;case 1:ue=le.getUint8(N);break;case 2:ue=le.getInt16(N,!0);break;case 3:ue=le.getUint16(N,!0);break;case 4:ue=le.getInt32(N,!0);break;case 5:ue=le.getUInt32(N,!0);break;case 6:ue=le.getFloat32(N,!0);break;case 7:ue=le.getFloat64(N,!0);break;default:throw"the decoder does not understand this pixel type"}return ue},swapDimensionOrder:function(te,N,he,le,ue){var de=0,Me=0,De=0,Fe=0,We=te;if(he>1)if(We=new le(N*he),ue)for(de=0;de<N;de++)for(Fe=de,De=0;De<he;De++,Fe+=N)We[Fe]=te[Me++];else for(de=0;de<N;de++)for(Fe=de,De=0;De<he;De++,Fe+=N)We[Me++]=te[Fe];return We}},Ie=function(te,N,he){this.val=te,this.left=N,this.right=he},{decode:function(te,N){var he=(N=N||{}).noDataValue,le=0,ue={};if(ue.ptr=N.inputOffset||0,ue.pixels={},X.readHeaderInfo(te,ue)){var de=ue.headerInfo,Me=de.fileVersion,De=X.getDataTypeArray(de.imageType);if(Me>5)throw"unsupported lerc version 2."+Me;X.readMask(te,ue),de.numValidPixel===de.width*de.height||ue.pixels.resultMask||(ue.pixels.resultMask=N.maskData);var Fe=de.width*de.height;ue.pixels.resultPixels=new De(Fe*de.numDims),ue.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var We,rt=!N.returnPixelInterleavedDims;if(de.numValidPixel!==0)if(de.zMax===de.zMin)X.constructConstantSurface(ue,rt);else if(Me>=4&&X.checkMinMaxRanges(te,ue))X.constructConstantSurface(ue,rt);else{var at=new DataView(te,ue.ptr,2),yt=at.getUint8(0);if(ue.ptr++,yt)X.readDataOneSweep(te,ue,De,rt);else if(Me>1&&de.imageType<=1&&Math.abs(de.maxZError-.5)<1e-5){var Tt=at.getUint8(1);if(ue.ptr++,ue.encodeMode=Tt,Tt>2||Me<4&&Tt>1)throw"Invalid Huffman flag "+Tt;Tt?X.readHuffman(te,ue,De,rt):X.readTiles(te,ue,De,rt)}else X.readTiles(te,ue,De,rt)}ue.eofOffset=ue.ptr,N.inputOffset?(We=ue.headerInfo.blobSize+N.inputOffset-ue.ptr,Math.abs(We)>=1&&(ue.eofOffset=N.inputOffset+ue.headerInfo.blobSize)):(We=ue.headerInfo.blobSize-ue.ptr,Math.abs(We)>=1&&(ue.eofOffset=ue.headerInfo.blobSize));var it={width:de.width,height:de.height,pixelData:ue.pixels.resultPixels,minValue:de.zMin,maxValue:de.zMax,validPixelCount:de.numValidPixel,dimCount:de.numDims,dimStats:{minValues:de.minValues,maxValues:de.maxValues},maskData:ue.pixels.resultMask};if(ue.pixels.resultMask&&X.isValidPixelValue(de.imageType,he)){var $e=ue.pixels.resultMask;for(le=0;le<Fe;le++)$e[le]||(it.pixelData[le]=he);it.noDataValue=he}return ue.noDataValue=he,N.returnFileInfo&&(it.fileInfo=X.formatFileInfo(ue)),it}},getBandCount:function(te){for(var N=0,he=0,le={ptr:0,pixels:{}};he<te.byteLength-58;)X.readHeaderInfo(te,le),he+=le.headerInfo.blobSize,N++,le.ptr=he;return N}}),Te=(xe=new ArrayBuffer(4),Qe=new Uint8Array(xe),new Uint32Array(xe)[0]=1,Qe[0]===1),Ke={decode:function(te,N){if(!Te)throw"Big endian system is not supported.";var he,le,ue=(N=N||{}).inputOffset||0,de=new Uint8Array(te,ue,10),Me=String.fromCharCode.apply(null,de);if(Me.trim()==="CntZImage")he=Pe,le=1;else{if(Me.substring(0,5)!=="Lerc2")throw"Unexpected file identifier string: "+Me;he=Oe,le=2}for(var De,Fe,We,rt,at,yt,Tt=0,it=te.byteLength-10,$e=[],dt={width:0,height:0,pixels:[],pixelType:N.pixelType,mask:null,statistics:[]},$t=0;ue<it;){var St=he.decode(te,{inputOffset:ue,encodedMaskData:De,maskData:We,returnMask:Tt===0,returnEncodedMask:Tt===0,returnFileInfo:!0,returnPixelInterleavedDims:N.returnPixelInterleavedDims,pixelType:N.pixelType||null,noDataValue:N.noDataValue||null});ue=St.fileInfo.eofOffset,We=St.maskData,Tt===0&&(De=St.encodedMaskData,dt.width=St.width,dt.height=St.height,dt.dimCount=St.dimCount||1,dt.pixelType=St.pixelType||St.fileInfo.pixelType,dt.mask=We),le>1&&(We&&$e.push(We),St.fileInfo.mask&&St.fileInfo.mask.numBytes>0&&$t++),Tt++,dt.pixels.push(St.pixelData),dt.statistics.push({minValue:St.minValue,maxValue:St.maxValue,noDataValue:St.noDataValue,dimStats:St.dimStats})}if(le>1&&$t>1){for(yt=dt.width*dt.height,dt.bandMasks=$e,(We=new Uint8Array(yt)).set($e[0]),rt=1;rt<$e.length;rt++)for(Fe=$e[rt],at=0;at<yt;at++)We[at]=We[at]&Fe[at];dt.maskData=We}return dt}};b.exports?b.exports=Ke:this.Lerc=Ke})()})(fe);var ze=bt(fe.exports);let Ue,Je,ct;const wt={env:{emscripten_notify_memory_growth:function(b){ct=new Uint8Array(Je.exports.memory.buffer)}}},Rt="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",Ht=new class{init(){return Ue||(Ue=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Rt).then(b=>b.arrayBuffer()).then(b=>WebAssembly.instantiate(b,wt)).then(this._init):WebAssembly.instantiate(Buffer.from(Rt,"base64"),wt).then(this._init),Ue)}_init(b){Je=b.instance,wt.env.emscripten_notify_memory_growth(0)}decode(b,v=0){if(!Je)throw new Error("ZSTDDecoder: Await .init() before decoding.");const _=b.byteLength,D=Je.exports.malloc(_);ct.set(b,D),v=v||Number(Je.exports.ZSTD_findDecompressedSize(D,_));const T=Je.exports.malloc(v),F=Je.exports.ZSTD_decompress(T,v,D,_),Z=ct.slice(T,T+F);return Je.exports.free(D),Je.exports.free(T),Z}};var Pt=Object.freeze({__proto__:null,default:class extends _a{constructor(b){super(),this.planarConfiguration=b.PlanarConfiguration!==void 0?b.PlanarConfiguration:1,this.samplesPerPixel=b.SamplesPerPixel!==void 0?b.SamplesPerPixel:1,this.addCompression=b.LercParameters[kt]}decodeBlock(b){switch(this.addCompression){case li:break;case gi:b=be(new Uint8Array(b)).buffer;break;case Oi:b=Ht.decode(new Uint8Array(b)).buffer;break;default:throw new Error(`Unsupported LERC additional compression method identifier: ${this.addCompression}`)}return ze.decode(b,{returnPixelInterleavedDims:this.planarConfiguration===1}).pixels[0].buffer}},zstd:Ht}),Mt=Object.freeze({__proto__:null,default:class extends _a{constructor(){if(super(),typeof createImageBitmap>"u")throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if(typeof document>"u"&&typeof OffscreenCanvas>"u")throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available")}async decode(b,v){const _=new Blob([v]),D=await createImageBitmap(_);let T;typeof document<"u"?(T=document.createElement("canvas"),T.width=D.width,T.height=D.height):T=new OffscreenCanvas(D.width,D.height);const F=T.getContext("2d");return F.drawImage(D,0,0),F.getImageData(0,0,D.width,D.height).data.buffer}}}),Xt=Worker,Ii=Object.freeze({__proto__:null,create:function(){const b='function A(A,e,t,i,r,I,g){try{var n=A[I](g),a=n.value}catch(A){return void t(A)}n.done?e(a):Promise.resolve(a).then(i,r)}function e(e){return function(){var t=this,i=arguments;return new Promise((function(r,I){var g=e.apply(t,i);function n(e){A(g,r,I,n,a,"next",e)}function a(e){A(g,r,I,n,a,"throw",e)}n(void 0)}))}}function t(A){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(A)}var i={exports:{}};!function(A){var e=function(A){var e,i=Object.prototype,r=i.hasOwnProperty,I="function"==typeof Symbol?Symbol:{},g=I.iterator||"@@iterator",n=I.asyncIterator||"@@asyncIterator",a=I.toStringTag||"@@toStringTag";function o(A,e,t){return Object.defineProperty(A,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),A[e]}try{o({},"")}catch(A){o=function(A,e,t){return A[e]=t}}function B(A,e,t,i){var r=e&&e.prototype instanceof h?e:h,I=Object.create(r.prototype),g=new S(i||[]);return I._invoke=function(A,e,t){var i=Q;return function(r,I){if(i===s)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw I;return R()}for(t.method=r,t.arg=I;;){var g=t.delegate;if(g){var n=m(g,t);if(n){if(n===c)continue;return n}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(i===Q)throw i=f,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);i=s;var a=C(A,e,t);if("normal"===a.type){if(i=t.done?f:E,a.arg===c)continue;return{value:a.arg,done:t.done}}"throw"===a.type&&(i=f,t.method="throw",t.arg=a.arg)}}}(A,t,g),I}function C(A,e,t){try{return{type:"normal",arg:A.call(e,t)}}catch(A){return{type:"throw",arg:A}}}A.wrap=B;var Q="suspendedStart",E="suspendedYield",s="executing",f="completed",c={};function h(){}function l(){}function u(){}var w={};o(w,g,(function(){return this}));var d=Object.getPrototypeOf,D=d&&d(d(v([])));D&&D!==i&&r.call(D,g)&&(w=D);var y=u.prototype=h.prototype=Object.create(w);function k(A){["next","throw","return"].forEach((function(e){o(A,e,(function(A){return this._invoke(e,A)}))}))}function p(A,e){function i(I,g,n,a){var o=C(A[I],A,g);if("throw"!==o.type){var B=o.arg,Q=B.value;return Q&&"object"===t(Q)&&r.call(Q,"__await")?e.resolve(Q.__await).then((function(A){i("next",A,n,a)}),(function(A){i("throw",A,n,a)})):e.resolve(Q).then((function(A){B.value=A,n(B)}),(function(A){return i("throw",A,n,a)}))}a(o.arg)}var I;this._invoke=function(A,t){function r(){return new e((function(e,r){i(A,t,e,r)}))}return I=I?I.then(r,r):r()}}function m(A,t){var i=A.iterator[t.method];if(i===e){if(t.delegate=null,"throw"===t.method){if(A.iterator.return&&(t.method="return",t.arg=e,m(A,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return c}var r=C(i,A.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var I=r.arg;return I?I.done?(t[A.resultName]=I.value,t.next=A.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,c):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function G(A){var e={tryLoc:A[0]};1 in A&&(e.catchLoc=A[1]),2 in A&&(e.finallyLoc=A[2],e.afterLoc=A[3]),this.tryEntries.push(e)}function F(A){var e=A.completion||{};e.type="normal",delete e.arg,A.completion=e}function S(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(G,this),this.reset(!0)}function v(A){if(A){var t=A[g];if(t)return t.call(A);if("function"==typeof A.next)return A;if(!isNaN(A.length)){var i=-1,I=function t(){for(;++i<A.length;)if(r.call(A,i))return t.value=A[i],t.done=!1,t;return t.value=e,t.done=!0,t};return I.next=I}}return{next:R}}function R(){return{value:e,done:!0}}return l.prototype=u,o(y,"constructor",u),o(u,"constructor",l),l.displayName=o(u,a,"GeneratorFunction"),A.isGeneratorFunction=function(A){var e="function"==typeof A&&A.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,u):(A.__proto__=u,o(A,a,"GeneratorFunction")),A.prototype=Object.create(y),A},A.awrap=function(A){return{__await:A}},k(p.prototype),o(p.prototype,n,(function(){return this})),A.AsyncIterator=p,A.async=function(e,t,i,r,I){void 0===I&&(I=Promise);var g=new p(B(e,t,i,r),I);return A.isGeneratorFunction(t)?g:g.next().then((function(A){return A.done?A.value:g.next()}))},k(y),o(y,a,"Generator"),o(y,g,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),A.keys=function(A){var e=[];for(var t in A)e.push(t);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in A)return t.value=i,t.done=!1,t}return t.done=!0,t}},A.values=v,S.prototype={constructor:S,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!A)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if("throw"===A.type)throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var t=this;function i(i,r){return n.type="throw",n.arg=A,t.next=i,r&&(t.method="next",t.arg=e),!!r}for(var I=this.tryEntries.length-1;I>=0;--I){var g=this.tryEntries[I],n=g.completion;if("root"===g.tryLoc)return i("end");if(g.tryLoc<=this.prev){var a=r.call(g,"catchLoc"),o=r.call(g,"finallyLoc");if(a&&o){if(this.prev<g.catchLoc)return i(g.catchLoc,!0);if(this.prev<g.finallyLoc)return i(g.finallyLoc)}else if(a){if(this.prev<g.catchLoc)return i(g.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return i(g.finallyLoc)}}}},abrupt:function(A,e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var I=i;break}}I&&("break"===A||"continue"===A)&&I.tryLoc<=e&&e<=I.finallyLoc&&(I=null);var g=I?I.completion:{};return g.type=A,g.arg=e,I?(this.method="next",this.next=I.finallyLoc,c):this.complete(g)},complete:function(A,e){if("throw"===A.type)throw A.arg;return"break"===A.type||"continue"===A.type?this.next=A.arg:"return"===A.type?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):"normal"===A.type&&e&&(this.next=e),c},finish:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===A)return this.complete(t.completion,t.afterLoc),F(t),c}},catch:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===A){var i=t.completion;if("throw"===i.type){var r=i.arg;F(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(A,t,i){return this.delegate={iterator:v(A),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=e),c}},A}(A.exports);try{regeneratorRuntime=e}catch(A){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(i);var r=i.exports,I=new Map;function g(A,e){Array.isArray(A)||(A=[A]),A.forEach((function(A){return I.set(A,e)}))}function n(A){return a.apply(this,arguments)}function a(){return(a=e(r.mark((function A(e){var t,i;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t=I.get(e.Compression)){A.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return A.next=5,t();case 5:return i=A.sent,A.abrupt("return",new i(e));case 7:case"end":return A.stop()}}),A)})))).apply(this,arguments)}g([void 0,1],(function(){return Promise.resolve().then((function(){return y})).then((function(A){return A.default}))})),g(5,(function(){return Promise.resolve().then((function(){return F})).then((function(A){return A.default}))})),g(6,(function(){throw new Error("old style JPEG compression is not supported.")})),g(7,(function(){return Promise.resolve().then((function(){return N})).then((function(A){return A.default}))})),g([8,32946],(function(){return Promise.resolve().then((function(){return OA})).then((function(A){return A.default}))})),g(32773,(function(){return Promise.resolve().then((function(){return _A})).then((function(A){return A.default}))})),g(34887,(function(){return Promise.resolve().then((function(){return le})).then(function(){var A=e(r.mark((function A(e){return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,e.zstd.init();case 2:return A.abrupt("return",e);case 3:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}()).then((function(A){return A.default}))})),g(50001,(function(){return Promise.resolve().then((function(){return de})).then((function(A){return A.default}))}));var o=globalThis;function B(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}function C(A,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(A,i.key,i)}}function Q(A,e,t){return e&&C(A.prototype,e),t&&C(A,t),A}function E(A,e){return E=Object.setPrototypeOf||function(A,e){return A.__proto__=e,A},E(A,e)}function s(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),e&&E(A,e)}function f(A,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(void 0===A)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return A}(A)}function c(A){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},c(A)}function h(A,e){var t=A.length-e,i=0;do{for(var r=e;r>0;r--)A[i+e]+=A[i],i++;t-=e}while(t>0)}function l(A,e,t){for(var i=0,r=A.length,I=r/t;r>e;){for(var g=e;g>0;--g)A[i+e]+=A[i],++i;r-=e}for(var n=A.slice(),a=0;a<I;++a)for(var o=0;o<t;++o)A[t*a+o]=n[(t-o-1)*I+a]}function u(A,e,t,i,r,I){if(!e||1===e)return A;for(var g=0;g<r.length;++g){if(r[g]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(r[g]!==r[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var n=r[0]/8,a=2===I?1:r.length,o=0;o<i&&!(o*a*t*n>=A.byteLength);++o){var B=void 0;if(2===e){switch(r[0]){case 8:B=new Uint8Array(A,o*a*t*n,a*t*n);break;case 16:B=new Uint16Array(A,o*a*t*n,a*t*n/2);break;case 32:B=new Uint32Array(A,o*a*t*n,a*t*n/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(r[0]," bits per sample."))}h(B,a)}else 3===e&&l(B=new Uint8Array(A,o*a*t*n,a*t*n),a,n)}return A}o.addEventListener("message",function(){var A=e(r.mark((function A(e){var t,i,I,g,a,B;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.data,i=t.id,I=t.fileDirectory,g=t.buffer,A.next=3,n(I);case 3:return a=A.sent,A.next=6,a.decode(I,g);case 6:B=A.sent,o.postMessage({decoded:B,id:i},[B]);case 8:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}());var w=function(){function A(){B(this,A)}var t;return Q(A,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n,a;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.decodeBlock(t);case 2:if(i=A.sent,1===(I=e.Predictor||1)){A.next=9;break}return g=!e.StripOffsets,n=g?e.TileWidth:e.ImageWidth,a=g?e.TileLength:e.RowsPerStrip||e.ImageLength,A.abrupt("return",u(i,I,n,a,e.BitsPerSample,e.PlanarConfiguration));case 9:return A.abrupt("return",i);case 10:case"end":return A.stop()}}),A,this)}))),function(A,e){return t.apply(this,arguments)})}]),A}();function d(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var D=function(A){s(t,w);var e=d(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return A}}]),t}(),y=Object.freeze({__proto__:null,default:D});function k(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}function p(A,e){for(var t=e.length-1;t>=0;t--)A.push(e[t]);return A}function m(A){for(var e=new Uint16Array(4093),t=new Uint8Array(4093),i=0;i<=257;i++)e[i]=4096,t[i]=i;var r=258,I=9,g=0;function n(){r=258,I=9}function a(A){var e=function(A,e,t){var i=e%8,r=Math.floor(e/8),I=8-i,g=e+t-8*(r+1),n=8*(r+2)-(e+t),a=8*(r+2)-e;if(n=Math.max(0,n),r>=A.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var o=A[r]&Math.pow(2,8-i)-1,B=o<<=t-I;if(r+1<A.length){var C=A[r+1]>>>n;B+=C<<=Math.max(0,t-a)}if(g>8&&r+2<A.length){var Q=8*(r+3)-(e+t);B+=A[r+2]>>>Q}return B}(A,g,I);return g+=I,e}function o(A,i){return t[r]=i,e[r]=A,++r-1}function B(A){for(var i=[],r=A;4096!==r;r=e[r])i.push(t[r]);return i}var C=[];n();for(var Q,E=new Uint8Array(A),s=a(E);257!==s;){if(256===s){for(n(),s=a(E);256===s;)s=a(E);if(257===s)break;if(s>256)throw new Error("corrupted code at scanline ".concat(s));p(C,B(s)),Q=s}else if(s<r){var f=B(s);p(C,f),o(Q,f[f.length-1]),Q=s}else{var c=B(Q);if(!c)throw new Error("Bogus entry. Not in dictionary, ".concat(Q," / ").concat(r,", position: ").concat(g));p(C,c),C.push(c[c.length-1]),o(Q,c[c.length-1]),Q=s}r+1>=Math.pow(2,I)&&(12===I?Q=void 0:I++),s=a(E)}return new Uint8Array(C)}var G=function(A){s(t,w);var e=k(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return m(A).buffer}}]),t}(),F=Object.freeze({__proto__:null,default:G});function S(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var v=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function R(A,e){for(var t=0,i=[],r=16;r>0&&!A[r-1];)--r;i.push({children:[],index:0});for(var I,g=i[0],n=0;n<r;n++){for(var a=0;a<A[n];a++){for((g=i.pop()).children[g.index]=e[t];g.index>0;)g=i.pop();for(g.index++,i.push(g);i.length<=n;)i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I;t++}n+1<r&&(i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I)}return i[0].children}function U(A,e,i,r,I,g,n,a,o){var B=i.mcusPerLine,C=i.progressive,Q=e,E=e,s=0,f=0;function c(){if(f>0)return f--,s>>f&1;if(255===(s=A[E++])){var e=A[E++];if(e)throw new Error("unexpected marker: ".concat((s<<8|e).toString(16)))}return f=7,s>>>7}function h(A){for(var e,i=A;null!==(e=c());){if("number"==typeof(i=i[e]))return i;if("object"!==t(i))throw new Error("invalid huffman sequence")}return null}function l(A){for(var e=A,t=0;e>0;){var i=c();if(null===i)return;t=t<<1|i,--e}return t}function u(A){var e=l(A);return e>=1<<A-1?e:e+(-1<<A)+1}var w=0;var d,D=0;function y(A,e,t,i,r){var I=t%B,g=(t/B|0)*A.v+i,n=I*A.h+r;e(A,A.blocks[g][n])}function k(A,e,t){var i=t/A.blocksPerLine|0,r=t%A.blocksPerLine;e(A,A.blocks[i][r])}var p,m,G,F,S,R,U=r.length;R=C?0===g?0===a?function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t)<<o;A.pred+=i,e[0]=A.pred}:function(A,e){e[0]|=c()<<o}:0===a?function(A,e){if(w>0)w--;else for(var t=g,i=n;t<=i;){var r=h(A.huffmanTableAC),I=15&r,a=r>>4;if(0===I){if(a<15){w=l(a)+(1<<a)-1;break}t+=16}else e[v[t+=a]]=u(I)*(1<<o),t++}}:function(A,e){for(var t=g,i=n,r=0;t<=i;){var I=v[t],a=e[I]<0?-1:1;switch(D){case 0:var B=h(A.huffmanTableAC),C=15&B;if(r=B>>4,0===C)r<15?(w=l(r)+(1<<r),D=4):(r=16,D=1);else{if(1!==C)throw new Error("invalid ACn encoding");d=u(C),D=r?2:3}continue;case 1:case 2:e[I]?e[I]+=(c()<<o)*a:0==--r&&(D=2===D?3:0);break;case 3:e[I]?e[I]+=(c()<<o)*a:(e[I]=d<<o,D=0);break;case 4:e[I]&&(e[I]+=(c()<<o)*a)}t++}4===D&&0==--w&&(D=0)}:function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t);A.pred+=i,e[0]=A.pred;for(var r=1;r<64;){var I=h(A.huffmanTableAC),g=15&I,n=I>>4;if(0===g){if(n<15)break;r+=16}else e[v[r+=n]]=u(g),r++}};var L,b,M=0;b=1===U?r[0].blocksPerLine*r[0].blocksPerColumn:B*i.mcusPerColumn;for(var N=I||b;M<b;){for(m=0;m<U;m++)r[m].pred=0;if(w=0,1===U)for(p=r[0],S=0;S<N;S++)k(p,R,M),M++;else for(S=0;S<N;S++){for(m=0;m<U;m++){var x=p=r[m],J=x.h,q=x.v;for(G=0;G<q;G++)for(F=0;F<J;F++)y(p,R,M,G,F)}if(++M===b)break}if(f=0,(L=A[E]<<8|A[E+1])<65280)throw new Error("marker was not found");if(!(L>=65488&&L<=65495))break;E+=2}return E-Q}function L(A,e){var t=[],i=e.blocksPerLine,r=e.blocksPerColumn,I=i<<3,g=new Int32Array(64),n=new Uint8Array(64);function a(A,t,i){var r,I,g,n,a,o,B,C,Q,E,s=e.quantizationTable,f=i;for(E=0;E<64;E++)f[E]=A[E]*s[E];for(E=0;E<8;++E){var c=8*E;0!==f[1+c]||0!==f[2+c]||0!==f[3+c]||0!==f[4+c]||0!==f[5+c]||0!==f[6+c]||0!==f[7+c]?(r=5793*f[0+c]+128>>8,I=5793*f[4+c]+128>>8,g=f[2+c],n=f[6+c],a=2896*(f[1+c]-f[7+c])+128>>8,C=2896*(f[1+c]+f[7+c])+128>>8,o=f[3+c]<<4,Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+128>>8,g=1567*g-3784*n+128>>8,n=Q,Q=a-(B=f[5+c]<<4)+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+c]=r+C,f[7+c]=r-C,f[1+c]=I+B,f[6+c]=I-B,f[2+c]=g+o,f[5+c]=g-o,f[3+c]=n+a,f[4+c]=n-a):(Q=5793*f[0+c]+512>>10,f[0+c]=Q,f[1+c]=Q,f[2+c]=Q,f[3+c]=Q,f[4+c]=Q,f[5+c]=Q,f[6+c]=Q,f[7+c]=Q)}for(E=0;E<8;++E){var h=E;0!==f[8+h]||0!==f[16+h]||0!==f[24+h]||0!==f[32+h]||0!==f[40+h]||0!==f[48+h]||0!==f[56+h]?(r=5793*f[0+h]+2048>>12,I=5793*f[32+h]+2048>>12,g=f[16+h],n=f[48+h],a=2896*(f[8+h]-f[56+h])+2048>>12,C=2896*(f[8+h]+f[56+h])+2048>>12,o=f[24+h],Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+2048>>12,g=1567*g-3784*n+2048>>12,n=Q,Q=a-(B=f[40+h])+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+h]=r+C,f[56+h]=r-C,f[8+h]=I+B,f[48+h]=I-B,f[16+h]=g+o,f[40+h]=g-o,f[24+h]=n+a,f[32+h]=n-a):(Q=5793*i[E+0]+8192>>14,f[0+h]=Q,f[8+h]=Q,f[16+h]=Q,f[24+h]=Q,f[32+h]=Q,f[40+h]=Q,f[48+h]=Q,f[56+h]=Q)}for(E=0;E<64;++E){var l=128+(f[E]+8>>4);t[E]=l<0?0:l>255?255:l}}for(var o=0;o<r;o++){for(var B=o<<3,C=0;C<8;C++)t.push(new Uint8Array(I));for(var Q=0;Q<i;Q++){a(e.blocks[o][Q],n,g);for(var E=0,s=Q<<3,f=0;f<8;f++)for(var c=t[B+f],h=0;h<8;h++)c[s+h]=n[E++]}}return t}var b=function(){function A(){B(this,A),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return Q(A,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(A){var e=0;function t(){var t=A[e]<<8|A[e+1];return e+=2,t}function i(A){var e,t,i=0,r=0;for(t in A.components)A.components.hasOwnProperty(t)&&(i<(e=A.components[t]).h&&(i=e.h),r<e.v&&(r=e.v));var I=Math.ceil(A.samplesPerLine/8/i),g=Math.ceil(A.scanLines/8/r);for(t in A.components)if(A.components.hasOwnProperty(t)){e=A.components[t];for(var n=Math.ceil(Math.ceil(A.samplesPerLine/8)*e.h/i),a=Math.ceil(Math.ceil(A.scanLines/8)*e.v/r),o=I*e.h,B=g*e.v,C=[],Q=0;Q<B;Q++){for(var E=[],s=0;s<o;s++)E.push(new Int32Array(64));C.push(E)}e.blocksPerLine=n,e.blocksPerColumn=a,e.blocks=C}A.maxH=i,A.maxV=r,A.mcusPerLine=I,A.mcusPerColumn=g}var r,I,g=t();if(65496!==g)throw new Error("SOI not found");for(g=t();65497!==g;){switch(g){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var n=(r=void 0,I=void 0,r=t(),I=A.subarray(e,e+r-2),e+=I.length,I);65504===g&&74===n[0]&&70===n[1]&&73===n[2]&&70===n[3]&&0===n[4]&&(this.jfif={version:{major:n[5],minor:n[6]},densityUnits:n[7],xDensity:n[8]<<8|n[9],yDensity:n[10]<<8|n[11],thumbWidth:n[12],thumbHeight:n[13],thumbData:n.subarray(14,14+3*n[12]*n[13])}),65518===g&&65===n[0]&&100===n[1]&&111===n[2]&&98===n[3]&&101===n[4]&&0===n[5]&&(this.adobe={version:n[6],flags0:n[7]<<8|n[8],flags1:n[9]<<8|n[10],transformCode:n[11]});break;case 65499:for(var a=t()+e-2;e<a;){var o=A[e++],B=new Int32Array(64);if(o>>4==0)for(var C=0;C<64;C++){B[v[C]]=A[e++]}else{if(o>>4!=1)throw new Error("DQT: invalid table spec");for(var Q=0;Q<64;Q++){B[v[Q]]=t()}}this.quantizationTables[15&o]=B}break;case 65472:case 65473:case 65474:t();for(var E={extended:65473===g,progressive:65474===g,precision:A[e++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},s=A[e++],f=void 0,c=0;c<s;c++){f=A[e];var h=A[e+1]>>4,l=15&A[e+1],u=A[e+2];E.componentsOrder.push(f),E.components[f]={h:h,v:l,quantizationIdx:u},e+=3}i(E),this.frames.push(E);break;case 65476:for(var w=t(),d=2;d<w;){for(var D=A[e++],y=new Uint8Array(16),k=0,p=0;p<16;p++,e++)y[p]=A[e],k+=y[p];for(var m=new Uint8Array(k),G=0;G<k;G++,e++)m[G]=A[e];d+=17+k,D>>4==0?this.huffmanTablesDC[15&D]=R(y,m):this.huffmanTablesAC[15&D]=R(y,m)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var F=A[e++],S=[],L=this.frames[0],b=0;b<F;b++){var M=L.components[A[e++]],N=A[e++];M.huffmanTableDC=this.huffmanTablesDC[N>>4],M.huffmanTableAC=this.huffmanTablesAC[15&N],S.push(M)}var x=A[e++],J=A[e++],q=A[e++],Y=U(A,e,L,S,this.resetInterval,x,J,q>>4,15&q);e+=Y;break;case 65535:255!==A[e]&&e--;break;default:if(255===A[e-3]&&A[e-2]>=192&&A[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(g.toString(16)))}g=t()}}},{key:"getResult",value:function(){var A=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var e=0;e<this.frames.length;e++)for(var t=this.frames[e].components,i=0,r=Object.keys(t);i<r.length;i++){var I=r[i];t[I].quantizationTable=this.quantizationTables[t[I].quantizationIdx],delete t[I].quantizationIdx}for(var g=A[0],n=g.components,a=g.componentsOrder,o=[],B=g.samplesPerLine,C=g.scanLines,Q=0;Q<a.length;Q++){var E=n[a[Q]];o.push({lines:L(0,E),scaleX:E.h/g.maxH,scaleY:E.v/g.maxV})}for(var s=new Uint8Array(B*C*o.length),f=0,c=0;c<C;++c)for(var h=0;h<B;++h)for(var l=0;l<o.length;++l){var u=o[l];s[f]=u.lines[0|c*u.scaleY][0|h*u.scaleX],++f}return s}}]),A}(),M=function(A){s(t,w);var e=S(t);function t(A){var i;return B(this,t),(i=e.call(this)).reader=new b,A.JPEGTables&&i.reader.parse(A.JPEGTables),i}return Q(t,[{key:"decodeBlock",value:function(A){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(A)),this.reader.getResult().buffer}}]),t}(),N=Object.freeze({__proto__:null,default:M});function x(A){for(var e=A.length;--e>=0;)A[e]=0}x(new Array(576)),x(new Array(60)),x(new Array(512)),x(new Array(256)),x(new Array(29)),x(new Array(30));var J=function(A,e,t,i){for(var r=65535&A|0,I=A>>>16&65535|0,g=0;0!==t;){t-=g=t>2e3?2e3:t;do{I=I+(r=r+e[i++]|0)|0}while(--g);r%=65521,I%=65521}return r|I<<16|0},q=new Uint32Array(function(){for(var A,e=[],t=0;t<256;t++){A=t;for(var i=0;i<8;i++)A=1&A?3988292384^A>>>1:A>>>1;e[t]=A}return e}()),Y=function(A,e,t,i){var r=q,I=i+t;A^=-1;for(var g=i;g<I;g++)A=A>>>8^r[255&(A^e[g])];return-1^A},K={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},O=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},P=function(A){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==t(i))throw new TypeError(i+"must be non-object");for(var r in i)O(i,r)&&(A[r]=i[r])}}return A},T=function(A){for(var e=0,t=0,i=A.length;t<i;t++)e+=A[t].length;for(var r=new Uint8Array(e),I=0,g=0,n=A.length;I<n;I++){var a=A[I];r.set(a,g),g+=a.length}return r},V=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){V=!1}for(var _=new Uint8Array(256),X=0;X<256;X++)_[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;_[254]=_[254]=1;var Z=function(A){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(A);var e,t,i,r,I,g=A.length,n=0;for(r=0;r<g;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),I=0,r=0;I<n;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),t<128?e[I++]=t:t<2048?(e[I++]=192|t>>>6,e[I++]=128|63&t):t<65536?(e[I++]=224|t>>>12,e[I++]=128|t>>>6&63,e[I++]=128|63&t):(e[I++]=240|t>>>18,e[I++]=128|t>>>12&63,e[I++]=128|t>>>6&63,e[I++]=128|63&t);return e},j=function(A,e){var t,i,r=e||A.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(A.subarray(0,e));var I=new Array(2*r);for(i=0,t=0;t<r;){var g=A[t++];if(g<128)I[i++]=g;else{var n=_[g];if(n>4)I[i++]=65533,t+=n-1;else{for(g&=2===n?31:3===n?15:7;n>1&&t<r;)g=g<<6|63&A[t++],n--;n>1?I[i++]=65533:g<65536?I[i++]=g:(g-=65536,I[i++]=55296|g>>10&1023,I[i++]=56320|1023&g)}}}return function(A,e){if(e<65534&&A.subarray&&V)return String.fromCharCode.apply(null,A.length===e?A:A.subarray(0,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(A[i]);return t}(I,i)},W=function(A,e){(e=e||A.length)>A.length&&(e=A.length);for(var t=e-1;t>=0&&128==(192&A[t]);)t--;return t<0||0===t?e:t+_[A[t]]>e?t:e};var z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=A.state;t=A.next_in,k=A.input,i=t+(A.avail_in-5),r=A.next_out,p=A.output,I=r-(e-A.avail_out),g=r+(A.avail_out-257),n=m.dmax,a=m.wsize,o=m.whave,B=m.wnext,C=m.window,Q=m.hold,E=m.bits,s=m.lencode,f=m.distcode,c=(1<<m.lenbits)-1,h=(1<<m.distbits)-1;A:do{E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=s[Q&c];e:for(;;){if(Q>>>=u=l>>>24,E-=u,0===(u=l>>>16&255))p[r++]=65535&l;else{if(!(16&u)){if(0==(64&u)){l=s[(65535&l)+(Q&(1<<u)-1)];continue e}if(32&u){m.mode=12;break A}A.msg="invalid literal/length code",m.mode=30;break A}w=65535&l,(u&=15)&&(E<u&&(Q+=k[t++]<<E,E+=8),w+=Q&(1<<u)-1,Q>>>=u,E-=u),E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=f[Q&h];t:for(;;){if(Q>>>=u=l>>>24,E-=u,!(16&(u=l>>>16&255))){if(0==(64&u)){l=f[(65535&l)+(Q&(1<<u)-1)];continue t}A.msg="invalid distance code",m.mode=30;break A}if(d=65535&l,E<(u&=15)&&(Q+=k[t++]<<E,(E+=8)<u&&(Q+=k[t++]<<E,E+=8)),(d+=Q&(1<<u)-1)>n){A.msg="invalid distance too far back",m.mode=30;break A}if(Q>>>=u,E-=u,d>(u=r-I)){if((u=d-u)>o&&m.sane){A.msg="invalid distance too far back",m.mode=30;break A}if(D=0,y=C,0===B){if(D+=a-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}else if(B<u){if(D+=a+B-u,(u-=B)<w){w-=u;do{p[r++]=C[D++]}while(--u);if(D=0,B<w){w-=u=B;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}}else if(D+=B-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}for(;w>2;)p[r++]=y[D++],p[r++]=y[D++],p[r++]=y[D++],w-=3;w&&(p[r++]=y[D++],w>1&&(p[r++]=y[D++]))}else{D=r-d;do{p[r++]=p[D++],p[r++]=p[D++],p[r++]=p[D++],w-=3}while(w>2);w&&(p[r++]=p[D++],w>1&&(p[r++]=p[D++]))}break}}break}}while(t<i&&r<g);t-=w=E>>3,Q&=(1<<(E-=w<<3))-1,A.next_in=t,A.next_out=r,A.avail_in=t<i?i-t+5:5-(t-i),A.avail_out=r<g?g-r+257:257-(r-g),m.hold=Q,m.bits=E},AA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rA=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E,s,f,c,h=n.bits,l=0,u=0,w=0,d=0,D=0,y=0,k=0,p=0,m=0,G=0,F=null,S=0,v=new Uint16Array(16),R=new Uint16Array(16),U=null,L=0;for(l=0;l<=15;l++)v[l]=0;for(u=0;u<i;u++)v[e[t+u]]++;for(D=h,d=15;d>=1&&0===v[d];d--);if(D>d&&(D=d),0===d)return r[I++]=20971520,r[I++]=20971520,n.bits=1,0;for(w=1;w<d&&0===v[w];w++);for(D<w&&(D=w),p=1,l=1;l<=15;l++)if(p<<=1,(p-=v[l])<0)return-1;if(p>0&&(0===A||1!==d))return-1;for(R[1]=0,l=1;l<15;l++)R[l+1]=R[l]+v[l];for(u=0;u<i;u++)0!==e[t+u]&&(g[R[e[t+u]]++]=u);if(0===A?(F=U=g,E=19):1===A?(F=AA,S-=257,U=eA,L-=257,E=256):(F=tA,U=iA,E=-1),G=0,u=0,l=w,Q=I,y=D,k=0,B=-1,C=(m=1<<D)-1,1===A&&m>852||2===A&&m>592)return 1;for(;;){s=l-k,g[u]<E?(f=0,c=g[u]):g[u]>E?(f=U[L+g[u]],c=F[S+g[u]]):(f=96,c=0),a=1<<l-k,w=o=1<<y;do{r[Q+(G>>k)+(o-=a)]=s<<24|f<<16|c|0}while(0!==o);for(a=1<<l-1;G&a;)a>>=1;if(0!==a?(G&=a-1,G+=a):G=0,u++,0==--v[l]){if(l===d)break;l=e[t+g[u]]}if(l>D&&(G&C)!==B){for(0===k&&(k=D),Q+=w,p=1<<(y=l-k);y+k<d&&!((p-=v[y+k])<=0);)y++,p<<=1;if(m+=1<<y,1===A&&m>852||2===A&&m>592)return 1;r[B=G&C]=D<<24|y<<16|Q-I|0}}return 0!==G&&(r[Q+G]=l-k<<24|64<<16|0),n.bits=D,0},IA=H.Z_FINISH,gA=H.Z_BLOCK,nA=H.Z_TREES,aA=H.Z_OK,oA=H.Z_STREAM_END,BA=H.Z_NEED_DICT,CA=H.Z_STREAM_ERROR,QA=H.Z_DATA_ERROR,EA=H.Z_MEM_ERROR,sA=H.Z_BUF_ERROR,fA=H.Z_DEFLATED,cA=function(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)};function hA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var lA,uA,wA=function(A){if(!A||!A.state)return CA;var e=A.state;return A.total_in=A.total_out=e.total=0,A.msg="",e.wrap&&(A.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,aA},dA=function(A){if(!A||!A.state)return CA;var e=A.state;return e.wsize=0,e.whave=0,e.wnext=0,wA(A)},DA=function(A,e){var t;if(!A||!A.state)return CA;var i=A.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?CA:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,dA(A))},yA=function(A,e){if(!A)return CA;var t=new hA;A.state=t,t.window=null;var i=DA(A,e);return i!==aA&&(A.state=null),i},kA=!0,pA=function(A){if(kA){lA=new Int32Array(512),uA=new Int32Array(32);for(var e=0;e<144;)A.lens[e++]=8;for(;e<256;)A.lens[e++]=9;for(;e<280;)A.lens[e++]=7;for(;e<288;)A.lens[e++]=8;for(rA(1,A.lens,0,288,lA,0,A.work,{bits:9}),e=0;e<32;)A.lens[e++]=5;rA(2,A.lens,0,32,uA,0,A.work,{bits:5}),kA=!1}A.lencode=lA,A.lenbits=9,A.distcode=uA,A.distbits=5},mA=function(A,e,t,i){var r,I=A.state;return null===I.window&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new Uint8Array(I.wsize)),i>=I.wsize?(I.window.set(e.subarray(t-I.wsize,t),0),I.wnext=0,I.whave=I.wsize):((r=I.wsize-I.wnext)>i&&(r=i),I.window.set(e.subarray(t-i,t-i+r),I.wnext),(i-=r)?(I.window.set(e.subarray(t-i,t),0),I.wnext=i,I.whave=I.wsize):(I.wnext+=r,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=r))),0},GA={inflateReset:dA,inflateReset2:DA,inflateResetKeep:wA,inflateInit:function(A){return yA(A,15)},inflateInit2:yA,inflate:function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=0,G=new Uint8Array(4),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return CA;12===(t=A.state).mode&&(t.mode=13),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,C=n,Q=a,y=aA;A:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(2&t.wrap&&35615===o){t.check=0,G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0),o=0,B=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&o)<<8)+(o>>8))%31){A.msg="incorrect header check",t.mode=30;break}if((15&o)!==fA){A.msg="unknown compression method",t.mode=30;break}if(B-=4,D=8+(15&(o>>>=4)),0===t.wbits)t.wbits=D;else if(D>t.wbits){A.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,A.adler=t.check=1,t.mode=512&o?10:12,o=0,B=0;break;case 2:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.flags=o,(255&t.flags)!==fA){A.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){A.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=o>>8&1),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=3;case 3:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.time=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,G[2]=o>>>16&255,G[3]=o>>>24&255,t.check=Y(t.check,G,4,0)),o=0,B=0,t.mode=4;case 4:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.xflags=255&o,t.head.os=o>>8),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=5;case 5:if(1024&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length=o,t.head&&(t.head.extra_len=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((E=t.length)>n&&(E=n),E&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(I,I+E),D)),512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,t.length-=E),t.length))break A;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(65535&t.check)){A.msg="header crc mismatch",t.mode=30;break}o=0,B=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),A.adler=t.check=0,t.mode=12;break;case 10:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}A.adler=t.check=cA(o),o=0,B=0,t.mode=11;case 11:if(0===t.havedict)return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,BA;A.adler=t.check=1,t.mode=12;case 12:if(e===gA||e===nA)break A;case 13:if(t.last){o>>>=7&B,B-=7&B,t.mode=27;break}for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}switch(t.last=1&o,B-=1,3&(o>>>=1)){case 0:t.mode=14;break;case 1:if(pA(t),t.mode=20,e===nA){o>>>=2,B-=2;break A}break;case 2:t.mode=17;break;case 3:A.msg="invalid block type",t.mode=30}o>>>=2,B-=2;break;case 14:for(o>>>=7&B,B-=7&B;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if((65535&o)!=(o>>>16^65535)){A.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&o,o=0,B=0,t.mode=15,e===nA)break A;case 15:t.mode=16;case 16:if(E=t.length){if(E>n&&(E=n),E>a&&(E=a),0===E)break A;r.set(i.subarray(I,I+E),g),n-=E,I+=E,a-=E,g+=E,t.length-=E;break}t.mode=12;break;case 17:for(;B<14;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.nlen=257+(31&o),o>>>=5,B-=5,t.ndist=1+(31&o),o>>>=5,B-=5,t.ncode=4+(15&o),o>>>=4,B-=4,t.nlen>286||t.ndist>30){A.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.lens[F[t.have++]]=7&o,o>>>=3,B-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},y=rA(0,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(l<16)o>>>=c,B-=c,t.lens[t.have++]=l;else{if(16===l){for(p=c+2;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o>>>=c,B-=c,0===t.have){A.msg="invalid bit length repeat",t.mode=30;break}D=t.lens[t.have-1],E=3+(3&o),o>>>=2,B-=2}else if(17===l){for(p=c+3;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=3+(7&(o>>>=c)),o>>>=3,B-=3}else{for(p=c+7;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=11+(127&(o>>>=c)),o>>>=7,B-=7}if(t.have+E>t.nlen+t.ndist){A.msg="invalid bit length repeat",t.mode=30;break}for(;E--;)t.lens[t.have++]=D}}if(30===t.mode)break;if(0===t.lens[256]){A.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,k={bits:t.lenbits},y=rA(1,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},y=rA(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,y){A.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===nA)break A;case 20:t.mode=21;case 21:if(n>=6&&a>=258){A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,$(A,Q),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(h&&0==(240&h)){for(u=c,w=h,d=l;h=(m=t.lencode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,t.length=l,0===h){t.mode=26;break}if(32&h){t.back=-1,t.mode=12;break}if(64&h){A.msg="invalid literal/length code",t.mode=30;break}t.extra=15&h,t.mode=22;case 22:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;h=(m=t.distcode[o&(1<<t.distbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(0==(240&h)){for(u=c,w=h,d=l;h=(m=t.distcode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,64&h){A.msg="invalid distance code",t.mode=30;break}t.offset=l,t.extra=15&h,t.mode=24;case 24:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){A.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===a)break A;if(E=Q-a,t.offset>E){if((E=t.offset-E)>t.whave&&t.sane){A.msg="invalid distance too far back",t.mode=30;break}E>t.wnext?(E-=t.wnext,s=t.wsize-E):s=t.wnext-E,E>t.length&&(E=t.length),f=t.window}else f=r,s=g-t.offset,E=t.length;E>a&&(E=a),a-=E,t.length-=E;do{r[g++]=f[s++]}while(--E);0===t.length&&(t.mode=21);break;case 26:if(0===a)break A;r[g++]=t.length,a--,t.mode=21;break;case 27:if(t.wrap){for(;B<32;){if(0===n)break A;n--,o|=i[I++]<<B,B+=8}if(Q-=a,A.total_out+=Q,t.total+=Q,Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,g-Q):J(t.check,r,Q,g-Q)),Q=a,(t.flags?o:cA(o))!==t.check){A.msg="incorrect data check",t.mode=30;break}o=0,B=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(4294967295&t.total)){A.msg="incorrect length check",t.mode=30;break}o=0,B=0}t.mode=29;case 29:y=oA;break A;case 30:y=QA;break A;case 31:return EA;default:return CA}return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,(t.wsize||Q!==A.avail_out&&t.mode<30&&(t.mode<27||e!==IA))&&mA(A,A.output,A.next_out,Q-A.avail_out),C-=A.avail_in,Q-=A.avail_out,A.total_in+=C,A.total_out+=Q,t.total+=Q,t.wrap&&Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,A.next_out-Q):J(t.check,r,Q,A.next_out-Q)),A.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===C&&0===Q||e===IA)&&y===aA&&(y=sA),y},inflateEnd:function(A){if(!A||!A.state)return CA;var e=A.state;return e.window&&(e.window=null),A.state=null,aA},inflateGetHeader:function(A,e){if(!A||!A.state)return CA;var t=A.state;return 0==(2&t.wrap)?CA:(t.head=e,e.done=!1,aA)},inflateSetDictionary:function(A,e){var t,i=e.length;return A&&A.state?0!==(t=A.state).wrap&&11!==t.mode?CA:11===t.mode&&J(1,e,i,0)!==t.check?QA:mA(A,e,i,i)?(t.mode=31,EA):(t.havedict=1,aA):CA},inflateInfo:"pako inflate (from Nodeca project)"};var FA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},SA=Object.prototype.toString,vA=H.Z_NO_FLUSH,RA=H.Z_FINISH,UA=H.Z_OK,LA=H.Z_STREAM_END,bA=H.Z_NEED_DICT,MA=H.Z_STREAM_ERROR,NA=H.Z_DATA_ERROR,xA=H.Z_MEM_ERROR;function JA(A){this.options=P({chunkSize:65536,windowBits:15,to:""},A||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||A&&A.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var t=GA.inflateInit2(this.strm,e.windowBits);if(t!==UA)throw new Error(K[t]);if(this.header=new FA,GA.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Z(e.dictionary):"[object ArrayBuffer]"===SA.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=GA.inflateSetDictionary(this.strm,e.dictionary))!==UA))throw new Error(K[t])}function qA(A,e){var t=new JA(e);if(t.push(A),t.err)throw t.msg||K[t.err];return t.result}JA.prototype.push=function(A,e){var t,i,r,I=this.strm,g=this.options.chunkSize,n=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:!0===e?RA:vA,"[object ArrayBuffer]"===SA.call(A)?I.input=new Uint8Array(A):I.input=A,I.next_in=0,I.avail_in=I.input.length;;){for(0===I.avail_out&&(I.output=new Uint8Array(g),I.next_out=0,I.avail_out=g),(t=GA.inflate(I,i))===bA&&n&&((t=GA.inflateSetDictionary(I,n))===UA?t=GA.inflate(I,i):t===NA&&(t=bA));I.avail_in>0&&t===LA&&I.state.wrap>0&&0!==A[I.next_in];)GA.inflateReset(I),t=GA.inflate(I,i);switch(t){case MA:case NA:case bA:case xA:return this.onEnd(t),this.ended=!0,!1}if(r=I.avail_out,I.next_out&&(0===I.avail_out||t===LA))if("string"===this.options.to){var a=W(I.output,I.next_out),o=I.next_out-a,B=j(I.output,a);I.next_out=o,I.avail_out=g-o,o&&I.output.set(I.output.subarray(a,a+o),0),this.onData(B)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(t!==UA||0!==r){if(t===LA)return t=GA.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(0===I.avail_in)break}}return!0},JA.prototype.onData=function(A){this.chunks.push(A)},JA.prototype.onEnd=function(A){A===UA&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=T(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var YA={Inflate:JA,inflate:qA,inflateRaw:function(A,e){return(e=e||{}).raw=!0,qA(A,e)},ungzip:qA,constants:H}.inflate;function KA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var HA=function(A){s(t,w);var e=KA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return YA(new Uint8Array(A)).buffer}}]),t}(),OA=Object.freeze({__proto__:null,default:HA});function PA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var TA,VA=function(A){s(t,w);var e=PA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){for(var e=new DataView(A),t=[],i=0;i<A.byteLength;++i){var r=e.getInt8(i);if(r<0){var I=e.getUint8(i+1);r=-r;for(var g=0;g<=r;++g)t.push(I);i+=1}else{for(var n=0;n<=r;++n)t.push(e.getUint8(i+n+1));i+=r+1}}return new Uint8Array(t).buffer}}]),t}(),_A=Object.freeze({__proto__:null,default:VA}),XA={exports:{}};TA=XA,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var A,e,t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c=(A={defaultNoDataValue:-34027999387901484e22,decode:function(I,g){var n=(g=g||{}).encodedMaskData||null===g.encodedMaskData,a=r(I,g.inputOffset||0,n),o=null!==g.noDataValue?g.noDataValue:A.defaultNoDataValue,B=e(a,g.pixelType||Float32Array,g.encodedMaskData,o,g.returnMask),C={width:a.width,height:a.height,pixelData:B.resultPixels,minValue:B.minValue,maxValue:a.pixels.maxValue,noDataValue:o};return B.resultMask&&(C.maskData=B.resultMask),g.returnEncodedMask&&a.mask&&(C.encodedMaskData=a.mask.bitset?a.mask.bitset:null),g.returnFileInfo&&(C.fileInfo=t(a),g.computeUsedBitDepths&&(C.fileInfo.bitDepths=i(a))),C}},e=function(A,e,t,i,r){var g,n,a,o=0,B=A.pixels.numBlocksX,C=A.pixels.numBlocksY,Q=Math.floor(A.width/B),E=Math.floor(A.height/C),s=2*A.maxZError,f=Number.MAX_VALUE;t=t||(A.mask?A.mask.bitset:null),n=new e(A.width*A.height),r&&t&&(a=new Uint8Array(A.width*A.height));for(var c,h,l=new Float32Array(Q*E),u=0;u<=C;u++){var w=u!==C?E:A.height%C;if(0!==w)for(var d=0;d<=B;d++){var D=d!==B?Q:A.width%B;if(0!==D){var y,k,p,m,G=u*A.width*E+d*Q,F=A.width-D,S=A.pixels.blocks[o];if(S.encoding<2?(0===S.encoding?y=S.rawData:(I(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,s,l,A.pixels.maxValue),y=l),k=0):p=2===S.encoding?0:S.offset,t)for(h=0;h<w;h++){for(7&G&&(m=t[G>>3],m<<=7&G),c=0;c<D;c++)7&G||(m=t[G>>3]),128&m?(a&&(a[G]=1),f=f>(g=S.encoding<2?y[k++]:p)?g:f,n[G++]=g):(a&&(a[G]=0),n[G++]=i),m<<=1;G+=F}else if(S.encoding<2)for(h=0;h<w;h++){for(c=0;c<D;c++)f=f>(g=y[k++])?g:f,n[G++]=g;G+=F}else for(f=f>p?p:f,h=0;h<w;h++){for(c=0;c<D;c++)n[G++]=p;G+=F}if(1===S.encoding&&k!==S.numValidPixels)throw"Block and Mask do not match";o++}}}return{resultPixels:n,resultMask:a,minValue:f}},t=function(A){return{fileIdentifierString:A.fileIdentifierString,fileVersion:A.fileVersion,imageType:A.imageType,height:A.height,width:A.width,maxZError:A.maxZError,eofOffset:A.eofOffset,mask:A.mask?{numBlocksX:A.mask.numBlocksX,numBlocksY:A.mask.numBlocksY,numBytes:A.mask.numBytes,maxValue:A.mask.maxValue}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,numBytes:A.pixels.numBytes,maxValue:A.pixels.maxValue,noDataValue:A.noDataValue}}},i=function(A){for(var e=A.pixels.numBlocksX*A.pixels.numBlocksY,t={},i=0;i<e;i++){var r=A.pixels.blocks[i];0===r.encoding?t.float32=!0:1===r.encoding?t[r.bitsPerPixel]=!0:t[0]=!0}return Object.keys(t)},r=function(A,e,t){var i={},r=new Uint8Array(A,e,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;e+=10;var I=new DataView(A,e,24);if(i.fileVersion=I.getInt32(0,!0),i.imageType=I.getInt32(4,!0),i.height=I.getUint32(8,!0),i.width=I.getUint32(12,!0),i.maxZError=I.getFloat64(16,!0),e+=24,!t)if(I=new DataView(A,e,16),i.mask={},i.mask.numBlocksY=I.getUint32(0,!0),i.mask.numBlocksX=I.getUint32(4,!0),i.mask.numBytes=I.getUint32(8,!0),i.mask.maxValue=I.getFloat32(12,!0),e+=16,i.mask.numBytes>0){var g=new Uint8Array(Math.ceil(i.width*i.height/8)),n=(I=new DataView(A,e,i.mask.numBytes)).getInt16(0,!0),a=2,o=0;do{if(n>0)for(;n--;)g[o++]=I.getUint8(a++);else{var B=I.getUint8(a++);for(n=-n;n--;)g[o++]=B}n=I.getInt16(a,!0),a+=2}while(a<i.mask.numBytes);if(-32768!==n||o<g.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=g,e+=i.mask.numBytes}else 0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)&&(i.mask.bitset=new Uint8Array(Math.ceil(i.width*i.height/8)));I=new DataView(A,e,16),i.pixels={},i.pixels.numBlocksY=I.getUint32(0,!0),i.pixels.numBlocksX=I.getUint32(4,!0),i.pixels.numBytes=I.getUint32(8,!0),i.pixels.maxValue=I.getFloat32(12,!0),e+=16;var C=i.pixels.numBlocksX,Q=i.pixels.numBlocksY,E=C+(i.width%C>0?1:0),s=Q+(i.height%Q>0?1:0);i.pixels.blocks=new Array(E*s);for(var f=0,c=0;c<s;c++)for(var h=0;h<E;h++){var l=0,u=A.byteLength-e;I=new DataView(A,e,Math.min(10,u));var w={};i.pixels.blocks[f++]=w;var d=I.getUint8(0);if(l++,w.encoding=63&d,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==d&&2!==d){if(d>>=6,w.offsetType=d,2===d)w.offset=I.getInt8(1),l++;else if(1===d)w.offset=I.getInt16(1,!0),l+=2;else{if(0!==d)throw"Invalid block offset type";w.offset=I.getFloat32(1,!0),l+=4}if(1===w.encoding)if(d=I.getUint8(l),l++,w.bitsPerPixel=63&d,d>>=6,w.numValidPixelsType=d,2===d)w.numValidPixels=I.getUint8(l),l++;else if(1===d)w.numValidPixels=I.getUint16(l,!0),l+=2;else{if(0!==d)throw"Invalid valid pixel count type";w.numValidPixels=I.getUint32(l,!0),l+=4}}var D;if(e+=l,3!==w.encoding)if(0===w.encoding){var y=(i.pixels.numBytes-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";D=new ArrayBuffer(4*y),new Uint8Array(D).set(new Uint8Array(A,e,4*y));var k=new Float32Array(D);w.rawData=k,e+=4*y}else if(1===w.encoding){var p=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),m=Math.ceil(p/4);D=new ArrayBuffer(4*m),new Uint8Array(D).set(new Uint8Array(A,e,p)),w.stuffedData=new Uint32Array(D),e+=p}}else e++}return i.eofOffset=e,i},I=function(A,e,t,i,r,I,g){var n,a,o,B=(1<<e)-1,C=0,Q=0,E=Math.ceil((g-i)/r),s=4*A.length-Math.ceil(e*t/8);for(A[A.length-1]<<=8*s,n=0;n<t;n++){if(0===Q&&(o=A[C++],Q=32),Q>=e)a=o>>>Q-e&B,Q-=e;else{var f=e-Q;a=(o&B)<<f&B,a+=(o=A[C++])>>>(Q=32-f)}I[n]=a<E?i+a*r:g}return I},A),h=(g=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E=(1<<t)-1,s=0,f=0,c=4*A.length-Math.ceil(t*i/8);if(A[A.length-1]<<=8*c,r)for(a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=r[o];else for(Q=Math.ceil((n-I)/g),a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=o<Q?I+o*g:n},n=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=[],s=4*A.length-Math.ceil(e*t/8);A[A.length-1]<<=8*s;var f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32),C>=e?(Q=g>>>C-e&n,C-=e):(Q=(g&n)<<(B=e-C)&n,Q+=(g=A[a++])>>>(C=32-B)),E[o]=Q<f?i+Q*r:I;return E.unshift(i),E},a=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q=(1<<t)-1,E=0,s=0,f=0;if(r)for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=r[o];else{var c=Math.ceil((n-I)/g);for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=o<c?I+o*g:n}return e},o=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=0,s=[],f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32,E=0),C>=e?(Q=g>>>E&n,C-=e,E+=e):(Q=g>>>E&n,C=32-(B=e-C),Q|=((g=A[a++])&(1<<B)-1)<<e-B,E=B),s[o]=Q<f?i+Q*r:I;return s.unshift(i),s},B=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=4*A.length-Math.ceil(t*i/8);for(A[A.length-1]<<=8*C,r=0;r<i;r++)0===B&&(g=A[o++],B=32),B>=t?(I=g>>>B-t&a,B-=t):(I=(g&a)<<(n=t-B)&a,I+=(g=A[o++])>>>(B=32-n)),e[r]=I;return e},C=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=0;for(r=0;r<i;r++)0===B&&(g=A[o++],B=32,C=0),B>=t?(I=g>>>C&a,B-=t,C+=t):(I=g>>>C&a,B=32-(n=t-B),I|=((g=A[o++])&(1<<n)-1)<<t-n,C=n),e[r]=I;return e},Q={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(A){for(var e=65535,t=65535,i=A.length,r=Math.floor(i/2),I=0;r;){var g=r>=359?359:r;r-=g;do{e+=A[I++]<<8,t+=e+=A[I++]}while(--g);e=(65535&e)+(e>>>16),t=(65535&t)+(t>>>16)}return 1&i&&(t+=e+=A[I]<<8),((t=(65535&t)+(t>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(A,e){var t=e.ptr,i=new Uint8Array(A,t,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,i),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;t+=6;var I,g=new DataView(A,t,8),n=g.getInt32(0,!0);if(r.fileVersion=n,t+=4,n>=3&&(r.checksum=g.getUint32(4,!0),t+=4),g=new DataView(A,t,12),r.height=g.getUint32(0,!0),r.width=g.getUint32(4,!0),t+=8,n>=4?(r.numDims=g.getUint32(8,!0),t+=4):r.numDims=1,g=new DataView(A,t,40),r.numValidPixel=g.getUint32(0,!0),r.microBlockSize=g.getInt32(4,!0),r.blobSize=g.getInt32(8,!0),r.imageType=g.getInt32(12,!0),r.maxZError=g.getFloat64(16,!0),r.zMin=g.getFloat64(24,!0),r.zMax=g.getFloat64(32,!0),t+=40,e.headerInfo=r,e.ptr=t,n>=3&&(I=n>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(A,t-I,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(A,e){var t=e.headerInfo,i=this.getDataTypeArray(t.imageType),r=t.numDims*this.getDataTypeSize(t.imageType),I=this.readSubArray(A,e.ptr,i,r),g=this.readSubArray(A,e.ptr+r,i,r);e.ptr+=2*r;var n,a=!0;for(n=0;n<t.numDims;n++)if(I[n]!==g[n]){a=!1;break}return t.minValues=I,t.maxValues=g,a},readSubArray:function(A,e,t,i){var r;if(t===Uint8Array)r=new Uint8Array(A,e,i);else{var I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(A,e,i)),r=new t(I)}return r},readMask:function(A,e){var t,i,r=e.ptr,I=e.headerInfo,g=I.width*I.height,n=I.numValidPixel,a=new DataView(A,r,4),o={};if(o.numBytes=a.getUint32(0,!0),r+=4,(0===n||g===n)&&0!==o.numBytes)throw"invalid mask";if(0===n)t=new Uint8Array(Math.ceil(g/8)),o.bitset=t,i=new Uint8Array(g),e.pixels.resultMask=i,r+=o.numBytes;else if(o.numBytes>0){t=new Uint8Array(Math.ceil(g/8));var B=(a=new DataView(A,r,o.numBytes)).getInt16(0,!0),C=2,Q=0,E=0;do{if(B>0)for(;B--;)t[Q++]=a.getUint8(C++);else for(E=a.getUint8(C++),B=-B;B--;)t[Q++]=E;B=a.getInt16(C,!0),C+=2}while(C<o.numBytes);if(-32768!==B||Q<t.length)throw"Unexpected end of mask RLE encoding";i=new Uint8Array(g);var s=0,f=0;for(f=0;f<g;f++)7&f?(s=t[f>>3],s<<=7&f):s=t[f>>3],128&s&&(i[f]=1);e.pixels.resultMask=i,o.bitset=t,r+=o.numBytes}return e.ptr=r,e.mask=o,!0},readDataOneSweep:function(A,e,t,i){var r,I=e.ptr,g=e.headerInfo,n=g.numDims,a=g.width*g.height,o=g.imageType,B=g.numValidPixel*Q.getDataTypeSize(o)*n,C=e.pixels.resultMask;if(t===Uint8Array)r=new Uint8Array(A,I,B);else{var E=new ArrayBuffer(B);new Uint8Array(E).set(new Uint8Array(A,I,B)),r=new t(E)}if(r.length===a*n)e.pixels.resultPixels=i?Q.swapDimensionOrder(r,a,n,t,!0):r;else{e.pixels.resultPixels=new t(a*n);var s=0,f=0,c=0,h=0;if(n>1){if(i){for(f=0;f<a;f++)if(C[f])for(h=f,c=0;c<n;c++,h+=a)e.pixels.resultPixels[h]=r[s++]}else for(f=0;f<a;f++)if(C[f])for(h=f*n,c=0;c<n;c++)e.pixels.resultPixels[h+c]=r[s++]}else for(f=0;f<a;f++)C[f]&&(e.pixels.resultPixels[f]=r[s++])}return I+=B,e.ptr=I,!0},readHuffmanTree:function(A,e){var t=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(A,e.ptr,16);if(e.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var r=i.getInt32(4,!0),I=i.getInt32(8,!0),g=i.getInt32(12,!0);if(I>=g)return!1;var n=new Uint32Array(g-I);Q.decodeBits(A,e,n);var a,o,B,C,s=[];for(a=I;a<g;a++)s[o=a-(a<r?0:r)]={first:n[a-I],second:null};var f=A.byteLength-e.ptr,c=Math.ceil(f/4),h=new ArrayBuffer(4*c);new Uint8Array(h).set(new Uint8Array(A,e.ptr,f));var l,u=new Uint32Array(h),w=0,d=0;for(l=u[0],a=I;a<g;a++)(C=s[o=a-(a<r?0:r)].first)>0&&(s[o].second=l<<w>>>32-C,32-w>=C?32===(w+=C)&&(w=0,l=u[++d]):(w+=C-32,l=u[++d],s[o].second|=l>>>32-w));var D=0,y=0,k=new E;for(a=0;a<s.length;a++)void 0!==s[a]&&(D=Math.max(D,s[a].first));y=D>=t?t:D;var p,m,G,F,S,v=[];for(a=I;a<g;a++)if((C=s[o=a-(a<r?0:r)].first)>0)if(p=[C,o],C<=y)for(m=s[o].second<<y-C,G=1<<y-C,B=0;B<G;B++)v[m|B]=p;else for(m=s[o].second,S=k,F=C-1;F>=0;F--)m>>>F&1?(S.right||(S.right=new E),S=S.right):(S.left||(S.left=new E),S=S.left),0!==F||S.val||(S.val=p[1]);return{decodeLut:v,numBitsLUTQick:y,numBitsLUT:D,tree:k,stuffedData:u,srcPtr:d,bitPos:w}},readHuffman:function(A,e,t,i){var r,I,g,n,a,o,B,C,E,s=e.headerInfo.numDims,f=e.headerInfo.height,c=e.headerInfo.width,h=c*f,l=this.readHuffmanTree(A,e),u=l.decodeLut,w=l.tree,d=l.stuffedData,D=l.srcPtr,y=l.bitPos,k=l.numBitsLUTQick,p=l.numBitsLUT,m=0===e.headerInfo.imageType?128:0,G=e.pixels.resultMask,F=0;y>0&&(D++,y=0);var S,v=d[D],R=1===e.encodeMode,U=new t(h*s),L=U;if(s<2||R){for(S=0;S<s;S++)if(s>1&&(L=new t(U.buffer,h*S,h),F=0),e.headerInfo.numValidPixel===c*f)for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(g+=B>0?F:o>0?L[C-c]:F,g&=255,L[C]=g,F=g):L[C]=g}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++)if(G[C]){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(B>0&&G[C-1]?g+=F:o>0&&G[C-c]?g+=L[C-c]:g+=F,g&=255,L[C]=g,F=g):L[C]=g}}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++)if(C=o*c+B,!G||G[C])for(S=0;S<s;S++,C+=h){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,L[C]=g}e.ptr=e.ptr+4*(D+1)+(y>0?4:0),e.pixels.resultPixels=U,s>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(U,h,s,t))},decodeBits:function(A,e,t,i,r){var I=e.headerInfo,Q=I.fileVersion,E=0,s=A.byteLength-e.ptr>=5?5:A.byteLength-e.ptr,f=new DataView(A,e.ptr,s),c=f.getUint8(0);E++;var h=c>>6,l=0===h?4:3-h,u=(32&c)>0,w=31&c,d=0;if(1===l)d=f.getUint8(E),E++;else if(2===l)d=f.getUint16(E,!0),E+=2;else{if(4!==l)throw"Invalid valid pixel count type";d=f.getUint32(E,!0),E+=4}var D,y,k,p,m,G,F,S,v,R=2*I.maxZError,U=I.numDims>1?I.maxValues[r]:I.zMax;if(u){for(e.counter.lut++,S=f.getUint8(E),E++,p=Math.ceil((S-1)*w/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),k=new Uint8Array(y),e.ptr+=E,k.set(new Uint8Array(A,e.ptr,p)),F=new Uint32Array(y),e.ptr+=p,v=0;S-1>>>v;)v++;p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,G=Q>=3?o(F,w,S-1,i,R,U):n(F,w,S-1,i,R,U),Q>=3?a(D,t,v,d,G):g(D,t,v,d,G)}else e.counter.bitstuffer++,v=w,e.ptr+=E,v>0&&(p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,Q>=3?null==i?C(D,t,v,d):a(D,t,v,d,!1,i,R,U):null==i?B(D,t,v,d):g(D,t,v,d,!1,i,R,U))},readTiles:function(A,e,t,i){var r=e.headerInfo,I=r.width,g=r.height,n=I*g,a=r.microBlockSize,o=r.imageType,B=Q.getDataTypeSize(o),C=Math.ceil(I/a),E=Math.ceil(g/a);e.pixels.numBlocksY=E,e.pixels.numBlocksX=C,e.pixels.ptr=0;var s,f,c,h,l,u,w,d,D,y,k=0,p=0,m=0,G=0,F=0,S=0,v=0,R=0,U=0,L=0,b=0,M=0,N=0,x=0,J=0,q=new t(a*a),Y=g%a||a,K=I%a||a,H=r.numDims,O=e.pixels.resultMask,P=e.pixels.resultPixels,T=r.fileVersion>=5?14:15,V=r.zMax;for(m=0;m<E;m++)for(F=m!==E-1?a:Y,G=0;G<C;G++)for(L=m*I*a+G*a,b=I-(S=G!==C-1?a:K),d=0;d<H;d++){if(H>1?(y=P,L=m*I*a+G*a,P=new t(e.pixels.resultPixels.buffer,n*d*B,n),V=r.maxValues[d]):y=null,v=A.byteLength-e.ptr,f={},J=0,R=(s=new DataView(A,e.ptr,Math.min(10,v))).getUint8(0),J++,D=r.fileVersion>=5?4&R:0,U=R>>6&255,(R>>2&T)!=(G*a>>3&T))throw"integrity issue";if(D&&0===d)throw"integrity issue";if((l=3&R)>3)throw e.ptr+=J,"Invalid block encoding ("+l+")";if(2!==l)if(0===l){if(D)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=J,M=(M=F*S*B)<(N=A.byteLength-e.ptr)?M:N,c=new ArrayBuffer(M%B==0?M:M+B-M%B),new Uint8Array(c).set(new Uint8Array(A,e.ptr,M)),h=new t(c),x=0,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=h[x++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=h[x++];L+=b}e.ptr+=x*B}else if(u=Q.getDataTypeUsed(D&&o<6?4:o,U),w=Q.getOnePixel(f,J,u,s),J+=Q.getDataTypeSize(u),3===l)if(e.ptr+=J,e.counter.constantoffset++,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=D?Math.min(V,y[L]+w):w),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=D?Math.min(V,y[L]+w):w,L++;L+=b}else if(e.ptr+=J,Q.decodeBits(A,e,q,w,d),J=0,D)if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]+y[L]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=q[J++]+y[L],L++;L+=b}else if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=q[J++];L+=b}else{if(D)if(O)for(k=0;k<F;k++)for(p=0;p<S;p++)O[L]&&(P[L]=y[L]),L++;else for(k=0;k<F;k++)for(p=0;p<S;p++)P[L]=y[L],L++;e.counter.constant++,e.ptr+=J}}H>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(e.pixels.resultPixels,n,H,t))},formatFileInfo:function(A){return{fileIdentifierString:A.headerInfo.fileIdentifierString,fileVersion:A.headerInfo.fileVersion,imageType:A.headerInfo.imageType,height:A.headerInfo.height,width:A.headerInfo.width,numValidPixel:A.headerInfo.numValidPixel,microBlockSize:A.headerInfo.microBlockSize,blobSize:A.headerInfo.blobSize,maxZError:A.headerInfo.maxZError,pixelType:Q.getPixelType(A.headerInfo.imageType),eofOffset:A.eofOffset,mask:A.mask?{numBytes:A.mask.numBytes}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,maxValue:A.headerInfo.zMax,minValue:A.headerInfo.zMin,noDataValue:A.noDataValue}}},constructConstantSurface:function(A,e){var t=A.headerInfo.zMax,i=A.headerInfo.zMin,r=A.headerInfo.maxValues,I=A.headerInfo.numDims,g=A.headerInfo.height*A.headerInfo.width,n=0,a=0,o=0,B=A.pixels.resultMask,C=A.pixels.resultPixels;if(B)if(I>1){if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)B[a]&&(C[o+a]=t);else for(a=0;a<g;a++)if(B[a])for(o=a*I,n=0;n<I;n++)C[o+I]=r[n]}else for(a=0;a<g;a++)B[a]&&(C[a]=t);else if(I>1&&i!==t)if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)C[o+a]=t;else for(a=0;a<g;a++)for(o=a*I,n=0;n<I;n++)C[o+n]=r[n];else for(a=0;a<g*I;a++)C[a]=t},getDataTypeArray:function(A){var e;switch(A){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(A){var e;switch(A){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(A,e){if(null==e)return!1;var t;switch(A){case 0:t=e>=-128&&e<=127;break;case 1:t=e>=0&&e<=255;break;case 2:t=e>=-32768&&e<=32767;break;case 3:t=e>=0&&e<=65536;break;case 4:t=e>=-2147483648&&e<=2147483647;break;case 5:t=e>=0&&e<=4294967296;break;case 6:t=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:t=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:t=!1}return t},getDataTypeSize:function(A){var e=0;switch(A){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=A}return e},getDataTypeUsed:function(A,e){var t=A;switch(A){case 2:case 4:t=A-e;break;case 3:case 5:t=A-2*e;break;case 6:t=0===e?A:1===e?2:1;break;case 7:t=0===e?A:A-2*e+1;break;default:t=A}return t},getOnePixel:function(A,e,t,i){var r=0;switch(t){case 0:r=i.getInt8(e);break;case 1:r=i.getUint8(e);break;case 2:r=i.getInt16(e,!0);break;case 3:r=i.getUint16(e,!0);break;case 4:r=i.getInt32(e,!0);break;case 5:r=i.getUInt32(e,!0);break;case 6:r=i.getFloat32(e,!0);break;case 7:r=i.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return r},swapDimensionOrder:function(A,e,t,i,r){var I=0,g=0,n=0,a=0,o=A;if(t>1)if(o=new i(e*t),r)for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[a]=A[g++];else for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[g++]=A[a];return o}},E=function(A,e,t){this.val=A,this.left=e,this.right=t},{decode:function(A,e){var t=(e=e||{}).noDataValue,i=0,r={};r.ptr=e.inputOffset||0,r.pixels={},Q.readHeaderInfo(A,r);var I=r.headerInfo,g=I.fileVersion,n=Q.getDataTypeArray(I.imageType);if(g>5)throw"unsupported lerc version 2."+g;Q.readMask(A,r),I.numValidPixel===I.width*I.height||r.pixels.resultMask||(r.pixels.resultMask=e.maskData);var a=I.width*I.height;r.pixels.resultPixels=new n(a*I.numDims),r.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var o,B=!e.returnPixelInterleavedDims;if(0!==I.numValidPixel)if(I.zMax===I.zMin)Q.constructConstantSurface(r,B);else if(g>=4&&Q.checkMinMaxRanges(A,r))Q.constructConstantSurface(r,B);else{var C=new DataView(A,r.ptr,2),E=C.getUint8(0);if(r.ptr++,E)Q.readDataOneSweep(A,r,n,B);else if(g>1&&I.imageType<=1&&Math.abs(I.maxZError-.5)<1e-5){var s=C.getUint8(1);if(r.ptr++,r.encodeMode=s,s>2||g<4&&s>1)throw"Invalid Huffman flag "+s;s?Q.readHuffman(A,r,n,B):Q.readTiles(A,r,n,B)}else Q.readTiles(A,r,n,B)}r.eofOffset=r.ptr,e.inputOffset?(o=r.headerInfo.blobSize+e.inputOffset-r.ptr,Math.abs(o)>=1&&(r.eofOffset=e.inputOffset+r.headerInfo.blobSize)):(o=r.headerInfo.blobSize-r.ptr,Math.abs(o)>=1&&(r.eofOffset=r.headerInfo.blobSize));var f={width:I.width,height:I.height,pixelData:r.pixels.resultPixels,minValue:I.zMin,maxValue:I.zMax,validPixelCount:I.numValidPixel,dimCount:I.numDims,dimStats:{minValues:I.minValues,maxValues:I.maxValues},maskData:r.pixels.resultMask};if(r.pixels.resultMask&&Q.isValidPixelValue(I.imageType,t)){var c=r.pixels.resultMask;for(i=0;i<a;i++)c[i]||(f.pixelData[i]=t);f.noDataValue=t}return r.noDataValue=t,e.returnFileInfo&&(f.fileInfo=Q.formatFileInfo(r)),f},getBandCount:function(A){for(var e=0,t=0,i={ptr:0,pixels:{}};t<A.byteLength-58;)Q.readHeaderInfo(A,i),t+=i.headerInfo.blobSize,e++,i.ptr=t;return e}}),l=(s=new ArrayBuffer(4),f=new Uint8Array(s),new Uint32Array(s)[0]=1,1===f[0]),u={decode:function(A,e){if(!l)throw"Big endian system is not supported.";var t,i,r=(e=e||{}).inputOffset||0,I=new Uint8Array(A,r,10),g=String.fromCharCode.apply(null,I);if("CntZImage"===g.trim())t=c,i=1;else{if("Lerc2"!==g.substring(0,5))throw"Unexpected file identifier string: "+g;t=h,i=2}for(var n,a,o,B,C,Q,E=0,s=A.byteLength-10,f=[],u={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},w=0;r<s;){var d=t.decode(A,{inputOffset:r,encodedMaskData:n,maskData:o,returnMask:0===E,returnEncodedMask:0===E,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});r=d.fileInfo.eofOffset,o=d.maskData,0===E&&(n=d.encodedMaskData,u.width=d.width,u.height=d.height,u.dimCount=d.dimCount||1,u.pixelType=d.pixelType||d.fileInfo.pixelType,u.mask=o),i>1&&(o&&f.push(o),d.fileInfo.mask&&d.fileInfo.mask.numBytes>0&&w++),E++,u.pixels.push(d.pixelData),u.statistics.push({minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue,dimStats:d.dimStats})}if(i>1&&w>1){for(Q=u.width*u.height,u.bandMasks=f,(o=new Uint8Array(Q)).set(f[0]),B=1;B<f.length;B++)for(a=f[B],C=0;C<Q;C++)o[C]=o[C]&a[C];u.maskData=o}return u}};TA.exports?TA.exports=u:this.Lerc=u}();var ZA,jA,WA,zA=XA.exports,$A={env:{emscripten_notify_memory_growth:function(A){WA=new Uint8Array(jA.exports.memory.buffer)}}},Ae=function(){function A(){B(this,A)}return Q(A,[{key:"init",value:function(){return ZA||(ZA="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+ee).then((function(A){return A.arrayBuffer()})).then((function(A){return WebAssembly.instantiate(A,$A)})).then(this._init):WebAssembly.instantiate(Buffer.from(ee,"base64"),$A).then(this._init))}},{key:"_init",value:function(A){jA=A.instance,$A.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(A){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!jA)throw new Error("ZSTDDecoder: Await .init() before decoding.");var t=A.byteLength,i=jA.exports.malloc(t);WA.set(A,i),e=e||Number(jA.exports.ZSTD_findDecompressedSize(i,t));var r=jA.exports.malloc(e),I=jA.exports.ZSTD_decompress(r,e,i,t),g=WA.slice(r,r+I);return jA.exports.free(i),jA.exports.free(r),g}}]),A}(),ee="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",te={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ie={};for(var re in te)te.hasOwnProperty(re)&&(ie[te[re]]=parseInt(re,10));ie.BitsPerSample,ie.ExtraSamples,ie.SampleFormat,ie.StripByteCounts,ie.StripOffsets,ie.StripRowCounts,ie.TileByteCounts,ie.TileOffsets,ie.SubIFDs;var Ie={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ge={};for(var ne in Ie)Ie.hasOwnProperty(ne)&&(ge[Ie[ne]]=parseInt(ne,10));var ae=1,oe=0,Be=1,Ce=2,Qe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Ee={};for(var se in Qe)Qe.hasOwnProperty(se)&&(Ee[Qe[se]]=parseInt(se,10));function fe(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var ce=new Ae,he=function(A){s(t,w);var e=fe(t);function t(A){var i;return B(this,t),(i=e.call(this)).planarConfiguration=void 0!==A.PlanarConfiguration?A.PlanarConfiguration:1,i.samplesPerPixel=void 0!==A.SamplesPerPixel?A.SamplesPerPixel:1,i.addCompression=A.LercParameters[ae],i}return Q(t,[{key:"decodeBlock",value:function(A){switch(this.addCompression){case oe:break;case Be:A=YA(new Uint8Array(A)).buffer;break;case Ce:A=ce.decode(new Uint8Array(A)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return zA.decode(A,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),t}(),le=Object.freeze({__proto__:null,zstd:ce,default:he});function ue(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var we=function(A){s(I,w);var t,i=ue(I);function I(){var A;if(B(this,I),A=i.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return A}return Q(I,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return i=new Blob([t]),A.next=3,createImageBitmap(i);case 3:return I=A.sent,"undefined"!=typeof document?((g=document.createElement("canvas")).width=I.width,g.height=I.height):g=new OffscreenCanvas(I.width,I.height),(n=g.getContext("2d")).drawImage(I,0,0),A.abrupt("return",n.getImageData(0,0,I.width,I.height).data.buffer);case 8:case"end":return A.stop()}}),A)}))),function(A,e){return t.apply(this,arguments)})}]),I}(),de=Object.freeze({__proto__:null,default:we});';return new Xt(typeof Buffer<"u"?"data:application/javascript;base64,"+Buffer.from(b,"binary").toString("base64"):URL.createObjectURL(new Blob([b],{type:"application/javascript"})))}});u.cogProtocol=async b=>{if(b.type=="json"){const v=b.url.replace("cog://","").split("#")[0];return{data:await Bl(v).getTilejson(b.url)}}if(b.type=="image")return{data:await Ch(b.url)};throw new Error(`Unsupported request type '${b.type}'`)},u.colorScale=no,u.colorSchemeNames=No,u.locationValues=async(b,{latitude:v,longitude:_},D)=>{const T=Bl(b),{minzoom:F,maxzoom:Z}=await T.getTilejson(b),{noData:G,scale:ne,offset:$}=await T.getMetadata(),W=D===void 0?Z:Math.max(F,Math.min(Z,Math.round(D))),{tileIndex:ge,column:se,row:X}=(({latitude:Ie,longitude:xe,zoom:Qe})=>{const[Pe,Oe]=bs.forward([xe,Ie]),Te=(Pe+Wr/2)/Wr*zr*2**Qe,Ke=-(Oe-Wr/2)/Wr*zr*2**Qe;return{tileIndex:{z:Qe,x:Math.floor(Te/zr),y:Math.floor(Ke/zr)},row:Math.floor(Ke%zr),column:Math.floor(Te%zr)}})({latitude:v,longitude:_,zoom:W});return(await T.getRawTile(ge)).map(Ie=>{const xe=$+Ie[256*X+se]*ne;return xe===G||isNaN(xe)||xe===1/0?NaN:xe})},u.setColorFunction=(b,v)=>{so(b,(_=>(D,T)=>{const{offset:F,scale:Z}=T,G=D[0].length,ne=new Uint8ClampedArray(4*G);for(let $=0;$<G;$++){const W=D.map(ge=>F+ge[$]*Z);_(W,ne.subarray(4*$,4*$+4),T)}return ne})(v))}})})(yg,yg.exports);var r2=yg.exports;const LI=(i,s)=>{const u=i.__vccOpts||i;for(const[d,y]of s)u[d]=y;return u},Ah=yi({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function dh(i){return{dimensionStyles:nt(()=>{const u={},d=hr(i.height),y=hr(i.maxHeight),C=hr(i.maxWidth),I=hr(i.minHeight),l=hr(i.minWidth),q=hr(i.width);return d!=null&&(u.height=d),y!=null&&(u.maxHeight=y),C!=null&&(u.maxWidth=C),I!=null&&(u.minHeight=I),l!=null&&(u.minWidth=l),q!=null&&(u.width=q),u})}}const Wn=yi({tag:{type:String,default:"div"}},"tag"),n2=yi({fluid:{type:Boolean,default:!1},...Sr(),...Ah(),...Wn()},"VContainer"),DA=rr()({name:"VContainer",props:n2(),setup(i,s){let{slots:u}=s;const{rtlClasses:d}=hh(),{dimensionStyles:y}=dh(i);return Dr(()=>He(i.tag,{class:["v-container",{"v-container--fluid":i.fluid},d.value,i.class],style:[y.value,i.style]},u)),{}}}),FI=Od.reduce((i,s)=>(i[s]={type:[Boolean,String,Number],default:!1},i),{}),zI=Od.reduce((i,s)=>{const u="offset"+dl(s);return i[u]={type:[String,Number],default:null},i},{}),GI=Od.reduce((i,s)=>{const u="order"+dl(s);return i[u]={type:[String,Number],default:null},i},{}),l0={col:Object.keys(FI),offset:Object.keys(zI),order:Object.keys(GI)};function a2(i,s,u){let d=i;if(!(u==null||u===!1)){if(s){const y=s.replace(i,"");d+=`-${y}`}return i==="col"&&(d="v-"+d),i==="col"&&(u===""||u===!0)||(d+=`-${u}`),d.toLowerCase()}}const s2=["auto","start","end","center","baseline","stretch"],o2=yi({cols:{type:[Boolean,String,Number],default:!1},...FI,offset:{type:[String,Number],default:null},...zI,order:{type:[String,Number],default:null},...GI,alignSelf:{type:String,default:null,validator:i=>s2.includes(i)},...Sr(),...Wn()},"VCol"),l2=rr()({name:"VCol",props:o2(),setup(i,s){let{slots:u}=s;const d=nt(()=>{const y=[];let C;for(C in l0)l0[C].forEach(l=>{const q=i[l],Y=a2(C,l,q);Y&&y.push(Y)});const I=y.some(l=>l.startsWith("v-col-"));return y.push({"v-col":!I||!i.cols,[`v-col-${i.cols}`]:i.cols,[`offset-${i.offset}`]:i.offset,[`order-${i.order}`]:i.order,[`align-self-${i.alignSelf}`]:i.alignSelf}),y});return()=>{var y;return Wa(i.tag,{class:[d.value,i.class],style:i.style},(y=u.default)==null?void 0:y.call(u))}}}),ip=["start","end","center"],NI=["space-between","space-around","space-evenly"];function rp(i,s){return Od.reduce((u,d)=>{const y=i+dl(d);return u[y]=s(),u},{})}const c2=[...ip,"baseline","stretch"],UI=i=>c2.includes(i),OI=rp("align",()=>({type:String,default:null,validator:UI})),u2=[...ip,...NI],VI=i=>u2.includes(i),qI=rp("justify",()=>({type:String,default:null,validator:VI})),h2=[...ip,...NI,"stretch"],HI=i=>h2.includes(i),jI=rp("alignContent",()=>({type:String,default:null,validator:HI})),c0={align:Object.keys(OI),justify:Object.keys(qI),alignContent:Object.keys(jI)},A2={align:"align",justify:"justify",alignContent:"align-content"};function d2(i,s,u){let d=A2[i];if(u!=null){if(s){const y=s.replace(i,"");d+=`-${y}`}return d+=`-${u}`,d.toLowerCase()}}const f2=yi({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:UI},...OI,justify:{type:String,default:null,validator:VI},...qI,alignContent:{type:String,default:null,validator:HI},...jI,...Sr(),...Wn()},"VRow"),g2=rr()({name:"VRow",props:f2(),setup(i,s){let{slots:u}=s;const d=nt(()=>{const y=[];let C;for(C in c0)c0[C].forEach(I=>{const l=i[I],q=d2(C,I,l);q&&y.push(q)});return y.push({"v-row--no-gutters":i.noGutters,"v-row--dense":i.dense,[`align-${i.align}`]:i.align,[`justify-${i.justify}`]:i.justify,[`align-content-${i.alignContent}`]:i.alignContent}),y});return()=>{var y;return Wa(i.tag,{class:["v-row",d.value,i.class],style:i.style},(y=u.default)==null?void 0:y.call(u))}}}),_g=K_("v-spacer","div","VSpacer"),p2={__name:"MapPmTiles",setup(i){return _s(async()=>{const s=new JE;ad.addProtocol("pmtiles",s.tile);const u="https://geovizbucket.s3.us-west-2.amazonaws.com/swiss_gemeinden.pmtiles",d=new mg(u);s.add(d);const y=await d.getHeader();ad.addProtocol("cog",r2.cogProtocol);const C=new ad.Map({container:"map",zoom:y.maxZoom-3,center:[y.centerLon,y.centerLat],style:"https://demotiles.maplibre.org/style.json"});C.addControl(new ad.NavigationControl,"top-right"),C.on("load",()=>{C.addSource("swiss_gemeinden",{type:"vector",url:`pmtiles://${u}`}),C.addLayer({id:"gdf_gemeinden",source:"swiss_gemeinden","source-layer":"gdf_gemeinden",type:"fill",paint:{"fill-color":"steelblue","fill-outline-color":"white","fill-opacity":.3}}),C.addSource("imageSource",{type:"raster",url:"cog://https://geovizbucket.s3.us-west-2.amazonaws.com/output_cog_small_jpeg.tif",tileSize:512,minzoom:5,maxzoom:20}),C.addLayer({id:"imageLayer",source:"imageSource",type:"raster"})})}),(s,u)=>(Au(),du(DA,{fluid:""},{default:en(()=>u[0]||(u[0]=[aA("div",{id:"map",class:"map-container"},null,-1)])),_:1}))}},m2=LI(p2,[["__scopeId","data-v-80f43922"]]),y2=rr()({name:"VCardActions",props:Sr(),setup(i,s){let{slots:u}=s;return CA({VBtn:{slim:!0,variant:"text"}}),Dr(()=>{var d;return He("div",{class:["v-card-actions",i.class],style:i.style},[(d=u.default)==null?void 0:d.call(u)])}),{}}}),_2=yi({opacity:[Number,String],...Sr(),...Wn()},"VCardSubtitle"),np=rr()({name:"VCardSubtitle",props:_2(),setup(i,s){let{slots:u}=s;return Dr(()=>He(i.tag,{class:["v-card-subtitle",i.class],style:[{"--v-card-subtitle-opacity":i.opacity},i.style]},u)),{}}}),ap=K_("v-card-title"),I2=yi({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),qs=rr(!1)({name:"VDefaultsProvider",props:I2(),setup(i,s){let{slots:u}=s;const{defaults:d,disabled:y,reset:C,root:I,scoped:l}=Rg(i);return CA(d,{reset:C,root:I,scoped:l,disabled:y}),()=>{var q;return(q=u.default)==null?void 0:q.call(u)}}});function sp(i){return O_(()=>{const s=[],u={};if(i.value.background)if(hg(i.value.background)){if(u.backgroundColor=i.value.background,!i.value.text&&AC(i.value.background)){const d=xo(i.value.background);if(d.a==null||d.a===1){const y=J_(d);u.color=y,u.caretColor=y}}}else s.push(`bg-${i.value.background}`);return i.value.text&&(hg(i.value.text)?(u.color=i.value.text,u.caretColor=i.value.text):s.push(`text-${i.value.text}`)),{colorClasses:s,colorStyles:u}})}function uh(i,s){const u=nt(()=>({text:yr(i)?i.value:s?i[s]:null})),{colorClasses:d,colorStyles:y}=sp(u);return{textColorClasses:d,textColorStyles:y}}function lu(i,s){const u=nt(()=>({background:yr(i)?i.value:s?i[s]:null})),{colorClasses:d,colorStyles:y}=sp(u);return{backgroundColorClasses:d,backgroundColorStyles:y}}const v2=["x-small","small","default","large","x-large"],Hd=yi({size:{type:[String,Number],default:"default"}},"size");function jd(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();return O_(()=>{let u,d;return ug(v2,i.size)?u=`${s}--size-${i.size}`:i.size&&(d={width:hr(i.size),height:hr(i.size)}),{sizeClasses:u,sizeStyles:d}})}const b2=yi({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Xa,...Sr(),...Hd(),...Wn({tag:"i"}),...es()},"VIcon"),Al=rr()({name:"VIcon",props:b2(),setup(i,s){let{attrs:u,slots:d}=s;const y=Br(),{themeClasses:C}=js(i),{iconData:I}=EB(nt(()=>y.value||i.icon)),{sizeClasses:l}=jd(i),{textColorClasses:q,textColorStyles:Y}=uh(wr(i,"color"));return Dr(()=>{var V,Ae;const O=(V=d.default)==null?void 0:V.call(d);O&&(y.value=(Ae=U_(O).filter(Ve=>Ve.type===bA&&Ve.children&&typeof Ve.children=="string")[0])==null?void 0:Ae.children);const H=!!(u.onClick||u.onClickOnce);return He(I.value.component,{tag:i.tag,icon:I.value.icon,class:["v-icon","notranslate",C.value,l.value,q.value,{"v-icon--clickable":H,"v-icon--disabled":i.disabled,"v-icon--start":i.start,"v-icon--end":i.end},i.class],style:[l.value?void 0:{fontSize:hr(i.size),height:hr(i.size),width:hr(i.size)},Y.value,i.style],role:H?"button":void 0,"aria-hidden":!H,tabindex:H?i.disabled?-1:0:void 0},{default:()=>[O]})}),{}}});function x2(i){return{aspectStyles:nt(()=>{const s=Number(i.aspectRatio);return s?{paddingBottom:String(1/s*100)+"%"}:void 0})}}const JI=yi({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Sr(),...Ah()},"VResponsive"),u0=rr()({name:"VResponsive",props:JI(),setup(i,s){let{slots:u}=s;const{aspectStyles:d}=x2(i),{dimensionStyles:y}=dh(i);return Dr(()=>{var C;return He("div",{class:["v-responsive",{"v-responsive--inline":i.inline},i.class],style:[y.value,i.style]},[He("div",{class:"v-responsive__sizer",style:d.value},null),(C=u.additional)==null?void 0:C.call(u),u.default&&He("div",{class:["v-responsive__content",i.contentClass]},[u.default()])])}),{}}}),yc=yi({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function _c(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();return{roundedClasses:nt(()=>{const d=yr(i)?i.value:i.rounded,y=yr(i)?i.value:i.tile,C=[];if(d===!0||d==="")C.push(`${s}--rounded`);else if(typeof d=="string"||d===0)for(const I of String(d).split(" "))C.push(`rounded-${I}`);else(y||d===!1)&&C.push("rounded-0");return C})}}const YI=yi({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:i=>i!==!0}},"transition"),$h=(i,s)=>{let{slots:u}=s;const{transition:d,disabled:y,group:C,...I}=i,{component:l=C?Hg:Gd,...q}=typeof d=="object"?d:{};return Wa(l,ms(typeof d=="string"?{name:y?"":d}:q,typeof d=="string"?{}:Object.fromEntries(Object.entries({disabled:y,group:C}).filter(Y=>{let[O,H]=Y;return H!==void 0})),I),u)};function w2(i,s){if(!jg)return;const u=s.modifiers||{},d=s.value,{handler:y,options:C}=typeof d=="object"?d:{handler:d,options:{}},I=new IntersectionObserver(function(){var H;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1?arguments[1]:void 0;const Y=(H=i._observe)==null?void 0:H[s.instance.$.uid];if(!Y)return;const O=l.some(V=>V.isIntersecting);y&&(!u.quiet||Y.init)&&(!u.once||O||Y.init)&&y(O,l,q),O&&u.once?KI(i,s):Y.init=!0},C);i._observe=Object(i._observe),i._observe[s.instance.$.uid]={init:!1,observer:I},I.observe(i)}function KI(i,s){var d;const u=(d=i._observe)==null?void 0:d[s.instance.$.uid];u&&(u.observer.unobserve(i),delete i._observe[s.instance.$.uid])}const C2={mounted:w2,unmounted:KI},B2=yi({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...JI(),...Sr(),...yc(),...YI()},"VImg"),op=rr()({name:"VImg",directives:{intersect:C2},props:B2(),emits:{loadstart:i=>!0,load:i=>!0,error:i=>!0},setup(i,s){let{emit:u,slots:d}=s;const{backgroundColorClasses:y,backgroundColorStyles:C}=lu(wr(i,"color")),{roundedClasses:I}=_c(i),l=ga("VImg"),q=sr(""),Y=Br(),O=sr(i.eager?"loading":"idle"),H=sr(),V=sr(),Ae=nt(()=>i.src&&typeof i.src=="object"?{src:i.src.src,srcset:i.srcset||i.src.srcset,lazySrc:i.lazySrc||i.src.lazySrc,aspect:Number(i.aspectRatio||i.src.aspect||0)}:{src:i.src,srcset:i.srcset,lazySrc:i.lazySrc,aspect:Number(i.aspectRatio||0)}),Ve=nt(()=>Ae.value.aspect||H.value/V.value||0);ri(()=>i.src,()=>{Be(O.value!=="idle")}),ri(Ve,(st,Et)=>{!st&&Et&&Y.value&&ft(Y.value)}),zg(()=>Be());function Be(st){if(!(i.eager&&st)&&!(jg&&!st&&!i.eager)){if(O.value="loading",Ae.value.lazySrc){const Et=new Image;Et.src=Ae.value.lazySrc,ft(Et,null)}Ae.value.src&&fl(()=>{var Et;u("loadstart",((Et=Y.value)==null?void 0:Et.currentSrc)||Ae.value.src),setTimeout(()=>{var ni;if(!l.isUnmounted)if((ni=Y.value)!=null&&ni.complete){if(Y.value.naturalWidth||pt(),O.value==="error")return;Ve.value||ft(Y.value,null),O.value==="loading"&&ot()}else Ve.value||ft(Y.value),_t()})})}}function ot(){var st;l.isUnmounted||(_t(),ft(Y.value),O.value="loaded",u("load",((st=Y.value)==null?void 0:st.currentSrc)||Ae.value.src))}function pt(){var st;l.isUnmounted||(O.value="error",u("error",((st=Y.value)==null?void 0:st.currentSrc)||Ae.value.src))}function _t(){const st=Y.value;st&&(q.value=st.currentSrc||st.src)}let ut=-1;pn(()=>{clearTimeout(ut)});function ft(st){let Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ni=()=>{if(clearTimeout(ut),l.isUnmounted)return;const{naturalHeight:Li,naturalWidth:wi}=st;Li||wi?(H.value=wi,V.value=Li):!st.complete&&O.value==="loading"&&Et!=null?ut=window.setTimeout(ni,Et):(st.currentSrc.endsWith(".svg")||st.currentSrc.startsWith("data:image/svg+xml"))&&(H.value=1,V.value=1)};ni()}const Ft=nt(()=>({"v-img__img--cover":i.cover,"v-img__img--contain":!i.cover})),Ut=()=>{var ni;if(!Ae.value.src||O.value==="idle")return null;const st=He("img",{class:["v-img__img",Ft.value],style:{objectPosition:i.position},src:Ae.value.src,srcset:Ae.value.srcset,alt:i.alt,crossorigin:i.crossorigin,referrerpolicy:i.referrerpolicy,draggable:i.draggable,sizes:i.sizes,ref:Y,onLoad:ot,onError:pt},null),Et=(ni=d.sources)==null?void 0:ni.call(d);return He($h,{transition:i.transition,appear:!0},{default:()=>[hA(Et?He("picture",{class:"v-img__picture"},[Et,st]):st,[[Aw,O.value==="loaded"]])]})},zt=()=>He($h,{transition:i.transition},{default:()=>[Ae.value.lazySrc&&O.value!=="loaded"&&He("img",{class:["v-img__img","v-img__img--preload",Ft.value],style:{objectPosition:i.position},src:Ae.value.lazySrc,alt:i.alt,crossorigin:i.crossorigin,referrerpolicy:i.referrerpolicy,draggable:i.draggable},null)]}),Zt=()=>d.placeholder?He($h,{transition:i.transition,appear:!0},{default:()=>[(O.value==="loading"||O.value==="error"&&!d.error)&&He("div",{class:"v-img__placeholder"},[d.placeholder()])]}):null,Bt=()=>d.error?He($h,{transition:i.transition,appear:!0},{default:()=>[O.value==="error"&&He("div",{class:"v-img__error"},[d.error()])]}):null,Gt=()=>i.gradient?He("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${i.gradient})`}},null):null,mt=sr(!1);{const st=ri(Ve,Et=>{Et&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{mt.value=!0})}),st())})}return Dr(()=>{const st=u0.filterProps(i);return hA(He(u0,ms({class:["v-img",{"v-img--absolute":i.absolute,"v-img--booting":!mt.value},y.value,I.value,i.class],style:[{width:hr(i.width==="auto"?H.value:i.width)},C.value,i.style]},st,{aspectRatio:Ve.value,"aria-label":i.alt,role:i.alt?"img":void 0}),{additional:()=>He(Qn,null,[He(Ut,null,null),He(zt,null,null),He(Gt,null,null),He(Zt,null,null),He(Bt,null,null)]),default:d.default}),[[Ng("intersect"),{handler:Be,options:i.options},null,{once:!0}]])}),{currentSrc:q,image:Y,state:O,naturalWidth:H,naturalHeight:V}}}),fh=yi({border:[Boolean,Number,String]},"border");function gh(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();return{borderClasses:nt(()=>{const d=yr(i)?i.value:i.border,y=[];if(d===!0||d==="")y.push(`${s}--border`);else if(typeof d=="string"||d===0)for(const C of String(d).split(" "))y.push(`border-${C}`);return y})}}const E2=[null,"default","comfortable","compact"],mu=yi({density:{type:String,default:"default",validator:i=>E2.includes(i)}},"density");function ph(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();return{densityClasses:nt(()=>`${s}--density-${i.density}`)}}const Q2=["elevated","flat","tonal","outlined","text","plain"];function lp(i,s){return He(Qn,null,[i&&He("span",{key:"overlay",class:`${s}__overlay`},null),He("span",{key:"underlay",class:`${s}__underlay`},null)])}const Jd=yi({color:String,variant:{type:String,default:"elevated",validator:i=>Q2.includes(i)}},"variant");function cp(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();const u=nt(()=>{const{variant:C}=ps(i);return`${s}--variant-${C}`}),{colorClasses:d,colorStyles:y}=sp(nt(()=>{const{variant:C,color:I}=ps(i);return{[["elevated","flat"].includes(C)?"background":"text"]:I}}));return{colorClasses:d,colorStyles:y,variantClasses:u}}const S2=yi({start:Boolean,end:Boolean,icon:Xa,image:String,text:String,...fh(),...Sr(),...mu(),...yc(),...Hd(),...Wn(),...es(),...Jd({variant:"flat"})},"VAvatar"),Bd=rr()({name:"VAvatar",props:S2(),setup(i,s){let{slots:u}=s;const{themeClasses:d}=js(i),{borderClasses:y}=gh(i),{colorClasses:C,colorStyles:I,variantClasses:l}=cp(i),{densityClasses:q}=ph(i),{roundedClasses:Y}=_c(i),{sizeClasses:O,sizeStyles:H}=jd(i);return Dr(()=>He(i.tag,{class:["v-avatar",{"v-avatar--start":i.start,"v-avatar--end":i.end},d.value,y.value,C.value,q.value,Y.value,O.value,l.value,i.class],style:[I.value,H.value,i.style]},{default:()=>[u.default?He(qs,{key:"content-defaults",defaults:{VImg:{cover:!0,src:i.image},VIcon:{icon:i.icon}}},{default:()=>[u.default()]}):i.image?He(op,{key:"image",src:i.image,alt:"",cover:!0},null):i.icon?He(Al,{key:"icon",icon:i.icon},null):i.text,lp(!1,"v-avatar")]})),{}}}),D2=yi({appendAvatar:String,appendIcon:Xa,prependAvatar:String,prependIcon:Xa,subtitle:[String,Number],title:[String,Number],...Sr(),...mu()},"VCardItem"),k2=rr()({name:"VCardItem",props:D2(),setup(i,s){let{slots:u}=s;return Dr(()=>{var Y;const d=!!(i.prependAvatar||i.prependIcon),y=!!(d||u.prepend),C=!!(i.appendAvatar||i.appendIcon),I=!!(C||u.append),l=!!(i.title!=null||u.title),q=!!(i.subtitle!=null||u.subtitle);return He("div",{class:["v-card-item",i.class],style:i.style},[y&&He("div",{key:"prepend",class:"v-card-item__prepend"},[u.prepend?He(qs,{key:"prepend-defaults",disabled:!d,defaults:{VAvatar:{density:i.density,image:i.prependAvatar},VIcon:{density:i.density,icon:i.prependIcon}}},u.prepend):He(Qn,null,[i.prependAvatar&&He(Bd,{key:"prepend-avatar",density:i.density,image:i.prependAvatar},null),i.prependIcon&&He(Al,{key:"prepend-icon",density:i.density,icon:i.prependIcon},null)])]),He("div",{class:"v-card-item__content"},[l&&He(ap,{key:"title"},{default:()=>{var O;return[((O=u.title)==null?void 0:O.call(u))??i.title]}}),q&&He(np,{key:"subtitle"},{default:()=>{var O;return[((O=u.subtitle)==null?void 0:O.call(u))??i.subtitle]}}),(Y=u.default)==null?void 0:Y.call(u)]),I&&He("div",{key:"append",class:"v-card-item__append"},[u.append?He(qs,{key:"append-defaults",disabled:!C,defaults:{VAvatar:{density:i.density,image:i.appendAvatar},VIcon:{density:i.density,icon:i.appendIcon}}},u.append):He(Qn,null,[i.appendIcon&&He(Al,{key:"append-icon",density:i.density,icon:i.appendIcon},null),i.appendAvatar&&He(Bd,{key:"append-avatar",density:i.density,image:i.appendAvatar},null)])])])}),{}}}),M2=yi({opacity:[Number,String],...Sr(),...Wn()},"VCardText"),up=rr()({name:"VCardText",props:M2(),setup(i,s){let{slots:u}=s;return Dr(()=>He(i.tag,{class:["v-card-text",i.class],style:[{"--v-card-text-opacity":i.opacity},i.style]},u)),{}}}),kA=yi({elevation:{type:[Number,String],validator(i){const s=parseInt(i);return!isNaN(s)&&s>=0&&s<=24}}},"elevation");function MA(i){return{elevationClasses:nt(()=>{const u=yr(i)?i.value:i.elevation,d=[];return u==null||d.push(`elevation-${u}`),d})}}function $I(i,s){const u=Br(),d=sr(!1);if(jg){const y=new IntersectionObserver(C=>{d.value=!!C.find(I=>I.isIntersecting)},s);pn(()=>{y.disconnect()}),ri(u,(C,I)=>{I&&(y.unobserve(I),d.value=!1),C&&y.observe(C)},{flush:"post"})}return{intersectionRef:u,isIntersecting:d}}const h0={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},hp=yi({location:String},"location");function Ap(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2?arguments[2]:void 0;const{isRtl:d}=hh();return{locationStyles:nt(()=>{if(!i.location)return{};const{side:C,align:I}=Ww(i.location.split(" ").length>1?i.location:`${i.location} center`,d.value);function l(Y){return u?u(Y):0}const q={};return C!=="center"&&(s?q[h0[C]]=`calc(100% - ${l(C)}px)`:q[C]=0),I!=="center"?s?q[h0[I]]=`calc(100% - ${l(I)}px)`:q[I]=0:(C==="center"?q.top=q.left="50%":q[{top:"left",bottom:"left",left:"top",right:"top"}[C]]="50%",q.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[C]),q})}}const T2=yi({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Sr(),...hp({location:"top"}),...yc(),...Wn(),...es()},"VProgressLinear"),P2=rr()({name:"VProgressLinear",props:T2(),emits:{"update:modelValue":i=>!0},setup(i,s){var mt;let{slots:u}=s;const d=Co(i,"modelValue"),{isRtl:y,rtlClasses:C}=hh(),{themeClasses:I}=js(i),{locationStyles:l}=Ap(i),{textColorClasses:q,textColorStyles:Y}=uh(i,"color"),{backgroundColorClasses:O,backgroundColorStyles:H}=lu(nt(()=>i.bgColor||i.color)),{backgroundColorClasses:V,backgroundColorStyles:Ae}=lu(nt(()=>i.bufferColor||i.bgColor||i.color)),{backgroundColorClasses:Ve,backgroundColorStyles:Be}=lu(i,"color"),{roundedClasses:ot}=_c(i),{intersectionRef:pt,isIntersecting:_t}=$I(),ut=nt(()=>parseFloat(i.max)),ft=nt(()=>parseFloat(i.height)),Ft=nt(()=>Id(parseFloat(i.bufferValue)/ut.value*100,0,100)),Ut=nt(()=>Id(parseFloat(d.value)/ut.value*100,0,100)),zt=nt(()=>y.value!==i.reverse),Zt=nt(()=>i.indeterminate?"fade-transition":"slide-x-transition"),Bt=fa&&((mt=window.matchMedia)==null?void 0:mt.call(window,"(forced-colors: active)").matches);function Gt(st){if(!pt.value)return;const{left:Et,right:ni,width:Li}=pt.value.getBoundingClientRect(),wi=zt.value?Li-st.clientX+(ni-Li):st.clientX-Et;d.value=Math.round(wi/Li*ut.value)}return Dr(()=>He(i.tag,{ref:pt,class:["v-progress-linear",{"v-progress-linear--absolute":i.absolute,"v-progress-linear--active":i.active&&_t.value,"v-progress-linear--reverse":zt.value,"v-progress-linear--rounded":i.rounded,"v-progress-linear--rounded-bar":i.roundedBar,"v-progress-linear--striped":i.striped},ot.value,I.value,C.value,i.class],style:[{bottom:i.location==="bottom"?0:void 0,top:i.location==="top"?0:void 0,height:i.active?hr(ft.value):0,"--v-progress-linear-height":hr(ft.value),...i.absolute?l.value:{}},i.style],role:"progressbar","aria-hidden":i.active?"false":"true","aria-valuemin":"0","aria-valuemax":i.max,"aria-valuenow":i.indeterminate?void 0:Ut.value,onClick:i.clickable&&Gt},{default:()=>[i.stream&&He("div",{key:"stream",class:["v-progress-linear__stream",q.value],style:{...Y.value,[zt.value?"left":"right"]:hr(-ft.value),borderTop:`${hr(ft.value/2)} dotted`,opacity:parseFloat(i.bufferOpacity),top:`calc(50% - ${hr(ft.value/4)})`,width:hr(100-Ft.value,"%"),"--v-progress-linear-stream-to":hr(ft.value*(zt.value?1:-1))}},null),He("div",{class:["v-progress-linear__background",Bt?void 0:O.value],style:[H.value,{opacity:parseFloat(i.bgOpacity),width:i.stream?0:void 0}]},null),He("div",{class:["v-progress-linear__buffer",Bt?void 0:V.value],style:[Ae.value,{opacity:parseFloat(i.bufferOpacity),width:hr(Ft.value,"%")}]},null),He(Gd,{name:Zt.value},{default:()=>[i.indeterminate?He("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(st=>He("div",{key:st,class:["v-progress-linear__indeterminate",st,Bt?void 0:Ve.value],style:Be.value},null))]):He("div",{class:["v-progress-linear__determinate",Bt?void 0:Ve.value],style:[Be.value,{width:hr(Ut.value,"%")}]},null)]}),u.default&&He("div",{class:"v-progress-linear__content"},[u.default({value:Ut.value,buffer:Ft.value})])]})),{}}}),ZI=yi({loading:[Boolean,String]},"loader");function dp(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();return{loaderClasses:nt(()=>({[`${s}--loading`]:i.loading}))}}function WI(i,s){var d;let{slots:u}=s;return He("div",{class:`${i.name}__loader`},[((d=u.default)==null?void 0:d.call(u,{color:i.color,isActive:i.active}))||He(P2,{absolute:i.absolute,active:i.active,color:i.color,height:"2",indeterminate:!0},null)])}const R2=["static","relative","fixed","absolute","sticky"],XI=yi({position:{type:String,validator:i=>R2.includes(i)}},"position");function ev(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();return{positionClasses:nt(()=>i.position?`${s}--${i.position}`:void 0)}}function L2(){const i=ga("useRoute");return nt(()=>{var s;return(s=i==null?void 0:i.proxy)==null?void 0:s.$route})}function tv(i,s){var H,V;const u=px("RouterLink"),d=nt(()=>!!(i.href||i.to)),y=nt(()=>(d==null?void 0:d.value)||Ry(s,"click")||Ry(i,"click"));if(typeof u=="string"||!("useLink"in u)){const Ae=wr(i,"href");return{isLink:d,isClickable:y,href:Ae,linkProps:Gn({href:Ae})}}const C=nt(()=>({...i,to:wr(()=>i.to||"")})),I=u.useLink(C.value),l=nt(()=>i.to?I:void 0),q=L2(),Y=nt(()=>{var Ae,Ve,Be;return l.value?i.exact?q.value?((Be=l.value.isExactActive)==null?void 0:Be.value)&&Nd(l.value.route.value.query,q.value.query):((Ve=l.value.isExactActive)==null?void 0:Ve.value)??!1:((Ae=l.value.isActive)==null?void 0:Ae.value)??!1:!1}),O=nt(()=>{var Ae;return i.to?(Ae=l.value)==null?void 0:Ae.route.value.href:i.href});return{isLink:d,isClickable:y,isActive:Y,route:(H=l.value)==null?void 0:H.route,navigate:(V=l.value)==null?void 0:V.navigate,href:O,linkProps:Gn({href:O,"aria-current":nt(()=>Y.value?"page":void 0)})}}const iv=yi({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router"),Ig=Symbol("rippleStop"),F2=80;function A0(i,s){i.style.transform=s,i.style.webkitTransform=s}function vg(i){return i.constructor.name==="TouchEvent"}function rv(i){return i.constructor.name==="KeyboardEvent"}const z2=function(i,s){var H;let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=0,y=0;if(!rv(i)){const V=s.getBoundingClientRect(),Ae=vg(i)?i.touches[i.touches.length-1]:i;d=Ae.clientX-V.left,y=Ae.clientY-V.top}let C=0,I=.3;(H=s._ripple)!=null&&H.circle?(I=.15,C=s.clientWidth/2,C=u.center?C:C+Math.sqrt((d-C)**2+(y-C)**2)/4):C=Math.sqrt(s.clientWidth**2+s.clientHeight**2)/2;const l=`${(s.clientWidth-C*2)/2}px`,q=`${(s.clientHeight-C*2)/2}px`,Y=u.center?l:`${d-C}px`,O=u.center?q:`${y-C}px`;return{radius:C,scale:I,x:Y,y:O,centerX:l,centerY:q}},Ed={show(i,s){var Ae;let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((Ae=s==null?void 0:s._ripple)!=null&&Ae.enabled))return;const d=document.createElement("span"),y=document.createElement("span");d.appendChild(y),d.className="v-ripple__container",u.class&&(d.className+=` ${u.class}`);const{radius:C,scale:I,x:l,y:q,centerX:Y,centerY:O}=z2(i,s,u),H=`${C*2}px`;y.className="v-ripple__animation",y.style.width=H,y.style.height=H,s.appendChild(d);const V=window.getComputedStyle(s);V&&V.position==="static"&&(s.style.position="relative",s.dataset.previousPosition="static"),y.classList.add("v-ripple__animation--enter"),y.classList.add("v-ripple__animation--visible"),A0(y,`translate(${l}, ${q}) scale3d(${I},${I},${I})`),y.dataset.activated=String(performance.now()),setTimeout(()=>{y.classList.remove("v-ripple__animation--enter"),y.classList.add("v-ripple__animation--in"),A0(y,`translate(${Y}, ${O}) scale3d(1,1,1)`)},0)},hide(i){var C;if(!((C=i==null?void 0:i._ripple)!=null&&C.enabled))return;const s=i.getElementsByClassName("v-ripple__animation");if(s.length===0)return;const u=s[s.length-1];if(u.dataset.isHiding)return;u.dataset.isHiding="true";const d=performance.now()-Number(u.dataset.activated),y=Math.max(250-d,0);setTimeout(()=>{u.classList.remove("v-ripple__animation--in"),u.classList.add("v-ripple__animation--out"),setTimeout(()=>{var l;i.getElementsByClassName("v-ripple__animation").length===1&&i.dataset.previousPosition&&(i.style.position=i.dataset.previousPosition,delete i.dataset.previousPosition),((l=u.parentNode)==null?void 0:l.parentNode)===i&&i.removeChild(u.parentNode)},300)},y)}};function nv(i){return typeof i>"u"||!!i}function _A(i){const s={},u=i.currentTarget;if(!(!(u!=null&&u._ripple)||u._ripple.touched||i[Ig])){if(i[Ig]=!0,vg(i))u._ripple.touched=!0,u._ripple.isTouch=!0;else if(u._ripple.isTouch)return;if(s.center=u._ripple.centered||rv(i),u._ripple.class&&(s.class=u._ripple.class),vg(i)){if(u._ripple.showTimerCommit)return;u._ripple.showTimerCommit=()=>{Ed.show(i,u,s)},u._ripple.showTimer=window.setTimeout(()=>{var d;(d=u==null?void 0:u._ripple)!=null&&d.showTimerCommit&&(u._ripple.showTimerCommit(),u._ripple.showTimerCommit=null)},F2)}else Ed.show(i,u,s)}}function d0(i){i[Ig]=!0}function Ka(i){const s=i.currentTarget;if(s!=null&&s._ripple){if(window.clearTimeout(s._ripple.showTimer),i.type==="touchend"&&s._ripple.showTimerCommit){s._ripple.showTimerCommit(),s._ripple.showTimerCommit=null,s._ripple.showTimer=window.setTimeout(()=>{Ka(i)});return}window.setTimeout(()=>{s._ripple&&(s._ripple.touched=!1)}),Ed.hide(s)}}function av(i){const s=i.currentTarget;s!=null&&s._ripple&&(s._ripple.showTimerCommit&&(s._ripple.showTimerCommit=null),window.clearTimeout(s._ripple.showTimer))}let IA=!1;function sv(i){!IA&&(i.keyCode===ky.enter||i.keyCode===ky.space)&&(IA=!0,_A(i))}function ov(i){IA=!1,Ka(i)}function lv(i){IA&&(IA=!1,Ka(i))}function cv(i,s,u){const{value:d,modifiers:y}=s,C=nv(d);if(C||Ed.hide(i),i._ripple=i._ripple??{},i._ripple.enabled=C,i._ripple.centered=y.center,i._ripple.circle=y.circle,Nw(d)&&d.class&&(i._ripple.class=d.class),C&&!u){if(y.stop){i.addEventListener("touchstart",d0,{passive:!0}),i.addEventListener("mousedown",d0);return}i.addEventListener("touchstart",_A,{passive:!0}),i.addEventListener("touchend",Ka,{passive:!0}),i.addEventListener("touchmove",av,{passive:!0}),i.addEventListener("touchcancel",Ka),i.addEventListener("mousedown",_A),i.addEventListener("mouseup",Ka),i.addEventListener("mouseleave",Ka),i.addEventListener("keydown",sv),i.addEventListener("keyup",ov),i.addEventListener("blur",lv),i.addEventListener("dragstart",Ka,{passive:!0})}else!C&&u&&uv(i)}function uv(i){i.removeEventListener("mousedown",_A),i.removeEventListener("touchstart",_A),i.removeEventListener("touchend",Ka),i.removeEventListener("touchmove",av),i.removeEventListener("touchcancel",Ka),i.removeEventListener("mouseup",Ka),i.removeEventListener("mouseleave",Ka),i.removeEventListener("keydown",sv),i.removeEventListener("keyup",ov),i.removeEventListener("dragstart",Ka),i.removeEventListener("blur",lv)}function G2(i,s){cv(i,s,!1)}function N2(i){delete i._ripple,uv(i)}function U2(i,s){if(s.value===s.oldValue)return;const u=nv(s.oldValue);cv(i,s,u)}const fp={mounted:G2,unmounted:N2,updated:U2},O2=yi({appendAvatar:String,appendIcon:Xa,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Xa,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...fh(),...Sr(),...mu(),...Ah(),...kA(),...ZI(),...hp(),...XI(),...yc(),...iv(),...Wn(),...es(),...Jd({variant:"elevated"})},"VCard"),hv=rr()({name:"VCard",directives:{Ripple:fp},props:O2(),setup(i,s){let{attrs:u,slots:d}=s;const{themeClasses:y}=js(i),{borderClasses:C}=gh(i),{colorClasses:I,colorStyles:l,variantClasses:q}=cp(i),{densityClasses:Y}=ph(i),{dimensionStyles:O}=dh(i),{elevationClasses:H}=MA(i),{loaderClasses:V}=dp(i),{locationStyles:Ae}=Ap(i),{positionClasses:Ve}=ev(i),{roundedClasses:Be}=_c(i),ot=tv(i,u),pt=nt(()=>i.link!==!1&&ot.isLink.value),_t=nt(()=>!i.disabled&&i.link!==!1&&(i.link||ot.isClickable.value));return Dr(()=>{const ut=pt.value?"a":i.tag,ft=!!(d.title||i.title!=null),Ft=!!(d.subtitle||i.subtitle!=null),Ut=ft||Ft,zt=!!(d.append||i.appendAvatar||i.appendIcon),Zt=!!(d.prepend||i.prependAvatar||i.prependIcon),Bt=!!(d.image||i.image),Gt=Ut||Zt||zt,mt=!!(d.text||i.text!=null);return hA(He(ut,ms({class:["v-card",{"v-card--disabled":i.disabled,"v-card--flat":i.flat,"v-card--hover":i.hover&&!(i.disabled||i.flat),"v-card--link":_t.value},y.value,C.value,I.value,Y.value,H.value,V.value,Ve.value,Be.value,q.value,i.class],style:[l.value,O.value,Ae.value,i.style],onClick:_t.value&&ot.navigate,tabindex:i.disabled?-1:void 0},ot.linkProps),{default:()=>{var st;return[Bt&&He("div",{key:"image",class:"v-card__image"},[d.image?He(qs,{key:"image-defaults",disabled:!i.image,defaults:{VImg:{cover:!0,src:i.image}}},d.image):He(op,{key:"image-img",cover:!0,src:i.image},null)]),He(WI,{name:"v-card",active:!!i.loading,color:typeof i.loading=="boolean"?void 0:i.loading},{default:d.loader}),Gt&&He(k2,{key:"item",prependAvatar:i.prependAvatar,prependIcon:i.prependIcon,title:i.title,subtitle:i.subtitle,appendAvatar:i.appendAvatar,appendIcon:i.appendIcon},{default:d.item,prepend:d.prepend,title:d.title,subtitle:d.subtitle,append:d.append}),mt&&He(up,{key:"text"},{default:()=>{var Et;return[((Et=d.text)==null?void 0:Et.call(d))??i.text]}}),(st=d.default)==null?void 0:st.call(d),d.actions&&He(y2,null,{default:d.actions}),lp(_t.value,"v-card")]}}),[[Ng("ripple"),_t.value&&i.ripple]])}),{}}}),V2=or({__name:"TutorialPmTilesCard",props:{title:String,subtitle:String},setup(i){return(s,u)=>{const d=m2;return Au(),du(DA,{fluid:""},{default:en(()=>[He(hv,{class:"mx-auto",width:"100%"},{default:en(()=>[He(ap,null,{default:en(()=>[fA(oh(i.title),1)]),_:1}),He(np,null,{default:en(()=>[fA(oh(i.subtitle),1)]),_:1}),He(up,null,{default:en(()=>[He(d)]),_:1})]),_:1})]),_:1})}}}),q2=or({__name:"Map",props:{style:String,Lng:Number,Lat:Number,zoom:Number},setup(i){return(s,u)=>(Au(),du(DA,{fluid:""},{default:en(()=>[He(ps(dI),{"map-style":i.style,center:[i.Lng,i.Lat],zoom:i.zoom,height:"500px"},{default:en(()=>[He(ps(fI))]),_:1},8,["map-style","center","zoom"])]),_:1}))}}),H2=or({__name:"TutorialCard",props:{title:String,subtitle:String,mapStyle:String,mapCenterLng:Number,mapCenterLat:Number,mapZoom:Number},setup(i){return(s,u)=>{const d=q2;return Au(),du(DA,{fluid:""},{default:en(()=>[He(hv,{class:"mx-auto",width:"100%"},{default:en(()=>[He(ap,null,{default:en(()=>[fA(oh(i.title),1)]),_:1}),He(np,null,{default:en(()=>[fA(oh(i.subtitle),1)]),_:1}),He(up,null,{default:en(()=>[He(d,{style:Md(i.mapStyle),Lng:i.mapCenterLng,Lat:i.mapCenterLat,zoom:i.mapZoom},null,8,["style","Lng","Lat","zoom"])]),_:1})]),_:1})]),_:1})}}}),j2=yi({text:String,...Sr(),...Wn()},"VToolbarTitle"),J2=rr()({name:"VToolbarTitle",props:j2(),setup(i,s){let{slots:u}=s;return Dr(()=>{const d=!!(u.default||u.text||i.text);return He(i.tag,{class:["v-toolbar-title",i.class],style:i.style},{default:()=>{var y;return[d&&He("div",{class:"v-toolbar-title__placeholder"},[u.text?u.text():i.text,(y=u.default)==null?void 0:y.call(u)])]}})}),{}}}),Y2=yi({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function ts(i,s,u){return rr()({name:i,props:Y2({mode:u,origin:s}),setup(d,y){let{slots:C}=y;const I={onBeforeEnter(l){d.origin&&(l.style.transformOrigin=d.origin)},onLeave(l){if(d.leaveAbsolute){const{offsetTop:q,offsetLeft:Y,offsetWidth:O,offsetHeight:H}=l;l._transitionInitialStyles={position:l.style.position,top:l.style.top,left:l.style.left,width:l.style.width,height:l.style.height},l.style.position="absolute",l.style.top=`${q}px`,l.style.left=`${Y}px`,l.style.width=`${O}px`,l.style.height=`${H}px`}d.hideOnLeave&&l.style.setProperty("display","none","important")},onAfterLeave(l){if(d.leaveAbsolute&&(l!=null&&l._transitionInitialStyles)){const{position:q,top:Y,left:O,width:H,height:V}=l._transitionInitialStyles;delete l._transitionInitialStyles,l.style.position=q||"",l.style.top=Y||"",l.style.left=O||"",l.style.width=H||"",l.style.height=V||""}}};return()=>{const l=d.group?Hg:Gd;return Wa(l,{name:d.disabled?"":i,css:!d.disabled,...d.group?void 0:{mode:d.mode},...d.disabled?{}:I},C.default)}}})}function Av(i,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return rr()({name:i,props:{mode:{type:String,default:u},disabled:Boolean,group:Boolean},setup(d,y){let{slots:C}=y;const I=d.group?Hg:Gd;return()=>Wa(I,{name:d.disabled?"":i,css:!d.disabled,...d.disabled?{}:s},C.default)}})}function dv(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const u=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",d=Da(`offset-${u}`);return{onBeforeEnter(I){I._parent=I.parentNode,I._initialStyle={transition:I.style.transition,overflow:I.style.overflow,[u]:I.style[u]}},onEnter(I){const l=I._initialStyle;I.style.setProperty("transition","none","important"),I.style.overflow="hidden";const q=`${I[d]}px`;I.style[u]="0",I.offsetHeight,I.style.transition=l.transition,i&&I._parent&&I._parent.classList.add(i),requestAnimationFrame(()=>{I.style[u]=q})},onAfterEnter:C,onEnterCancelled:C,onLeave(I){I._initialStyle={transition:"",overflow:I.style.overflow,[u]:I.style[u]},I.style.overflow="hidden",I.style[u]=`${I[d]}px`,I.offsetHeight,requestAnimationFrame(()=>I.style[u]="0")},onAfterLeave:y,onLeaveCancelled:y};function y(I){i&&I._parent&&I._parent.classList.remove(i),C(I)}function C(I){const l=I._initialStyle[u];I.style.overflow=I._initialStyle.overflow,l!=null&&(I.style[u]=l),delete I._initialStyle}}ts("fab-transition","center center","out-in");ts("dialog-bottom-transition");ts("dialog-top-transition");ts("fade-transition");const K2=ts("scale-transition");ts("scroll-x-transition");ts("scroll-x-reverse-transition");ts("scroll-y-transition");ts("scroll-y-reverse-transition");ts("slide-x-transition");ts("slide-x-reverse-transition");const $2=ts("slide-y-transition");ts("slide-y-reverse-transition");const Z2=Av("expand-transition",dv());Av("expand-x-transition",dv("",!0));const W2=[null,"prominent","default","comfortable","compact"],fv=yi({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:i=>W2.includes(i)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...fh(),...Sr(),...kA(),...yc(),...Wn({tag:"header"}),...es()},"VToolbar"),f0=rr()({name:"VToolbar",props:fv(),setup(i,s){var Ae;let{slots:u}=s;const{backgroundColorClasses:d,backgroundColorStyles:y}=lu(wr(i,"color")),{borderClasses:C}=gh(i),{elevationClasses:I}=MA(i),{roundedClasses:l}=_c(i),{themeClasses:q}=js(i),{rtlClasses:Y}=hh(),O=sr(!!(i.extended||(Ae=u.extension)!=null&&Ae.call(u))),H=nt(()=>parseInt(Number(i.height)+(i.density==="prominent"?Number(i.height):0)-(i.density==="comfortable"?8:0)-(i.density==="compact"?16:0),10)),V=nt(()=>O.value?parseInt(Number(i.extensionHeight)+(i.density==="prominent"?Number(i.extensionHeight):0)-(i.density==="comfortable"?4:0)-(i.density==="compact"?8:0),10):0);return CA({VBtn:{variant:"text"}}),Dr(()=>{var pt;const Ve=!!(i.title||u.title),Be=!!(u.image||i.image),ot=(pt=u.extension)==null?void 0:pt.call(u);return O.value=!!(i.extended||ot),He(i.tag,{class:["v-toolbar",{"v-toolbar--absolute":i.absolute,"v-toolbar--collapse":i.collapse,"v-toolbar--flat":i.flat,"v-toolbar--floating":i.floating,[`v-toolbar--density-${i.density}`]:!0},d.value,C.value,I.value,l.value,q.value,Y.value,i.class],style:[y.value,i.style]},{default:()=>[Be&&He("div",{key:"image",class:"v-toolbar__image"},[u.image?He(qs,{key:"image-defaults",disabled:!i.image,defaults:{VImg:{cover:!0,src:i.image}}},u.image):He(op,{key:"image-img",cover:!0,src:i.image},null)]),He(qs,{defaults:{VTabs:{height:hr(H.value)}}},{default:()=>{var _t,ut,ft;return[He("div",{class:"v-toolbar__content",style:{height:hr(H.value)}},[u.prepend&&He("div",{class:"v-toolbar__prepend"},[(_t=u.prepend)==null?void 0:_t.call(u)]),Ve&&He(J2,{key:"title",text:i.title},{text:u.title}),(ut=u.default)==null?void 0:ut.call(u),u.append&&He("div",{class:"v-toolbar__append"},[(ft=u.append)==null?void 0:ft.call(u)])])]}}),He(qs,{defaults:{VTabs:{height:hr(V.value)}}},{default:()=>[He(Z2,null,{default:()=>[O.value&&He("div",{class:"v-toolbar__extension",style:{height:hr(V.value)}},[ot])]})]})]})}),{contentHeight:H,extensionHeight:V}}}),X2=yi({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function eQ(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:u}=s;let d=0,y=0;const C=Br(null),I=sr(0),l=sr(0),q=sr(0),Y=sr(!1),O=sr(!1),H=nt(()=>Number(i.scrollThreshold)),V=nt(()=>Id((H.value-I.value)/H.value||0)),Ae=()=>{const Ve=C.value;if(!Ve||u&&!u.value)return;d=I.value,I.value="window"in Ve?Ve.pageYOffset:Ve.scrollTop;const Be=Ve instanceof Window?document.documentElement.scrollHeight:Ve.scrollHeight;if(y!==Be){y=Be;return}O.value=I.value<d,q.value=Math.abs(I.value-H.value)};return ri(O,()=>{l.value=l.value||I.value}),ri(Y,()=>{l.value=0}),_s(()=>{ri(()=>i.scrollTarget,Ve=>{var ot;const Be=Ve?document.querySelector(Ve):window;Be&&Be!==C.value&&((ot=C.value)==null||ot.removeEventListener("scroll",Ae),C.value=Be,C.value.addEventListener("scroll",Ae,{passive:!0}))},{immediate:!0})}),pn(()=>{var Ve;(Ve=C.value)==null||Ve.removeEventListener("scroll",Ae)}),u&&ri(u,Ae,{immediate:!0}),{scrollThreshold:H,currentScroll:I,currentThreshold:q,isScrollActive:Y,scrollRatio:V,isScrollingUp:O,savedScroll:l}}function gv(){const i=sr(!1);return _s(()=>{window.requestAnimationFrame(()=>{i.value=!0})}),{ssrBootStyles:nt(()=>i.value?void 0:{transition:"none !important"}),isBooted:Td(i)}}const tQ=yi({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:i=>["top","bottom"].includes(i)},...fv(),...aI(),...X2(),height:{type:[Number,String],default:64}},"VAppBar"),iQ=rr()({name:"VAppBar",props:tQ(),emits:{"update:modelValue":i=>!0},setup(i,s){let{slots:u}=s;const d=Br(),y=Co(i,"modelValue"),C=nt(()=>{var ut;const _t=new Set(((ut=i.scrollBehavior)==null?void 0:ut.split(" "))??[]);return{hide:_t.has("hide"),fullyHide:_t.has("fully-hide"),inverted:_t.has("inverted"),collapse:_t.has("collapse"),elevate:_t.has("elevate"),fadeImage:_t.has("fade-image")}}),I=nt(()=>{const _t=C.value;return _t.hide||_t.fullyHide||_t.inverted||_t.collapse||_t.elevate||_t.fadeImage||!y.value}),{currentScroll:l,scrollThreshold:q,isScrollingUp:Y,scrollRatio:O}=eQ(i,{canScroll:I}),H=nt(()=>C.value.hide||C.value.fullyHide),V=nt(()=>i.collapse||C.value.collapse&&(C.value.inverted?O.value>0:O.value===0)),Ae=nt(()=>i.flat||C.value.fullyHide&&!y.value||C.value.elevate&&(C.value.inverted?l.value>0:l.value===0)),Ve=nt(()=>C.value.fadeImage?C.value.inverted?1-O.value:O.value:void 0),Be=nt(()=>{var ft,Ft;if(C.value.hide&&C.value.inverted)return 0;const _t=((ft=d.value)==null?void 0:ft.contentHeight)??0,ut=((Ft=d.value)==null?void 0:Ft.extensionHeight)??0;return H.value?l.value<q.value||C.value.fullyHide?_t+ut:_t:_t+ut});pA(nt(()=>!!i.scrollBehavior),()=>{Ac(()=>{H.value?C.value.inverted?y.value=l.value>q.value:y.value=Y.value||l.value<q.value:y.value=!0})});const{ssrBootStyles:ot}=gv(),{layoutItemStyles:pt}=sI({id:i.name,order:nt(()=>parseInt(i.order,10)),position:wr(i,"location"),layoutSize:Be,elementSize:sr(void 0),active:y,absolute:wr(i,"absolute")});return Dr(()=>{const _t=f0.filterProps(i);return He(f0,ms({ref:d,class:["v-app-bar",{"v-app-bar--bottom":i.location==="bottom"},i.class],style:[{...pt.value,"--v-toolbar-image-opacity":Ve.value,height:void 0,...ot.value},i.style]},_t,{collapse:V.value,flat:Ae.value}),u)}),{}}}),pv=yi({baseColor:String,divided:Boolean,...fh(),...Sr(),...mu(),...kA(),...yc(),...Wn(),...es(),...Jd()},"VBtnGroup"),g0=rr()({name:"VBtnGroup",props:pv(),setup(i,s){let{slots:u}=s;const{themeClasses:d}=js(i),{densityClasses:y}=ph(i),{borderClasses:C}=gh(i),{elevationClasses:I}=MA(i),{roundedClasses:l}=_c(i);CA({VBtn:{height:"auto",baseColor:wr(i,"baseColor"),color:wr(i,"color"),density:wr(i,"density"),flat:!0,variant:wr(i,"variant")}}),Dr(()=>He(i.tag,{class:["v-btn-group",{"v-btn-group--divided":i.divided},d.value,C.value,y.value,I.value,l.value,i.class],style:i.style},u))}}),rQ=yi({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),nQ=yi({value:null,disabled:Boolean,selectedClass:String},"group-item");function aQ(i,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const d=ga("useGroupItem");if(!d)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const y=ml();br(Symbol.for(`${s.description}:id`),y);const C=Vi(s,null);if(!C){if(!u)return C;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${s.description}`)}const I=wr(i,"value"),l=nt(()=>!!(C.disabled.value||i.disabled));C.register({id:y,value:I,disabled:l},d),pn(()=>{C.unregister(y)});const q=nt(()=>C.isSelected(y)),Y=nt(()=>C.items.value[0].id===y),O=nt(()=>C.items.value[C.items.value.length-1].id===y),H=nt(()=>q.value&&[C.selectedClass.value,i.selectedClass]);return ri(q,V=>{d.emit("group:selected",{value:V})},{flush:"sync"}),{id:y,isSelected:q,isFirst:Y,isLast:O,toggle:()=>C.select(y,!q.value),select:V=>C.select(y,V),selectedClass:H,value:I,disabled:l,group:C}}function sQ(i,s){let u=!1;const d=Gn([]),y=Co(i,"modelValue",[],V=>V==null?[]:mv(d,oc(V)),V=>{const Ae=lQ(d,V);return i.multiple?Ae:Ae[0]}),C=ga("useGroup");function I(V,Ae){const Ve=V,Be=Symbol.for(`${s.description}:id`),pt=th(Be,C==null?void 0:C.vnode).indexOf(Ae);ps(Ve.value)==null&&(Ve.value=pt,Ve.useIndexAsValue=!0),pt>-1?d.splice(pt,0,Ve):d.push(Ve)}function l(V){if(u)return;q();const Ae=d.findIndex(Ve=>Ve.id===V);d.splice(Ae,1)}function q(){const V=d.find(Ae=>!Ae.disabled);V&&i.mandatory==="force"&&!y.value.length&&(y.value=[V.id])}_s(()=>{q()}),pn(()=>{u=!0}),Gg(()=>{for(let V=0;V<d.length;V++)d[V].useIndexAsValue&&(d[V].value=V)});function Y(V,Ae){const Ve=d.find(Be=>Be.id===V);if(!(Ae&&(Ve!=null&&Ve.disabled)))if(i.multiple){const Be=y.value.slice(),ot=Be.findIndex(_t=>_t===V),pt=~ot;if(Ae=Ae??!pt,pt&&i.mandatory&&Be.length<=1||!pt&&i.max!=null&&Be.length+1>i.max)return;ot<0&&Ae?Be.push(V):ot>=0&&!Ae&&Be.splice(ot,1),y.value=Be}else{const Be=y.value.includes(V);if(i.mandatory&&Be)return;y.value=Ae??!Be?[V]:[]}}function O(V){if(i.multiple,y.value.length){const Ae=y.value[0],Ve=d.findIndex(pt=>pt.id===Ae);let Be=(Ve+V)%d.length,ot=d[Be];for(;ot.disabled&&Be!==Ve;)Be=(Be+V)%d.length,ot=d[Be];if(ot.disabled)return;y.value=[d[Be].id]}else{const Ae=d.find(Ve=>!Ve.disabled);Ae&&(y.value=[Ae.id])}}const H={register:I,unregister:l,selected:y,select:Y,disabled:wr(i,"disabled"),prev:()=>O(d.length-1),next:()=>O(1),isSelected:V=>y.value.includes(V),selectedClass:nt(()=>i.selectedClass),items:nt(()=>d),getItemIndex:V=>oQ(d,V)};return br(s,H),H}function oQ(i,s){const u=mv(i,[s]);return u.length?i.findIndex(d=>d.id===u[0]):-1}function mv(i,s){const u=[];return s.forEach(d=>{const y=i.find(I=>Nd(d,I.value)),C=i[d];(y==null?void 0:y.value)!=null?u.push(y.id):C!=null&&u.push(C.id)}),u}function lQ(i,s){const u=[];return s.forEach(d=>{const y=i.findIndex(C=>C.id===d);if(~y){const C=i[y];u.push(C.value!=null?C.value:y)}}),u}const yv=Symbol.for("vuetify:v-btn-toggle"),cQ=yi({...pv(),...rQ()},"VBtnToggle");rr()({name:"VBtnToggle",props:cQ(),emits:{"update:modelValue":i=>!0},setup(i,s){let{slots:u}=s;const{isSelected:d,next:y,prev:C,select:I,selected:l}=sQ(i,yv);return Dr(()=>{const q=g0.filterProps(i);return He(g0,ms({class:["v-btn-toggle",i.class]},q,{style:i.style}),{default:()=>{var Y;return[(Y=u.default)==null?void 0:Y.call(u,{isSelected:d,next:y,prev:C,select:I,selected:l})]}})}),{next:y,prev:C,select:I}}});const uQ=yi({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Sr(),...Hd(),...Wn({tag:"div"}),...es()},"VProgressCircular"),_v=rr()({name:"VProgressCircular",props:uQ(),setup(i,s){let{slots:u}=s;const d=20,y=2*Math.PI*d,C=Br(),{themeClasses:I}=js(i),{sizeClasses:l,sizeStyles:q}=jd(i),{textColorClasses:Y,textColorStyles:O}=uh(wr(i,"color")),{textColorClasses:H,textColorStyles:V}=uh(wr(i,"bgColor")),{intersectionRef:Ae,isIntersecting:Ve}=$I(),{resizeRef:Be,contentRect:ot}=Kg(),pt=nt(()=>Math.max(0,Math.min(100,parseFloat(i.modelValue)))),_t=nt(()=>Number(i.width)),ut=nt(()=>q.value?Number(i.size):ot.value?ot.value.width:Math.max(_t.value,32)),ft=nt(()=>d/(1-_t.value/ut.value)*2),Ft=nt(()=>_t.value/ut.value*ft.value),Ut=nt(()=>hr((100-pt.value)/100*y));return Ac(()=>{Ae.value=C.value,Be.value=C.value}),Dr(()=>He(i.tag,{ref:C,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!i.indeterminate,"v-progress-circular--visible":Ve.value,"v-progress-circular--disable-shrink":i.indeterminate==="disable-shrink"},I.value,l.value,Y.value,i.class],style:[q.value,O.value,i.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":i.indeterminate?void 0:pt.value},{default:()=>[He("svg",{style:{transform:`rotate(calc(-90deg + ${Number(i.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${ft.value} ${ft.value}`},[He("circle",{class:["v-progress-circular__underlay",H.value],style:V.value,fill:"transparent",cx:"50%",cy:"50%",r:d,"stroke-width":Ft.value,"stroke-dasharray":y,"stroke-dashoffset":0},null),He("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:d,"stroke-width":Ft.value,"stroke-dasharray":y,"stroke-dashoffset":Ut.value},null)]),u.default&&He("div",{class:"v-progress-circular__content"},[u.default({value:pt.value})])]})),{}}});function hQ(i,s){ri(()=>{var u;return(u=i.isActive)==null?void 0:u.value},u=>{i.isLink.value&&u&&s&&fl(()=>{s(!0)})},{immediate:!0})}const AQ=yi({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:yv},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Xa,appendIcon:Xa,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...fh(),...Sr(),...mu(),...Ah(),...kA(),...nQ(),...ZI(),...hp(),...XI(),...yc(),...iv(),...Hd(),...Wn({tag:"button"}),...es(),...Jd({variant:"elevated"})},"VBtn"),dQ=rr()({name:"VBtn",props:AQ(),emits:{"group:selected":i=>!0},setup(i,s){let{attrs:u,slots:d}=s;const{themeClasses:y}=js(i),{borderClasses:C}=gh(i),{densityClasses:I}=ph(i),{dimensionStyles:l}=dh(i),{elevationClasses:q}=MA(i),{loaderClasses:Y}=dp(i),{locationStyles:O}=Ap(i),{positionClasses:H}=ev(i),{roundedClasses:V}=_c(i),{sizeClasses:Ae,sizeStyles:Ve}=jd(i),Be=aQ(i,i.symbol,!1),ot=tv(i,u),pt=nt(()=>{var mt;return i.active!==void 0?i.active:ot.isLink.value?(mt=ot.isActive)==null?void 0:mt.value:Be==null?void 0:Be.isSelected.value}),_t=nt(()=>pt.value?i.activeColor??i.color:i.color),ut=nt(()=>{var st,Et;return{color:(Be==null?void 0:Be.isSelected.value)&&(!ot.isLink.value||((st=ot.isActive)==null?void 0:st.value))||!Be||((Et=ot.isActive)==null?void 0:Et.value)?_t.value??i.baseColor:i.baseColor,variant:i.variant}}),{colorClasses:ft,colorStyles:Ft,variantClasses:Ut}=cp(ut),zt=nt(()=>(Be==null?void 0:Be.disabled.value)||i.disabled),Zt=nt(()=>i.variant==="elevated"&&!(i.disabled||i.flat||i.border)),Bt=nt(()=>{if(!(i.value===void 0||typeof i.value=="symbol"))return Object(i.value)===i.value?JSON.stringify(i.value,null,0):i.value});function Gt(mt){var st;zt.value||ot.isLink.value&&(mt.metaKey||mt.ctrlKey||mt.shiftKey||mt.button!==0||u.target==="_blank")||((st=ot.navigate)==null||st.call(ot,mt),Be==null||Be.toggle())}return hQ(ot,Be==null?void 0:Be.select),Dr(()=>{const mt=ot.isLink.value?"a":i.tag,st=!!(i.prependIcon||d.prepend),Et=!!(i.appendIcon||d.append),ni=!!(i.icon&&i.icon!==!0);return hA(He(mt,ms({type:mt==="a"?void 0:"button",class:["v-btn",Be==null?void 0:Be.selectedClass.value,{"v-btn--active":pt.value,"v-btn--block":i.block,"v-btn--disabled":zt.value,"v-btn--elevated":Zt.value,"v-btn--flat":i.flat,"v-btn--icon":!!i.icon,"v-btn--loading":i.loading,"v-btn--readonly":i.readonly,"v-btn--slim":i.slim,"v-btn--stacked":i.stacked},y.value,C.value,ft.value,I.value,q.value,Y.value,H.value,V.value,Ae.value,Ut.value,i.class],style:[Ft.value,l.value,O.value,Ve.value,i.style],"aria-busy":i.loading?!0:void 0,disabled:zt.value||void 0,tabindex:i.loading||i.readonly?-1:void 0,onClick:Gt,value:Bt.value},ot.linkProps),{default:()=>{var Li;return[lp(!0,"v-btn"),!i.icon&&st&&He("span",{key:"prepend",class:"v-btn__prepend"},[d.prepend?He(qs,{key:"prepend-defaults",disabled:!i.prependIcon,defaults:{VIcon:{icon:i.prependIcon}}},d.prepend):He(Al,{key:"prepend-icon",icon:i.prependIcon},null)]),He("span",{class:"v-btn__content","data-no-activator":""},[!d.default&&ni?He(Al,{key:"content-icon",icon:i.icon},null):He(qs,{key:"content-defaults",disabled:!ni,defaults:{VIcon:{icon:i.icon}}},{default:()=>{var wi;return[((wi=d.default)==null?void 0:wi.call(d))??i.text]}})]),!i.icon&&Et&&He("span",{key:"append",class:"v-btn__append"},[d.append?He(qs,{key:"append-defaults",disabled:!i.appendIcon,defaults:{VIcon:{icon:i.appendIcon}}},d.append):He(Al,{key:"append-icon",icon:i.appendIcon},null)]),!!i.loading&&He("span",{key:"loader",class:"v-btn__loader"},[((Li=d.loader)==null?void 0:Li.call(d))??He(_v,{color:typeof i.loading=="boolean"?void 0:i.loading,indeterminate:!0,width:"2"},null)])]}}),[[fp,!zt.value&&i.ripple,"",{center:!!i.icon}]])}),{group:Be}}});function fQ(i){const{t:s}=QC();function u(d){let{name:y}=d;const C={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[y],I=i[`onClick:${y}`],l=I&&C?s(`$vuetify.input.${C}`,i.label??""):void 0;return He(Al,{icon:i[`${y}Icon`],"aria-label":l,onClick:I},null)}return{InputIcon:u}}const gQ=yi({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Sr(),...YI({transition:{component:$2,leaveAbsolute:!0,group:!0}})},"VMessages"),pQ=rr()({name:"VMessages",props:gQ(),setup(i,s){let{slots:u}=s;const d=nt(()=>oc(i.messages)),{textColorClasses:y,textColorStyles:C}=uh(nt(()=>i.color));return Dr(()=>He($h,{transition:i.transition,tag:"div",class:["v-messages",y.value,i.class],style:[C.value,i.style],role:"alert","aria-live":"polite"},{default:()=>[i.active&&d.value.map((I,l)=>He("div",{class:"v-messages__message",key:`${l}-${d.value}`},[u.message?u.message({message:I}):I]))]})),{}}}),mQ=yi({focused:Boolean,"onUpdate:focused":vd()},"focus");function yQ(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl();const u=Co(i,"focused"),d=nt(()=>({[`${s}--focused`]:u.value}));function y(){u.value=!0}function C(){u.value=!1}return{focusClasses:d,isFocused:u,focus:y,blur:C}}const _Q=Symbol.for("vuetify:form");function IQ(i){const s=Vi(_Q,null);return{...s,isReadonly:nt(()=>!!((i==null?void 0:i.readonly)??(s==null?void 0:s.isReadonly.value))),isDisabled:nt(()=>!!((i==null?void 0:i.disabled)??(s==null?void 0:s.isDisabled.value)))}}const vQ=yi({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...mQ()},"validation");function bQ(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pl(),u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ml();const d=Co(i,"modelValue"),y=nt(()=>i.validationValue===void 0?d.value:i.validationValue),C=IQ(i),I=Br([]),l=sr(!0),q=nt(()=>!!(oc(d.value===""?null:d.value).length||oc(y.value===""?null:y.value).length)),Y=nt(()=>{var ut;return(ut=i.errorMessages)!=null&&ut.length?oc(i.errorMessages).concat(I.value).slice(0,Math.max(0,+i.maxErrors)):I.value}),O=nt(()=>{var Ft;let ut=(i.validateOn??((Ft=C.validateOn)==null?void 0:Ft.value))||"input";ut==="lazy"&&(ut="input lazy"),ut==="eager"&&(ut="input eager");const ft=new Set((ut==null?void 0:ut.split(" "))??[]);return{input:ft.has("input"),blur:ft.has("blur")||ft.has("input")||ft.has("invalid-input"),invalidInput:ft.has("invalid-input"),lazy:ft.has("lazy"),eager:ft.has("eager")}}),H=nt(()=>{var ut;return i.error||(ut=i.errorMessages)!=null&&ut.length?!1:i.rules.length?l.value?I.value.length||O.value.lazy?null:!0:!I.value.length:!0}),V=sr(!1),Ae=nt(()=>({[`${s}--error`]:H.value===!1,[`${s}--dirty`]:q.value,[`${s}--disabled`]:C.isDisabled.value,[`${s}--readonly`]:C.isReadonly.value})),Ve=ga("validation"),Be=nt(()=>i.name??ps(u));zg(()=>{var ut;(ut=C.register)==null||ut.call(C,{id:Be.value,vm:Ve,validate:_t,reset:ot,resetValidation:pt})}),pn(()=>{var ut;(ut=C.unregister)==null||ut.call(C,Be.value)}),_s(async()=>{var ut;O.value.lazy||await _t(!O.value.eager),(ut=C.update)==null||ut.call(C,Be.value,H.value,Y.value)}),pA(()=>O.value.input||O.value.invalidInput&&H.value===!1,()=>{ri(y,()=>{if(y.value!=null)_t();else if(i.focused){const ut=ri(()=>i.focused,ft=>{ft||_t(),ut()})}})}),pA(()=>O.value.blur,()=>{ri(()=>i.focused,ut=>{ut||_t()})}),ri([H,Y],()=>{var ut;(ut=C.update)==null||ut.call(C,Be.value,H.value,Y.value)});async function ot(){d.value=null,await fl(),await pt()}async function pt(){l.value=!0,O.value.lazy?I.value=[]:await _t(!O.value.eager)}async function _t(){let ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ft=[];V.value=!0;for(const Ft of i.rules){if(ft.length>=+(i.maxErrors??1))break;const zt=await(typeof Ft=="function"?Ft:()=>Ft)(y.value);if(zt!==!0){if(zt!==!1&&typeof zt!="string"){console.warn(`${zt} is not a valid value. Rule functions must return boolean true or a string.`);continue}ft.push(zt||"")}}return I.value=ft,V.value=!1,l.value=ut,I.value}return{errorMessages:Y,isDirty:q,isDisabled:C.isDisabled,isReadonly:C.isReadonly,isPristine:l,isValid:H,isValidating:V,reset:ot,resetValidation:pt,validate:_t,validationClasses:Ae}}const Iv=yi({id:String,appendIcon:Xa,centerAffix:{type:Boolean,default:!0},prependIcon:Xa,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:i=>["horizontal","vertical"].includes(i)},"onClick:prepend":vd(),"onClick:append":vd(),...Sr(),...mu(),...qw(Ah(),["maxWidth","minWidth","width"]),...es(),...vQ()},"VInput"),p0=rr()({name:"VInput",props:{...Iv()},emits:{"update:modelValue":i=>!0},setup(i,s){let{attrs:u,slots:d,emit:y}=s;const{densityClasses:C}=ph(i),{dimensionStyles:I}=dh(i),{themeClasses:l}=js(i),{rtlClasses:q}=hh(),{InputIcon:Y}=fQ(i),O=ml(),H=nt(()=>i.id||`input-${O}`),V=nt(()=>`${H.value}-messages`),{errorMessages:Ae,isDirty:Ve,isDisabled:Be,isReadonly:ot,isPristine:pt,isValid:_t,isValidating:ut,reset:ft,resetValidation:Ft,validate:Ut,validationClasses:zt}=bQ(i,"v-input",H),Zt=nt(()=>({id:H,messagesId:V,isDirty:Ve,isDisabled:Be,isReadonly:ot,isPristine:pt,isValid:_t,isValidating:ut,reset:ft,resetValidation:Ft,validate:Ut})),Bt=nt(()=>{var Gt;return(Gt=i.errorMessages)!=null&&Gt.length||!pt.value&&Ae.value.length?Ae.value:i.hint&&(i.persistentHint||i.focused)?i.hint:i.messages});return Dr(()=>{var ni,Li,wi,bi;const Gt=!!(d.prepend||i.prependIcon),mt=!!(d.append||i.appendIcon),st=Bt.value.length>0,Et=!i.hideDetails||i.hideDetails==="auto"&&(st||!!d.details);return He("div",{class:["v-input",`v-input--${i.direction}`,{"v-input--center-affix":i.centerAffix,"v-input--hide-spin-buttons":i.hideSpinButtons},C.value,l.value,q.value,zt.value,i.class],style:[I.value,i.style]},[Gt&&He("div",{key:"prepend",class:"v-input__prepend"},[(ni=d.prepend)==null?void 0:ni.call(d,Zt.value),i.prependIcon&&He(Y,{key:"prepend-icon",name:"prepend"},null)]),d.default&&He("div",{class:"v-input__control"},[(Li=d.default)==null?void 0:Li.call(d,Zt.value)]),mt&&He("div",{key:"append",class:"v-input__append"},[i.appendIcon&&He(Y,{key:"append-icon",name:"append"},null),(wi=d.append)==null?void 0:wi.call(d,Zt.value)]),Et&&He("div",{class:"v-input__details"},[He(pQ,{id:V.value,active:st,messages:Bt.value},{message:d.message}),(bi=d.details)==null?void 0:bi.call(d,Zt.value)])])}),{reset:ft,resetValidation:Ft,validate:Ut,isValid:_t,errorMessages:Ae}}}),xQ=yi({text:String,onClick:vd(),...Sr(),...es()},"VLabel"),wQ=rr()({name:"VLabel",props:xQ(),setup(i,s){let{slots:u}=s;return Dr(()=>{var d;return He("label",{class:["v-label",{"v-label--clickable":!!i.onClick},i.class],style:i.style,onClick:i.onClick},[i.text,(d=u.default)==null?void 0:d.call(u)])}),{}}}),vv=Symbol.for("vuetify:selection-control-group"),bv=yi({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Xa,trueIcon:Xa,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:Nd},...Sr(),...mu(),...es()},"SelectionControlGroup"),CQ=yi({...bv({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");rr()({name:"VSelectionControlGroup",props:CQ(),emits:{"update:modelValue":i=>!0},setup(i,s){let{slots:u}=s;const d=Co(i,"modelValue"),y=ml(),C=nt(()=>i.id||`v-selection-control-group-${y}`),I=nt(()=>i.name||C.value),l=new Set;return br(vv,{modelValue:d,forceUpdate:()=>{l.forEach(q=>q())},onForceUpdate:q=>{l.add(q),E0(()=>{l.delete(q)})}}),CA({[i.defaultsTarget]:{color:wr(i,"color"),disabled:wr(i,"disabled"),density:wr(i,"density"),error:wr(i,"error"),inline:wr(i,"inline"),modelValue:d,multiple:nt(()=>!!i.multiple||i.multiple==null&&Array.isArray(d.value)),name:I,falseIcon:wr(i,"falseIcon"),trueIcon:wr(i,"trueIcon"),readonly:wr(i,"readonly"),ripple:wr(i,"ripple"),type:wr(i,"type"),valueComparator:wr(i,"valueComparator")}}),Dr(()=>{var q;return He("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":i.inline},i.class],style:i.style,role:i.type==="radio"?"radiogroup":void 0},[(q=u.default)==null?void 0:q.call(u)])}),{}}});const xv=yi({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Sr(),...bv()},"VSelectionControl");function BQ(i){const s=Vi(vv,void 0),{densityClasses:u}=ph(i),d=Co(i,"modelValue"),y=nt(()=>i.trueValue!==void 0?i.trueValue:i.value!==void 0?i.value:!0),C=nt(()=>i.falseValue!==void 0?i.falseValue:!1),I=nt(()=>!!i.multiple||i.multiple==null&&Array.isArray(d.value)),l=nt({get(){const Ae=s?s.modelValue.value:d.value;return I.value?oc(Ae).some(Ve=>i.valueComparator(Ve,y.value)):i.valueComparator(Ae,y.value)},set(Ae){if(i.readonly)return;const Ve=Ae?y.value:C.value;let Be=Ve;I.value&&(Be=Ae?[...oc(d.value),Ve]:oc(d.value).filter(ot=>!i.valueComparator(ot,y.value))),s?s.modelValue.value=Be:d.value=Be}}),{textColorClasses:q,textColorStyles:Y}=uh(nt(()=>{if(!(i.error||i.disabled))return l.value?i.color:i.baseColor})),{backgroundColorClasses:O,backgroundColorStyles:H}=lu(nt(()=>l.value&&!i.error&&!i.disabled?i.color:i.baseColor)),V=nt(()=>l.value?i.trueIcon:i.falseIcon);return{group:s,densityClasses:u,trueValue:y,falseValue:C,model:l,textColorClasses:q,textColorStyles:Y,backgroundColorClasses:O,backgroundColorStyles:H,icon:V}}const m0=rr()({name:"VSelectionControl",directives:{Ripple:fp},inheritAttrs:!1,props:xv(),emits:{"update:modelValue":i=>!0},setup(i,s){let{attrs:u,slots:d}=s;const{group:y,densityClasses:C,icon:I,model:l,textColorClasses:q,textColorStyles:Y,backgroundColorClasses:O,backgroundColorStyles:H,trueValue:V}=BQ(i),Ae=ml(),Ve=sr(!1),Be=sr(!1),ot=Br(),pt=nt(()=>i.id||`input-${Ae}`),_t=nt(()=>!i.disabled&&!i.readonly);y==null||y.onForceUpdate(()=>{ot.value&&(ot.value.checked=l.value)});function ut(zt){_t.value&&(Ve.value=!0,Yw(zt.target,":focus-visible")!==!1&&(Be.value=!0))}function ft(){Ve.value=!1,Be.value=!1}function Ft(zt){zt.stopPropagation()}function Ut(zt){if(!_t.value){ot.value&&(ot.value.checked=l.value);return}i.readonly&&y&&fl(()=>y.forceUpdate()),l.value=zt.target.checked}return Dr(()=>{var mt,st;const zt=d.label?d.label({label:i.label,props:{for:pt.value}}):i.label,[Zt,Bt]=N_(u),Gt=He("input",ms({ref:ot,checked:l.value,disabled:!!i.disabled,id:pt.value,onBlur:ft,onFocus:ut,onInput:Ut,"aria-disabled":!!i.disabled,"aria-label":i.label,type:i.type,value:V.value,name:i.name,"aria-checked":i.type==="checkbox"?l.value:void 0},Bt),null);return He("div",ms({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":i.disabled,"v-selection-control--error":i.error,"v-selection-control--focused":Ve.value,"v-selection-control--focus-visible":Be.value,"v-selection-control--inline":i.inline},C.value,i.class]},Zt,{style:i.style}),[He("div",{class:["v-selection-control__wrapper",q.value],style:Y.value},[(mt=d.default)==null?void 0:mt.call(d,{backgroundColorClasses:O,backgroundColorStyles:H}),hA(He("div",{class:["v-selection-control__input"]},[((st=d.input)==null?void 0:st.call(d,{model:l,textColorClasses:q,textColorStyles:Y,backgroundColorClasses:O,backgroundColorStyles:H,inputNode:Gt,icon:I.value,props:{onFocus:ut,onBlur:ft,id:pt.value}}))??He(Qn,null,[I.value&&He(Al,{key:"icon",icon:I.value},null),Gt])]),[[Ng("ripple"),i.ripple&&[!i.disabled&&!i.readonly,null,["center","circle"]]]])]),zt&&He(wQ,{for:pt.value,onClick:Ft},{default:()=>[zt]})])}),{isFocused:Ve,input:ot}}}),EQ=yi({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Iv(),...xv()},"VSwitch"),QQ=rr()({name:"VSwitch",inheritAttrs:!1,props:EQ(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,s){let{attrs:u,slots:d}=s;const y=Co(i,"indeterminate"),C=Co(i,"modelValue"),{loaderClasses:I}=dp(i),{isFocused:l,focus:q,blur:Y}=yQ(i),O=Br(),H=fa&&window.matchMedia("(forced-colors: active)").matches,V=nt(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),Ae=ml(),Ve=nt(()=>i.id||`switch-${Ae}`);function Be(){y.value&&(y.value=!1)}function ot(pt){var _t,ut;pt.stopPropagation(),pt.preventDefault(),(ut=(_t=O.value)==null?void 0:_t.input)==null||ut.click()}return Dr(()=>{const[pt,_t]=N_(u),ut=p0.filterProps(i),ft=m0.filterProps(i);return He(p0,ms({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":y.value},I.value,i.class]},pt,ut,{modelValue:C.value,"onUpdate:modelValue":Ft=>C.value=Ft,id:Ve.value,focused:l.value,style:i.style}),{...d,default:Ft=>{let{id:Ut,messagesId:zt,isDisabled:Zt,isReadonly:Bt,isValid:Gt}=Ft;const mt={model:C,isValid:Gt};return He(m0,ms({ref:O},ft,{modelValue:C.value,"onUpdate:modelValue":[st=>C.value=st,Be],id:Ut.value,"aria-describedby":zt.value,type:"checkbox","aria-checked":y.value?"mixed":void 0,disabled:Zt.value,readonly:Bt.value,onFocus:q,onBlur:Y},_t),{...d,default:st=>{let{backgroundColorClasses:Et,backgroundColorStyles:ni}=st;return He("div",{class:["v-switch__track",H?void 0:Et.value],style:ni.value,onClick:ot},[d["track-true"]&&He("div",{key:"prepend",class:"v-switch__track-true"},[d["track-true"](mt)]),d["track-false"]&&He("div",{key:"append",class:"v-switch__track-false"},[d["track-false"](mt)])])},input:st=>{let{inputNode:Et,icon:ni,backgroundColorClasses:Li,backgroundColorStyles:wi}=st;return He(Qn,null,[Et,He("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":ni||i.loading},i.inset||H?void 0:Li.value],style:i.inset?void 0:wi.value},[d.thumb?He(qs,{defaults:{VIcon:{icon:ni,size:"x-small"}}},{default:()=>[d.thumb({...mt,icon:ni})]}):He(K2,null,{default:()=>[i.loading?He(WI,{name:"v-switch",active:!0,color:Gt.value===!1?void 0:V.value},{default:bi=>d.loader?d.loader(bi):He(_v,{active:bi.isActive,color:bi.color,indeterminate:!0,size:"16",width:"2"},null)}):ni&&He(Al,{key:String(ni),icon:ni,size:"x-small"},null)]})])])}})}})}),{}}}),SQ=or({__name:"AppBar",setup(i){const s=Br(!1),u=DB();return _s(()=>{window.matchMedia&&(s.value=!window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>{s.value=!d.matches}))}),Ac(()=>{u.global.name.value=s.value?"light":"dark"}),(d,y)=>(Au(),du(iQ,{class:"px-4 pb-2 pt-2",density:"compact",flat:""},{default:en(()=>[He(Bd,{size:"42",text:"GV",variant:"outlined"}),He(_g),He(dQ,{icon:"",href:"https://github.com/janmanuelwinkler/geoviz",target:"_blank"},{default:en(()=>[He(Bd,{size:"42",icon:"mdi-github"})]),_:1}),He(QQ,{class:"mt-5 pl-3",modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=C=>s.value=C),"false-icon":"mdi-weather-sunny","true-icon":"mdi-weather-night"},null,8,["modelValue"])]),_:1}))}}),DQ=yi({...Sr(),...kB({fullHeight:!0}),...es()},"VApp"),kQ=rr()({name:"VApp",props:DQ(),setup(i,s){let{slots:u}=s;const d=js(i),{layoutClasses:y,getLayoutItem:C,items:I,layoutRef:l}=PB(i),{rtlClasses:q}=hh();return Dr(()=>{var Y;return He("div",{ref:l,class:["v-application",d.themeClasses.value,y.value,q.value,i.class],style:[i.style]},[He("div",{class:"v-application__wrap"},[(Y=u.default)==null?void 0:Y.call(u)])])}),{getLayoutItem:C,items:I,theme:d}}}),MQ=yi({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...fh(),...Sr(),...kA(),...aI(),...yc(),...Wn({tag:"footer"}),...es()},"VFooter"),TQ=rr()({name:"VFooter",props:MQ(),setup(i,s){let{slots:u}=s;const d=Br(),{themeClasses:y}=js(i),{backgroundColorClasses:C,backgroundColorStyles:I}=lu(wr(i,"color")),{borderClasses:l}=gh(i),{elevationClasses:q}=MA(i),{roundedClasses:Y}=_c(i),O=sr(32),{resizeRef:H}=Kg(Ae=>{Ae.length&&(O.value=Ae[0].target.clientHeight)}),V=nt(()=>i.height==="auto"?O.value:parseInt(i.height,10));return pA(()=>i.app,()=>{const Ae=sI({id:i.name,order:nt(()=>parseInt(i.order,10)),position:nt(()=>"bottom"),layoutSize:V,elementSize:nt(()=>i.height==="auto"?void 0:V.value),active:nt(()=>i.app),absolute:wr(i,"absolute")});Ac(()=>{d.value=Ae.layoutItemStyles.value})}),Dr(()=>He(i.tag,{ref:H,class:["v-footer",y.value,C.value,l.value,q.value,Y.value,i.class],style:[I.value,i.app?d.value:{height:hr(i.height)},i.style]},u)),{}}}),PQ=yi({scrollable:Boolean,...Sr(),...Ah(),...Wn({tag:"main"})},"VMain"),RQ=rr()({name:"VMain",props:PQ(),setup(i,s){let{slots:u}=s;const{dimensionStyles:d}=dh(i),{mainStyles:y}=MB(),{ssrBootStyles:C}=gv();return Dr(()=>He(i.tag,{class:["v-main",{"v-main--scrollable":i.scrollable},i.class],style:[y.value,C.value,d.value,i.style]},{default:()=>{var I,l;return[i.scrollable?He("div",{class:"v-main__scroller"},[(I=u.default)==null?void 0:I.call(u)]):(l=u.default)==null?void 0:l.call(u)]}})),{}}}),LQ={class:"footer-item"},FQ=or({__name:"App",setup(i){const s=nt(()=>new Date().getFullYear());return(u,d)=>{const y=SQ,C=H2,I=V2;return Au(),du(kQ,{id:"personal-page"},{default:en(()=>[He(y,{class:"themed-appbar"}),He(RQ,null,{default:en(()=>[He(DA,{fluid:""},{default:en(()=>[He(g2,null,{default:en(()=>[He(_g),He(l2,{cols:"12","no-gutters":""},{default:en(()=>[d[0]||(d[0]=aA("h1",null,"GeoViz",-1)),d[1]||(d[1]=aA("h2",null,"A collection of tutorials on how to display vector and raster Tiles on the web.",-1)),He(C,{title:"Display a simple map",subtitle:"We are going to use vue-maplibre-gl to display a simple map.",mapStyle:"https://demotiles.maplibre.org/style.json",mapCenterLng:8.52364435868436,mapCenterLat:47.37771305255045,mapZoom:6}),He(I,{title:"Display a PM tiles map",subtitle:"We are going to use the native maplibre-gl to display a map from a PM Tiles.",mapStyle:"https://demotiles.maplibre.org/style.json"})]),_:1}),He(_g)]),_:1})]),_:1})]),_:1}),He(TQ,null,{default:en(()=>[aA("p",LQ,oh(s.value)+". MIT License. ",1)]),_:1})]),_:1})}}}),zQ=LI(FQ,[["__scopeId","data-v-a0d676a7"]]),gp=Rw(zQ);gp.use(LB);gp.use(wE);gp.mount("#app");
