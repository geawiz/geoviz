(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))d(_);new MutationObserver(_=>{for(const w of _)if(w.type==="childList")for(const v of w.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function c(_){const w={};return _.integrity&&(w.integrity=_.integrity),_.referrerPolicy&&(w.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?w.credentials="include":_.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function d(_){if(_.ep)return;_.ep=!0;const w=c(_);fetch(_.href,w)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ag(i){const s=Object.create(null);for(const c of i.split(","))s[c]=1;return c=>c in s}const En={},Zu=[],Io=()=>{},nb=()=>!1,dd=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),dg=i=>i.startsWith("onUpdate:"),gr=Object.assign,fg=(i,s)=>{const c=i.indexOf(s);c>-1&&i.splice(c,1)},rb=Object.prototype.hasOwnProperty,vn=(i,s)=>rb.call(i,s),Di=Array.isArray,Wu=i=>fd(i)==="[object Map]",n0=i=>fd(i)==="[object Set]",zi=i=>typeof i=="function",nr=i=>typeof i=="string",oc=i=>typeof i=="symbol",Mn=i=>i!==null&&typeof i=="object",r0=i=>(Mn(i)||zi(i))&&zi(i.then)&&zi(i.catch),a0=Object.prototype.toString,fd=i=>a0.call(i),ab=i=>fd(i).slice(8,-1),s0=i=>fd(i)==="[object Object]",gg=i=>nr(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Hh=Ag(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gd=i=>{const s=Object.create(null);return c=>s[c]||(s[c]=i(c))},sb=/-(\w)/g,ka=gd(i=>i.replace(sb,(s,c)=>c?c.toUpperCase():"")),ob=/\B([A-Z])/g,lu=gd(i=>i.replace(ob,"-$1").toLowerCase()),Al=gd(i=>i.charAt(0).toUpperCase()+i.slice(1)),If=gd(i=>i?`on${Al(i)}`:""),ic=(i,s)=>!Object.is(i,s),bf=(i,...s)=>{for(let c=0;c<i.length;c++)i[c](...s)},o0=(i,s,c,d=!1)=>{Object.defineProperty(i,s,{configurable:!0,enumerable:!1,writable:d,value:c})},lb=i=>{const s=parseFloat(i);return isNaN(s)?i:s},cb=i=>{const s=nr(i)?Number(i):NaN;return isNaN(s)?i:s};let Rm;const pd=()=>Rm||(Rm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pg(i){if(Di(i)){const s={};for(let c=0;c<i.length;c++){const d=i[c],_=nr(d)?db(d):pg(d);if(_)for(const w in _)s[w]=_[w]}return s}else if(nr(i)||Mn(i))return i}const ub=/;(?![^(]*\))/g,hb=/:([^]+)/,Ab=/\/\*[^]*?\*\//g;function db(i){const s={};return i.replace(Ab,"").split(ub).forEach(c=>{if(c){const d=c.split(hb);d.length>1&&(s[d[0].trim()]=d[1].trim())}}),s}function mg(i){let s="";if(nr(i))s=i;else if(Di(i))for(let c=0;c<i.length;c++){const d=mg(i[c]);d&&(s+=d+" ")}else if(Mn(i))for(const c in i)i[c]&&(s+=c+" ");return s.trim()}const fb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gb=Ag(fb);function l0(i){return!!i||i===""}const c0=i=>!!(i&&i.__v_isRef===!0),YA=i=>nr(i)?i:i==null?"":Di(i)||Mn(i)&&(i.toString===a0||!zi(i.toString))?c0(i)?YA(i.value):JSON.stringify(i,u0,2):String(i),u0=(i,s)=>c0(s)?u0(i,s.value):Wu(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((c,[d,_],w)=>(c[xf(d,w)+" =>"]=_,c),{})}:n0(s)?{[`Set(${s.size})`]:[...s.values()].map(c=>xf(c))}:oc(s)?xf(s):Mn(s)&&!Di(s)&&!s0(s)?String(s):s,xf=(i,s="")=>{var c;return oc(i)?`Symbol(${(c=i.description)!=null?c:s})`:i};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Aa;class h0{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Aa,!s&&Aa&&(this.index=(Aa.scopes||(Aa.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,c;if(this.scopes)for(s=0,c=this.scopes.length;s<c;s++)this.scopes[s].pause();for(s=0,c=this.effects.length;s<c;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,c;if(this.scopes)for(s=0,c=this.scopes.length;s<c;s++)this.scopes[s].resume();for(s=0,c=this.effects.length;s<c;s++)this.effects[s].resume()}}run(s){if(this._active){const c=Aa;try{return Aa=this,s()}finally{Aa=c}}}on(){Aa=this}off(){Aa=this.parent}stop(s){if(this._active){this._active=!1;let c,d;for(c=0,d=this.effects.length;c<d;c++)this.effects[c].stop();for(this.effects.length=0,c=0,d=this.cleanups.length;c<d;c++)this.cleanups[c]();if(this.cleanups.length=0,this.scopes){for(c=0,d=this.scopes.length;c<d;c++)this.scopes[c].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const _=this.parent.scopes.pop();_&&_!==this&&(this.parent.scopes[this.index]=_,_.index=this.index)}this.parent=void 0}}}function pb(i){return new h0(i)}function mb(){return Aa}function A0(i,s=!1){Aa&&Aa.cleanups.push(i)}let kn;const wf=new WeakSet;class d0{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Aa&&Aa.active&&Aa.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wf.has(this)&&(wf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||g0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lm(this),p0(this);const s=kn,c=Us;kn=this,Us=!0;try{return this.fn()}finally{m0(this),kn=s,Us=c,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)vg(s);this.deps=this.depsTail=void 0,Lm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gf(this)&&this.run()}get dirty(){return Gf(this)}}let f0=0,jh,Jh;function g0(i,s=!1){if(i.flags|=8,s){i.next=Jh,Jh=i;return}i.next=jh,jh=i}function yg(){f0++}function _g(){if(--f0>0)return;if(Jh){let s=Jh;for(Jh=void 0;s;){const c=s.next;s.next=void 0,s.flags&=-9,s=c}}let i;for(;jh;){let s=jh;for(jh=void 0;s;){const c=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(d){i||(i=d)}s=c}}if(i)throw i}function p0(i){for(let s=i.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function m0(i){let s,c=i.depsTail,d=c;for(;d;){const _=d.prevDep;d.version===-1?(d===c&&(c=_),vg(d),yb(d)):s=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0,d=_}i.deps=s,i.depsTail=c}function Gf(i){for(let s=i.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(y0(s.dep.computed)||s.dep.version!==s.version))return!0;return!!i._dirty}function y0(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===Xh))return;i.globalVersion=Xh;const s=i.dep;if(i.flags|=2,s.version>0&&!i.isSSR&&i.deps&&!Gf(i)){i.flags&=-3;return}const c=kn,d=Us;kn=i,Us=!0;try{p0(i);const _=i.fn(i._value);(s.version===0||ic(_,i._value))&&(i._value=_,s.version++)}catch(_){throw s.version++,_}finally{kn=c,Us=d,m0(i),i.flags&=-3}}function vg(i,s=!1){const{dep:c,prevSub:d,nextSub:_}=i;if(d&&(d.nextSub=_,i.prevSub=void 0),_&&(_.prevSub=d,i.nextSub=void 0),c.subs===i&&(c.subs=d,!d&&c.computed)){c.computed.flags&=-5;for(let w=c.computed.deps;w;w=w.nextDep)vg(w,!0)}!s&&!--c.sc&&c.map&&c.map.delete(c.key)}function yb(i){const{prevDep:s,nextDep:c}=i;s&&(s.nextDep=c,i.prevDep=void 0),c&&(c.prevDep=s,i.nextDep=void 0)}let Us=!0;const _0=[];function lc(){_0.push(Us),Us=!1}function cc(){const i=_0.pop();Us=i===void 0?!0:i}function Lm(i){const{cleanup:s}=i;if(i.cleanup=void 0,s){const c=kn;kn=void 0;try{s()}finally{kn=c}}}let Xh=0;class _b{constructor(s,c){this.sub=s,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ig{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(s){if(!kn||!Us||kn===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==kn)c=this.activeLink=new _b(kn,this),kn.deps?(c.prevDep=kn.depsTail,kn.depsTail.nextDep=c,kn.depsTail=c):kn.deps=kn.depsTail=c,v0(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const d=c.nextDep;d.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=d),c.prevDep=kn.depsTail,c.nextDep=void 0,kn.depsTail.nextDep=c,kn.depsTail=c,kn.deps===c&&(kn.deps=d)}return c}trigger(s){this.version++,Xh++,this.notify(s)}notify(s){yg();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{_g()}}}function v0(i){if(i.dep.sc++,i.sub.flags&4){const s=i.dep.computed;if(s&&!i.dep.subs){s.flags|=20;for(let d=s.deps;d;d=d.nextDep)v0(d)}const c=i.dep.subs;c!==i&&(i.prevSub=c,c&&(c.nextSub=i)),i.dep.subs=i}}const KA=new WeakMap,nu=Symbol(""),Nf=Symbol(""),eA=Symbol("");function $r(i,s,c){if(Us&&kn){let d=KA.get(i);d||KA.set(i,d=new Map);let _=d.get(c);_||(d.set(c,_=new Ig),_.map=d,_.key=c),_.track()}}function cl(i,s,c,d,_,w){const v=KA.get(i);if(!v){Xh++;return}const l=V=>{V&&V.trigger()};if(yg(),s==="clear")v.forEach(l);else{const V=Di(i),W=V&&gg(c);if(V&&c==="length"){const H=Number(d);v.forEach((q,G)=>{(G==="length"||G===eA||!oc(G)&&G>=H)&&l(q)})}else switch((c!==void 0||v.has(void 0))&&l(v.get(c)),W&&l(v.get(eA)),s){case"add":V?W&&l(v.get("length")):(l(v.get(nu)),Wu(i)&&l(v.get(Nf)));break;case"delete":V||(l(v.get(nu)),Wu(i)&&l(v.get(Nf)));break;case"set":Wu(i)&&l(v.get(nu));break}}_g()}function vb(i,s){const c=KA.get(i);return c&&c.get(s)}function Vu(i){const s=Ei(i);return s===i?s:($r(s,"iterate",eA),ms(i)?s:s.map(Zr))}function md(i){return $r(i=Ei(i),"iterate",eA),i}const Ib={__proto__:null,[Symbol.iterator](){return Cf(this,Symbol.iterator,Zr)},concat(...i){return Vu(this).concat(...i.map(s=>Di(s)?Vu(s):s))},entries(){return Cf(this,"entries",i=>(i[1]=Zr(i[1]),i))},every(i,s){return ol(this,"every",i,s,void 0,arguments)},filter(i,s){return ol(this,"filter",i,s,c=>c.map(Zr),arguments)},find(i,s){return ol(this,"find",i,s,Zr,arguments)},findIndex(i,s){return ol(this,"findIndex",i,s,void 0,arguments)},findLast(i,s){return ol(this,"findLast",i,s,Zr,arguments)},findLastIndex(i,s){return ol(this,"findLastIndex",i,s,void 0,arguments)},forEach(i,s){return ol(this,"forEach",i,s,void 0,arguments)},includes(...i){return Bf(this,"includes",i)},indexOf(...i){return Bf(this,"indexOf",i)},join(i){return Vu(this).join(i)},lastIndexOf(...i){return Bf(this,"lastIndexOf",i)},map(i,s){return ol(this,"map",i,s,void 0,arguments)},pop(){return Nh(this,"pop")},push(...i){return Nh(this,"push",i)},reduce(i,...s){return Fm(this,"reduce",i,s)},reduceRight(i,...s){return Fm(this,"reduceRight",i,s)},shift(){return Nh(this,"shift")},some(i,s){return ol(this,"some",i,s,void 0,arguments)},splice(...i){return Nh(this,"splice",i)},toReversed(){return Vu(this).toReversed()},toSorted(i){return Vu(this).toSorted(i)},toSpliced(...i){return Vu(this).toSpliced(...i)},unshift(...i){return Nh(this,"unshift",i)},values(){return Cf(this,"values",Zr)}};function Cf(i,s,c){const d=md(i),_=d[s]();return d!==i&&!ms(i)&&(_._next=_.next,_.next=()=>{const w=_._next();return w.value&&(w.value=c(w.value)),w}),_}const bb=Array.prototype;function ol(i,s,c,d,_,w){const v=md(i),l=v!==i&&!ms(i),V=v[s];if(V!==bb[s]){const q=V.apply(i,w);return l?Zr(q):q}let W=c;v!==i&&(l?W=function(q,G){return c.call(this,Zr(q),G,i)}:c.length>2&&(W=function(q,G){return c.call(this,q,G,i)}));const H=V.call(v,W,d);return l&&_?_(H):H}function Fm(i,s,c,d){const _=md(i);let w=c;return _!==i&&(ms(i)?c.length>3&&(w=function(v,l,V){return c.call(this,v,l,V,i)}):w=function(v,l,V){return c.call(this,v,Zr(l),V,i)}),_[s](w,...d)}function Bf(i,s,c){const d=Ei(i);$r(d,"iterate",eA);const _=d[s](...c);return(_===-1||_===!1)&&wg(c[0])?(c[0]=Ei(c[0]),d[s](...c)):_}function Nh(i,s,c=[]){lc(),yg();const d=Ei(i)[s].apply(i,c);return _g(),cc(),d}const xb=Ag("__proto__,__v_isRef,__isVue"),I0=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(oc));function wb(i){oc(i)||(i=String(i));const s=Ei(this);return $r(s,"has",i),s.hasOwnProperty(i)}class b0{constructor(s=!1,c=!1){this._isReadonly=s,this._isShallow=c}get(s,c,d){if(c==="__v_skip")return s.__v_skip;const _=this._isReadonly,w=this._isShallow;if(c==="__v_isReactive")return!_;if(c==="__v_isReadonly")return _;if(c==="__v_isShallow")return w;if(c==="__v_raw")return d===(_?w?Pb:B0:w?C0:w0).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(d)?s:void 0;const v=Di(s);if(!_){let V;if(v&&(V=Ib[c]))return V;if(c==="hasOwnProperty")return wb}const l=Reflect.get(s,c,jn(s)?s:d);return(oc(c)?I0.has(c):xb(c))||(_||$r(s,"get",c),w)?l:jn(l)?v&&gg(c)?l:l.value:Mn(l)?_?yd(l):fa(l):l}}class x0 extends b0{constructor(s=!1){super(!1,s)}set(s,c,d,_){let w=s[c];if(!this._isShallow){const V=au(w);if(!ms(d)&&!au(d)&&(w=Ei(w),d=Ei(d)),!Di(s)&&jn(w)&&!jn(d))return V?!1:(w.value=d,!0)}const v=Di(s)&&gg(c)?Number(c)<s.length:vn(s,c),l=Reflect.set(s,c,d,jn(s)?s:_);return s===Ei(_)&&(v?ic(d,w)&&cl(s,"set",c,d):cl(s,"add",c,d)),l}deleteProperty(s,c){const d=vn(s,c);s[c];const _=Reflect.deleteProperty(s,c);return _&&d&&cl(s,"delete",c,void 0),_}has(s,c){const d=Reflect.has(s,c);return(!oc(c)||!I0.has(c))&&$r(s,"has",c),d}ownKeys(s){return $r(s,"iterate",Di(s)?"length":nu),Reflect.ownKeys(s)}}class Cb extends b0{constructor(s=!1){super(!0,s)}set(s,c){return!0}deleteProperty(s,c){return!0}}const Bb=new x0,Eb=new Cb,Qb=new x0(!0);const Uf=i=>i,FA=i=>Reflect.getPrototypeOf(i);function Sb(i,s,c){return function(...d){const _=this.__v_raw,w=Ei(_),v=Wu(w),l=i==="entries"||i===Symbol.iterator&&v,V=i==="keys"&&v,W=_[i](...d),H=c?Uf:s?Of:Zr;return!s&&$r(w,"iterate",V?Nf:nu),{next(){const{value:q,done:G}=W.next();return G?{value:q,done:G}:{value:l?[H(q[0]),H(q[1])]:H(q),done:G}},[Symbol.iterator](){return this}}}}function zA(i){return function(...s){return i==="delete"?!1:i==="clear"?void 0:this}}function kb(i,s){const c={get(_){const w=this.__v_raw,v=Ei(w),l=Ei(_);i||(ic(_,l)&&$r(v,"get",_),$r(v,"get",l));const{has:V}=FA(v),W=s?Uf:i?Of:Zr;if(V.call(v,_))return W(w.get(_));if(V.call(v,l))return W(w.get(l));w!==v&&w.get(_)},get size(){const _=this.__v_raw;return!i&&$r(Ei(_),"iterate",nu),Reflect.get(_,"size",_)},has(_){const w=this.__v_raw,v=Ei(w),l=Ei(_);return i||(ic(_,l)&&$r(v,"has",_),$r(v,"has",l)),_===l?w.has(_):w.has(_)||w.has(l)},forEach(_,w){const v=this,l=v.__v_raw,V=Ei(l),W=s?Uf:i?Of:Zr;return!i&&$r(V,"iterate",nu),l.forEach((H,q)=>_.call(w,W(H),W(q),v))}};return gr(c,i?{add:zA("add"),set:zA("set"),delete:zA("delete"),clear:zA("clear")}:{add(_){!s&&!ms(_)&&!au(_)&&(_=Ei(_));const w=Ei(this);return FA(w).has.call(w,_)||(w.add(_),cl(w,"add",_,_)),this},set(_,w){!s&&!ms(w)&&!au(w)&&(w=Ei(w));const v=Ei(this),{has:l,get:V}=FA(v);let W=l.call(v,_);W||(_=Ei(_),W=l.call(v,_));const H=V.call(v,_);return v.set(_,w),W?ic(w,H)&&cl(v,"set",_,w):cl(v,"add",_,w),this},delete(_){const w=Ei(this),{has:v,get:l}=FA(w);let V=v.call(w,_);V||(_=Ei(_),V=v.call(w,_)),l&&l.call(w,_);const W=w.delete(_);return V&&cl(w,"delete",_,void 0),W},clear(){const _=Ei(this),w=_.size!==0,v=_.clear();return w&&cl(_,"clear",void 0,void 0),v}}),["keys","values","entries",Symbol.iterator].forEach(_=>{c[_]=Sb(_,i,s)}),c}function bg(i,s){const c=kb(i,s);return(d,_,w)=>_==="__v_isReactive"?!i:_==="__v_isReadonly"?i:_==="__v_raw"?d:Reflect.get(vn(c,_)&&_ in d?c:d,_,w)}const Db={get:bg(!1,!1)},Mb={get:bg(!1,!0)},Tb={get:bg(!0,!1)};const w0=new WeakMap,C0=new WeakMap,B0=new WeakMap,Pb=new WeakMap;function Rb(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lb(i){return i.__v_skip||!Object.isExtensible(i)?0:Rb(ab(i))}function fa(i){return au(i)?i:xg(i,!1,Bb,Db,w0)}function Fb(i){return xg(i,!1,Qb,Mb,C0)}function yd(i){return xg(i,!0,Eb,Tb,B0)}function xg(i,s,c,d,_){if(!Mn(i)||i.__v_raw&&!(s&&i.__v_isReactive))return i;const w=_.get(i);if(w)return w;const v=Lb(i);if(v===0)return i;const l=new Proxy(i,v===2?d:c);return _.set(i,l),l}function Xu(i){return au(i)?Xu(i.__v_raw):!!(i&&i.__v_isReactive)}function au(i){return!!(i&&i.__v_isReadonly)}function ms(i){return!!(i&&i.__v_isShallow)}function wg(i){return i?!!i.__v_raw:!1}function Ei(i){const s=i&&i.__v_raw;return s?Ei(s):i}function zb(i){return!vn(i,"__v_skip")&&Object.isExtensible(i)&&o0(i,"__v_skip",!0),i}const Zr=i=>Mn(i)?fa(i):i,Of=i=>Mn(i)?yd(i):i;function jn(i){return i?i.__v_isRef===!0:!1}function ln(i){return E0(i,!1)}function An(i){return E0(i,!0)}function E0(i,s){return jn(i)?i:new Gb(i,s)}class Gb{constructor(s,c){this.dep=new Ig,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?s:Ei(s),this._value=c?s:Zr(s),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(s){const c=this._rawValue,d=this.__v_isShallow||ms(s)||au(s);s=d?s:Ei(s),ic(s,c)&&(this._rawValue=s,this._value=d?s:Zr(s),this.dep.trigger())}}function _o(i){return jn(i)?i.value:i}const Nb={get:(i,s,c)=>s==="__v_raw"?i:_o(Reflect.get(i,s,c)),set:(i,s,c,d)=>{const _=i[s];return jn(_)&&!jn(c)?(_.value=c,!0):Reflect.set(i,s,c,d)}};function Q0(i){return Xu(i)?i:new Proxy(i,Nb)}function Cg(i){const s=Di(i)?new Array(i.length):{};for(const c in i)s[c]=S0(i,c);return s}class Ub{constructor(s,c,d){this._object=s,this._key=c,this._defaultValue=d,this.__v_isRef=!0,this._value=void 0}get value(){const s=this._object[this._key];return this._value=s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}get dep(){return vb(Ei(this._object),this._key)}}class Ob{constructor(s){this._getter=s,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Li(i,s,c){return jn(i)?i:zi(i)?new Ob(i):Mn(i)&&arguments.length>1?S0(i,s,c):ln(i)}function S0(i,s,c){const d=i[s];return jn(d)?d:new Ub(i,s,c)}class Vb{constructor(s,c,d){this.fn=s,this.setter=c,this._value=void 0,this.dep=new Ig(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xh-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=d}notify(){if(this.flags|=16,!(this.flags&8)&&kn!==this)return g0(this,!0),!0}get value(){const s=this.dep.track();return y0(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function qb(i,s,c=!1){let d,_;return zi(i)?d=i:(d=i.get,_=i.set),new Vb(d,_,c)}const GA={},$A=new WeakMap;let tu;function Hb(i,s=!1,c=tu){if(c){let d=$A.get(c);d||$A.set(c,d=[]),d.push(i)}}function jb(i,s,c=En){const{immediate:d,deep:_,once:w,scheduler:v,augmentJob:l,call:V}=c,W=ft=>_?ft:ms(ft)||_===!1||_===0?ul(ft,1):ul(ft);let H,q,G,me,pe=!1,Ae=!1;if(jn(i)?(q=()=>i.value,pe=ms(i)):Xu(i)?(q=()=>W(i),pe=!0):Di(i)?(Ae=!0,pe=i.some(ft=>Xu(ft)||ms(ft)),q=()=>i.map(ft=>{if(jn(ft))return ft.value;if(Xu(ft))return W(ft);if(zi(ft))return V?V(ft,2):ft()})):zi(i)?s?q=V?()=>V(i,2):i:q=()=>{if(G){lc();try{G()}finally{cc()}}const ft=tu;tu=H;try{return V?V(i,3,[me]):i(me)}finally{tu=ft}}:q=Io,s&&_){const ft=q,Pt=_===!0?1/0:_;q=()=>ul(ft(),Pt)}const Ye=mb(),st=()=>{H.stop(),Ye&&Ye.active&&fg(Ye.effects,H)};if(w&&s){const ft=s;s=(...Pt)=>{ft(...Pt),st()}}let ut=Ae?new Array(i.length).fill(GA):GA;const ot=ft=>{if(!(!(H.flags&1)||!H.dirty&&!ft))if(s){const Pt=H.run();if(_||pe||(Ae?Pt.some((Rt,Nt)=>ic(Rt,ut[Nt])):ic(Pt,ut))){G&&G();const Rt=tu;tu=H;try{const Nt=[Pt,ut===GA?void 0:Ae&&ut[0]===GA?[]:ut,me];V?V(s,3,Nt):s(...Nt),ut=Pt}finally{tu=Rt}}}else H.run()};return l&&l(ot),H=new d0(q),H.scheduler=v?()=>v(ot,!1):ot,me=ft=>Hb(ft,!1,H),G=H.onStop=()=>{const ft=$A.get(H);if(ft){if(V)V(ft,4);else for(const Pt of ft)Pt();$A.delete(H)}},s?d?ot(!0):ut=H.run():v?v(ot.bind(null,!0),!0):H.run(),st.pause=H.pause.bind(H),st.resume=H.resume.bind(H),st.stop=st,st}function ul(i,s=1/0,c){if(s<=0||!Mn(i)||i.__v_skip||(c=c||new Set,c.has(i)))return i;if(c.add(i),s--,jn(i))ul(i.value,s,c);else if(Di(i))for(let d=0;d<i.length;d++)ul(i[d],s,c);else if(n0(i)||Wu(i))i.forEach(d=>{ul(d,s,c)});else if(s0(i)){for(const d in i)ul(i[d],s,c);for(const d of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,d)&&ul(i[d],s,c)}return i}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function AA(i,s,c,d){try{return d?i(...d):i()}catch(_){_d(_,s,c)}}function Vs(i,s,c,d){if(zi(i)){const _=AA(i,s,c,d);return _&&r0(_)&&_.catch(w=>{_d(w,s,c)}),_}if(Di(i)){const _=[];for(let w=0;w<i.length;w++)_.push(Vs(i[w],s,c,d));return _}}function _d(i,s,c,d=!0){const _=s?s.vnode:null,{errorHandler:w,throwUnhandledErrorInProduction:v}=s&&s.appContext.config||En;if(s){let l=s.parent;const V=s.proxy,W=`https://vuejs.org/error-reference/#runtime-${c}`;for(;l;){const H=l.ec;if(H){for(let q=0;q<H.length;q++)if(H[q](i,V,W)===!1)return}l=l.parent}if(w){lc(),AA(w,null,10,[i,V,W]),cc();return}}Jb(i,c,_,d,v)}function Jb(i,s,c,d=!0,_=!1){if(_)throw i;console.error(i)}const da=[];let mo=-1;const eh=[];let Xl=null,ju=0;const k0=Promise.resolve();let ZA=null;function sh(i){const s=ZA||k0;return i?s.then(this?i.bind(this):i):s}function Yb(i){let s=mo+1,c=da.length;for(;s<c;){const d=s+c>>>1,_=da[d],w=tA(_);w<i||w===i&&_.flags&2?s=d+1:c=d}return s}function Bg(i){if(!(i.flags&1)){const s=tA(i),c=da[da.length-1];!c||!(i.flags&2)&&s>=tA(c)?da.push(i):da.splice(Yb(s),0,i),i.flags|=1,D0()}}function D0(){ZA||(ZA=k0.then(T0))}function Kb(i){Di(i)?eh.push(...i):Xl&&i.id===-1?Xl.splice(ju+1,0,i):i.flags&1||(eh.push(i),i.flags|=1),D0()}function zm(i,s,c=mo+1){for(;c<da.length;c++){const d=da[c];if(d&&d.flags&2){if(i&&d.id!==i.uid)continue;da.splice(c,1),c--,d.flags&4&&(d.flags&=-2),d(),d.flags&4||(d.flags&=-2)}}}function M0(i){if(eh.length){const s=[...new Set(eh)].sort((c,d)=>tA(c)-tA(d));if(eh.length=0,Xl){Xl.push(...s);return}for(Xl=s,ju=0;ju<Xl.length;ju++){const c=Xl[ju];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}Xl=null,ju=0}}const tA=i=>i.id==null?i.flags&2?-1:1/0:i.id;function T0(i){try{for(mo=0;mo<da.length;mo++){const s=da[mo];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),AA(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;mo<da.length;mo++){const s=da[mo];s&&(s.flags&=-2)}mo=-1,da.length=0,M0(),ZA=null,(da.length||eh.length)&&T0()}}let Qa=null,P0=null;function WA(i){const s=Qa;return Qa=i,P0=i&&i.type.__scopeId||null,s}function er(i,s=Qa,c){if(!s||i._n)return i;const d=(..._)=>{d._d&&Km(-1);const w=WA(s);let v;try{v=i(..._)}finally{WA(w),d._d&&Km(1)}return v};return d._n=!0,d._c=!0,d._d=!0,d}function su(i,s){if(Qa===null)return i;const c=wd(Qa),d=i.dirs||(i.dirs=[]);for(let _=0;_<s.length;_++){let[w,v,l,V=En]=s[_];w&&(zi(w)&&(w={mounted:w,updated:w}),w.deep&&ul(v),d.push({dir:w,instance:c,value:v,oldValue:void 0,arg:l,modifiers:V}))}return i}function Zc(i,s,c,d){const _=i.dirs,w=s&&s.dirs;for(let v=0;v<_.length;v++){const l=_[v];w&&(l.oldValue=w[v].value);let V=l.dir[d];V&&(lc(),Vs(V,c,8,[i.el,l,i,s]),cc())}}const $b=Symbol("_vte"),R0=i=>i.__isTeleport,ec=Symbol("_leaveCb"),NA=Symbol("_enterCb");function L0(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fl(()=>{i.isMounted=!0}),ys(()=>{i.isUnmounting=!0}),i}const fs=[Function,Array],F0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fs,onEnter:fs,onAfterEnter:fs,onEnterCancelled:fs,onBeforeLeave:fs,onLeave:fs,onAfterLeave:fs,onLeaveCancelled:fs,onBeforeAppear:fs,onAppear:fs,onAfterAppear:fs,onAppearCancelled:fs},z0=i=>{const s=i.subTree;return s.component?z0(s.component):s},Zb={name:"BaseTransition",props:F0,setup(i,{slots:s}){const c=Mg(),d=L0();return()=>{const _=s.default&&Eg(s.default(),!0);if(!_||!_.length)return;const w=G0(_),v=Ei(i),{mode:l}=v;if(d.isLeaving)return Ef(w);const V=Gm(w);if(!V)return Ef(w);let W=iA(V,v,d,c,q=>W=q);V.type!==ps&&ou(V,W);let H=c.subTree&&Gm(c.subTree);if(H&&H.type!==ps&&!iu(V,H)&&z0(c).type!==ps){let q=iA(H,v,d,c);if(ou(H,q),l==="out-in"&&V.type!==ps)return d.isLeaving=!0,q.afterLeave=()=>{d.isLeaving=!1,c.job.flags&8||c.update(),delete q.afterLeave,H=void 0},Ef(w);l==="in-out"&&V.type!==ps?q.delayLeave=(G,me,pe)=>{const Ae=N0(d,H);Ae[String(H.key)]=H,G[ec]=()=>{me(),G[ec]=void 0,delete W.delayedLeave,H=void 0},W.delayedLeave=()=>{pe(),delete W.delayedLeave,H=void 0}}:H=void 0}else H&&(H=void 0);return w}}};function G0(i){let s=i[0];if(i.length>1){for(const c of i)if(c.type!==ps){s=c;break}}return s}const Wb=Zb;function N0(i,s){const{leavingVNodes:c}=i;let d=c.get(s.type);return d||(d=Object.create(null),c.set(s.type,d)),d}function iA(i,s,c,d,_){const{appear:w,mode:v,persisted:l=!1,onBeforeEnter:V,onEnter:W,onAfterEnter:H,onEnterCancelled:q,onBeforeLeave:G,onLeave:me,onAfterLeave:pe,onLeaveCancelled:Ae,onBeforeAppear:Ye,onAppear:st,onAfterAppear:ut,onAppearCancelled:ot}=s,ft=String(i.key),Pt=N0(c,i),Rt=(Et,zt)=>{Et&&Vs(Et,d,9,zt)},Nt=(Et,zt)=>{const mt=zt[1];Rt(Et,zt),Di(Et)?Et.every(tt=>tt.length<=1)&&mt():Et.length<=1&&mt()},Xt={mode:v,persisted:l,beforeEnter(Et){let zt=V;if(!c.isMounted)if(w)zt=Ye||V;else return;Et[ec]&&Et[ec](!0);const mt=Pt[ft];mt&&iu(i,mt)&&mt.el[ec]&&mt.el[ec](),Rt(zt,[Et])},enter(Et){let zt=W,mt=H,tt=q;if(!c.isMounted)if(w)zt=st||W,mt=ut||H,tt=ot||q;else return;let yt=!1;const Jt=Et[NA]=yi=>{yt||(yt=!0,yi?Rt(tt,[Et]):Rt(mt,[Et]),Xt.delayedLeave&&Xt.delayedLeave(),Et[NA]=void 0)};zt?Nt(zt,[Et,Jt]):Jt()},leave(Et,zt){const mt=String(i.key);if(Et[NA]&&Et[NA](!0),c.isUnmounting)return zt();Rt(G,[Et]);let tt=!1;const yt=Et[ec]=Jt=>{tt||(tt=!0,zt(),Jt?Rt(Ae,[Et]):Rt(pe,[Et]),Et[ec]=void 0,Pt[mt]===i&&delete Pt[mt])};Pt[mt]=i,me?Nt(me,[Et,yt]):yt()},clone(Et){const zt=iA(Et,s,c,d,_);return _&&_(zt),zt}};return Xt}function Ef(i){if(vd(i))return i=ac(i),i.children=null,i}function Gm(i){if(!vd(i))return R0(i.type)&&i.children?G0(i.children):i;const{shapeFlag:s,children:c}=i;if(c){if(s&16)return c[0];if(s&32&&zi(c.default))return c.default()}}function ou(i,s){i.shapeFlag&6&&i.component?(i.transition=s,ou(i.component.subTree,s)):i.shapeFlag&128?(i.ssContent.transition=s.clone(i.ssContent),i.ssFallback.transition=s.clone(i.ssFallback)):i.transition=s}function Eg(i,s=!1,c){let d=[],_=0;for(let w=0;w<i.length;w++){let v=i[w];const l=c==null?v.key:String(c)+String(v.key!=null?v.key:w);v.type===tr?(v.patchFlag&128&&_++,d=d.concat(Eg(v.children,s,l))):(s||v.type!==ps)&&d.push(l!=null?ac(v,{key:l}):v)}if(_>1)for(let w=0;w<d.length;w++)d[w].patchFlag=-2;return d}/*! #__NO_SIDE_EFFECTS__ */function dA(i,s){return zi(i)?gr({name:i.name},s,{setup:i}):i}function U0(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function XA(i,s,c,d,_=!1){if(Di(i)){i.forEach((pe,Ae)=>XA(pe,s&&(Di(s)?s[Ae]:s),c,d,_));return}if(Yh(d)&&!_){d.shapeFlag&512&&d.type.__asyncResolved&&d.component.subTree.component&&XA(i,s,c,d.component.subTree);return}const w=d.shapeFlag&4?wd(d.component):d.el,v=_?null:w,{i:l,r:V}=i,W=s&&s.r,H=l.refs===En?l.refs={}:l.refs,q=l.setupState,G=Ei(q),me=q===En?()=>!1:pe=>vn(G,pe);if(W!=null&&W!==V&&(nr(W)?(H[W]=null,me(W)&&(q[W]=null)):jn(W)&&(W.value=null)),zi(V))AA(V,l,12,[v,H]);else{const pe=nr(V),Ae=jn(V);if(pe||Ae){const Ye=()=>{if(i.f){const st=pe?me(V)?q[V]:H[V]:V.value;_?Di(st)&&fg(st,w):Di(st)?st.includes(w)||st.push(w):pe?(H[V]=[w],me(V)&&(q[V]=H[V])):(V.value=[w],i.k&&(H[i.k]=V.value))}else pe?(H[V]=v,me(V)&&(q[V]=v)):Ae&&(V.value=v,i.k&&(H[i.k]=v))};v?(Ye.id=-1,Ya(Ye,c)):Ye()}}}pd().requestIdleCallback;pd().cancelIdleCallback;const Yh=i=>!!i.type.__asyncLoader,vd=i=>i.type.__isKeepAlive;function O0(i,s){q0(i,"a",s)}function V0(i,s){q0(i,"da",s)}function q0(i,s,c=Gr){const d=i.__wdc||(i.__wdc=()=>{let _=c;for(;_;){if(_.isDeactivated)return;_=_.parent}return i()});if(Id(s,d,c),c){let _=c.parent;for(;_&&_.parent;)vd(_.parent.vnode)&&Xb(d,s,c,_),_=_.parent}}function Xb(i,s,c,d){const _=Id(s,i,d,!0);H0(()=>{fg(d[s],_)},c)}function Id(i,s,c=Gr,d=!1){if(c){const _=c[i]||(c[i]=[]),w=s.__weh||(s.__weh=(...v)=>{lc();const l=pA(c),V=Vs(s,c,i,v);return l(),cc(),V});return d?_.unshift(w):_.push(w),w}}const dl=i=>(s,c=Gr)=>{(!aA||i==="sp")&&Id(i,(...d)=>s(...d),c)},fA=dl("bm"),fl=dl("m"),ex=dl("bu"),Qg=dl("u"),ys=dl("bum"),H0=dl("um"),tx=dl("sp"),ix=dl("rtg"),nx=dl("rtc");function rx(i,s=Gr){Id("ec",i,s)}const j0="components",ax="directives",sx=Symbol.for("v-ndc");function ox(i){return nr(i)&&J0(j0,i,!1)||i}function bd(i){return J0(ax,i)}function J0(i,s,c=!0,d=!1){const _=Qa||Gr;if(_){const w=_.type;if(i===j0){const l=jx(w,!1);if(l&&(l===s||l===ka(s)||l===Al(ka(s))))return w}const v=Nm(_[i]||w[i],s)||Nm(_.appContext[i],s);return!v&&d?w:v}}function Nm(i,s){return i&&(i[s]||i[ka(s)]||i[Al(ka(s))])}function Y0(i,s,c,d){let _;const w=c,v=Di(i);if(v||nr(i)){const l=v&&Xu(i);let V=!1;l&&(V=!ms(i),i=md(i)),_=new Array(i.length);for(let W=0,H=i.length;W<H;W++)_[W]=s(V?Zr(i[W]):i[W],W,void 0,w)}else if(typeof i=="number"){_=new Array(i);for(let l=0;l<i;l++)_[l]=s(l+1,l,void 0,w)}else if(Mn(i))if(i[Symbol.iterator])_=Array.from(i,(l,V)=>s(l,V,void 0,w));else{const l=Object.keys(i);_=new Array(l.length);for(let V=0,W=l.length;V<W;V++){const H=l[V];_[V]=s(i[H],H,V,w)}}else _=[];return _}const Vf=i=>i?f_(i)?wd(i):Vf(i.parent):null,Kh=gr(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Vf(i.parent),$root:i=>Vf(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>$0(i),$forceUpdate:i=>i.f||(i.f=()=>{Bg(i.update)}),$nextTick:i=>i.n||(i.n=sh.bind(i.proxy)),$watch:i=>Qx.bind(i)}),Qf=(i,s)=>i!==En&&!i.__isScriptSetup&&vn(i,s),lx={get({_:i},s){if(s==="__v_skip")return!0;const{ctx:c,setupState:d,data:_,props:w,accessCache:v,type:l,appContext:V}=i;let W;if(s[0]!=="$"){const me=v[s];if(me!==void 0)switch(me){case 1:return d[s];case 2:return _[s];case 4:return c[s];case 3:return w[s]}else{if(Qf(d,s))return v[s]=1,d[s];if(_!==En&&vn(_,s))return v[s]=2,_[s];if((W=i.propsOptions[0])&&vn(W,s))return v[s]=3,w[s];if(c!==En&&vn(c,s))return v[s]=4,c[s];qf&&(v[s]=0)}}const H=Kh[s];let q,G;if(H)return s==="$attrs"&&$r(i.attrs,"get",""),H(i);if((q=l.__cssModules)&&(q=q[s]))return q;if(c!==En&&vn(c,s))return v[s]=4,c[s];if(G=V.config.globalProperties,vn(G,s))return G[s]},set({_:i},s,c){const{data:d,setupState:_,ctx:w}=i;return Qf(_,s)?(_[s]=c,!0):d!==En&&vn(d,s)?(d[s]=c,!0):vn(i.props,s)||s[0]==="$"&&s.slice(1)in i?!1:(w[s]=c,!0)},has({_:{data:i,setupState:s,accessCache:c,ctx:d,appContext:_,propsOptions:w}},v){let l;return!!c[v]||i!==En&&vn(i,v)||Qf(s,v)||(l=w[0])&&vn(l,v)||vn(d,v)||vn(Kh,v)||vn(_.config.globalProperties,v)},defineProperty(i,s,c){return c.get!=null?i._.accessCache[s]=0:vn(c,"value")&&this.set(i,s,c.value,null),Reflect.defineProperty(i,s,c)}};function Um(i){return Di(i)?i.reduce((s,c)=>(s[c]=null,s),{}):i}let qf=!0;function cx(i){const s=$0(i),c=i.proxy,d=i.ctx;qf=!1,s.beforeCreate&&Om(s.beforeCreate,i,"bc");const{data:_,computed:w,methods:v,watch:l,provide:V,inject:W,created:H,beforeMount:q,mounted:G,beforeUpdate:me,updated:pe,activated:Ae,deactivated:Ye,beforeDestroy:st,beforeUnmount:ut,destroyed:ot,unmounted:ft,render:Pt,renderTracked:Rt,renderTriggered:Nt,errorCaptured:Xt,serverPrefetch:Et,expose:zt,inheritAttrs:mt,components:tt,directives:yt,filters:Jt}=s;if(W&&ux(W,d,null),v)for(const vi in v){const Mi=v[vi];zi(Mi)&&(d[vi]=Mi.bind(c))}if(_){const vi=_.call(c,c);Mn(vi)&&(i.data=fa(vi))}if(qf=!0,w)for(const vi in w){const Mi=w[vi],Wi=zi(Mi)?Mi.bind(c,c):zi(Mi.get)?Mi.get.bind(c,c):Io,Nn=!zi(Mi)&&zi(Mi.set)?Mi.set.bind(c):Io,nn=We({get:Wi,set:Nn});Object.defineProperty(d,vi,{enumerable:!0,configurable:!0,get:()=>nn.value,set:Hi=>nn.value=Hi})}if(l)for(const vi in l)K0(l[vi],d,c,vi);if(V){const vi=zi(V)?V.call(c):V;Reflect.ownKeys(vi).forEach(Mi=>{es(Mi,vi[Mi])})}H&&Om(H,i,"c");function pi(vi,Mi){Di(Mi)?Mi.forEach(Wi=>vi(Wi.bind(c))):Mi&&vi(Mi.bind(c))}if(pi(fA,q),pi(fl,G),pi(ex,me),pi(Qg,pe),pi(O0,Ae),pi(V0,Ye),pi(rx,Xt),pi(nx,Rt),pi(ix,Nt),pi(ys,ut),pi(H0,ft),pi(tx,Et),Di(zt))if(zt.length){const vi=i.exposed||(i.exposed={});zt.forEach(Mi=>{Object.defineProperty(vi,Mi,{get:()=>c[Mi],set:Wi=>c[Mi]=Wi})})}else i.exposed||(i.exposed={});Pt&&i.render===Io&&(i.render=Pt),mt!=null&&(i.inheritAttrs=mt),tt&&(i.components=tt),yt&&(i.directives=yt),Et&&U0(i)}function ux(i,s,c=Io){Di(i)&&(i=Hf(i));for(const d in i){const _=i[d];let w;Mn(_)?"default"in _?w=hr(_.from||d,_.default,!0):w=hr(_.from||d):w=hr(_),jn(w)?Object.defineProperty(s,d,{enumerable:!0,configurable:!0,get:()=>w.value,set:v=>w.value=v}):s[d]=w}}function Om(i,s,c){Vs(Di(i)?i.map(d=>d.bind(s.proxy)):i.bind(s.proxy),s,c)}function K0(i,s,c,d){let _=d.includes(".")?c_(c,d):()=>c[d];if(nr(i)){const w=s[i];zi(w)&&Dn(_,w)}else if(zi(i))Dn(_,i.bind(c));else if(Mn(i))if(Di(i))i.forEach(w=>K0(w,s,c,d));else{const w=zi(i.handler)?i.handler.bind(c):s[i.handler];zi(w)&&Dn(_,w,i)}}function $0(i){const s=i.type,{mixins:c,extends:d}=s,{mixins:_,optionsCache:w,config:{optionMergeStrategies:v}}=i.appContext,l=w.get(s);let V;return l?V=l:!_.length&&!c&&!d?V=s:(V={},_.length&&_.forEach(W=>ed(V,W,v,!0)),ed(V,s,v)),Mn(s)&&w.set(s,V),V}function ed(i,s,c,d=!1){const{mixins:_,extends:w}=s;w&&ed(i,w,c,!0),_&&_.forEach(v=>ed(i,v,c,!0));for(const v in s)if(!(d&&v==="expose")){const l=hx[v]||c&&c[v];i[v]=l?l(i[v],s[v]):s[v]}return i}const hx={data:Vm,props:qm,emits:qm,methods:qh,computed:qh,beforeCreate:ha,created:ha,beforeMount:ha,mounted:ha,beforeUpdate:ha,updated:ha,beforeDestroy:ha,beforeUnmount:ha,destroyed:ha,unmounted:ha,activated:ha,deactivated:ha,errorCaptured:ha,serverPrefetch:ha,components:qh,directives:qh,watch:dx,provide:Vm,inject:Ax};function Vm(i,s){return s?i?function(){return gr(zi(i)?i.call(this,this):i,zi(s)?s.call(this,this):s)}:s:i}function Ax(i,s){return qh(Hf(i),Hf(s))}function Hf(i){if(Di(i)){const s={};for(let c=0;c<i.length;c++)s[i[c]]=i[c];return s}return i}function ha(i,s){return i?[...new Set([].concat(i,s))]:s}function qh(i,s){return i?gr(Object.create(null),i,s):s}function qm(i,s){return i?Di(i)&&Di(s)?[...new Set([...i,...s])]:gr(Object.create(null),Um(i),Um(s??{})):s}function dx(i,s){if(!i)return s;if(!s)return i;const c=gr(Object.create(null),i);for(const d in s)c[d]=ha(i[d],s[d]);return c}function Z0(){return{app:null,config:{isNativeTag:nb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fx=0;function gx(i,s){return function(d,_=null){zi(d)||(d=gr({},d)),_!=null&&!Mn(_)&&(_=null);const w=Z0(),v=new WeakSet,l=[];let V=!1;const W=w.app={_uid:fx++,_component:d,_props:_,_container:null,_context:w,_instance:null,version:Yx,get config(){return w.config},set config(H){},use(H,...q){return v.has(H)||(H&&zi(H.install)?(v.add(H),H.install(W,...q)):zi(H)&&(v.add(H),H(W,...q))),W},mixin(H){return w.mixins.includes(H)||w.mixins.push(H),W},component(H,q){return q?(w.components[H]=q,W):w.components[H]},directive(H,q){return q?(w.directives[H]=q,W):w.directives[H]},mount(H,q,G){if(!V){const me=W._ceVNode||Le(d,_);return me.appContext=w,G===!0?G="svg":G===!1&&(G=void 0),i(me,H,G),V=!0,W._container=H,H.__vue_app__=W,wd(me.component)}},onUnmount(H){l.push(H)},unmount(){V&&(Vs(l,W._instance,16),i(null,W._container),delete W._container.__vue_app__)},provide(H,q){return w.provides[H]=q,W},runWithContext(H){const q=th;th=W;try{return H()}finally{th=q}}};return W}}let th=null;function es(i,s){if(Gr){let c=Gr.provides;const d=Gr.parent&&Gr.parent.provides;d===c&&(c=Gr.provides=Object.create(d)),c[i]=s}}function hr(i,s,c=!1){const d=Gr||Qa;if(d||th){const _=th?th._context.provides:d?d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:void 0;if(_&&i in _)return _[i];if(arguments.length>1)return c&&zi(s)?s.call(d&&d.proxy):s}}const W0={},X0=()=>Object.create(W0),e_=i=>Object.getPrototypeOf(i)===W0;function px(i,s,c,d=!1){const _={},w=X0();i.propsDefaults=Object.create(null),t_(i,s,_,w);for(const v in i.propsOptions[0])v in _||(_[v]=void 0);c?i.props=d?_:Fb(_):i.type.props?i.props=_:i.props=w,i.attrs=w}function mx(i,s,c,d){const{props:_,attrs:w,vnode:{patchFlag:v}}=i,l=Ei(_),[V]=i.propsOptions;let W=!1;if((d||v>0)&&!(v&16)){if(v&8){const H=i.vnode.dynamicProps;for(let q=0;q<H.length;q++){let G=H[q];if(xd(i.emitsOptions,G))continue;const me=s[G];if(V)if(vn(w,G))me!==w[G]&&(w[G]=me,W=!0);else{const pe=ka(G);_[pe]=jf(V,l,pe,me,i,!1)}else me!==w[G]&&(w[G]=me,W=!0)}}}else{t_(i,s,_,w)&&(W=!0);let H;for(const q in l)(!s||!vn(s,q)&&((H=lu(q))===q||!vn(s,H)))&&(V?c&&(c[q]!==void 0||c[H]!==void 0)&&(_[q]=jf(V,l,q,void 0,i,!0)):delete _[q]);if(w!==l)for(const q in w)(!s||!vn(s,q))&&(delete w[q],W=!0)}W&&cl(i.attrs,"set","")}function t_(i,s,c,d){const[_,w]=i.propsOptions;let v=!1,l;if(s)for(let V in s){if(Hh(V))continue;const W=s[V];let H;_&&vn(_,H=ka(V))?!w||!w.includes(H)?c[H]=W:(l||(l={}))[H]=W:xd(i.emitsOptions,V)||(!(V in d)||W!==d[V])&&(d[V]=W,v=!0)}if(w){const V=Ei(c),W=l||En;for(let H=0;H<w.length;H++){const q=w[H];c[q]=jf(_,V,q,W[q],i,!vn(W,q))}}return v}function jf(i,s,c,d,_,w){const v=i[c];if(v!=null){const l=vn(v,"default");if(l&&d===void 0){const V=v.default;if(v.type!==Function&&!v.skipFactory&&zi(V)){const{propsDefaults:W}=_;if(c in W)d=W[c];else{const H=pA(_);d=W[c]=V.call(null,s),H()}}else d=V;_.ce&&_.ce._setProp(c,d)}v[0]&&(w&&!l?d=!1:v[1]&&(d===""||d===lu(c))&&(d=!0))}return d}const yx=new WeakMap;function i_(i,s,c=!1){const d=c?yx:s.propsCache,_=d.get(i);if(_)return _;const w=i.props,v={},l=[];let V=!1;if(!zi(i)){const H=q=>{V=!0;const[G,me]=i_(q,s,!0);gr(v,G),me&&l.push(...me)};!c&&s.mixins.length&&s.mixins.forEach(H),i.extends&&H(i.extends),i.mixins&&i.mixins.forEach(H)}if(!w&&!V)return Mn(i)&&d.set(i,Zu),Zu;if(Di(w))for(let H=0;H<w.length;H++){const q=ka(w[H]);Hm(q)&&(v[q]=En)}else if(w)for(const H in w){const q=ka(H);if(Hm(q)){const G=w[H],me=v[q]=Di(G)||zi(G)?{type:G}:gr({},G),pe=me.type;let Ae=!1,Ye=!0;if(Di(pe))for(let st=0;st<pe.length;++st){const ut=pe[st],ot=zi(ut)&&ut.name;if(ot==="Boolean"){Ae=!0;break}else ot==="String"&&(Ye=!1)}else Ae=zi(pe)&&pe.name==="Boolean";me[0]=Ae,me[1]=Ye,(Ae||vn(me,"default"))&&l.push(q)}}const W=[v,l];return Mn(i)&&d.set(i,W),W}function Hm(i){return i[0]!=="$"&&!Hh(i)}const n_=i=>i[0]==="_"||i==="$stable",Sg=i=>Di(i)?i.map(yo):[yo(i)],_x=(i,s,c)=>{if(s._n)return s;const d=er((..._)=>Sg(s(..._)),c);return d._c=!1,d},r_=(i,s,c)=>{const d=i._ctx;for(const _ in i){if(n_(_))continue;const w=i[_];if(zi(w))s[_]=_x(_,w,d);else if(w!=null){const v=Sg(w);s[_]=()=>v}}},a_=(i,s)=>{const c=Sg(s);i.slots.default=()=>c},s_=(i,s,c)=>{for(const d in s)(c||d!=="_")&&(i[d]=s[d])},vx=(i,s,c)=>{const d=i.slots=X0();if(i.vnode.shapeFlag&32){const _=s._;_?(s_(d,s,c),c&&o0(d,"_",_,!0)):r_(s,d)}else s&&a_(i,s)},Ix=(i,s,c)=>{const{vnode:d,slots:_}=i;let w=!0,v=En;if(d.shapeFlag&32){const l=s._;l?c&&l===1?w=!1:s_(_,s,c):(w=!s.$stable,r_(s,_)),v=s}else s&&(a_(i,s),v={default:1});if(w)for(const l in _)!n_(l)&&v[l]==null&&delete _[l]},Ya=Rx;function bx(i){return xx(i)}function xx(i,s){const c=pd();c.__VUE__=!0;const{insert:d,remove:_,patchProp:w,createElement:v,createText:l,createComment:V,setText:W,setElementText:H,parentNode:q,nextSibling:G,setScopeId:me=Io,insertStaticContent:pe}=i,Ae=(Ee,Ue,rt,It=null,xe=null,bt=null,Vt=void 0,_t=null,xt=!!Ue.dynamicChildren)=>{if(Ee===Ue)return;Ee&&!iu(Ee,Ue)&&(It=un(Ee),Hi(Ee,xe,bt,!0),Ee=null),Ue.patchFlag===-2&&(xt=!1,Ue.dynamicChildren=null);const{type:Bt,ref:fi,shapeFlag:Ot}=Ue;switch(Bt){case gA:Ye(Ee,Ue,rt,It);break;case ps:st(Ee,Ue,rt,It);break;case kf:Ee==null&&ut(Ue,rt,It,Vt);break;case tr:tt(Ee,Ue,rt,It,xe,bt,Vt,_t,xt);break;default:Ot&1?Pt(Ee,Ue,rt,It,xe,bt,Vt,_t,xt):Ot&6?yt(Ee,Ue,rt,It,xe,bt,Vt,_t,xt):(Ot&64||Ot&128)&&Bt.process(Ee,Ue,rt,It,xe,bt,Vt,_t,xt,Jn)}fi!=null&&xe&&XA(fi,Ee&&Ee.ref,bt,Ue||Ee,!Ue)},Ye=(Ee,Ue,rt,It)=>{if(Ee==null)d(Ue.el=l(Ue.children),rt,It);else{const xe=Ue.el=Ee.el;Ue.children!==Ee.children&&W(xe,Ue.children)}},st=(Ee,Ue,rt,It)=>{Ee==null?d(Ue.el=V(Ue.children||""),rt,It):Ue.el=Ee.el},ut=(Ee,Ue,rt,It)=>{[Ee.el,Ee.anchor]=pe(Ee.children,Ue,rt,It,Ee.el,Ee.anchor)},ot=({el:Ee,anchor:Ue},rt,It)=>{let xe;for(;Ee&&Ee!==Ue;)xe=G(Ee),d(Ee,rt,It),Ee=xe;d(Ue,rt,It)},ft=({el:Ee,anchor:Ue})=>{let rt;for(;Ee&&Ee!==Ue;)rt=G(Ee),_(Ee),Ee=rt;_(Ue)},Pt=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt)=>{Ue.type==="svg"?Vt="svg":Ue.type==="math"&&(Vt="mathml"),Ee==null?Rt(Ue,rt,It,xe,bt,Vt,_t,xt):Et(Ee,Ue,xe,bt,Vt,_t,xt)},Rt=(Ee,Ue,rt,It,xe,bt,Vt,_t)=>{let xt,Bt;const{props:fi,shapeFlag:Ot,transition:hi,dirs:di}=Ee;if(xt=Ee.el=v(Ee.type,bt,fi&&fi.is,fi),Ot&8?H(xt,Ee.children):Ot&16&&Xt(Ee.children,xt,null,It,xe,Sf(Ee,bt),Vt,_t),di&&Zc(Ee,null,It,"created"),Nt(xt,Ee,Ee.scopeId,Vt,It),fi){for(const ji in fi)ji!=="value"&&!Hh(ji)&&w(xt,ji,null,fi[ji],bt,It);"value"in fi&&w(xt,"value",null,fi.value,bt),(Bt=fi.onVnodeBeforeMount)&&go(Bt,It,Ee)}di&&Zc(Ee,null,It,"beforeMount");const Ri=wx(xe,hi);Ri&&hi.beforeEnter(xt),d(xt,Ue,rt),((Bt=fi&&fi.onVnodeMounted)||Ri||di)&&Ya(()=>{Bt&&go(Bt,It,Ee),Ri&&hi.enter(xt),di&&Zc(Ee,null,It,"mounted")},xe)},Nt=(Ee,Ue,rt,It,xe)=>{if(rt&&me(Ee,rt),It)for(let bt=0;bt<It.length;bt++)me(Ee,It[bt]);if(xe){let bt=xe.subTree;if(Ue===bt||h_(bt.type)&&(bt.ssContent===Ue||bt.ssFallback===Ue)){const Vt=xe.vnode;Nt(Ee,Vt,Vt.scopeId,Vt.slotScopeIds,xe.parent)}}},Xt=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt=0)=>{for(let Bt=xt;Bt<Ee.length;Bt++){const fi=Ee[Bt]=_t?tc(Ee[Bt]):yo(Ee[Bt]);Ae(null,fi,Ue,rt,It,xe,bt,Vt,_t)}},Et=(Ee,Ue,rt,It,xe,bt,Vt)=>{const _t=Ue.el=Ee.el;let{patchFlag:xt,dynamicChildren:Bt,dirs:fi}=Ue;xt|=Ee.patchFlag&16;const Ot=Ee.props||En,hi=Ue.props||En;let di;if(rt&&Wc(rt,!1),(di=hi.onVnodeBeforeUpdate)&&go(di,rt,Ue,Ee),fi&&Zc(Ue,Ee,rt,"beforeUpdate"),rt&&Wc(rt,!0),(Ot.innerHTML&&hi.innerHTML==null||Ot.textContent&&hi.textContent==null)&&H(_t,""),Bt?zt(Ee.dynamicChildren,Bt,_t,rt,It,Sf(Ue,xe),bt):Vt||Mi(Ee,Ue,_t,null,rt,It,Sf(Ue,xe),bt,!1),xt>0){if(xt&16)mt(_t,Ot,hi,rt,xe);else if(xt&2&&Ot.class!==hi.class&&w(_t,"class",null,hi.class,xe),xt&4&&w(_t,"style",Ot.style,hi.style,xe),xt&8){const Ri=Ue.dynamicProps;for(let ji=0;ji<Ri.length;ji++){const dt=Ri[ji],mn=Ot[dt],en=hi[dt];(en!==mn||dt==="value")&&w(_t,dt,mn,en,xe,rt)}}xt&1&&Ee.children!==Ue.children&&H(_t,Ue.children)}else!Vt&&Bt==null&&mt(_t,Ot,hi,rt,xe);((di=hi.onVnodeUpdated)||fi)&&Ya(()=>{di&&go(di,rt,Ue,Ee),fi&&Zc(Ue,Ee,rt,"updated")},It)},zt=(Ee,Ue,rt,It,xe,bt,Vt)=>{for(let _t=0;_t<Ue.length;_t++){const xt=Ee[_t],Bt=Ue[_t],fi=xt.el&&(xt.type===tr||!iu(xt,Bt)||xt.shapeFlag&70)?q(xt.el):rt;Ae(xt,Bt,fi,null,It,xe,bt,Vt,!0)}},mt=(Ee,Ue,rt,It,xe)=>{if(Ue!==rt){if(Ue!==En)for(const bt in Ue)!Hh(bt)&&!(bt in rt)&&w(Ee,bt,Ue[bt],null,xe,It);for(const bt in rt){if(Hh(bt))continue;const Vt=rt[bt],_t=Ue[bt];Vt!==_t&&bt!=="value"&&w(Ee,bt,_t,Vt,xe,It)}"value"in rt&&w(Ee,"value",Ue.value,rt.value,xe)}},tt=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt)=>{const Bt=Ue.el=Ee?Ee.el:l(""),fi=Ue.anchor=Ee?Ee.anchor:l("");let{patchFlag:Ot,dynamicChildren:hi,slotScopeIds:di}=Ue;di&&(_t=_t?_t.concat(di):di),Ee==null?(d(Bt,rt,It),d(fi,rt,It),Xt(Ue.children||[],rt,fi,xe,bt,Vt,_t,xt)):Ot>0&&Ot&64&&hi&&Ee.dynamicChildren?(zt(Ee.dynamicChildren,hi,rt,xe,bt,Vt,_t),(Ue.key!=null||xe&&Ue===xe.subTree)&&o_(Ee,Ue,!0)):Mi(Ee,Ue,rt,fi,xe,bt,Vt,_t,xt)},yt=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt)=>{Ue.slotScopeIds=_t,Ee==null?Ue.shapeFlag&512?xe.ctx.activate(Ue,rt,It,Vt,xt):Jt(Ue,rt,It,xe,bt,Vt,xt):yi(Ee,Ue,xt)},Jt=(Ee,Ue,rt,It,xe,bt,Vt)=>{const _t=Ee.component=Ux(Ee,It,xe);if(vd(Ee)&&(_t.ctx.renderer=Jn),Ox(_t,!1,Vt),_t.asyncDep){if(xe&&xe.registerDep(_t,pi,Vt),!Ee.el){const xt=_t.subTree=Le(ps);st(null,xt,Ue,rt)}}else pi(_t,Ee,Ue,rt,xe,bt,Vt)},yi=(Ee,Ue,rt)=>{const It=Ue.component=Ee.component;if(Tx(Ee,Ue,rt))if(It.asyncDep&&!It.asyncResolved){vi(It,Ue,rt);return}else It.next=Ue,It.update();else Ue.el=Ee.el,It.vnode=Ue},pi=(Ee,Ue,rt,It,xe,bt,Vt)=>{const _t=()=>{if(Ee.isMounted){let{next:Ot,bu:hi,u:di,parent:Ri,vnode:ji}=Ee;{const Pn=l_(Ee);if(Pn){Ot&&(Ot.el=ji.el,vi(Ee,Ot,Vt)),Pn.asyncDep.then(()=>{Ee.isUnmounted||_t()});return}}let dt=Ot,mn;Wc(Ee,!1),Ot?(Ot.el=ji.el,vi(Ee,Ot,Vt)):Ot=ji,hi&&bf(hi),(mn=Ot.props&&Ot.props.onVnodeBeforeUpdate)&&go(mn,Ri,Ot,ji),Wc(Ee,!0);const en=Jm(Ee),Tn=Ee.subTree;Ee.subTree=en,Ae(Tn,en,q(Tn.el),un(Tn),Ee,xe,bt),Ot.el=en.el,dt===null&&Px(Ee,en.el),di&&Ya(di,xe),(mn=Ot.props&&Ot.props.onVnodeUpdated)&&Ya(()=>go(mn,Ri,Ot,ji),xe)}else{let Ot;const{el:hi,props:di}=Ue,{bm:Ri,m:ji,parent:dt,root:mn,type:en}=Ee,Tn=Yh(Ue);Wc(Ee,!1),Ri&&bf(Ri),!Tn&&(Ot=di&&di.onVnodeBeforeMount)&&go(Ot,dt,Ue),Wc(Ee,!0);{mn.ce&&mn.ce._injectChildStyle(en);const Pn=Ee.subTree=Jm(Ee);Ae(null,Pn,rt,It,Ee,xe,bt),Ue.el=Pn.el}if(ji&&Ya(ji,xe),!Tn&&(Ot=di&&di.onVnodeMounted)){const Pn=Ue;Ya(()=>go(Ot,dt,Pn),xe)}(Ue.shapeFlag&256||dt&&Yh(dt.vnode)&&dt.vnode.shapeFlag&256)&&Ee.a&&Ya(Ee.a,xe),Ee.isMounted=!0,Ue=rt=It=null}};Ee.scope.on();const xt=Ee.effect=new d0(_t);Ee.scope.off();const Bt=Ee.update=xt.run.bind(xt),fi=Ee.job=xt.runIfDirty.bind(xt);fi.i=Ee,fi.id=Ee.uid,xt.scheduler=()=>Bg(fi),Wc(Ee,!0),Bt()},vi=(Ee,Ue,rt)=>{Ue.component=Ee;const It=Ee.vnode.props;Ee.vnode=Ue,Ee.next=null,mx(Ee,Ue.props,It,rt),Ix(Ee,Ue.children,rt),lc(),zm(Ee),cc()},Mi=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt=!1)=>{const Bt=Ee&&Ee.children,fi=Ee?Ee.shapeFlag:0,Ot=Ue.children,{patchFlag:hi,shapeFlag:di}=Ue;if(hi>0){if(hi&128){Nn(Bt,Ot,rt,It,xe,bt,Vt,_t,xt);return}else if(hi&256){Wi(Bt,Ot,rt,It,xe,bt,Vt,_t,xt);return}}di&8?(fi&16&&Un(Bt,xe,bt),Ot!==Bt&&H(rt,Ot)):fi&16?di&16?Nn(Bt,Ot,rt,It,xe,bt,Vt,_t,xt):Un(Bt,xe,bt,!0):(fi&8&&H(rt,""),di&16&&Xt(Ot,rt,It,xe,bt,Vt,_t,xt))},Wi=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt)=>{Ee=Ee||Zu,Ue=Ue||Zu;const Bt=Ee.length,fi=Ue.length,Ot=Math.min(Bt,fi);let hi;for(hi=0;hi<Ot;hi++){const di=Ue[hi]=xt?tc(Ue[hi]):yo(Ue[hi]);Ae(Ee[hi],di,rt,null,xe,bt,Vt,_t,xt)}Bt>fi?Un(Ee,xe,bt,!0,!1,Ot):Xt(Ue,rt,It,xe,bt,Vt,_t,xt,Ot)},Nn=(Ee,Ue,rt,It,xe,bt,Vt,_t,xt)=>{let Bt=0;const fi=Ue.length;let Ot=Ee.length-1,hi=fi-1;for(;Bt<=Ot&&Bt<=hi;){const di=Ee[Bt],Ri=Ue[Bt]=xt?tc(Ue[Bt]):yo(Ue[Bt]);if(iu(di,Ri))Ae(di,Ri,rt,null,xe,bt,Vt,_t,xt);else break;Bt++}for(;Bt<=Ot&&Bt<=hi;){const di=Ee[Ot],Ri=Ue[hi]=xt?tc(Ue[hi]):yo(Ue[hi]);if(iu(di,Ri))Ae(di,Ri,rt,null,xe,bt,Vt,_t,xt);else break;Ot--,hi--}if(Bt>Ot){if(Bt<=hi){const di=hi+1,Ri=di<fi?Ue[di].el:It;for(;Bt<=hi;)Ae(null,Ue[Bt]=xt?tc(Ue[Bt]):yo(Ue[Bt]),rt,Ri,xe,bt,Vt,_t,xt),Bt++}}else if(Bt>hi)for(;Bt<=Ot;)Hi(Ee[Bt],xe,bt,!0),Bt++;else{const di=Bt,Ri=Bt,ji=new Map;for(Bt=Ri;Bt<=hi;Bt++){const ii=Ue[Bt]=xt?tc(Ue[Bt]):yo(Ue[Bt]);ii.key!=null&&ji.set(ii.key,Bt)}let dt,mn=0;const en=hi-Ri+1;let Tn=!1,Pn=0;const Qt=new Array(en);for(Bt=0;Bt<en;Bt++)Qt[Bt]=0;for(Bt=di;Bt<=Ot;Bt++){const ii=Ee[Bt];if(mn>=en){Hi(ii,xe,bt,!0);continue}let fn;if(ii.key!=null)fn=ji.get(ii.key);else for(dt=Ri;dt<=hi;dt++)if(Qt[dt-Ri]===0&&iu(ii,Ue[dt])){fn=dt;break}fn===void 0?Hi(ii,xe,bt,!0):(Qt[fn-Ri]=Bt+1,fn>=Pn?Pn=fn:Tn=!0,Ae(ii,Ue[fn],rt,null,xe,bt,Vt,_t,xt),mn++)}const Qi=Tn?Cx(Qt):Zu;for(dt=Qi.length-1,Bt=en-1;Bt>=0;Bt--){const ii=Ri+Bt,fn=Ue[ii],Ar=ii+1<fi?Ue[ii+1].el:It;Qt[Bt]===0?Ae(null,fn,rt,Ar,xe,bt,Vt,_t,xt):Tn&&(dt<0||Bt!==Qi[dt]?nn(fn,rt,Ar,2):dt--)}}},nn=(Ee,Ue,rt,It,xe=null)=>{const{el:bt,type:Vt,transition:_t,children:xt,shapeFlag:Bt}=Ee;if(Bt&6){nn(Ee.component.subTree,Ue,rt,It);return}if(Bt&128){Ee.suspense.move(Ue,rt,It);return}if(Bt&64){Vt.move(Ee,Ue,rt,Jn);return}if(Vt===tr){d(bt,Ue,rt);for(let Ot=0;Ot<xt.length;Ot++)nn(xt[Ot],Ue,rt,It);d(Ee.anchor,Ue,rt);return}if(Vt===kf){ot(Ee,Ue,rt);return}if(It!==2&&Bt&1&&_t)if(It===0)_t.beforeEnter(bt),d(bt,Ue,rt),Ya(()=>_t.enter(bt),xe);else{const{leave:Ot,delayLeave:hi,afterLeave:di}=_t,Ri=()=>d(bt,Ue,rt),ji=()=>{Ot(bt,()=>{Ri(),di&&di()})};hi?hi(bt,Ri,ji):ji()}else d(bt,Ue,rt)},Hi=(Ee,Ue,rt,It=!1,xe=!1)=>{const{type:bt,props:Vt,ref:_t,children:xt,dynamicChildren:Bt,shapeFlag:fi,patchFlag:Ot,dirs:hi,cacheIndex:di}=Ee;if(Ot===-2&&(xe=!1),_t!=null&&XA(_t,null,rt,Ee,!0),di!=null&&(Ue.renderCache[di]=void 0),fi&256){Ue.ctx.deactivate(Ee);return}const Ri=fi&1&&hi,ji=!Yh(Ee);let dt;if(ji&&(dt=Vt&&Vt.onVnodeBeforeUnmount)&&go(dt,Ue,Ee),fi&6)dn(Ee.component,rt,It);else{if(fi&128){Ee.suspense.unmount(rt,It);return}Ri&&Zc(Ee,null,Ue,"beforeUnmount"),fi&64?Ee.type.remove(Ee,Ue,rt,Jn,It):Bt&&!Bt.hasOnce&&(bt!==tr||Ot>0&&Ot&64)?Un(Bt,Ue,rt,!1,!0):(bt===tr&&Ot&384||!xe&&fi&16)&&Un(xt,Ue,rt),It&&wn(Ee)}(ji&&(dt=Vt&&Vt.onVnodeUnmounted)||Ri)&&Ya(()=>{dt&&go(dt,Ue,Ee),Ri&&Zc(Ee,null,Ue,"unmounted")},rt)},wn=Ee=>{const{type:Ue,el:rt,anchor:It,transition:xe}=Ee;if(Ue===tr){Fi(rt,It);return}if(Ue===kf){ft(Ee);return}const bt=()=>{_(rt),xe&&!xe.persisted&&xe.afterLeave&&xe.afterLeave()};if(Ee.shapeFlag&1&&xe&&!xe.persisted){const{leave:Vt,delayLeave:_t}=xe,xt=()=>Vt(rt,bt);_t?_t(Ee.el,bt,xt):xt()}else bt()},Fi=(Ee,Ue)=>{let rt;for(;Ee!==Ue;)rt=G(Ee),_(Ee),Ee=rt;_(Ue)},dn=(Ee,Ue,rt)=>{const{bum:It,scope:xe,job:bt,subTree:Vt,um:_t,m:xt,a:Bt}=Ee;jm(xt),jm(Bt),It&&bf(It),xe.stop(),bt&&(bt.flags|=8,Hi(Vt,Ee,Ue,rt)),_t&&Ya(_t,Ue),Ya(()=>{Ee.isUnmounted=!0},Ue),Ue&&Ue.pendingBranch&&!Ue.isUnmounted&&Ee.asyncDep&&!Ee.asyncResolved&&Ee.suspenseId===Ue.pendingId&&(Ue.deps--,Ue.deps===0&&Ue.resolve())},Un=(Ee,Ue,rt,It=!1,xe=!1,bt=0)=>{for(let Vt=bt;Vt<Ee.length;Vt++)Hi(Ee[Vt],Ue,rt,It,xe)},un=Ee=>{if(Ee.shapeFlag&6)return un(Ee.component.subTree);if(Ee.shapeFlag&128)return Ee.suspense.next();const Ue=G(Ee.anchor||Ee.el),rt=Ue&&Ue[$b];return rt?G(rt):Ue};let Xi=!1;const On=(Ee,Ue,rt)=>{Ee==null?Ue._vnode&&Hi(Ue._vnode,null,null,!0):Ae(Ue._vnode||null,Ee,Ue,null,null,null,rt),Ue._vnode=Ee,Xi||(Xi=!0,zm(),M0(),Xi=!1)},Jn={p:Ae,um:Hi,m:nn,r:wn,mt:Jt,mc:Xt,pc:Mi,pbc:zt,n:un,o:i};return{render:On,hydrate:void 0,createApp:gx(On)}}function Sf({type:i,props:s},c){return c==="svg"&&i==="foreignObject"||c==="mathml"&&i==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:c}function Wc({effect:i,job:s},c){c?(i.flags|=32,s.flags|=4):(i.flags&=-33,s.flags&=-5)}function wx(i,s){return(!i||i&&!i.pendingBranch)&&s&&!s.persisted}function o_(i,s,c=!1){const d=i.children,_=s.children;if(Di(d)&&Di(_))for(let w=0;w<d.length;w++){const v=d[w];let l=_[w];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=_[w]=tc(_[w]),l.el=v.el),!c&&l.patchFlag!==-2&&o_(v,l)),l.type===gA&&(l.el=v.el)}}function Cx(i){const s=i.slice(),c=[0];let d,_,w,v,l;const V=i.length;for(d=0;d<V;d++){const W=i[d];if(W!==0){if(_=c[c.length-1],i[_]<W){s[d]=_,c.push(d);continue}for(w=0,v=c.length-1;w<v;)l=w+v>>1,i[c[l]]<W?w=l+1:v=l;W<i[c[w]]&&(w>0&&(s[d]=c[w-1]),c[w]=d)}}for(w=c.length,v=c[w-1];w-- >0;)c[w]=v,v=s[v];return c}function l_(i){const s=i.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:l_(s)}function jm(i){if(i)for(let s=0;s<i.length;s++)i[s].flags|=8}const Bx=Symbol.for("v-scx"),Ex=()=>hr(Bx);function uc(i,s){return kg(i,null,s)}function Dn(i,s,c){return kg(i,s,c)}function kg(i,s,c=En){const{immediate:d,deep:_,flush:w,once:v}=c,l=gr({},c),V=s&&d||!s&&w!=="post";let W;if(aA){if(w==="sync"){const me=Ex();W=me.__watcherHandles||(me.__watcherHandles=[])}else if(!V){const me=()=>{};return me.stop=Io,me.resume=Io,me.pause=Io,me}}const H=Gr;l.call=(me,pe,Ae)=>Vs(me,H,pe,Ae);let q=!1;w==="post"?l.scheduler=me=>{Ya(me,H&&H.suspense)}:w!=="sync"&&(q=!0,l.scheduler=(me,pe)=>{pe?me():Bg(me)}),l.augmentJob=me=>{s&&(me.flags|=4),q&&(me.flags|=2,H&&(me.id=H.uid,me.i=H))};const G=jb(i,s,l);return aA&&(W?W.push(G):V&&G()),G}function Qx(i,s,c){const d=this.proxy,_=nr(i)?i.includes(".")?c_(d,i):()=>d[i]:i.bind(d,d);let w;zi(s)?w=s:(w=s.handler,c=s);const v=pA(this),l=kg(_,w.bind(d),c);return v(),l}function c_(i,s){const c=s.split(".");return()=>{let d=i;for(let _=0;_<c.length&&d;_++)d=d[c[_]];return d}}const Sx=(i,s)=>s==="modelValue"||s==="model-value"?i.modelModifiers:i[`${s}Modifiers`]||i[`${ka(s)}Modifiers`]||i[`${lu(s)}Modifiers`];function kx(i,s,...c){if(i.isUnmounted)return;const d=i.vnode.props||En;let _=c;const w=s.startsWith("update:"),v=w&&Sx(d,s.slice(7));v&&(v.trim&&(_=c.map(H=>nr(H)?H.trim():H)),v.number&&(_=c.map(lb)));let l,V=d[l=If(s)]||d[l=If(ka(s))];!V&&w&&(V=d[l=If(lu(s))]),V&&Vs(V,i,6,_);const W=d[l+"Once"];if(W){if(!i.emitted)i.emitted={};else if(i.emitted[l])return;i.emitted[l]=!0,Vs(W,i,6,_)}}function u_(i,s,c=!1){const d=s.emitsCache,_=d.get(i);if(_!==void 0)return _;const w=i.emits;let v={},l=!1;if(!zi(i)){const V=W=>{const H=u_(W,s,!0);H&&(l=!0,gr(v,H))};!c&&s.mixins.length&&s.mixins.forEach(V),i.extends&&V(i.extends),i.mixins&&i.mixins.forEach(V)}return!w&&!l?(Mn(i)&&d.set(i,null),null):(Di(w)?w.forEach(V=>v[V]=null):gr(v,w),Mn(i)&&d.set(i,v),v)}function xd(i,s){return!i||!dd(s)?!1:(s=s.slice(2).replace(/Once$/,""),vn(i,s[0].toLowerCase()+s.slice(1))||vn(i,lu(s))||vn(i,s))}function Jm(i){const{type:s,vnode:c,proxy:d,withProxy:_,propsOptions:[w],slots:v,attrs:l,emit:V,render:W,renderCache:H,props:q,data:G,setupState:me,ctx:pe,inheritAttrs:Ae}=i,Ye=WA(i);let st,ut;try{if(c.shapeFlag&4){const ft=_||d,Pt=ft;st=yo(W.call(Pt,ft,H,q,me,G,pe)),ut=l}else{const ft=s;st=yo(ft.length>1?ft(q,{attrs:l,slots:v,emit:V}):ft(q,null)),ut=s.props?l:Dx(l)}}catch(ft){$h.length=0,_d(ft,i,1),st=Le(ps)}let ot=st;if(ut&&Ae!==!1){const ft=Object.keys(ut),{shapeFlag:Pt}=ot;ft.length&&Pt&7&&(w&&ft.some(dg)&&(ut=Mx(ut,w)),ot=ac(ot,ut,!1,!0))}return c.dirs&&(ot=ac(ot,null,!1,!0),ot.dirs=ot.dirs?ot.dirs.concat(c.dirs):c.dirs),c.transition&&ou(ot,c.transition),st=ot,WA(Ye),st}const Dx=i=>{let s;for(const c in i)(c==="class"||c==="style"||dd(c))&&((s||(s={}))[c]=i[c]);return s},Mx=(i,s)=>{const c={};for(const d in i)(!dg(d)||!(d.slice(9)in s))&&(c[d]=i[d]);return c};function Tx(i,s,c){const{props:d,children:_,component:w}=i,{props:v,children:l,patchFlag:V}=s,W=w.emitsOptions;if(s.dirs||s.transition)return!0;if(c&&V>=0){if(V&1024)return!0;if(V&16)return d?Ym(d,v,W):!!v;if(V&8){const H=s.dynamicProps;for(let q=0;q<H.length;q++){const G=H[q];if(v[G]!==d[G]&&!xd(W,G))return!0}}}else return(_||l)&&(!l||!l.$stable)?!0:d===v?!1:d?v?Ym(d,v,W):!0:!!v;return!1}function Ym(i,s,c){const d=Object.keys(s);if(d.length!==Object.keys(i).length)return!0;for(let _=0;_<d.length;_++){const w=d[_];if(s[w]!==i[w]&&!xd(c,w))return!0}return!1}function Px({vnode:i,parent:s},c){for(;s;){const d=s.subTree;if(d.suspense&&d.suspense.activeBranch===i&&(d.el=i.el),d===i)(i=s.vnode).el=c,s=s.parent;else break}}const h_=i=>i.__isSuspense;function Rx(i,s){s&&s.pendingBranch?Di(i)?s.effects.push(...i):s.effects.push(i):Kb(i)}const tr=Symbol.for("v-fgt"),gA=Symbol.for("v-txt"),ps=Symbol.for("v-cmt"),kf=Symbol.for("v-stc"),$h=[];let Wa=null;function nc(i=!1){$h.push(Wa=i?null:[])}function Lx(){$h.pop(),Wa=$h[$h.length-1]||null}let nA=1;function Km(i,s=!1){nA+=i,i<0&&Wa&&s&&(Wa.hasOnce=!0)}function A_(i){return i.dynamicChildren=nA>0?Wa||Zu:null,Lx(),nA>0&&Wa&&Wa.push(i),i}function Jf(i,s,c,d,_,w){return A_(ih(i,s,c,d,_,w,!0))}function rA(i,s,c,d,_){return A_(Le(i,s,c,d,_,!0))}function td(i){return i?i.__v_isVNode===!0:!1}function iu(i,s){return i.type===s.type&&i.key===s.key}const d_=({key:i})=>i??null,HA=({ref:i,ref_key:s,ref_for:c})=>(typeof i=="number"&&(i=""+i),i!=null?nr(i)||jn(i)||zi(i)?{i:Qa,r:i,k:s,f:!!c}:i:null);function ih(i,s=null,c=null,d=0,_=null,w=i===tr?0:1,v=!1,l=!1){const V={__v_isVNode:!0,__v_skip:!0,type:i,props:s,key:s&&d_(s),ref:s&&HA(s),scopeId:P0,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:w,patchFlag:d,dynamicProps:_,dynamicChildren:null,appContext:null,ctx:Qa};return l?(Dg(V,c),w&128&&i.normalize(V)):c&&(V.shapeFlag|=nr(c)?8:16),nA>0&&!v&&Wa&&(V.patchFlag>0||w&6)&&V.patchFlag!==32&&Wa.push(V),V}const Le=Fx;function Fx(i,s=null,c=null,d=0,_=null,w=!1){if((!i||i===sx)&&(i=ps),td(i)){const l=ac(i,s,!0);return c&&Dg(l,c),nA>0&&!w&&Wa&&(l.shapeFlag&6?Wa[Wa.indexOf(i)]=l:Wa.push(l)),l.patchFlag=-2,l}if(Jx(i)&&(i=i.__vccOpts),s){s=zx(s);let{class:l,style:V}=s;l&&!nr(l)&&(s.class=mg(l)),Mn(V)&&(wg(V)&&!Di(V)&&(V=gr({},V)),s.style=pg(V))}const v=nr(i)?1:h_(i)?128:R0(i)?64:Mn(i)?4:zi(i)?2:0;return ih(i,s,c,d,_,v,w,!0)}function zx(i){return i?wg(i)||e_(i)?gr({},i):i:null}function ac(i,s,c=!1,d=!1){const{props:_,ref:w,patchFlag:v,children:l,transition:V}=i,W=s?Wr(_||{},s):_,H={__v_isVNode:!0,__v_skip:!0,type:i.type,props:W,key:W&&d_(W),ref:s&&s.ref?c&&w?Di(w)?w.concat(HA(s)):[w,HA(s)]:HA(s):w,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:s&&i.type!==tr?v===-1?16:v|16:v,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:V,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&ac(i.ssContent),ssFallback:i.ssFallback&&ac(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return V&&d&&ou(H,V.clone(H)),H}function id(i=" ",s=0){return Le(gA,null,i,s)}function yo(i){return i==null||typeof i=="boolean"?Le(ps):Di(i)?Le(tr,null,i.slice()):td(i)?tc(i):Le(gA,null,String(i))}function tc(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:ac(i)}function Dg(i,s){let c=0;const{shapeFlag:d}=i;if(s==null)s=null;else if(Di(s))c=16;else if(typeof s=="object")if(d&65){const _=s.default;_&&(_._c&&(_._d=!1),Dg(i,_()),_._c&&(_._d=!0));return}else{c=32;const _=s._;!_&&!e_(s)?s._ctx=Qa:_===3&&Qa&&(Qa.slots._===1?s._=1:(s._=2,i.patchFlag|=1024))}else zi(s)?(s={default:s,_ctx:Qa},c=32):(s=String(s),d&64?(c=16,s=[id(s)]):c=8);i.children=s,i.shapeFlag|=c}function Wr(...i){const s={};for(let c=0;c<i.length;c++){const d=i[c];for(const _ in d)if(_==="class")s.class!==d.class&&(s.class=mg([s.class,d.class]));else if(_==="style")s.style=pg([s.style,d.style]);else if(dd(_)){const w=s[_],v=d[_];v&&w!==v&&!(Di(w)&&w.includes(v))&&(s[_]=w?[].concat(w,v):v)}else _!==""&&(s[_]=d[_])}return s}function go(i,s,c,d=null){Vs(i,s,7,[c,d])}const Gx=Z0();let Nx=0;function Ux(i,s,c){const d=i.type,_=(s?s.appContext:i.appContext)||Gx,w={uid:Nx++,vnode:i,type:d,parent:s,appContext:_,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new h0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(_.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:i_(d,_),emitsOptions:u_(d,_),emit:null,emitted:null,propsDefaults:En,inheritAttrs:d.inheritAttrs,ctx:En,data:En,props:En,attrs:En,slots:En,refs:En,setupState:En,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return w.ctx={_:w},w.root=s?s.root:w,w.emit=kx.bind(null,w),i.ce&&i.ce(w),w}let Gr=null;const Mg=()=>Gr||Qa;let nd,Yf;{const i=pd(),s=(c,d)=>{let _;return(_=i[c])||(_=i[c]=[]),_.push(d),w=>{_.length>1?_.forEach(v=>v(w)):_[0](w)}};nd=s("__VUE_INSTANCE_SETTERS__",c=>Gr=c),Yf=s("__VUE_SSR_SETTERS__",c=>aA=c)}const pA=i=>{const s=Gr;return nd(i),i.scope.on(),()=>{i.scope.off(),nd(s)}},$m=()=>{Gr&&Gr.scope.off(),nd(null)};function f_(i){return i.vnode.shapeFlag&4}let aA=!1;function Ox(i,s=!1,c=!1){s&&Yf(s);const{props:d,children:_}=i.vnode,w=f_(i);px(i,d,w,s),vx(i,_,c);const v=w?Vx(i,s):void 0;return s&&Yf(!1),v}function Vx(i,s){const c=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,lx);const{setup:d}=c;if(d){lc();const _=i.setupContext=d.length>1?Hx(i):null,w=pA(i),v=AA(d,i,0,[i.props,_]),l=r0(v);if(cc(),w(),(l||i.sp)&&!Yh(i)&&U0(i),l){if(v.then($m,$m),s)return v.then(V=>{Zm(i,V)}).catch(V=>{_d(V,i,0)});i.asyncDep=v}else Zm(i,v)}else g_(i)}function Zm(i,s,c){zi(s)?i.type.__ssrInlineRender?i.ssrRender=s:i.render=s:Mn(s)&&(i.setupState=Q0(s)),g_(i)}function g_(i,s,c){const d=i.type;i.render||(i.render=d.render||Io);{const _=pA(i);lc();try{cx(i)}finally{cc(),_()}}}const qx={get(i,s){return $r(i,"get",""),i[s]}};function Hx(i){const s=c=>{i.exposed=c||{}};return{attrs:new Proxy(i.attrs,qx),slots:i.slots,emit:i.emit,expose:s}}function wd(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(Q0(zb(i.exposed)),{get(s,c){if(c in s)return s[c];if(c in Kh)return Kh[c](i)},has(s,c){return c in s||c in Kh}})):i.proxy}function jx(i,s=!0){return zi(i)?i.displayName||i.name:i.name||s&&i.__name}function Jx(i){return zi(i)&&"__vccOpts"in i}const We=(i,s)=>qb(i,s,aA);function hc(i,s,c){const d=arguments.length;return d===2?Mn(s)&&!Di(s)?td(s)?Le(i,null,[s]):Le(i,s):Le(i,null,s):(d>3?c=Array.prototype.slice.call(arguments,2):d===3&&td(c)&&(c=[c]),Le(i,s,c))}const Yx="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kf;const Wm=typeof window<"u"&&window.trustedTypes;if(Wm)try{Kf=Wm.createPolicy("vue",{createHTML:i=>i})}catch{}const p_=Kf?i=>Kf.createHTML(i):i=>i,Kx="http://www.w3.org/2000/svg",$x="http://www.w3.org/1998/Math/MathML",ll=typeof document<"u"?document:null,Xm=ll&&ll.createElement("template"),Zx={insert:(i,s,c)=>{s.insertBefore(i,c||null)},remove:i=>{const s=i.parentNode;s&&s.removeChild(i)},createElement:(i,s,c,d)=>{const _=s==="svg"?ll.createElementNS(Kx,i):s==="mathml"?ll.createElementNS($x,i):c?ll.createElement(i,{is:c}):ll.createElement(i);return i==="select"&&d&&d.multiple!=null&&_.setAttribute("multiple",d.multiple),_},createText:i=>ll.createTextNode(i),createComment:i=>ll.createComment(i),setText:(i,s)=>{i.nodeValue=s},setElementText:(i,s)=>{i.textContent=s},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>ll.querySelector(i),setScopeId(i,s){i.setAttribute(s,"")},insertStaticContent(i,s,c,d,_,w){const v=c?c.previousSibling:s.lastChild;if(_&&(_===w||_.nextSibling))for(;s.insertBefore(_.cloneNode(!0),c),!(_===w||!(_=_.nextSibling)););else{Xm.innerHTML=p_(d==="svg"?`<svg>${i}</svg>`:d==="mathml"?`<math>${i}</math>`:i);const l=Xm.content;if(d==="svg"||d==="mathml"){const V=l.firstChild;for(;V.firstChild;)l.appendChild(V.firstChild);l.removeChild(V)}s.insertBefore(l,c)}return[v?v.nextSibling:s.firstChild,c?c.previousSibling:s.lastChild]}},$l="transition",Uh="animation",nh=Symbol("_vtc"),m_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},y_=gr({},F0,m_),Wx=i=>(i.displayName="Transition",i.props=y_,i),Cd=Wx((i,{slots:s})=>hc(Wb,__(i),s)),Xc=(i,s=[])=>{Di(i)?i.forEach(c=>c(...s)):i&&i(...s)},ey=i=>i?Di(i)?i.some(s=>s.length>1):i.length>1:!1;function __(i){const s={};for(const tt in i)tt in m_||(s[tt]=i[tt]);if(i.css===!1)return s;const{name:c="v",type:d,duration:_,enterFromClass:w=`${c}-enter-from`,enterActiveClass:v=`${c}-enter-active`,enterToClass:l=`${c}-enter-to`,appearFromClass:V=w,appearActiveClass:W=v,appearToClass:H=l,leaveFromClass:q=`${c}-leave-from`,leaveActiveClass:G=`${c}-leave-active`,leaveToClass:me=`${c}-leave-to`}=i,pe=Xx(_),Ae=pe&&pe[0],Ye=pe&&pe[1],{onBeforeEnter:st,onEnter:ut,onEnterCancelled:ot,onLeave:ft,onLeaveCancelled:Pt,onBeforeAppear:Rt=st,onAppear:Nt=ut,onAppearCancelled:Xt=ot}=s,Et=(tt,yt,Jt,yi)=>{tt._enterCancelled=yi,Wl(tt,yt?H:l),Wl(tt,yt?W:v),Jt&&Jt()},zt=(tt,yt)=>{tt._isLeaving=!1,Wl(tt,q),Wl(tt,me),Wl(tt,G),yt&&yt()},mt=tt=>(yt,Jt)=>{const yi=tt?Nt:ut,pi=()=>Et(yt,tt,Jt);Xc(yi,[yt,pi]),ty(()=>{Wl(yt,tt?V:w),po(yt,tt?H:l),ey(yi)||iy(yt,d,Ae,pi)})};return gr(s,{onBeforeEnter(tt){Xc(st,[tt]),po(tt,w),po(tt,v)},onBeforeAppear(tt){Xc(Rt,[tt]),po(tt,V),po(tt,W)},onEnter:mt(!1),onAppear:mt(!0),onLeave(tt,yt){tt._isLeaving=!0;const Jt=()=>zt(tt,yt);po(tt,q),tt._enterCancelled?(po(tt,G),$f()):($f(),po(tt,G)),ty(()=>{tt._isLeaving&&(Wl(tt,q),po(tt,me),ey(ft)||iy(tt,d,Ye,Jt))}),Xc(ft,[tt,Jt])},onEnterCancelled(tt){Et(tt,!1,void 0,!0),Xc(ot,[tt])},onAppearCancelled(tt){Et(tt,!0,void 0,!0),Xc(Xt,[tt])},onLeaveCancelled(tt){zt(tt),Xc(Pt,[tt])}})}function Xx(i){if(i==null)return null;if(Mn(i))return[Df(i.enter),Df(i.leave)];{const s=Df(i);return[s,s]}}function Df(i){return cb(i)}function po(i,s){s.split(/\s+/).forEach(c=>c&&i.classList.add(c)),(i[nh]||(i[nh]=new Set)).add(s)}function Wl(i,s){s.split(/\s+/).forEach(d=>d&&i.classList.remove(d));const c=i[nh];c&&(c.delete(s),c.size||(i[nh]=void 0))}function ty(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let ew=0;function iy(i,s,c,d){const _=i._endId=++ew,w=()=>{_===i._endId&&d()};if(c!=null)return setTimeout(w,c);const{type:v,timeout:l,propCount:V}=v_(i,s);if(!v)return d();const W=v+"end";let H=0;const q=()=>{i.removeEventListener(W,G),w()},G=me=>{me.target===i&&++H>=V&&q()};setTimeout(()=>{H<V&&q()},l+1),i.addEventListener(W,G)}function v_(i,s){const c=window.getComputedStyle(i),d=pe=>(c[pe]||"").split(", "),_=d(`${$l}Delay`),w=d(`${$l}Duration`),v=ny(_,w),l=d(`${Uh}Delay`),V=d(`${Uh}Duration`),W=ny(l,V);let H=null,q=0,G=0;s===$l?v>0&&(H=$l,q=v,G=w.length):s===Uh?W>0&&(H=Uh,q=W,G=V.length):(q=Math.max(v,W),H=q>0?v>W?$l:Uh:null,G=H?H===$l?w.length:V.length:0);const me=H===$l&&/\b(transform|all)(,|$)/.test(d(`${$l}Property`).toString());return{type:H,timeout:q,propCount:G,hasTransform:me}}function ny(i,s){for(;i.length<s.length;)i=i.concat(i);return Math.max(...s.map((c,d)=>ry(c)+ry(i[d])))}function ry(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function $f(){return document.body.offsetHeight}function tw(i,s,c){const d=i[nh];d&&(s=(s?[s,...d]:[...d]).join(" ")),s==null?i.removeAttribute("class"):c?i.setAttribute("class",s):i.className=s}const rd=Symbol("_vod"),I_=Symbol("_vsh"),b_={beforeMount(i,{value:s},{transition:c}){i[rd]=i.style.display==="none"?"":i.style.display,c&&s?c.beforeEnter(i):Oh(i,s)},mounted(i,{value:s},{transition:c}){c&&s&&c.enter(i)},updated(i,{value:s,oldValue:c},{transition:d}){!s!=!c&&(d?s?(d.beforeEnter(i),Oh(i,!0),d.enter(i)):d.leave(i,()=>{Oh(i,!1)}):Oh(i,s))},beforeUnmount(i,{value:s}){Oh(i,s)}};function Oh(i,s){i.style.display=s?i[rd]:"none",i[I_]=!s}const iw=Symbol(""),nw=/(^|;)\s*display\s*:/;function rw(i,s,c){const d=i.style,_=nr(c);let w=!1;if(c&&!_){if(s)if(nr(s))for(const v of s.split(";")){const l=v.slice(0,v.indexOf(":")).trim();c[l]==null&&jA(d,l,"")}else for(const v in s)c[v]==null&&jA(d,v,"");for(const v in c)v==="display"&&(w=!0),jA(d,v,c[v])}else if(_){if(s!==c){const v=d[iw];v&&(c+=";"+v),d.cssText=c,w=nw.test(c)}}else s&&i.removeAttribute("style");rd in i&&(i[rd]=w?d.display:"",i[I_]&&(d.display="none"))}const ay=/\s*!important$/;function jA(i,s,c){if(Di(c))c.forEach(d=>jA(i,s,d));else if(c==null&&(c=""),s.startsWith("--"))i.setProperty(s,c);else{const d=aw(i,s);ay.test(c)?i.setProperty(lu(d),c.replace(ay,""),"important"):i[d]=c}}const sy=["Webkit","Moz","ms"],Mf={};function aw(i,s){const c=Mf[s];if(c)return c;let d=ka(s);if(d!=="filter"&&d in i)return Mf[s]=d;d=Al(d);for(let _=0;_<sy.length;_++){const w=sy[_]+d;if(w in i)return Mf[s]=w}return s}const oy="http://www.w3.org/1999/xlink";function ly(i,s,c,d,_,w=gb(s)){d&&s.startsWith("xlink:")?c==null?i.removeAttributeNS(oy,s.slice(6,s.length)):i.setAttributeNS(oy,s,c):c==null||w&&!l0(c)?i.removeAttribute(s):i.setAttribute(s,w?"":oc(c)?String(c):c)}function cy(i,s,c,d,_){if(s==="innerHTML"||s==="textContent"){c!=null&&(i[s]=s==="innerHTML"?p_(c):c);return}const w=i.tagName;if(s==="value"&&w!=="PROGRESS"&&!w.includes("-")){const l=w==="OPTION"?i.getAttribute("value")||"":i.value,V=c==null?i.type==="checkbox"?"on":"":String(c);(l!==V||!("_value"in i))&&(i.value=V),c==null&&i.removeAttribute(s),i._value=c;return}let v=!1;if(c===""||c==null){const l=typeof i[s];l==="boolean"?c=l0(c):c==null&&l==="string"?(c="",v=!0):l==="number"&&(c=0,v=!0)}try{i[s]=c}catch{}v&&i.removeAttribute(_||s)}function sw(i,s,c,d){i.addEventListener(s,c,d)}function ow(i,s,c,d){i.removeEventListener(s,c,d)}const uy=Symbol("_vei");function lw(i,s,c,d,_=null){const w=i[uy]||(i[uy]={}),v=w[s];if(d&&v)v.value=d;else{const[l,V]=cw(s);if(d){const W=w[s]=Aw(d,_);sw(i,l,W,V)}else v&&(ow(i,l,v,V),w[s]=void 0)}}const hy=/(?:Once|Passive|Capture)$/;function cw(i){let s;if(hy.test(i)){s={};let d;for(;d=i.match(hy);)i=i.slice(0,i.length-d[0].length),s[d[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):lu(i.slice(2)),s]}let Tf=0;const uw=Promise.resolve(),hw=()=>Tf||(uw.then(()=>Tf=0),Tf=Date.now());function Aw(i,s){const c=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=c.attached)return;Vs(dw(d,c.value),s,5,[d])};return c.value=i,c.attached=hw(),c}function dw(i,s){if(Di(s)){const c=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{c.call(i),i._stopped=!0},s.map(d=>_=>!_._stopped&&d&&d(_))}else return s}const Ay=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,fw=(i,s,c,d,_,w)=>{const v=_==="svg";s==="class"?tw(i,d,v):s==="style"?rw(i,c,d):dd(s)?dg(s)||lw(i,s,c,d,w):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):gw(i,s,d,v))?(cy(i,s,d),!i.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&ly(i,s,d,v,w,s!=="value")):i._isVueCE&&(/[A-Z]/.test(s)||!nr(d))?cy(i,ka(s),d,w,s):(s==="true-value"?i._trueValue=d:s==="false-value"&&(i._falseValue=d),ly(i,s,d,v))};function gw(i,s,c,d){if(d)return!!(s==="innerHTML"||s==="textContent"||s in i&&Ay(s)&&zi(c));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&i.tagName==="INPUT"||s==="type"&&i.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const _=i.tagName;if(_==="IMG"||_==="VIDEO"||_==="CANVAS"||_==="SOURCE")return!1}return Ay(s)&&nr(c)?!1:s in i}const x_=new WeakMap,w_=new WeakMap,ad=Symbol("_moveCb"),dy=Symbol("_enterCb"),pw=i=>(delete i.props.mode,i),mw=pw({name:"TransitionGroup",props:gr({},y_,{tag:String,moveClass:String}),setup(i,{slots:s}){const c=Mg(),d=L0();let _,w;return Qg(()=>{if(!_.length)return;const v=i.moveClass||`${i.name||"v"}-move`;if(!Iw(_[0].el,c.vnode.el,v))return;_.forEach(yw),_.forEach(_w);const l=_.filter(vw);$f(),l.forEach(V=>{const W=V.el,H=W.style;po(W,v),H.transform=H.webkitTransform=H.transitionDuration="";const q=W[ad]=G=>{G&&G.target!==W||(!G||/transform$/.test(G.propertyName))&&(W.removeEventListener("transitionend",q),W[ad]=null,Wl(W,v))};W.addEventListener("transitionend",q)})}),()=>{const v=Ei(i),l=__(v);let V=v.tag||tr;if(_=[],w)for(let W=0;W<w.length;W++){const H=w[W];H.el&&H.el instanceof Element&&(_.push(H),ou(H,iA(H,l,d,c)),x_.set(H,H.el.getBoundingClientRect()))}w=s.default?Eg(s.default()):[];for(let W=0;W<w.length;W++){const H=w[W];H.key!=null&&ou(H,iA(H,l,d,c))}return Le(V,null,w)}}}),Tg=mw;function yw(i){const s=i.el;s[ad]&&s[ad](),s[dy]&&s[dy]()}function _w(i){w_.set(i,i.el.getBoundingClientRect())}function vw(i){const s=x_.get(i),c=w_.get(i),d=s.left-c.left,_=s.top-c.top;if(d||_){const w=i.el.style;return w.transform=w.webkitTransform=`translate(${d}px,${_}px)`,w.transitionDuration="0s",i}}function Iw(i,s,c){const d=i.cloneNode(),_=i[nh];_&&_.forEach(l=>{l.split(/\s+/).forEach(V=>V&&d.classList.remove(V))}),c.split(/\s+/).forEach(l=>l&&d.classList.add(l)),d.style.display="none";const w=s.nodeType===1?s:s.parentNode;w.appendChild(d);const{hasTransform:v}=v_(d);return w.removeChild(d),v}const bw=gr({patchProp:fw},Zx);let fy;function xw(){return fy||(fy=bx(bw))}const ww=(...i)=>{const s=xw().createApp(...i),{mount:c}=s;return s.mount=d=>{const _=Bw(d);if(!_)return;const w=s._component;!zi(w)&&!w.render&&!w.template&&(w.template=_.innerHTML),_.nodeType===1&&(_.textContent="");const v=c(_,!1,Cw(_));return _ instanceof Element&&(_.removeAttribute("v-cloak"),_.setAttribute("data-v-app","")),v},s};function Cw(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Bw(i){return nr(i)?document.querySelector(i):i}function sA(i,s){let c;function d(){c=pb(),c.run(()=>s.length?s(()=>{c==null||c.stop(),d()}):s())}Dn(i,_=>{_&&!c?d():_||(c==null||c.stop(),c=void 0)},{immediate:!0}),A0(()=>{c==null||c.stop()})}const ga=typeof window<"u",Pg=ga&&"IntersectionObserver"in window,Ew=ga&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function C_(i,s,c){const d=s.length-1;if(d<0)return i===void 0?c:i;for(let _=0;_<d;_++){if(i==null)return c;i=i[s[_]]}return i==null||i[s[d]]===void 0?c:i[s[d]]}function mA(i,s){if(i===s)return!0;if(i instanceof Date&&s instanceof Date&&i.getTime()!==s.getTime()||i!==Object(i)||s!==Object(s))return!1;const c=Object.keys(i);return c.length!==Object.keys(s).length?!1:c.every(d=>mA(i[d],s[d]))}function Zf(i,s,c){return i==null||!s||typeof s!="string"?c:i[s]!==void 0?i[s]:(s=s.replace(/\[(\w+)\]/g,".$1"),s=s.replace(/^\./,""),C_(i,s.split("."),c))}function Vh(i,s,c){if(s===!0)return i===void 0?c:i;if(s==null||typeof s=="boolean")return c;if(i!==Object(i)){if(typeof s!="function")return c;const _=s(i,c);return typeof _>"u"?c:_}if(typeof s=="string")return Zf(i,s,c);if(Array.isArray(s))return C_(i,s,c);if(typeof s!="function")return c;const d=s(i,c);return typeof d>"u"?c:d}function B_(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:i},(c,d)=>s+d)}function hn(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(i==null||i===""))return isNaN(+i)?String(i):isFinite(+i)?`${Number(i)}${s}`:void 0}function Qw(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function gy(i){let s;return i!==null&&typeof i=="object"&&((s=Object.getPrototypeOf(i))===Object.prototype||s===null)}function Sw(i){if(i&&"$el"in i){const s=i.$el;return(s==null?void 0:s.nodeType)===Node.TEXT_NODE?s.nextElementSibling:s}return i}const py=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function Pf(i,s){return s.every(c=>i.hasOwnProperty(c))}function kw(i,s){const c={},d=new Set(Object.keys(i));for(const _ of s)d.has(_)&&(c[_]=i[_]);return c}function my(i,s,c){const d=Object.create(null),_=Object.create(null);for(const w in i)s.some(v=>v instanceof RegExp?v.test(w):v===w)&&!(c!=null&&c.some(v=>v===w))?d[w]=i[w]:_[w]=i[w];return[d,_]}function Rg(i,s){const c={...i};return s.forEach(d=>delete c[d]),c}function Dw(i,s){const c={};return s.forEach(d=>c[d]=i[d]),c}const Mw=/^on[^a-z]/,Tw=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function E_(i){const[s,c]=my(i,[Mw]),d=Rg(s,Tw),[_,w]=my(c,["class","style","id",/^data-/]);return Object.assign(_,s),Object.assign(w,d),[_,w]}function bo(i){return i==null?[]:Array.isArray(i)?i:[i]}function sd(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(s,Math.min(c,i))}function yy(i,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return i+c.repeat(Math.max(0,s-i.length))}function _y(i,s){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,s-i.length))+i}function Pw(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const c=[];let d=0;for(;d<i.length;)c.push(i.substr(d,s)),d+=s;return c}function Xa(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;const d={};for(const _ in i)d[_]=i[_];for(const _ in s){const w=i[_],v=s[_];if(gy(w)&&gy(v)){d[_]=Xa(w,v,c);continue}if(c&&Array.isArray(w)&&Array.isArray(v)){d[_]=c(w,v);continue}d[_]=v}return d}function Q_(i){return i.map(s=>s.type===tr?Q_(s.children):s).flat()}function ru(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(ru.cache.has(i))return ru.cache.get(i);const s=i.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return ru.cache.set(i,s),s}ru.cache=new Map;function Yu(i,s){if(!s||typeof s!="object")return[];if(Array.isArray(s))return s.map(c=>Yu(i,c)).flat(1);if(s.suspense)return Yu(i,s.ssContent);if(Array.isArray(s.children))return s.children.map(c=>Yu(i,c)).flat(1);if(s.component){if(Object.getOwnPropertySymbols(s.component.provides).includes(i))return[s.component];if(s.component.subTree)return Yu(i,s.component.subTree).flat(1)}return[]}function S_(i){const s=fa({}),c=We(i);return uc(()=>{for(const d in c.value)s[d]=c.value[d]},{flush:"sync"}),Cg(s)}function Wf(i,s){return i.includes(s)}const hl=()=>[Function,Array];function vy(i,s){return s="on"+Al(s),!!(i[s]||i[`${s}Once`]||i[`${s}Capture`]||i[`${s}OnceCapture`]||i[`${s}CaptureOnce`])}function Rw(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(d=>`${d}${s?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...i.querySelectorAll(c)]}function Lw(i,s,c){let d,_=i.indexOf(document.activeElement);const w=s==="next"?1:-1;do _+=w,d=i[_];while((!d||d.offsetParent==null)&&_<i.length&&_>=0);return d}function k_(i,s){var d,_,w,v;const c=Rw(i);if(!s)(i===document.activeElement||!i.contains(document.activeElement))&&((d=c[0])==null||d.focus());else if(s==="first")(_=c[0])==null||_.focus();else if(s==="last")(w=c.at(-1))==null||w.focus();else if(typeof s=="number")(v=c[s])==null||v.focus();else{const l=Lw(c,s);l?l.focus():k_(i,s==="next"?"first":"last")}}function Fw(i,s){if(!(ga&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${s})`)))return null;try{return!!i&&i.matches(s)}catch{return null}}function zw(){const i=An(),s=c=>{i.value=c};return Object.defineProperty(s,"value",{enumerable:!0,get:()=>i.value,set:c=>i.value=c}),Object.defineProperty(s,"el",{enumerable:!0,get:()=>Sw(i.value)}),s}const Gw=["top","bottom"],Nw=["start","end","left","right"];function Uw(i,s){let[c,d]=i.split(" ");return d||(d=Wf(Gw,c)?"start":Wf(Nw,c)?"top":"center"),{side:Iy(c,s),align:Iy(d,s)}}function Iy(i,s){return i==="start"?s?"right":"left":i==="end"?s?"left":"right":i}const qu=2.4,by=.2126729,xy=.7151522,wy=.072175,Ow=.55,Vw=.58,qw=.57,Hw=.62,UA=.03,Cy=1.45,jw=5e-4,Jw=1.25,Yw=1.25,By=.078,Ey=12.82051282051282,OA=.06,Qy=.001;function Sy(i,s){const c=(i.r/255)**qu,d=(i.g/255)**qu,_=(i.b/255)**qu,w=(s.r/255)**qu,v=(s.g/255)**qu,l=(s.b/255)**qu;let V=c*by+d*xy+_*wy,W=w*by+v*xy+l*wy;if(V<=UA&&(V+=(UA-V)**Cy),W<=UA&&(W+=(UA-W)**Cy),Math.abs(W-V)<jw)return 0;let H;if(W>V){const q=(W**Ow-V**Vw)*Jw;H=q<Qy?0:q<By?q-q*Ey*OA:q-OA}else{const q=(W**Hw-V**qw)*Yw;H=q>-Qy?0:q>-By?q-q*Ey*OA:q+OA}return H*100}function Kw(i,s){s=Array.isArray(s)?s.slice(0,-1).map(c=>`'${c}'`).join(", ")+` or '${s.at(-1)}'`:`'${s}'`}const od=.20689655172413793,$w=i=>i>od**3?Math.cbrt(i):i/(3*od**2)+4/29,Zw=i=>i>od?i**3:3*od**2*(i-4/29);function D_(i){const s=$w,c=s(i[1]);return[116*c-16,500*(s(i[0]/.95047)-c),200*(c-s(i[2]/1.08883))]}function M_(i){const s=Zw,c=(i[0]+16)/116;return[s(c+i[1]/500)*.95047,s(c),s(c-i[2]/200)*1.08883]}const Ww=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Xw=i=>i<=.0031308?i*12.92:1.055*i**(1/2.4)-.055,eC=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],tC=i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4;function T_(i){const s=Array(3),c=Xw,d=Ww;for(let _=0;_<3;++_)s[_]=Math.round(sd(c(d[_][0]*i[0]+d[_][1]*i[1]+d[_][2]*i[2]))*255);return{r:s[0],g:s[1],b:s[2]}}function Lg(i){let{r:s,g:c,b:d}=i;const _=[0,0,0],w=tC,v=eC;s=w(s/255),c=w(c/255),d=w(d/255);for(let l=0;l<3;++l)_[l]=v[l][0]*s+v[l][1]*c+v[l][2]*d;return _}function Xf(i){return!!i&&/^(#|var\(--|(rgb|hsl)a?\()/.test(i)}function iC(i){return Xf(i)&&!/^((rgb|hsl)a?\()?var\(--/.test(i)}const ky=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,nC={rgb:(i,s,c,d)=>({r:i,g:s,b:c,a:d}),rgba:(i,s,c,d)=>({r:i,g:s,b:c,a:d}),hsl:(i,s,c,d)=>Dy({h:i,s,l:c,a:d}),hsla:(i,s,c,d)=>Dy({h:i,s,l:c,a:d}),hsv:(i,s,c,d)=>oA({h:i,s,v:c,a:d}),hsva:(i,s,c,d)=>oA({h:i,s,v:c,a:d})};function vo(i){if(typeof i=="number")return{r:(i&16711680)>>16,g:(i&65280)>>8,b:i&255};if(typeof i=="string"&&ky.test(i)){const{groups:s}=i.match(ky),{fn:c,values:d}=s,_=d.split(/,\s*/).map(w=>w.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(c)?parseFloat(w)/100:parseFloat(w));return nC[c](..._)}else if(typeof i=="string"){let s=i.startsWith("#")?i.slice(1):i;return[3,4].includes(s.length)?s=s.split("").map(c=>c+c).join(""):[6,8].includes(s.length),aC(s)}else if(typeof i=="object"){if(Pf(i,["r","g","b"]))return i;if(Pf(i,["h","s","l"]))return oA(P_(i));if(Pf(i,["h","s","v"]))return oA(i)}throw new TypeError(`Invalid color: ${i==null?i:String(i)||i.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function oA(i){const{h:s,s:c,v:d,a:_}=i,w=l=>{const V=(l+s/60)%6;return d-d*c*Math.max(Math.min(V,4-V,1),0)},v=[w(5),w(3),w(1)].map(l=>Math.round(l*255));return{r:v[0],g:v[1],b:v[2],a:_}}function Dy(i){return oA(P_(i))}function P_(i){const{h:s,s:c,l:d,a:_}=i,w=d+c*Math.min(d,1-d),v=w===0?0:2-2*d/w;return{h:s,s:v,v:w,a:_}}function VA(i){const s=Math.round(i).toString(16);return("00".substr(0,2-s.length)+s).toUpperCase()}function rC(i){let{r:s,g:c,b:d,a:_}=i;return`#${[VA(s),VA(c),VA(d),_!==void 0?VA(Math.round(_*255)):""].join("")}`}function aC(i){i=sC(i);let[s,c,d,_]=Pw(i,2).map(w=>parseInt(w,16));return _=_===void 0?_:_/255,{r:s,g:c,b:d,a:_}}function sC(i){return i.startsWith("#")&&(i=i.slice(1)),i=i.replace(/([^0-9a-f])/gi,"F"),(i.length===3||i.length===4)&&(i=i.split("").map(s=>s+s).join("")),i.length!==6&&(i=yy(yy(i,6),8,"F")),i}function oC(i,s){const c=D_(Lg(i));return c[0]=c[0]+s*10,T_(M_(c))}function lC(i,s){const c=D_(Lg(i));return c[0]=c[0]-s*10,T_(M_(c))}function cC(i){const s=vo(i);return Lg(s)[1]}function R_(i){const s=Math.abs(Sy(vo(0),vo(i)));return Math.abs(Sy(vo(16777215),vo(i)))>Math.min(s,50)?"#fff":"#000"}function ui(i,s){return c=>Object.keys(i).reduce((d,_)=>{const v=typeof i[_]=="object"&&i[_]!=null&&!Array.isArray(i[_])?i[_]:{type:i[_]};return c&&_ in c?d[_]={...v,default:c[_]}:d[_]=v,s&&!d[_].source&&(d[_].source=s),d},{})}const cn=ui({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Xr(i,s){const c=Mg();if(!c)throw new Error(`[Vuetify] ${i} must be called from inside a setup function`);return c}function gl(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const s=Xr(i).type;return ru((s==null?void 0:s.aliasName)||(s==null?void 0:s.name))}let L_=0,JA=new WeakMap;function xo(){const i=Xr("getUid");if(JA.has(i))return JA.get(i);{const s=L_++;return JA.set(i,s),s}}xo.reset=()=>{L_=0,JA=new WeakMap};function uC(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xr("injectSelf");const{provides:c}=s;if(c&&i in c)return c[i]}const rh=Symbol.for("vuetify:defaults");function hC(i){return ln(i)}function Fg(){const i=hr(rh);if(!i)throw new Error("[Vuetify] Could not find defaults instance");return i}function oh(i,s){const c=Fg(),d=ln(i),_=We(()=>{if(_o(s==null?void 0:s.disabled))return c.value;const v=_o(s==null?void 0:s.scoped),l=_o(s==null?void 0:s.reset),V=_o(s==null?void 0:s.root);if(d.value==null&&!(v||l||V))return c.value;let W=Xa(d.value,{prev:c.value});if(v)return W;if(l||V){const H=Number(l||1/0);for(let q=0;q<=H&&!(!W||!("prev"in W));q++)W=W.prev;return W&&typeof V=="string"&&V in W&&(W=Xa(Xa(W,{prev:W}),W[V])),W}return W.prev?Xa(W.prev,W):W});return es(rh,_),_}function AC(i,s){var c,d;return typeof((c=i.props)==null?void 0:c[s])<"u"||typeof((d=i.props)==null?void 0:d[ru(s)])<"u"}function dC(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fg();const d=Xr("useDefaults");if(s=s??d.type.name??d.type.__name,!s)throw new Error("[Vuetify] Could not determine component name");const _=We(()=>{var V;return(V=c.value)==null?void 0:V[i._as??s]}),w=new Proxy(i,{get(V,W){var q,G,me,pe,Ae,Ye,st;const H=Reflect.get(V,W);return W==="class"||W==="style"?[(q=_.value)==null?void 0:q[W],H].filter(ut=>ut!=null):typeof W=="string"&&!AC(d.vnode,W)?((G=_.value)==null?void 0:G[W])!==void 0?(me=_.value)==null?void 0:me[W]:((Ae=(pe=c.value)==null?void 0:pe.global)==null?void 0:Ae[W])!==void 0?(st=(Ye=c.value)==null?void 0:Ye.global)==null?void 0:st[W]:H:H}}),v=An();uc(()=>{if(_.value){const V=Object.entries(_.value).filter(W=>{let[H]=W;return H.startsWith(H[0].toUpperCase())});v.value=V.length?Object.fromEntries(V):void 0}else v.value=void 0});function l(){const V=uC(rh,d);es(rh,We(()=>v.value?Xa((V==null?void 0:V.value)??{},v.value):V==null?void 0:V.value))}return{props:w,provideSubDefaults:l}}function lh(i){if(i._setup=i._setup??i.setup,!i.name)return i;if(i._setup){i.props=ui(i.props??{},i.name)();const s=Object.keys(i.props).filter(c=>c!=="class"&&c!=="style");i.filterProps=function(d){return kw(d,s)},i.props._as=String,i.setup=function(d,_){const w=Fg();if(!w.value)return i._setup(d,_);const{props:v,provideSubDefaults:l}=dC(d,d._as??i.name,w),V=i._setup(v,_);return l(),V}}return i}function Ni(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return s=>(i?lh:dA)(s)}function zg(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",c=arguments.length>2?arguments[2]:void 0;return Ni()({name:c??Al(ka(i.replace(/__/g,"-"))),props:{tag:{type:String,default:s},...cn()},setup(d,_){let{slots:w}=_;return()=>{var v;return hc(d.tag,{class:[i,d.class],style:d.style},(v=w.default)==null?void 0:v.call(w))}}})}function tn(i){const s=Xr("useRender");s.render=i}function pa(i,s,c){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:q=>q,_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:q=>q;const w=Xr("useProxiedModel"),v=ln(i[s]!==void 0?i[s]:c),l=ru(s),W=We(l!==s?()=>{var q,G,me,pe;return i[s],!!(((q=w.vnode.props)!=null&&q.hasOwnProperty(s)||(G=w.vnode.props)!=null&&G.hasOwnProperty(l))&&((me=w.vnode.props)!=null&&me.hasOwnProperty(`onUpdate:${s}`)||(pe=w.vnode.props)!=null&&pe.hasOwnProperty(`onUpdate:${l}`)))}:()=>{var q,G;return i[s],!!((q=w.vnode.props)!=null&&q.hasOwnProperty(s)&&((G=w.vnode.props)!=null&&G.hasOwnProperty(`onUpdate:${s}`)))});sA(()=>!W.value,()=>{Dn(()=>i[s],q=>{v.value=q})});const H=We({get(){const q=i[s];return d(W.value?q:v.value)},set(q){const G=_(q),me=Ei(W.value?i[s]:v.value);me===G||d(me)===q||(v.value=G,w==null||w.emit(`update:${s}`,G))}});return Object.defineProperty(H,"externalValue",{get:()=>W.value?i[s]:v.value}),H}const fC={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},My="$vuetify.",Ty=(i,s)=>i.replace(/\{(\d+)\}/g,(c,d)=>String(s[+d])),F_=(i,s,c)=>function(d){for(var _=arguments.length,w=new Array(_>1?_-1:0),v=1;v<_;v++)w[v-1]=arguments[v];if(!d.startsWith(My))return Ty(d,w);const l=d.replace(My,""),V=i.value&&c.value[i.value],W=s.value&&c.value[s.value];let H=Zf(V,l,null);return H||(`${d}${i.value}`,H=Zf(W,l,null)),H||(H=d),typeof H!="string"&&(H=d),Ty(H,w)};function z_(i,s){return(c,d)=>new Intl.NumberFormat([i.value,s.value],d).format(c)}function Rf(i,s,c){const d=pa(i,s,i[s]??c.value);return d.value=i[s]??c.value,Dn(c,_=>{i[s]==null&&(d.value=c.value)}),d}function G_(i){return s=>{const c=Rf(s,"locale",i.current),d=Rf(s,"fallback",i.fallback),_=Rf(s,"messages",i.messages);return{name:"vuetify",current:c,fallback:d,messages:_,t:F_(c,d,_),n:z_(c,d),provide:G_({current:c,fallback:d,messages:_})}}}function gC(i){const s=An((i==null?void 0:i.locale)??"en"),c=An((i==null?void 0:i.fallback)??"en"),d=ln({en:fC,...i==null?void 0:i.messages});return{name:"vuetify",current:s,fallback:c,messages:d,t:F_(s,c,d),n:z_(s,c),provide:G_({current:s,fallback:c,messages:d})}}const ld=Symbol.for("vuetify:locale");function pC(i){return i.name!=null}function mC(i){const s=i!=null&&i.adapter&&pC(i==null?void 0:i.adapter)?i==null?void 0:i.adapter:gC(i),c=vC(s,i);return{...s,...c}}function yC(){const i=hr(ld);if(!i)throw new Error("[Vuetify] Could not find injected locale instance");return i}function _C(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function vC(i,s){const c=ln((s==null?void 0:s.rtl)??_C()),d=We(()=>c.value[i.current.value]??!1);return{isRtl:d,rtl:c,rtlClasses:We(()=>`v-locale--is-${d.value?"rtl":"ltr"}`)}}function ch(){const i=hr(ld);if(!i)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:i.isRtl,rtlClasses:i.rtlClasses}}const Bd={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function IC(i,s,c){const d=[];let _=[];const w=N_(i),v=U_(i),l=c??Bd[s.slice(-2).toUpperCase()]??0,V=(w.getDay()-l+7)%7,W=(v.getDay()-l+7)%7;for(let H=0;H<V;H++){const q=new Date(w);q.setDate(q.getDate()-(V-H)),_.push(q)}for(let H=1;H<=v.getDate();H++){const q=new Date(i.getFullYear(),i.getMonth(),H);_.push(q),_.length===7&&(d.push(_),_=[])}for(let H=1;H<7-W;H++){const q=new Date(v);q.setDate(q.getDate()+H),_.push(q)}return _.length>0&&d.push(_),d}function bC(i,s,c){const d=c??Bd[s.slice(-2).toUpperCase()]??0,_=new Date(i);for(;_.getDay()!==d;)_.setDate(_.getDate()-1);return _}function xC(i,s){const c=new Date(i),d=((Bd[s.slice(-2).toUpperCase()]??0)+6)%7;for(;c.getDay()!==d;)c.setDate(c.getDate()+1);return c}function N_(i){return new Date(i.getFullYear(),i.getMonth(),1)}function U_(i){return new Date(i.getFullYear(),i.getMonth()+1,0)}function wC(i){const s=i.split("-").map(Number);return new Date(s[0],s[1]-1,s[2])}const CC=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function O_(i){if(i==null)return new Date;if(i instanceof Date)return i;if(typeof i=="string"){let s;if(CC.test(i))return wC(i);if(s=Date.parse(i),!isNaN(s))return new Date(s)}return null}const Py=new Date(2e3,0,2);function BC(i,s){const c=s??Bd[i.slice(-2).toUpperCase()]??0;return B_(7).map(d=>{const _=new Date(Py);return _.setDate(Py.getDate()+c+d),new Intl.DateTimeFormat(i,{weekday:"narrow"}).format(_)})}function EC(i,s,c,d){const _=O_(i)??new Date,w=d==null?void 0:d[s];if(typeof w=="function")return w(_,s,c);let v={};switch(s){case"fullDate":v={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":v={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const l=_.getDate(),V=new Intl.DateTimeFormat(c,{month:"long"}).format(_);return`${l} ${V}`;case"normalDateWithWeekday":v={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":v={month:"short",day:"numeric"};break;case"year":v={year:"numeric"};break;case"month":v={month:"long"};break;case"monthShort":v={month:"short"};break;case"monthAndYear":v={month:"long",year:"numeric"};break;case"monthAndDate":v={month:"long",day:"numeric"};break;case"weekday":v={weekday:"long"};break;case"weekdayShort":v={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(c).format(_.getDate());case"hours12h":v={hour:"numeric",hour12:!0};break;case"hours24h":v={hour:"numeric",hour12:!1};break;case"minutes":v={minute:"numeric"};break;case"seconds":v={second:"numeric"};break;case"fullTime":v={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime12h":v={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime24h":v={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"fullDateTime":v={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime12h":v={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime24h":v={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDate":v={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":v={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDateTime12h":v={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"keyboardDateTime24h":v={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;default:v=w??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(c,v).format(_)}function QC(i,s){const c=i.toJsDate(s),d=c.getFullYear(),_=_y(String(c.getMonth()+1),2,"0"),w=_y(String(c.getDate()),2,"0");return`${d}-${_}-${w}`}function SC(i){const[s,c,d]=i.split("-").map(Number);return new Date(s,c-1,d)}function kC(i,s){const c=new Date(i);return c.setMinutes(c.getMinutes()+s),c}function DC(i,s){const c=new Date(i);return c.setHours(c.getHours()+s),c}function MC(i,s){const c=new Date(i);return c.setDate(c.getDate()+s),c}function TC(i,s){const c=new Date(i);return c.setDate(c.getDate()+s*7),c}function PC(i,s){const c=new Date(i);return c.setDate(1),c.setMonth(c.getMonth()+s),c}function RC(i){return i.getFullYear()}function LC(i){return i.getMonth()}function FC(i){return i.getDate()}function zC(i){return new Date(i.getFullYear(),i.getMonth()+1,1)}function GC(i){return new Date(i.getFullYear(),i.getMonth()-1,1)}function NC(i){return i.getHours()}function UC(i){return i.getMinutes()}function OC(i){return new Date(i.getFullYear(),0,1)}function VC(i){return new Date(i.getFullYear(),11,31)}function qC(i,s){return cd(i,s[0])&&JC(i,s[1])}function HC(i){const s=new Date(i);return s instanceof Date&&!isNaN(s.getTime())}function cd(i,s){return i.getTime()>s.getTime()}function jC(i,s){return cd(eg(i),eg(s))}function JC(i,s){return i.getTime()<s.getTime()}function Ry(i,s){return i.getTime()===s.getTime()}function YC(i,s){return i.getDate()===s.getDate()&&i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()}function KC(i,s){return i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear()}function $C(i,s){return i.getFullYear()===s.getFullYear()}function ZC(i,s,c){const d=new Date(i),_=new Date(s);switch(c){case"years":return d.getFullYear()-_.getFullYear();case"quarters":return Math.floor((d.getMonth()-_.getMonth()+(d.getFullYear()-_.getFullYear())*12)/4);case"months":return d.getMonth()-_.getMonth()+(d.getFullYear()-_.getFullYear())*12;case"weeks":return Math.floor((d.getTime()-_.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((d.getTime()-_.getTime())/(1e3*60*60*24));case"hours":return Math.floor((d.getTime()-_.getTime())/(1e3*60*60));case"minutes":return Math.floor((d.getTime()-_.getTime())/(1e3*60));case"seconds":return Math.floor((d.getTime()-_.getTime())/1e3);default:return d.getTime()-_.getTime()}}function WC(i,s){const c=new Date(i);return c.setHours(s),c}function XC(i,s){const c=new Date(i);return c.setMinutes(s),c}function eB(i,s){const c=new Date(i);return c.setMonth(s),c}function tB(i,s){const c=new Date(i);return c.setDate(s),c}function iB(i,s){const c=new Date(i);return c.setFullYear(s),c}function eg(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0)}function nB(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59,999)}class rB{constructor(s){this.locale=s.locale,this.formats=s.formats}date(s){return O_(s)}toJsDate(s){return s}toISO(s){return QC(this,s)}parseISO(s){return SC(s)}addMinutes(s,c){return kC(s,c)}addHours(s,c){return DC(s,c)}addDays(s,c){return MC(s,c)}addWeeks(s,c){return TC(s,c)}addMonths(s,c){return PC(s,c)}getWeekArray(s,c){return IC(s,this.locale,c?Number(c):void 0)}startOfWeek(s,c){return bC(s,this.locale,c?Number(c):void 0)}endOfWeek(s){return xC(s,this.locale)}startOfMonth(s){return N_(s)}endOfMonth(s){return U_(s)}format(s,c){return EC(s,c,this.locale,this.formats)}isEqual(s,c){return Ry(s,c)}isValid(s){return HC(s)}isWithinRange(s,c){return qC(s,c)}isAfter(s,c){return cd(s,c)}isAfterDay(s,c){return jC(s,c)}isBefore(s,c){return!cd(s,c)&&!Ry(s,c)}isSameDay(s,c){return YC(s,c)}isSameMonth(s,c){return KC(s,c)}isSameYear(s,c){return $C(s,c)}setMinutes(s,c){return XC(s,c)}setHours(s,c){return WC(s,c)}setMonth(s,c){return eB(s,c)}setDate(s,c){return tB(s,c)}setYear(s,c){return iB(s,c)}getDiff(s,c,d){return ZC(s,c,d)}getWeekdays(s){return BC(this.locale,s?Number(s):void 0)}getYear(s){return RC(s)}getMonth(s){return LC(s)}getDate(s){return FC(s)}getNextMonth(s){return zC(s)}getPreviousMonth(s){return GC(s)}getHours(s){return NC(s)}getMinutes(s){return UC(s)}startOfDay(s){return eg(s)}endOfDay(s){return nB(s)}startOfYear(s){return OC(s)}endOfYear(s){return VC(s)}}const aB=Symbol.for("vuetify:date-options"),Ly=Symbol.for("vuetify:date-adapter");function sB(i,s){const c=Xa({adapter:rB,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},i);return{options:c,instance:oB(c,s)}}function oB(i,s){const c=fa(typeof i.adapter=="function"?new i.adapter({locale:i.locale[s.current.value]??s.current.value,formats:i.formats}):i.adapter);return Dn(s.current,d=>{c.locale=i.locale[d]??d??c.locale}),c}const Ed=["sm","md","lg","xl","xxl"],Fy=Symbol.for("vuetify:display"),zy={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},lB=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zy;return Xa(zy,i)};function Gy(i){return ga&&!i?window.innerWidth:typeof i=="object"&&i.clientWidth||0}function Ny(i){return ga&&!i?window.innerHeight:typeof i=="object"&&i.clientHeight||0}function Uy(i){const s=ga&&!i?window.navigator.userAgent:"ssr";function c(pe){return!!s.match(pe)}const d=c(/android/i),_=c(/iphone|ipad|ipod/i),w=c(/cordova/i),v=c(/electron/i),l=c(/chrome/i),V=c(/edge/i),W=c(/firefox/i),H=c(/opera/i),q=c(/win/i),G=c(/mac/i),me=c(/linux/i);return{android:d,ios:_,cordova:w,electron:v,chrome:l,edge:V,firefox:W,opera:H,win:q,mac:G,linux:me,touch:Ew,ssr:s==="ssr"}}function cB(i,s){const{thresholds:c,mobileBreakpoint:d}=lB(i),_=An(Ny(s)),w=An(Uy(s)),v=fa({}),l=An(Gy(s));function V(){_.value=Ny(),l.value=Gy()}function W(){V(),w.value=Uy()}return uc(()=>{const H=l.value<c.sm,q=l.value<c.md&&!H,G=l.value<c.lg&&!(q||H),me=l.value<c.xl&&!(G||q||H),pe=l.value<c.xxl&&!(me||G||q||H),Ae=l.value>=c.xxl,Ye=H?"xs":q?"sm":G?"md":me?"lg":pe?"xl":"xxl",st=typeof d=="number"?d:c[d],ut=l.value<st;v.xs=H,v.sm=q,v.md=G,v.lg=me,v.xl=pe,v.xxl=Ae,v.smAndUp=!H,v.mdAndUp=!(H||q),v.lgAndUp=!(H||q||G),v.xlAndUp=!(H||q||G||me),v.smAndDown=!(G||me||pe||Ae),v.mdAndDown=!(me||pe||Ae),v.lgAndDown=!(pe||Ae),v.xlAndDown=!Ae,v.name=Ye,v.height=_.value,v.width=l.value,v.mobile=ut,v.mobileBreakpoint=d,v.platform=w.value,v.thresholds=c}),ga&&window.addEventListener("resize",V,{passive:!0}),{...Cg(v),update:W,ssr:!!s}}const uB=Symbol.for("vuetify:goto");function hB(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:i=>i,easeInQuad:i=>i**2,easeOutQuad:i=>i*(2-i),easeInOutQuad:i=>i<.5?2*i**2:-1+(4-2*i)*i,easeInCubic:i=>i**3,easeOutCubic:i=>--i**3+1,easeInOutCubic:i=>i<.5?4*i**3:(i-1)*(2*i-2)*(2*i-2)+1,easeInQuart:i=>i**4,easeOutQuart:i=>1- --i**4,easeInOutQuart:i=>i<.5?8*i**4:1-8*--i**4,easeInQuint:i=>i**5,easeOutQuint:i=>1+--i**5,easeInOutQuint:i=>i<.5?16*i**5:1+16*--i**5}}}function AB(i,s){return{rtl:s.isRtl,options:Xa(hB(),i)}}const dB={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload"},fB={component:i=>hc(q_,{...i,class:"mdi"})},ir=[String,Function,Object,Array],tg=Symbol.for("vuetify:icons"),Qd=ui({icon:{type:ir},tag:{type:String,required:!0}},"icon"),Oy=Ni()({name:"VComponentIcon",props:Qd(),setup(i,s){let{slots:c}=s;return()=>{const d=i.icon;return Le(i.tag,null,{default:()=>{var _;return[i.icon?Le(d,null,null):(_=c.default)==null?void 0:_.call(c)]}})}}}),V_=lh({name:"VSvgIcon",inheritAttrs:!1,props:Qd(),setup(i,s){let{attrs:c}=s;return()=>Le(i.tag,Wr(c,{style:null}),{default:()=>[Le("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(i.icon)?i.icon.map(d=>Array.isArray(d)?Le("path",{d:d[0],"fill-opacity":d[1]},null):Le("path",{d},null)):Le("path",{d:i.icon},null)])]})}});lh({name:"VLigatureIcon",props:Qd(),setup(i){return()=>Le(i.tag,null,{default:()=>[i.icon]})}});const q_=lh({name:"VClassIcon",props:Qd(),setup(i){return()=>Le(i.tag,{class:i.icon},null)}});function gB(){return{svg:{component:V_},class:{component:q_}}}function pB(i){const s=gB(),c=(i==null?void 0:i.defaultSet)??"mdi";return c==="mdi"&&!s.mdi&&(s.mdi=fB),Xa({defaultSet:c,sets:s,aliases:{...dB,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},i)}const mB=i=>{const s=hr(tg);if(!s)throw new Error("Missing Vuetify Icons provide!");return{iconData:We(()=>{var V;const d=_o(i);if(!d)return{component:Oy};let _=d;if(typeof _=="string"&&(_=_.trim(),_.startsWith("$")&&(_=(V=s.aliases)==null?void 0:V[_.slice(1)])),Array.isArray(_))return{component:V_,icon:_};if(typeof _!="string")return{component:Oy,icon:_};const w=Object.keys(s.sets).find(W=>typeof _=="string"&&_.startsWith(`${W}:`)),v=w?_.slice(w.length+1):_;return{component:s.sets[w??s.defaultSet].component,icon:v}})}},lA=Symbol.for("vuetify:theme"),ea=ui({theme:String},"theme");function Vy(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function yB(){var d,_;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vy();const s=Vy();if(!i)return{...s,isDisabled:!0};const c={};for(const[w,v]of Object.entries(i.themes??{})){const l=v.dark||w==="dark"?(d=s.themes)==null?void 0:d.dark:(_=s.themes)==null?void 0:_.light;c[w]=Xa(l,v)}return Xa(s,{...i,themes:c})}function _B(i){const s=yB(i),c=ln(s.defaultTheme),d=ln(s.themes),_=We(()=>{const H={};for(const[q,G]of Object.entries(d.value)){const me=H[q]={...G,colors:{...G.colors}};if(s.variations)for(const pe of s.variations.colors){const Ae=me.colors[pe];if(Ae)for(const Ye of["lighten","darken"]){const st=Ye==="lighten"?oC:lC;for(const ut of B_(s.variations[Ye],1))me.colors[`${pe}-${Ye}-${ut}`]=rC(st(vo(Ae),ut))}}for(const pe of Object.keys(me.colors)){if(/^on-[a-z]/.test(pe)||me.colors[`on-${pe}`])continue;const Ae=`on-${pe}`,Ye=vo(me.colors[pe]);me.colors[Ae]=R_(Ye)}}return H}),w=We(()=>_.value[c.value]),v=We(()=>{var pe;const H=[];(pe=w.value)!=null&&pe.dark&&eu(H,":root",["color-scheme: dark"]),eu(H,":root",qy(w.value));for(const[Ae,Ye]of Object.entries(_.value))eu(H,`.v-theme--${Ae}`,[`color-scheme: ${Ye.dark?"dark":"normal"}`,...qy(Ye)]);const q=[],G=[],me=new Set(Object.values(_.value).flatMap(Ae=>Object.keys(Ae.colors)));for(const Ae of me)/^on-[a-z]/.test(Ae)?eu(G,`.${Ae}`,[`color: rgb(var(--v-theme-${Ae})) !important`]):(eu(q,`.bg-${Ae}`,[`--v-theme-overlay-multiplier: var(--v-theme-${Ae}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${Ae})) !important`,`color: rgb(var(--v-theme-on-${Ae})) !important`]),eu(G,`.text-${Ae}`,[`color: rgb(var(--v-theme-${Ae})) !important`]),eu(G,`.border-${Ae}`,[`--v-border-color: var(--v-theme-${Ae})`]));return H.push(...q,...G),H.map((Ae,Ye)=>Ye===0?Ae:`    ${Ae}`).join("")});function l(){return{style:[{children:v.value,id:"vuetify-theme-stylesheet",nonce:s.cspNonce||!1}]}}function V(H){if(s.isDisabled)return;const q=H._context.provides.usehead;if(q)if(q.push){const me=q.push(l);ga&&Dn(v,()=>{me.patch(l)})}else ga?(q.addHeadObjs(We(l)),uc(()=>q.updateDOM())):q.addHeadObjs(l());else{let pe=function(){if(typeof document<"u"&&!me){const Ae=document.createElement("style");Ae.type="text/css",Ae.id="vuetify-theme-stylesheet",s.cspNonce&&Ae.setAttribute("nonce",s.cspNonce),me=Ae,document.head.appendChild(me)}me&&(me.innerHTML=v.value)};var G=pe;let me=ga?document.getElementById("vuetify-theme-stylesheet"):null;ga?Dn(v,pe,{immediate:!0}):pe()}}const W=We(()=>s.isDisabled?void 0:`v-theme--${c.value}`);return{install:V,isDisabled:s.isDisabled,name:c,themes:d,current:w,computedThemes:_,themeClasses:W,styles:v,global:{name:c,current:w}}}function Da(i){Xr("provideTheme");const s=hr(lA,null);if(!s)throw new Error("Could not find Vuetify theme injection");const c=We(()=>i.theme??s.name.value),d=We(()=>s.themes.value[c.value]),_=We(()=>s.isDisabled?void 0:`v-theme--${c.value}`),w={...s,name:c,current:d,themeClasses:_};return es(lA,w),w}function vB(){Xr("useTheme");const i=hr(lA,null);if(!i)throw new Error("Could not find Vuetify theme injection");return i}function eu(i,s,c){i.push(`${s} {
`,...c.map(d=>`  ${d};
`),`}
`)}function qy(i){const s=i.dark?2:1,c=i.dark?1:2,d=[];for(const[_,w]of Object.entries(i.colors)){const v=vo(w);d.push(`--v-theme-${_}: ${v.r},${v.g},${v.b}`),_.startsWith("on-")||d.push(`--v-theme-${_}-overlay-multiplier: ${cC(w)>.18?s:c}`)}for(const[_,w]of Object.entries(i.variables)){const v=typeof w=="string"&&w.startsWith("#")?vo(w):void 0,l=v?`${v.r}, ${v.g}, ${v.b}`:void 0;d.push(`--v-${_}: ${l??w}`)}return d}function Gg(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const c=zw(),d=ln();if(ga){const _=new ResizeObserver(w=>{i==null||i(w,_),w.length&&(s==="content"?d.value=w[0].contentRect:d.value=w[0].target.getBoundingClientRect())});ys(()=>{_.disconnect()}),Dn(()=>c.el,(w,v)=>{v&&(_.unobserve(v),d.value=void 0),w&&_.observe(w)},{flush:"post"})}return{resizeRef:c,contentRect:yd(d)}}const ud=Symbol.for("vuetify:layout"),H_=Symbol.for("vuetify:layout-item"),Hy=1e3,IB=ui({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),j_=ui({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function bB(){const i=hr(ud);if(!i)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:i.getLayoutItem,mainRect:i.mainRect,mainStyles:i.mainStyles}}function J_(i){const s=hr(ud);if(!s)throw new Error("[Vuetify] Could not find injected layout");const c=i.id??`layout-item-${xo()}`,d=Xr("useLayoutItem");es(H_,{id:c});const _=An(!1);V0(()=>_.value=!0),O0(()=>_.value=!1);const{layoutItemStyles:w,layoutItemScrimStyles:v}=s.register(d,{...i,active:We(()=>_.value?!1:i.active.value),id:c});return ys(()=>s.unregister(c)),{layoutItemStyles:w,layoutRect:s.layoutRect,layoutItemScrimStyles:v}}const xB=(i,s,c,d)=>{let _={top:0,left:0,right:0,bottom:0};const w=[{id:"",layer:{..._}}];for(const v of i){const l=s.get(v),V=c.get(v),W=d.get(v);if(!l||!V||!W)continue;const H={..._,[l.value]:parseInt(_[l.value],10)+(W.value?parseInt(V.value,10):0)};w.push({id:v,layer:H}),_=H}return w};function wB(i){const s=hr(ud,null),c=We(()=>s?s.rootZIndex.value-100:Hy),d=ln([]),_=fa(new Map),w=fa(new Map),v=fa(new Map),l=fa(new Map),V=fa(new Map),{resizeRef:W,contentRect:H}=Gg(),q=We(()=>{const Rt=new Map,Nt=i.overlaps??[];for(const Xt of Nt.filter(Et=>Et.includes(":"))){const[Et,zt]=Xt.split(":");if(!d.value.includes(Et)||!d.value.includes(zt))continue;const mt=_.get(Et),tt=_.get(zt),yt=w.get(Et),Jt=w.get(zt);!mt||!tt||!yt||!Jt||(Rt.set(zt,{position:mt.value,amount:parseInt(yt.value,10)}),Rt.set(Et,{position:tt.value,amount:-parseInt(Jt.value,10)}))}return Rt}),G=We(()=>{const Rt=[...new Set([...v.values()].map(Xt=>Xt.value))].sort((Xt,Et)=>Xt-Et),Nt=[];for(const Xt of Rt){const Et=d.value.filter(zt=>{var mt;return((mt=v.get(zt))==null?void 0:mt.value)===Xt});Nt.push(...Et)}return xB(Nt,_,w,l)}),me=We(()=>!Array.from(V.values()).some(Rt=>Rt.value)),pe=We(()=>G.value[G.value.length-1].layer),Ae=We(()=>({"--v-layout-left":hn(pe.value.left),"--v-layout-right":hn(pe.value.right),"--v-layout-top":hn(pe.value.top),"--v-layout-bottom":hn(pe.value.bottom),...me.value?void 0:{transition:"none"}})),Ye=We(()=>G.value.slice(1).map((Rt,Nt)=>{let{id:Xt}=Rt;const{layer:Et}=G.value[Nt],zt=w.get(Xt),mt=_.get(Xt);return{id:Xt,...Et,size:Number(zt.value),position:mt.value}})),st=Rt=>Ye.value.find(Nt=>Nt.id===Rt),ut=Xr("createLayout"),ot=An(!1);fl(()=>{ot.value=!0}),es(ud,{register:(Rt,Nt)=>{let{id:Xt,order:Et,position:zt,layoutSize:mt,elementSize:tt,active:yt,disableTransitions:Jt,absolute:yi}=Nt;v.set(Xt,Et),_.set(Xt,zt),w.set(Xt,mt),l.set(Xt,yt),Jt&&V.set(Xt,Jt);const vi=Yu(H_,ut==null?void 0:ut.vnode).indexOf(Rt);vi>-1?d.value.splice(vi,0,Xt):d.value.push(Xt);const Mi=We(()=>Ye.value.findIndex(Hi=>Hi.id===Xt)),Wi=We(()=>c.value+G.value.length*2-Mi.value*2),Nn=We(()=>{const Hi=zt.value==="left"||zt.value==="right",wn=zt.value==="right",Fi=zt.value==="bottom",dn=tt.value??mt.value,Un=dn===0?"%":"px",un={[zt.value]:0,zIndex:Wi.value,transform:`translate${Hi?"X":"Y"}(${(yt.value?0:-(dn===0?100:dn))*(wn||Fi?-1:1)}${Un})`,position:yi.value||c.value!==Hy?"absolute":"fixed",...me.value?void 0:{transition:"none"}};if(!ot.value)return un;const Xi=Ye.value[Mi.value];if(!Xi)throw new Error(`[Vuetify] Could not find layout item "${Xt}"`);const On=q.value.get(Xt);return On&&(Xi[On.position]+=On.amount),{...un,height:Hi?`calc(100% - ${Xi.top}px - ${Xi.bottom}px)`:tt.value?`${tt.value}px`:void 0,left:wn?void 0:`${Xi.left}px`,right:wn?`${Xi.right}px`:void 0,top:zt.value!=="bottom"?`${Xi.top}px`:void 0,bottom:zt.value!=="top"?`${Xi.bottom}px`:void 0,width:Hi?tt.value?`${tt.value}px`:void 0:`calc(100% - ${Xi.left}px - ${Xi.right}px)`}}),nn=We(()=>({zIndex:Wi.value-1}));return{layoutItemStyles:Nn,layoutItemScrimStyles:nn,zIndex:Wi}},unregister:Rt=>{v.delete(Rt),_.delete(Rt),w.delete(Rt),l.delete(Rt),V.delete(Rt),d.value=d.value.filter(Nt=>Nt!==Rt)},mainRect:pe,mainStyles:Ae,getLayoutItem:st,items:Ye,layoutRect:H,rootZIndex:c});const ft=We(()=>["v-layout",{"v-layout--full-height":i.fullHeight}]),Pt=We(()=>({zIndex:s?c.value:void 0,position:s?"relative":void 0,overflow:s?"hidden":void 0}));return{layoutClasses:ft,layoutStyles:Pt,getLayoutItem:st,items:Ye,layoutRect:H,layoutRef:W}}function Y_(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:s,...c}=i,d=Xa(s,c),{aliases:_={},components:w={},directives:v={}}=d,l=hC(d.defaults),V=cB(d.display,d.ssr),W=_B(d.theme),H=pB(d.icons),q=mC(d.locale),G=sB(d.date,q),me=AB(d.goTo,q);return{install:Ae=>{for(const Ye in v)Ae.directive(Ye,v[Ye]);for(const Ye in w)Ae.component(Ye,w[Ye]);for(const Ye in _)Ae.component(Ye,lh({..._[Ye],name:Ye,aliasName:_[Ye].name}));if(W.install(Ae),Ae.provide(rh,l),Ae.provide(Fy,V),Ae.provide(lA,W),Ae.provide(tg,H),Ae.provide(ld,q),Ae.provide(aB,G.options),Ae.provide(Ly,G.instance),Ae.provide(uB,me),ga&&d.ssr)if(Ae.$nuxt)Ae.$nuxt.hook("app:suspense:resolve",()=>{V.update()});else{const{mount:Ye}=Ae;Ae.mount=function(){const st=Ye(...arguments);return sh(()=>V.update()),Ae.mount=Ye,st}}xo.reset(),Ae.mixin({computed:{$vuetify(){return fa({defaults:Hu.call(this,rh),display:Hu.call(this,Fy),theme:Hu.call(this,lA),icons:Hu.call(this,tg),locale:Hu.call(this,ld),date:Hu.call(this,Ly)})}}})},defaults:l,display:V,theme:W,icons:H,locale:q,date:G,goTo:me}}const CB="3.7.6";Y_.version=CB;function Hu(i){var d,_;const s=this.$,c=((d=s.parent)==null?void 0:d.provides)??((_=s.vnode.appContext)==null?void 0:_.provides);if(c&&i in c)return c[i]}const BB=Y_({theme:{defaultTheme:"dark"}});var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EB(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(i,s){(function(c,d){i.exports=d()})(K_,function(){var c={},d={};function _(v,l,V){if(d[v]=V,v==="index"){var W="var sharedModule = {}; ("+d.shared+")(sharedModule); ("+d.worker+")(sharedModule);",H={};return d.shared(H),d.index(c,H),typeof window<"u"&&c.setWorkerUrl(window.URL.createObjectURL(new Blob([W],{type:"text/javascript"}))),c}}_("shared",["exports"],function(v){function l(n,t,r,o){return new(r||(r=Promise))(function(A,p){function m(S){try{B(o.next(S))}catch(M){p(M)}}function x(S){try{B(o.throw(S))}catch(M){p(M)}}function B(S){var M;S.done?A(S.value):(M=S.value,M instanceof r?M:new r(function(P){P(M)})).then(m,x)}B((o=o.apply(n,t||[])).next())})}function V(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}typeof SuppressedError=="function"&&SuppressedError;var W=H;function H(n,t){this.x=n,this.y=t}H.prototype={clone:function(){return new H(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,r=n.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),r=Math.sin(n),o=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=o,this},_rotateAround:function(n,t){var r=Math.cos(n),o=Math.sin(n),A=t.y+o*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-o*(this.y-t.y),this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},H.convert=function(n){return n instanceof H?n:Array.isArray(n)?new H(n[0],n[1]):n};var q=V(W),G=me;function me(n,t,r,o){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=o}me.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,o=0;o<8;o++){var A=this.sampleCurveX(r)-n;if(Math.abs(A)<t)return r;var p=this.sampleCurveDerivativeX(r);if(Math.abs(p)<1e-6)break;r-=A/p}var m=0,x=1;for(r=n,o=0;o<20&&(A=this.sampleCurveX(r),!(Math.abs(A-n)<t));o++)n>A?m=r:x=r,r=.5*(x-m)+m;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var pe=V(G);let Ae,Ye;function st(){return Ae==null&&(Ae=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ae}function ut(){if(Ye==null&&(Ye=!1,st())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let o=0;o<5*5;o++){const A=4*o;t.fillStyle=`rgb(${A},${A+1},${A+2})`,t.fillRect(o%5,Math.floor(o/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let o=0;o<5*5*4;o++)if(o%4!=3&&r[o]!==o){Ye=!0;break}}}return Ye||!1}function ot(n,t,r,o){const A=new pe(n,t,r,o);return p=>A.solve(p)}const ft=ot(.25,.1,.25,1);function Pt(n,t,r){return Math.min(r,Math.max(t,n))}function Rt(n,t,r){const o=r-t,A=((n-t)%o+o)%o+t;return A===t?r:A}function Nt(n,...t){for(const r of t)for(const o in r)n[o]=r[o];return n}let Xt=1;function Et(n,t,r){const o={};for(const A in n)o[A]=t.call(this,n[A],A,n);return o}function zt(n,t,r){const o={};for(const A in n)t.call(this,n[A],A,n)&&(o[A]=n[A]);return o}function mt(n){return Array.isArray(n)?n.map(mt):typeof n=="object"&&n?Et(n,mt):n}const tt={};function yt(n){tt[n]||(typeof console<"u"&&console.warn(n),tt[n]=!0)}function Jt(n,t,r){return(r.y-n.y)*(t.x-n.x)>(t.y-n.y)*(r.x-n.x)}function yi(n){return typeof WorkerGlobalScope<"u"&&n!==void 0&&n instanceof WorkerGlobalScope}let pi=null;function vi(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap}const Mi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Wi(n,t,r,o,A){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const p=new VideoFrame(n,{timestamp:0});try{const m=p==null?void 0:p.format;if(!m||!m.startsWith("BGR")&&!m.startsWith("RGB"))throw new Error(`Unrecognized format ${m}`);const x=m.startsWith("BGR"),B=new Uint8ClampedArray(o*A*4);if(yield p.copyTo(B,function(S,M,P,O,Y){const ne=4*Math.max(-M,0),ae=(Math.max(0,P)-P)*O*4+ne,_e=4*O,Be=Math.max(0,M),Ke=Math.max(0,P);return{rect:{x:Be,y:Ke,width:Math.min(S.width,M+O)-Be,height:Math.min(S.height,P+Y)-Ke},layout:[{offset:ae,stride:_e}]}}(n,t,r,o,A)),x)for(let S=0;S<B.length;S+=4){const M=B[S];B[S]=B[S+2],B[S+2]=M}return B}finally{p.close()}})}let Nn,nn;const Hi="AbortError";function wn(){return new Error(Hi)}const Fi={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function dn(n){return Fi.REGISTERED_PROTOCOLS[n.substring(0,n.indexOf("://"))]}const Un="global-dispatcher";class un extends Error{constructor(t,r,o,A){super(`AJAXError: ${r} (${t}): ${o}`),this.status=t,this.statusText=r,this.url=o,this.body=A}}const Xi=()=>yi(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,On=function(n,t){if(/:\/\//.test(n.url)&&!/^https?:|^file:/.test(n.url)){const o=dn(n.url);if(o)return o(n,t);if(yi(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,targetMapId:Un},t)}if(!(/^file:/.test(r=n.url)||/^file:/.test(Xi())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(o,A){return l(this,void 0,void 0,function*(){const p=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Xi(),signal:A.signal});o.type!=="json"||p.headers.has("Accept")||p.headers.set("Accept","application/json");const m=yield fetch(p);if(!m.ok){const S=yield m.blob();throw new un(m.status,m.statusText,o.url,S)}let x;x=o.type==="arrayBuffer"||o.type==="image"?m.arrayBuffer():o.type==="json"?m.json():m.text();const B=yield x;if(A.signal.aborted)throw wn();return{data:B,cacheControl:m.headers.get("Cache-Control"),expires:m.headers.get("Expires")}})}(n,t);if(yi(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:n,mustQueue:!0,targetMapId:Un},t)}var r;return function(o,A){return new Promise((p,m)=>{var x;const B=new XMLHttpRequest;B.open(o.method||"GET",o.url,!0),o.type!=="arrayBuffer"&&o.type!=="image"||(B.responseType="arraybuffer");for(const S in o.headers)B.setRequestHeader(S,o.headers[S]);o.type==="json"&&(B.responseType="text",!((x=o.headers)===null||x===void 0)&&x.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=o.credentials==="include",B.onerror=()=>{m(new Error(B.statusText))},B.onload=()=>{if(!A.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let S=B.response;if(o.type==="json")try{S=JSON.parse(B.response)}catch(M){return void m(M)}p({data:S,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const S=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});m(new un(B.status,B.statusText,o.url,S))}},A.signal.addEventListener("abort",()=>{B.abort(),m(wn())}),B.send(o.body)})}(n,t)};function Jn(n){if(!n||n.indexOf("://")<=0||n.indexOf("data:image/")===0||n.indexOf("blob:")===0)return!0;const t=new URL(n),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function Qr(n,t,r){r[n]&&r[n].indexOf(t)!==-1||(r[n]=r[n]||[],r[n].push(t))}function Ee(n,t,r){if(r&&r[n]){const o=r[n].indexOf(t);o!==-1&&r[n].splice(o,1)}}class Ue{constructor(t,r={}){Nt(this,r),this.type=t}}class rt extends Ue{constructor(t,r={}){super("error",Nt({error:t},r))}}class It{on(t,r){return this._listeners=this._listeners||{},Qr(t,r,this._listeners),this}off(t,r){return Ee(t,r,this._listeners),Ee(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Qr(t,r,this._oneTimeListeners),this):new Promise(o=>this.once(t,o))}fire(t,r){typeof t=="string"&&(t=new Ue(t,r||{}));const o=t.type;if(this.listens(o)){t.target=this;const A=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const x of A)x.call(this,t);const p=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const x of p)Ee(o,x,this._oneTimeListeners),x.call(this,t);const m=this._eventedParent;m&&(Nt(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(t))}else t instanceof rt&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const bt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Vt(n,t){const r={};for(const o in n)o!=="ref"&&(r[o]=n[o]);return bt.forEach(o=>{o in t&&(r[o]=t[o])}),r}function _t(n,t){if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(let r=0;r<n.length;r++)if(!_t(n[r],t[r]))return!1;return!0}if(typeof n=="object"&&n!==null&&t!==null){if(typeof t!="object"||Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(!_t(n[r],t[r]))return!1;return!0}return n===t}function xt(n,t){n.push(t)}function Bt(n,t,r){xt(r,{command:"addSource",args:[n,t[n]]})}function fi(n,t,r){xt(t,{command:"removeSource",args:[n]}),r[n]=!0}function Ot(n,t,r,o){fi(n,r,o),Bt(n,t,r)}function hi(n,t,r){let o;for(o in n[r])if(Object.prototype.hasOwnProperty.call(n[r],o)&&o!=="data"&&!_t(n[r][o],t[r][o]))return!1;for(o in t[r])if(Object.prototype.hasOwnProperty.call(t[r],o)&&o!=="data"&&!_t(n[r][o],t[r][o]))return!1;return!0}function di(n,t,r,o,A,p){n=n||{},t=t||{};for(const m in n)Object.prototype.hasOwnProperty.call(n,m)&&(_t(n[m],t[m])||r.push({command:p,args:[o,m,t[m],A]}));for(const m in t)Object.prototype.hasOwnProperty.call(t,m)&&!Object.prototype.hasOwnProperty.call(n,m)&&(_t(n[m],t[m])||r.push({command:p,args:[o,m,t[m],A]}))}function Ri(n){return n.id}function ji(n,t){return n[t.id]=t,n}class dt{constructor(t,r,o,A){this.message=(t?`${t}: `:"")+o,A&&(this.identifier=A),r!=null&&r.__line__&&(this.line=r.__line__)}}function mn(n,...t){for(const r of t)for(const o in r)n[o]=r[o];return n}class en extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class Tn{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[o,A]of r)this.bindings[o]=A}concat(t){return new Tn(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Pn={kind:"null"},Qt={kind:"number"},Qi={kind:"string"},ii={kind:"boolean"},fn={kind:"color"},Ar={kind:"object"},wi={kind:"value"},ma={kind:"collator"},ya={kind:"formatted"},is={kind:"padding"},pr={kind:"resolvedImage"},Ie={kind:"variableAnchorOffsetCollection"};function J(n,t){return{kind:"array",itemType:n,N:t}}function j(n){if(n.kind==="array"){const t=j(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}return n.kind}const ie=[Pn,Qt,Qi,ii,fn,ya,Ar,J(wi),is,pr,Ie];function ye(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ye(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const r of ie)if(!ye(r,t))return null}}return`Expected ${j(n)} but found ${j(t)} instead.`}function Fe(n,t){return t.some(r=>r.kind===n.kind)}function Oe(n,t){return t.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}function je(n,t){return n.kind==="array"&&t.kind==="array"?n.itemType.kind===t.itemType.kind&&typeof n.N=="number":n.kind===t.kind}const Se=.96422,it=.82521,gt=4/29,Xe=6/29,Dt=3*Xe*Xe,oi=Xe*Xe*Xe,gi=Math.PI/180,qi=180/Math.PI;function Ci(n){return(n%=360)<0&&(n+=360),n}function Ui([n,t,r,o]){let A,p;const m=Rn((.2225045*(n=Si(n))+.7168786*(t=Si(t))+.0606169*(r=Si(r)))/1);n===t&&t===r?A=p=m:(A=Rn((.4360747*n+.3850649*t+.1430804*r)/Se),p=Rn((.0139322*n+.0971045*t+.7141733*r)/it));const x=116*m-16;return[x<0?0:x,500*(A-m),200*(m-p),o]}function Si(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Rn(n){return n>oi?Math.pow(n,1/3):n/Dt+gt}function yn([n,t,r,o]){let A=(n+16)/116,p=isNaN(t)?A:A+t/500,m=isNaN(r)?A:A-r/200;return A=1*rn(A),p=Se*rn(p),m=it*rn(m),[Bi(3.1338561*p-1.6168667*A-.4906146*m),Bi(-.9787684*p+1.9161415*A+.033454*m),Bi(.0719453*p-.2289914*A+1.4052427*m),o]}function Bi(n){return(n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055)<0?0:n>1?1:n}function rn(n){return n>Xe?n*n*n:Dt*(n-gt)}function In(n){return parseInt(n.padEnd(2,n),16)/255}function Zn(n,t){return Yn(t?n/100:n,0,1)}function Yn(n,t,r){return Math.min(Math.max(t,n),r)}function dr(n){return!n.some(Number.isNaN)}const qs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class an{constructor(t,r,o,A=1,p=!0){this.r=t,this.g=r,this.b=o,this.a=A,p||(this.r*=A,this.g*=A,this.b*=A,A||this.overwriteGetter("rgb",[t,r,o,A]))}static parse(t){if(t instanceof an)return t;if(typeof t!="string")return;const r=function(o){if((o=o.toLowerCase().trim())==="transparent")return[0,0,0,0];const A=qs[o];if(A){const[m,x,B]=A;return[m/255,x/255,B/255,1]}if(o.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(o)){const m=o.length<6?1:2;let x=1;return[In(o.slice(x,x+=m)),In(o.slice(x,x+=m)),In(o.slice(x,x+=m)),In(o.slice(x,x+m)||"ff")]}if(o.startsWith("rgb")){const m=o.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){const[x,B,S,M,P,O,Y,ne,ae,_e,Be,Ke]=m,ze=[M||" ",Y||" ",_e].join("");if(ze==="  "||ze==="  /"||ze===",,"||ze===",,,"){const He=[S,O,ae].join(""),nt=He==="%%%"?100:He===""?255:0;if(nt){const wt=[Yn(+B/nt,0,1),Yn(+P/nt,0,1),Yn(+ne/nt,0,1),Be?Zn(+Be,Ke):1];if(dr(wt))return wt}}return}}const p=o.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(p){const[m,x,B,S,M,P,O,Y,ne]=p,ae=[B||" ",M||" ",O].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const _e=[+x,Yn(+S,0,100),Yn(+P,0,100),Y?Zn(+Y,ne):1];if(dr(_e))return function([Be,Ke,ze,He]){function nt(wt){const jt=(wt+Be/30)%12,mi=Ke*Math.min(ze,1-ze);return ze-mi*Math.max(-1,Math.min(jt-3,9-jt,1))}return Be=Ci(Be),Ke/=100,ze/=100,[nt(0),nt(8),nt(4),He]}(_e)}}}(t);return r?new an(...r,!1):void 0}get rgb(){const{r:t,g:r,b:o,a:A}=this,p=A||1/0;return this.overwriteGetter("rgb",[t/p,r/p,o/p,A])}get hcl(){return this.overwriteGetter("hcl",function(t){const[r,o,A,p]=Ui(t),m=Math.sqrt(o*o+A*A);return[Math.round(1e4*m)?Ci(Math.atan2(A,o)*qi):NaN,m,r,p]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ui(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,o,A]=this.rgb;return`rgba(${[t,r,o].map(p=>Math.round(255*p)).join(",")},${A})`}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class mc{constructor(t,r,o){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class yc{constructor(t,r,o,A,p){this.text=t,this.image=r,this.scale=o,this.fontStack=A,this.textColor=p}}class Sr{constructor(t){this.sections=t}static fromString(t){return new Sr([new yc(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Sr?t:Sr.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class mr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof mr)return t;if(typeof t=="number")return new mr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new mr(t)}}toString(){return JSON.stringify(this.values)}}const hh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class yr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof yr)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const o=t[r],A=t[r+1];if(typeof o!="string"||!hh.has(o)||!Array.isArray(A)||A.length!==2||typeof A[0]!="number"||typeof A[1]!="number")return}return new yr(t)}}toString(){return JSON.stringify(this.values)}}class _r{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new _r({name:t,available:!1}):null}}function Ma(n,t,r,o){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[n,t,r,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[n,t,r,o]:[n,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Nr(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof an||n instanceof mc||n instanceof Sr||n instanceof mr||n instanceof yr||n instanceof _r)return!0;if(Array.isArray(n)){for(const t of n)if(!Nr(t))return!1;return!0}if(typeof n=="object"){for(const t in n)if(!Nr(n[t]))return!1;return!0}return!1}function Vn(n){if(n===null)return Pn;if(typeof n=="string")return Qi;if(typeof n=="boolean")return ii;if(typeof n=="number")return Qt;if(n instanceof an)return fn;if(n instanceof mc)return ma;if(n instanceof Sr)return ya;if(n instanceof mr)return is;if(n instanceof yr)return Ie;if(n instanceof _r)return pr;if(Array.isArray(n)){const t=n.length;let r;for(const o of n){const A=Vn(o);if(r){if(r===A)continue;r=wi;break}r=A}return J(r||wi,t)}return Ar}function Bo(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof an||n instanceof Sr||n instanceof mr||n instanceof yr||n instanceof _r?n.toString():JSON.stringify(n)}class ta{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Nr(t[1]))return r.error("invalid value");const o=t[1];let A=Vn(o);const p=r.expectedType;return A.kind!=="array"||A.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(A=p),new ta(A,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qn{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const ml={string:Qi,number:Qt,boolean:ii,object:Ar};class kr{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let o,A=1;const p=t[0];if(p==="array"){let x,B;if(t.length>2){const S=t[1];if(typeof S!="string"||!(S in ml)||S==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);x=ml[S],A++}else x=wi;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);B=t[2],A++}o=J(x,B)}else{if(!ml[p])throw new Error(`Types doesn't contain name = ${p}`);o=ml[p]}const m=[];for(;A<t.length;A++){const x=r.parse(t[A],A,wi);if(!x)return null;m.push(x)}return new kr(o,m)}evaluate(t){for(let r=0;r<this.args.length;r++){const o=this.args[r].evaluate(t);if(!ye(this.type,Vn(o)))return o;if(r===this.args.length-1)throw new Qn(`Expected value to be of type ${j(this.type)}, but found ${j(Vn(o))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Eo={"to-boolean":ii,"to-color":fn,"to-number":Qt,"to-string":Qi};class ia{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const o=t[0];if(!Eo[o])throw new Error(`Can't parse ${o} as it is not part of the known types`);if((o==="to-boolean"||o==="to-string")&&t.length!==2)return r.error("Expected one argument.");const A=Eo[o],p=[];for(let m=1;m<t.length;m++){const x=r.parse(t[m],m,wi);if(!x)return null;p.push(x)}return new ia(A,p)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,o;for(const A of this.args){if(r=A.evaluate(t),o=null,r instanceof an)return r;if(typeof r=="string"){const p=t.parseColor(r);if(p)return p}else if(Array.isArray(r)&&(o=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Ma(r[0],r[1],r[2],r[3]),!o))return new an(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Qn(o||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const o of this.args){r=o.evaluate(t);const A=mr.parse(r);if(A)return A}throw new Qn(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const o of this.args){r=o.evaluate(t);const A=yr.parse(r);if(A)return A}throw new Qn(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const o of this.args){if(r=o.evaluate(t),r===null)return 0;const A=Number(r);if(!isNaN(A))return A}throw new Qn(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Sr.fromString(Bo(this.args[0].evaluate(t)));case"resolvedImage":return _r.fromString(Bo(this.args[0].evaluate(t)));default:return Bo(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ah=["Unknown","Point","LineString","Polygon"];class yl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ah[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=an.parse(t)),r}}class _s{constructor(t,r,o=[],A,p=new Tn,m=[]){this.registry=t,this.path=o,this.key=o.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=m,this.expectedType=A,this._isConstant=r}parse(t,r,o,A,p={}){return r?this.concat(r,o,A)._parse(t,p):this._parse(t,p)}_parse(t,r){function o(A,p,m){return m==="assert"?new kr(p,[A]):m==="coerce"?new ia(p,[A]):A}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const A=t[0];if(typeof A!="string")return this.error(`Expression name must be a string, but found ${typeof A} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const p=this.registry[A];if(p){let m=p.parse(t,this);if(!m)return null;if(this.expectedType){const x=this.expectedType,B=m.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||B.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||B.kind!=="value"&&B.kind!=="string")if(x.kind!=="padding"||B.kind!=="value"&&B.kind!=="number"&&B.kind!=="array")if(x.kind!=="variableAnchorOffsetCollection"||B.kind!=="value"&&B.kind!=="array"){if(this.checkSubtype(x,B))return null}else m=o(m,x,r.typeAnnotation||"coerce");else m=o(m,x,r.typeAnnotation||"coerce");else m=o(m,x,r.typeAnnotation||"coerce");else m=o(m,x,r.typeAnnotation||"assert")}if(!(m instanceof ta)&&m.type.kind!=="resolvedImage"&&this._isConstant(m)){const x=new yl;try{m=new ta(m.type,m.evaluate(x))}catch(B){return this.error(B.message),null}}return m}return this.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,o){const A=typeof t=="number"?this.path.concat(t):this.path,p=o?this.scope.concat(o):this.scope;return new _s(this.registry,this._isConstant,A,r||null,p,this.errors)}error(t,...r){const o=`${this.key}${r.map(A=>`[${A}]`).join("")}`;this.errors.push(new en(o,t))}checkSubtype(t,r){const o=ye(t,r);return o&&this.error(o),o}}class Ta{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const o=[];for(let p=1;p<t.length-1;p+=2){const m=t[p];if(typeof m!="string")return r.error(`Expected string, but found ${typeof m} instead.`,p);if(/[^a-zA-Z0-9_]/.test(m))return r.error("Variable names must contain only alphanumeric characters or '_'.",p);const x=r.parse(t[p+1],p+1);if(!x)return null;o.push([m,x])}const A=r.parse(t[t.length-1],t.length-1,r.expectedType,o);return A?new Ta(o,A):null}outputDefined(){return this.result.outputDefined()}}class Ji{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const o=t[1];return r.scope.has(o)?new Ji(o,r.scope.get(o)):r.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class _c{constructor(t,r,o){this.type=t,this.index=r,this.input=o}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,Qt),A=r.parse(t[2],2,J(r.expectedType||wi));return o&&A?new _c(A.type.itemType,o,A):null}evaluate(t){const r=this.index.evaluate(t),o=this.input.evaluate(t);if(r<0)throw new Qn(`Array index out of bounds: ${r} < 0.`);if(r>=o.length)throw new Qn(`Array index out of bounds: ${r} > ${o.length-1}.`);if(r!==Math.floor(r))throw new Qn(`Array index must be an integer, but found ${r} instead.`);return o[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Qo{constructor(t,r){this.type=ii,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,wi),A=r.parse(t[2],2,wi);return o&&A?Fe(o.type,[ii,Qi,Qt,Pn,wi])?new Qo(o,A):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(o.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!o)return!1;if(!Oe(r,["boolean","string","number","null"]))throw new Qn(`Expected first argument to be of type boolean, string, number or null, but found ${j(Vn(r))} instead.`);if(!Oe(o,["string","array"]))throw new Qn(`Expected second argument to be of type array or string, but found ${j(Vn(o))} instead.`);return o.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class ns{constructor(t,r,o){this.type=Qt,this.needle=t,this.haystack=r,this.fromIndex=o}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,wi),A=r.parse(t[2],2,wi);if(!o||!A)return null;if(!Fe(o.type,[ii,Qi,Qt,Pn,wi]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${j(o.type)} instead`);if(t.length===4){const p=r.parse(t[3],3,Qt);return p?new ns(o,A,p):null}return new ns(o,A)}evaluate(t){const r=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!Oe(r,["boolean","string","number","null"]))throw new Qn(`Expected first argument to be of type boolean, string, number or null, but found ${j(Vn(r))} instead.`);let A;if(this.fromIndex&&(A=this.fromIndex.evaluate(t)),Oe(o,["string"])){const p=o.indexOf(r,A);return p===-1?-1:[...o.slice(0,p)].length}if(Oe(o,["array"]))return o.indexOf(r,A);throw new Qn(`Expected second argument to be of type array or string, but found ${j(Vn(o))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class vc{constructor(t,r,o,A,p,m){this.inputType=t,this.type=r,this.input=o,this.cases=A,this.outputs=p,this.otherwise=m}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let o,A;r.expectedType&&r.expectedType.kind!=="value"&&(A=r.expectedType);const p={},m=[];for(let S=2;S<t.length-1;S+=2){let M=t[S];const P=t[S+1];Array.isArray(M)||(M=[M]);const O=r.concat(S);if(M.length===0)return O.error("Expected at least one branch label.");for(const ne of M){if(typeof ne!="number"&&typeof ne!="string")return O.error("Branch labels must be numbers or strings.");if(typeof ne=="number"&&Math.abs(ne)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ne=="number"&&Math.floor(ne)!==ne)return O.error("Numeric branch labels must be integer values.");if(o){if(O.checkSubtype(o,Vn(ne)))return null}else o=Vn(ne);if(p[String(ne)]!==void 0)return O.error("Branch labels must be unique.");p[String(ne)]=m.length}const Y=r.parse(P,S,A);if(!Y)return null;A=A||Y.type,m.push(Y)}const x=r.parse(t[1],1,wi);if(!x)return null;const B=r.parse(t[t.length-1],t.length-1,A);return B?x.type.kind!=="value"&&r.concat(1).checkSubtype(o,x.type)?null:new vc(o,A,x,p,m,B):null}evaluate(t){const r=this.input.evaluate(t);return(Vn(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class _l{constructor(t,r,o){this.type=t,this.branches=r,this.otherwise=o}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let o;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);const A=[];for(let m=1;m<t.length-1;m+=2){const x=r.parse(t[m],m,ii);if(!x)return null;const B=r.parse(t[m+1],m+1,o);if(!B)return null;A.push([x,B]),o=o||B.type}const p=r.parse(t[t.length-1],t.length-1,o);if(!p)return null;if(!o)throw new Error("Can't infer output type");return new _l(o,A,p)}evaluate(t){for(const[r,o]of this.branches)if(r.evaluate(t))return o.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,o]of this.branches)t(r),t(o);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class So{constructor(t,r,o,A){this.type=t,this.input=r,this.beginIndex=o,this.endIndex=A}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=r.parse(t[1],1,wi),A=r.parse(t[2],2,Qt);if(!o||!A)return null;if(!Fe(o.type,[J(wi),Qi,wi]))return r.error(`Expected first argument to be of type array or string, but found ${j(o.type)} instead`);if(t.length===4){const p=r.parse(t[3],3,Qt);return p?new So(o.type,o,A,p):null}return new So(o.type,o,A)}evaluate(t){const r=this.input.evaluate(t),o=this.beginIndex.evaluate(t);let A;if(this.endIndex&&(A=this.endIndex.evaluate(t)),Oe(r,["string"]))return[...r].slice(o,A).join("");if(Oe(r,["array"]))return r.slice(o,A);throw new Qn(`Expected first argument to be of type array or string, but found ${j(Vn(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function _a(n,t){const r=n.length-1;let o,A,p=0,m=r,x=0;for(;p<=m;)if(x=Math.floor((p+m)/2),o=n[x],A=n[x+1],o<=t){if(x===r||t<A)return x;p=x+1}else{if(!(o>t))throw new Qn("Input is not a number.");m=x-1}return 0}class rs{constructor(t,r,o){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[A,p]of o)this.labels.push(A),this.outputs.push(p)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const o=r.parse(t[1],1,Qt);if(!o)return null;const A=[];let p=null;r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(let m=1;m<t.length;m+=2){const x=m===1?-1/0:t[m],B=t[m+1],S=m,M=m+1;if(typeof x!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(A.length&&A[A.length-1][0]>=x)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const P=r.parse(B,M,p);if(!P)return null;p=p||P.type,A.push([x,P])}return new rs(p,o,A)}evaluate(t){const r=this.labels,o=this.outputs;if(r.length===1)return o[0].evaluate(t);const A=this.input.evaluate(t);if(A<=r[0])return o[0].evaluate(t);const p=r.length;return A>=r[p-1]?o[p-1].evaluate(t):o[_a(r,A)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function vs(n){return n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dh=ko;function ko(n,t,r,o){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=r,this.p2y=o}ko.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,o=0;o<8;o++){var A=this.sampleCurveX(r)-n;if(Math.abs(A)<t)return r;var p=this.sampleCurveDerivativeX(r);if(Math.abs(p)<1e-6)break;r-=A/p}var m=0,x=1;for(r=n,o=0;o<20&&(A=this.sampleCurveX(r),!(Math.abs(A-n)<t));o++)n>A?m=r:x=r,r=.5*(x-m)+m;return r},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var fh=vs(dh);function Pa(n,t,r){return n+r*(t-n)}function Hs(n,t,r){return n.map((o,A)=>Pa(o,t[A],r))}const Ln={number:Pa,color:function(n,t,r,o="rgb"){switch(o){case"rgb":{const[A,p,m,x]=Hs(n.rgb,t.rgb,r);return new an(A,p,m,x,!1)}case"hcl":{const[A,p,m,x]=n.hcl,[B,S,M,P]=t.hcl;let O,Y;if(isNaN(A)||isNaN(B))isNaN(A)?isNaN(B)?O=NaN:(O=B,m!==1&&m!==0||(Y=S)):(O=A,M!==1&&M!==0||(Y=p));else{let Ke=B-A;B>A&&Ke>180?Ke-=360:B<A&&A-B>180&&(Ke+=360),O=A+r*Ke}const[ne,ae,_e,Be]=function([Ke,ze,He,nt]){return Ke=isNaN(Ke)?0:Ke*gi,yn([He,Math.cos(Ke)*ze,Math.sin(Ke)*ze,nt])}([O,Y??Pa(p,S,r),Pa(m,M,r),Pa(x,P,r)]);return new an(ne,ae,_e,Be,!1)}case"lab":{const[A,p,m,x]=yn(Hs(n.lab,t.lab,r));return new an(A,p,m,x,!1)}}},array:Hs,padding:function(n,t,r){return new mr(Hs(n.values,t.values,r))},variableAnchorOffsetCollection:function(n,t,r){const o=n.values,A=t.values;if(o.length!==A.length)throw new Qn(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${t.toString()}`);const p=[];for(let m=0;m<o.length;m+=2){if(o[m]!==A[m])throw new Qn(`Cannot interpolate values containing mismatched anchors. from[${m}]: ${o[m]}, to[${m}]: ${A[m]}`);p.push(o[m]);const[x,B]=o[m+1],[S,M]=A[m+1];p.push([Pa(x,S,r),Pa(B,M,r)])}return new yr(p)}};class Wn{constructor(t,r,o,A,p){this.type=t,this.operator=r,this.interpolation=o,this.input=A,this.labels=[],this.outputs=[];for(const[m,x]of p)this.labels.push(m),this.outputs.push(x)}static interpolationFactor(t,r,o,A){let p=0;if(t.name==="exponential")p=Is(r,t.base,o,A);else if(t.name==="linear")p=Is(r,1,o,A);else if(t.name==="cubic-bezier"){const m=t.controlPoints;p=new fh(m[0],m[1],m[2],m[3]).solve(Is(r,1,o,A))}return p}static parse(t,r){let[o,A,p,...m]=t;if(!Array.isArray(A)||A.length===0)return r.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){const S=A[1];if(typeof S!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:S}}else{if(A[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(A[0])}`,1,0);{const S=A.slice(1);if(S.length!==4||S.some(M=>typeof M!="number"||M<0||M>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:S}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(p=r.parse(p,2,Qt),!p)return null;const x=[];let B=null;o==="interpolate-hcl"||o==="interpolate-lab"?B=fn:r.expectedType&&r.expectedType.kind!=="value"&&(B=r.expectedType);for(let S=0;S<m.length;S+=2){const M=m[S],P=m[S+1],O=S+3,Y=S+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(x.length&&x[x.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const ne=r.parse(P,Y,B);if(!ne)return null;B=B||ne.type,x.push([M,ne])}return je(B,Qt)||je(B,fn)||je(B,is)||je(B,Ie)||je(B,J(Qt))?new Wn(B,o,A,p,x):r.error(`Type ${j(B)} is not interpolatable.`)}evaluate(t){const r=this.labels,o=this.outputs;if(r.length===1)return o[0].evaluate(t);const A=this.input.evaluate(t);if(A<=r[0])return o[0].evaluate(t);const p=r.length;if(A>=r[p-1])return o[p-1].evaluate(t);const m=_a(r,A),x=Wn.interpolationFactor(this.interpolation,A,r[m],r[m+1]),B=o[m].evaluate(t),S=o[m+1].evaluate(t);switch(this.operator){case"interpolate":return Ln[this.type.kind](B,S,x);case"interpolate-hcl":return Ln.color(B,S,x,"hcl");case"interpolate-lab":return Ln.color(B,S,x,"lab")}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Is(n,t,r,o){const A=o-r,p=n-r;return A===0?0:t===1?p/A:(Math.pow(t,p)-1)/(Math.pow(t,A)-1)}class vl{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let o=null;const A=r.expectedType;A&&A.kind!=="value"&&(o=A);const p=[];for(const x of t.slice(1)){const B=r.parse(x,1+p.length,o,void 0,{typeAnnotation:"omit"});if(!B)return null;o=o||B.type,p.push(B)}if(!o)throw new Error("No output type");const m=A&&p.some(x=>ye(A,x.type));return new vl(m?wi:o,p)}evaluate(t){let r,o=null,A=0;for(const p of this.args)if(A++,o=p.evaluate(t),o&&o instanceof _r&&!o.available&&(r||(r=o.name),o=null,A===this.args.length&&(o=r)),o!==null)break;return o}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function js(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Il(n,t,r,o){return o.compare(t,r)===0}function bs(n,t,r){const o=n!=="=="&&n!=="!=";return class Z_{constructor(p,m,x){this.type=ii,this.lhs=p,this.rhs=m,this.collator=x,this.hasUntypedArgument=p.type.kind==="value"||m.type.kind==="value"}static parse(p,m){if(p.length!==3&&p.length!==4)return m.error("Expected two or three arguments.");const x=p[0];let B=m.parse(p[1],1,wi);if(!B)return null;if(!js(x,B.type))return m.concat(1).error(`"${x}" comparisons are not supported for type '${j(B.type)}'.`);let S=m.parse(p[2],2,wi);if(!S)return null;if(!js(x,S.type))return m.concat(2).error(`"${x}" comparisons are not supported for type '${j(S.type)}'.`);if(B.type.kind!==S.type.kind&&B.type.kind!=="value"&&S.type.kind!=="value")return m.error(`Cannot compare types '${j(B.type)}' and '${j(S.type)}'.`);o&&(B.type.kind==="value"&&S.type.kind!=="value"?B=new kr(S.type,[B]):B.type.kind!=="value"&&S.type.kind==="value"&&(S=new kr(B.type,[S])));let M=null;if(p.length===4){if(B.type.kind!=="string"&&S.type.kind!=="string"&&B.type.kind!=="value"&&S.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(M=m.parse(p[3],3,ma),!M)return null}return new Z_(B,S,M)}evaluate(p){const m=this.lhs.evaluate(p),x=this.rhs.evaluate(p);if(o&&this.hasUntypedArgument){const B=Vn(m),S=Vn(x);if(B.kind!==S.kind||B.kind!=="string"&&B.kind!=="number")throw new Qn(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${B.kind}, ${S.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const B=Vn(m),S=Vn(x);if(B.kind!=="string"||S.kind!=="string")return t(p,m,x)}return this.collator?r(p,m,x,this.collator.evaluate(p)):t(p,m,x)}eachChild(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)}outputDefined(){return!0}}}const hu=bs("==",function(n,t,r){return t===r},Il),Ic=bs("!=",function(n,t,r){return t!==r},function(n,t,r,o){return!Il(0,t,r,o)}),bl=bs("<",function(n,t,r){return t<r},function(n,t,r,o){return o.compare(t,r)<0}),xl=bs(">",function(n,t,r){return t>r},function(n,t,r,o){return o.compare(t,r)>0}),gh=bs("<=",function(n,t,r){return t<=r},function(n,t,r,o){return o.compare(t,r)<=0}),bc=bs(">=",function(n,t,r){return t>=r},function(n,t,r,o){return o.compare(t,r)>=0});class Do{constructor(t,r,o){this.type=ma,this.locale=o,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const o=t[1];if(typeof o!="object"||Array.isArray(o))return r.error("Collator options argument must be an object.");const A=r.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,ii);if(!A)return null;const p=r.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,ii);if(!p)return null;let m=null;return o.locale&&(m=r.parse(o.locale,1,Qi),!m)?null:new Do(A,p,m)}evaluate(t){return new mc(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class wl{constructor(t,r,o,A,p){this.type=Qi,this.number=t,this.locale=r,this.currency=o,this.minFractionDigits=A,this.maxFractionDigits=p}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const o=r.parse(t[1],1,Qt);if(!o)return null;const A=t[2];if(typeof A!="object"||Array.isArray(A))return r.error("NumberFormat options argument must be an object.");let p=null;if(A.locale&&(p=r.parse(A.locale,1,Qi),!p))return null;let m=null;if(A.currency&&(m=r.parse(A.currency,1,Qi),!m))return null;let x=null;if(A["min-fraction-digits"]&&(x=r.parse(A["min-fraction-digits"],1,Qt),!x))return null;let B=null;return A["max-fraction-digits"]&&(B=r.parse(A["max-fraction-digits"],1,Qt),!B)?null:new wl(o,p,m,x,B)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Cl{constructor(t){this.type=ya,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const o=t[1];if(!Array.isArray(o)&&typeof o=="object")return r.error("First argument must be an image or text section.");const A=[];let p=!1;for(let m=1;m<=t.length-1;++m){const x=t[m];if(p&&typeof x=="object"&&!Array.isArray(x)){p=!1;let B=null;if(x["font-scale"]&&(B=r.parse(x["font-scale"],1,Qt),!B))return null;let S=null;if(x["text-font"]&&(S=r.parse(x["text-font"],1,J(Qi)),!S))return null;let M=null;if(x["text-color"]&&(M=r.parse(x["text-color"],1,fn),!M))return null;const P=A[A.length-1];P.scale=B,P.font=S,P.textColor=M}else{const B=r.parse(t[m],1,wi);if(!B)return null;const S=B.type.kind;if(S!=="string"&&S!=="value"&&S!=="null"&&S!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,A.push({content:B,scale:null,font:null,textColor:null})}}return new Cl(A)}evaluate(t){return new Sr(this.sections.map(r=>{const o=r.content.evaluate(t);return Vn(o)===pr?new yc("",o,null,null,null):new yc(Bo(o),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)}))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}}class xc{constructor(t){this.type=pr,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const o=r.parse(t[1],1,Qi);return o?new xc(o):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),o=_r.fromString(r);return o&&t.availableImages&&(o.available=t.availableImages.indexOf(r)>-1),o}eachChild(t){t(this.input)}outputDefined(){return!1}}class wc{constructor(t){this.type=Qt,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const o=r.parse(t[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${j(o.type)} instead.`):new wc(o):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Qn(`Expected value to be of type string or array, but found ${j(Vn(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Dr=8192;function Cc(n,t){const r=(180+n[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,A=Math.pow(2,t.z);return[Math.round(r*A*Dr),Math.round(o*A*Dr)]}function Bl(n,t){const r=Math.pow(2,t.z);return[(A=(n[0]/Dr+t.x)/r,360*A-180),(o=(n[1]/Dr+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90)];var o,A}function Ra(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function La(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function Oi(n,t,r){const o=n[0]-t[0],A=n[1]-t[1],p=n[0]-r[0],m=n[1]-r[1];return o*m-p*A==0&&o*p<=0&&A*m<=0}function as(n,t,r,o){return(A=[o[0]-r[0],o[1]-r[1]])[0]*(p=[t[0]-n[0],t[1]-n[1]])[1]-A[1]*p[0]!=0&&!(!Au(n,t,r,o)||!Au(r,o,n,t));var A,p}function El(n,t,r){for(const o of r)for(let A=0;A<o.length-1;++A)if(as(n,t,o[A],o[A+1]))return!0;return!1}function na(n,t,r=!1){let o=!1;for(const x of t)for(let B=0;B<x.length-1;B++){if(Oi(n,x[B],x[B+1]))return r;(p=x[B])[1]>(A=n)[1]!=(m=x[B+1])[1]>A[1]&&A[0]<(m[0]-p[0])*(A[1]-p[1])/(m[1]-p[1])+p[0]&&(o=!o)}var A,p,m;return o}function Mo(n,t){for(const r of t)if(na(n,r))return!0;return!1}function ra(n,t){for(const r of n)if(!na(r,t))return!1;for(let r=0;r<n.length-1;++r)if(El(n[r],n[r+1],t))return!1;return!0}function ph(n,t){for(const r of t)if(ra(n,r))return!0;return!1}function Au(n,t,r,o){const A=o[0]-r[0],p=o[1]-r[1],m=(n[0]-r[0])*p-A*(n[1]-r[1]),x=(t[0]-r[0])*p-A*(t[1]-r[1]);return m>0&&x<0||m<0&&x>0}function Bc(n,t,r){const o=[];for(let A=0;A<n.length;A++){const p=[];for(let m=0;m<n[A].length;m++){const x=Cc(n[A][m],r);Ra(t,x),p.push(x)}o.push(p)}return o}function du(n,t,r){const o=[];for(let A=0;A<n.length;A++){const p=Bc(n[A],t,r);o.push(p)}return o}function fu(n,t,r,o){if(n[0]<r[0]||n[0]>r[2]){const A=.5*o;let p=n[0]-r[0]>A?-o:r[0]-n[0]>A?o:0;p===0&&(p=n[0]-r[2]>A?-o:r[2]-n[0]>A?o:0),n[0]+=p}Ra(t,n)}function gu(n,t,r,o){const A=Math.pow(2,o.z)*Dr,p=[o.x*Dr,o.y*Dr],m=[];for(const x of n)for(const B of x){const S=[B.x+p[0],B.y+p[1]];fu(S,t,r,A),m.push(S)}return m}function pu(n,t,r,o){const A=Math.pow(2,o.z)*Dr,p=[o.x*Dr,o.y*Dr],m=[];for(const B of n){const S=[];for(const M of B){const P=[M.x+p[0],M.y+p[1]];Ra(t,P),S.push(P)}m.push(S)}if(t[2]-t[0]<=A/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const B of m)for(const S of B)fu(S,t,r,A)}var x;return m}class ss{constructor(t,r){this.type=ii,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Nr(t[1])){const o=t[1];if(o.type==="FeatureCollection"){const A=[];for(const p of o.features){const{type:m,coordinates:x}=p.geometry;m==="Polygon"&&A.push(x),m==="MultiPolygon"&&A.push(...x)}if(A.length)return new ss(o,{type:"MultiPolygon",coordinates:A})}else if(o.type==="Feature"){const A=o.geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new ss(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new ss(o,o)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,o){const A=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(o.type==="Polygon"){const x=Bc(o.coordinates,p,m),B=gu(r.geometry(),A,p,m);if(!La(A,p))return!1;for(const S of B)if(!na(S,x))return!1}if(o.type==="MultiPolygon"){const x=du(o.coordinates,p,m),B=gu(r.geometry(),A,p,m);if(!La(A,p))return!1;for(const S of B)if(!Mo(S,x))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,o){const A=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(o.type==="Polygon"){const x=Bc(o.coordinates,p,m),B=pu(r.geometry(),A,p,m);if(!La(A,p))return!1;for(const S of B)if(!ra(S,x))return!1}if(o.type==="MultiPolygon"){const x=du(o.coordinates,p,m),B=pu(r.geometry(),A,p,m);if(!La(A,p))return!1;for(const S of B)if(!ph(S,x))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ec=class{constructor(n=[],t=(r,o)=>r<o?-1:r>o?1:0){if(this.data=n,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:t,compare:r}=this,o=t[n];for(;n>0;){const A=n-1>>1,p=t[A];if(r(o,p)>=0)break;t[n]=p,n=A}t[n]=o}_down(n){const{data:t,compare:r}=this,o=this.length>>1,A=t[n];for(;n<o;){let p=1+(n<<1);const m=p+1;if(m<this.length&&r(t[m],t[p])<0&&(p=m),r(t[p],A)>=0)break;t[n]=t[p],n=p}t[n]=A}};function mu(n,t,r,o,A){Js(n,t,r,o||n.length-1,A)}function Js(n,t,r,o,A){for(;o>r;){if(o-r>600){var p=o-r+1,m=t-r+1,x=Math.log(p),B=.5*Math.exp(2*x/3),S=.5*Math.sqrt(x*B*(p-B)/p)*(m-p/2<0?-1:1);Js(n,t,Math.max(r,Math.floor(t-m*B/p+S)),Math.min(o,Math.floor(t+(p-m)*B/p+S)),A)}var M=n[t],P=r,O=o;for(Ys(n,r,t),A(n[o],M)>0&&Ys(n,r,o);P<O;){for(Ys(n,P,O),P++,O--;A(n[P],M)<0;)P++;for(;A(n[O],M)>0;)O--}A(n[r],M)===0?Ys(n,r,O):Ys(n,++O,o),O<=t&&(r=O+1),t<=O&&(o=O-1)}}function Ys(n,t,r){var o=n[t];n[t]=n[r],n[r]=o}function xs(n,t){if(n.length<=1)return[n];const r=[];let o,A;for(const p of n){const m=vr(p);m!==0&&(p.area=Math.abs(m),A===void 0&&(A=m<0),A===m<0?(o&&r.push(o),o=[p]):o.push(p))}if(o&&r.push(o),t>1)for(let p=0;p<r.length;p++)r[p].length<=t||(mu(r[p],t,1,r[p].length-1,Qc),r[p]=r[p].slice(0,t));return r}function Qc(n,t){return t.area-n.area}function vr(n){let t=0;for(let r,o,A=0,p=n.length,m=p-1;A<p;m=A++)r=n[A],o=n[m],t+=(o.x-r.x)*(r.y+o.y);return t}const Sc=1/298.257223563,kc=Sc*(2-Sc),To=Math.PI/180;class Fa{constructor(t){const r=6378.137*To*1e3,o=Math.cos(t*To),A=1/(1-kc*(1-o*o)),p=Math.sqrt(A);this.kx=r*p*o,this.ky=r*p*A*(1-kc)}distance(t,r){const o=this.wrap(t[0]-r[0])*this.kx,A=(t[1]-r[1])*this.ky;return Math.sqrt(o*o+A*A)}pointOnLine(t,r){let o,A,p,m,x=1/0;for(let B=0;B<t.length-1;B++){let S=t[B][0],M=t[B][1],P=this.wrap(t[B+1][0]-S)*this.kx,O=(t[B+1][1]-M)*this.ky,Y=0;P===0&&O===0||(Y=(this.wrap(r[0]-S)*this.kx*P+(r[1]-M)*this.ky*O)/(P*P+O*O),Y>1?(S=t[B+1][0],M=t[B+1][1]):Y>0&&(S+=P/this.kx*Y,M+=O/this.ky*Y)),P=this.wrap(r[0]-S)*this.kx,O=(r[1]-M)*this.ky;const ne=P*P+O*O;ne<x&&(x=ne,o=S,A=M,p=B,m=Y)}return{point:[o,A],index:p,t:Math.max(0,Math.min(1,m))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function os(n,t){return t[0]-n[0]}function Po(n){return n[1]-n[0]+1}function va(n,t){return n[1]>=n[0]&&n[1]<t}function Mr(n,t){if(n[0]>n[1])return[null,null];const r=Po(n);if(t){if(r===2)return[n,null];const A=Math.floor(r/2);return[[n[0],n[0]+A],[n[0]+A,n[1]]]}if(r===1)return[n,null];const o=Math.floor(r/2)-1;return[[n[0],n[0]+o],[n[0]+o+1,n[1]]]}function Ql(n,t){if(!va(t,n.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let o=t[0];o<=t[1];++o)Ra(r,n[o]);return r}function Ks(n){const t=[1/0,1/0,-1/0,-1/0];for(const r of n)for(const o of r)Ra(t,o);return t}function Sl(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function ws(n,t,r){if(!Sl(n)||!Sl(t))return NaN;let o=0,A=0;return n[2]<t[0]&&(o=t[0]-n[2]),n[0]>t[2]&&(o=n[0]-t[2]),n[1]>t[3]&&(A=n[1]-t[3]),n[3]<t[1]&&(A=t[1]-n[3]),r.distance([0,0],[o,A])}function Cs(n,t,r){const o=r.pointOnLine(t,n);return r.distance(n,o.point)}function kl(n,t,r,o,A){const p=Math.min(Cs(n,[r,o],A),Cs(t,[r,o],A)),m=Math.min(Cs(r,[n,t],A),Cs(o,[n,t],A));return Math.min(p,m)}function yu(n,t,r,o,A){if(!va(t,n.length)||!va(o,r.length))return 1/0;let p=1/0;for(let m=t[0];m<t[1];++m){const x=n[m],B=n[m+1];for(let S=o[0];S<o[1];++S){const M=r[S],P=r[S+1];if(as(x,B,M,P))return 0;p=Math.min(p,kl(x,B,M,P,A))}}return p}function mh(n,t,r,o,A){if(!va(t,n.length)||!va(o,r.length))return NaN;let p=1/0;for(let m=t[0];m<=t[1];++m)for(let x=o[0];x<=o[1];++x)if(p=Math.min(p,A.distance(n[m],r[x])),p===0)return p;return p}function Sn(n,t,r){if(na(n,t,!0))return 0;let o=1/0;for(const A of t){const p=A[0],m=A[A.length-1];if(p!==m&&(o=Math.min(o,Cs(n,[m,p],r)),o===0))return o;const x=r.pointOnLine(A,n);if(o=Math.min(o,r.distance(n,x.point)),o===0)return o}return o}function yh(n,t,r,o){if(!va(t,n.length))return NaN;for(let p=t[0];p<=t[1];++p)if(na(n[p],r,!0))return 0;let A=1/0;for(let p=t[0];p<t[1];++p){const m=n[p],x=n[p+1];for(const B of r)for(let S=0,M=B.length,P=M-1;S<M;P=S++){const O=B[P],Y=B[S];if(as(m,x,O,Y))return 0;A=Math.min(A,kl(m,x,O,Y,o))}}return A}function ki(n,t){for(const r of n)for(const o of r)if(na(o,t,!0))return!0;return!1}function Dc(n,t,r,o=1/0){const A=Ks(n),p=Ks(t);if(o!==1/0&&ws(A,p,r)>=o)return o;if(La(A,p)){if(ki(n,t))return 0}else if(ki(t,n))return 0;let m=1/0;for(const x of n)for(let B=0,S=x.length,M=S-1;B<S;M=B++){const P=x[M],O=x[B];for(const Y of t)for(let ne=0,ae=Y.length,_e=ae-1;ne<ae;_e=ne++){const Be=Y[_e],Ke=Y[ne];if(as(P,O,Be,Ke))return 0;m=Math.min(m,kl(P,O,Be,Ke,r))}}return m}function sn(n,t,r,o,A,p){if(!p)return;const m=ws(Ql(o,p),A,r);m<t&&n.push([m,p,[0,0]])}function Yi(n,t,r,o,A,p,m){if(!p||!m)return;const x=ws(Ql(o,p),Ql(A,m),r);x<t&&n.push([x,p,m])}function Bs(n,t,r,o,A=1/0){let p=Math.min(o.distance(n[0],r[0][0]),A);if(p===0)return p;const m=new Ec([[0,[0,n.length-1],[0,0]]],os),x=Ks(r);for(;m.length>0;){const B=m.pop();if(B[0]>=p)continue;const S=B[1],M=t?50:100;if(Po(S)<=M){if(!va(S,n.length))return NaN;if(t){const P=yh(n,S,r,o);if(isNaN(P)||P===0)return P;p=Math.min(p,P)}else for(let P=S[0];P<=S[1];++P){const O=Sn(n[P],r,o);if(p=Math.min(p,O),p===0)return 0}}else{const P=Mr(S,t);sn(m,p,o,n,x,P[0]),sn(m,p,o,n,x,P[1])}}return p}function Es(n,t,r,o,A,p=1/0){let m=Math.min(p,A.distance(n[0],r[0]));if(m===0)return m;const x=new Ec([[0,[0,n.length-1],[0,r.length-1]]],os);for(;x.length>0;){const B=x.pop();if(B[0]>=m)continue;const S=B[1],M=B[2],P=t?50:100,O=o?50:100;if(Po(S)<=P&&Po(M)<=O){if(!va(S,n.length)&&va(M,r.length))return NaN;let Y;if(t&&o)Y=yu(n,S,r,M,A),m=Math.min(m,Y);else if(t&&!o){const ne=n.slice(S[0],S[1]+1);for(let ae=M[0];ae<=M[1];++ae)if(Y=Cs(r[ae],ne,A),m=Math.min(m,Y),m===0)return m}else if(!t&&o){const ne=r.slice(M[0],M[1]+1);for(let ae=S[0];ae<=S[1];++ae)if(Y=Cs(n[ae],ne,A),m=Math.min(m,Y),m===0)return m}else Y=mh(n,S,r,M,A),m=Math.min(m,Y)}else{const Y=Mr(S,t),ne=Mr(M,o);Yi(x,m,A,n,r,Y[0],ne[0]),Yi(x,m,A,n,r,Y[0],ne[1]),Yi(x,m,A,n,r,Y[1],ne[0]),Yi(x,m,A,n,r,Y[1],ne[1])}}return m}function Dl(n){return n.type==="MultiPolygon"?n.coordinates.map(t=>({type:"Polygon",coordinates:t})):n.type==="MultiLineString"?n.coordinates.map(t=>({type:"LineString",coordinates:t})):n.type==="MultiPoint"?n.coordinates.map(t=>({type:"Point",coordinates:t})):[n]}class Qs{constructor(t,r){this.type=Qt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Nr(t[1])){const o=t[1];if(o.type==="FeatureCollection")return new Qs(o,o.features.map(A=>Dl(A.geometry)).flat());if(o.type==="Feature")return new Qs(o,Dl(o.geometry));if("type"in o&&"coordinates"in o)return new Qs(o,Dl(o))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,o){const A=r.geometry(),p=A.flat().map(B=>Bl([B.x,B.y],r.canonical));if(A.length===0)return NaN;const m=new Fa(p[0][1]);let x=1/0;for(const B of o){switch(B.type){case"Point":x=Math.min(x,Es(p,!1,[B.coordinates],!1,m,x));break;case"LineString":x=Math.min(x,Es(p,!1,B.coordinates,!0,m,x));break;case"Polygon":x=Math.min(x,Bs(p,!1,B.coordinates,m,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,o){const A=r.geometry(),p=A.flat().map(B=>Bl([B.x,B.y],r.canonical));if(A.length===0)return NaN;const m=new Fa(p[0][1]);let x=1/0;for(const B of o){switch(B.type){case"Point":x=Math.min(x,Es(p,!0,[B.coordinates],!1,m,x));break;case"LineString":x=Math.min(x,Es(p,!0,B.coordinates,!0,m,x));break;case"Polygon":x=Math.min(x,Bs(p,!0,B.coordinates,m,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="Polygon")return function(r,o){const A=r.geometry();if(A.length===0||A[0].length===0)return NaN;const p=xs(A,0).map(B=>B.map(S=>S.map(M=>Bl([M.x,M.y],r.canonical)))),m=new Fa(p[0][0][0][1]);let x=1/0;for(const B of o)for(const S of p){switch(B.type){case"Point":x=Math.min(x,Bs([B.coordinates],!1,S,m,x));break;case"LineString":x=Math.min(x,Bs(B.coordinates,!0,S,m,x));break;case"Polygon":x=Math.min(x,Dc(S,B.coordinates,m,x))}if(x===0)return x}return x}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ss={"==":hu,"!=":Ic,">":xl,"<":bl,">=":bc,"<=":gh,array:kr,at:_c,boolean:kr,case:_l,coalesce:vl,collator:Do,format:Cl,image:xc,in:Qo,"index-of":ns,interpolate:Wn,"interpolate-hcl":Wn,"interpolate-lab":Wn,length:wc,let:Ta,literal:ta,match:vc,number:kr,"number-format":wl,object:kr,slice:So,step:rs,string:kr,"to-boolean":ia,"to-color":ia,"to-number":ia,"to-string":ia,var:Ji,within:ss,distance:Qs};class ar{constructor(t,r,o,A){this.name=t,this.type=r,this._evaluate=o,this.args=A}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const o=t[0],A=ar.definitions[o];if(!A)return r.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const p=Array.isArray(A)?A[0]:A.type,m=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,x=m.filter(([S])=>!Array.isArray(S)||S.length===t.length-1);let B=null;for(const[S,M]of x){B=new _s(r.registry,Ds,r.path,null,r.scope);const P=[];let O=!1;for(let Y=1;Y<t.length;Y++){const ne=t[Y],ae=Array.isArray(S)?S[Y-1]:S.type,_e=B.parse(ne,1+P.length,ae);if(!_e){O=!0;break}P.push(_e)}if(!O)if(Array.isArray(S)&&S.length!==P.length)B.error(`Expected ${S.length} arguments, but found ${P.length} instead.`);else{for(let Y=0;Y<P.length;Y++){const ne=Array.isArray(S)?S[Y]:S.type,ae=P[Y];B.concat(Y+1).checkSubtype(ne,ae.type)}if(B.errors.length===0)return new ar(o,p,M,P)}}if(x.length===1)r.errors.push(...B.errors);else{const S=(x.length?x:m).map(([P])=>{return O=P,Array.isArray(O)?`(${O.map(j).join(", ")})`:`(${j(O.type)}...)`;var O}).join(" | "),M=[];for(let P=1;P<t.length;P++){const O=r.parse(t[P],1+M.length);if(!O)return null;M.push(j(O.type))}r.error(`Expected arguments of type ${S}, but found (${M.join(", ")}) instead.`)}return null}static register(t,r){ar.definitions=r;for(const o in r)t[o]=ar}}function Ml(n,[t,r,o,A]){t=t.evaluate(n),r=r.evaluate(n),o=o.evaluate(n);const p=A?A.evaluate(n):1,m=Ma(t,r,o,p);if(m)throw new Qn(m);return new an(t/255,r/255,o/255,p,!1)}function Mc(n,t){return n in t}function Tl(n,t){const r=t[n];return r===void 0?null:r}function ks(n){return{type:n}}function Ds(n){if(n instanceof Ji)return Ds(n.boundExpression);if(n instanceof ar&&n.name==="error"||n instanceof Do||n instanceof ss||n instanceof Qs)return!1;const t=n instanceof ia||n instanceof kr;let r=!0;return n.eachChild(o=>{r=t?r&&Ds(o):r&&o instanceof ta}),!!r&&Ia(n)&&Ro(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ia(n){if(n instanceof ar&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof ss||n instanceof Qs)return!1;let t=!0;return n.eachChild(r=>{t&&!Ia(r)&&(t=!1)}),t}function Ms(n){if(n instanceof ar&&n.name==="feature-state")return!1;let t=!0;return n.eachChild(r=>{t&&!Ms(r)&&(t=!1)}),t}function Ro(n,t){if(n instanceof ar&&t.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(o=>{r&&!Ro(o,t)&&(r=!1)}),r}function $s(n){return{result:"success",value:n}}function ba(n){return{result:"error",value:n}}function Ts(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Tc(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Pl(n){return!!n.expression&&n.expression.interpolated}function Vi(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Lo(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function _u(n){return n}function Pc(n,t){const r=t.type==="color",o=n.stops&&typeof n.stops[0][0]=="object",A=o||!(o||n.property!==void 0),p=n.type||(Pl(t)?"exponential":"interval");if(r||t.type==="padding"){const M=r?an.parse:mr.parse;(n=mn({},n)).stops&&(n.stops=n.stops.map(P=>[P[0],M(P[1])])),n.default=M(n.default?n.default:t.default)}if(n.colorSpace&&(m=n.colorSpace)!=="rgb"&&m!=="hcl"&&m!=="lab")throw new Error(`Unknown color space: "${n.colorSpace}"`);var m;let x,B,S;if(p==="exponential")x=Fo;else if(p==="interval")x=Iu;else if(p==="categorical"){x=vu,B=Object.create(null);for(const M of n.stops)B[M[0]]=M[1];S=typeof n.stops[0][0]}else{if(p!=="identity")throw new Error(`Unknown function type "${p}"`);x=bu}if(o){const M={},P=[];for(let ne=0;ne<n.stops.length;ne++){const ae=n.stops[ne],_e=ae[0].zoom;M[_e]===void 0&&(M[_e]={zoom:_e,type:n.type,property:n.property,default:n.default,stops:[]},P.push(_e)),M[_e].stops.push([ae[0].value,ae[1]])}const O=[];for(const ne of P)O.push([M[ne].zoom,Pc(M[ne],t)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Wn.interpolationFactor.bind(void 0,Y),zoomStops:O.map(ne=>ne[0]),evaluate:({zoom:ne},ae)=>Fo({stops:O,base:n.base},t,ne).evaluate(ne,ae)}}if(A){const M=p==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Wn.interpolationFactor.bind(void 0,M),zoomStops:n.stops.map(P=>P[0]),evaluate:({zoom:P})=>x(n,t,P,B,S)}}return{kind:"source",evaluate(M,P){const O=P&&P.properties?P.properties[n.property]:void 0;return O===void 0?Zs(n.default,t.default):x(n,t,O,B,S)}}}function Zs(n,t,r){return n!==void 0?n:t!==void 0?t:r!==void 0?r:void 0}function vu(n,t,r,o,A){return Zs(typeof r===A?o[r]:void 0,n.default,t.default)}function Iu(n,t,r){if(Vi(r)!=="number")return Zs(n.default,t.default);const o=n.stops.length;if(o===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[o-1][0])return n.stops[o-1][1];const A=_a(n.stops.map(p=>p[0]),r);return n.stops[A][1]}function Fo(n,t,r){const o=n.base!==void 0?n.base:1;if(Vi(r)!=="number")return Zs(n.default,t.default);const A=n.stops.length;if(A===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[A-1][0])return n.stops[A-1][1];const p=_a(n.stops.map(M=>M[0]),r),m=function(M,P,O,Y){const ne=Y-O,ae=M-O;return ne===0?0:P===1?ae/ne:(Math.pow(P,ae)-1)/(Math.pow(P,ne)-1)}(r,o,n.stops[p][0],n.stops[p+1][0]),x=n.stops[p][1],B=n.stops[p+1][1],S=Ln[t.type]||_u;return typeof x.evaluate=="function"?{evaluate(...M){const P=x.evaluate.apply(void 0,M),O=B.evaluate.apply(void 0,M);if(P!==void 0&&O!==void 0)return S(P,O,m,n.colorSpace)}}:S(x,B,m,n.colorSpace)}function bu(n,t,r){switch(t.type){case"color":r=an.parse(r);break;case"formatted":r=Sr.fromString(r.toString());break;case"resolvedImage":r=_r.fromString(r.toString());break;case"padding":r=mr.parse(r);break;default:Vi(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return Zs(r,n.default,t.default)}ar.register(Ss,{error:[{kind:"error"},[Qi],(n,[t])=>{throw new Qn(t.evaluate(n))}],typeof:[Qi,[wi],(n,[t])=>j(Vn(t.evaluate(n)))],"to-rgba":[J(Qt,4),[fn],(n,[t])=>{const[r,o,A,p]=t.evaluate(n).rgb;return[255*r,255*o,255*A,p]}],rgb:[fn,[Qt,Qt,Qt],Ml],rgba:[fn,[Qt,Qt,Qt,Qt],Ml],has:{type:ii,overloads:[[[Qi],(n,[t])=>Mc(t.evaluate(n),n.properties())],[[Qi,Ar],(n,[t,r])=>Mc(t.evaluate(n),r.evaluate(n))]]},get:{type:wi,overloads:[[[Qi],(n,[t])=>Tl(t.evaluate(n),n.properties())],[[Qi,Ar],(n,[t,r])=>Tl(t.evaluate(n),r.evaluate(n))]]},"feature-state":[wi,[Qi],(n,[t])=>Tl(t.evaluate(n),n.featureState||{})],properties:[Ar,[],n=>n.properties()],"geometry-type":[Qi,[],n=>n.geometryType()],id:[wi,[],n=>n.id()],zoom:[Qt,[],n=>n.globals.zoom],"heatmap-density":[Qt,[],n=>n.globals.heatmapDensity||0],"line-progress":[Qt,[],n=>n.globals.lineProgress||0],accumulated:[wi,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Qt,ks(Qt),(n,t)=>{let r=0;for(const o of t)r+=o.evaluate(n);return r}],"*":[Qt,ks(Qt),(n,t)=>{let r=1;for(const o of t)r*=o.evaluate(n);return r}],"-":{type:Qt,overloads:[[[Qt,Qt],(n,[t,r])=>t.evaluate(n)-r.evaluate(n)],[[Qt],(n,[t])=>-t.evaluate(n)]]},"/":[Qt,[Qt,Qt],(n,[t,r])=>t.evaluate(n)/r.evaluate(n)],"%":[Qt,[Qt,Qt],(n,[t,r])=>t.evaluate(n)%r.evaluate(n)],ln2:[Qt,[],()=>Math.LN2],pi:[Qt,[],()=>Math.PI],e:[Qt,[],()=>Math.E],"^":[Qt,[Qt,Qt],(n,[t,r])=>Math.pow(t.evaluate(n),r.evaluate(n))],sqrt:[Qt,[Qt],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[Qt,[Qt],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[Qt,[Qt],(n,[t])=>Math.log(t.evaluate(n))],log2:[Qt,[Qt],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[Qt,[Qt],(n,[t])=>Math.sin(t.evaluate(n))],cos:[Qt,[Qt],(n,[t])=>Math.cos(t.evaluate(n))],tan:[Qt,[Qt],(n,[t])=>Math.tan(t.evaluate(n))],asin:[Qt,[Qt],(n,[t])=>Math.asin(t.evaluate(n))],acos:[Qt,[Qt],(n,[t])=>Math.acos(t.evaluate(n))],atan:[Qt,[Qt],(n,[t])=>Math.atan(t.evaluate(n))],min:[Qt,ks(Qt),(n,t)=>Math.min(...t.map(r=>r.evaluate(n)))],max:[Qt,ks(Qt),(n,t)=>Math.max(...t.map(r=>r.evaluate(n)))],abs:[Qt,[Qt],(n,[t])=>Math.abs(t.evaluate(n))],round:[Qt,[Qt],(n,[t])=>{const r=t.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[Qt,[Qt],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[Qt,[Qt],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[ii,[Qi,wi],(n,[t,r])=>n.properties()[t.value]===r.value],"filter-id-==":[ii,[wi],(n,[t])=>n.id()===t.value],"filter-type-==":[ii,[Qi],(n,[t])=>n.geometryType()===t.value],"filter-<":[ii,[Qi,wi],(n,[t,r])=>{const o=n.properties()[t.value],A=r.value;return typeof o==typeof A&&o<A}],"filter-id-<":[ii,[wi],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r<o}],"filter->":[ii,[Qi,wi],(n,[t,r])=>{const o=n.properties()[t.value],A=r.value;return typeof o==typeof A&&o>A}],"filter-id->":[ii,[wi],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r>o}],"filter-<=":[ii,[Qi,wi],(n,[t,r])=>{const o=n.properties()[t.value],A=r.value;return typeof o==typeof A&&o<=A}],"filter-id-<=":[ii,[wi],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r<=o}],"filter->=":[ii,[Qi,wi],(n,[t,r])=>{const o=n.properties()[t.value],A=r.value;return typeof o==typeof A&&o>=A}],"filter-id->=":[ii,[wi],(n,[t])=>{const r=n.id(),o=t.value;return typeof r==typeof o&&r>=o}],"filter-has":[ii,[wi],(n,[t])=>t.value in n.properties()],"filter-has-id":[ii,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[ii,[J(Qi)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[ii,[J(wi)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[ii,[Qi,J(wi)],(n,[t,r])=>r.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[ii,[Qi,J(wi)],(n,[t,r])=>function(o,A,p,m){for(;p<=m;){const x=p+m>>1;if(A[x]===o)return!0;A[x]>o?m=x-1:p=x+1}return!1}(n.properties()[t.value],r.value,0,r.value.length-1)],all:{type:ii,overloads:[[[ii,ii],(n,[t,r])=>t.evaluate(n)&&r.evaluate(n)],[ks(ii),(n,t)=>{for(const r of t)if(!r.evaluate(n))return!1;return!0}]]},any:{type:ii,overloads:[[[ii,ii],(n,[t,r])=>t.evaluate(n)||r.evaluate(n)],[ks(ii),(n,t)=>{for(const r of t)if(r.evaluate(n))return!0;return!1}]]},"!":[ii,[ii],(n,[t])=>!t.evaluate(n)],"is-supported-script":[ii,[Qi],(n,[t])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(t.evaluate(n))}],upcase:[Qi,[Qi],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[Qi,[Qi],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[Qi,ks(wi),(n,t)=>t.map(r=>Bo(r.evaluate(n))).join("")],"resolved-locale":[Qi,[ma],(n,[t])=>t.evaluate(n).resolvedLocale()]});class zo{constructor(t,r){var o;this.expression=t,this._warningHistory={},this._evaluator=new yl,this._defaultValue=r?(o=r).type==="color"&&Lo(o.default)?new an(0,0,0,0):o.type==="color"?an.parse(o.default)||null:o.type==="padding"?mr.parse(o.default)||null:o.type==="variableAnchorOffsetCollection"?yr.parse(o.default)||null:o.default===void 0?null:o.default:null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,o,A,p,m){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=o,this._evaluator.canonical=A,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)}evaluate(t,r,o,A,p,m){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=o||null,this._evaluator.canonical=A,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m||null;try{const x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Qn(`Expected value to be one of ${Object.keys(this._enumValues).map(B=>JSON.stringify(B)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function Ws(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Ss}function Go(n,t){const r=new _s(Ss,Ds,[],t?function(A){const p={color:fn,string:Qi,number:Qt,enum:Qi,boolean:ii,formatted:ya,padding:is,resolvedImage:pr,variableAnchorOffsetCollection:Ie};return A.type==="array"?J(p[A.value]||wi,A.length):p[A.type]}(t):void 0),o=r.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?$s(new zo(o,t)):ba(r.errors)}class No{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Ms(r.expression)}evaluateWithoutErrorHandling(t,r,o,A,p,m){return this._styleExpression.evaluateWithoutErrorHandling(t,r,o,A,p,m)}evaluate(t,r,o,A,p,m){return this._styleExpression.evaluate(t,r,o,A,p,m)}}class Xs{constructor(t,r,o,A){this.kind=t,this.zoomStops=o,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Ms(r.expression),this.interpolationType=A}evaluateWithoutErrorHandling(t,r,o,A,p,m){return this._styleExpression.evaluateWithoutErrorHandling(t,r,o,A,p,m)}evaluate(t,r,o,A,p,m){return this._styleExpression.evaluate(t,r,o,A,p,m)}interpolationFactor(t,r,o){return this.interpolationType?Wn.interpolationFactor(this.interpolationType,t,r,o):0}}function eo(n,t){const r=Go(n,t);if(r.result==="error")return r;const o=r.value.expression,A=Ia(o);if(!A&&!Ts(t))return ba([new en("","data expressions not supported")]);const p=Ro(o,["zoom"]);if(!p&&!Tc(t))return ba([new en("","zoom expressions not supported")]);const m=to(o);return m||p?m instanceof en?ba([m]):m instanceof Wn&&!Pl(t)?ba([new en("",'"interpolate" expressions cannot be used with this property')]):$s(m?new Xs(A?"camera":"composite",r.value,m.labels,m instanceof Wn?m.interpolation:void 0):new No(A?"constant":"source",r.value)):ba([new en("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Tr{constructor(t,r){this._parameters=t,this._specification=r,mn(this,Pc(this._parameters,this._specification))}static deserialize(t){return new Tr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function to(n){let t=null;if(n instanceof Ta)t=to(n.result);else if(n instanceof vl){for(const r of n.args)if(t=to(r),t)break}else(n instanceof rs||n instanceof Wn)&&n.input instanceof ar&&n.input.name==="zoom"&&(t=n);return t instanceof en||n.eachChild(r=>{const o=to(r);o instanceof en?t=o:!t&&o?t=new en("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&o&&t!==o&&(t=new en("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Uo(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!Uo(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const xu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function io(n){if(n==null)return{filter:()=>!0,needGeometry:!1};Uo(n)||(n=no(n));const t=Go(n,xu);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return{filter:(r,o,A)=>t.value.evaluate(r,o,{},A),needGeometry:wu(n)}}function _h(n,t){return n<t?-1:n>t?1:0}function wu(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let t=1;t<n.length;t++)if(wu(n[t]))return!0;return!1}function no(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?Oo(n[1],n[2],"=="):t==="!="?aa(Oo(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Oo(n[1],n[2],t):t==="any"?(r=n.slice(1),["any"].concat(r.map(no))):t==="all"?["all"].concat(n.slice(1).map(no)):t==="none"?["all"].concat(n.slice(1).map(no).map(aa)):t==="in"?Cu(n[1],n.slice(2)):t==="!in"?aa(Cu(n[1],n.slice(2))):t==="has"?Vo(n[1]):t!=="!has"||aa(Vo(n[1]));var r}function Oo(n,t,r){switch(n){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,n,t]}}function Cu(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(r=>typeof r!=typeof t[0])?["filter-in-large",n,["literal",t.sort(_h)]]:["filter-in-small",n,["literal",t]]}}function Vo(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function aa(n){return["!",n]}function Xn(n){const t=typeof n;if(t==="number"||t==="boolean"||t==="string"||n==null)return JSON.stringify(n);if(Array.isArray(n)){let A="[";for(const p of n)A+=`${Xn(p)},`;return`${A}]`}const r=Object.keys(n).sort();let o="{";for(let A=0;A<r.length;A++)o+=`${JSON.stringify(r[A])}:${Xn(n[r[A]])},`;return`${o}}`}function ls(n){let t="";for(const r of bt)t+=`/${Xn(n[r])}`;return t}function ro(n){const t=n.value;return t?[new dt(n.key,t,"constants have been deprecated as of v8")]:[]}function bn(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function xa(n){if(Array.isArray(n))return n.map(xa);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const r in n)t[r]=xa(n[r]);return t}return bn(n)}function Kn(n){const t=n.key,r=n.value,o=n.valueSpec||{},A=n.objectElementValidators||{},p=n.style,m=n.styleSpec,x=n.validateSpec;let B=[];const S=Vi(r);if(S!=="object")return[new dt(t,r,`object expected, ${S} found`)];for(const M in r){const P=M.split(".")[0],O=o[P]||o["*"];let Y;if(A[P])Y=A[P];else if(o[P])Y=x;else if(A["*"])Y=A["*"];else{if(!o["*"]){B.push(new dt(t,r[M],`unknown property "${M}"`));continue}Y=x}B=B.concat(Y({key:(t&&`${t}.`)+M,value:r[M],valueSpec:O,style:p,styleSpec:m,object:r,objectKey:M,validateSpec:x},r))}for(const M in o)A[M]||o[M].required&&o[M].default===void 0&&r[M]===void 0&&B.push(new dt(t,r,`missing required property "${M}"`));return B}function za(n){const t=n.value,r=n.valueSpec,o=n.style,A=n.styleSpec,p=n.key,m=n.arrayElementValidator||n.validateSpec;if(Vi(t)!=="array")return[new dt(p,t,`array expected, ${Vi(t)} found`)];if(r.length&&t.length!==r.length)return[new dt(p,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new dt(p,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let x={type:r.value,values:r.values};A.$version<7&&(x.function=r.function),Vi(r.value)==="object"&&(x=r.value);let B=[];for(let S=0;S<t.length;S++)B=B.concat(m({array:t,arrayIndex:S,value:t[S],valueSpec:x,validateSpec:n.validateSpec,style:o,styleSpec:A,key:`${p}[${S}]`}));return B}function cs(n){const t=n.key,r=n.value,o=n.valueSpec;let A=Vi(r);return A==="number"&&r!=r&&(A="NaN"),A!=="number"?[new dt(t,r,`number expected, ${A} found`)]:"minimum"in o&&r<o.minimum?[new dt(t,r,`${r} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&r>o.maximum?[new dt(t,r,`${r} is greater than the maximum value ${o.maximum}`)]:[]}function Rc(n){const t=n.valueSpec,r=bn(n.value.type);let o,A,p,m={};const x=r!=="categorical"&&n.value.property===void 0,B=!x,S=Vi(n.value.stops)==="array"&&Vi(n.value.stops[0])==="array"&&Vi(n.value.stops[0][0])==="object",M=Kn({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(Y){if(r==="identity")return[new dt(Y.key,Y.value,'identity function may not have a "stops" property')];let ne=[];const ae=Y.value;return ne=ne.concat(za({key:Y.key,value:ae,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:P})),Vi(ae)==="array"&&ae.length===0&&ne.push(new dt(Y.key,ae,"array must have at least one stop")),ne},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:t,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return r==="identity"&&x&&M.push(new dt(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||M.push(new dt(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!Pl(n.valueSpec)&&M.push(new dt(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(B&&!Ts(n.valueSpec)?M.push(new dt(n.key,n.value,"property functions not supported")):x&&!Tc(n.valueSpec)&&M.push(new dt(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!S||n.value.property!==void 0||M.push(new dt(n.key,n.value,'"property" property is required')),M;function P(Y){let ne=[];const ae=Y.value,_e=Y.key;if(Vi(ae)!=="array")return[new dt(_e,ae,`array expected, ${Vi(ae)} found`)];if(ae.length!==2)return[new dt(_e,ae,`array length 2 expected, length ${ae.length} found`)];if(S){if(Vi(ae[0])!=="object")return[new dt(_e,ae,`object expected, ${Vi(ae[0])} found`)];if(ae[0].zoom===void 0)return[new dt(_e,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new dt(_e,ae,"object stop key must have value")];if(p&&p>bn(ae[0].zoom))return[new dt(_e,ae[0].zoom,"stop zoom values must appear in ascending order")];bn(ae[0].zoom)!==p&&(p=bn(ae[0].zoom),A=void 0,m={}),ne=ne.concat(Kn({key:`${_e}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:cs,value:O}}))}else ne=ne.concat(O({key:`${_e}[0]`,value:ae[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},ae));return Ws(xa(ae[1]))?ne.concat([new dt(`${_e}[1]`,ae[1],"expressions are not allowed in function stops.")]):ne.concat(Y.validateSpec({key:`${_e}[1]`,value:ae[1],valueSpec:t,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function O(Y,ne){const ae=Vi(Y.value),_e=bn(Y.value),Be=Y.value!==null?Y.value:ne;if(o){if(ae!==o)return[new dt(Y.key,Be,`${ae} stop domain type must match previous stop domain type ${o}`)]}else o=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new dt(Y.key,Be,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&r!=="categorical"){let Ke=`number expected, ${ae} found`;return Ts(t)&&r===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dt(Y.key,Be,Ke)]}return r!=="categorical"||ae!=="number"||isFinite(_e)&&Math.floor(_e)===_e?r!=="categorical"&&ae==="number"&&A!==void 0&&_e<A?[new dt(Y.key,Be,"stop domain values must appear in ascending order")]:(A=_e,r==="categorical"&&_e in m?[new dt(Y.key,Be,"stop domain values must be unique")]:(m[_e]=!0,[])):[new dt(Y.key,Be,`integer expected, found ${_e}`)]}}function us(n){const t=(n.expressionContext==="property"?eo:Go)(xa(n.value),n.valueSpec);if(t.result==="error")return t.value.map(o=>new dt(`${n.key}${o.key}`,n.value,o.message));const r=t.value.expression||t.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new dt(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Ms(r))return[new dt(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!Ms(r))return[new dt(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Ro(r,["zoom","feature-state"]))return[new dt(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Ia(r))return[new dt(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qo(n){const t=n.key,r=n.value,o=n.valueSpec,A=[];return Array.isArray(o.values)?o.values.indexOf(bn(r))===-1&&A.push(new dt(t,r,`expected one of [${o.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(o.values).indexOf(bn(r))===-1&&A.push(new dt(t,r,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(r)} found`)),A}function Ps(n){return Uo(xa(n.value))?us(mn({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bu(n)}function Bu(n){const t=n.value,r=n.key;if(Vi(t)!=="array")return[new dt(r,t,`array expected, ${Vi(t)} found`)];const o=n.styleSpec;let A,p=[];if(t.length<1)return[new dt(r,t,"filter array must have at least 1 element")];switch(p=p.concat(qo({key:`${r}[0]`,value:t[0],valueSpec:o.filter_operator,style:n.style,styleSpec:n.styleSpec})),bn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&bn(t[1])==="$type"&&p.push(new dt(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&p.push(new dt(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(A=Vi(t[1]),A!=="string"&&p.push(new dt(`${r}[1]`,t[1],`string expected, ${A} found`)));for(let m=2;m<t.length;m++)A=Vi(t[m]),bn(t[1])==="$type"?p=p.concat(qo({key:`${r}[${m}]`,value:t[m],valueSpec:o.geometry_type,style:n.style,styleSpec:n.styleSpec})):A!=="string"&&A!=="number"&&A!=="boolean"&&p.push(new dt(`${r}[${m}]`,t[m],`string, number, or boolean expected, ${A} found`));break;case"any":case"all":case"none":for(let m=1;m<t.length;m++)p=p.concat(Bu({key:`${r}[${m}]`,value:t[m],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":A=Vi(t[1]),t.length!==2?p.push(new dt(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):A!=="string"&&p.push(new dt(`${r}[1]`,t[1],`string expected, ${A} found`))}return p}function Ga(n,t){const r=n.key,o=n.validateSpec,A=n.style,p=n.styleSpec,m=n.value,x=n.objectKey,B=p[`${t}_${n.layerType}`];if(!B)return[];const S=x.match(/^(.*)-transition$/);if(t==="paint"&&S&&B[S[1]]&&B[S[1]].transition)return o({key:r,value:m,valueSpec:p.transition,style:A,styleSpec:p});const M=n.valueSpec||B[x];if(!M)return[new dt(r,m,`unknown property "${x}"`)];let P;if(Vi(m)==="string"&&Ts(M)&&!M.tokens&&(P=/^{([^}]+)}$/.exec(m)))return[new dt(r,m,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const O=[];return n.layerType==="symbol"&&(x==="text-field"&&A&&!A.glyphs&&O.push(new dt(r,m,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Lo(xa(m))&&bn(m.type)==="identity"&&O.push(new dt(r,m,'"text-font" does not support identity functions'))),O.concat(o({key:n.key,value:m,valueSpec:M,style:A,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:x}))}function Lc(n){return Ga(n,"paint")}function Rl(n){return Ga(n,"layout")}function Fc(n){let t=[];const r=n.value,o=n.key,A=n.style,p=n.styleSpec;r.type||r.ref||t.push(new dt(o,r,'either "type" or "ref" is required'));let m=bn(r.type);const x=bn(r.ref);if(r.id){const B=bn(r.id);for(let S=0;S<n.arrayIndex;S++){const M=A.layers[S];bn(M.id)===B&&t.push(new dt(o,r.id,`duplicate layer id "${r.id}", previously used at line ${M.id.__line__}`))}}if("ref"in r){let B;["type","source","source-layer","filter","layout"].forEach(S=>{S in r&&t.push(new dt(o,r[S],`"${S}" is prohibited for ref layers`))}),A.layers.forEach(S=>{bn(S.id)===x&&(B=S)}),B?B.ref?t.push(new dt(o,r.ref,"ref cannot reference another ref layer")):m=bn(B.type):t.push(new dt(o,r.ref,`ref layer "${x}" not found`))}else if(m!=="background")if(r.source){const B=A.sources&&A.sources[r.source],S=B&&bn(B.type);B?S==="vector"&&m==="raster"?t.push(new dt(o,r.source,`layer "${r.id}" requires a raster source`)):S!=="raster-dem"&&m==="hillshade"?t.push(new dt(o,r.source,`layer "${r.id}" requires a raster-dem source`)):S==="raster"&&m!=="raster"?t.push(new dt(o,r.source,`layer "${r.id}" requires a vector source`)):S!=="vector"||r["source-layer"]?S==="raster-dem"&&m!=="hillshade"?t.push(new dt(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!r.paint||!r.paint["line-gradient"]||S==="geojson"&&B.lineMetrics||t.push(new dt(o,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new dt(o,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new dt(o,r.source,`source "${r.source}" not found`))}else t.push(new dt(o,r,'missing required property "source"'));return t=t.concat(Kn({key:o,value:r,valueSpec:p.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*":()=>[],type:()=>n.validateSpec({key:`${o}.type`,value:r.type,valueSpec:p.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:r,objectKey:"type"}),filter:Ps,layout:B=>Kn({layer:r,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":S=>Rl(mn({layerType:m},S))}}),paint:B=>Kn({layer:r,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":S=>Lc(mn({layerType:m},S))}})}})),t}function hs(n){const t=n.value,r=n.key,o=Vi(t);return o!=="string"?[new dt(r,t,`string expected, ${o} found`)]:[]}const Eu={promoteId:function({key:n,value:t}){if(Vi(t)==="string")return hs({key:n,value:t});{const r=[];for(const o in t)r.push(...hs({key:`${n}.${o}`,value:t[o]}));return r}}};function Ll(n){const t=n.value,r=n.key,o=n.styleSpec,A=n.style,p=n.validateSpec;if(!t.type)return[new dt(r,t,'"type" is required')];const m=bn(t.type);let x;switch(m){case"vector":case"raster":return x=Kn({key:r,value:t,valueSpec:o[`source_${m.replace("-","_")}`],style:n.style,styleSpec:o,objectElementValidators:Eu,validateSpec:p}),x;case"raster-dem":return x=function(B){var S;const M=(S=B.sourceName)!==null&&S!==void 0?S:"",P=B.value,O=B.styleSpec,Y=O.source_raster_dem,ne=B.style;let ae=[];const _e=Vi(P);if(P===void 0)return ae;if(_e!=="object")return ae.push(new dt("source_raster_dem",P,`object expected, ${_e} found`)),ae;const Be=bn(P.encoding)==="custom",Ke=["redFactor","greenFactor","blueFactor","baseShift"],ze=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const He in P)!Be&&Ke.includes(He)?ae.push(new dt(He,P[He],`In "${M}": "${He}" is only valid when "encoding" is set to "custom". ${ze} encoding found`)):Y[He]?ae=ae.concat(B.validateSpec({key:He,value:P[He],valueSpec:Y[He],validateSpec:B.validateSpec,style:ne,styleSpec:O})):ae.push(new dt(He,P[He],`unknown property "${He}"`));return ae}({sourceName:r,value:t,style:n.style,styleSpec:o,validateSpec:p}),x;case"geojson":if(x=Kn({key:r,value:t,valueSpec:o.source_geojson,style:A,styleSpec:o,validateSpec:p,objectElementValidators:Eu}),t.cluster)for(const B in t.clusterProperties){const[S,M]=t.clusterProperties[B],P=typeof S=="string"?[S,["accumulated"],["get",B]]:S;x.push(...us({key:`${r}.${B}.map`,value:M,validateSpec:p,expressionContext:"cluster-map"})),x.push(...us({key:`${r}.${B}.reduce`,value:P,validateSpec:p,expressionContext:"cluster-reduce"}))}return x;case"video":return Kn({key:r,value:t,valueSpec:o.source_video,style:A,validateSpec:p,styleSpec:o});case"image":return Kn({key:r,value:t,valueSpec:o.source_image,style:A,validateSpec:p,styleSpec:o});case"canvas":return[new dt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qo({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:A,validateSpec:p,styleSpec:o})}}function Ho(n){const t=n.value,r=n.styleSpec,o=r.light,A=n.style;let p=[];const m=Vi(t);if(t===void 0)return p;if(m!=="object")return p=p.concat([new dt("light",t,`object expected, ${m} found`)]),p;for(const x in t){const B=x.match(/^(.*)-transition$/);p=p.concat(B&&o[B[1]]&&o[B[1]].transition?n.validateSpec({key:x,value:t[x],valueSpec:r.transition,validateSpec:n.validateSpec,style:A,styleSpec:r}):o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],validateSpec:n.validateSpec,style:A,styleSpec:r}):[new dt(x,t[x],`unknown property "${x}"`)])}return p}function jo(n){const t=n.value,r=n.styleSpec,o=r.sky,A=n.style,p=Vi(t);if(t===void 0)return[];if(p!=="object")return[new dt("sky",t,`object expected, ${p} found`)];let m=[];for(const x in t)m=m.concat(o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],style:A,styleSpec:r}):[new dt(x,t[x],`unknown property "${x}"`)]);return m}function zc(n){const t=n.value,r=n.styleSpec,o=r.terrain,A=n.style;let p=[];const m=Vi(t);if(t===void 0)return p;if(m!=="object")return p=p.concat([new dt("terrain",t,`object expected, ${m} found`)]),p;for(const x in t)p=p.concat(o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],validateSpec:n.validateSpec,style:A,styleSpec:r}):[new dt(x,t[x],`unknown property "${x}"`)]);return p}function Ur(n){let t=[];const r=n.value,o=n.key;if(Array.isArray(r)){const A=[],p=[];for(const m in r)r[m].id&&A.includes(r[m].id)&&t.push(new dt(o,r,`all the sprites' ids must be unique, but ${r[m].id} is duplicated`)),A.push(r[m].id),r[m].url&&p.includes(r[m].url)&&t.push(new dt(o,r,`all the sprites' URLs must be unique, but ${r[m].url} is duplicated`)),p.push(r[m].url),t=t.concat(Kn({key:`${o}[${m}]`,value:r[m],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:n.validateSpec}));return t}return hs({key:o,value:r})}const Jo={"*":()=>[],array:za,boolean:function(n){const t=n.value,r=n.key,o=Vi(t);return o!=="boolean"?[new dt(r,t,`boolean expected, ${o} found`)]:[]},number:cs,color:function(n){const t=n.key,r=n.value,o=Vi(r);return o!=="string"?[new dt(t,r,`color expected, ${o} found`)]:an.parse(String(r))?[]:[new dt(t,r,`color expected, "${r}" found`)]},constants:ro,enum:qo,filter:Ps,function:Rc,layer:Fc,object:Kn,source:Ll,light:Ho,sky:jo,terrain:zc,projection:function(n){const t=n.value,r=n.styleSpec,o=r.projection,A=n.style,p=Vi(t);if(t===void 0)return[];if(p!=="object")return[new dt("projection",t,`object expected, ${p} found`)];let m=[];for(const x in t)m=m.concat(o[x]?n.validateSpec({key:x,value:t[x],valueSpec:o[x],style:A,styleSpec:r}):[new dt(x,t[x],`unknown property "${x}"`)]);return m},string:hs,formatted:function(n){return hs(n).length===0?[]:us(n)},resolvedImage:function(n){return hs(n).length===0?[]:us(n)},padding:function(n){const t=n.key,r=n.value;if(Vi(r)==="array"){if(r.length<1||r.length>4)return[new dt(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const o={type:"number"};let A=[];for(let p=0;p<r.length;p++)A=A.concat(n.validateSpec({key:`${t}[${p}]`,value:r[p],validateSpec:n.validateSpec,valueSpec:o}));return A}return cs({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(n){const t=n.key,r=n.value,o=Vi(r),A=n.styleSpec;if(o!=="array"||r.length<1||r.length%2!=0)return[new dt(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let p=[];for(let m=0;m<r.length;m+=2)p=p.concat(qo({key:`${t}[${m}]`,value:r[m],valueSpec:A.layout_symbol["text-anchor"]})),p=p.concat(za({key:`${t}[${m+1}]`,value:r[m+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:A}));return p},sprite:Ur};function Na(n){const t=n.value,r=n.valueSpec,o=n.styleSpec;return n.validateSpec=Na,r.expression&&Lo(bn(t))?Rc(n):r.expression&&Ws(xa(t))?us(n):r.type&&Jo[r.type]?Jo[r.type](n):Kn(mn({},n,{valueSpec:r.type?o[r.type]:r}))}function Gc(n){const t=n.value,r=n.key,o=hs(n);return o.length||(t.indexOf("{fontstack}")===-1&&o.push(new dt(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&o.push(new dt(r,t,'"glyphs" url must include a "{range}" token'))),o}function Or(n,t=xe){let r=[];return r=r.concat(Na({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,validateSpec:Na,objectElementValidators:{glyphs:Gc,"*":()=>[]}})),n.constants&&(r=r.concat(ro({key:"constants",value:n.constants,style:n,styleSpec:t,validateSpec:Na}))),ao(r)}function Vr(n){return function(t){return n({...t,validateSpec:Na})}}function ao(n){return[].concat(n).sort((t,r)=>t.line-r.line)}function Pr(n){return function(...t){return ao(n.apply(this,t))}}Or.source=Pr(Vr(Ll)),Or.sprite=Pr(Vr(Ur)),Or.glyphs=Pr(Vr(Gc)),Or.light=Pr(Vr(Ho)),Or.sky=Pr(Vr(jo)),Or.terrain=Pr(Vr(zc)),Or.layer=Pr(Vr(Fc)),Or.filter=Pr(Vr(Ps)),Or.paintProperty=Pr(Vr(Lc)),Or.layoutProperty=Pr(Vr(Rl));const Rs=Or,Yo=Rs.light,vh=Rs.sky,Fl=Rs.paintProperty,Qu=Rs.layoutProperty;function Nc(n,t){let r=!1;if(t&&t.length)for(const o of t)n.fire(new rt(new Error(o.message))),r=!0;return r}class so{constructor(t,r,o){const A=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const m=new Int32Array(this.arrayBuffer);t=m[0],this.d=(r=m[1])+2*(o=m[2]);for(let B=0;B<this.d*this.d;B++){const S=m[3+B],M=m[3+B+1];A.push(S===M?null:m.subarray(S,M))}const x=m[3+A.length+1];this.keys=m.subarray(m[3+A.length],x),this.bboxes=m.subarray(x),this.insert=this._insertReadonly}else{this.d=r+2*o;for(let m=0;m<this.d*this.d;m++)A.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=o,this.scale=r/t,this.uid=0;const p=o/r*t;this.min=-p,this.max=t+p}insert(t,r,o,A,p){this._forEachCell(r,o,A,p,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(A),this.bboxes.push(p)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,o,A,p,m){this.cells[p].push(m)}query(t,r,o,A,p){const m=this.min,x=this.max;if(t<=m&&r<=m&&x<=o&&x<=A&&!p)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(t,r,o,A,this._queryCell,B,{},p),B}}_queryCell(t,r,o,A,p,m,x,B){const S=this.cells[p];if(S!==null){const M=this.keys,P=this.bboxes;for(let O=0;O<S.length;O++){const Y=S[O];if(x[Y]===void 0){const ne=4*Y;(B?B(P[ne+0],P[ne+1],P[ne+2],P[ne+3]):t<=P[ne+2]&&r<=P[ne+3]&&o>=P[ne+0]&&A>=P[ne+1])?(x[Y]=!0,m.push(M[Y])):x[Y]=!1}}}}_forEachCell(t,r,o,A,p,m,x,B){const S=this._convertToCellCoord(t),M=this._convertToCellCoord(r),P=this._convertToCellCoord(o),O=this._convertToCellCoord(A);for(let Y=S;Y<=P;Y++)for(let ne=M;ne<=O;ne++){const ae=this.d*ne+Y;if((!B||B(this._convertFromCellCoord(Y),this._convertFromCellCoord(ne),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(ne+1)))&&p.call(this,t,r,o,A,ae,m,x,B))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let o=0;for(let m=0;m<this.cells.length;m++)o+=this.cells[m].length;const A=new Int32Array(r+o+this.keys.length+this.bboxes.length);A[0]=this.extent,A[1]=this.n,A[2]=this.padding;let p=r;for(let m=0;m<t.length;m++){const x=t[m];A[3+m]=p,A.set(x,p),p+=x.length}return A[3+t.length]=p,A.set(this.keys,p),p+=this.keys.length,A[3+t.length+1]=p,A.set(this.bboxes,p),p+=this.bboxes.length,A.buffer}static serialize(t,r){const o=t.toArrayBuffer();return r&&r.push(o),{buffer:o}}static deserialize(t){return new so(t.buffer)}}const wa={};function Ut(n,t,r={}){if(wa[n])throw new Error(`${n} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:n,writeable:!1}),wa[n]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",so),Ut("Color",an),Ut("Error",Error),Ut("AJAXError",un),Ut("ResolvedImage",_r),Ut("StylePropertyFunction",Tr),Ut("StyleExpression",zo,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Xs),Ut("ZoomConstantExpression",No),Ut("CompoundExpression",ar,{omit:["_evaluate"]});for(const n in Ss)Ss[n]._classRegistryKey||Ut(`Expression_${n}`,Ss[n]);function Uc(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function Ko(n){return n.$name||n.constructor._classRegistryKey}function $o(n){return!function(t){if(t===null||typeof t!="object")return!1;const r=Ko(t);return!(!r||r==="Object")}(n)&&(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob||n instanceof Error||Uc(n)||vi(n)||ArrayBuffer.isView(n)||n instanceof ImageData)}function sa(n,t){if($o(n))return(Uc(n)||vi(n))&&t&&t.push(n),ArrayBuffer.isView(n)&&t&&t.push(n.buffer),n instanceof ImageData&&t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const p=[];for(const m of n)p.push(sa(m,t));return p}if(typeof n!="object")throw new Error("can't serialize object of type "+typeof n);const r=Ko(n);if(!r)throw new Error(`can't serialize object of unregistered class ${n.constructor.name}`);if(!wa[r])throw new Error(`${r} is not registered.`);const{klass:o}=wa[r],A=o.serialize?o.serialize(n,t):{};if(o.serialize){if(t&&A===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const p in n){if(!n.hasOwnProperty(p)||wa[r].omit.indexOf(p)>=0)continue;const m=n[p];A[p]=wa[r].shallow.indexOf(p)>=0?m:sa(m,t)}n instanceof Error&&(A.message=n.message)}if(A.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(A.$name=r),A}function oo(n){if($o(n))return n;if(Array.isArray(n))return n.map(oo);if(typeof n!="object")throw new Error("can't deserialize object of type "+typeof n);const t=Ko(n)||"Object";if(!wa[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=wa[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(n);const o=Object.create(r.prototype);for(const A of Object.keys(n)){if(A==="$name")continue;const p=n[A];o[A]=wa[t].shallow.indexOf(A)>=0?p:oo(p)}return o}class Oc{constructor(){this.first=!0}update(t,r){const o=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=o,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=o,!0):(this.lastFloorZoom>o?(this.lastIntegerZoom=o+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<o&&(this.lastIntegerZoom=o,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=o,!0))}}const Ii={"Latin-1 Supplement":n=>n>=128&&n<=255,"Hangul Jamo":n=>n>=4352&&n<=4607,Khmer:n=>n>=6016&&n<=6143,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Katakana:n=>n>=12448&&n<=12543,Kanbun:n=>n>=12688&&n<=12703,"CJK Strokes":n=>n>=12736&&n<=12783,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"Private Use Area":n=>n>=57344&&n<=63743,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function zl(n){for(const t of n)if(oa(t.charCodeAt(0)))return!0;return!1}function Su(n){for(const t of n)if(!Gl(t.charCodeAt(0)))return!1;return!0}function Vc(n){const t=n.map(r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(t.join("|"),"u")}const ku=Vc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Gl(n){return!ku.test(String.fromCodePoint(n))}const Ca=Vc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function oa(n){return!(n!==746&&n!==747&&(n<4352||!(Ii["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Ii["CJK Compatibility"](n)||Ii["CJK Strokes"](n)||!(!Ii["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||Ii["Enclosed CJK Letters and Months"](n)||Ii["Ideographic Description Characters"](n)||Ii.Kanbun(n)||Ii.Katakana(n)&&n!==12540||!(!Ii["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!Ii["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Ii["Vertical Forms"](n)||Ii["Yijing Hexagram Symbols"](n)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(n))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(n))||Ca.test(String.fromCodePoint(n)))))}function Nl(n){return!(oa(n)||function(t){return!!(Ii["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Ii["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Ii["Letterlike Symbols"](t)||Ii["Number Forms"](t)||Ii["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ii["Control Pictures"](t)&&t!==9251||Ii["Optical Character Recognition"](t)||Ii["Enclosed Alphanumerics"](t)||Ii["Geometric Shapes"](t)||Ii["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ii["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ii["CJK Symbols and Punctuation"](t)||Ii.Katakana(t)||Ii["Private Use Area"](t)||Ii["CJK Compatibility Forms"](t)||Ii["Small Form Variants"](t)||Ii["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(n))}const qc=Vc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Zo(n){return qc.test(String.fromCodePoint(n))}function Wo(n,t){return!(!t&&Zo(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Ii.Khmer(n))}function Hc(n){for(const t of n)if(Zo(t.charCodeAt(0)))return!0;return!1}const on=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(n){this.pluginStatus=n.pluginStatus,this.pluginURL=n.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(n){this.applyArabicShaping=n.applyArabicShaping,this.processBidirectionalText=n.processBidirectionalText,this.processStyledBidirectionalText=n.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class $i{constructor(t,r){this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oc,this.transition={})}isSupportedScript(t){return function(r,o){for(const A of r)if(!Wo(A.charCodeAt(0),o))return!1;return!0}(t,on.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),o=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*o}:{fromScale:.5,toScale:1,t:1-(1-o)*r}}}class Xo{constructor(t,r){this.property=t,this.value=r,this.expression=function(o,A){if(Lo(o))return new Tr(o,A);if(Ws(o)){const p=eo(o,A);if(p.result==="error")throw new Error(p.value.map(m=>`${m.key}: ${m.message}`).join(", "));return p.value}{let p=o;return A.type==="color"&&typeof o=="string"?p=an.parse(o):A.type!=="padding"||typeof o!="number"&&!Array.isArray(o)?A.type==="variableAnchorOffsetCollection"&&Array.isArray(o)&&(p=yr.parse(o)):p=mr.parse(o),{kind:"constant",evaluate:()=>p}}}(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,r,o){return this.property.possiblyEvaluate(this,t,r,o)}}class la{constructor(t){this.property=t,this.value=new Xo(t,void 0)}transitioned(t,r){return new el(this.property,this.value,r,Nt({},t.transition,this.transition),t.now)}untransitioned(){return new el(this.property,this.value,null,{},0)}}class Ul{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return mt(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new la(this._values[t].property)),this._values[t].value=new Xo(this._values[t].property,r===null?void 0:mt(r))}getTransition(t){return mt(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new la(this._values[t].property)),this._values[t].transition=mt(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const o=this.getValue(r);o!==void 0&&(t[r]=o);const A=this.getTransition(r);A!==void 0&&(t[`${r}-transition`]=A)}return t}transitioned(t,r){const o=new jc(this._properties);for(const A of Object.keys(this._values))o._values[A]=this._values[A].transitioned(t,r._values[A]);return o}untransitioned(){const t=new jc(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class el{constructor(t,r,o,A,p){this.property=t,this.value=r,this.begin=p+A.delay||0,this.end=this.begin+A.duration||0,t.specification.transition&&(A.delay||A.duration)&&(this.prior=o)}possiblyEvaluate(t,r,o){const A=t.now||0,p=this.value.possiblyEvaluate(t,r,o),m=this.prior;if(m){if(A>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(A<this.begin)return m.possiblyEvaluate(t,r,o);{const x=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(t,r,o),p,function(B){if(B<=0)return 0;if(B>=1)return 1;const S=B*B,M=S*B;return 4*(B<.5?M:3*(B-S)+M-.75)}(x))}}return p}}class jc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,o){const A=new lo(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].possiblyEvaluate(t,r,o);return A}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class tl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return mt(this._values[t].value)}setValue(t,r){this._values[t]=new Xo(this._values[t].property,r===null?void 0:mt(r))}serialize(){const t={};for(const r of Object.keys(this._values)){const o=this.getValue(r);o!==void 0&&(t[r]=o)}return t}possiblyEvaluate(t,r,o){const A=new lo(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].possiblyEvaluate(t,r,o);return A}}class or{constructor(t,r,o){this.property=t,this.value=r,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,o,A){return this.property.evaluate(this.value,this.parameters,t,r,o,A)}}class lo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ni{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,o){const A=Ln[this.specification.type];return A?A(t,r,o):t}}class Ai{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,o,A){return new or(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},o,A)}:t.expression,r)}interpolate(t,r,o){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new or(this,{kind:"constant",value:void 0},t.parameters);const A=Ln[this.specification.type];if(A){const p=A(t.value.value,r.value.value,o);return new or(this,{kind:"constant",value:p},t.parameters)}return t}evaluate(t,r,o,A,p,m){return t.kind==="constant"?t.value:t.evaluate(r,o,A,p,m)}}class il extends Ai{possiblyEvaluate(t,r,o,A){if(t.value===void 0)return new or(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const p=t.expression.evaluate(r,null,{},o,A),m=t.property.specification.type==="resolvedImage"&&typeof p!="string"?p.name:p,x=this._calculate(m,m,m,r);return new or(this,{kind:"constant",value:x},r)}if(t.expression.kind==="camera"){const p=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new or(this,{kind:"constant",value:p},r)}return new or(this,t.expression,r)}evaluate(t,r,o,A,p,m){if(t.kind==="source"){const x=t.evaluate(r,o,A,p,m);return this._calculate(x,x,x,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},o,A),t.evaluate({zoom:Math.floor(r.zoom)},o,A),t.evaluate({zoom:Math.floor(r.zoom)+1},o,A),r):t.value}_calculate(t,r,o,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:o,to:r}}interpolate(t){return t}}class Jc{constructor(t){this.specification=t}possiblyEvaluate(t,r,o,A){if(t.value!==void 0){if(t.expression.kind==="constant"){const p=t.expression.evaluate(r,null,{},o,A);return this._calculate(p,p,p,r)}return this._calculate(t.expression.evaluate(new $i(Math.floor(r.zoom-1),r)),t.expression.evaluate(new $i(Math.floor(r.zoom),r)),t.expression.evaluate(new $i(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,o,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:o,to:r}}interpolate(t){return t}}class qr{constructor(t){this.specification=t}possiblyEvaluate(t,r,o,A){return!!t.expression.evaluate(r,null,{},o,A)}interpolate(){return!1}}class Ir{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const o=t[r];o.specification.overridable&&this.overridableProperties.push(r);const A=this.defaultPropertyValues[r]=new Xo(o,void 0),p=this.defaultTransitionablePropertyValues[r]=new la(o);this.defaultTransitioningPropertyValues[r]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=A.possiblyEvaluate({})}}}Ut("DataDrivenProperty",Ai),Ut("DataConstantProperty",ni),Ut("CrossFadedDataDrivenProperty",il),Ut("CrossFadedProperty",Jc),Ut("ColorRampProperty",qr);const g="-transition";class e extends It{constructor(t,r){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),r.layout&&(this._unevaluatedLayout=new tl(r.layout)),r.paint)){this._transitionablePaint=new Ul(r.paint);for(const o in t.paint)this.setPaintProperty(o,t.paint[o],{validate:!1});for(const o in t.layout)this.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new lo(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,r,o={}){r!=null&&this._validate(Qu,`layers.${this.id}.layout.${t}`,t,r,o)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(g)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,o={}){if(r!=null&&this._validate(Fl,`layers.${this.id}.paint.${t}`,t,r,o))return!1;if(t.endsWith(g))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const A=this._transitionablePaint._values[t],p=A.property.specification["property-type"]==="cross-faded-data-driven",m=A.value.isDataDriven(),x=A.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const B=this._transitionablePaint._values[t].value;return B.isDataDriven()||m||p||this._handleOverridablePaintPropertyUpdate(t,x,B)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,o){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),zt(t,(r,o)=>!(r===void 0||o==="layout"&&!Object.keys(r).length||o==="paint"&&!Object.keys(r).length))}_validate(t,r,o,A,p={}){return(!p||p.validate!==!1)&&Nc(this,t.call(Rs,{key:r,layerType:this.type,objectKey:o,value:A,styleSpec:xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof or&&Ts(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}const a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class u{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class h{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function f(n,t=1){let r=0,o=0;return{members:n.map(A=>{const p=a[A.type].BYTES_PER_ELEMENT,m=r=C(r,Math.max(t,p)),x=A.components||1;return o=Math.max(o,p),r+=p*x,{name:A.name,type:A.type,components:x,offset:m}}),size:C(r,Math.max(o,t)),alignment:t}}function C(n,t){return Math.ceil(n/t)*t}class E extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,r)}emplace(t,r,o){const A=2*t;return this.int16[A+0]=r,this.int16[A+1]=o,t}}E.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",E);class Q extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,r,o)}emplace(t,r,o,A){const p=3*t;return this.int16[p+0]=r,this.int16[p+1]=o,this.int16[p+2]=A,t}}Q.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",Q);class D extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,r,o,A)}emplace(t,r,o,A,p){const m=4*t;return this.int16[m+0]=r,this.int16[m+1]=o,this.int16[m+2]=A,this.int16[m+3]=p,t}}D.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",D);class R extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,A,p,m)}emplace(t,r,o,A,p,m,x){const B=6*t;return this.int16[B+0]=r,this.int16[B+1]=o,this.int16[B+2]=A,this.int16[B+3]=p,this.int16[B+4]=m,this.int16[B+5]=x,t}}R.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",R);class z extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,A,p,m)}emplace(t,r,o,A,p,m,x){const B=4*t,S=8*t;return this.int16[B+0]=r,this.int16[B+1]=o,this.uint8[S+4]=A,this.uint8[S+5]=p,this.uint8[S+6]=m,this.uint8[S+7]=x,t}}z.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",z);class ee extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,r)}emplace(t,r,o){const A=2*t;return this.float32[A+0]=r,this.float32[A+1]=o,t}}ee.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",ee);class oe extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m,x,B,S,M){const P=this.length;return this.resize(P+1),this.emplace(P,t,r,o,A,p,m,x,B,S,M)}emplace(t,r,o,A,p,m,x,B,S,M,P){const O=10*t;return this.uint16[O+0]=r,this.uint16[O+1]=o,this.uint16[O+2]=A,this.uint16[O+3]=p,this.uint16[O+4]=m,this.uint16[O+5]=x,this.uint16[O+6]=B,this.uint16[O+7]=S,this.uint16[O+8]=M,this.uint16[O+9]=P,t}}oe.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",oe);class ce extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m,x,B,S,M,P,O){const Y=this.length;return this.resize(Y+1),this.emplace(Y,t,r,o,A,p,m,x,B,S,M,P,O)}emplace(t,r,o,A,p,m,x,B,S,M,P,O,Y){const ne=12*t;return this.int16[ne+0]=r,this.int16[ne+1]=o,this.int16[ne+2]=A,this.int16[ne+3]=p,this.uint16[ne+4]=m,this.uint16[ne+5]=x,this.uint16[ne+6]=B,this.uint16[ne+7]=S,this.int16[ne+8]=M,this.int16[ne+9]=P,this.int16[ne+10]=O,this.int16[ne+11]=Y,t}}ce.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",ce);class ve extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,r,o)}emplace(t,r,o,A){const p=3*t;return this.float32[p+0]=r,this.float32[p+1]=o,this.float32[p+2]=A,t}}ve.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",ve);class we extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}we.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",we);class Qe extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m,x,B,S){const M=this.length;return this.resize(M+1),this.emplace(M,t,r,o,A,p,m,x,B,S)}emplace(t,r,o,A,p,m,x,B,S,M){const P=10*t,O=5*t;return this.int16[P+0]=r,this.int16[P+1]=o,this.int16[P+2]=A,this.int16[P+3]=p,this.int16[P+4]=m,this.int16[P+5]=x,this.uint32[O+3]=B,this.uint16[P+8]=S,this.uint16[P+9]=M,t}}Qe.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",Qe);class Me extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,A,p,m)}emplace(t,r,o,A,p,m,x){const B=6*t;return this.int16[B+0]=r,this.int16[B+1]=o,this.int16[B+2]=A,this.int16[B+3]=p,this.int16[B+4]=m,this.int16[B+5]=x,t}}Me.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",Me);class fe extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p){const m=this.length;return this.resize(m+1),this.emplace(m,t,r,o,A,p)}emplace(t,r,o,A,p,m){const x=4*t,B=8*t;return this.float32[x+0]=r,this.float32[x+1]=o,this.float32[x+2]=A,this.int16[B+6]=p,this.int16[B+7]=m,t}}fe.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",fe);class Ne extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,o,A,p,m)}emplace(t,r,o,A,p,m,x){const B=16*t,S=4*t,M=8*t;return this.uint8[B+0]=r,this.uint8[B+1]=o,this.float32[S+1]=A,this.float32[S+2]=p,this.int16[M+6]=m,this.int16[M+7]=x,t}}Ne.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",Ne);class Ve extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,r,o)}emplace(t,r,o,A){const p=3*t;return this.uint16[p+0]=r,this.uint16[p+1]=o,this.uint16[p+2]=A,t}}Ve.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",Ve);class Je extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m,x,B,S,M,P,O,Y,ne,ae,_e,Be){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,t,r,o,A,p,m,x,B,S,M,P,O,Y,ne,ae,_e,Be)}emplace(t,r,o,A,p,m,x,B,S,M,P,O,Y,ne,ae,_e,Be,Ke){const ze=24*t,He=12*t,nt=48*t;return this.int16[ze+0]=r,this.int16[ze+1]=o,this.uint16[ze+2]=A,this.uint16[ze+3]=p,this.uint32[He+2]=m,this.uint32[He+3]=x,this.uint32[He+4]=B,this.uint16[ze+10]=S,this.uint16[ze+11]=M,this.uint16[ze+12]=P,this.float32[He+7]=O,this.float32[He+8]=Y,this.uint8[nt+36]=ne,this.uint8[nt+37]=ae,this.uint8[nt+38]=_e,this.uint32[He+10]=Be,this.int16[ze+22]=Ke,t}}Je.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Je);class At extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o,A,p,m,x,B,S,M,P,O,Y,ne,ae,_e,Be,Ke,ze,He,nt,wt,jt,mi,qt,Gt,si,Wt){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,t,r,o,A,p,m,x,B,S,M,P,O,Y,ne,ae,_e,Be,Ke,ze,He,nt,wt,jt,mi,qt,Gt,si,Wt)}emplace(t,r,o,A,p,m,x,B,S,M,P,O,Y,ne,ae,_e,Be,Ke,ze,He,nt,wt,jt,mi,qt,Gt,si,Wt,Kt){const ht=32*t,li=16*t;return this.int16[ht+0]=r,this.int16[ht+1]=o,this.int16[ht+2]=A,this.int16[ht+3]=p,this.int16[ht+4]=m,this.int16[ht+5]=x,this.int16[ht+6]=B,this.int16[ht+7]=S,this.uint16[ht+8]=M,this.uint16[ht+9]=P,this.uint16[ht+10]=O,this.uint16[ht+11]=Y,this.uint16[ht+12]=ne,this.uint16[ht+13]=ae,this.uint16[ht+14]=_e,this.uint16[ht+15]=Be,this.uint16[ht+16]=Ke,this.uint16[ht+17]=ze,this.uint16[ht+18]=He,this.uint16[ht+19]=nt,this.uint16[ht+20]=wt,this.uint16[ht+21]=jt,this.uint16[ht+22]=mi,this.uint32[li+12]=qt,this.float32[li+13]=Gt,this.float32[li+14]=si,this.uint16[ht+30]=Wt,this.uint16[ht+31]=Kt,t}}At.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",At);class Ct extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}Ct.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Ct);class Ft extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,r,o)}emplace(t,r,o,A){const p=3*t;return this.uint16[6*t+0]=r,this.float32[p+1]=o,this.float32[p+2]=A,t}}Ft.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Ft);class Ht extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,o){const A=this.length;return this.resize(A+1),this.emplace(A,t,r,o)}emplace(t,r,o,A){const p=4*t;return this.uint32[2*t+0]=r,this.uint16[p+2]=o,this.uint16[p+3]=A,t}}Ht.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",Ht);class Lt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,r)}emplace(t,r,o){const A=2*t;return this.uint16[A+0]=r,this.uint16[A+1]=o,t}}Lt.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",Lt);class Mt extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}Mt.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",Mt);class ei extends h{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,o,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,r,o,A)}emplace(t,r,o,A,p){const m=4*t;return this.float32[m+0]=r,this.float32[m+1]=o,this.float32[m+2]=A,this.float32[m+3]=p,t}}ei.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",ei);class bi extends u{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new q(this.anchorPointX,this.anchorPointY)}}bi.prototype.size=20;class b extends Qe{get(t){return new bi(this,t)}}Ut("CollisionBoxArray",b);class I extends u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}I.prototype.size=48;class y extends Je{get(t){return new I(this,t)}}Ut("PlacedSymbolArray",y);class k extends u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}k.prototype.size=64;class T extends At{get(t){return new k(this,t)}}Ut("SymbolInstanceArray",T);class F extends Ct{getoffsetX(t){return this.float32[1*t+0]}}Ut("GlyphOffsetArray",F);class $ extends Q{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ut("SymbolLineVertexArray",$);class N extends u{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}N.prototype.size=12;class re extends Ft{get(t){return new N(this,t)}}Ut("TextAnchorOffsetArray",re);class K extends u{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class Z extends Ht{get(t){return new K(this,t)}}Ut("FeatureIndexArray",Z);class ge extends E{}class se extends E{}class X extends E{}class be extends R{}class Ce extends z{}class ke extends ee{}class Re extends oe{}class qe extends ce{}class Pe extends ve{}class $e extends we{}class te extends Me{}class U extends Ne{}class he extends Ve{}class le extends Lt{}const ue=f([{name:"a_pos",components:2,type:"Int16"}],4),{members:de}=ue;class Te{constructor(t=[]){this.segments=t}prepareSegment(t,r,o,A){let p=this.segments[this.segments.length-1];return t>Te.MAX_VERTEX_ARRAY_LENGTH&&yt(`Max vertices per segment is ${Te.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!p||p.vertexLength+t>Te.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==A)&&(p={vertexOffset:r.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},A!==void 0&&(p.sortKey=A),this.segments.push(p)),p}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,o,A){return new Te([{vertexOffset:t,primitiveOffset:r,vertexLength:o,primitiveLength:A,vaos:{},sortKey:0}])}}function De(n,t){return 256*(n=Pt(Math.floor(n),0,255))+Pt(Math.floor(t),0,255)}Te.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Te);const Ge=f([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var et={exports:{}},lt={exports:{}};lt.exports=function(n,t){var r,o,A,p,m,x,B,S;for(o=n.length-(r=3&n.length),A=t,m=3432918353,x=461845907,S=0;S<o;)B=255&n.charCodeAt(S)|(255&n.charCodeAt(++S))<<8|(255&n.charCodeAt(++S))<<16|(255&n.charCodeAt(++S))<<24,++S,A=27492+(65535&(p=5*(65535&(A=(A^=B=(65535&(B=(B=(65535&B)*m+(((B>>>16)*m&65535)<<16)&4294967295)<<15|B>>>17))*x+(((B>>>16)*x&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(p>>>16)&65535)<<16);switch(B=0,r){case 3:B^=(255&n.charCodeAt(S+2))<<16;case 2:B^=(255&n.charCodeAt(S+1))<<8;case 1:A^=B=(65535&(B=(B=(65535&(B^=255&n.charCodeAt(S)))*m+(((B>>>16)*m&65535)<<16)&4294967295)<<15|B>>>17))*x+(((B>>>16)*x&65535)<<16)&4294967295}return A^=n.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0};var ct=lt.exports,vt={exports:{}};vt.exports=function(n,t){for(var r,o=n.length,A=t^o,p=0;o>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(p)|(255&n.charCodeAt(++p))<<8|(255&n.charCodeAt(++p))<<16|(255&n.charCodeAt(++p))<<24))+((1540483477*(r>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),o-=4,++p;switch(o){case 3:A^=(255&n.charCodeAt(p+2))<<16;case 2:A^=(255&n.charCodeAt(p+1))<<8;case 1:A=1540483477*(65535&(A^=255&n.charCodeAt(p)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0};var Tt=ct,at=vt.exports;et.exports=Tt,et.exports.murmur3=Tt,et.exports.murmur2=at;var Ze=V(et.exports);class pt{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,o,A){this.ids.push(Zt(t)),this.positions.push(r,o,A)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=Zt(t);let o=0,A=this.ids.length-1;for(;o<A;){const m=o+A>>1;this.ids[m]>=r?A=m:o=m+1}const p=[];for(;this.ids[o]===r;)p.push({index:this.positions[3*o],start:this.positions[3*o+1],end:this.positions[3*o+2]}),o++;return p}static serialize(t,r){const o=new Float64Array(t.ids),A=new Uint32Array(t.positions);return St(o,A,0,o.length-1),r&&r.push(o.buffer,A.buffer),{ids:o,positions:A}}static deserialize(t){const r=new pt;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function Zt(n){const t=+n;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Ze(String(n))}function St(n,t,r,o){for(;r<o;){const A=n[r+o>>1];let p=r-1,m=o+1;for(;;){do p++;while(n[p]<A);do m--;while(n[m]>A);if(p>=m)break;ai(n,p,m),ai(t,3*p,3*m),ai(t,3*p+1,3*m+1),ai(t,3*p+2,3*m+2)}m-r<o-m?(St(n,t,r,m),r=m+1):(St(n,t,m+1,o),o=m)}}function ai(n,t,r){const o=n[t];n[t]=n[r],n[r]=o}Ut("FeaturePositionMap",pt);class kt{constructor(t,r){this.gl=t.gl,this.location=r}}class ti extends kt{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class $t extends kt{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class ci extends kt{constructor(t,r){super(t,r),this.current=an.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Yt=new Float32Array(16);function Ki(n){return[De(255*n.r,255*n.g),De(255*n.b,255*n.a)]}class Ti{constructor(t,r,o){this.value=t,this.uniformNames=r.map(A=>`u_${A}`),this.type=o}setUniform(t,r,o){t.set(o.constantOr(this.value))}getBinding(t,r,o){return this.type==="color"?new ci(t,r):new ti(t,r)}}class Gi{constructor(t,r){this.uniformNames=r.map(o=>`u_${o}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,o,A){const p=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&t.set(p)}getBinding(t,r,o){return o.substr(0,9)==="u_pattern"?new $t(t,r):new ti(t,r)}}class Pi{constructor(t,r,o,A){this.expression=t,this.type=o,this.maxValue=0,this.paintVertexAttributes=r.map(p=>({name:`a_${p}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new A}populatePaintArray(t,r,o,A,p){const m=this.paintVertexArray.length,x=this.expression.evaluate(new $i(0),r,{},A,[],p);this.paintVertexArray.resize(t),this._setPaintValue(m,t,x)}updatePaintArray(t,r,o,A){const p=this.expression.evaluate({zoom:0},o,A);this._setPaintValue(t,r,p)}_setPaintValue(t,r,o){if(this.type==="color"){const A=Ki(o);for(let p=t;p<r;p++)this.paintVertexArray.emplace(p,A[0],A[1])}else{for(let A=t;A<r;A++)this.paintVertexArray.emplace(A,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qn{constructor(t,r,o,A,p,m){this.expression=t,this.uniformNames=r.map(x=>`u_${x}_t`),this.type=o,this.useIntegerZoom=A,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=r.map(x=>({name:`a_${x}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(t,r,o,A,p){const m=this.expression.evaluate(new $i(this.zoom),r,{},A,[],p),x=this.expression.evaluate(new $i(this.zoom+1),r,{},A,[],p),B=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(B,t,m,x)}updatePaintArray(t,r,o,A){const p=this.expression.evaluate({zoom:this.zoom},o,A),m=this.expression.evaluate({zoom:this.zoom+1},o,A);this._setPaintValue(t,r,p,m)}_setPaintValue(t,r,o,A){if(this.type==="color"){const p=Ki(o),m=Ki(A);for(let x=t;x<r;x++)this.paintVertexArray.emplace(x,p[0],p[1],m[0],m[1])}else{for(let p=t;p<r;p++)this.paintVertexArray.emplace(p,o,A);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(A))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const o=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,A=Pt(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(A)}getBinding(t,r,o){return new ti(t,r)}}class br{constructor(t,r,o,A,p,m){this.expression=t,this.type=r,this.useIntegerZoom=o,this.zoom=A,this.layerId=m,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p}populatePaintArray(t,r,o){const A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(A,t,r.patterns&&r.patterns[this.layerId],o)}updatePaintArray(t,r,o,A,p){this._setPaintValues(t,r,o.patterns&&o.patterns[this.layerId],p)}_setPaintValues(t,r,o,A){if(!A||!o)return;const{min:p,mid:m,max:x}=o,B=A[p],S=A[m],M=A[x];if(B&&S&&M)for(let P=t;P<r;P++)this.zoomInPaintVertexArray.emplace(P,S.tl[0],S.tl[1],S.br[0],S.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],S.pixelRatio,B.pixelRatio),this.zoomOutPaintVertexArray.emplace(P,S.tl[0],S.tl[1],S.br[0],S.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],S.pixelRatio,M.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ge.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ge.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class co{constructor(t,r,o){this.binders={},this._buffers=[];const A=[];for(const p in t.paint._values){if(!o(p))continue;const m=t.paint.get(p);if(!(m instanceof or&&Ts(m.property.specification)))continue;const x=Ls(p,t.type),B=m.value,S=m.property.specification.type,M=m.property.useIntegerZoom,P=m.property.specification["property-type"],O=P==="cross-faded"||P==="cross-faded-data-driven";if(B.kind==="constant")this.binders[p]=O?new Gi(B.value,x):new Ti(B.value,x,S),A.push(`/u_${p}`);else if(B.kind==="source"||O){const Y=Fs(p,S,"source");this.binders[p]=O?new br(B,S,M,r,Y,t.id):new Pi(B,x,S,Y),A.push(`/a_${p}`)}else{const Y=Fs(p,S,"composite");this.binders[p]=new qn(B,x,S,M,r,Y),A.push(`/z_${p}`)}}this.cacheKey=A.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof Pi||r instanceof qn?r.maxValue:0}populatePaintArrays(t,r,o,A,p){for(const m in this.binders){const x=this.binders[m];(x instanceof Pi||x instanceof qn||x instanceof br)&&x.populatePaintArray(t,r,o,A,p)}}setConstantPatternPositions(t,r){for(const o in this.binders){const A=this.binders[o];A instanceof Gi&&A.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,o,A,p){let m=!1;for(const x in t){const B=r.getPositions(x);for(const S of B){const M=o.feature(S.index);for(const P in this.binders){const O=this.binders[P];if((O instanceof Pi||O instanceof qn||O instanceof br)&&O.expression.isStateDependent===!0){const Y=A.paint.get(P);O.expression=Y.value,O.updatePaintArray(S.start,S.end,M,t[x],p),m=!0}}}}return m}defines(){const t=[];for(const r in this.binders){const o=this.binders[r];(o instanceof Ti||o instanceof Gi)&&t.push(...o.uniformNames.map(A=>`#define HAS_UNIFORM_${A}`))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof Pi||o instanceof qn)for(let A=0;A<o.paintVertexAttributes.length;A++)t.push(o.paintVertexAttributes[A].name);else if(o instanceof br)for(let A=0;A<Ge.members.length;A++)t.push(Ge.members[A].name)}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof Ti||o instanceof Gi||o instanceof qn)for(const A of o.uniformNames)t.push(A)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const o=[];for(const A in this.binders){const p=this.binders[A];if(p instanceof Ti||p instanceof Gi||p instanceof qn){for(const m of p.uniformNames)if(r[m]){const x=p.getBinding(t,r[m],m);o.push({name:m,property:A,binding:x})}}}return o}setUniforms(t,r,o,A){for(const{name:p,property:m,binding:x}of r)this.binders[m].setUniform(x,A,o.get(m),p)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const o=this.binders[r];if(t&&o instanceof br){const A=t.fromScale===2?o.zoomInPaintVertexBuffer:o.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(o instanceof Pi||o instanceof qn)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(t){for(const r in this.binders){const o=this.binders[r];(o instanceof Pi||o instanceof qn||o instanceof br)&&o.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof Pi||r instanceof qn||r instanceof br)&&r.destroy()}}}class _i{constructor(t,r,o=()=>!0){this.programConfigurations={};for(const A of t)this.programConfigurations[A.id]=new co(A,r,o);this.needsUpload=!1,this._featureMap=new pt,this._bufferOffset=0}populatePaintArrays(t,r,o,A,p,m){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(t,r,A,p,m);r.id!==void 0&&this._featureMap.add(r.id,o,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,o,A){for(const p of o)this.needsUpload=this.programConfigurations[p.id].updatePaintArrays(t,this._featureMap,r,p,A)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ls(n,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}function Fs(n,t,r){const o={color:{source:ee,composite:ei},number:{source:Ct,composite:ee}},A=function(p){return{"line-pattern":{source:Re,composite:Re},"fill-pattern":{source:Re,composite:Re},"fill-extrusion-pattern":{source:Re,composite:Re}}[p]}(n);return A&&A[r]||o[t][r]}Ut("ConstantBinder",Ti),Ut("CrossFadedConstantBinder",Gi),Ut("SourceExpressionBinder",Pi),Ut("CrossFadedCompositeBinder",br),Ut("CompositeExpressionBinder",qn),Ut("ProgramConfiguration",co,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",_i);const Fn=8192,Ol=Math.pow(2,14)-1,Rr=-Ol-1;function Ua(n){const t=Fn/n.extent,r=n.loadGeometry();for(let o=0;o<r.length;o++){const A=r[o];for(let p=0;p<A.length;p++){const m=A[p],x=Math.round(m.x*t),B=Math.round(m.y*t);m.x=Pt(x,Rr,Ol),m.y=Pt(B,Rr,Ol),(x<m.x||x>m.x+1||B<m.y||B>m.y+1)&&yt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function nl(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?Ua(n):[]}}function Du(n,t,r,o,A){n.emplaceBack(2*t+(o+1)/2,2*r+(A+1)/2)}class Vl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new se,this.indexArray=new he,this.segments=new Te,this.programConfigurations=new _i(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,o){const A=this.layers[0],p=[];let m=null,x=!1;A.type==="circle"&&(m=A.layout.get("circle-sort-key"),x=!m.isConstant());for(const{feature:B,id:S,index:M,sourceLayerIndex:P}of t){const O=this.layers[0]._featureFilter.needGeometry,Y=nl(B,O);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),Y,o))continue;const ne=x?m.evaluate(Y,{},o):void 0,ae={id:S,properties:B.properties,type:B.type,sourceLayerIndex:P,index:M,geometry:O?Y.geometry:Ua(B),patterns:{},sortKey:ne};p.push(ae)}x&&p.sort((B,S)=>B.sortKey-S.sortKey);for(const B of p){const{geometry:S,index:M,sourceLayerIndex:P}=B,O=t[M].feature;this.addFeature(B,S,M,o),r.featureIndex.insert(O,S,M,P,this.index)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,de),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,o,A){for(const p of r)for(const m of p){const x=m.x,B=m.y;if(x<0||x>=Fn||B<0||B>=Fn)continue;const S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=S.vertexLength;Du(this.layoutVertexArray,x,B,-1,-1),Du(this.layoutVertexArray,x,B,1,-1),Du(this.layoutVertexArray,x,B,1,1),Du(this.layoutVertexArray,x,B,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),S.vertexLength+=4,S.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,{},A)}}function Oa(n,t){for(let r=0;r<n.length;r++)if(Mu(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(Mu(n,t[r]))return!0;return!!Rd(n,t)}function Ba(n,t,r){return!!Mu(n,t)||!!Ld(t,n,r)}function Ih(n,t){if(n.length===1)return sp(t,n[0]);for(let r=0;r<t.length;r++){const o=t[r];for(let A=0;A<o.length;A++)if(Mu(n,o[A]))return!0}for(let r=0;r<n.length;r++)if(sp(t,n[r]))return!0;for(let r=0;r<t.length;r++)if(Rd(n,t[r]))return!0;return!1}function bh(n,t,r){if(n.length>1){if(Rd(n,t))return!0;for(let o=0;o<t.length;o++)if(Ld(t[o],n,r))return!0}for(let o=0;o<n.length;o++)if(Ld(n[o],t,r))return!0;return!1}function Rd(n,t){if(n.length===0||t.length===0)return!1;for(let r=0;r<n.length-1;r++){const o=n[r],A=n[r+1];for(let p=0;p<t.length-1;p++)if(gI(o,A,t[p],t[p+1]))return!0}return!1}function gI(n,t,r,o){return Jt(n,r,o)!==Jt(t,r,o)&&Jt(n,t,r)!==Jt(n,t,o)}function Ld(n,t,r){const o=r*r;if(t.length===1)return n.distSqr(t[0])<o;for(let A=1;A<t.length;A++)if(ap(n,t[A-1],t[A])<o)return!0;return!1}function ap(n,t,r){const o=t.distSqr(r);if(o===0)return n.distSqr(t);const A=((n.x-t.x)*(r.x-t.x)+(n.y-t.y)*(r.y-t.y))/o;return n.distSqr(A<0?t:A>1?r:r.sub(t)._mult(A)._add(t))}function sp(n,t){let r,o,A,p=!1;for(let m=0;m<n.length;m++){r=n[m];for(let x=0,B=r.length-1;x<r.length;B=x++)o=r[x],A=r[B],o.y>t.y!=A.y>t.y&&t.x<(A.x-o.x)*(t.y-o.y)/(A.y-o.y)+o.x&&(p=!p)}return p}function Mu(n,t){let r=!1;for(let o=0,A=n.length-1;o<n.length;A=o++){const p=n[o],m=n[A];p.y>t.y!=m.y>t.y&&t.x<(m.x-p.x)*(t.y-p.y)/(m.y-p.y)+p.x&&(r=!r)}return r}function pI(n,t,r){const o=r[0],A=r[2];if(n.x<o.x&&t.x<o.x||n.x>A.x&&t.x>A.x||n.y<o.y&&t.y<o.y||n.y>A.y&&t.y>A.y)return!1;const p=Jt(n,t,r[0]);return p!==Jt(n,t,r[1])||p!==Jt(n,t,r[2])||p!==Jt(n,t,r[3])}function xh(n,t,r){const o=t.paint.get(n).value;return o.kind==="constant"?o.value:r.programConfigurations.get(t.id).getMaxValue(n)}function _A(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function vA(n,t,r,o,A){if(!t[0]&&!t[1])return n;const p=q.convert(t)._mult(A);r==="viewport"&&p._rotate(-o);const m=[];for(let x=0;x<n.length;x++)m.push(n[x].sub(p));return m}let op,lp;Ut("CircleBucket",Vl,{omit:["layers"]});var mI={get paint(){return lp=lp||new Ir({"circle-radius":new Ai(xe.paint_circle["circle-radius"]),"circle-color":new Ai(xe.paint_circle["circle-color"]),"circle-blur":new Ai(xe.paint_circle["circle-blur"]),"circle-opacity":new Ai(xe.paint_circle["circle-opacity"]),"circle-translate":new ni(xe.paint_circle["circle-translate"]),"circle-translate-anchor":new ni(xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ni(xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ni(xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ai(xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ai(xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ai(xe.paint_circle["circle-stroke-opacity"])})},get layout(){return op=op||new Ir({"circle-sort-key":new Ai(xe.layout_circle["circle-sort-key"])})}},Hr=1e-6,Tu=typeof Float32Array<"u"?Float32Array:Array;function Fd(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function cp(n,t,r){var o=t[0],A=t[1],p=t[2],m=t[3],x=t[4],B=t[5],S=t[6],M=t[7],P=t[8],O=t[9],Y=t[10],ne=t[11],ae=t[12],_e=t[13],Be=t[14],Ke=t[15],ze=r[0],He=r[1],nt=r[2],wt=r[3];return n[0]=ze*o+He*x+nt*P+wt*ae,n[1]=ze*A+He*B+nt*O+wt*_e,n[2]=ze*p+He*S+nt*Y+wt*Be,n[3]=ze*m+He*M+nt*ne+wt*Ke,n[4]=(ze=r[4])*o+(He=r[5])*x+(nt=r[6])*P+(wt=r[7])*ae,n[5]=ze*A+He*B+nt*O+wt*_e,n[6]=ze*p+He*S+nt*Y+wt*Be,n[7]=ze*m+He*M+nt*ne+wt*Ke,n[8]=(ze=r[8])*o+(He=r[9])*x+(nt=r[10])*P+(wt=r[11])*ae,n[9]=ze*A+He*B+nt*O+wt*_e,n[10]=ze*p+He*S+nt*Y+wt*Be,n[11]=ze*m+He*M+nt*ne+wt*Ke,n[12]=(ze=r[12])*o+(He=r[13])*x+(nt=r[14])*P+(wt=r[15])*ae,n[13]=ze*A+He*B+nt*O+wt*_e,n[14]=ze*p+He*S+nt*Y+wt*Be,n[15]=ze*m+He*M+nt*ne+wt*Ke,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var wh,yI=cp;function IA(n,t,r){var o=t[0],A=t[1],p=t[2],m=t[3];return n[0]=r[0]*o+r[4]*A+r[8]*p+r[12]*m,n[1]=r[1]*o+r[5]*A+r[9]*p+r[13]*m,n[2]=r[2]*o+r[6]*A+r[10]*p+r[14]*m,n[3]=r[3]*o+r[7]*A+r[11]*p+r[15]*m,n}wh=new Tu(4),Tu!=Float32Array&&(wh[0]=0,wh[1]=0,wh[2]=0,wh[3]=0);class _I extends e{constructor(t){super(t,mI)}createBucket(t){return new Vl(t)}queryRadius(t){const r=t;return xh("circle-radius",this,r)+xh("circle-stroke-width",this,r)+_A(this.paint.get("circle-translate"))}queryIntersectsFeature(t,r,o,A,p,m,x,B){const S=vA(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,x),M=this.paint.get("circle-radius").evaluate(r,o)+this.paint.get("circle-stroke-width").evaluate(r,o),P=this.paint.get("circle-pitch-alignment")==="map",O=P?S:function(ne,ae){return ne.map(_e=>up(_e,ae))}(S,B),Y=P?M*x:M;for(const ne of A)for(const ae of ne){const _e=P?ae:up(ae,B);let Be=Y;const Ke=IA([],[ae.x,ae.y,0,1],B);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Ke[3]/m.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=m.cameraToCenterDistance/Ke[3]),Ba(O,_e,Be))return!0}return!1}}function up(n,t){const r=IA([],[n.x,n.y,0,1],t);return new q(r[0]/r[3],r[1]/r[3])}class hp extends Vl{}let Ap;Ut("HeatmapBucket",hp,{omit:["layers"]});var vI={get paint(){return Ap=Ap||new Ir({"heatmap-radius":new Ai(xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ai(xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ni(xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qr(xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ni(xe.paint_heatmap["heatmap-opacity"])})}};function zd(n,{width:t,height:r},o,A){if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==t*r*o)throw new RangeError(`mismatched image size. expected: ${A.length} but got: ${t*r*o}`)}else A=new Uint8Array(t*r*o);return n.width=t,n.height=r,n.data=A,n}function dp(n,{width:t,height:r},o){if(t===n.width&&r===n.height)return;const A=zd({},{width:t,height:r},o);Gd(n,A,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,t),height:Math.min(n.height,r)},o),n.width=t,n.height=r,n.data=A.data}function Gd(n,t,r,o,A,p){if(A.width===0||A.height===0)return t;if(A.width>n.width||A.height>n.height||r.x>n.width-A.width||r.y>n.height-A.height)throw new RangeError("out of range source coordinates for image copy");if(A.width>t.width||A.height>t.height||o.x>t.width-A.width||o.y>t.height-A.height)throw new RangeError("out of range destination coordinates for image copy");const m=n.data,x=t.data;if(m===x)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<A.height;B++){const S=((r.y+B)*n.width+r.x)*p,M=((o.y+B)*t.width+o.x)*p;for(let P=0;P<A.width*p;P++)x[M+P]=m[S+P]}return t}class Ch{constructor(t,r){zd(this,t,1,r)}resize(t){dp(this,t,1)}clone(){return new Ch({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,o,A,p){Gd(t,r,o,A,p,1)}}class Va{constructor(t,r){zd(this,t,4,r)}resize(t){dp(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Va({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,o,A,p){Gd(t,r,o,A,p,4)}}function fp(n){const t={},r=n.resolution||256,o=n.clips?n.clips.length:1,A=n.image||new Va({width:r,height:o});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const p=(m,x,B)=>{t[n.evaluationKey]=B;const S=n.expression.evaluate(t);A.data[m+x+0]=Math.floor(255*S.r/S.a),A.data[m+x+1]=Math.floor(255*S.g/S.a),A.data[m+x+2]=Math.floor(255*S.b/S.a),A.data[m+x+3]=Math.floor(255*S.a)};if(n.clips)for(let m=0,x=0;m<o;++m,x+=4*r)for(let B=0,S=0;B<r;B++,S+=4){const M=B/(r-1),{start:P,end:O}=n.clips[m];p(x,S,P*(1-M)+O*M)}else for(let m=0,x=0;m<r;m++,x+=4)p(0,x,m/(r-1));return A}Ut("AlphaImage",Ch),Ut("RGBAImage",Va);const Nd="big-fb";class II extends e{createBucket(t){return new hp(t)}constructor(t){super(t,vI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Nd)&&this.heatmapFbos.delete(Nd)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gp;var bI={get paint(){return gp=gp||new Ir({"hillshade-illumination-direction":new ni(xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ni(xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ni(xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ni(xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ni(xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ni(xe.paint_hillshade["hillshade-accent-color"])})}};class xI extends e{constructor(t){super(t,bI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const wI=f([{name:"a_pos",components:2,type:"Int16"}],4),{members:CI}=wI;function pp(n,t,r=2){const o=t&&t.length,A=o?t[0]*r:n.length;let p=mp(n,0,A,r,!0);const m=[];if(!p||p.next===p.prev)return m;let x,B,S;if(o&&(p=function(M,P,O,Y){const ne=[];for(let ae=0,_e=P.length;ae<_e;ae++){const Be=mp(M,P[ae]*Y,ae<_e-1?P[ae+1]*Y:M.length,Y,!1);Be===Be.next&&(Be.steiner=!0),ne.push(TI(Be))}ne.sort(kI);for(let ae=0;ae<ne.length;ae++)O=DI(ne[ae],O);return O}(n,t,p,r)),n.length>80*r){x=1/0,B=1/0;let M=-1/0,P=-1/0;for(let O=r;O<A;O+=r){const Y=n[O],ne=n[O+1];Y<x&&(x=Y),ne<B&&(B=ne),Y>M&&(M=Y),ne>P&&(P=ne)}S=Math.max(M-x,P-B),S=S!==0?32767/S:0}return Bh(p,m,r,x,B,S,0),m}function mp(n,t,r,o,A){let p;if(A===function(m,x,B,S){let M=0;for(let P=x,O=B-S;P<B;P+=S)M+=(m[O]-m[P])*(m[P+1]+m[O+1]),O=P;return M}(n,t,r,o)>0)for(let m=t;m<r;m+=o)p=vp(m/o|0,n[m],n[m+1],p);else for(let m=r-o;m>=t;m-=o)p=vp(m/o|0,n[m],n[m+1],p);return p&&bA(p,p.next)&&(Qh(p),p=p.next),p}function Yc(n,t){if(!n)return n;t||(t=n);let r,o=n;do if(r=!1,o.steiner||!bA(o,o.next)&&$n(o.prev,o,o.next)!==0)o=o.next;else{if(Qh(o),o=t=o.prev,o===o.next)break;r=!0}while(r||o!==t);return t}function Bh(n,t,r,o,A,p,m){if(!n)return;!m&&p&&function(B,S,M,P){let O=B;do O.z===0&&(O.z=Ud(O.x,O.y,S,M,P)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==B);O.prevZ.nextZ=null,O.prevZ=null,function(Y){let ne,ae=1;do{let _e,Be=Y;Y=null;let Ke=null;for(ne=0;Be;){ne++;let ze=Be,He=0;for(let wt=0;wt<ae&&(He++,ze=ze.nextZ,ze);wt++);let nt=ae;for(;He>0||nt>0&&ze;)He!==0&&(nt===0||!ze||Be.z<=ze.z)?(_e=Be,Be=Be.nextZ,He--):(_e=ze,ze=ze.nextZ,nt--),Ke?Ke.nextZ=_e:Y=_e,_e.prevZ=Ke,Ke=_e;Be=ze}Ke.nextZ=null,ae*=2}while(ne>1)}(O)}(n,o,A,p);let x=n;for(;n.prev!==n.next;){const B=n.prev,S=n.next;if(p?EI(n,o,A,p):BI(n))t.push(B.i,n.i,S.i),Qh(n),n=S.next,x=S.next;else if((n=S)===x){m?m===1?Bh(n=QI(Yc(n),t),t,r,o,A,p,2):m===2&&SI(n,t,r,o,A,p):Bh(Yc(n),t,r,o,A,p,1);break}}}function BI(n){const t=n.prev,r=n,o=n.next;if($n(t,r,o)>=0)return!1;const A=t.x,p=r.x,m=o.x,x=t.y,B=r.y,S=o.y,M=A<p?A<m?A:m:p<m?p:m,P=x<B?x<S?x:S:B<S?B:S,O=A>p?A>m?A:m:p>m?p:m,Y=x>B?x>S?x:S:B>S?B:S;let ne=o.next;for(;ne!==t;){if(ne.x>=M&&ne.x<=O&&ne.y>=P&&ne.y<=Y&&Pu(A,x,p,B,m,S,ne.x,ne.y)&&$n(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}function EI(n,t,r,o){const A=n.prev,p=n,m=n.next;if($n(A,p,m)>=0)return!1;const x=A.x,B=p.x,S=m.x,M=A.y,P=p.y,O=m.y,Y=x<B?x<S?x:S:B<S?B:S,ne=M<P?M<O?M:O:P<O?P:O,ae=x>B?x>S?x:S:B>S?B:S,_e=M>P?M>O?M:O:P>O?P:O,Be=Ud(Y,ne,t,r,o),Ke=Ud(ae,_e,t,r,o);let ze=n.prevZ,He=n.nextZ;for(;ze&&ze.z>=Be&&He&&He.z<=Ke;){if(ze.x>=Y&&ze.x<=ae&&ze.y>=ne&&ze.y<=_e&&ze!==A&&ze!==m&&Pu(x,M,B,P,S,O,ze.x,ze.y)&&$n(ze.prev,ze,ze.next)>=0||(ze=ze.prevZ,He.x>=Y&&He.x<=ae&&He.y>=ne&&He.y<=_e&&He!==A&&He!==m&&Pu(x,M,B,P,S,O,He.x,He.y)&&$n(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;ze&&ze.z>=Be;){if(ze.x>=Y&&ze.x<=ae&&ze.y>=ne&&ze.y<=_e&&ze!==A&&ze!==m&&Pu(x,M,B,P,S,O,ze.x,ze.y)&&$n(ze.prev,ze,ze.next)>=0)return!1;ze=ze.prevZ}for(;He&&He.z<=Ke;){if(He.x>=Y&&He.x<=ae&&He.y>=ne&&He.y<=_e&&He!==A&&He!==m&&Pu(x,M,B,P,S,O,He.x,He.y)&&$n(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function QI(n,t){let r=n;do{const o=r.prev,A=r.next.next;!bA(o,A)&&yp(o,r,r.next,A)&&Eh(o,A)&&Eh(A,o)&&(t.push(o.i,r.i,A.i),Qh(r),Qh(r.next),r=n=A),r=r.next}while(r!==n);return Yc(r)}function SI(n,t,r,o,A,p){let m=n;do{let x=m.next.next;for(;x!==m.prev;){if(m.i!==x.i&&PI(m,x)){let B=_p(m,x);return m=Yc(m,m.next),B=Yc(B,B.next),Bh(m,t,r,o,A,p,0),void Bh(B,t,r,o,A,p,0)}x=x.next}m=m.next}while(m!==n)}function kI(n,t){return n.x-t.x}function DI(n,t){const r=function(A,p){let m=p;const x=A.x,B=A.y;let S,M=-1/0;do{if(B<=m.y&&B>=m.next.y&&m.next.y!==m.y){const ae=m.x+(B-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(ae<=x&&ae>M&&(M=ae,S=m.x<m.next.x?m:m.next,ae===x))return S}m=m.next}while(m!==p);if(!S)return null;const P=S,O=S.x,Y=S.y;let ne=1/0;m=S;do{if(x>=m.x&&m.x>=O&&x!==m.x&&Pu(B<Y?x:M,B,O,Y,B<Y?M:x,B,m.x,m.y)){const ae=Math.abs(B-m.y)/(x-m.x);Eh(m,A)&&(ae<ne||ae===ne&&(m.x>S.x||m.x===S.x&&MI(S,m)))&&(S=m,ne=ae)}m=m.next}while(m!==P);return S}(n,t);if(!r)return t;const o=_p(r,n);return Yc(o,o.next),Yc(r,r.next)}function MI(n,t){return $n(n.prev,n,t.prev)<0&&$n(t.next,n,n.next)<0}function Ud(n,t,r,o,A){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*A|0)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-o)*A|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function TI(n){let t=n,r=n;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==n);return r}function Pu(n,t,r,o,A,p,m,x){return(A-m)*(t-x)>=(n-m)*(p-x)&&(n-m)*(o-x)>=(r-m)*(t-x)&&(r-m)*(p-x)>=(A-m)*(o-x)}function PI(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(r,o){let A=r;do{if(A.i!==r.i&&A.next.i!==r.i&&A.i!==o.i&&A.next.i!==o.i&&yp(A,A.next,r,o))return!0;A=A.next}while(A!==r);return!1}(n,t)&&(Eh(n,t)&&Eh(t,n)&&function(r,o){let A=r,p=!1;const m=(r.x+o.x)/2,x=(r.y+o.y)/2;do A.y>x!=A.next.y>x&&A.next.y!==A.y&&m<(A.next.x-A.x)*(x-A.y)/(A.next.y-A.y)+A.x&&(p=!p),A=A.next;while(A!==r);return p}(n,t)&&($n(n.prev,n,t.prev)||$n(n,t.prev,t))||bA(n,t)&&$n(n.prev,n,n.next)>0&&$n(t.prev,t,t.next)>0)}function $n(n,t,r){return(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y)}function bA(n,t){return n.x===t.x&&n.y===t.y}function yp(n,t,r,o){const A=wA($n(n,t,r)),p=wA($n(n,t,o)),m=wA($n(r,o,n)),x=wA($n(r,o,t));return A!==p&&m!==x||!(A!==0||!xA(n,r,t))||!(p!==0||!xA(n,o,t))||!(m!==0||!xA(r,n,o))||!(x!==0||!xA(r,t,o))}function xA(n,t,r){return t.x<=Math.max(n.x,r.x)&&t.x>=Math.min(n.x,r.x)&&t.y<=Math.max(n.y,r.y)&&t.y>=Math.min(n.y,r.y)}function wA(n){return n>0?1:n<0?-1:0}function Eh(n,t){return $n(n.prev,n,n.next)<0?$n(n,t,n.next)>=0&&$n(n,n.prev,t)>=0:$n(n,t,n.prev)<0||$n(n,n.next,t)<0}function _p(n,t){const r=Od(n.i,n.x,n.y),o=Od(t.i,t.x,t.y),A=n.next,p=t.prev;return n.next=t,t.prev=n,r.next=A,A.prev=r,o.next=r,r.prev=o,p.next=o,o.prev=p,o}function vp(n,t,r,o){const A=Od(n,t,r);return o?(A.next=o.next,A.prev=o,o.next.prev=A,o.next=A):(A.prev=A,A.next=A),A}function Qh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Od(n,t,r){return{i:n,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Vd(n,t,r){const o=r.patternDependencies;let A=!1;for(const p of t){const m=p.paint.get(`${n}-pattern`);m.isConstant()||(A=!0);const x=m.constantOr(null);x&&(A=!0,o[x.to]=!0,o[x.from]=!0)}return A}function qd(n,t,r,o,A){const p=A.patternDependencies;for(const m of t){const x=m.paint.get(`${n}-pattern`).value;if(x.kind!=="constant"){let B=x.evaluate({zoom:o-1},r,{},A.availableImages),S=x.evaluate({zoom:o},r,{},A.availableImages),M=x.evaluate({zoom:o+1},r,{},A.availableImages);B=B&&B.name?B.name:B,S=S&&S.name?S.name:S,M=M&&M.name?M.name:M,p[B]=!0,p[S]=!0,p[M]=!0,r.patterns[m.id]={min:B,mid:S,max:M}}}return r}class Hd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new X,this.indexArray=new he,this.indexArray2=new le,this.programConfigurations=new _i(t.layers,t.zoom),this.segments=new Te,this.segments2=new Te,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,o){this.hasPattern=Vd("fill",this.layers,r);const A=this.layers[0].layout.get("fill-sort-key"),p=!A.isConstant(),m=[];for(const{feature:x,id:B,index:S,sourceLayerIndex:M}of t){const P=this.layers[0]._featureFilter.needGeometry,O=nl(x,P);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),O,o))continue;const Y=p?A.evaluate(O,{},o,r.availableImages):void 0,ne={id:B,properties:x.properties,type:x.type,sourceLayerIndex:M,index:S,geometry:P?O.geometry:Ua(x),patterns:{},sortKey:Y};m.push(ne)}p&&m.sort((x,B)=>x.sortKey-B.sortKey);for(const x of m){const{geometry:B,index:S,sourceLayerIndex:M}=x;if(this.hasPattern){const P=qd("fill",this.layers,x,this.zoom,r);this.patternFeatures.push(P)}else this.addFeature(x,B,S,o,{});r.featureIndex.insert(t[S].feature,B,S,M,this.index)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}addFeatures(t,r,o){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,r,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,CI),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,o,A,p){for(const m of xs(r,500)){let x=0;for(const Y of m)x+=Y.length;const B=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),S=B.vertexLength,M=[],P=[];for(const Y of m){if(Y.length===0)continue;Y!==m[0]&&P.push(M.length/2);const ne=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),ae=ne.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(ae+Y.length-1,ae),M.push(Y[0].x),M.push(Y[0].y);for(let _e=1;_e<Y.length;_e++)this.layoutVertexArray.emplaceBack(Y[_e].x,Y[_e].y),this.indexArray2.emplaceBack(ae+_e-1,ae+_e),M.push(Y[_e].x),M.push(Y[_e].y);ne.vertexLength+=Y.length,ne.primitiveLength+=Y.length}const O=pp(M,P);for(let Y=0;Y<O.length;Y+=3)this.indexArray.emplaceBack(S+O[Y],S+O[Y+1],S+O[Y+2]);B.vertexLength+=x,B.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,p,A)}}let Ip,bp;Ut("FillBucket",Hd,{omit:["layers","patternFeatures"]});var RI={get paint(){return bp=bp||new Ir({"fill-antialias":new ni(xe.paint_fill["fill-antialias"]),"fill-opacity":new Ai(xe.paint_fill["fill-opacity"]),"fill-color":new Ai(xe.paint_fill["fill-color"]),"fill-outline-color":new Ai(xe.paint_fill["fill-outline-color"]),"fill-translate":new ni(xe.paint_fill["fill-translate"]),"fill-translate-anchor":new ni(xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new il(xe.paint_fill["fill-pattern"])})},get layout(){return Ip=Ip||new Ir({"fill-sort-key":new Ai(xe.layout_fill["fill-sort-key"])})}};class LI extends e{constructor(t){super(t,RI)}recalculate(t,r){super.recalculate(t,r);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Hd(t)}queryRadius(){return _A(this.paint.get("fill-translate"))}queryIntersectsFeature(t,r,o,A,p,m,x){return Ih(vA(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,x),A)}isTileClipped(){return!0}}const FI=f([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zI=f([{name:"a_centroid",components:2,type:"Int16"}],4),{members:GI}=FI;var ql={},NI=W,xp=Ru;function Ru(n,t,r,o,A){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=o,this._values=A,n.readFields(UI,this,t)}function UI(n,t,r){n==1?t.id=r.readVarint():n==2?function(o,A){for(var p=o.readVarint()+o.pos;o.pos<p;){var m=A._keys[o.readVarint()],x=A._values[o.readVarint()];A.properties[m]=x}}(r,t):n==3?t.type=r.readVarint():n==4&&(t._geometry=r.pos)}function OI(n){for(var t,r,o=0,A=0,p=n.length,m=p-1;A<p;m=A++)o+=((r=n[m]).x-(t=n[A]).x)*(t.y+r.y);return o}Ru.types=["Unknown","Point","LineString","Polygon"],Ru.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,r=n.readVarint()+n.pos,o=1,A=0,p=0,m=0,x=[];n.pos<r;){if(A<=0){var B=n.readVarint();o=7&B,A=B>>3}if(A--,o===1||o===2)p+=n.readSVarint(),m+=n.readSVarint(),o===1&&(t&&x.push(t),t=[]),t.push(new NI(p,m));else{if(o!==7)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&x.push(t),x},Ru.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,r=1,o=0,A=0,p=0,m=1/0,x=-1/0,B=1/0,S=-1/0;n.pos<t;){if(o<=0){var M=n.readVarint();r=7&M,o=M>>3}if(o--,r===1||r===2)(A+=n.readSVarint())<m&&(m=A),A>x&&(x=A),(p+=n.readSVarint())<B&&(B=p),p>S&&(S=p);else if(r!==7)throw new Error("unknown command "+r)}return[m,B,x,S]},Ru.prototype.toGeoJSON=function(n,t,r){var o,A,p=this.extent*Math.pow(2,r),m=this.extent*n,x=this.extent*t,B=this.loadGeometry(),S=Ru.types[this.type];function M(Y){for(var ne=0;ne<Y.length;ne++){var ae=Y[ne];Y[ne]=[360*(ae.x+m)/p-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+x)/p)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(o=0;o<B.length;o++)P[o]=B[o][0];M(B=P);break;case 2:for(o=0;o<B.length;o++)M(B[o]);break;case 3:for(B=function(Y){var ne=Y.length;if(ne<=1)return[Y];for(var ae,_e,Be=[],Ke=0;Ke<ne;Ke++){var ze=OI(Y[Ke]);ze!==0&&(_e===void 0&&(_e=ze<0),_e===ze<0?(ae&&Be.push(ae),ae=[Y[Ke]]):ae.push(Y[Ke]))}return ae&&Be.push(ae),Be}(B),o=0;o<B.length;o++)for(A=0;A<B[o].length;A++)M(B[o][A])}B.length===1?B=B[0]:S="Multi"+S;var O={type:"Feature",geometry:{type:S,coordinates:B},properties:this.properties};return"id"in this&&(O.id=this.id),O};var VI=xp,wp=Cp;function Cp(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(qI,this,t),this.length=this._features.length}function qI(n,t,r){n===15?t.version=r.readVarint():n===1?t.name=r.readString():n===5?t.extent=r.readVarint():n===2?t._features.push(r.pos):n===3?t._keys.push(r.readString()):n===4&&t._values.push(function(o){for(var A=null,p=o.readVarint()+o.pos;o.pos<p;){var m=o.readVarint()>>3;A=m===1?o.readString():m===2?o.readFloat():m===3?o.readDouble():m===4?o.readVarint64():m===5?o.readVarint():m===6?o.readSVarint():m===7?o.readBoolean():null}return A}(r))}Cp.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new VI(this._pbf,t,this.extent,this._keys,this._values)};var HI=wp;function jI(n,t,r){if(n===3){var o=new HI(r,r.readVarint()+r.pos);o.length&&(t[o.name]=o)}}ql.VectorTile=function(n,t){this.layers=n.readFields(jI,{},t)},ql.VectorTileFeature=xp,ql.VectorTileLayer=wp;const JI=ql.VectorTileFeature.types,jd=Math.pow(2,13);function Sh(n,t,r,o,A,p,m,x){n.emplaceBack(t,r,2*Math.floor(o*jd)+m,A*jd*2,p*jd*2,Math.round(x))}class Jd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new be,this.centroidVertexArray=new ge,this.indexArray=new he,this.programConfigurations=new _i(t.layers,t.zoom),this.segments=new Te,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,o){this.features=[],this.hasPattern=Vd("fill-extrusion",this.layers,r);for(const{feature:A,id:p,index:m,sourceLayerIndex:x}of t){const B=this.layers[0]._featureFilter.needGeometry,S=nl(A,B);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),S,o))continue;const M={id:p,sourceLayerIndex:x,index:m,geometry:B?S.geometry:Ua(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(qd("fill-extrusion",this.layers,M,this.zoom,r)):this.addFeature(M,M.geometry,m,o,{}),r.featureIndex.insert(A,M.geometry,m,x,this.index,!0)}}addFeatures(t,r,o){for(const A of this.features){const{geometry:p}=A;this.addFeature(A,p,A.index,r,o)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,GI),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,zI.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,o,A,p){for(const m of xs(r,500)){const x={x:0,y:0,vertexCount:0};let B=0;for(const ne of m)B+=ne.length;let S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ne of m){if(ne.length===0||KI(ne))continue;let ae=0;for(let _e=0;_e<ne.length;_e++){const Be=ne[_e];if(_e>=1){const Ke=ne[_e-1];if(!YI(Be,Ke)){S.vertexLength+4>Te.MAX_VERTEX_ARRAY_LENGTH&&(S=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ze=Be.sub(Ke)._perp()._unit(),He=Ke.dist(Be);ae+He>32768&&(ae=0),Sh(this.layoutVertexArray,Be.x,Be.y,ze.x,ze.y,0,0,ae),Sh(this.layoutVertexArray,Be.x,Be.y,ze.x,ze.y,0,1,ae),x.x+=2*Be.x,x.y+=2*Be.y,x.vertexCount+=2,ae+=He,Sh(this.layoutVertexArray,Ke.x,Ke.y,ze.x,ze.y,0,0,ae),Sh(this.layoutVertexArray,Ke.x,Ke.y,ze.x,ze.y,0,1,ae),x.x+=2*Ke.x,x.y+=2*Ke.y,x.vertexCount+=2;const nt=S.vertexLength;this.indexArray.emplaceBack(nt,nt+2,nt+1),this.indexArray.emplaceBack(nt+1,nt+2,nt+3),S.vertexLength+=4,S.primitiveLength+=2}}}}if(S.vertexLength+B>Te.MAX_VERTEX_ARRAY_LENGTH&&(S=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray)),JI[t.type]!=="Polygon")continue;const M=[],P=[],O=S.vertexLength;for(const ne of m)if(ne.length!==0){ne!==m[0]&&P.push(M.length/2);for(let ae=0;ae<ne.length;ae++){const _e=ne[ae];Sh(this.layoutVertexArray,_e.x,_e.y,0,0,1,1,0),x.x+=_e.x,x.y+=_e.y,x.vertexCount+=1,M.push(_e.x),M.push(_e.y)}}const Y=pp(M,P);for(let ne=0;ne<Y.length;ne+=3)this.indexArray.emplaceBack(O+Y[ne],O+Y[ne+2],O+Y[ne+1]);S.primitiveLength+=Y.length/3,S.vertexLength+=B;for(let ne=0;ne<x.vertexCount;ne++){const ae=Math.floor(x.x/x.vertexCount),_e=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(ae,_e)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,p,A)}}function YI(n,t){return n.x===t.x&&(n.x<0||n.x>Fn)||n.y===t.y&&(n.y<0||n.y>Fn)}function KI(n){return n.every(t=>t.x<0)||n.every(t=>t.x>Fn)||n.every(t=>t.y<0)||n.every(t=>t.y>Fn)}let Bp;Ut("FillExtrusionBucket",Jd,{omit:["layers","features"]});var $I={get paint(){return Bp=Bp||new Ir({"fill-extrusion-opacity":new ni(xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ai(xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ni(xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ni(xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new il(xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ai(xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ai(xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ni(xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ZI extends e{constructor(t){super(t,$I)}createBucket(t){return new Jd(t)}queryRadius(){return _A(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,r,o,A,p,m,x,B){const S=vA(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(r,o),P=this.paint.get("fill-extrusion-base").evaluate(r,o),O=function(ne,ae,_e,Be){const Ke=[];for(const ze of ne){const He=[ze.x,ze.y,0,1];IA(He,He,ae),Ke.push(new q(He[0]/He[3],He[1]/He[3]))}return Ke}(S,B),Y=function(ne,ae,_e,Be){const Ke=[],ze=[],He=Be[8]*ae,nt=Be[9]*ae,wt=Be[10]*ae,jt=Be[11]*ae,mi=Be[8]*_e,qt=Be[9]*_e,Gt=Be[10]*_e,si=Be[11]*_e;for(const Wt of ne){const Kt=[],ht=[];for(const li of Wt){const ri=li.x,xi=li.y,_n=Be[0]*ri+Be[4]*xi+Be[12],pn=Be[1]*ri+Be[5]*xi+Be[13],lr=Be[2]*ri+Be[6]*xi+Be[14],As=Be[3]*ri+Be[7]*xi+Be[15],wr=lr+wt,cr=As+jt,jr=_n+mi,Jr=pn+qt,Yr=lr+Gt,Hn=As+si,ur=new q((_n+He)/cr,(pn+nt)/cr);ur.z=wr/cr,Kt.push(ur);const Lr=new q(jr/Hn,Jr/Hn);Lr.z=Yr/Hn,ht.push(Lr)}Ke.push(Kt),ze.push(ht)}return[Ke,ze]}(A,P,M,B);return function(ne,ae,_e){let Be=1/0;Ih(_e,ae)&&(Be=Ep(_e,ae[0]));for(let Ke=0;Ke<ae.length;Ke++){const ze=ae[Ke],He=ne[Ke];for(let nt=0;nt<ze.length-1;nt++){const wt=ze[nt],jt=[wt,ze[nt+1],He[nt+1],He[nt],wt];Oa(_e,jt)&&(Be=Math.min(Be,Ep(_e,jt)))}}return Be!==1/0&&Be}(Y[0],Y[1],O)}}function kh(n,t){return n.x*t.x+n.y*t.y}function Ep(n,t){if(n.length===1){let r=0;const o=t[r++];let A;for(;!A||o.equals(A);)if(A=t[r++],!A)return 1/0;for(;r<t.length;r++){const p=t[r],m=n[0],x=A.sub(o),B=p.sub(o),S=m.sub(o),M=kh(x,x),P=kh(x,B),O=kh(B,B),Y=kh(S,x),ne=kh(S,B),ae=M*O-P*P,_e=(O*Y-P*ne)/ae,Be=(M*ne-P*Y)/ae,Ke=o.z*(1-_e-Be)+A.z*_e+p.z*Be;if(isFinite(Ke))return Ke}return 1/0}{let r=1/0;for(const o of t)r=Math.min(r,o.z);return r}}const WI=f([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:XI}=WI,e1=f([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:t1}=e1,i1=ql.VectorTileFeature.types,n1=Math.cos(Math.PI/180*37.5),Qp=Math.pow(2,14)/.5;class Yd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Ce,this.layoutVertexArray2=new ke,this.indexArray=new he,this.programConfigurations=new _i(t.layers,t.zoom),this.segments=new Te,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,o){this.hasPattern=Vd("line",this.layers,r);const A=this.layers[0].layout.get("line-sort-key"),p=!A.isConstant(),m=[];for(const{feature:x,id:B,index:S,sourceLayerIndex:M}of t){const P=this.layers[0]._featureFilter.needGeometry,O=nl(x,P);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),O,o))continue;const Y=p?A.evaluate(O,{},o):void 0,ne={id:B,properties:x.properties,type:x.type,sourceLayerIndex:M,index:S,geometry:P?O.geometry:Ua(x),patterns:{},sortKey:Y};m.push(ne)}p&&m.sort((x,B)=>x.sortKey-B.sortKey);for(const x of m){const{geometry:B,index:S,sourceLayerIndex:M}=x;if(this.hasPattern){const P=qd("line",this.layers,x,this.zoom,r);this.patternFeatures.push(P)}else this.addFeature(x,B,S,o,{});r.featureIndex.insert(t[S].feature,B,S,M,this.index)}}update(t,r,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,o)}addFeatures(t,r,o){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,r,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,t1)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,XI),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,o,A,p){const m=this.layers[0].layout,x=m.get("line-join").evaluate(t,{}),B=m.get("line-cap"),S=m.get("line-miter-limit"),M=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const P of r)this.addLine(P,t,x,B,S,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,p,A)}addLine(t,r,o,A,p,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<t.length-1;Be++)this.totalDistance+=t[Be].dist(t[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=i1[r.type]==="Polygon";let B=t.length;for(;B>=2&&t[B-1].equals(t[B-2]);)B--;let S=0;for(;S<B-1&&t[S].equals(t[S+1]);)S++;if(B<(x?3:2))return;o==="bevel"&&(p=1.05);const M=this.overscaling<=16?15*Fn/(512*this.overscaling):0,P=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let O,Y,ne,ae,_e;this.e1=this.e2=-1,x&&(O=t[B-2],_e=t[S].sub(O)._unit()._perp());for(let Be=S;Be<B;Be++){if(ne=Be===B-1?x?t[S+1]:void 0:t[Be+1],ne&&t[Be].equals(ne))continue;_e&&(ae=_e),O&&(Y=O),O=t[Be],_e=ne?ne.sub(O)._unit()._perp():ae,ae=ae||_e;let Ke=ae.add(_e);Ke.x===0&&Ke.y===0||Ke._unit();const ze=ae.x*_e.x+ae.y*_e.y,He=Ke.x*_e.x+Ke.y*_e.y,nt=He!==0?1/He:1/0,wt=2*Math.sqrt(2-2*He),jt=He<n1&&Y&&ne,mi=ae.x*_e.y-ae.y*_e.x>0;if(jt&&Be>S){const si=O.dist(Y);if(si>2*M){const Wt=O.sub(O.sub(Y)._mult(M/si)._round());this.updateDistance(Y,Wt),this.addCurrentVertex(Wt,ae,0,0,P),Y=Wt}}const qt=Y&&ne;let Gt=qt?o:x?"butt":A;if(qt&&Gt==="round"&&(nt<m?Gt="miter":nt<=2&&(Gt="fakeround")),Gt==="miter"&&nt>p&&(Gt="bevel"),Gt==="bevel"&&(nt>2&&(Gt="flipbevel"),nt<p&&(Gt="miter")),Y&&this.updateDistance(Y,O),Gt==="miter")Ke._mult(nt),this.addCurrentVertex(O,Ke,0,0,P);else if(Gt==="flipbevel"){if(nt>100)Ke=_e.mult(-1);else{const si=nt*ae.add(_e).mag()/ae.sub(_e).mag();Ke._perp()._mult(si*(mi?-1:1))}this.addCurrentVertex(O,Ke,0,0,P),this.addCurrentVertex(O,Ke.mult(-1),0,0,P)}else if(Gt==="bevel"||Gt==="fakeround"){const si=-Math.sqrt(nt*nt-1),Wt=mi?si:0,Kt=mi?0:si;if(Y&&this.addCurrentVertex(O,ae,Wt,Kt,P),Gt==="fakeround"){const ht=Math.round(180*wt/Math.PI/20);for(let li=1;li<ht;li++){let ri=li/ht;if(ri!==.5){const _n=ri-.5;ri+=ri*_n*(ri-1)*((1.0904+ze*(ze*(3.55645-1.43519*ze)-3.2452))*_n*_n+(.848013+ze*(.215638*ze-1.06021)))}const xi=_e.sub(ae)._mult(ri)._add(ae)._unit()._mult(mi?-1:1);this.addHalfVertex(O,xi.x,xi.y,!1,mi,0,P)}}ne&&this.addCurrentVertex(O,_e,-Wt,-Kt,P)}else if(Gt==="butt")this.addCurrentVertex(O,Ke,0,0,P);else if(Gt==="square"){const si=Y?1:-1;this.addCurrentVertex(O,Ke,si,si,P)}else Gt==="round"&&(Y&&(this.addCurrentVertex(O,ae,0,0,P),this.addCurrentVertex(O,ae,1,1,P,!0)),ne&&(this.addCurrentVertex(O,_e,-1,-1,P,!0),this.addCurrentVertex(O,_e,0,0,P)));if(jt&&Be<B-1){const si=O.dist(ne);if(si>2*M){const Wt=O.add(ne.sub(O)._mult(M/si)._round());this.updateDistance(O,Wt),this.addCurrentVertex(Wt,_e,0,0,P),O=Wt}}}}addCurrentVertex(t,r,o,A,p,m=!1){const x=r.y*A-r.x,B=-r.y-r.x*A;this.addHalfVertex(t,r.x+r.y*o,r.y-r.x*o,m,!1,o,p),this.addHalfVertex(t,x,B,m,!0,-A,p),this.distance>Qp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,o,A,p,m))}addHalfVertex({x:t,y:r},o,A,p,m,x,B){const S=.5*(this.lineClips?this.scaledDistance*(Qp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(p?1:0),(r<<1)+(m?1:0),Math.round(63*o)+128,Math.round(63*A)+128,1+(x===0?0:x<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),B.primitiveLength++),m?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}}let Sp,kp;Ut("LineBucket",Yd,{omit:["layers","patternFeatures"]});var Dp={get paint(){return kp=kp||new Ir({"line-opacity":new Ai(xe.paint_line["line-opacity"]),"line-color":new Ai(xe.paint_line["line-color"]),"line-translate":new ni(xe.paint_line["line-translate"]),"line-translate-anchor":new ni(xe.paint_line["line-translate-anchor"]),"line-width":new Ai(xe.paint_line["line-width"]),"line-gap-width":new Ai(xe.paint_line["line-gap-width"]),"line-offset":new Ai(xe.paint_line["line-offset"]),"line-blur":new Ai(xe.paint_line["line-blur"]),"line-dasharray":new Jc(xe.paint_line["line-dasharray"]),"line-pattern":new il(xe.paint_line["line-pattern"]),"line-gradient":new qr(xe.paint_line["line-gradient"])})},get layout(){return Sp=Sp||new Ir({"line-cap":new ni(xe.layout_line["line-cap"]),"line-join":new Ai(xe.layout_line["line-join"]),"line-miter-limit":new ni(xe.layout_line["line-miter-limit"]),"line-round-limit":new ni(xe.layout_line["line-round-limit"]),"line-sort-key":new Ai(xe.layout_line["line-sort-key"])})}};class r1 extends Ai{possiblyEvaluate(t,r){return r=new $i(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,o,A){return r=Nt({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,o,A)}}let CA;class a1 extends e{constructor(t){super(t,Dp),this.gradientVersion=0,CA||(CA=new r1(Dp.paint.properties["line-width"].specification),CA.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!function(o){return o._styleExpression!==void 0}(r)&&r._styleExpression.expression instanceof rs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=CA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Yd(t)}queryRadius(t){const r=t,o=Mp(xh("line-width",this,r),xh("line-gap-width",this,r)),A=xh("line-offset",this,r);return o/2+Math.abs(A)+_A(this.paint.get("line-translate"))}queryIntersectsFeature(t,r,o,A,p,m,x){const B=vA(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,x),S=x/2*Mp(this.paint.get("line-width").evaluate(r,o),this.paint.get("line-gap-width").evaluate(r,o)),M=this.paint.get("line-offset").evaluate(r,o);return M&&(A=function(P,O){const Y=[];for(let ne=0;ne<P.length;ne++){const ae=P[ne],_e=[];for(let Be=0;Be<ae.length;Be++){const Ke=ae[Be-1],ze=ae[Be],He=ae[Be+1],nt=Be===0?new q(0,0):ze.sub(Ke)._unit()._perp(),wt=Be===ae.length-1?new q(0,0):He.sub(ze)._unit()._perp(),jt=nt._add(wt)._unit(),mi=jt.x*wt.x+jt.y*wt.y;mi!==0&&jt._mult(1/mi),_e.push(jt._mult(O)._add(ze))}Y.push(_e)}return Y}(A,M*x)),function(P,O,Y){for(let ne=0;ne<O.length;ne++){const ae=O[ne];if(P.length>=3){for(let _e=0;_e<ae.length;_e++)if(Mu(P,ae[_e]))return!0}if(bh(P,ae,Y))return!0}return!1}(B,A,S)}isTileClipped(){return!0}}function Mp(n,t){return t>0?t+2*n:n}const s1=f([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),o1=f([{name:"a_projected_pos",components:3,type:"Float32"}],4);f([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const l1=f([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);f([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tp=f([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),c1=f([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function u1(n,t,r){return n.sections.forEach(o=>{o.text=function(A,p,m){const x=p.layout.get("text-transform").evaluate(m,{});return x==="uppercase"?A=A.toLocaleUpperCase():x==="lowercase"&&(A=A.toLocaleLowerCase()),on.applyArabicShaping&&(A=on.applyArabicShaping(A)),A}(o.text,t,r)}),n}f([{name:"triangle",components:3,type:"Uint16"}]),f([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),f([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),f([{type:"Float32",name:"offsetX"}]),f([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),f([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Dh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var sr=24,Pp=gn,Rp=function(n,t,r,o,A){var p,m,x=8*A-o-1,B=(1<<x)-1,S=B>>1,M=-7,P=A-1,O=-1,Y=n[t+P];for(P+=O,p=Y&(1<<-M)-1,Y>>=-M,M+=x;M>0;p=256*p+n[t+P],P+=O,M-=8);for(m=p&(1<<-M)-1,p>>=-M,M+=o;M>0;m=256*m+n[t+P],P+=O,M-=8);if(p===0)p=1-S;else{if(p===B)return m?NaN:1/0*(Y?-1:1);m+=Math.pow(2,o),p-=S}return(Y?-1:1)*m*Math.pow(2,p-o)},Lp=function(n,t,r,o,A,p){var m,x,B,S=8*p-A-1,M=(1<<S)-1,P=M>>1,O=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=0,ne=1,ae=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,m=M):(m=Math.floor(Math.log(t)/Math.LN2),t*(B=Math.pow(2,-m))<1&&(m--,B*=2),(t+=m+P>=1?O/B:O*Math.pow(2,1-P))*B>=2&&(m++,B/=2),m+P>=M?(x=0,m=M):m+P>=1?(x=(t*B-1)*Math.pow(2,A),m+=P):(x=t*Math.pow(2,P-1)*Math.pow(2,A),m=0));A>=8;n[r+Y]=255&x,Y+=ne,x/=256,A-=8);for(m=m<<A|x,S+=A;S>0;n[r+Y]=255&m,Y+=ne,m/=256,S-=8);n[r+Y-ne]|=128*ae};function gn(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}gn.Varint=0,gn.Fixed64=1,gn.Bytes=2,gn.Fixed32=5;var Kd=4294967296,Fp=1/Kd,zp=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function rl(n){return n.type===gn.Bytes?n.readVarint()+n.pos:n.pos+1}function Lu(n,t,r){return r?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}function Gp(n,t,r){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(o);for(var A=r.pos-1;A>=n;A--)r.buf[A+o]=r.buf[A]}function h1(n,t){for(var r=0;r<n.length;r++)t.writeVarint(n[r])}function A1(n,t){for(var r=0;r<n.length;r++)t.writeSVarint(n[r])}function d1(n,t){for(var r=0;r<n.length;r++)t.writeFloat(n[r])}function f1(n,t){for(var r=0;r<n.length;r++)t.writeDouble(n[r])}function g1(n,t){for(var r=0;r<n.length;r++)t.writeBoolean(n[r])}function p1(n,t){for(var r=0;r<n.length;r++)t.writeFixed32(n[r])}function m1(n,t){for(var r=0;r<n.length;r++)t.writeSFixed32(n[r])}function y1(n,t){for(var r=0;r<n.length;r++)t.writeFixed64(n[r])}function _1(n,t){for(var r=0;r<n.length;r++)t.writeSFixed64(n[r])}function BA(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function Fu(n,t,r){n[r]=t,n[r+1]=t>>>8,n[r+2]=t>>>16,n[r+3]=t>>>24}function Np(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}gn.prototype={destroy:function(){this.buf=null},readFields:function(n,t,r){for(r=r||this.length;this.pos<r;){var o=this.readVarint(),A=o>>3,p=this.pos;this.type=7&o,n(A,t,this),this.pos===p&&this.skip(o)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=BA(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Np(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=BA(this.buf,this.pos)+BA(this.buf,this.pos+4)*Kd;return this.pos+=8,n},readSFixed64:function(){var n=BA(this.buf,this.pos)+Np(this.buf,this.pos+4)*Kd;return this.pos+=8,n},readFloat:function(){var n=Rp(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Rp(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,r,o=this.buf;return t=127&(r=o[this.pos++]),r<128?t:(t|=(127&(r=o[this.pos++]))<<7,r<128?t:(t|=(127&(r=o[this.pos++]))<<14,r<128?t:(t|=(127&(r=o[this.pos++]))<<21,r<128?t:function(A,p,m){var x,B,S=m.buf;if(x=(112&(B=S[m.pos++]))>>4,B<128||(x|=(127&(B=S[m.pos++]))<<3,B<128)||(x|=(127&(B=S[m.pos++]))<<10,B<128)||(x|=(127&(B=S[m.pos++]))<<17,B<128)||(x|=(127&(B=S[m.pos++]))<<24,B<128)||(x|=(1&(B=S[m.pos++]))<<31,B<128))return Lu(A,x,p);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=o[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&zp?function(r,o,A){return zp.decode(r.subarray(o,A))}(this.buf,t,n):function(r,o,A){for(var p="",m=o;m<A;){var x,B,S,M=r[m],P=null,O=M>239?4:M>223?3:M>191?2:1;if(m+O>A)break;O===1?M<128&&(P=M):O===2?(192&(x=r[m+1]))==128&&(P=(31&M)<<6|63&x)<=127&&(P=null):O===3?(B=r[m+2],(192&(x=r[m+1]))==128&&(192&B)==128&&((P=(15&M)<<12|(63&x)<<6|63&B)<=2047||P>=55296&&P<=57343)&&(P=null)):O===4&&(B=r[m+2],S=r[m+3],(192&(x=r[m+1]))==128&&(192&B)==128&&(192&S)==128&&((P=(15&M)<<18|(63&x)<<12|(63&B)<<6|63&S)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,O=1):P>65535&&(P-=65536,p+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),p+=String.fromCharCode(P),m+=O}return p}(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==gn.Bytes)return n.push(this.readVarint(t));var r=rl(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==gn.Bytes)return n.push(this.readSVarint());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==gn.Bytes)return n.push(this.readBoolean());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==gn.Bytes)return n.push(this.readFloat());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==gn.Bytes)return n.push(this.readDouble());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==gn.Bytes)return n.push(this.readFixed32());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==gn.Bytes)return n.push(this.readSFixed32());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==gn.Bytes)return n.push(this.readFixed64());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==gn.Bytes)return n.push(this.readSFixed64());var t=rl(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===gn.Varint)for(;this.buf[this.pos++]>127;);else if(t===gn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===gn.Fixed32)this.pos+=4;else{if(t!==gn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Fu(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Fu(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Fu(this.buf,-1&n,this.pos),Fu(this.buf,Math.floor(n*Fp),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Fu(this.buf,-1&n,this.pos),Fu(this.buf,Math.floor(n*Fp),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(t,r){var o,A;if(t>=0?(o=t%4294967296|0,A=t/4294967296|0):(A=~(-t/4294967296),4294967295^(o=~(-t%4294967296))?o=o+1|0:(o=0,A=A+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(p,m,x){x.buf[x.pos++]=127&p|128,p>>>=7,x.buf[x.pos++]=127&p|128,p>>>=7,x.buf[x.pos++]=127&p|128,p>>>=7,x.buf[x.pos++]=127&p|128,x.buf[x.pos]=127&(p>>>=7)}(o,0,r),function(p,m){var x=(7&p)<<4;m.buf[m.pos++]|=x|((p>>>=3)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p|((p>>>=7)?128:0),p&&(m.buf[m.pos++]=127&p)))))}(A,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=function(o,A,p){for(var m,x,B=0;B<A.length;B++){if((m=A.charCodeAt(B))>55295&&m<57344){if(!x){m>56319||B+1===A.length?(o[p++]=239,o[p++]=191,o[p++]=189):x=m;continue}if(m<56320){o[p++]=239,o[p++]=191,o[p++]=189,x=m;continue}m=x-55296<<10|m-56320|65536,x=null}else x&&(o[p++]=239,o[p++]=191,o[p++]=189,x=null);m<128?o[p++]=m:(m<2048?o[p++]=m>>6|192:(m<65536?o[p++]=m>>12|224:(o[p++]=m>>18|240,o[p++]=m>>12&63|128),o[p++]=m>>6&63|128),o[p++]=63&m|128)}return p}(this.buf,n,this.pos);var r=this.pos-t;r>=128&&Gp(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),Lp(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Lp(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,t){this.pos++;var r=this.pos;n(t,this);var o=this.pos-r;o>=128&&Gp(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeMessage:function(n,t,r){this.writeTag(n,gn.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,h1,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,A1,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,g1,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,d1,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,f1,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,p1,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,m1,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,y1,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,_1,t)},writeBytesField:function(n,t){this.writeTag(n,gn.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,gn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,gn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,gn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,gn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,gn.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,gn.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,gn.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,gn.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,gn.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,!!t)}};var $d=V(Pp);const Zd=3;function v1(n,t,r){n===1&&r.readMessage(I1,t)}function I1(n,t,r){if(n===3){const{id:o,bitmap:A,width:p,height:m,left:x,top:B,advance:S}=r.readMessage(b1,{});t.push({id:o,bitmap:new Ch({width:p+2*Zd,height:m+2*Zd},A),metrics:{width:p,height:m,left:x,top:B,advance:S}})}}function b1(n,t,r){n===1?t.id=r.readVarint():n===2?t.bitmap=r.readBytes():n===3?t.width=r.readVarint():n===4?t.height=r.readVarint():n===5?t.left=r.readSVarint():n===6?t.top=r.readSVarint():n===7&&(t.advance=r.readVarint())}const Up=Zd;function Op(n){let t=0,r=0;for(const m of n)t+=m.w*m.h,r=Math.max(r,m.w);n.sort((m,x)=>x.h-m.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let A=0,p=0;for(const m of n)for(let x=o.length-1;x>=0;x--){const B=o[x];if(!(m.w>B.w||m.h>B.h)){if(m.x=B.x,m.y=B.y,p=Math.max(p,m.y+m.h),A=Math.max(A,m.x+m.w),m.w===B.w&&m.h===B.h){const S=o.pop();x<o.length&&(o[x]=S)}else m.h===B.h?(B.x+=m.w,B.w-=m.w):m.w===B.w?(B.y+=m.h,B.h-=m.h):(o.push({x:B.x+m.w,y:B.y,w:B.w-m.w,h:m.h}),B.y+=m.h,B.h-=m.h);break}}return{w:A,h:p,fill:t/(A*p)||0}}const ca=1;class Wd{constructor(t,{pixelRatio:r,version:o,stretchX:A,stretchY:p,content:m,textFitWidth:x,textFitHeight:B}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=A,this.stretchY=p,this.content=m,this.version=o,this.textFitWidth=x,this.textFitHeight=B}get tl(){return[this.paddedRect.x+ca,this.paddedRect.y+ca]}get br(){return[this.paddedRect.x+this.paddedRect.w-ca,this.paddedRect.y+this.paddedRect.h-ca]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ca)/this.pixelRatio,(this.paddedRect.h-2*ca)/this.pixelRatio]}}class Vp{constructor(t,r){const o={},A={};this.haveRenderCallbacks=[];const p=[];this.addImages(t,o,p),this.addImages(r,A,p);const{w:m,h:x}=Op(p),B=new Va({width:m||1,height:x||1});for(const S in t){const M=t[S],P=o[S].paddedRect;Va.copy(M.data,B,{x:0,y:0},{x:P.x+ca,y:P.y+ca},M.data)}for(const S in r){const M=r[S],P=A[S].paddedRect,O=P.x+ca,Y=P.y+ca,ne=M.data.width,ae=M.data.height;Va.copy(M.data,B,{x:0,y:0},{x:O,y:Y},M.data),Va.copy(M.data,B,{x:0,y:ae-1},{x:O,y:Y-1},{width:ne,height:1}),Va.copy(M.data,B,{x:0,y:0},{x:O,y:Y+ae},{width:ne,height:1}),Va.copy(M.data,B,{x:ne-1,y:0},{x:O-1,y:Y},{width:1,height:ae}),Va.copy(M.data,B,{x:0,y:0},{x:O+ne,y:Y},{width:1,height:ae})}this.image=B,this.iconPositions=o,this.patternPositions=A}addImages(t,r,o){for(const A in t){const p=t[A],m={x:0,y:0,w:p.data.width+2*ca,h:p.data.height+2*ca};o.push(m),r[A]=new Wd(m,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(A)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const o in t.updatedImages)this.patchUpdatedImage(this.iconPositions[o],t.getImage(o),r),this.patchUpdatedImage(this.patternPositions[o],t.getImage(o),r)}patchUpdatedImage(t,r,o){if(!t||!r||t.version===r.version)return;t.version=r.version;const[A,p]=t.tl;o.update(r.data,void 0,{x:A,y:p})}}var Hl;Ut("ImagePosition",Wd),Ut("ImageAtlas",Vp),v.ah=void 0,(Hl=v.ah||(v.ah={}))[Hl.none=0]="none",Hl[Hl.horizontal=1]="horizontal",Hl[Hl.vertical=2]="vertical",Hl[Hl.horizontalOnly=3]="horizontalOnly";const Mh=-17;class Th{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,r){const o=new Th;return o.scale=t||1,o.fontStack=r,o}static forImage(t){const r=new Th;return r.imageName=t,r}}class zu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const o=new zu;for(let A=0;A<t.sections.length;A++){const p=t.sections[A];p.image?o.addImageSection(p):o.addTextSection(p,r)}return o}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let r="";for(let o=0;o<t.length;o++){const A=t.charCodeAt(o+1)||null,p=t.charCodeAt(o-1)||null;r+=A&&Nl(A)&&!Dh[t[o+1]]||p&&Nl(p)&&!Dh[t[o-1]]||!Dh[t[o]]?t[o]:Dh[t[o]]}return r}(this.text)}trim(){let t=0;for(let o=0;o<this.text.length&&QA[this.text.charCodeAt(o)];o++)t++;let r=this.text.length;for(let o=this.text.length-1;o>=0&&o>=t&&QA[this.text.charCodeAt(o)];o--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const o=new zu;return o.text=this.text.substring(t,r),o.sectionIndex=this.sectionIndex.slice(t,r),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,r)=>Math.max(t,this.sections[r].scale),0)}addTextSection(t,r){this.text+=t.text,this.sections.push(Th.forText(t.scale,t.fontStack||r));const o=this.sections.length-1;for(let A=0;A<t.text.length;++A)this.sectionIndex.push(o)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void yt("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCharCode(o),this.sections.push(Th.forImage(r)),this.sectionIndex.push(this.sections.length-1)):yt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function EA(n,t,r,o,A,p,m,x,B,S,M,P,O,Y,ne){const ae=zu.fromFeature(n,A);let _e;P===v.ah.vertical&&ae.verticalizePunctuation();const{processBidirectionalText:Be,processStyledBidirectionalText:Ke}=on;if(Be&&ae.sections.length===1){_e=[];const nt=Be(ae.toString(),Xd(ae,S,p,t,o,Y));for(const wt of nt){const jt=new zu;jt.text=wt,jt.sections=ae.sections;for(let mi=0;mi<wt.length;mi++)jt.sectionIndex.push(0);_e.push(jt)}}else if(Ke){_e=[];const nt=Ke(ae.text,ae.sectionIndex,Xd(ae,S,p,t,o,Y));for(const wt of nt){const jt=new zu;jt.text=wt[0],jt.sectionIndex=wt[1],jt.sections=ae.sections,_e.push(jt)}}else _e=function(nt,wt){const jt=[],mi=nt.text;let qt=0;for(const Gt of wt)jt.push(nt.substring(qt,Gt)),qt=Gt;return qt<mi.length&&jt.push(nt.substring(qt,mi.length)),jt}(ae,Xd(ae,S,p,t,o,Y));const ze=[],He={positionedLines:ze,text:ae.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:P,iconsInText:!1,verticalizable:!1};return function(nt,wt,jt,mi,qt,Gt,si,Wt,Kt,ht,li,ri){let xi=0,_n=Mh,pn=0,lr=0;const As=Wt==="right"?1:Wt==="left"?0:.5;let wr=0;for(const Hn of qt){Hn.trim();const ur=Hn.getMaxScale(),Lr=(ur-1)*sr,Cr={positionedGlyphs:[],lineOffset:0};nt.positionedLines[wr]=Cr;const Kr=Cr.positionedGlyphs;let Br=0;if(!Hn.length()){_n+=Gt,++wr;continue}for(let ua=0;ua<Hn.length();ua++){const Zi=Hn.getSection(ua),xn=Hn.getSectionIndex(ua),Cn=Hn.getCharCode(ua);let Ea=0,zn=null,Ou=null,ho=null,Ao=sr;const ds=!(Kt===v.ah.horizontal||!li&&!oa(Cn)||li&&(QA[Cn]||(cr=Cn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(cr)))));if(Zi.imageName){const ja=mi[Zi.imageName];if(!ja)continue;ho=Zi.imageName,nt.iconsInText=nt.iconsInText||!0,Ou=ja.paddedRect;const fr=ja.displaySize;Zi.scale=Zi.scale*sr/ri,zn={width:fr[0],height:fr[1],left:ca,top:-Up,advance:ds?fr[1]:fr[0]},Ea=Lr+(sr-fr[1]*Zi.scale),Ao=zn.advance;const al=ds?fr[0]*Zi.scale-sr*ur:fr[1]*Zi.scale-sr*ur;al>0&&al>Br&&(Br=al)}else{const ja=jt[Zi.fontStack],fr=ja&&ja[Cn];if(fr&&fr.rect)Ou=fr.rect,zn=fr.metrics;else{const al=wt[Zi.fontStack],Gh=al&&al[Cn];if(!Gh)continue;zn=Gh.metrics}Ea=(ur-Zi.scale)*sr}ds?(nt.verticalizable=!0,Kr.push({glyph:Cn,imageName:ho,x:xi,y:_n+Ea,vertical:ds,scale:Zi.scale,fontStack:Zi.fontStack,sectionIndex:xn,metrics:zn,rect:Ou}),xi+=Ao*Zi.scale+ht):(Kr.push({glyph:Cn,imageName:ho,x:xi,y:_n+Ea,vertical:ds,scale:Zi.scale,fontStack:Zi.fontStack,sectionIndex:xn,metrics:zn,rect:Ou}),xi+=zn.advance*Zi.scale+ht)}Kr.length!==0&&(pn=Math.max(xi-ht,pn),B1(Kr,0,Kr.length-1,As,Br)),xi=0;const Ha=Gt*ur+Br;Cr.lineOffset=Math.max(Br,Lr),_n+=Ha,lr=Math.max(Ha,lr),++wr}var cr;const jr=_n-Mh,{horizontalAlign:Jr,verticalAlign:Yr}=ef(si);(function(Hn,ur,Lr,Cr,Kr,Br,Ha,ua,Zi){const xn=(ur-Lr)*Kr;let Cn=0;Cn=Br!==Ha?-ua*Cr-Mh:(-Cr*Zi+.5)*Ha;for(const Ea of Hn)for(const zn of Ea.positionedGlyphs)zn.x+=xn,zn.y+=Cn})(nt.positionedLines,As,Jr,Yr,pn,lr,Gt,jr,qt.length),nt.top+=-Yr*jr,nt.bottom=nt.top+jr,nt.left+=-Jr*pn,nt.right=nt.left+pn}(He,t,r,o,_e,m,x,B,P,S,O,ne),!function(nt){for(const wt of nt)if(wt.positionedGlyphs.length!==0)return!1;return!0}(ze)&&He}const QA={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},x1={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},w1={40:!0};function qp(n,t,r,o,A,p){if(t.imageName){const m=o[t.imageName];return m?m.displaySize[0]*t.scale*sr/p+A:0}{const m=r[t.fontStack],x=m&&m[n];return x?x.metrics.advance*t.scale+A:0}}function Hp(n,t,r,o){const A=Math.pow(n-t,2);return o?n<t?A/2:2*A:A+Math.abs(r)*r}function C1(n,t,r){let o=0;return n===10&&(o-=1e4),r&&(o+=150),n!==40&&n!==65288||(o+=50),t!==41&&t!==65289||(o+=50),o}function jp(n,t,r,o,A,p){let m=null,x=Hp(t,r,A,p);for(const B of o){const S=Hp(t-B.x,r,A,p)+B.badness;S<=x&&(m=B,x=S)}return{index:n,x:t,priorBreak:m,badness:x}}function Jp(n){return n?Jp(n.priorBreak).concat(n.index):[]}function Xd(n,t,r,o,A,p){if(!n)return[];const m=[],x=function(P,O,Y,ne,ae,_e){let Be=0;for(let Ke=0;Ke<P.length();Ke++){const ze=P.getSection(Ke);Be+=qp(P.getCharCode(Ke),ze,ne,ae,O,_e)}return Be/Math.max(1,Math.ceil(Be/Y))}(n,t,r,o,A,p),B=n.text.indexOf("")>=0;let S=0;for(let P=0;P<n.length();P++){const O=n.getSection(P),Y=n.getCharCode(P);if(QA[Y]||(S+=qp(Y,O,o,A,t,p)),P<n.length()-1){const ne=!((M=Y)<11904)&&(!!Ii["CJK Compatibility Forms"](M)||!!Ii["CJK Compatibility"](M)||!!Ii["CJK Strokes"](M)||!!Ii["CJK Symbols and Punctuation"](M)||!!Ii["Enclosed CJK Letters and Months"](M)||!!Ii["Halfwidth and Fullwidth Forms"](M)||!!Ii["Ideographic Description Characters"](M)||!!Ii["Vertical Forms"](M)||Ca.test(String.fromCodePoint(M)));(x1[Y]||ne||O.imageName||P!==n.length()-2&&w1[n.getCharCode(P+1)])&&m.push(jp(P+1,S,x,m,C1(Y,n.getCharCode(P+1),ne&&B),!1))}}var M;return Jp(jp(n.length(),S,x,m,0,!0))}function ef(n){let t=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function B1(n,t,r,o,A){if(!o&&!A)return;const p=n[r],m=(n[r].x+p.metrics.advance*p.scale)*o;for(let x=t;x<=r;x++)n[x].x-=m,n[x].y+=A}function E1(n,t,r){const{horizontalAlign:o,verticalAlign:A}=ef(r),p=t[0]-n.displaySize[0]*o,m=t[1]-n.displaySize[1]*A;return{image:n,top:m,bottom:m+n.displaySize[1],left:p,right:p+n.displaySize[0]}}function Yp(n){var t,r;let o=n.left,A=n.top,p=n.right-o,m=n.bottom-A;const x=(t=n.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",B=(r=n.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",S=(n.image.content[2]-n.image.content[0])/(n.image.content[3]-n.image.content[1]);if(B==="proportional"){if(x==="stretchOnly"&&p/m<S||x==="proportional"){const M=Math.ceil(m*S);o*=M/p,p=M}}else if(x==="proportional"&&B==="stretchOnly"&&S!==0&&p/m>S){const M=Math.ceil(p/S);A*=M/m,m=M}return{x1:o,y1:A,x2:o+p,y2:A+m}}function Kp(n,t,r,o,A,p){const m=n.image;let x;if(m.content){const _e=m.content,Be=m.pixelRatio||1;x=[_e[0]/Be,_e[1]/Be,m.displaySize[0]-_e[2]/Be,m.displaySize[1]-_e[3]/Be]}const B=t.left*p,S=t.right*p;let M,P,O,Y;r==="width"||r==="both"?(Y=A[0]+B-o[3],P=A[0]+S+o[1]):(Y=A[0]+(B+S-m.displaySize[0])/2,P=Y+m.displaySize[0]);const ne=t.top*p,ae=t.bottom*p;return r==="height"||r==="both"?(M=A[1]+ne-o[0],O=A[1]+ae+o[2]):(M=A[1]+(ne+ae-m.displaySize[1])/2,O=M+m.displaySize[1]),{image:m,top:M,right:P,bottom:O,left:Y,collisionPadding:x}}const Ph=255,uo=128,jl=Ph*uo;function $p(n,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new $i(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:A}=r;let p=0;for(;p<o.length&&o[p]<=n;)p++;p=Math.max(0,p-1);let m=p;for(;m<o.length&&o[m]<n+1;)m++;m=Math.min(o.length-1,m);const x=o[p],B=o[m];return r.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:B,interpolationType:A}:{kind:"camera",minZoom:x,maxZoom:B,minSize:r.evaluate(new $i(x)),maxSize:r.evaluate(new $i(B)),interpolationType:A}}}function tf(n,t,r){let o="never";const A=n.get(t);return A?o=A:n.get(r)&&(o="always"),o}const Q1=ql.VectorTileFeature.types,S1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function SA(n,t,r,o,A,p,m,x,B,S,M,P,O){const Y=x?Math.min(jl,Math.round(x[0])):0,ne=x?Math.min(jl,Math.round(x[1])):0;n.emplaceBack(t,r,Math.round(32*o),Math.round(32*A),p,m,(Y<<1)+(B?1:0),ne,16*S,16*M,256*P,256*O)}function nf(n,t,r){n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r),n.emplaceBack(t.x,t.y,r)}function k1(n){for(const t of n.sections)if(Hc(t.text))return!0;return!1}class rf{constructor(t){this.layoutVertexArray=new qe,this.indexArray=new he,this.programConfigurations=t,this.segments=new Te,this.dynamicLayoutVertexArray=new Pe,this.opacityVertexArray=new $e,this.hasVisibleVertices=!1,this.placedSymbolArray=new y}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,o,A){this.isEmpty()||(o&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,s1.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,o1.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,S1,!0),this.opacityVertexBuffer.itemSize=1),(o||A)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",rf);class af{constructor(t,r,o){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new o,this.segments=new Te,this.collisionVertexArray=new U}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,l1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",af);class Gu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(m=>m.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fd([]),this.placementViewportMatrix=Fd([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$p(this.zoom,r["text-size"]),this.iconSizeData=$p(this.zoom,r["icon-size"]);const o=this.layers[0].layout,A=o.get("symbol-sort-key"),p=o.get("symbol-z-order");this.canOverlap=tf(o,"text-overlap","text-allow-overlap")!=="never"||tf(o,"icon-overlap","icon-allow-overlap")!=="never"||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&!A.isConstant(),this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,o.get("symbol-placement")==="point"&&(this.writingModes=o.get("text-writing-mode").map(m=>v.ah[m])),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=t.sourceID}createArrays(){this.text=new rf(new _i(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new rf(new _i(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new F,this.lineVertexArray=new $,this.symbolInstances=new T,this.textAnchorOffsets=new re}calculateGlyphDependencies(t,r,o,A,p){for(let m=0;m<t.length;m++)if(r[t.charCodeAt(m)]=!0,(o||A)&&p){const x=Dh[t.charAt(m)];x&&(r[x.charCodeAt(0)]=!0)}}populate(t,r,o){const A=this.layers[0],p=A.layout,m=p.get("text-font"),x=p.get("text-field"),B=p.get("icon-image"),S=(x.value.kind!=="constant"||x.value.value instanceof Sr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),M=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,P=p.get("symbol-sort-key");if(this.features=[],!S&&!M)return;const O=r.iconDependencies,Y=r.glyphDependencies,ne=r.availableImages,ae=new $i(this.zoom);for(const{feature:_e,id:Be,index:Ke,sourceLayerIndex:ze}of t){const He=A._featureFilter.needGeometry,nt=nl(_e,He);if(!A._featureFilter.filter(ae,nt,o))continue;let wt,jt;if(He||(nt.geometry=Ua(_e)),S){const qt=A.getValueAndResolveTokens("text-field",nt,o,ne),Gt=Sr.factory(qt),si=this.hasRTLText=this.hasRTLText||k1(Gt);(!si||on.getRTLTextPluginStatus()==="unavailable"||si&&on.isParsed())&&(wt=u1(Gt,A,nt))}if(M){const qt=A.getValueAndResolveTokens("icon-image",nt,o,ne);jt=qt instanceof _r?qt:_r.fromString(qt)}if(!wt&&!jt)continue;const mi=this.sortFeaturesByKey?P.evaluate(nt,{},o):void 0;if(this.features.push({id:Be,text:wt,icon:jt,index:Ke,sourceLayerIndex:ze,geometry:nt.geometry,properties:_e.properties,type:Q1[_e.type],sortKey:mi}),jt&&(O[jt.name]=!0),wt){const qt=m.evaluate(nt,{},o).join(","),Gt=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.ah.vertical)>=0;for(const si of wt.sections)if(si.image)O[si.image.name]=!0;else{const Wt=zl(wt.toString()),Kt=si.fontStack||qt,ht=Y[Kt]=Y[Kt]||{};this.calculateGlyphDependencies(si.text,ht,Gt,this.allowVerticalPlacement,Wt)}}}p.get("symbol-placement")==="line"&&(this.features=function(_e){const Be={},Ke={},ze=[];let He=0;function nt(qt){ze.push(_e[qt]),He++}function wt(qt,Gt,si){const Wt=Ke[qt];return delete Ke[qt],Ke[Gt]=Wt,ze[Wt].geometry[0].pop(),ze[Wt].geometry[0]=ze[Wt].geometry[0].concat(si[0]),Wt}function jt(qt,Gt,si){const Wt=Be[Gt];return delete Be[Gt],Be[qt]=Wt,ze[Wt].geometry[0].shift(),ze[Wt].geometry[0]=si[0].concat(ze[Wt].geometry[0]),Wt}function mi(qt,Gt,si){const Wt=si?Gt[0][Gt[0].length-1]:Gt[0][0];return`${qt}:${Wt.x}:${Wt.y}`}for(let qt=0;qt<_e.length;qt++){const Gt=_e[qt],si=Gt.geometry,Wt=Gt.text?Gt.text.toString():null;if(!Wt){nt(qt);continue}const Kt=mi(Wt,si),ht=mi(Wt,si,!0);if(Kt in Ke&&ht in Be&&Ke[Kt]!==Be[ht]){const li=jt(Kt,ht,si),ri=wt(Kt,ht,ze[li].geometry);delete Be[Kt],delete Ke[ht],Ke[mi(Wt,ze[ri].geometry,!0)]=ri,ze[li].geometry=null}else Kt in Ke?wt(Kt,ht,si):ht in Be?jt(Kt,ht,si):(nt(qt),Be[Kt]=He-1,Ke[ht]=He-1)}return ze.filter(qt=>qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((_e,Be)=>_e.sortKey-Be.sortKey)}update(t,r,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,o),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,o))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const o=this.lineVertexArray.length;if(t.segment!==void 0){let A=t.dist(r[t.segment+1]),p=t.dist(r[t.segment]);const m={};for(let x=t.segment+1;x<r.length;x++)m[x]={x:r[x].x,y:r[x].y,tileUnitDistanceFromAnchor:A},x<r.length-1&&(A+=r[x+1].dist(r[x]));for(let x=t.segment||0;x>=0;x--)m[x]={x:r[x].x,y:r[x].y,tileUnitDistanceFromAnchor:p},x>0&&(p+=r[x-1].dist(r[x]));for(let x=0;x<r.length;x++){const B=m[x];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(t,r,o,A,p,m,x,B,S,M,P,O){const Y=t.indexArray,ne=t.layoutVertexArray,ae=t.segments.prepareSegment(4*r.length,ne,Y,this.canOverlap?m.sortKey:void 0),_e=this.glyphOffsetArray.length,Be=ae.vertexLength,Ke=this.allowVerticalPlacement&&x===v.ah.vertical?Math.PI/2:0,ze=m.text&&m.text.sections;for(let He=0;He<r.length;He++){const{tl:nt,tr:wt,bl:jt,br:mi,tex:qt,pixelOffsetTL:Gt,pixelOffsetBR:si,minFontScaleX:Wt,minFontScaleY:Kt,glyphOffset:ht,isSDF:li,sectionIndex:ri}=r[He],xi=ae.vertexLength,_n=ht[1];SA(ne,B.x,B.y,nt.x,_n+nt.y,qt.x,qt.y,o,li,Gt.x,Gt.y,Wt,Kt),SA(ne,B.x,B.y,wt.x,_n+wt.y,qt.x+qt.w,qt.y,o,li,si.x,Gt.y,Wt,Kt),SA(ne,B.x,B.y,jt.x,_n+jt.y,qt.x,qt.y+qt.h,o,li,Gt.x,si.y,Wt,Kt),SA(ne,B.x,B.y,mi.x,_n+mi.y,qt.x+qt.w,qt.y+qt.h,o,li,si.x,si.y,Wt,Kt),nf(t.dynamicLayoutVertexArray,B,Ke),Y.emplaceBack(xi,xi+1,xi+2),Y.emplaceBack(xi+1,xi+2,xi+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),He!==r.length-1&&ri===r[He+1].sectionIndex||t.programConfigurations.populatePaintArrays(ne.length,m,m.index,{},O,ze&&ze[ri])}t.placedSymbolArray.emplaceBack(B.x,B.y,_e,this.glyphOffsetArray.length-_e,Be,S,M,B.segment,o?o[0]:0,o?o[1]:0,A[0],A[1],x,0,!1,0,P)}_addCollisionDebugVertex(t,r,o,A,p,m){return r.emplaceBack(0,0),t.emplaceBack(o.x,o.y,A,p,Math.round(m.x),Math.round(m.y))}addCollisionDebugVertices(t,r,o,A,p,m,x){const B=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),S=B.vertexLength,M=p.layoutVertexArray,P=p.collisionVertexArray,O=x.anchorX,Y=x.anchorY;this._addCollisionDebugVertex(M,P,m,O,Y,new q(t,r)),this._addCollisionDebugVertex(M,P,m,O,Y,new q(o,r)),this._addCollisionDebugVertex(M,P,m,O,Y,new q(o,A)),this._addCollisionDebugVertex(M,P,m,O,Y,new q(t,A)),B.vertexLength+=4;const ne=p.indexArray;ne.emplaceBack(S,S+1),ne.emplaceBack(S+1,S+2),ne.emplaceBack(S+2,S+3),ne.emplaceBack(S+3,S),B.primitiveLength+=4}addDebugCollisionBoxes(t,r,o,A){for(let p=t;p<r;p++){const m=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,A?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,o)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new af(te,Tp.members,le),this.iconCollisionBox=new af(te,Tp.members,le);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,o,A,p,m,x,B,S){const M={};for(let P=r;P<o;P++){const O=t.get(P);M.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.textFeatureIndex=O.featureIndex;break}for(let P=A;P<p;P++){const O=t.get(P);M.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.verticalTextFeatureIndex=O.featureIndex;break}for(let P=m;P<x;P++){const O=t.get(P);M.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.iconFeatureIndex=O.featureIndex;break}for(let P=B;P<S;P++){const O=t.get(P);M.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.verticalIconFeatureIndex=O.featureIndex;break}return M}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const o=t.placedSymbolArray.get(r),A=o.vertexStartIndex+4*o.numGlyphs;for(let p=o.vertexStartIndex;p<A;p+=4)t.indexArray.emplaceBack(p,p+1,p+2),t.indexArray.emplaceBack(p+1,p+2,p+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),o=Math.cos(t),A=[],p=[],m=[];for(let x=0;x<this.symbolInstances.length;++x){m.push(x);const B=this.symbolInstances.get(x);A.push(0|Math.round(r*B.anchorX+o*B.anchorY)),p.push(B.featureIndex)}return m.sort((x,B)=>A[x]-A[B]||p[B]-p[x]),m}addToSortKeyRanges(t,r){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===r?o.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const o=this.symbolInstances.get(r);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((A,p,m)=>{A>=0&&m.indexOf(A)===p&&this.addIndicesForPlacedSymbol(this.text,A)}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Zp,Wp;Ut("SymbolBucket",Gu,{omit:["layers","collisionBoxArray","features","compareText"]}),Gu.MAX_GLYPHS=65535,Gu.addDynamicAttributes=nf;var sf={get paint(){return Wp=Wp||new Ir({"icon-opacity":new Ai(xe.paint_symbol["icon-opacity"]),"icon-color":new Ai(xe.paint_symbol["icon-color"]),"icon-halo-color":new Ai(xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ai(xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ai(xe.paint_symbol["icon-halo-blur"]),"icon-translate":new ni(xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new ni(xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ai(xe.paint_symbol["text-opacity"]),"text-color":new Ai(xe.paint_symbol["text-color"],{runtimeType:fn,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new Ai(xe.paint_symbol["text-halo-color"]),"text-halo-width":new Ai(xe.paint_symbol["text-halo-width"]),"text-halo-blur":new Ai(xe.paint_symbol["text-halo-blur"]),"text-translate":new ni(xe.paint_symbol["text-translate"]),"text-translate-anchor":new ni(xe.paint_symbol["text-translate-anchor"])})},get layout(){return Zp=Zp||new Ir({"symbol-placement":new ni(xe.layout_symbol["symbol-placement"]),"symbol-spacing":new ni(xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ni(xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ai(xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ni(xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ni(xe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ni(xe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ni(xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new ni(xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ni(xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ai(xe.layout_symbol["icon-size"]),"icon-text-fit":new ni(xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ni(xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ai(xe.layout_symbol["icon-image"]),"icon-rotate":new Ai(xe.layout_symbol["icon-rotate"]),"icon-padding":new Ai(xe.layout_symbol["icon-padding"]),"icon-keep-upright":new ni(xe.layout_symbol["icon-keep-upright"]),"icon-offset":new Ai(xe.layout_symbol["icon-offset"]),"icon-anchor":new Ai(xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ni(xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ni(xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ni(xe.layout_symbol["text-rotation-alignment"]),"text-field":new Ai(xe.layout_symbol["text-field"]),"text-font":new Ai(xe.layout_symbol["text-font"]),"text-size":new Ai(xe.layout_symbol["text-size"]),"text-max-width":new Ai(xe.layout_symbol["text-max-width"]),"text-line-height":new ni(xe.layout_symbol["text-line-height"]),"text-letter-spacing":new Ai(xe.layout_symbol["text-letter-spacing"]),"text-justify":new Ai(xe.layout_symbol["text-justify"]),"text-radial-offset":new Ai(xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ni(xe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ai(xe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ai(xe.layout_symbol["text-anchor"]),"text-max-angle":new ni(xe.layout_symbol["text-max-angle"]),"text-writing-mode":new ni(xe.layout_symbol["text-writing-mode"]),"text-rotate":new Ai(xe.layout_symbol["text-rotate"]),"text-padding":new ni(xe.layout_symbol["text-padding"]),"text-keep-upright":new ni(xe.layout_symbol["text-keep-upright"]),"text-transform":new Ai(xe.layout_symbol["text-transform"]),"text-offset":new Ai(xe.layout_symbol["text-offset"]),"text-allow-overlap":new ni(xe.layout_symbol["text-allow-overlap"]),"text-overlap":new ni(xe.layout_symbol["text-overlap"]),"text-ignore-placement":new ni(xe.layout_symbol["text-ignore-placement"]),"text-optional":new ni(xe.layout_symbol["text-optional"])})}};class Xp{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Pn,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",Xp,{omit:["defaultValue"]});class kA extends e{constructor(t){super(t,sf)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const o=this.layout.get("text-writing-mode");if(o){const A=[];for(const p of o)A.indexOf(p)<0&&A.push(p);this.layout._values["text-writing-mode"]=A}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,o,A){const p=this.layout.get(t).evaluate(r,{},o,A),m=this._unevaluatedLayout._values[t];return m.isDataDriven()||Ws(m.value)||!p?p:function(x,B){return B.replace(/{([^{}]+)}/g,(S,M)=>x&&M in x?String(x[M]):"")}(r.properties,p)}createBucket(t){return new Gu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of sf.paint.overridableProperties){if(!kA.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),o=new Xp(r),A=new zo(o,r.property.specification);let p=null;p=r.value.kind==="constant"||r.value.kind==="source"?new No("source",A):new Xs("composite",A,r.value.zoomStops),this.paint._values[t]=new or(r.property,p,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,o){return!(!this.layout||r.isDataDriven()||o.isDataDriven())&&kA.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const o=t.get("text-field"),A=sf.paint.properties[r];let p=!1;const m=x=>{for(const B of x)if(A.overrides&&A.overrides.hasOverride(B))return void(p=!0)};if(o.value.kind==="constant"&&o.value.value instanceof Sr)m(o.value.value.sections);else if(o.value.kind==="source"){const x=S=>{p||(S instanceof ta&&Vn(S.value)===ya?m(S.value.sections):S instanceof Cl?m(S.sections):S.eachChild(x))},B=o.value;B._styleExpression&&x(B._styleExpression.expression)}return p}}let em;var D1={get paint(){return em=em||new Ir({"background-color":new ni(xe.paint_background["background-color"]),"background-pattern":new Jc(xe.paint_background["background-pattern"]),"background-opacity":new ni(xe.paint_background["background-opacity"])})}};class M1 extends e{constructor(t){super(t,D1)}}let tm;var T1={get paint(){return tm=tm||new Ir({"raster-opacity":new ni(xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new ni(xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ni(xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ni(xe.paint_raster["raster-brightness-max"]),"raster-saturation":new ni(xe.paint_raster["raster-saturation"]),"raster-contrast":new ni(xe.paint_raster["raster-contrast"]),"raster-resampling":new ni(xe.paint_raster["raster-resampling"]),"raster-fade-duration":new ni(xe.paint_raster["raster-fade-duration"])})}};class P1 extends e{constructor(t){super(t,T1)}}class R1 extends e{constructor(t){super(t,{}),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class L1{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const of=63710088e-1;class Jl{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Jl(Rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,o=this.lat*r,A=t.lat*r,p=Math.sin(o)*Math.sin(A)+Math.cos(o)*Math.cos(A)*Math.cos((t.lng-this.lng)*r);return of*Math.acos(Math.min(p,1))}static convert(t){if(t instanceof Jl)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Jl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Jl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const im=2*Math.PI*of;function nm(n){return im*Math.cos(n*Math.PI/180)}function rm(n){return(180+n)/360}function am(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function sm(n,t){return n/nm(t)}function lf(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}class Rh{constructor(t,r,o=0){this.x=+t,this.y=+r,this.z=+o}static fromLngLat(t,r=0){const o=Jl.convert(t);return new Rh(rm(o.lng),am(o.lat),sm(r,o.lat))}toLngLat(){return new Jl(360*this.x-180,lf(this.y))}toAltitude(){return this.z*nm(lf(this.y))}meterInMercatorCoordinateUnits(){return 1/im*(t=lf(this.y),1/Math.cos(t*Math.PI/180));var t}}function om(n,t,r){var o=2*Math.PI*6378137/256/Math.pow(2,r);return[n*o-2*Math.PI*6378137/2,t*o-2*Math.PI*6378137/2]}class cf{constructor(t,r,o){if(!function(A,p,m){return!(A<0||A>25||m<0||m>=Math.pow(2,A)||p<0||p>=Math.pow(2,A))}(t,r,o))throw new Error(`x=${r}, y=${o}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=o,this.key=Lh(0,t,t,r,o)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,o){const A=(m=this.y,x=this.z,B=om(256*(p=this.x),256*(m=Math.pow(2,x)-m-1),x),S=om(256*(p+1),256*(m+1),x),B[0]+","+B[1]+","+S[0]+","+S[1]);var p,m,x,B,S;const M=function(P,O,Y){let ne,ae="";for(let _e=P;_e>0;_e--)ne=1<<_e-1,ae+=(O&ne?1:0)+(Y&ne?2:0);return ae}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,A)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new q((t.x*r-this.x)*Fn,(t.y*r-this.y)*Fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lm{constructor(t,r){this.wrap=t,this.canonical=r,this.key=Lh(t,r.z,r.z,r.x,r.y)}}class qa{constructor(t,r,o,A,p){if(t<o)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${o}`);this.overscaledZ=t,this.wrap=r,this.canonical=new cf(o,+A,+p),this.key=Lh(r,t,o,A,p)}clone(){return new qa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new qa(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qa(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?Lh(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):Lh(this.wrap*+r,t,t,this.canonical.x>>o,this.canonical.y>>o)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new qa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,o=2*this.canonical.x,A=2*this.canonical.y;return[new qa(r,this.wrap,r,o,A),new qa(r,this.wrap,r,o+1,A),new qa(r,this.wrap,r,o,A+1),new qa(r,this.wrap,r,o+1,A+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new qa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new qa(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Rh(t.x-this.wrap,t.y))}}function Lh(n,t,r,o,A){(n*=2)<0&&(n=-1*n-1);const p=1<<r;return(p*p*n+p*A+o).toString(36)+r.toString(36)+t.toString(36)}Ut("CanonicalTileID",cf),Ut("OverscaledTileID",qa,{omit:["posMatrix"]});class cm{constructor(t,r,o,A=1,p=1,m=1,x=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(o&&!["mapbox","terrarium","custom"].includes(o))return void yt(`"${o}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const B=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),o){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=A,this.greenFactor=p,this.blueFactor=m,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let S=0;S<B;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(B,S)]=this.data[this._idx(B-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,B)]=this.data[this._idx(S,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<B;S++)for(let M=0;M<B;M++){const P=this.get(S,M);P>this.max&&(this.max=P),P<this.min&&(this.min=P)}}get(t,r){const o=new Uint8Array(this.data.buffer),A=4*this._idx(t,r);return this.unpack(o[A],o[A+1],o[A+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,o){return t*this.redFactor+r*this.greenFactor+o*this.blueFactor-this.baseShift}getPixels(){return new Va({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,o){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let A=r*this.dim,p=r*this.dim+this.dim,m=o*this.dim,x=o*this.dim+this.dim;switch(r){case-1:A=p-1;break;case 1:p=A+1}switch(o){case-1:m=x-1;break;case 1:x=m+1}const B=-r*this.dim,S=-o*this.dim;for(let M=m;M<x;M++)for(let P=A;P<p;P++)this.data[this._idx(P,M)]=t.data[this._idx(P+B,M+S)]}}Ut("DEMData",cm);class um{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const o=t[r];this._stringToNumber[o]=r,this._numberToString[r]=o}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class hm{constructor(t,r,o,A,p){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=o,t._y=A,this.properties=t.properties,this.id=p}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class Am{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new so(Fn,16,0),this.grid3D=new so(Fn,16,0),this.featureIndexArray=new Z,this.promoteId=r}insert(t,r,o,A,p,m){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,A,p);const B=m?this.grid3D:this.grid;for(let S=0;S<r.length;S++){const M=r[S],P=[1/0,1/0,-1/0,-1/0];for(let O=0;O<M.length;O++){const Y=M[O];P[0]=Math.min(P[0],Y.x),P[1]=Math.min(P[1],Y.y),P[2]=Math.max(P[2],Y.x),P[3]=Math.max(P[3],Y.y)}P[0]<Fn&&P[1]<Fn&&P[2]>=0&&P[3]>=0&&B.insert(x,P[0],P[1],P[2],P[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new $d(this.rawTileData)).layers,this.sourceLayerCoder=new um(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,o,A){this.loadVTLayers();const p=t.params||{},m=Fn/t.tileSize/t.scale,x=io(p.filter),B=t.queryGeometry,S=t.queryPadding*m,M=fm(B),P=this.grid.query(M.minX-S,M.minY-S,M.maxX+S,M.maxY+S),O=fm(t.cameraQueryGeometry),Y=this.grid3D.query(O.minX-S,O.minY-S,O.maxX+S,O.maxY+S,(_e,Be,Ke,ze)=>function(He,nt,wt,jt,mi){for(const Gt of He)if(nt<=Gt.x&&wt<=Gt.y&&jt>=Gt.x&&mi>=Gt.y)return!0;const qt=[new q(nt,wt),new q(nt,mi),new q(jt,mi),new q(jt,wt)];if(He.length>2){for(const Gt of qt)if(Mu(He,Gt))return!0}for(let Gt=0;Gt<He.length-1;Gt++)if(pI(He[Gt],He[Gt+1],qt))return!0;return!1}(t.cameraQueryGeometry,_e-S,Be-S,Ke+S,ze+S));for(const _e of Y)P.push(_e);P.sort(F1);const ne={};let ae;for(let _e=0;_e<P.length;_e++){const Be=P[_e];if(Be===ae)continue;ae=Be;const Ke=this.featureIndexArray.get(Be);let ze=null;this.loadMatchingFeature(ne,Ke.bucketIndex,Ke.sourceLayerIndex,Ke.featureIndex,x,p.layers,p.availableImages,r,o,A,(He,nt,wt)=>(ze||(ze=Ua(He)),nt.queryIntersectsFeature(B,He,wt,ze,this.z,t.transform,m,t.pixelPosMatrix)))}return ne}loadMatchingFeature(t,r,o,A,p,m,x,B,S,M,P){const O=this.bucketLayerIDs[r];if(m&&!function(_e,Be){for(let Ke=0;Ke<_e.length;Ke++)if(Be.indexOf(_e[Ke])>=0)return!0;return!1}(m,O))return;const Y=this.sourceLayerCoder.decode(o),ne=this.vtLayers[Y].feature(A);if(p.needGeometry){const _e=nl(ne,!0);if(!p.filter(new $i(this.tileID.overscaledZ),_e,this.tileID.canonical))return}else if(!p.filter(new $i(this.tileID.overscaledZ),ne))return;const ae=this.getId(ne,Y);for(let _e=0;_e<O.length;_e++){const Be=O[_e];if(m&&m.indexOf(Be)<0)continue;const Ke=B[Be];if(!Ke)continue;let ze={};ae&&M&&(ze=M.getState(Ke.sourceLayer||"_geojsonTileLayer",ae));const He=Nt({},S[Be]);He.paint=dm(He.paint,Ke.paint,ne,ze,x),He.layout=dm(He.layout,Ke.layout,ne,ze,x);const nt=!P||P(ne,Ke,ze);if(!nt)continue;const wt=new hm(ne,this.z,this.x,this.y,ae);wt.layer=He;let jt=t[Be];jt===void 0&&(jt=t[Be]=[]),jt.push({featureIndex:A,feature:wt,intersectionZ:nt})}}lookupSymbolFeatures(t,r,o,A,p,m,x,B){const S={};this.loadVTLayers();const M=io(p);for(const P of t)this.loadMatchingFeature(S,o,A,P,M,m,x,B,r);return S}hasLayer(t){for(const r of this.bucketLayerIDs)for(const o of r)if(t===o)return!0;return!1}getId(t,r){let o=t.id;return this.promoteId&&(o=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof o=="boolean"&&(o=Number(o))),o}}function dm(n,t,r,o,A){return Et(n,(p,m)=>{const x=t instanceof lo?t.get(m):null;return x&&x.evaluate?x.evaluate(r,o,A):x})}function fm(n){let t=1/0,r=1/0,o=-1/0,A=-1/0;for(const p of n)t=Math.min(t,p.x),r=Math.min(r,p.y),o=Math.max(o,p.x),A=Math.max(A,p.y);return{minX:t,minY:r,maxX:o,maxY:A}}function F1(n,t){return t-n}function gm(n,t,r,o,A){const p=[];for(let m=0;m<n.length;m++){const x=n[m];let B;for(let S=0;S<x.length-1;S++){let M=x[S],P=x[S+1];M.x<t&&P.x<t||(M.x<t?M=new q(t,M.y+(t-M.x)/(P.x-M.x)*(P.y-M.y))._round():P.x<t&&(P=new q(t,M.y+(t-M.x)/(P.x-M.x)*(P.y-M.y))._round()),M.y<r&&P.y<r||(M.y<r?M=new q(M.x+(r-M.y)/(P.y-M.y)*(P.x-M.x),r)._round():P.y<r&&(P=new q(M.x+(r-M.y)/(P.y-M.y)*(P.x-M.x),r)._round()),M.x>=o&&P.x>=o||(M.x>=o?M=new q(o,M.y+(o-M.x)/(P.x-M.x)*(P.y-M.y))._round():P.x>=o&&(P=new q(o,M.y+(o-M.x)/(P.x-M.x)*(P.y-M.y))._round()),M.y>=A&&P.y>=A||(M.y>=A?M=new q(M.x+(A-M.y)/(P.y-M.y)*(P.x-M.x),A)._round():P.y>=A&&(P=new q(M.x+(A-M.y)/(P.y-M.y)*(P.x-M.x),A)._round()),B&&M.equals(B[B.length-1])||(B=[M],p.push(B)),B.push(P)))))}}return p}Ut("FeatureIndex",Am,{omit:["rawTileData","sourceLayerCoder"]});class Yl extends q{constructor(t,r,o,A){super(t,r),this.angle=o,A!==void 0&&(this.segment=A)}clone(){return new Yl(this.x,this.y,this.angle,this.segment)}}function pm(n,t,r,o,A){if(t.segment===void 0||r===0)return!0;let p=t,m=t.segment+1,x=0;for(;x>-r/2;){if(m--,m<0)return!1;x-=n[m].dist(p),p=n[m]}x+=n[m].dist(n[m+1]),m++;const B=[];let S=0;for(;x<r/2;){const M=n[m],P=n[m+1];if(!P)return!1;let O=n[m-1].angleTo(M)-M.angleTo(P);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:x,angleDelta:O}),S+=O;x-B[0].distance>o;)S-=B.shift().angleDelta;if(S>A)return!1;m++,x+=M.dist(P)}return!0}function mm(n){let t=0;for(let r=0;r<n.length-1;r++)t+=n[r].dist(n[r+1]);return t}function ym(n,t,r){return n?.6*t*r:0}function _m(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function z1(n,t,r,o,A,p){const m=ym(r,A,p),x=_m(r,o)*p;let B=0;const S=mm(n)/2;for(let M=0;M<n.length-1;M++){const P=n[M],O=n[M+1],Y=P.dist(O);if(B+Y>S){const ne=(S-B)/Y,ae=Ln.number(P.x,O.x,ne),_e=Ln.number(P.y,O.y,ne),Be=new Yl(ae,_e,O.angleTo(P),M);return Be._round(),!m||pm(n,Be,x,m,t)?Be:void 0}B+=Y}}function G1(n,t,r,o,A,p,m,x,B){const S=ym(o,p,m),M=_m(o,A),P=M*m,O=n[0].x===0||n[0].x===B||n[0].y===0||n[0].y===B;return t-P<t/4&&(t=P+t/4),vm(n,O?t/2*x%t:(M/2+2*p)*m*x%t,t,S,r,P,O,!1,B)}function vm(n,t,r,o,A,p,m,x,B){const S=p/2,M=mm(n);let P=0,O=t-r,Y=[];for(let ne=0;ne<n.length-1;ne++){const ae=n[ne],_e=n[ne+1],Be=ae.dist(_e),Ke=_e.angleTo(ae);for(;O+r<P+Be;){O+=r;const ze=(O-P)/Be,He=Ln.number(ae.x,_e.x,ze),nt=Ln.number(ae.y,_e.y,ze);if(He>=0&&He<B&&nt>=0&&nt<B&&O-S>=0&&O+S<=M){const wt=new Yl(He,nt,Ke,ne);wt._round(),o&&!pm(n,wt,p,o,A)||Y.push(wt)}}P+=Be}return x||Y.length||m||(Y=vm(n,P/2,r,o,A,p,m,!0,B)),Y}Ut("Anchor",Yl);const Nu=ca;function Im(n,t,r,o){const A=[],p=n.image,m=p.pixelRatio,x=p.paddedRect.w-2*Nu,B=p.paddedRect.h-2*Nu;let S={x1:n.left,y1:n.top,x2:n.right,y2:n.bottom};const M=p.stretchX||[[0,x]],P=p.stretchY||[[0,B]],O=(ht,li)=>ht+li[1]-li[0],Y=M.reduce(O,0),ne=P.reduce(O,0),ae=x-Y,_e=B-ne;let Be=0,Ke=Y,ze=0,He=ne,nt=0,wt=ae,jt=0,mi=_e;if(p.content&&o){const ht=p.content,li=ht[2]-ht[0],ri=ht[3]-ht[1];(p.textFitWidth||p.textFitHeight)&&(S=Yp(n)),Be=DA(M,0,ht[0]),ze=DA(P,0,ht[1]),Ke=DA(M,ht[0],ht[2]),He=DA(P,ht[1],ht[3]),nt=ht[0]-Be,jt=ht[1]-ze,wt=li-Ke,mi=ri-He}const qt=S.x1,Gt=S.y1,si=S.x2-qt,Wt=S.y2-Gt,Kt=(ht,li,ri,xi)=>{const _n=MA(ht.stretch-Be,Ke,si,qt),pn=TA(ht.fixed-nt,wt,ht.stretch,Y),lr=MA(li.stretch-ze,He,Wt,Gt),As=TA(li.fixed-jt,mi,li.stretch,ne),wr=MA(ri.stretch-Be,Ke,si,qt),cr=TA(ri.fixed-nt,wt,ri.stretch,Y),jr=MA(xi.stretch-ze,He,Wt,Gt),Jr=TA(xi.fixed-jt,mi,xi.stretch,ne),Yr=new q(_n,lr),Hn=new q(wr,lr),ur=new q(wr,jr),Lr=new q(_n,jr),Cr=new q(pn/m,As/m),Kr=new q(cr/m,Jr/m),Br=t*Math.PI/180;if(Br){const Zi=Math.sin(Br),xn=Math.cos(Br),Cn=[xn,-Zi,Zi,xn];Yr._matMult(Cn),Hn._matMult(Cn),Lr._matMult(Cn),ur._matMult(Cn)}const Ha=ht.stretch+ht.fixed,ua=li.stretch+li.fixed;return{tl:Yr,tr:Hn,bl:Lr,br:ur,tex:{x:p.paddedRect.x+Nu+Ha,y:p.paddedRect.y+Nu+ua,w:ri.stretch+ri.fixed-Ha,h:xi.stretch+xi.fixed-ua},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cr,pixelOffsetBR:Kr,minFontScaleX:wt/m/si,minFontScaleY:mi/m/Wt,isSDF:r}};if(o&&(p.stretchX||p.stretchY)){const ht=bm(M,ae,Y),li=bm(P,_e,ne);for(let ri=0;ri<ht.length-1;ri++){const xi=ht[ri],_n=ht[ri+1];for(let pn=0;pn<li.length-1;pn++)A.push(Kt(xi,li[pn],_n,li[pn+1]))}}else A.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:B+1}));return A}function DA(n,t,r){let o=0;for(const A of n)o+=Math.max(t,Math.min(r,A[1]))-Math.max(t,Math.min(r,A[0]));return o}function bm(n,t,r){const o=[{fixed:-Nu,stretch:0}];for(const[A,p]of n){const m=o[o.length-1];o.push({fixed:A-m.stretch,stretch:m.stretch}),o.push({fixed:A-m.stretch,stretch:m.stretch+(p-A)})}return o.push({fixed:t+Nu,stretch:r}),o}function MA(n,t,r,o){return n/t*r+o}function TA(n,t,r,o){return n-t*r/o}class PA{constructor(t,r,o,A,p,m,x,B,S,M){var P;if(this.boxStartIndex=t.length,S){let O=m.top,Y=m.bottom;const ne=m.collisionPadding;ne&&(O-=ne[1],Y+=ne[3]);let ae=Y-O;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{const O=!((P=m.image)===null||P===void 0)&&P.content&&(m.image.textFitWidth||m.image.textFitHeight)?Yp(m):{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom};O.y1=O.y1*x-B[0],O.y2=O.y2*x+B[2],O.x1=O.x1*x-B[3],O.x2=O.x2*x+B[1];const Y=m.collisionPadding;if(Y&&(O.x1-=Y[0]*x,O.y1-=Y[1]*x,O.x2+=Y[2]*x,O.y2+=Y[3]*x),M){const ne=new q(O.x1,O.y1),ae=new q(O.x2,O.y1),_e=new q(O.x1,O.y2),Be=new q(O.x2,O.y2),Ke=M*Math.PI/180;ne._rotate(Ke),ae._rotate(Ke),_e._rotate(Ke),Be._rotate(Ke),O.x1=Math.min(ne.x,ae.x,_e.x,Be.x),O.x2=Math.max(ne.x,ae.x,_e.x,Be.x),O.y1=Math.min(ne.y,ae.y,_e.y,Be.y),O.y2=Math.max(ne.y,ae.y,_e.y,Be.y)}t.emplaceBack(r.x,r.y,O.x1,O.y1,O.x2,O.y2,o,A,p)}this.boxEndIndex=t.length}}class N1{constructor(t=[],r=(o,A)=>o<A?-1:o>A?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:o}=this,A=r[t];for(;t>0;){const p=t-1>>1,m=r[p];if(o(A,m)>=0)break;r[t]=m,t=p}r[t]=A}_down(t){const{data:r,compare:o}=this,A=this.length>>1,p=r[t];for(;t<A;){let m=1+(t<<1);const x=m+1;if(x<this.length&&o(r[x],r[m])<0&&(m=x),o(r[m],p)>=0)break;r[t]=r[m],t=m}r[t]=p}}function U1(n,t=1,r=!1){let o=1/0,A=1/0,p=-1/0,m=-1/0;const x=n[0];for(let Y=0;Y<x.length;Y++){const ne=x[Y];(!Y||ne.x<o)&&(o=ne.x),(!Y||ne.y<A)&&(A=ne.y),(!Y||ne.x>p)&&(p=ne.x),(!Y||ne.y>m)&&(m=ne.y)}const B=Math.min(p-o,m-A);let S=B/2;const M=new N1([],O1);if(B===0)return new q(o,A);for(let Y=o;Y<p;Y+=B)for(let ne=A;ne<m;ne+=B)M.push(new Uu(Y+S,ne+S,S,n));let P=function(Y){let ne=0,ae=0,_e=0;const Be=Y[0];for(let Ke=0,ze=Be.length,He=ze-1;Ke<ze;He=Ke++){const nt=Be[Ke],wt=Be[He],jt=nt.x*wt.y-wt.x*nt.y;ae+=(nt.x+wt.x)*jt,_e+=(nt.y+wt.y)*jt,ne+=3*jt}return new Uu(ae/ne,_e/ne,0,Y)}(n),O=M.length;for(;M.length;){const Y=M.pop();(Y.d>P.d||!P.d)&&(P=Y,r&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,O)),Y.max-P.d<=t||(S=Y.h/2,M.push(new Uu(Y.p.x-S,Y.p.y-S,S,n)),M.push(new Uu(Y.p.x+S,Y.p.y-S,S,n)),M.push(new Uu(Y.p.x-S,Y.p.y+S,S,n)),M.push(new Uu(Y.p.x+S,Y.p.y+S,S,n)),O+=4)}return r&&(console.log(`num probes: ${O}`),console.log(`best distance: ${P.d}`)),P.p}function O1(n,t){return t.max-n.max}function Uu(n,t,r,o){this.p=new q(n,t),this.h=r,this.d=function(A,p){let m=!1,x=1/0;for(let B=0;B<p.length;B++){const S=p[B];for(let M=0,P=S.length,O=P-1;M<P;O=M++){const Y=S[M],ne=S[O];Y.y>A.y!=ne.y>A.y&&A.x<(ne.x-Y.x)*(A.y-Y.y)/(ne.y-Y.y)+Y.x&&(m=!m),x=Math.min(x,ap(A,Y,ne))}}return(m?1:-1)*Math.sqrt(x)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}var xr;v.aq=void 0,(xr=v.aq||(v.aq={}))[xr.center=1]="center",xr[xr.left=2]="left",xr[xr.right=3]="right",xr[xr.top=4]="top",xr[xr.bottom=5]="bottom",xr[xr["top-left"]=6]="top-left",xr[xr["top-right"]=7]="top-right",xr[xr["bottom-left"]=8]="bottom-left",xr[xr["bottom-right"]=9]="bottom-right";const Kl=7,uf=Number.POSITIVE_INFINITY;function xm(n,t){return t[1]!==uf?function(r,o,A){let p=0,m=0;switch(o=Math.abs(o),A=Math.abs(A),r){case"top-right":case"top-left":case"top":m=A-Kl;break;case"bottom-right":case"bottom-left":case"bottom":m=-A+Kl}switch(r){case"top-right":case"bottom-right":case"right":p=-o;break;case"top-left":case"bottom-left":case"left":p=o}return[p,m]}(n,t[0],t[1]):function(r,o){let A=0,p=0;o<0&&(o=0);const m=o/Math.SQRT2;switch(r){case"top-right":case"top-left":p=m-Kl;break;case"bottom-right":case"bottom-left":p=-m+Kl;break;case"bottom":p=-o+Kl;break;case"top":p=o-Kl}switch(r){case"top-right":case"bottom-right":A=-m;break;case"top-left":case"bottom-left":A=m;break;case"left":A=o;break;case"right":A=-o}return[A,p]}(n,t[0])}function wm(n,t,r){var o;const A=n.layout,p=(o=A.get("text-variable-anchor-offset"))===null||o===void 0?void 0:o.evaluate(t,{},r);if(p){const x=p.values,B=[];for(let S=0;S<x.length;S+=2){const M=B[S]=x[S],P=x[S+1].map(O=>O*sr);M.startsWith("top")?P[1]-=Kl:M.startsWith("bottom")&&(P[1]+=Kl),B[S+1]=P}return new yr(B)}const m=A.get("text-variable-anchor");if(m){let x;x=n._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[A.get("text-radial-offset").evaluate(t,{},r)*sr,uf]:A.get("text-offset").evaluate(t,{},r).map(S=>S*sr);const B=[];for(const S of m)B.push(S,xm(S,x));return new yr(B)}return null}function hf(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function V1(n,t,r,o,A,p,m,x,B,S,M){let P=p.textMaxSize.evaluate(t,{});P===void 0&&(P=m);const O=n.layers[0].layout,Y=O.get("icon-offset").evaluate(t,{},M),ne=Bm(r.horizontal),ae=m/24,_e=n.tilePixelRatio*ae,Be=n.tilePixelRatio*P/24,Ke=n.tilePixelRatio*x,ze=n.tilePixelRatio*O.get("symbol-spacing"),He=O.get("text-padding")*n.tilePixelRatio,nt=function(ht,li,ri,xi=1){const _n=ht.get("icon-padding").evaluate(li,{},ri),pn=_n&&_n.values;return[pn[0]*xi,pn[1]*xi,pn[2]*xi,pn[3]*xi]}(O,t,M,n.tilePixelRatio),wt=O.get("text-max-angle")/180*Math.PI,jt=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",mi=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",qt=O.get("symbol-placement"),Gt=ze/2,si=O.get("icon-text-fit");let Wt;o&&si!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(Wt=Kp(o,r.vertical,si,O.get("icon-text-fit-padding"),Y,ae)),ne&&(o=Kp(o,ne,si,O.get("icon-text-fit-padding"),Y,ae)));const Kt=(ht,li)=>{li.x<0||li.x>=Fn||li.y<0||li.y>=Fn||function(ri,xi,_n,pn,lr,As,wr,cr,jr,Jr,Yr,Hn,ur,Lr,Cr,Kr,Br,Ha,ua,Zi,xn,Cn,Ea,zn,Ou){const ho=ri.addToLineVertexArray(xi,_n);let Ao,ds,ja,fr,al=0,Gh=0,km=0,Dm=0,_f=-1,vf=-1;const sl={};let Mm=Ze("");if(ri.allowVerticalPlacement&&pn.vertical){const Fr=cr.layout.get("text-rotate").evaluate(xn,{},zn)+90;ja=new PA(jr,xi,Jr,Yr,Hn,pn.vertical,ur,Lr,Cr,Fr),wr&&(fr=new PA(jr,xi,Jr,Yr,Hn,wr,Br,Ha,Cr,Fr))}if(lr){const Fr=cr.layout.get("icon-rotate").evaluate(xn,{}),Ja=cr.layout.get("icon-text-fit")!=="none",Kc=Im(lr,Fr,Ea,Ja),Gs=wr?Im(wr,Fr,Ea,Ja):void 0;ds=new PA(jr,xi,Jr,Yr,Hn,lr,Br,Ha,!1,Fr),al=4*Kc.length;const $c=ri.iconSizeData;let fo=null;$c.kind==="source"?(fo=[uo*cr.layout.get("icon-size").evaluate(xn,{})],fo[0]>jl&&yt(`${ri.layerIds[0]}: Value for "icon-size" is >= ${Ph}. Reduce your "icon-size".`)):$c.kind==="composite"&&(fo=[uo*Cn.compositeIconSizes[0].evaluate(xn,{},zn),uo*Cn.compositeIconSizes[1].evaluate(xn,{},zn)],(fo[0]>jl||fo[1]>jl)&&yt(`${ri.layerIds[0]}: Value for "icon-size" is >= ${Ph}. Reduce your "icon-size".`)),ri.addSymbols(ri.icon,Kc,fo,Zi,ua,xn,v.ah.none,xi,ho.lineStartIndex,ho.lineLength,-1,zn),_f=ri.icon.placedSymbolArray.length-1,Gs&&(Gh=4*Gs.length,ri.addSymbols(ri.icon,Gs,fo,Zi,ua,xn,v.ah.vertical,xi,ho.lineStartIndex,ho.lineLength,-1,zn),vf=ri.icon.placedSymbolArray.length-1)}const Tm=Object.keys(pn.horizontal);for(const Fr of Tm){const Ja=pn.horizontal[Fr];if(!Ao){Mm=Ze(Ja.text);const Gs=cr.layout.get("text-rotate").evaluate(xn,{},zn);Ao=new PA(jr,xi,Jr,Yr,Hn,Ja,ur,Lr,Cr,Gs)}const Kc=Ja.positionedLines.length===1;if(km+=Cm(ri,xi,Ja,As,cr,Cr,xn,Kr,ho,pn.vertical?v.ah.horizontal:v.ah.horizontalOnly,Kc?Tm:[Fr],sl,_f,Cn,zn),Kc)break}pn.vertical&&(Dm+=Cm(ri,xi,pn.vertical,As,cr,Cr,xn,Kr,ho,v.ah.vertical,["vertical"],sl,vf,Cn,zn));const j1=Ao?Ao.boxStartIndex:ri.collisionBoxArray.length,J1=Ao?Ao.boxEndIndex:ri.collisionBoxArray.length,Y1=ja?ja.boxStartIndex:ri.collisionBoxArray.length,K1=ja?ja.boxEndIndex:ri.collisionBoxArray.length,$1=ds?ds.boxStartIndex:ri.collisionBoxArray.length,Z1=ds?ds.boxEndIndex:ri.collisionBoxArray.length,W1=fr?fr.boxStartIndex:ri.collisionBoxArray.length,X1=fr?fr.boxEndIndex:ri.collisionBoxArray.length;let zs=-1;const LA=(Fr,Ja)=>Fr&&Fr.circleDiameter?Math.max(Fr.circleDiameter,Ja):Ja;zs=LA(Ao,zs),zs=LA(ja,zs),zs=LA(ds,zs),zs=LA(fr,zs);const Pm=zs>-1?1:0;Pm&&(zs*=Ou/sr),ri.glyphOffsetArray.length>=Gu.MAX_GLYPHS&&yt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xn.sortKey!==void 0&&ri.addToSortKeyRanges(ri.symbolInstances.length,xn.sortKey);const eb=wm(cr,xn,zn),[tb,ib]=function(Fr,Ja){const Kc=Fr.length,Gs=Ja==null?void 0:Ja.values;if((Gs==null?void 0:Gs.length)>0)for(let $c=0;$c<Gs.length;$c+=2){const fo=Gs[$c+1];Fr.emplaceBack(v.aq[Gs[$c]],fo[0],fo[1])}return[Kc,Fr.length]}(ri.textAnchorOffsets,eb);ri.symbolInstances.emplaceBack(xi.x,xi.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,_f,vf,Mm,j1,J1,Y1,K1,$1,Z1,W1,X1,Jr,km,Dm,al,Gh,Pm,0,ur,zs,tb,ib)}(n,li,ht,r,o,A,Wt,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,_e,[He,He,He,He],jt,B,Ke,nt,mi,Y,t,p,S,M,m)};if(qt==="line")for(const ht of gm(t.geometry,0,0,Fn,Fn)){const li=G1(ht,ze,wt,r.vertical||ne,o,24,Be,n.overscaling,Fn);for(const ri of li)ne&&q1(n,ne.text,Gt,ri)||Kt(ht,ri)}else if(qt==="line-center"){for(const ht of t.geometry)if(ht.length>1){const li=z1(ht,wt,r.vertical||ne,o,24,Be);li&&Kt(ht,li)}}else if(t.type==="Polygon")for(const ht of xs(t.geometry,0)){const li=U1(ht,16);Kt(ht[0],new Yl(li.x,li.y,0))}else if(t.type==="LineString")for(const ht of t.geometry)Kt(ht,new Yl(ht[0].x,ht[0].y,0));else if(t.type==="Point")for(const ht of t.geometry)for(const li of ht)Kt([li],new Yl(li.x,li.y,0))}function Cm(n,t,r,o,A,p,m,x,B,S,M,P,O,Y,ne){const ae=function(Ke,ze,He,nt,wt,jt,mi,qt){const Gt=nt.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,si=[];for(const Wt of ze.positionedLines)for(const Kt of Wt.positionedGlyphs){if(!Kt.rect)continue;const ht=Kt.rect||{};let li=Up+1,ri=!0,xi=1,_n=0;const pn=(wt||qt)&&Kt.vertical,lr=Kt.metrics.advance*Kt.scale/2;if(qt&&ze.verticalizable&&(_n=Wt.lineOffset/2-(Kt.imageName?-(sr-Kt.metrics.width*Kt.scale)/2:(Kt.scale-1)*sr)),Kt.imageName){const Zi=mi[Kt.imageName];ri=Zi.sdf,xi=Zi.pixelRatio,li=ca/xi}const As=wt?[Kt.x+lr,Kt.y]:[0,0];let wr=wt?[0,0]:[Kt.x+lr+He[0],Kt.y+He[1]-_n],cr=[0,0];pn&&(cr=wr,wr=[0,0]);const jr=Kt.metrics.isDoubleResolution?2:1,Jr=(Kt.metrics.left-li)*Kt.scale-lr+wr[0],Yr=(-Kt.metrics.top-li)*Kt.scale+wr[1],Hn=Jr+ht.w/jr*Kt.scale/xi,ur=Yr+ht.h/jr*Kt.scale/xi,Lr=new q(Jr,Yr),Cr=new q(Hn,Yr),Kr=new q(Jr,ur),Br=new q(Hn,ur);if(pn){const Zi=new q(-lr,lr-Mh),xn=-Math.PI/2,Cn=sr/2-lr,Ea=new q(5-Mh-Cn,-(Kt.imageName?Cn:0)),zn=new q(...cr);Lr._rotateAround(xn,Zi)._add(Ea)._add(zn),Cr._rotateAround(xn,Zi)._add(Ea)._add(zn),Kr._rotateAround(xn,Zi)._add(Ea)._add(zn),Br._rotateAround(xn,Zi)._add(Ea)._add(zn)}if(Gt){const Zi=Math.sin(Gt),xn=Math.cos(Gt),Cn=[xn,-Zi,Zi,xn];Lr._matMult(Cn),Cr._matMult(Cn),Kr._matMult(Cn),Br._matMult(Cn)}const Ha=new q(0,0),ua=new q(0,0);si.push({tl:Lr,tr:Cr,bl:Kr,br:Br,tex:ht,writingMode:ze.writingMode,glyphOffset:As,sectionIndex:Kt.sectionIndex,isSDF:ri,pixelOffsetTL:Ha,pixelOffsetBR:ua,minFontScaleX:0,minFontScaleY:0})}return si}(0,r,x,A,p,m,o,n.allowVerticalPlacement),_e=n.textSizeData;let Be=null;_e.kind==="source"?(Be=[uo*A.layout.get("text-size").evaluate(m,{})],Be[0]>jl&&yt(`${n.layerIds[0]}: Value for "text-size" is >= ${Ph}. Reduce your "text-size".`)):_e.kind==="composite"&&(Be=[uo*Y.compositeTextSizes[0].evaluate(m,{},ne),uo*Y.compositeTextSizes[1].evaluate(m,{},ne)],(Be[0]>jl||Be[1]>jl)&&yt(`${n.layerIds[0]}: Value for "text-size" is >= ${Ph}. Reduce your "text-size".`)),n.addSymbols(n.text,ae,Be,x,p,m,S,t,B.lineStartIndex,B.lineLength,O,ne);for(const Ke of M)P[Ke]=n.text.placedSymbolArray.length-1;return 4*ae.length}function Bm(n){for(const t in n)return n[t];return null}function q1(n,t,r,o){const A=n.compareText;if(t in A){const p=A[t];for(let m=p.length-1;m>=0;m--)if(o.dist(p[m])<r)return!0}else A[t]=[];return A[t].push(o),!1}const Em=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Af{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,o]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const A=o>>4;if(A!==1)throw new Error(`Got v${A} data when expected v1.`);const p=Em[15&o];if(!p)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new Af(x,m,p,t)}constructor(t,r=64,o=Float64Array,A){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=o,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const p=Em.indexOf(this.ArrayType),m=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-x%8)%8;if(p<0)throw new Error(`Unexpected typed array class: ${o}.`);A&&A instanceof ArrayBuffer?(this.data=A,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+B,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+m+x+B),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+B,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=t,this.coords[this._pos++]=r,o}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return df(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,o,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:m,nodeSize:x}=this,B=[0,p.length-1,0],S=[];for(;B.length;){const M=B.pop()||0,P=B.pop()||0,O=B.pop()||0;if(P-O<=x){for(let _e=O;_e<=P;_e++){const Be=m[2*_e],Ke=m[2*_e+1];Be>=t&&Be<=o&&Ke>=r&&Ke<=A&&S.push(p[_e])}continue}const Y=O+P>>1,ne=m[2*Y],ae=m[2*Y+1];ne>=t&&ne<=o&&ae>=r&&ae<=A&&S.push(p[Y]),(M===0?t<=ne:r<=ae)&&(B.push(O),B.push(Y-1),B.push(1-M)),(M===0?o>=ne:A>=ae)&&(B.push(Y+1),B.push(P),B.push(1-M))}return S}within(t,r,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:A,coords:p,nodeSize:m}=this,x=[0,A.length-1,0],B=[],S=o*o;for(;x.length;){const M=x.pop()||0,P=x.pop()||0,O=x.pop()||0;if(P-O<=m){for(let _e=O;_e<=P;_e++)Sm(p[2*_e],p[2*_e+1],t,r)<=S&&B.push(A[_e]);continue}const Y=O+P>>1,ne=p[2*Y],ae=p[2*Y+1];Sm(ne,ae,t,r)<=S&&B.push(A[Y]),(M===0?t-o<=ne:r-o<=ae)&&(x.push(O),x.push(Y-1),x.push(1-M)),(M===0?t+o>=ne:r+o>=ae)&&(x.push(Y+1),x.push(P),x.push(1-M))}return B}}function df(n,t,r,o,A,p){if(A-o<=r)return;const m=o+A>>1;Qm(n,t,m,o,A,p),df(n,t,r,o,m-1,1-p),df(n,t,r,m+1,A,1-p)}function Qm(n,t,r,o,A,p){for(;A>o;){if(A-o>600){const S=A-o+1,M=r-o+1,P=Math.log(S),O=.5*Math.exp(2*P/3),Y=.5*Math.sqrt(P*O*(S-O)/S)*(M-S/2<0?-1:1);Qm(n,t,r,Math.max(o,Math.floor(r-M*O/S+Y)),Math.min(A,Math.floor(r+(S-M)*O/S+Y)),p)}const m=t[2*r+p];let x=o,B=A;for(Fh(n,t,o,r),t[2*A+p]>m&&Fh(n,t,o,A);x<B;){for(Fh(n,t,x,B),x++,B--;t[2*x+p]<m;)x++;for(;t[2*B+p]>m;)B--}t[2*o+p]===m?Fh(n,t,o,B):(B++,Fh(n,t,B,A)),B<=r&&(o=B+1),r<=B&&(A=B-1)}}function Fh(n,t,r,o){ff(n,r,o),ff(t,2*r,2*o),ff(t,2*r+1,2*o+1)}function ff(n,t,r){const o=n[t];n[t]=n[r],n[r]=o}function Sm(n,t,r,o){const A=n-r,p=t-o;return A*A+p*p}var gf;v.bg=void 0,(gf=v.bg||(v.bg={})).create="create",gf.load="load",gf.fullLoad="fullLoad";let RA=null,zh=[];const pf=1e3/60,mf="loadTime",yf="fullLoadTime",H1={mark(n){performance.mark(n)},frame(n){const t=n;RA!=null&&zh.push(t-RA),RA=t},clearMetrics(){RA=null,zh=[],performance.clearMeasures(mf),performance.clearMeasures(yf);for(const n in v.bg)performance.clearMarks(v.bg[n])},getPerformanceMetrics(){performance.measure(mf,v.bg.create,v.bg.load),performance.measure(yf,v.bg.create,v.bg.fullLoad);const n=performance.getEntriesByName(mf)[0].duration,t=performance.getEntriesByName(yf)[0].duration,r=zh.length,o=1/(zh.reduce((p,m)=>p+m,0)/r/1e3),A=zh.filter(p=>p>pf).reduce((p,m)=>p+(m-pf)/pf,0);return{loadTime:n,fullLoadTime:t,fps:o,percentDroppedFrames:A/(r+A)*100,totalFrames:r}}};v.$=class extends D{},v.A=Tu,v.B=vh,v.C=function(n){if(pi==null){const t=n.navigator?n.navigator.userAgent:null;pi=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return pi},v.D=ni,v.E=It,v.F=class{constructor(n,t){this.target=n,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new L1(()=>this.process()),this.subscription=function(r,o,A,p){return r.addEventListener(o,A,!1),{unsubscribe:()=>{r.removeEventListener(o,A,!1)}}}(this.target,"message",r=>this.receive(r)),this.globalScope=yi(self)?n:window}registerMessageHandler(n,t){this.messageHandlers[n]=t}sendAsync(n,t){return new Promise((r,o)=>{const A=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[A]={resolve:r,reject:o},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[A];const x={id:A,type:"<cancel>",origin:location.origin,targetMapId:n.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)},{once:!0});const p=[],m=Object.assign(Object.assign({},n),{id:A,sourceMapId:this.mapId,origin:location.origin,data:sa(n.data,p)});this.target.postMessage(m,{transfer:p})})}receive(n){const t=n.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const o=this.abortControllers[r];return delete this.abortControllers[r],void(o&&o.abort())}if(yi(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const n=this.taskQueue.shift(),t=this.tasks[n];delete this.tasks[n],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(n,t)}processTask(n,t){return l(this,void 0,void 0,function*(){if(t.type==="<response>"){const A=this.resolveRejects[n];return delete this.resolveRejects[n],A?void(t.error?A.reject(oo(t.error)):A.resolve(oo(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(n,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=oo(t.data),o=new AbortController;this.abortControllers[n]=o;try{const A=yield this.messageHandlers[t.type](t.sourceMapId,r,o);this.completeTask(n,null,A)}catch(A){this.completeTask(n,A)}})}completeTask(n,t,r){const o=[];delete this.abortControllers[n];const A={id:n,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?sa(t):null,data:sa(r,o)};this.target.postMessage(A,{transfer:o})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},v.G=Un,v.H=function(){var n=new Tu(16);return Tu!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},v.I=Wd,v.J=function(n,t,r){var o,A,p,m,x,B,S,M,P,O,Y,ne,ae=r[0],_e=r[1],Be=r[2];return t===n?(n[12]=t[0]*ae+t[4]*_e+t[8]*Be+t[12],n[13]=t[1]*ae+t[5]*_e+t[9]*Be+t[13],n[14]=t[2]*ae+t[6]*_e+t[10]*Be+t[14],n[15]=t[3]*ae+t[7]*_e+t[11]*Be+t[15]):(A=t[1],p=t[2],m=t[3],x=t[4],B=t[5],S=t[6],M=t[7],P=t[8],O=t[9],Y=t[10],ne=t[11],n[0]=o=t[0],n[1]=A,n[2]=p,n[3]=m,n[4]=x,n[5]=B,n[6]=S,n[7]=M,n[8]=P,n[9]=O,n[10]=Y,n[11]=ne,n[12]=o*ae+x*_e+P*Be+t[12],n[13]=A*ae+B*_e+O*Be+t[13],n[14]=p*ae+S*_e+Y*Be+t[14],n[15]=m*ae+M*_e+ne*Be+t[15]),n},v.K=function(n,t,r){var o=r[0],A=r[1],p=r[2];return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*o,n[4]=t[4]*A,n[5]=t[5]*A,n[6]=t[6]*A,n[7]=t[7]*A,n[8]=t[8]*p,n[9]=t[9]*p,n[10]=t[10]*p,n[11]=t[11]*p,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},v.L=cp,v.M=function(n,t){const r={};for(let o=0;o<t.length;o++){const A=t[o];A in n&&(r[A]=n[A])}return r},v.N=Jl,v.O=rm,v.P=q,v.Q=am,v.R=Va,v.S=qa,v.T=Ul,v.U=st,v.V=ut,v.W=Wi,v.X=Fn,v.Y=f,v.Z=Rh,v._=l,v.a=Fi,v.a$=function(n,t){var r=n[0],o=n[1],A=n[2],p=n[3],m=n[4],x=n[5],B=n[6],S=n[7],M=n[8],P=n[9],O=n[10],Y=n[11],ne=n[12],ae=n[13],_e=n[14],Be=n[15],Ke=t[0],ze=t[1],He=t[2],nt=t[3],wt=t[4],jt=t[5],mi=t[6],qt=t[7],Gt=t[8],si=t[9],Wt=t[10],Kt=t[11],ht=t[12],li=t[13],ri=t[14],xi=t[15];return Math.abs(r-Ke)<=Hr*Math.max(1,Math.abs(r),Math.abs(Ke))&&Math.abs(o-ze)<=Hr*Math.max(1,Math.abs(o),Math.abs(ze))&&Math.abs(A-He)<=Hr*Math.max(1,Math.abs(A),Math.abs(He))&&Math.abs(p-nt)<=Hr*Math.max(1,Math.abs(p),Math.abs(nt))&&Math.abs(m-wt)<=Hr*Math.max(1,Math.abs(m),Math.abs(wt))&&Math.abs(x-jt)<=Hr*Math.max(1,Math.abs(x),Math.abs(jt))&&Math.abs(B-mi)<=Hr*Math.max(1,Math.abs(B),Math.abs(mi))&&Math.abs(S-qt)<=Hr*Math.max(1,Math.abs(S),Math.abs(qt))&&Math.abs(M-Gt)<=Hr*Math.max(1,Math.abs(M),Math.abs(Gt))&&Math.abs(P-si)<=Hr*Math.max(1,Math.abs(P),Math.abs(si))&&Math.abs(O-Wt)<=Hr*Math.max(1,Math.abs(O),Math.abs(Wt))&&Math.abs(Y-Kt)<=Hr*Math.max(1,Math.abs(Y),Math.abs(Kt))&&Math.abs(ne-ht)<=Hr*Math.max(1,Math.abs(ne),Math.abs(ht))&&Math.abs(ae-li)<=Hr*Math.max(1,Math.abs(ae),Math.abs(li))&&Math.abs(_e-ri)<=Hr*Math.max(1,Math.abs(_e),Math.abs(ri))&&Math.abs(Be-xi)<=Hr*Math.max(1,Math.abs(Be),Math.abs(xi))},v.a0=Te,v.a1=cf,v.a2=dt,v.a3=n=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(r=>{t.onloadstart=()=>{r(t)};for(const o of n){const A=window.document.createElement("source");Jn(o)||(t.crossOrigin="Anonymous"),A.src=o,t.appendChild(A)}})},v.a4=function(){return Xt++},v.a5=b,v.a6=Gu,v.a7=io,v.a8=nl,v.a9=hm,v.aA=function(n){if(n.type==="custom")return new R1(n);switch(n.type){case"background":return new M1(n);case"circle":return new _I(n);case"fill":return new LI(n);case"fill-extrusion":return new ZI(n);case"heatmap":return new II(n);case"hillshade":return new xI(n);case"line":return new a1(n);case"raster":return new P1(n);case"symbol":return new kA(n)}},v.aB=mt,v.aC=function(n,t){if(!n)return[{command:"setStyle",args:[t]}];let r=[];try{if(!_t(n.version,t.version))return[{command:"setStyle",args:[t]}];_t(n.center,t.center)||r.push({command:"setCenter",args:[t.center]}),_t(n.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),_t(n.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),_t(n.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),_t(n.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),_t(n.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),_t(n.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),_t(n.light,t.light)||r.push({command:"setLight",args:[t.light]}),_t(n.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),_t(n.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),_t(n.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const o={},A=[];(function(m,x,B,S){let M;for(M in x=x||{},m=m||{})Object.prototype.hasOwnProperty.call(m,M)&&(Object.prototype.hasOwnProperty.call(x,M)||fi(M,B,S));for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(m,M)?_t(m[M],x[M])||(m[M].type==="geojson"&&x[M].type==="geojson"&&hi(m,x,M)?xt(B,{command:"setGeoJSONSourceData",args:[M,x[M].data]}):Ot(M,x,B,S)):Bt(M,x,B))})(n.sources,t.sources,A,o);const p=[];n.layers&&n.layers.forEach(m=>{"source"in m&&o[m.source]?r.push({command:"removeLayer",args:[m.id]}):p.push(m)}),r=r.concat(A),function(m,x,B){x=x||[];const S=(m=m||[]).map(Ri),M=x.map(Ri),P=m.reduce(ji,{}),O=x.reduce(ji,{}),Y=S.slice(),ne=Object.create(null);let ae,_e,Be,Ke,ze;for(let He=0,nt=0;He<S.length;He++)ae=S[He],Object.prototype.hasOwnProperty.call(O,ae)?nt++:(xt(B,{command:"removeLayer",args:[ae]}),Y.splice(Y.indexOf(ae,nt),1));for(let He=0,nt=0;He<M.length;He++)ae=M[M.length-1-He],Y[Y.length-1-He]!==ae&&(Object.prototype.hasOwnProperty.call(P,ae)?(xt(B,{command:"removeLayer",args:[ae]}),Y.splice(Y.lastIndexOf(ae,Y.length-nt),1)):nt++,Ke=Y[Y.length-He],xt(B,{command:"addLayer",args:[O[ae],Ke]}),Y.splice(Y.length-He,0,ae),ne[ae]=!0);for(let He=0;He<M.length;He++)if(ae=M[He],_e=P[ae],Be=O[ae],!ne[ae]&&!_t(_e,Be))if(_t(_e.source,Be.source)&&_t(_e["source-layer"],Be["source-layer"])&&_t(_e.type,Be.type)){for(ze in di(_e.layout,Be.layout,B,ae,null,"setLayoutProperty"),di(_e.paint,Be.paint,B,ae,null,"setPaintProperty"),_t(_e.filter,Be.filter)||xt(B,{command:"setFilter",args:[ae,Be.filter]}),_t(_e.minzoom,Be.minzoom)&&_t(_e.maxzoom,Be.maxzoom)||xt(B,{command:"setLayerZoomRange",args:[ae,Be.minzoom,Be.maxzoom]}),_e)Object.prototype.hasOwnProperty.call(_e,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?di(_e[ze],Be[ze],B,ae,ze.slice(6),"setPaintProperty"):_t(_e[ze],Be[ze])||xt(B,{command:"setLayerProperty",args:[ae,ze,Be[ze]]}));for(ze in Be)Object.prototype.hasOwnProperty.call(Be,ze)&&!Object.prototype.hasOwnProperty.call(_e,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?di(_e[ze],Be[ze],B,ae,ze.slice(6),"setPaintProperty"):_t(_e[ze],Be[ze])||xt(B,{command:"setLayerProperty",args:[ae,ze,Be[ze]]}))}else xt(B,{command:"removeLayer",args:[ae]}),Ke=Y[Y.lastIndexOf(ae)+1],xt(B,{command:"addLayer",args:[Be,Ke]})}(p,t.layers,r)}catch(o){console.warn("Unable to compute style diff:",o),r=[{command:"setStyle",args:[t]}]}return r},v.aD=function(n){const t=[],r=n.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},v.aE=function n(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!n(t[o],r[o]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const o in t)if(!n(t[o],r[o]))return!1;return!0}return t===r},v.aF=Et,v.aG=zt,v.aH=class extends kt{constructor(n,t){super(n,t),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},v.aI=ti,v.aJ=class extends kt{constructor(n,t){super(n,t),this.current=Yt}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},v.aK=$t,v.aL=ci,v.aM=an,v.aN=class extends kt{constructor(n,t){super(n,t),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},v.aO=class extends kt{constructor(n,t){super(n,t),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},v.aP=function(n,t,r,o,A,p,m){var x=1/(t-r),B=1/(o-A),S=1/(p-m);return n[0]=-2*x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*B,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*S,n[11]=0,n[12]=(t+r)*x,n[13]=(A+o)*B,n[14]=(m+p)*S,n[15]=1,n},v.aQ=yI,v.aR=class extends fe{},v.aS=c1,v.aT=class extends Ve{},v.aU=Nd,v.aV=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},v.aW=fp,v.aX=ge,v.aY=he,v.aZ=class extends Mt{},v.a_=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]},v.aa=function(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,o,A,p)=>{const m=A||p;return t[o]=!m||m.toLowerCase(),""}),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},v.ab=function(n,t){const r=[];for(const o in n)o in t||r.push(o);return r},v.ac=Pt,v.ad=function(n,t,r){var o=Math.sin(r),A=Math.cos(r),p=t[0],m=t[1],x=t[2],B=t[3],S=t[4],M=t[5],P=t[6],O=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=p*A+S*o,n[1]=m*A+M*o,n[2]=x*A+P*o,n[3]=B*A+O*o,n[4]=S*A-p*o,n[5]=M*A-m*o,n[6]=P*A-x*o,n[7]=O*A-B*o,n},v.ae=function(n){var t=new Tu(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},v.af=IA,v.ag=function(n,t){let r=0,o=0;if(n.kind==="constant")o=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:A,minZoom:p,maxZoom:m}=n,x=A?Pt(Wn.interpolationFactor(A,t,p,m),0,1):0;n.kind==="camera"?o=Ln.number(n.minSize,n.maxSize,x):r=x}return{uSizeT:r,uSize:o}},v.ai=function(n,{uSize:t,uSizeT:r},{lowerSize:o,upperSize:A}){return n.kind==="source"?o/uo:n.kind==="composite"?Ln.number(o/uo,A/uo,r):t},v.aj=nf,v.ak=function(n,t,r,o){const A=t.y-n.y,p=t.x-n.x,m=o.y-r.y,x=o.x-r.x,B=m*p-x*A;if(B===0)return null;const S=(x*(n.y-r.y)-m*(n.x-r.x))/B;return new q(n.x+S*p,n.y+S*A)},v.al=gm,v.am=Oa,v.an=Fd,v.ao=function(n){let t=1/0,r=1/0,o=-1/0,A=-1/0;for(const p of n)t=Math.min(t,p.x),r=Math.min(r,p.y),o=Math.max(o,p.x),A=Math.max(A,p.y);return[t,r,o,A]},v.ap=sr,v.ar=tf,v.as=function(n,t){var r=t[0],o=t[1],A=t[2],p=t[3],m=t[4],x=t[5],B=t[6],S=t[7],M=t[8],P=t[9],O=t[10],Y=t[11],ne=t[12],ae=t[13],_e=t[14],Be=t[15],Ke=r*x-o*m,ze=r*B-A*m,He=r*S-p*m,nt=o*B-A*x,wt=o*S-p*x,jt=A*S-p*B,mi=M*ae-P*ne,qt=M*_e-O*ne,Gt=M*Be-Y*ne,si=P*_e-O*ae,Wt=P*Be-Y*ae,Kt=O*Be-Y*_e,ht=Ke*Kt-ze*Wt+He*si+nt*Gt-wt*qt+jt*mi;return ht?(n[0]=(x*Kt-B*Wt+S*si)*(ht=1/ht),n[1]=(A*Wt-o*Kt-p*si)*ht,n[2]=(ae*jt-_e*wt+Be*nt)*ht,n[3]=(O*wt-P*jt-Y*nt)*ht,n[4]=(B*Gt-m*Kt-S*qt)*ht,n[5]=(r*Kt-A*Gt+p*qt)*ht,n[6]=(_e*He-ne*jt-Be*ze)*ht,n[7]=(M*jt-O*He+Y*ze)*ht,n[8]=(m*Wt-x*Gt+S*mi)*ht,n[9]=(o*Gt-r*Wt-p*mi)*ht,n[10]=(ne*wt-ae*He+Be*Ke)*ht,n[11]=(P*He-M*wt-Y*Ke)*ht,n[12]=(x*qt-m*si-B*mi)*ht,n[13]=(r*si-o*qt+A*mi)*ht,n[14]=(ae*ze-ne*nt-_e*Ke)*ht,n[15]=(M*nt-P*ze+O*Ke)*ht,n):null},v.at=hf,v.au=ef,v.av=Af,v.aw=function(){const n={},t=xe.$version;for(const r in xe.$root){const o=xe.$root[r];if(o.required){let A=null;A=r==="version"?t:o.type==="array"?[]:{},A!=null&&(n[r]=A)}}return n},v.ax=Oc,v.ay=Xi,v.az=function(n){n=n.slice();const t=Object.create(null);for(let r=0;r<n.length;r++)t[n[r].id]=n[r];for(let r=0;r<n.length;r++)"ref"in n[r]&&(n[r]=Vt(n[r],t[n[r].ref]));return n},v.b=vi,v.b0=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},v.b1=function(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n},v.b2=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},v.b3=Rt,v.b4=lm,v.b5=sm,v.b6=function(n,t,r,o,A){var p,m=1/Math.tan(t/2);return n[0]=m/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=m,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,A!=null&&A!==1/0?(n[10]=(A+o)*(p=1/(o-A)),n[14]=2*A*o*p):(n[10]=-1,n[14]=-2*o),n},v.b7=function(n,t,r){var o=Math.sin(r),A=Math.cos(r),p=t[4],m=t[5],x=t[6],B=t[7],S=t[8],M=t[9],P=t[10],O=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=p*A+S*o,n[5]=m*A+M*o,n[6]=x*A+P*o,n[7]=B*A+O*o,n[8]=S*A-p*o,n[9]=M*A-m*o,n[10]=P*A-x*o,n[11]=O*A-B*o,n},v.b8=ot,v.b9=ft,v.bA=Pp,v.bB=function(n){return n.message===Hi},v.bC=Go,v.bD=on,v.ba=function(n){return n*Math.PI/180},v.bb=function(n,t){const{x:r,y:o}=Rh.fromLngLat(t);return!(n<0||n>25||o<0||o>=1||r<0||r>=1)},v.bc=function(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},v.bd=class extends Q{},v.be=of,v.bf=H1,v.bh=un,v.bi=function(n,t){Fi.REGISTERED_PROTOCOLS[n]=t},v.bj=function(n){delete Fi.REGISTERED_PROTOCOLS[n]},v.bk=function(n,t){const r={};for(let A=0;A<n.length;A++){const p=t&&t[n[A].id]||ls(n[A]);t&&(t[n[A].id]=p);let m=r[p];m||(m=r[p]=[]),m.push(n[A])}const o=[];for(const A in r)o.push(r[A]);return o},v.bl=Ut,v.bm=um,v.bn=Am,v.bo=Vp,v.bp=function(n){n.bucket.createArrays(),n.bucket.tilePixelRatio=Fn/(512*n.bucket.overscaling),n.bucket.compareText={},n.bucket.iconsNeedLinear=!1;const t=n.bucket.layers[0],r=t.layout,o=t._unevaluatedLayout._values,A={layoutIconSize:o["icon-size"].possiblyEvaluate(new $i(n.bucket.zoom+1),n.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new $i(n.bucket.zoom+1),n.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new $i(18))};if(n.bucket.textSizeData.kind==="composite"){const{minZoom:S,maxZoom:M}=n.bucket.textSizeData;A.compositeTextSizes=[o["text-size"].possiblyEvaluate(new $i(S),n.canonical),o["text-size"].possiblyEvaluate(new $i(M),n.canonical)]}if(n.bucket.iconSizeData.kind==="composite"){const{minZoom:S,maxZoom:M}=n.bucket.iconSizeData;A.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new $i(S),n.canonical),o["icon-size"].possiblyEvaluate(new $i(M),n.canonical)]}const p=r.get("text-line-height")*sr,m=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",x=r.get("text-keep-upright"),B=r.get("text-size");for(const S of n.bucket.features){const M=r.get("text-font").evaluate(S,{},n.canonical).join(","),P=B.evaluate(S,{},n.canonical),O=A.layoutTextSize.evaluate(S,{},n.canonical),Y=A.layoutIconSize.evaluate(S,{},n.canonical),ne={horizontal:{},vertical:void 0},ae=S.text;let _e,Be=[0,0];if(ae){const He=ae.toString(),nt=r.get("text-letter-spacing").evaluate(S,{},n.canonical)*sr,wt=Su(He)?nt:0,jt=r.get("text-anchor").evaluate(S,{},n.canonical),mi=wm(t,S,n.canonical);if(!mi){const Wt=r.get("text-radial-offset").evaluate(S,{},n.canonical);Be=Wt?xm(jt,[Wt*sr,uf]):r.get("text-offset").evaluate(S,{},n.canonical).map(Kt=>Kt*sr)}let qt=m?"center":r.get("text-justify").evaluate(S,{},n.canonical);const Gt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(S,{},n.canonical)*sr:1/0,si=()=>{n.bucket.allowVerticalPlacement&&zl(He)&&(ne.vertical=EA(ae,n.glyphMap,n.glyphPositions,n.imagePositions,M,Gt,p,jt,"left",wt,Be,v.ah.vertical,!0,O,P))};if(!m&&mi){const Wt=new Set;if(qt==="auto")for(let ht=0;ht<mi.values.length;ht+=2)Wt.add(hf(mi.values[ht]));else Wt.add(qt);let Kt=!1;for(const ht of Wt)if(!ne.horizontal[ht])if(Kt)ne.horizontal[ht]=ne.horizontal[0];else{const li=EA(ae,n.glyphMap,n.glyphPositions,n.imagePositions,M,Gt,p,"center",ht,wt,Be,v.ah.horizontal,!1,O,P);li&&(ne.horizontal[ht]=li,Kt=li.positionedLines.length===1)}si()}else{qt==="auto"&&(qt=hf(jt));const Wt=EA(ae,n.glyphMap,n.glyphPositions,n.imagePositions,M,Gt,p,jt,qt,wt,Be,v.ah.horizontal,!1,O,P);Wt&&(ne.horizontal[qt]=Wt),si(),zl(He)&&m&&x&&(ne.vertical=EA(ae,n.glyphMap,n.glyphPositions,n.imagePositions,M,Gt,p,jt,qt,wt,Be,v.ah.vertical,!1,O,P))}}let Ke=!1;if(S.icon&&S.icon.name){const He=n.imageMap[S.icon.name];He&&(_e=E1(n.imagePositions[S.icon.name],r.get("icon-offset").evaluate(S,{},n.canonical),r.get("icon-anchor").evaluate(S,{},n.canonical)),Ke=!!He.sdf,n.bucket.sdfIcons===void 0?n.bucket.sdfIcons=Ke:n.bucket.sdfIcons!==Ke&&yt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(He.pixelRatio!==n.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(n.bucket.iconsNeedLinear=!0))}const ze=Bm(ne.horizontal)||ne.vertical;n.bucket.iconsInText=!!ze&&ze.iconsInText,(ze||_e)&&V1(n.bucket,S,ne,_e,n.imageMap,A,O,Y,Be,Ke,n.canonical)}n.showCollisionBoxes&&n.bucket.generateCollisionDebugBuffers()},v.bq=Yd,v.br=Hd,v.bs=Jd,v.bt=ql,v.bu=$d,v.bv=class{constructor(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let n=performance.getEntriesByName(this._marks.measure);return n.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),n=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),n}},v.bw=function(n,t,r,o,A){return l(this,void 0,void 0,function*(){if(ut())try{return yield Wi(n,t,r,o,A)}catch{}return function(p,m,x,B,S){const M=p.width,P=p.height;Nn&&nn||(Nn=new OffscreenCanvas(M,P),nn=Nn.getContext("2d",{willReadFrequently:!0})),Nn.width=M,Nn.height=P,nn.drawImage(p,0,0,M,P);const O=nn.getImageData(m,x,B,S);return nn.clearRect(0,0,M,P),O.data}(n,t,r,o,A)})},v.bx=cm,v.by=V,v.bz=W,v.c=wn,v.d=n=>l(void 0,void 0,void 0,function*(){if(n.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(n)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),v.e=Nt,v.f=n=>new Promise((t,r)=>{const o=new Image;o.onload=()=>{t(o),URL.revokeObjectURL(o.src),o.onload=null,window.requestAnimationFrame(()=>{o.src=Mi})},o.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const A=new Blob([new Uint8Array(n)],{type:"image/png"});o.src=n.byteLength?URL.createObjectURL(A):Mi}),v.g=dn,v.h=(n,t)=>On(Nt(n,{type:"json"}),t),v.i=yi,v.j=rt,v.k=Ue,v.l=(n,t)=>On(Nt(n,{type:"arrayBuffer"}),t),v.m=On,v.n=function(n){return new $d(n).readFields(v1,[])},v.o=Ch,v.p=Op,v.q=Ir,v.r=Yo,v.s=Jn,v.t=Nc,v.u=Rs,v.v=xe,v.w=yt,v.x=function([n,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:n*Math.cos(t)*Math.sin(r),y:n*Math.sin(t)*Math.sin(r),z:n*Math.cos(r)}},v.y=Ln,v.z=$i}),_("worker",["./shared"],function(v){class l{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,j){for(const ye of J){this._layerConfigs[ye.id]=ye;const Fe=this._layers[ye.id]=v.aA(ye);Fe._featureFilter=v.a7(Fe.filter),this.keyCache[ye.id]&&delete this.keyCache[ye.id]}for(const ye of j)delete this.keyCache[ye],delete this._layerConfigs[ye],delete this._layers[ye];this.familiesBySource={};const ie=v.bk(Object.values(this._layerConfigs),this.keyCache);for(const ye of ie){const Fe=ye.map(Xe=>this._layers[Xe.id]),Oe=Fe[0];if(Oe.visibility==="none")continue;const je=Oe.source||"";let Se=this.familiesBySource[je];Se||(Se=this.familiesBySource[je]={});const it=Oe.sourceLayer||"_geojsonTileLayer";let gt=Se[it];gt||(gt=Se[it]=[]),gt.push(Fe)}}}class V{constructor(J){const j={},ie=[];for(const je in J){const Se=J[je],it=j[je]={};for(const gt in Se){const Xe=Se[+gt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Dt={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};ie.push(Dt),it[gt]={rect:Dt,metrics:Xe.metrics}}}const{w:ye,h:Fe}=v.p(ie),Oe=new v.o({width:ye||1,height:Fe||1});for(const je in J){const Se=J[je];for(const it in Se){const gt=Se[+it];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const Xe=j[je][it].rect;v.o.copy(gt.bitmap,Oe,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},gt.bitmap)}}this.image=Oe,this.positions=j}}v.bl("GlyphAtlas",V);class W{constructor(J){this.tileID=new v.S(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[]}parse(J,j,ie,ye){return v._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new v.a5;const Fe=new v.bm(Object.keys(J.layers).sort()),Oe=new v.bn(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const je={},Se={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie},it=j.familiesBySource[this.source];for(const Bi in it){const rn=J.layers[Bi];if(!rn)continue;rn.version===1&&v.w(`Vector tile source "${this.source}" layer "${Bi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const In=Fe.encode(Bi),Zn=[];for(let Yn=0;Yn<rn.length;Yn++){const dr=rn.feature(Yn),qs=Oe.getId(dr,Bi);Zn.push({feature:dr,id:qs,index:Yn,sourceLayerIndex:In})}for(const Yn of it[Bi]){const dr=Yn[0];dr.source!==this.source&&v.w(`layer.source = ${dr.source} does not equal this.source = ${this.source}`),dr.minzoom&&this.zoom<Math.floor(dr.minzoom)||dr.maxzoom&&this.zoom>=dr.maxzoom||dr.visibility!=="none"&&(H(Yn,this.zoom,ie),(je[dr.id]=dr.createBucket({index:Oe.bucketLayerIDs.length,layers:Yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:In,sourceID:this.source})).populate(Zn,Se,this.tileID.canonical),Oe.bucketLayerIDs.push(Yn.map(qs=>qs.id)))}}const gt=v.aF(Se.glyphDependencies,Bi=>Object.keys(Bi).map(Number));this.inFlightDependencies.forEach(Bi=>Bi==null?void 0:Bi.abort()),this.inFlightDependencies=[];let Xe=Promise.resolve({});if(Object.keys(gt).length){const Bi=new AbortController;this.inFlightDependencies.push(Bi),Xe=ye.sendAsync({type:"GG",data:{stacks:gt,source:this.source,tileID:this.tileID,type:"glyphs"}},Bi)}const Dt=Object.keys(Se.iconDependencies);let oi=Promise.resolve({});if(Dt.length){const Bi=new AbortController;this.inFlightDependencies.push(Bi),oi=ye.sendAsync({type:"GI",data:{icons:Dt,source:this.source,tileID:this.tileID,type:"icons"}},Bi)}const gi=Object.keys(Se.patternDependencies);let qi=Promise.resolve({});if(gi.length){const Bi=new AbortController;this.inFlightDependencies.push(Bi),qi=ye.sendAsync({type:"GI",data:{icons:gi,source:this.source,tileID:this.tileID,type:"patterns"}},Bi)}const[Ci,Ui,Si]=yield Promise.all([Xe,oi,qi]),Rn=new V(Ci),yn=new v.bo(Ui,Si);for(const Bi in je){const rn=je[Bi];rn instanceof v.a6?(H(rn.layers,this.zoom,ie),v.bp({bucket:rn,glyphMap:Ci,glyphPositions:Rn.positions,imageMap:Ui,imagePositions:yn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):rn.hasPattern&&(rn instanceof v.bq||rn instanceof v.br||rn instanceof v.bs)&&(H(rn.layers,this.zoom,ie),rn.addFeatures(Se,this.tileID.canonical,yn.patternPositions))}return this.status="done",{buckets:Object.values(je).filter(Bi=>!Bi.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Rn.image,imageAtlas:yn,glyphMap:this.returnDependencies?Ci:null,iconMap:this.returnDependencies?Ui:null,glyphPositions:this.returnDependencies?Rn.positions:null}})}}function H(Ie,J,j){const ie=new v.z(J);for(const ye of Ie)ye.recalculate(ie,j)}class q{constructor(J,j,ie){this.actor=J,this.layerIndex=j,this.availableImages=ie,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,j){return v._(this,void 0,void 0,function*(){const ie=yield v.l(J.request,j);try{return{vectorTile:new v.bt.VectorTile(new v.bu(ie.data)),rawData:ie.data,cacheControl:ie.cacheControl,expires:ie.expires}}catch(ye){const Fe=new Uint8Array(ie.data);let Oe=`Unable to parse the tile at ${J.request.url}, `;throw Oe+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ye.message}`,new Error(Oe)}})}loadTile(J){return v._(this,void 0,void 0,function*(){const j=J.uid,ie=!!(J&&J.request&&J.request.collectResourceTiming)&&new v.bv(J.request),ye=new W(J);this.loading[j]=ye;const Fe=new AbortController;ye.abort=Fe;try{const Oe=yield this.loadVectorTile(J,Fe);if(delete this.loading[j],!Oe)return null;const je=Oe.rawData,Se={};Oe.expires&&(Se.expires=Oe.expires),Oe.cacheControl&&(Se.cacheControl=Oe.cacheControl);const it={};if(ie){const Xe=ie.finish();Xe&&(it.resourceTiming=JSON.parse(JSON.stringify(Xe)))}ye.vectorTile=Oe.vectorTile;const gt=ye.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[j]=ye,this.fetching[j]={rawTileData:je,cacheControl:Se,resourceTiming:it};try{const Xe=yield gt;return v.e({rawTileData:je.slice(0)},Xe,Se,it)}finally{delete this.fetching[j]}}catch(Oe){throw delete this.loading[j],ye.status="done",this.loaded[j]=ye,Oe}})}reloadTile(J){return v._(this,void 0,void 0,function*(){const j=J.uid;if(!this.loaded||!this.loaded[j])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ie=this.loaded[j];if(ie.showCollisionBoxes=J.showCollisionBoxes,ie.status==="parsing"){const ye=yield ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor);let Fe;if(this.fetching[j]){const{rawTileData:Oe,cacheControl:je,resourceTiming:Se}=this.fetching[j];delete this.fetching[j],Fe=v.e({rawTileData:Oe.slice(0)},ye,je,Se)}else Fe=ye;return Fe}if(ie.status==="done"&&ie.vectorTile)return ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(J){return v._(this,void 0,void 0,function*(){const j=this.loading,ie=J.uid;j&&j[ie]&&j[ie].abort&&(j[ie].abort.abort(),delete j[ie])})}removeTile(J){return v._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class G{constructor(){this.loaded={}}loadTile(J){return v._(this,void 0,void 0,function*(){const{uid:j,encoding:ie,rawImageData:ye,redFactor:Fe,greenFactor:Oe,blueFactor:je,baseShift:Se}=J,it=ye.width+2,gt=ye.height+2,Xe=v.b(ye)?new v.R({width:it,height:gt},yield v.bw(ye,-1,-1,it,gt)):ye,Dt=new v.bx(j,Xe,ie,Fe,Oe,je,Se);return this.loaded=this.loaded||{},this.loaded[j]=Dt,Dt})}removeTile(J){const j=this.loaded,ie=J.uid;j&&j[ie]&&delete j[ie]}}function me(Ie,J){if(Ie.length!==0){pe(Ie[0],J);for(var j=1;j<Ie.length;j++)pe(Ie[j],!J)}}function pe(Ie,J){for(var j=0,ie=0,ye=0,Fe=Ie.length,Oe=Fe-1;ye<Fe;Oe=ye++){var je=(Ie[ye][0]-Ie[Oe][0])*(Ie[Oe][1]+Ie[ye][1]),Se=j+je;ie+=Math.abs(j)>=Math.abs(je)?j-Se+je:je-Se+j,j=Se}j+ie>=0!=!!J&&Ie.reverse()}var Ae=v.by(function Ie(J,j){var ie,ye=J&&J.type;if(ye==="FeatureCollection")for(ie=0;ie<J.features.length;ie++)Ie(J.features[ie],j);else if(ye==="GeometryCollection")for(ie=0;ie<J.geometries.length;ie++)Ie(J.geometries[ie],j);else if(ye==="Feature")Ie(J.geometry,j);else if(ye==="Polygon")me(J.coordinates,j);else if(ye==="MultiPolygon")for(ie=0;ie<J.coordinates.length;ie++)me(J.coordinates[ie],j);return J});const Ye=v.bt.VectorTileFeature.prototype.toGeoJSON;var st={exports:{}},ut=v.bz,ot=v.bt.VectorTileFeature,ft=Pt;function Pt(Ie,J){this.options=J||{},this.features=Ie,this.length=Ie.length}function Rt(Ie,J){this.id=typeof Ie.id=="number"?Ie.id:void 0,this.type=Ie.type,this.rawGeometry=Ie.type===1?[Ie.geometry]:Ie.geometry,this.properties=Ie.tags,this.extent=J||4096}Pt.prototype.feature=function(Ie){return new Rt(this.features[Ie],this.options.extent)},Rt.prototype.loadGeometry=function(){var Ie=this.rawGeometry;this.geometry=[];for(var J=0;J<Ie.length;J++){for(var j=Ie[J],ie=[],ye=0;ye<j.length;ye++)ie.push(new ut(j[ye][0],j[ye][1]));this.geometry.push(ie)}return this.geometry},Rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ie=this.geometry,J=1/0,j=-1/0,ie=1/0,ye=-1/0,Fe=0;Fe<Ie.length;Fe++)for(var Oe=Ie[Fe],je=0;je<Oe.length;je++){var Se=Oe[je];J=Math.min(J,Se.x),j=Math.max(j,Se.x),ie=Math.min(ie,Se.y),ye=Math.max(ye,Se.y)}return[J,ie,j,ye]},Rt.prototype.toGeoJSON=ot.prototype.toGeoJSON;var Nt=v.bA,Xt=ft;function Et(Ie){var J=new Nt;return function(j,ie){for(var ye in j.layers)ie.writeMessage(3,zt,j.layers[ye])}(Ie,J),J.finish()}function zt(Ie,J){var j;J.writeVarintField(15,Ie.version||1),J.writeStringField(1,Ie.name||""),J.writeVarintField(5,Ie.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<Ie.length;j++)ie.feature=Ie.feature(j),J.writeMessage(2,mt,ie);var ye=ie.keys;for(j=0;j<ye.length;j++)J.writeStringField(3,ye[j]);var Fe=ie.values;for(j=0;j<Fe.length;j++)J.writeMessage(4,pi,Fe[j])}function mt(Ie,J){var j=Ie.feature;j.id!==void 0&&J.writeVarintField(1,j.id),J.writeMessage(2,tt,Ie),J.writeVarintField(3,j.type),J.writeMessage(4,yi,j)}function tt(Ie,J){var j=Ie.feature,ie=Ie.keys,ye=Ie.values,Fe=Ie.keycache,Oe=Ie.valuecache;for(var je in j.properties){var Se=j.properties[je],it=Fe[je];if(Se!==null){it===void 0&&(ie.push(je),Fe[je]=it=ie.length-1),J.writeVarint(it);var gt=typeof Se;gt!=="string"&&gt!=="boolean"&&gt!=="number"&&(Se=JSON.stringify(Se));var Xe=gt+":"+Se,Dt=Oe[Xe];Dt===void 0&&(ye.push(Se),Oe[Xe]=Dt=ye.length-1),J.writeVarint(Dt)}}}function yt(Ie,J){return(J<<3)+(7&Ie)}function Jt(Ie){return Ie<<1^Ie>>31}function yi(Ie,J){for(var j=Ie.loadGeometry(),ie=Ie.type,ye=0,Fe=0,Oe=j.length,je=0;je<Oe;je++){var Se=j[je],it=1;ie===1&&(it=Se.length),J.writeVarint(yt(1,it));for(var gt=ie===3?Se.length-1:Se.length,Xe=0;Xe<gt;Xe++){Xe===1&&ie!==1&&J.writeVarint(yt(2,gt-1));var Dt=Se[Xe].x-ye,oi=Se[Xe].y-Fe;J.writeVarint(Jt(Dt)),J.writeVarint(Jt(oi)),ye+=Dt,Fe+=oi}ie===3&&J.writeVarint(yt(7,1))}}function pi(Ie,J){var j=typeof Ie;j==="string"?J.writeStringField(1,Ie):j==="boolean"?J.writeBooleanField(7,Ie):j==="number"&&(Ie%1!=0?J.writeDoubleField(3,Ie):Ie<0?J.writeSVarintField(6,Ie):J.writeVarintField(5,Ie))}st.exports=Et,st.exports.fromVectorTileJs=Et,st.exports.fromGeojsonVt=function(Ie,J){J=J||{};var j={};for(var ie in Ie)j[ie]=new Xt(Ie[ie].features,J),j[ie].name=ie,j[ie].version=J.version,j[ie].extent=J.extent;return Et({layers:j})},st.exports.GeoJSONWrapper=Xt;var vi=v.by(st.exports);const Mi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ie=>Ie},Wi=Math.fround||(Nn=new Float32Array(1),Ie=>(Nn[0]=+Ie,Nn[0]));var Nn;const nn=3,Hi=5,wn=6;class Fi{constructor(J){this.options=Object.assign(Object.create(Mi),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){const{log:j,minZoom:ie,maxZoom:ye}=this.options;j&&console.time("total time");const Fe=`prepare ${J.length} points`;j&&console.time(Fe),this.points=J;const Oe=[];for(let Se=0;Se<J.length;Se++){const it=J[Se];if(!it.geometry)continue;const[gt,Xe]=it.geometry.coordinates,Dt=Wi(un(gt)),oi=Wi(Xi(Xe));Oe.push(Dt,oi,1/0,Se,-1,1),this.options.reduce&&Oe.push(0)}let je=this.trees[ye+1]=this._createTree(Oe);j&&console.timeEnd(Fe);for(let Se=ye;Se>=ie;Se--){const it=+Date.now();je=this.trees[Se]=this._createTree(this._cluster(je,Se)),j&&console.log("z%d: %d clusters in %dms",Se,je.numItems,+Date.now()-it)}return j&&console.timeEnd("total time"),this}getClusters(J,j){let ie=((J[0]+180)%360+360)%360-180;const ye=Math.max(-90,Math.min(90,J[1]));let Fe=J[2]===180?180:((J[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)ie=-180,Fe=180;else if(ie>Fe){const Xe=this.getClusters([ie,ye,180,Oe],j),Dt=this.getClusters([-180,ye,Fe,Oe],j);return Xe.concat(Dt)}const je=this.trees[this._limitZoom(j)],Se=je.range(un(ie),Xi(Oe),un(Fe),Xi(ye)),it=je.data,gt=[];for(const Xe of Se){const Dt=this.stride*Xe;gt.push(it[Dt+Hi]>1?dn(it,Dt,this.clusterProps):this.points[it[Dt+nn]])}return gt}getChildren(J){const j=this._getOriginId(J),ie=this._getOriginZoom(J),ye="No cluster with the specified id.",Fe=this.trees[ie];if(!Fe)throw new Error(ye);const Oe=Fe.data;if(j*this.stride>=Oe.length)throw new Error(ye);const je=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),Se=Fe.within(Oe[j*this.stride],Oe[j*this.stride+1],je),it=[];for(const gt of Se){const Xe=gt*this.stride;Oe[Xe+4]===J&&it.push(Oe[Xe+Hi]>1?dn(Oe,Xe,this.clusterProps):this.points[Oe[Xe+nn]])}if(it.length===0)throw new Error(ye);return it}getLeaves(J,j,ie){const ye=[];return this._appendLeaves(ye,J,j=j||10,ie=ie||0,0),ye}getTile(J,j,ie){const ye=this.trees[this._limitZoom(J)],Fe=Math.pow(2,J),{extent:Oe,radius:je}=this.options,Se=je/Oe,it=(ie-Se)/Fe,gt=(ie+1+Se)/Fe,Xe={features:[]};return this._addTileFeatures(ye.range((j-Se)/Fe,it,(j+1+Se)/Fe,gt),ye.data,j,ie,Fe,Xe),j===0&&this._addTileFeatures(ye.range(1-Se/Fe,it,1,gt),ye.data,Fe,ie,Fe,Xe),j===Fe-1&&this._addTileFeatures(ye.range(0,it,Se/Fe,gt),ye.data,-1,ie,Fe,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(J){let j=this._getOriginZoom(J)-1;for(;j<=this.options.maxZoom;){const ie=this.getChildren(J);if(j++,ie.length!==1)break;J=ie[0].properties.cluster_id}return j}_appendLeaves(J,j,ie,ye,Fe){const Oe=this.getChildren(j);for(const je of Oe){const Se=je.properties;if(Se&&Se.cluster?Fe+Se.point_count<=ye?Fe+=Se.point_count:Fe=this._appendLeaves(J,Se.cluster_id,ie,ye,Fe):Fe<ye?Fe++:J.push(je),J.length===ie)break}return Fe}_createTree(J){const j=new v.av(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<J.length;ie+=this.stride)j.add(J[ie],J[ie+1]);return j.finish(),j.data=J,j}_addTileFeatures(J,j,ie,ye,Fe,Oe){for(const je of J){const Se=je*this.stride,it=j[Se+Hi]>1;let gt,Xe,Dt;if(it)gt=Un(j,Se,this.clusterProps),Xe=j[Se],Dt=j[Se+1];else{const qi=this.points[j[Se+nn]];gt=qi.properties;const[Ci,Ui]=qi.geometry.coordinates;Xe=un(Ci),Dt=Xi(Ui)}const oi={type:1,geometry:[[Math.round(this.options.extent*(Xe*Fe-ie)),Math.round(this.options.extent*(Dt*Fe-ye))]],tags:gt};let gi;gi=it||this.options.generateId?j[Se+nn]:this.points[j[Se+nn]].id,gi!==void 0&&(oi.id=gi),Oe.features.push(oi)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,j){const{radius:ie,extent:ye,reduce:Fe,minPoints:Oe}=this.options,je=ie/(ye*Math.pow(2,j)),Se=J.data,it=[],gt=this.stride;for(let Xe=0;Xe<Se.length;Xe+=gt){if(Se[Xe+2]<=j)continue;Se[Xe+2]=j;const Dt=Se[Xe],oi=Se[Xe+1],gi=J.within(Se[Xe],Se[Xe+1],je),qi=Se[Xe+Hi];let Ci=qi;for(const Ui of gi){const Si=Ui*gt;Se[Si+2]>j&&(Ci+=Se[Si+Hi])}if(Ci>qi&&Ci>=Oe){let Ui,Si=Dt*qi,Rn=oi*qi,yn=-1;const Bi=((Xe/gt|0)<<5)+(j+1)+this.points.length;for(const rn of gi){const In=rn*gt;if(Se[In+2]<=j)continue;Se[In+2]=j;const Zn=Se[In+Hi];Si+=Se[In]*Zn,Rn+=Se[In+1]*Zn,Se[In+4]=Bi,Fe&&(Ui||(Ui=this._map(Se,Xe,!0),yn=this.clusterProps.length,this.clusterProps.push(Ui)),Fe(Ui,this._map(Se,In)))}Se[Xe+4]=Bi,it.push(Si/Ci,Rn/Ci,1/0,Bi,-1,Ci),Fe&&it.push(yn)}else{for(let Ui=0;Ui<gt;Ui++)it.push(Se[Xe+Ui]);if(Ci>1)for(const Ui of gi){const Si=Ui*gt;if(!(Se[Si+2]<=j)){Se[Si+2]=j;for(let Rn=0;Rn<gt;Rn++)it.push(Se[Si+Rn])}}}}return it}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,j,ie){if(J[j+Hi]>1){const Oe=this.clusterProps[J[j+wn]];return ie?Object.assign({},Oe):Oe}const ye=this.points[J[j+nn]].properties,Fe=this.options.map(ye);return ie&&Fe===ye?Object.assign({},Fe):Fe}}function dn(Ie,J,j){return{type:"Feature",id:Ie[J+nn],properties:Un(Ie,J,j),geometry:{type:"Point",coordinates:[(ie=Ie[J],360*(ie-.5)),On(Ie[J+1])]}};var ie}function Un(Ie,J,j){const ie=Ie[J+Hi],ye=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,Fe=Ie[J+wn],Oe=Fe===-1?{}:Object.assign({},j[Fe]);return Object.assign(Oe,{cluster:!0,cluster_id:Ie[J+nn],point_count:ie,point_count_abbreviated:ye})}function un(Ie){return Ie/360+.5}function Xi(Ie){const J=Math.sin(Ie*Math.PI/180),j=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return j<0?0:j>1?1:j}function On(Ie){const J=(180-360*Ie)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function Jn(Ie,J,j,ie){let ye=ie;const Fe=J+(j-J>>1);let Oe,je=j-J;const Se=Ie[J],it=Ie[J+1],gt=Ie[j],Xe=Ie[j+1];for(let Dt=J+3;Dt<j;Dt+=3){const oi=Qr(Ie[Dt],Ie[Dt+1],Se,it,gt,Xe);if(oi>ye)Oe=Dt,ye=oi;else if(oi===ye){const gi=Math.abs(Dt-Fe);gi<je&&(Oe=Dt,je=gi)}}ye>ie&&(Oe-J>3&&Jn(Ie,J,Oe,ie),Ie[Oe+2]=ye,j-Oe>3&&Jn(Ie,Oe,j,ie))}function Qr(Ie,J,j,ie,ye,Fe){let Oe=ye-j,je=Fe-ie;if(Oe!==0||je!==0){const Se=((Ie-j)*Oe+(J-ie)*je)/(Oe*Oe+je*je);Se>1?(j=ye,ie=Fe):Se>0&&(j+=Oe*Se,ie+=je*Se)}return Oe=Ie-j,je=J-ie,Oe*Oe+je*je}function Ee(Ie,J,j,ie){const ye={id:Ie??null,type:J,geometry:j,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")Ue(ye,j);else if(J==="Polygon")Ue(ye,j[0]);else if(J==="MultiLineString")for(const Fe of j)Ue(ye,Fe);else if(J==="MultiPolygon")for(const Fe of j)Ue(ye,Fe[0]);return ye}function Ue(Ie,J){for(let j=0;j<J.length;j+=3)Ie.minX=Math.min(Ie.minX,J[j]),Ie.minY=Math.min(Ie.minY,J[j+1]),Ie.maxX=Math.max(Ie.maxX,J[j]),Ie.maxY=Math.max(Ie.maxY,J[j+1])}function rt(Ie,J,j,ie){if(!J.geometry)return;const ye=J.geometry.coordinates;if(ye&&ye.length===0)return;const Fe=J.geometry.type,Oe=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2);let je=[],Se=J.id;if(j.promoteId?Se=J.properties[j.promoteId]:j.generateId&&(Se=ie||0),Fe==="Point")It(ye,je);else if(Fe==="MultiPoint")for(const it of ye)It(it,je);else if(Fe==="LineString")xe(ye,je,Oe,!1);else if(Fe==="MultiLineString"){if(j.lineMetrics){for(const it of ye)je=[],xe(it,je,Oe,!1),Ie.push(Ee(Se,"LineString",je,J.properties));return}bt(ye,je,Oe,!1)}else if(Fe==="Polygon")bt(ye,je,Oe,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(const it of J.geometry.geometries)rt(Ie,{id:Se,geometry:it,properties:J.properties},j,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const it of ye){const gt=[];bt(it,gt,Oe,!0),je.push(gt)}}Ie.push(Ee(Se,Fe,je,J.properties))}function It(Ie,J){J.push(Vt(Ie[0]),_t(Ie[1]),0)}function xe(Ie,J,j,ie){let ye,Fe,Oe=0;for(let Se=0;Se<Ie.length;Se++){const it=Vt(Ie[Se][0]),gt=_t(Ie[Se][1]);J.push(it,gt,0),Se>0&&(Oe+=ie?(ye*gt-it*Fe)/2:Math.sqrt(Math.pow(it-ye,2)+Math.pow(gt-Fe,2))),ye=it,Fe=gt}const je=J.length-3;J[2]=1,Jn(J,0,je,j),J[je+2]=1,J.size=Math.abs(Oe),J.start=0,J.end=J.size}function bt(Ie,J,j,ie){for(let ye=0;ye<Ie.length;ye++){const Fe=[];xe(Ie[ye],Fe,j,ie),J.push(Fe)}}function Vt(Ie){return Ie/360+.5}function _t(Ie){const J=Math.sin(Ie*Math.PI/180),j=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return j<0?0:j>1?1:j}function xt(Ie,J,j,ie,ye,Fe,Oe,je){if(ie/=J,Fe>=(j/=J)&&Oe<ie)return Ie;if(Oe<j||Fe>=ie)return null;const Se=[];for(const it of Ie){const gt=it.geometry;let Xe=it.type;const Dt=ye===0?it.minX:it.minY,oi=ye===0?it.maxX:it.maxY;if(Dt>=j&&oi<ie){Se.push(it);continue}if(oi<j||Dt>=ie)continue;let gi=[];if(Xe==="Point"||Xe==="MultiPoint")Bt(gt,gi,j,ie,ye);else if(Xe==="LineString")fi(gt,gi,j,ie,ye,!1,je.lineMetrics);else if(Xe==="MultiLineString")hi(gt,gi,j,ie,ye,!1);else if(Xe==="Polygon")hi(gt,gi,j,ie,ye,!0);else if(Xe==="MultiPolygon")for(const qi of gt){const Ci=[];hi(qi,Ci,j,ie,ye,!0),Ci.length&&gi.push(Ci)}if(gi.length){if(je.lineMetrics&&Xe==="LineString"){for(const qi of gi)Se.push(Ee(it.id,Xe,qi,it.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(gi.length===1?(Xe="LineString",gi=gi[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=gi.length===3?"Point":"MultiPoint"),Se.push(Ee(it.id,Xe,gi,it.tags))}}return Se.length?Se:null}function Bt(Ie,J,j,ie,ye){for(let Fe=0;Fe<Ie.length;Fe+=3){const Oe=Ie[Fe+ye];Oe>=j&&Oe<=ie&&di(J,Ie[Fe],Ie[Fe+1],Ie[Fe+2])}}function fi(Ie,J,j,ie,ye,Fe,Oe){let je=Ot(Ie);const Se=ye===0?Ri:ji;let it,gt,Xe=Ie.start;for(let Ci=0;Ci<Ie.length-3;Ci+=3){const Ui=Ie[Ci],Si=Ie[Ci+1],Rn=Ie[Ci+2],yn=Ie[Ci+3],Bi=Ie[Ci+4],rn=ye===0?Ui:Si,In=ye===0?yn:Bi;let Zn=!1;Oe&&(it=Math.sqrt(Math.pow(Ui-yn,2)+Math.pow(Si-Bi,2))),rn<j?In>j&&(gt=Se(je,Ui,Si,yn,Bi,j),Oe&&(je.start=Xe+it*gt)):rn>ie?In<ie&&(gt=Se(je,Ui,Si,yn,Bi,ie),Oe&&(je.start=Xe+it*gt)):di(je,Ui,Si,Rn),In<j&&rn>=j&&(gt=Se(je,Ui,Si,yn,Bi,j),Zn=!0),In>ie&&rn<=ie&&(gt=Se(je,Ui,Si,yn,Bi,ie),Zn=!0),!Fe&&Zn&&(Oe&&(je.end=Xe+it*gt),J.push(je),je=Ot(Ie)),Oe&&(Xe+=it)}let Dt=Ie.length-3;const oi=Ie[Dt],gi=Ie[Dt+1],qi=ye===0?oi:gi;qi>=j&&qi<=ie&&di(je,oi,gi,Ie[Dt+2]),Dt=je.length-3,Fe&&Dt>=3&&(je[Dt]!==je[0]||je[Dt+1]!==je[1])&&di(je,je[0],je[1],je[2]),je.length&&J.push(je)}function Ot(Ie){const J=[];return J.size=Ie.size,J.start=Ie.start,J.end=Ie.end,J}function hi(Ie,J,j,ie,ye,Fe){for(const Oe of Ie)fi(Oe,J,j,ie,ye,Fe,!1)}function di(Ie,J,j,ie){Ie.push(J,j,ie)}function Ri(Ie,J,j,ie,ye,Fe){const Oe=(Fe-J)/(ie-J);return di(Ie,Fe,j+(ye-j)*Oe,1),Oe}function ji(Ie,J,j,ie,ye,Fe){const Oe=(Fe-j)/(ye-j);return di(Ie,J+(ie-J)*Oe,Fe,1),Oe}function dt(Ie,J){const j=[];for(let ie=0;ie<Ie.length;ie++){const ye=Ie[ie],Fe=ye.type;let Oe;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")Oe=mn(ye.geometry,J);else if(Fe==="MultiLineString"||Fe==="Polygon"){Oe=[];for(const je of ye.geometry)Oe.push(mn(je,J))}else if(Fe==="MultiPolygon"){Oe=[];for(const je of ye.geometry){const Se=[];for(const it of je)Se.push(mn(it,J));Oe.push(Se)}}j.push(Ee(ye.id,Fe,Oe,ye.tags))}return j}function mn(Ie,J){const j=[];j.size=Ie.size,Ie.start!==void 0&&(j.start=Ie.start,j.end=Ie.end);for(let ie=0;ie<Ie.length;ie+=3)j.push(Ie[ie]+J,Ie[ie+1],Ie[ie+2]);return j}function en(Ie,J){if(Ie.transformed)return Ie;const j=1<<Ie.z,ie=Ie.x,ye=Ie.y;for(const Fe of Ie.features){const Oe=Fe.geometry,je=Fe.type;if(Fe.geometry=[],je===1)for(let Se=0;Se<Oe.length;Se+=2)Fe.geometry.push(Tn(Oe[Se],Oe[Se+1],J,j,ie,ye));else for(let Se=0;Se<Oe.length;Se++){const it=[];for(let gt=0;gt<Oe[Se].length;gt+=2)it.push(Tn(Oe[Se][gt],Oe[Se][gt+1],J,j,ie,ye));Fe.geometry.push(it)}}return Ie.transformed=!0,Ie}function Tn(Ie,J,j,ie,ye,Fe){return[Math.round(j*(Ie*ie-ye)),Math.round(j*(J*ie-Fe))]}function Pn(Ie,J,j,ie,ye){const Fe=J===ye.maxZoom?0:ye.tolerance/((1<<J)*ye.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:Ie.length,source:null,x:j,y:ie,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const je of Ie)Qt(Oe,je,Fe,ye);return Oe}function Qt(Ie,J,j,ie){const ye=J.geometry,Fe=J.type,Oe=[];if(Ie.minX=Math.min(Ie.minX,J.minX),Ie.minY=Math.min(Ie.minY,J.minY),Ie.maxX=Math.max(Ie.maxX,J.maxX),Ie.maxY=Math.max(Ie.maxY,J.maxY),Fe==="Point"||Fe==="MultiPoint")for(let je=0;je<ye.length;je+=3)Oe.push(ye[je],ye[je+1]),Ie.numPoints++,Ie.numSimplified++;else if(Fe==="LineString")Qi(Oe,ye,Ie,j,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(let je=0;je<ye.length;je++)Qi(Oe,ye[je],Ie,j,Fe==="Polygon",je===0);else if(Fe==="MultiPolygon")for(let je=0;je<ye.length;je++){const Se=ye[je];for(let it=0;it<Se.length;it++)Qi(Oe,Se[it],Ie,j,!0,it===0)}if(Oe.length){let je=J.tags||null;if(Fe==="LineString"&&ie.lineMetrics){je={};for(const it in J.tags)je[it]=J.tags[it];je.mapbox_clip_start=ye.start/ye.size,je.mapbox_clip_end=ye.end/ye.size}const Se={geometry:Oe,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:je};J.id!==null&&(Se.id=J.id),Ie.features.push(Se)}}function Qi(Ie,J,j,ie,ye,Fe){const Oe=ie*ie;if(ie>0&&J.size<(ye?Oe:ie))return void(j.numPoints+=J.length/3);const je=[];for(let Se=0;Se<J.length;Se+=3)(ie===0||J[Se+2]>Oe)&&(j.numSimplified++,je.push(J[Se],J[Se+1])),j.numPoints++;ye&&function(Se,it){let gt=0;for(let Xe=0,Dt=Se.length,oi=Dt-2;Xe<Dt;oi=Xe,Xe+=2)gt+=(Se[Xe]-Se[oi])*(Se[Xe+1]+Se[oi+1]);if(gt>0===it)for(let Xe=0,Dt=Se.length;Xe<Dt/2;Xe+=2){const oi=Se[Xe],gi=Se[Xe+1];Se[Xe]=Se[Dt-2-Xe],Se[Xe+1]=Se[Dt-1-Xe],Se[Dt-2-Xe]=oi,Se[Dt-1-Xe]=gi}}(je,Fe),Ie.push(je)}const ii={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class fn{constructor(J,j){const ie=(j=this.options=function(Fe,Oe){for(const je in Oe)Fe[je]=Oe[je];return Fe}(Object.create(ii),j)).debug;if(ie&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");let ye=function(Fe,Oe){const je=[];if(Fe.type==="FeatureCollection")for(let Se=0;Se<Fe.features.length;Se++)rt(je,Fe.features[Se],Oe,Se);else rt(je,Fe.type==="Feature"?Fe:{geometry:Fe},Oe);return je}(J,j);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Fe,Oe){const je=Oe.buffer/Oe.extent;let Se=Fe;const it=xt(Fe,1,-1-je,je,0,-1,2,Oe),gt=xt(Fe,1,1-je,2+je,0,-1,2,Oe);return(it||gt)&&(Se=xt(Fe,1,-je,1+je,0,-1,2,Oe)||[],it&&(Se=dt(it,1).concat(Se)),gt&&(Se=Se.concat(dt(gt,-1)))),Se}(ye,j),ye.length&&this.splitTile(ye,0,0,0),ie&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,j,ie,ye,Fe,Oe,je){const Se=[J,j,ie,ye],it=this.options,gt=it.debug;for(;Se.length;){ye=Se.pop(),ie=Se.pop(),j=Se.pop(),J=Se.pop();const Xe=1<<j,Dt=Ar(j,ie,ye);let oi=this.tiles[Dt];if(!oi&&(gt>1&&console.time("creation"),oi=this.tiles[Dt]=Pn(J,j,ie,ye,it),this.tileCoords.push({z:j,x:ie,y:ye}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,ie,ye,oi.numFeatures,oi.numPoints,oi.numSimplified),console.timeEnd("creation"));const Zn=`z${j}`;this.stats[Zn]=(this.stats[Zn]||0)+1,this.total++}if(oi.source=J,Fe==null){if(j===it.indexMaxZoom||oi.numPoints<=it.indexMaxPoints)continue}else{if(j===it.maxZoom||j===Fe)continue;if(Fe!=null){const Zn=Fe-j;if(ie!==Oe>>Zn||ye!==je>>Zn)continue}}if(oi.source=null,J.length===0)continue;gt>1&&console.time("clipping");const gi=.5*it.buffer/it.extent,qi=.5-gi,Ci=.5+gi,Ui=1+gi;let Si=null,Rn=null,yn=null,Bi=null,rn=xt(J,Xe,ie-gi,ie+Ci,0,oi.minX,oi.maxX,it),In=xt(J,Xe,ie+qi,ie+Ui,0,oi.minX,oi.maxX,it);J=null,rn&&(Si=xt(rn,Xe,ye-gi,ye+Ci,1,oi.minY,oi.maxY,it),Rn=xt(rn,Xe,ye+qi,ye+Ui,1,oi.minY,oi.maxY,it),rn=null),In&&(yn=xt(In,Xe,ye-gi,ye+Ci,1,oi.minY,oi.maxY,it),Bi=xt(In,Xe,ye+qi,ye+Ui,1,oi.minY,oi.maxY,it),In=null),gt>1&&console.timeEnd("clipping"),Se.push(Si||[],j+1,2*ie,2*ye),Se.push(Rn||[],j+1,2*ie,2*ye+1),Se.push(yn||[],j+1,2*ie+1,2*ye),Se.push(Bi||[],j+1,2*ie+1,2*ye+1)}}getTile(J,j,ie){J=+J,j=+j,ie=+ie;const ye=this.options,{extent:Fe,debug:Oe}=ye;if(J<0||J>24)return null;const je=1<<J,Se=Ar(J,j=j+je&je-1,ie);if(this.tiles[Se])return en(this.tiles[Se],Fe);Oe>1&&console.log("drilling down to z%d-%d-%d",J,j,ie);let it,gt=J,Xe=j,Dt=ie;for(;!it&&gt>0;)gt--,Xe>>=1,Dt>>=1,it=this.tiles[Ar(gt,Xe,Dt)];return it&&it.source?(Oe>1&&(console.log("found parent tile z%d-%d-%d",gt,Xe,Dt),console.time("drilling down")),this.splitTile(it.source,gt,Xe,Dt,J,j,ie),Oe>1&&console.timeEnd("drilling down"),this.tiles[Se]?en(this.tiles[Se],Fe):null):null}}function Ar(Ie,J,j){return 32*((1<<Ie)*j+J)+Ie}function wi(Ie,J){return J?Ie.properties[J]:Ie.id}function ma(Ie,J){if(Ie==null)return!0;if(Ie.type==="Feature")return wi(Ie,J)!=null;if(Ie.type==="FeatureCollection"){const j=new Set;for(const ie of Ie.features){const ye=wi(ie,J);if(ye==null||j.has(ye))return!1;j.add(ye)}return!0}return!1}function ya(Ie,J){const j=new Map;if(Ie!=null)if(Ie.type==="Feature")j.set(wi(Ie,J),Ie);else for(const ie of Ie.features)j.set(wi(ie,J),ie);return j}class is extends q{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,j){return v._(this,void 0,void 0,function*(){const ie=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ye=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!ye)return null;const Fe=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.X,this.length=je.length,this._features=je}feature(je){return new class{constructor(Se){this._feature=Se,this.extent=v.X,this.type=Se.type,this.properties=Se.tags,"id"in Se&&!isNaN(Se.id)&&(this.id=parseInt(Se.id,10))}loadGeometry(){if(this._feature.type===1){const Se=[];for(const it of this._feature.geometry)Se.push([new v.P(it[0],it[1])]);return Se}{const Se=[];for(const it of this._feature.geometry){const gt=[];for(const Xe of it)gt.push(new v.P(Xe[0],Xe[1]));Se.push(gt)}return Se}}toGeoJSON(Se,it,gt){return Ye.call(this,Se,it,gt)}}(this._features[je])}}(ye.features);let Oe=vi(Fe);return Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),{vectorTile:Fe,rawData:Oe.buffer}})}loadData(J){return v._(this,void 0,void 0,function*(){var j;(j=this._pendingRequest)===null||j===void 0||j.abort();const ie=!!(J&&J.request&&J.request.collectResourceTiming)&&new v.bv(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest),this._geoJSONIndex=J.cluster?new Fi(function({superclusterOptions:Oe,clusterProperties:je}){if(!je||!Oe)return Oe;const Se={},it={},gt={accumulated:null,zoom:0},Xe={properties:null},Dt=Object.keys(je);for(const oi of Dt){const[gi,qi]=je[oi],Ci=v.bC(qi),Ui=v.bC(typeof gi=="string"?[gi,["accumulated"],["get",oi]]:gi);Se[oi]=Ci.value,it[oi]=Ui.value}return Oe.map=oi=>{Xe.properties=oi;const gi={};for(const qi of Dt)gi[qi]=Se[qi].evaluate(gt,Xe);return gi},Oe.reduce=(oi,gi)=>{Xe.properties=gi;for(const qi of Dt)gt.accumulated=oi[qi],oi[qi]=it[qi].evaluate(gt,Xe)},Oe}(J)).load((yield this._pendingData).features):(ye=yield this._pendingData,new fn(ye,J.geojsonVtOptions)),this.loaded={};const Fe={};if(ie){const Oe=ie.finish();Oe&&(Fe.resourceTiming={},Fe.resourceTiming[J.source]=JSON.parse(JSON.stringify(Oe)))}return Fe}catch(Fe){if(delete this._pendingRequest,v.bB(Fe))return{abandoned:!0};throw Fe}var ye})}getData(){return v._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){const j=this.loaded;return j&&j[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,j){return v._(this,void 0,void 0,function*(){let ie=yield this.loadGeoJSON(J,j);if(delete this._pendingRequest,typeof ie!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(Ae(ie,!0),J.filter){const ye=v.bC(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));ie={type:"FeatureCollection",features:ie.features.filter(Oe=>ye.value.evaluate({zoom:0},Oe))}}return ie})}loadGeoJSON(J,j){return v._(this,void 0,void 0,function*(){const{promoteId:ie}=J;if(J.request){const ye=yield v.h(J.request,j);return this._dataUpdateable=ma(ye.data,ie)?ya(ye.data,ie):void 0,ye.data}if(typeof J.data=="string")try{const ye=JSON.parse(J.data);return this._dataUpdateable=ma(ye,ie)?ya(ye,ie):void 0,ye}catch{throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return function(ye,Fe,Oe){var je,Se,it,gt;if(Fe.removeAll&&ye.clear(),Fe.remove)for(const Xe of Fe.remove)ye.delete(Xe);if(Fe.add)for(const Xe of Fe.add){const Dt=wi(Xe,Oe);Dt!=null&&ye.set(Dt,Xe)}if(Fe.update)for(const Xe of Fe.update){let Dt=ye.get(Xe.id);if(Dt==null)continue;const oi=!Xe.removeAllProperties&&(((je=Xe.removeProperties)===null||je===void 0?void 0:je.length)>0||((Se=Xe.addOrUpdateProperties)===null||Se===void 0?void 0:Se.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||oi)&&(Dt=Object.assign({},Dt),ye.set(Xe.id,Dt),oi&&(Dt.properties=Object.assign({},Dt.properties))),Xe.newGeometry&&(Dt.geometry=Xe.newGeometry),Xe.removeAllProperties)Dt.properties={};else if(((it=Xe.removeProperties)===null||it===void 0?void 0:it.length)>0)for(const gi of Xe.removeProperties)Object.prototype.hasOwnProperty.call(Dt.properties,gi)&&delete Dt.properties[gi];if(((gt=Xe.addOrUpdateProperties)===null||gt===void 0?void 0:gt.length)>0)for(const{key:gi,value:qi}of Xe.addOrUpdateProperties)Dt.properties[gi]=qi}}(this._dataUpdateable,J.dataDiff,ie),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return v._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class pr{constructor(J){this.self=J,this.actor=new v.F(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(j,ie)=>{if(this.externalWorkerSourceTypes[j])throw new Error(`Worker source with name "${j}" already registered.`);this.externalWorkerSourceTypes[j]=ie},this.self.addProtocol=v.bi,this.self.removeProtocol=v.bj,this.self.registerRTLTextPlugin=j=>{if(v.bD.isParsed())throw new Error("RTL text plugin already registered.");v.bD.setMethods(j)},this.actor.registerMessageHandler("LDT",(j,ie)=>this._getDEMWorkerSource(j,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RDT",(j,ie)=>v._(this,void 0,void 0,function*(){this._getDEMWorkerSource(j,ie.source).removeTile(ie)})),this.actor.registerMessageHandler("GCEZ",(j,ie)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(j,ie.type,ie.source).getClusterExpansionZoom(ie)})),this.actor.registerMessageHandler("GCC",(j,ie)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(j,ie.type,ie.source).getClusterChildren(ie)})),this.actor.registerMessageHandler("GCL",(j,ie)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(j,ie.type,ie.source).getClusterLeaves(ie)})),this.actor.registerMessageHandler("LD",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).loadData(ie)),this.actor.registerMessageHandler("GD",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).getData()),this.actor.registerMessageHandler("LT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).reloadTile(ie)),this.actor.registerMessageHandler("AT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).abortTile(ie)),this.actor.registerMessageHandler("RMT",(j,ie)=>this._getWorkerSource(j,ie.type,ie.source).removeTile(ie)),this.actor.registerMessageHandler("RS",(j,ie)=>v._(this,void 0,void 0,function*(){if(!this.workerSources[j]||!this.workerSources[j][ie.type]||!this.workerSources[j][ie.type][ie.source])return;const ye=this.workerSources[j][ie.type][ie.source];delete this.workerSources[j][ie.type][ie.source],ye.removeSource!==void 0&&ye.removeSource(ie)})),this.actor.registerMessageHandler("RM",j=>v._(this,void 0,void 0,function*(){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j]})),this.actor.registerMessageHandler("SR",(j,ie)=>v._(this,void 0,void 0,function*(){this.referrer=ie})),this.actor.registerMessageHandler("SRPS",(j,ie)=>this._syncRTLPluginState(j,ie)),this.actor.registerMessageHandler("IS",(j,ie)=>v._(this,void 0,void 0,function*(){this.self.importScripts(ie)})),this.actor.registerMessageHandler("SI",(j,ie)=>this._setImages(j,ie)),this.actor.registerMessageHandler("UL",(j,ie)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(j).update(ie.layers,ie.removedIds)})),this.actor.registerMessageHandler("SL",(j,ie)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(j).replace(ie)}))}_setImages(J,j){return v._(this,void 0,void 0,function*(){this.availableImages[J]=j;for(const ie in this.workerSources[J]){const ye=this.workerSources[J][ie];for(const Fe in ye)ye[Fe].availableImages=j}})}_syncRTLPluginState(J,j){return v._(this,void 0,void 0,function*(){if(v.bD.isParsed())return v.bD.getState();if(j.pluginStatus!=="loading")return v.bD.setState(j),j;const ie=j.pluginURL;if(this.self.importScripts(ie),v.bD.isParsed()){const ye={pluginStatus:"loaded",pluginURL:ie};return v.bD.setState(ye),ye}throw v.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ie}`)})}_getAvailableImages(J){let j=this.availableImages[J];return j||(j=[]),j}_getLayerIndex(J){let j=this.layerIndexes[J];return j||(j=this.layerIndexes[J]=new l),j}_getWorkerSource(J,j,ie){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][j]||(this.workerSources[J][j]={}),!this.workerSources[J][j][ie]){const ye={sendAsync:(Fe,Oe)=>(Fe.targetMapId=J,this.actor.sendAsync(Fe,Oe))};switch(j){case"vector":this.workerSources[J][j][ie]=new q(ye,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][j][ie]=new is(ye,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][j][ie]=new this.externalWorkerSourceTypes[j](ye,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][j][ie]}_getDEMWorkerSource(J,j){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][j]||(this.demWorkerSources[J][j]=new G),this.demWorkerSources[J][j]}}return v.i(self)&&(self.worker=new pr(self)),pr}),_("index",["exports","./shared"],function(v,l){var V="4.7.1";let W,H;const q={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:g=>new Promise((e,a)=>{const u=requestAnimationFrame(e);g.signal.addEventListener("abort",()=>{cancelAnimationFrame(u),a(l.c())})}),getImageData(g,e=0){return this.getImageCanvasContext(g).getImageData(-e,-e,g.width+2*e,g.height+2*e)},getImageCanvasContext(g){const e=window.document.createElement("canvas"),a=e.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return e.width=g.width,e.height=g.height,a.drawImage(g,0,0,g.width,g.height),a},resolveURL:g=>(W||(W=document.createElement("a")),W.href=g,W.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(H==null&&(H=matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}};class G{static testProp(e){if(!G.docStyle)return e[0];for(let a=0;a<e.length;a++)if(e[a]in G.docStyle)return e[a];return e[0]}static create(e,a,u){const h=window.document.createElement(e);return a!==void 0&&(h.className=a),u&&u.appendChild(h),h}static createNS(e,a){return window.document.createElementNS(e,a)}static disableDrag(){G.docStyle&&G.selectProp&&(G.userSelect=G.docStyle[G.selectProp],G.docStyle[G.selectProp]="none")}static enableDrag(){G.docStyle&&G.selectProp&&(G.docStyle[G.selectProp]=G.userSelect)}static setTransform(e,a){e.style[G.transformProp]=a}static addEventListener(e,a,u,h={}){e.addEventListener(a,u,"passive"in h?h:h.capture)}static removeEventListener(e,a,u,h={}){e.removeEventListener(a,u,"passive"in h?h:h.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",G.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",G.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",G.suppressClickInternal,!0)},0)}static getScale(e){const a=e.getBoundingClientRect();return{x:a.width/e.offsetWidth||1,y:a.height/e.offsetHeight||1,boundingClientRect:a}}static getPoint(e,a,u){const h=a.boundingClientRect;return new l.P((u.clientX-h.left)/a.x-e.clientLeft,(u.clientY-h.top)/a.y-e.clientTop)}static mousePos(e,a){const u=G.getScale(e);return G.getPoint(e,u,a)}static touchPos(e,a){const u=[],h=G.getScale(e);for(let f=0;f<a.length;f++)u.push(G.getPoint(e,h,a[f]));return u}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}G.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,G.selectProp=G.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),G.transformProp=G.testProp(["transform","WebkitTransform"]);const me={supported:!1,testSupport:function(g){!Ye&&Ae&&(st?ut(g):pe=g)}};let pe,Ae,Ye=!1,st=!1;function ut(g){const e=g.createTexture();g.bindTexture(g.TEXTURE_2D,e);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Ae),g.isContextLost())return;me.supported=!0}catch{}g.deleteTexture(e),Ye=!0}var ot;typeof document<"u"&&(Ae=document.createElement("img"),Ae.onload=()=>{pe&&ut(pe),pe=null,st=!0},Ae.onerror=()=>{Ye=!0,pe=null},Ae.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let e,a,u,h;g.resetRequestQueue=()=>{e=[],a=0,u=0,h={}},g.addThrottleControl=Q=>{const D=u++;return h[D]=Q,D},g.removeThrottleControl=Q=>{delete h[Q],C()},g.getImage=(Q,D,R=!0)=>new Promise((z,ee)=>{me.supported&&(Q.headers||(Q.headers={}),Q.headers.accept="image/webp,*/*"),l.e(Q,{type:"image"}),e.push({abortController:D,requestParameters:Q,supportImageRefresh:R,state:"queued",onError:oe=>{ee(oe)},onSuccess:oe=>{z(oe)}}),C()});const f=Q=>l._(this,void 0,void 0,function*(){Q.state="running";const{requestParameters:D,supportImageRefresh:R,onError:z,onSuccess:ee,abortController:oe}=Q,ce=R===!1&&!l.i(self)&&!l.g(D.url)&&(!D.headers||Object.keys(D.headers).reduce((Qe,Me)=>Qe&&Me==="accept",!0));a++;const ve=ce?E(D,oe):l.m(D,oe);try{const Qe=yield ve;delete Q.abortController,Q.state="completed",Qe.data instanceof HTMLImageElement||l.b(Qe.data)?ee(Qe):Qe.data&&ee({data:yield(we=Qe.data,typeof createImageBitmap=="function"?l.d(we):l.f(we)),cacheControl:Qe.cacheControl,expires:Qe.expires})}catch(Qe){delete Q.abortController,z(Qe)}finally{a--,C()}var we}),C=()=>{const Q=(()=>{for(const D of Object.keys(h))if(h[D]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=a;D<Q&&e.length>0;D++){const R=e.shift();R.abortController.signal.aborted?D--:f(R)}},E=(Q,D)=>new Promise((R,z)=>{const ee=new Image,oe=Q.url,ce=Q.credentials;ce&&ce==="include"?ee.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!l.s(oe))&&(ee.crossOrigin="anonymous"),D.signal.addEventListener("abort",()=>{ee.src="",z(l.c())}),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,R({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,D.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=oe})}(ot||(ot={})),ot.resetRequestQueue();class ft{constructor(e){this._transformRequestFn=e}transformRequest(e,a){return this._transformRequestFn&&this._transformRequestFn(e,a)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Pt(g){var e=new l.A(3);return e[0]=g[0],e[1]=g[1],e[2]=g[2],e}var Rt,Nt=function(g,e,a){return g[0]=e[0]-a[0],g[1]=e[1]-a[1],g[2]=e[2]-a[2],g};Rt=new l.A(3),l.A!=Float32Array&&(Rt[0]=0,Rt[1]=0,Rt[2]=0);var Xt=function(g){var e=g[0],a=g[1];return e*e+a*a};function Et(g){const e=[];if(typeof g=="string")e.push({id:"default",url:g});else if(g&&g.length>0){const a=[];for(const{id:u,url:h}of g){const f=`${u}${h}`;a.indexOf(f)===-1&&(a.push(f),e.push({id:u,url:h}))}}return e}function zt(g,e,a){const u=g.split("?");return u[0]+=`${e}${a}`,u.join("?")}(function(){var g=new l.A(2);l.A!=Float32Array&&(g[0]=0,g[1]=0)})();class mt{constructor(e,a,u,h){this.context=e,this.format=u,this.texture=e.gl.createTexture(),this.update(a,h)}update(e,a,u){const{width:h,height:f}=e,C=!(this.size&&this.size[0]===h&&this.size[1]===f||u),{context:E}=this,{gl:Q}=E;if(this.useMipmap=!!(a&&a.useMipmap),Q.bindTexture(Q.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===Q.RGBA&&(!a||a.premultiply!==!1)),C)this.size=[h,f],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||l.b(e)?Q.texImage2D(Q.TEXTURE_2D,0,this.format,this.format,Q.UNSIGNED_BYTE,e):Q.texImage2D(Q.TEXTURE_2D,0,this.format,h,f,0,this.format,Q.UNSIGNED_BYTE,e.data);else{const{x:D,y:R}=u||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||l.b(e)?Q.texSubImage2D(Q.TEXTURE_2D,0,D,R,Q.RGBA,Q.UNSIGNED_BYTE,e):Q.texSubImage2D(Q.TEXTURE_2D,0,D,R,h,f,Q.RGBA,Q.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Q.generateMipmap(Q.TEXTURE_2D)}bind(e,a,u){const{context:h}=this,{gl:f}=h;f.bindTexture(f.TEXTURE_2D,this.texture),u!==f.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(u=f.LINEAR),e!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,u||e),this.filter=e),a!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function tt(g){const{userImage:e}=g;return!!(e&&e.render&&e.render())&&(g.data.replace(new Uint8Array(e.data.buffer)),!0)}class yt extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:a,promiseResolve:u}of this.requestors)u(this._getImagesForIds(a));this.requestors=[]}}getImage(e){const a=this.images[e];if(a&&!a.data&&a.spriteData){const u=a.spriteData;a.data=new l.R({width:u.width,height:u.height},u.context.getImageData(u.x,u.y,u.width,u.height).data),a.spriteData=null}return a}addImage(e,a){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,a)&&(this.images[e]=a)}_validate(e,a){let u=!0;const h=a.data||a.spriteData;return this._validateStretch(a.stretchX,h&&h.width)||(this.fire(new l.j(new Error(`Image "${e}" has invalid "stretchX" value`))),u=!1),this._validateStretch(a.stretchY,h&&h.height)||(this.fire(new l.j(new Error(`Image "${e}" has invalid "stretchY" value`))),u=!1),this._validateContent(a.content,a)||(this.fire(new l.j(new Error(`Image "${e}" has invalid "content" value`))),u=!1),u}_validateStretch(e,a){if(!e)return!0;let u=0;for(const h of e){if(h[0]<u||h[1]<h[0]||a<h[1])return!1;u=h[1]}return!0}_validateContent(e,a){if(!e)return!0;if(e.length!==4)return!1;const u=a.spriteData,h=u&&u.width||a.data.width,f=u&&u.height||a.data.height;return!(e[0]<0||h<e[0]||e[1]<0||f<e[1]||e[2]<0||h<e[2]||e[3]<0||f<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,a,u=!0){const h=this.getImage(e);if(u&&(h.data.width!==a.data.width||h.data.height!==a.data.height))throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=h.version+1,this.images[e]=a,this.updatedImages[e]=!0}removeImage(e){const a=this.images[e];delete this.images[e],delete this.patterns[e],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((a,u)=>{let h=!0;if(!this.isLoaded())for(const f of e)this.images[f]||(h=!1);this.isLoaded()||h?a(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:a})})}_getImagesForIds(e){const a={};for(const u of e){let h=this.getImage(u);h||(this.fire(new l.k("styleimagemissing",{id:u})),h=this.getImage(u)),h?a[u]={data:h.data.clone(),pixelRatio:h.pixelRatio,sdf:h.sdf,version:h.version,stretchX:h.stretchX,stretchY:h.stretchY,content:h.content,textFitWidth:h.textFitWidth,textFitHeight:h.textFitHeight,hasRenderCallback:!!(h.userImage&&h.userImage.render)}:l.w(`Image "${u}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:e,height:a}=this.atlasImage;return{width:e,height:a}}getPattern(e){const a=this.patterns[e],u=this.getImage(e);if(!u)return null;if(a&&a.position.version===u.version)return a.position;if(a)a.position.version=u.version;else{const h={w:u.data.width+2,h:u.data.height+2,x:0,y:0},f=new l.I(h,u);this.patterns[e]={bin:h,position:f}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const a=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new mt(e,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const f in this.patterns)e.push(this.patterns[f].bin);const{w:a,h:u}=l.p(e),h=this.atlasImage;h.resize({width:a||1,height:u||1});for(const f in this.patterns){const{bin:C}=this.patterns[f],E=C.x+1,Q=C.y+1,D=this.getImage(f).data,R=D.width,z=D.height;l.R.copy(D,h,{x:0,y:0},{x:E,y:Q},{width:R,height:z}),l.R.copy(D,h,{x:0,y:z-1},{x:E,y:Q-1},{width:R,height:1}),l.R.copy(D,h,{x:0,y:0},{x:E,y:Q+z},{width:R,height:1}),l.R.copy(D,h,{x:R-1,y:0},{x:E-1,y:Q},{width:1,height:z}),l.R.copy(D,h,{x:0,y:0},{x:E+R,y:Q},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const a of e){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const u=this.getImage(a);u||l.w(`Image with ID: "${a}" was not found`),tt(u)&&this.updateImage(a,u)}}}const Jt=1e20;function yi(g,e,a,u,h,f,C,E,Q){for(let D=e;D<e+u;D++)pi(g,a*f+D,f,h,C,E,Q);for(let D=a;D<a+h;D++)pi(g,D*f+e,1,u,C,E,Q)}function pi(g,e,a,u,h,f,C){f[0]=0,C[0]=-Jt,C[1]=Jt,h[0]=g[e];for(let E=1,Q=0,D=0;E<u;E++){h[E]=g[e+E*a];const R=E*E;do{const z=f[Q];D=(h[E]-h[z]+R-z*z)/(E-z)/2}while(D<=C[Q]&&--Q>-1);Q++,f[Q]=E,C[Q]=D,C[Q+1]=Jt}for(let E=0,Q=0;E<u;E++){for(;C[Q+1]<E;)Q++;const D=f[Q],R=E-D;g[e+E*a]=h[D]+R*R}}class vi{constructor(e,a){this.requestManager=e,this.localIdeographFontFamily=a,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return l._(this,void 0,void 0,function*(){const a=[];for(const f in e)for(const C of e[f])a.push(this._getAndCacheGlyphsPromise(f,C));const u=yield Promise.all(a),h={};for(const{stack:f,id:C,glyph:E}of u)h[f]||(h[f]={}),h[f][C]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return h})}_getAndCacheGlyphsPromise(e,a){return l._(this,void 0,void 0,function*(){let u=this.entries[e];u||(u=this.entries[e]={glyphs:{},requests:{},ranges:{}});let h=u.glyphs[a];if(h!==void 0)return{stack:e,id:a,glyph:h};if(h=this._tinySDF(u,e,a),h)return u.glyphs[a]=h,{stack:e,id:a,glyph:h};const f=Math.floor(a/256);if(256*f>65535)throw new Error("glyphs > 65535 not supported");if(u.ranges[f])return{stack:e,id:a,glyph:h};if(!this.url)throw new Error("glyphsUrl is not set");if(!u.requests[f]){const E=vi.loadGlyphRange(e,f,this.url,this.requestManager);u.requests[f]=E}const C=yield u.requests[f];for(const E in C)this._doesCharSupportLocalGlyph(+E)||(u.glyphs[+E]=C[+E]);return u.ranges[f]=!0,{stack:e,id:a,glyph:C[a]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,a,u){const h=this.localIdeographFontFamily;if(!h||!this._doesCharSupportLocalGlyph(u))return;let f=e.tinySDF;if(!f){let E="400";/bold/i.test(a)?E="900":/medium/i.test(a)?E="500":/light/i.test(a)&&(E="200"),f=e.tinySDF=new vi.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:h,fontWeight:E})}const C=f.draw(String.fromCharCode(u));return{id:u,bitmap:new l.o({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}vi.loadGlyphRange=function(g,e,a,u){return l._(this,void 0,void 0,function*(){const h=256*e,f=h+255,C=u.transformRequest(a.replace("{fontstack}",g).replace("{range}",`${h}-${f}`),"Glyphs"),E=yield l.l(C,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${e}, ${h}-${f}`);const Q={};for(const D of l.n(E.data))Q[D.id]=D;return Q})},vi.TinySDF=class{constructor({fontSize:g=24,buffer:e=3,radius:a=8,cutoff:u=.25,fontFamily:h="sans-serif",fontWeight:f="normal",fontStyle:C="normal"}={}){this.buffer=e,this.cutoff=u,this.radius=a;const E=this.size=g+4*e,Q=this._createCanvas(E),D=this.ctx=Q.getContext("2d",{willReadFrequently:!0});D.font=`${C} ${f} ${g}px ${h}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(g){const e=document.createElement("canvas");return e.width=e.height=g,e}draw(g){const{width:e,actualBoundingBoxAscent:a,actualBoundingBoxDescent:u,actualBoundingBoxLeft:h,actualBoundingBoxRight:f}=this.ctx.measureText(g),C=Math.ceil(a),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-h))),Q=Math.min(this.size-this.buffer,C+Math.ceil(u)),D=E+2*this.buffer,R=Q+2*this.buffer,z=Math.max(D*R,0),ee=new Uint8ClampedArray(z),oe={data:ee,width:D,height:R,glyphWidth:E,glyphHeight:Q,glyphTop:C,glyphLeft:0,glyphAdvance:e};if(E===0||Q===0)return oe;const{ctx:ce,buffer:ve,gridInner:we,gridOuter:Qe}=this;ce.clearRect(ve,ve,E,Q),ce.fillText(g,ve,ve+C);const Me=ce.getImageData(ve,ve,E,Q);Qe.fill(Jt,0,z),we.fill(0,0,z);for(let fe=0;fe<Q;fe++)for(let Ne=0;Ne<E;Ne++){const Ve=Me.data[4*(fe*E+Ne)+3]/255;if(Ve===0)continue;const Je=(fe+ve)*D+Ne+ve;if(Ve===1)Qe[Je]=0,we[Je]=Jt;else{const At=.5-Ve;Qe[Je]=At>0?At*At:0,we[Je]=At<0?At*At:0}}yi(Qe,0,0,D,R,D,this.f,this.v,this.z),yi(we,ve,ve,E,Q,D,this.f,this.v,this.z);for(let fe=0;fe<z;fe++){const Ne=Math.sqrt(Qe[fe])-Math.sqrt(we[fe]);ee[fe]=Math.round(255-255*(Ne/this.radius+this.cutoff))}return oe}};class Mi{constructor(){this.specification=l.v.light.position}possiblyEvaluate(e,a){return l.x(e.expression.evaluate(a))}interpolate(e,a,u){return{x:l.y.number(e.x,a.x,u),y:l.y.number(e.y,a.y,u),z:l.y.number(e.z,a.z,u)}}}let Wi;class Nn extends l.E{constructor(e){super(),Wi=Wi||new l.q({anchor:new l.D(l.v.light.anchor),position:new Mi,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Wi),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,a={}){if(!this._validate(l.r,e,a))for(const u in e){const h=e[u];u.endsWith("-transition")?this._transitionable.setTransition(u.slice(0,-11),h):this._transitionable.setValue(u,h)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,u){return(!u||u.validate!==!1)&&l.t(this,e.call(l.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const nn=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Hi extends l.E{constructor(e){super(),this._transitionable=new l.T(nn),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(e,a={}){if(!this._validate(l.B,e,a)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const u in e){const h=e[u];u.endsWith("-transition")?this._transitionable.setTransition(u.slice(0,-11),h):this._transitionable.setValue(u,h)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,a,u={}){return(u==null?void 0:u.validate)!==!1&&l.t(this,e.call(l.u,l.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class wn{constructor(e,a){this.width=e,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,a){const u=e.join(",")+String(a);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(e,a)),this.dashEntry[u]}getDashRanges(e,a,u){const h=[];let f=e.length%2==1?-e[e.length-1]*u:0,C=e[0]*u,E=!0;h.push({left:f,right:C,isDash:E,zeroLength:e[0]===0});let Q=e[0];for(let D=1;D<e.length;D++){E=!E;const R=e[D];f=Q*u,Q+=R,C=Q*u,h.push({left:f,right:C,isDash:E,zeroLength:R===0})}return h}addRoundDash(e,a,u){const h=a/2;for(let f=-u;f<=u;f++){const C=this.width*(this.nextRow+u+f);let E=0,Q=e[E];for(let D=0;D<this.width;D++){D/Q.right>1&&(Q=e[++E]);const R=Math.abs(D-Q.left),z=Math.abs(D-Q.right),ee=Math.min(R,z);let oe;const ce=f/u*(h+1);if(Q.isDash){const ve=h-Math.abs(ce);oe=Math.sqrt(ee*ee+ve*ve)}else oe=h-Math.sqrt(ee*ee+ce*ce);this.data[C+D]=Math.max(0,Math.min(255,oe+128))}}}addRegularDash(e){for(let E=e.length-1;E>=0;--E){const Q=e[E],D=e[E+1];Q.zeroLength?e.splice(E,1):D&&D.isDash===Q.isDash&&(D.left=Q.left,e.splice(E,1))}const a=e[0],u=e[e.length-1];a.isDash===u.isDash&&(a.left=u.left-this.width,u.right=a.right+this.width);const h=this.width*this.nextRow;let f=0,C=e[f];for(let E=0;E<this.width;E++){E/C.right>1&&(C=e[++f]);const Q=Math.abs(E-C.left),D=Math.abs(E-C.right),R=Math.min(Q,D);this.data[h+E]=Math.max(0,Math.min(255,(C.isDash?R:-R)+128))}}addDash(e,a){const u=a?7:0,h=2*u+1;if(this.nextRow+h>this.height)return l.w("LineAtlas out of space"),null;let f=0;for(let E=0;E<e.length;E++)f+=e[E];if(f!==0){const E=this.width/f,Q=this.getDashRanges(e,this.width,E);a?this.addRoundDash(Q,E,u):this.addRegularDash(Q)}const C={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:f};return this.nextRow+=h,this.dirty=!0,C}bind(e){const a=e.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const Fi="maplibre_preloaded_worker_pool";class dn{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<dn.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fi]}numActive(){return Object.keys(this.active).length}}const Un=Math.floor(q.hardwareConcurrency/2);let un,Xi;function On(){return un||(un=new dn),un}dn.workerCount=l.C(globalThis)?Math.max(Math.min(Un,3),1):1;class Jn{constructor(e,a){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=a;const u=this.workerPool.acquire(a);for(let h=0;h<u.length;h++){const f=new l.F(u[h],a);f.name=`Worker ${h}`,this.actors.push(f)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,a){const u=[];for(const h of this.actors)u.push(h.sendAsync({type:e,data:a}));return Promise.all(u)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,a){for(const u of this.actors)u.registerMessageHandler(e,a)}}function Qr(){return Xi||(Xi=new Jn(On(),l.G),Xi.registerMessageHandler("GR",(g,e,a)=>l.m(e,a))),Xi}function Ee(g,e){const a=l.H();return l.J(a,a,[1,1,0]),l.K(a,a,[.5*g.width,.5*g.height,1]),l.L(a,a,g.calculatePosMatrix(e.toUnwrapped()))}function Ue(g,e,a,u,h,f){const C=function(z,ee,oe){if(z)for(const ce of z){const ve=ee[ce];if(ve&&ve.source===oe&&ve.type==="fill-extrusion")return!0}else for(const ce in ee){const ve=ee[ce];if(ve.source===oe&&ve.type==="fill-extrusion")return!0}return!1}(h&&h.layers,e,g.id),E=f.maxPitchScaleFactor(),Q=g.tilesIn(u,E,C);Q.sort(rt);const D=[];for(const z of Q)D.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(e,a,g._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,h,f,E,Ee(g.transform,z.tileID))});const R=function(z){const ee={},oe={};for(const ce of z){const ve=ce.queryResults,we=ce.wrappedTileID,Qe=oe[we]=oe[we]||{};for(const Me in ve){const fe=ve[Me],Ne=Qe[Me]=Qe[Me]||{},Ve=ee[Me]=ee[Me]||[];for(const Je of fe)Ne[Je.featureIndex]||(Ne[Je.featureIndex]=!0,Ve.push(Je))}}return ee}(D);for(const z in R)R[z].forEach(ee=>{const oe=ee.feature,ce=g.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=ce});return R}function rt(g,e){const a=g.tileID,u=e.tileID;return a.overscaledZ-u.overscaledZ||a.canonical.y-u.canonical.y||a.wrap-u.wrap||a.canonical.x-u.canonical.x}function It(g,e,a){return l._(this,void 0,void 0,function*(){let u=g;if(g.url?u=(yield l.h(e.transformRequest(g.url,"Source"),a)).data:yield q.frameAsync(a),!u)return null;const h=l.M(l.e(u,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in u&&u.vector_layers&&(h.vectorLayerIds=u.vector_layers.map(f=>f.id)),h})}class xe{constructor(e,a){e&&(a?this.setSouthWest(e).setNorthEast(a):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof l.N?new l.N(e.lng,e.lat):l.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof l.N?new l.N(e.lng,e.lat):l.N.convert(e),this}extend(e){const a=this._sw,u=this._ne;let h,f;if(e instanceof l.N)h=e,f=e;else{if(!(e instanceof xe))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(xe.convert(e)):this.extend(l.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(l.N.convert(e)):this;if(h=e._sw,f=e._ne,!h||!f)return this}return a||u?(a.lng=Math.min(h.lng,a.lng),a.lat=Math.min(h.lat,a.lat),u.lng=Math.max(f.lng,u.lng),u.lat=Math.max(f.lat,u.lat)):(this._sw=new l.N(h.lng,h.lat),this._ne=new l.N(f.lng,f.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:a,lat:u}=l.N.convert(e);let h=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h}static convert(e){return e instanceof xe?e:e&&new xe(e)}static fromLngLat(e,a=0){const u=360*a/40075017,h=u/Math.cos(Math.PI/180*e.lat);return new xe(new l.N(e.lng-h,e.lat-u),new l.N(e.lng+h,e.lat+u))}adjustAntiMeridian(){const e=new l.N(this._sw.lng,this._sw.lat),a=new l.N(this._ne.lng,this._ne.lat);return new xe(e,e.lng>a.lng?new l.N(a.lng+360,a.lat):a)}}class bt{constructor(e,a,u){this.bounds=xe.convert(this.validateBounds(e)),this.minzoom=a||0,this.maxzoom=u||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const a=Math.pow(2,e.z),u=Math.floor(l.O(this.bounds.getWest())*a),h=Math.floor(l.Q(this.bounds.getNorth())*a),f=Math.ceil(l.O(this.bounds.getEast())*a),C=Math.ceil(l.Q(this.bounds.getSouth())*a);return e.x>=u&&e.x<f&&e.y>=h&&e.y<C}}class Vt extends l.E{constructor(e,a,u,h){if(super(),this.id=e,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(a,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(l.e(this,e),e.bounds&&(this.tileBounds=new bt(e.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new l.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u={request:this.map._requestManager.transformRequest(a,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request.collectResourceTiming=this._collectResourceTiming;let h="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((f,C)=>{e.reloadPromise={resolve:f,reject:C}})}else e.actor=this.dispatcher.getActor(),h="LT";e.abortController=new AbortController;try{const f=yield e.actor.sendAsync({type:h,data:u},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,f)}catch(f){if(delete e.abortController,e.aborted)return;if(f&&f.status!==404)throw f;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,a){if(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),e.reloadPromise){const u=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(u.resolve).catch(u.reject)}}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class _t extends l.E{constructor(e,a,u,h){super(),this.id=e,this.dispatcher=u,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},a),l.e(this,l.M(a,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield It(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(l.e(this,e),e.bounds&&(this.tileBounds=new bt(e.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new l.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return l.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const u=yield ot.getImage(this.map._requestManager.transformRequest(a,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(u&&u.data){this.map._refreshExpiredTiles&&u.cacheControl&&u.expires&&e.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});const h=this.map.painter.context,f=h.gl,C=u.data;e.texture=this.map.painter.getTileTexture(C.width),e.texture?e.texture.update(C,{useMipmap:!0}):(e.texture=new mt(h,C,f.RGBA,{useMipmap:!0}),e.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(u){if(delete e.abortController,e.aborted)e.state="unloaded";else if(u)throw e.state="errored",u}})}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class xt extends _t{constructor(e,a,u,h){super(e,a,u,h),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u=this.map._requestManager.transformRequest(a,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const h=yield ot.getImage(u,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(h&&h.data){const f=h.data;this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&e.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const C=l.b(f)&&l.U()?f:yield this.readImageNow(f),E={type:this.type,uid:e.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const Q=yield e.actor.sendAsync({type:"LDT",data:E});e.dem=Q,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(h){if(delete e.abortController,e.aborted)e.state="unloaded";else if(h)throw e.state="errored",h}})}readImageNow(e){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.V()){const a=e.width+2,u=e.height+2;try{return new l.R({width:a,height:u},yield l.W(e,-1,-1,a,u))}catch{}}return q.getImageData(e,1)})}_getNeighboringTiles(e){const a=e.canonical,u=Math.pow(2,a.z),h=(a.x-1+u)%u,f=a.x===0?e.wrap-1:e.wrap,C=(a.x+1+u)%u,E=a.x+1===u?e.wrap+1:e.wrap,Q={};return Q[new l.S(e.overscaledZ,f,a.z,h,a.y).key]={backfilled:!1},Q[new l.S(e.overscaledZ,E,a.z,C,a.y).key]={backfilled:!1},a.y>0&&(Q[new l.S(e.overscaledZ,f,a.z,h,a.y-1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,e.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,E,a.z,C,a.y-1).key]={backfilled:!1}),a.y+1<u&&(Q[new l.S(e.overscaledZ,f,a.z,h,a.y+1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,e.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},Q[new l.S(e.overscaledZ,E,a.z,C,a.y+1).key]={backfilled:!1}),Q}unloadTile(e){return l._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Bt extends l.E{constructor(e,a,u,h){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=u.getActor(),this.setEventedParent(h),this._data=a.data,this._options=l.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const f=l.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*f,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*f,extent:l.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:l.X,radius:(a.clusterRadius||50)*f,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return l._(this,void 0,void 0,function*(){const e=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,a,u){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:a,offset:u}})}_updateWorkerData(e){return l._(this,void 0,void 0,function*(){const a=l.e({type:this.type},this.workerOptions);e?a.dataDiff=e:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(q.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const u=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||u.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let h=null;u.resourceTiming&&u.resourceTiming[this.id]&&(h=u.resourceTiming[this.id].slice(0));const f={dataType:"source"};this._collectResourceTiming&&h&&h.length>0&&l.e(f,{resourceTiming:h}),this.fire(new l.k("data",Object.assign(Object.assign({},f),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},f),{sourceDataType:"content"})))}catch(u){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(u))}})}loaded(){return this._pendingLoads===0}loadTile(e){return l._(this,void 0,void 0,function*(){const a=e.actor?"RT":"LT";e.actor=this.actor;const u={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const h=yield this.actor.sendAsync({type:a,data:u},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(h,this.map.painter,a==="RT")})}abortTile(e){return l._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return l._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var fi=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ot extends l.E{constructor(e,a,u,h){super(),this.id=e,this.dispatcher=u,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(h),this.options=a}load(e){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield ot.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,e&&(this.coordinates=e),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new l.j(a))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const a=e.map(l.Z.fromLngLat);this.tileID=function(h){let f=1/0,C=1/0,E=-1/0,Q=-1/0;for(const ee of h)f=Math.min(f,ee.x),C=Math.min(C,ee.y),E=Math.max(E,ee.x),Q=Math.max(Q,ee.y);const D=Math.max(E-f,Q-C),R=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),z=Math.pow(2,R);return new l.a1(R,Math.floor((f+E)/2*z),Math.floor((C+Q)/2*z))}(a),this.minzoom=this.maxzoom=this.tileID.z;const u=a.map(h=>this.tileID.getTilePoint(h)._round());return this._boundsArray=new l.$,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,l.X,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,l.X),this._boundsArray.emplaceBack(u[2].x,u[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,a=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new mt(e,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let u=!1;for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,u=!0)}u&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class hi extends Ot{constructor(e,a,u,h){super(e,a,u,h),this.roundZoom=!0,this.type="video",this.options=a}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const a of e.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield l.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new l.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const a=this.video.seekable;e<a.start(0)||e>a.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,a=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new mt(e,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let u=!1;for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,u=!0)}u&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class di extends Ot{constructor(e,a,u,h){super(e,a,u,h),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(f=>!Array.isArray(f)||f.length!==2||f.some(C=>typeof C!="number"))||this.fire(new l.j(new l.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${e}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,u=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,fi.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new mt(a,this.canvas,u.RGBA,{premultiply:!0});let h=!1;for(const f in this.tiles){const C=this.tiles[f];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,h=!0)}h&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Ri={},ji=g=>{switch(g){case"geojson":return Bt;case"image":return Ot;case"raster":return _t;case"raster-dem":return xt;case"vector":return Vt;case"video":return hi;case"canvas":return di}return Ri[g]},dt="RTLPluginLoaded";class mn extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Qr()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return l._(this,arguments,void 0,function*(a,u=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=q.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!u)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(dt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let en=null;function Tn(){return en||(en=new mn),en}class Pn{constructor(e,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=l.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const a=e+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,a,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(h,f){const C={};if(!f)return C;for(const E of h){const Q=E.layerIds.map(D=>f.getLayer(D)).filter(Boolean);if(Q.length!==0){E.layers=Q,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(D=>Q.filter(R=>R.id===D)[0]));for(const D of Q)C[D.id]=E}}return C}(e.buckets,a.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const f=this.buckets[h];if(f instanceof l.a6){if(this.hasSymbolBuckets=!0,!u)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const f=this.buckets[h];if(f instanceof l.a6&&f.hasRTLText){this.hasRTLText=!0,Tn().lazyLoad();break}}this.queryPadding=0;for(const h in this.buckets){const f=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(h).queryRadius(f))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const u in this.buckets){const h=this.buckets[u];h.uploadPending()&&h.upload(e)}const a=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mt(e,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mt(e,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,a,u,h,f,C,E,Q,D,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:f,scale:C,tileSize:this.tileSize,pixelPosMatrix:R,transform:Q,params:E,queryPadding:this.queryPadding*D},e,a,u):{}}querySourceFeatures(e,a){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const h=u.loadVTLayers(),f=a&&a.sourceLayer?a.sourceLayer:"",C=h._geojsonTileLayer||h[f];if(!C)return;const E=l.a7(a&&a.filter),{z:Q,x:D,y:R}=this.tileID.canonical,z={z:Q,x:D,y:R};for(let ee=0;ee<C.length;ee++){const oe=C.feature(ee);if(E.needGeometry){const we=l.a8(oe,!0);if(!E.filter(new l.z(this.tileID.overscaledZ),we,this.tileID.canonical))continue}else if(!E.filter(new l.z(this.tileID.overscaledZ),oe))continue;const ce=u.getId(oe,f),ve=new l.a9(oe,Q,D,R,ce);ve.tile=z,e.push(ve)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const a=this.expirationTime;if(e.cacheControl){const u=l.aa(e.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const u=Date.now();let h=!1;if(this.expirationTime>u)h=!1;else if(a)if(this.expirationTime<a)h=!0;else{const f=this.expirationTime-a;f?this.expirationTime=u+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const u=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!a.style.hasLayer(h))continue;const f=this.buckets[h],C=f.layers[0].sourceLayer||"_geojsonTileLayer",E=u[C],Q=e[C];if(!E||!Q||Object.keys(Q).length===0)continue;f.update(Q,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=a&&a.style&&a.style.getLayer(h);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(f)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=q.now()+e}setDependencies(e,a){const u={};for(const h of a)u[h]=!0;this.dependencies[e]=u}hasDependency(e,a){for(const u of e){const h=this.dependencies[u];if(h){for(const f of a)if(h[f])return!0}}return!1}}class Qt{constructor(e,a){this.max=e,this.onRemove=a,this.reset()}reset(){for(const e in this.data)for(const a of this.data[e])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(e,a,u){const h=e.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const f={value:a,timeout:void 0};if(u!==void 0&&(f.timeout=setTimeout(()=>{this.remove(e,f)},u)),this.data[h].push(f),this.order.push(h),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const a=this.data[e].shift();return a.timeout&&clearTimeout(a.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),a.value}getByKey(e){const a=this.data[e];return a?a[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,a){if(!this.has(e))return this;const u=e.wrapped().key,h=a===void 0?0:this.data[u].indexOf(a),f=this.data[u][h];return this.data[u].splice(h,1),f.timeout&&clearTimeout(f.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(f.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(e){const a=[];for(const u in this.data)for(const h of this.data[u])e(h.value)||a.push(h);for(const u of a)this.remove(u.value.tileID,u)}}class Qi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,a,u){const h=String(a);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][h]=this.stateChanges[e][h]||{},l.e(this.stateChanges[e][h],u),this.deletedStates[e]===null){this.deletedStates[e]={};for(const f in this.state[e])f!==h&&(this.deletedStates[e][f]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][h]===null){this.deletedStates[e][h]={};for(const f in this.state[e][h])u[f]||(this.deletedStates[e][h][f]=null)}else for(const f in u)this.deletedStates[e]&&this.deletedStates[e][h]&&this.deletedStates[e][h][f]===null&&delete this.deletedStates[e][h][f]}removeFeatureState(e,a,u){if(this.deletedStates[e]===null)return;const h=String(a);if(this.deletedStates[e]=this.deletedStates[e]||{},u&&a!==void 0)this.deletedStates[e][h]!==null&&(this.deletedStates[e][h]=this.deletedStates[e][h]||{},this.deletedStates[e][h][u]=null);else if(a!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][h])for(u in this.deletedStates[e][h]={},this.stateChanges[e][h])this.deletedStates[e][h][u]=null;else this.deletedStates[e][h]=null;else this.deletedStates[e]=null}getState(e,a){const u=String(a),h=l.e({},(this.state[e]||{})[u],(this.stateChanges[e]||{})[u]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const f=this.deletedStates[e][a];if(f===null)return{};for(const C in f)delete h[C]}return h}initializeTileState(e,a){e.setFeatureState(this.state,a)}coalesceChanges(e,a){const u={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const f={};for(const C in this.stateChanges[h])this.state[h][C]||(this.state[h][C]={}),l.e(this.state[h][C],this.stateChanges[h][C]),f[C]=this.state[h][C];u[h]=f}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const f={};if(this.deletedStates[h]===null)for(const C in this.state[h])f[C]={},this.state[h][C]={};else for(const C in this.deletedStates[h]){if(this.deletedStates[h][C]===null)this.state[h][C]={};else for(const E of Object.keys(this.deletedStates[h][C]))delete this.state[h][C][E];f[C]=this.state[h][C]}u[h]=u[h]||{},l.e(u[h],f)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const h in e)e[h].setFeatureState(u,a)}}class ii extends l.E{constructor(e,a,u){super(),this.id=e,this.dispatcher=u,this.on("data",h=>this._dataHandler(h)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((h,f,C,E)=>{const Q=new(ji(f.type))(h,f,C,E);if(Q.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${Q.id}`);return Q})(e,a,u,this),this._tiles={},this._cache=new Qt(0,h=>this._unloadTile(h)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qi,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const a=this._tiles[e];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,a,u){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,a,u)}catch(h){e.state="errored",h.status!==404?this._source.fire(new l.j(h,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new l.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const u=this._tiles[a];u.upload(e),u.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(fn).map(e=>e.key)}getRenderableIds(e){const a=[];for(const u in this._tiles)this._isIdRenderable(u,e)&&a.push(this._tiles[u]);return e?a.sort((u,h)=>{const f=u.tileID,C=h.tileID,E=new l.P(f.canonical.x,f.canonical.y)._rotate(this.transform.angle),Q=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return f.overscaledZ-C.overscaledZ||Q.y-E.y||Q.x-E.x}).map(u=>u.tileID.key):a.map(u=>u.tileID).sort(fn).map(u=>u.key)}hasRenderableParent(e){const a=this.findLoadedParent(e,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(e,a){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(a||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,a){return l._(this,void 0,void 0,function*(){const u=this._tiles[e];u&&(u.state!=="loading"&&(u.state=a),yield this._loadTile(u,e,a))})}_tileLoaded(e,a,u){e.timeAdded=q.now(),u==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(a,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const a=this.getRenderableIds();for(let h=0;h<a.length;h++){const f=a[h];if(e.neighboringTiles&&e.neighboringTiles[f]){const C=this.getTileByID(f);u(e,C),u(C,e)}}function u(h,f){h.needsHillshadePrepare=!0,h.needsTerrainPrepare=!0;let C=f.tileID.canonical.x-h.tileID.canonical.x;const E=f.tileID.canonical.y-h.tileID.canonical.y,Q=Math.pow(2,h.tileID.canonical.z),D=f.tileID.key;C===0&&E===0||Math.abs(E)>1||(Math.abs(C)>1&&(Math.abs(C+Q)===1?C+=Q:Math.abs(C-Q)===1&&(C-=Q)),f.dem&&h.dem&&(h.dem.backfillBorder(f.dem,C,E),h.neighboringTiles&&h.neighboringTiles[D]&&(h.neighboringTiles[D].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,a,u,h){for(const f in this._tiles){let C=this._tiles[f];if(h[f]||!C.hasData()||C.tileID.overscaledZ<=a||C.tileID.overscaledZ>u)continue;let E=C.tileID;for(;C&&C.tileID.overscaledZ>a+1;){const D=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[D.key],C&&C.hasData()&&(E=D)}let Q=E;for(;Q.overscaledZ>a;)if(Q=Q.scaledTo(Q.overscaledZ-1),e[Q.key]){h[E.key]=E;break}}}findLoadedParent(e,a){if(e.key in this._loadedParentTiles){const u=this._loadedParentTiles[e.key];return u&&u.tileID.overscaledZ>=a?u:null}for(let u=e.overscaledZ-1;u>=a;u--){const h=e.scaledTo(u),f=this._getLoadedTile(h);if(f)return f}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const a=this._tiles[e.key];return a&&a.hasData()?a:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const a=Math.ceil(e.width/this._source.tileSize)+1,u=Math.ceil(e.height/this._source.tileSize)+1,h=Math.floor(a*u*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),f=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(f)}handleWrapJump(e){const a=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,a){const u={};for(const h in this._tiles){const f=this._tiles[h];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+a),u[f.tileID.key]=f}this._tiles=u;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(h,this._tiles[h])}}_updateCoveredAndRetainedTiles(e,a,u,h,f,C){const E={},Q={},D=Object.keys(e),R=q.now();for(const z of D){const ee=e[z],oe=this._tiles[z];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=R)continue;const ce=this.findLoadedParent(ee,a),ve=this.findLoadedSibling(ee),we=ce||ve||null;we&&(this._addTile(we.tileID),E[we.tileID.key]=we.tileID),Q[z]=ee}this._retainLoadedChildren(Q,h,u,e);for(const z in E)e[z]||(this._coveredTiles[z]=!0,e[z]=E[z]);if(C){const z={},ee={};for(const oe of f)this._tiles[oe.key].hasData()?z[oe.key]=oe:ee[oe.key]=oe;for(const oe in ee){const ce=ee[oe].children(this._source.maxzoom);this._tiles[ce[0].key]&&this._tiles[ce[1].key]&&this._tiles[ce[2].key]&&this._tiles[ce[3].key]&&(z[ce[0].key]=e[ce[0].key]=ce[0],z[ce[1].key]=e[ce[1].key]=ce[1],z[ce[2].key]=e[ce[2].key]=ce[2],z[ce[3].key]=e[ce[3].key]=ce[3],delete ee[oe])}for(const oe in ee){const ce=ee[oe],ve=this.findLoadedParent(ce,this._source.minzoom),we=this.findLoadedSibling(ce),Qe=ve||we||null;if(Qe){z[Qe.tileID.key]=e[Qe.tileID.key]=Qe.tileID;for(const Me in z)z[Me].isChildOf(Qe.tileID)&&delete z[Me]}}for(const oe in this._tiles)z[oe]||(this._coveredTiles[oe]=!0)}}update(e,a){if(!this._sourceLoaded||this._paused)return;let u;this.transform=e,this.terrain=a,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new l.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(u=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(u=u.filter(R=>this._source.hasTile(R)))):u=[];const h=e.coveringZoomLevel(this._source),f=Math.max(h-ii.maxOverzooming,this._source.minzoom),C=Math.max(h+ii.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const z of u)if(z.canonical.z>this._source.minzoom){const ee=z.scaledTo(z.canonical.z-1);R[ee.key]=ee;const oe=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));R[oe.key]=oe}u=u.concat(Object.values(R))}const E=u.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const Q=this._updateRetainedTiles(u,h);Ar(this._source.type)&&this._updateCoveredAndRetainedTiles(Q,f,C,h,u,a);for(const R in Q)this._tiles[R].clearFadeHold();const D=l.ab(this._tiles,Q);for(const R of D){const z=this._tiles[R];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,a){var u;const h={},f={},C=Math.max(a-ii.maxOverzooming,this._source.minzoom),E=Math.max(a+ii.maxUnderzooming,this._source.minzoom),Q={};for(const D of e){const R=this._addTile(D);h[D.key]=D,R.hasData()||a<this._source.maxzoom&&(Q[D.key]=D)}this._retainLoadedChildren(Q,a,E,h);for(const D of e){let R=this._tiles[D.key];if(R.hasData())continue;if(a+1>this._source.maxzoom){const ee=D.children(this._source.maxzoom)[0],oe=this.getTile(ee);if(oe&&oe.hasData()){h[ee.key]=ee;continue}}else{const ee=D.children(this._source.maxzoom);if(h[ee[0].key]&&h[ee[1].key]&&h[ee[2].key]&&h[ee[3].key])continue}let z=R.wasRequested();for(let ee=D.overscaledZ-1;ee>=C;--ee){const oe=D.scaledTo(ee);if(f[oe.key])break;if(f[oe.key]=!0,R=this.getTile(oe),!R&&z&&(R=this._addTile(oe)),R){const ce=R.hasData();if((ce||!(!((u=this.map)===null||u===void 0)&&u.cancelPendingTileRequestsWhileZooming)||z)&&(h[oe.key]=oe),z=R.wasRequested(),ce)break}}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const a=[];let u,h=this._tiles[e].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}a.push(h.key);const f=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(f),u)break;h=f}for(const f of a)this._loadedParentTiles[f]=u}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const a=this._tiles[e].tileID,u=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=u}}_addTile(e){let a=this._tiles[e.key];if(a)return a;a=this._cache.getAndRemove(e),a&&(this._setTileReloadTimer(e.key,a),a.tileID=e,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,a)));const u=a;return a||(a=new Pn(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(a,e.key,a.state)),a.uses++,this._tiles[e.key]=a,u||this._source.fire(new l.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(e,a){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const u=a.getExpiryTimeout();u&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},u))}_removeTile(e){const a=this._tiles[e];a&&(a.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(e){const a=e.sourceDataType;e.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,a,u){const h=[],f=this.transform;if(!f)return h;const C=u?f.getCameraQueryGeometry(e):e,E=e.map(ce=>f.pointCoordinate(ce,this.terrain)),Q=C.map(ce=>f.pointCoordinate(ce,this.terrain)),D=this.getIds();let R=1/0,z=1/0,ee=-1/0,oe=-1/0;for(const ce of Q)R=Math.min(R,ce.x),z=Math.min(z,ce.y),ee=Math.max(ee,ce.x),oe=Math.max(oe,ce.y);for(let ce=0;ce<D.length;ce++){const ve=this._tiles[D[ce]];if(ve.holdingForFade())continue;const we=ve.tileID,Qe=Math.pow(2,f.zoom-ve.tileID.overscaledZ),Me=a*ve.queryPadding*l.X/ve.tileSize/Qe,fe=[we.getTilePoint(new l.Z(R,z)),we.getTilePoint(new l.Z(ee,oe))];if(fe[0].x-Me<l.X&&fe[0].y-Me<l.X&&fe[1].x+Me>=0&&fe[1].y+Me>=0){const Ne=E.map(Je=>we.getTilePoint(Je)),Ve=Q.map(Je=>we.getTilePoint(Je));h.push({tile:ve,tileID:we,queryGeometry:Ne,cameraQueryGeometry:Ve,scale:Qe})}}return h}getVisibleCoordinates(e){const a=this.getRenderableIds(e).map(u=>this._tiles[u].tileID);for(const u of a)u.posMatrix=this.transform.calculatePosMatrix(u.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(Ar(this._source.type)){const e=q.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=e)return!0}return!1}setFeatureState(e,a,u){this._state.updateState(e=e||"_geojsonTileLayer",a,u)}removeFeatureState(e,a,u){this._state.removeFeatureState(e=e||"_geojsonTileLayer",a,u)}getFeatureState(e,a){return this._state.getState(e=e||"_geojsonTileLayer",a)}setDependencies(e,a,u){const h=this._tiles[e];h&&h.setDependencies(a,u)}reloadTilesForDependencies(e,a){for(const u in this._tiles)this._tiles[u].hasDependency(e,a)&&this._reloadTile(u,"reloading");this._cache.filter(u=>!u.hasDependency(e,a))}}function fn(g,e){const a=Math.abs(2*g.wrap)-+(g.wrap<0),u=Math.abs(2*e.wrap)-+(e.wrap<0);return g.overscaledZ-e.overscaledZ||u-a||e.canonical.y-g.canonical.y||e.canonical.x-g.canonical.x}function Ar(g){return g==="raster"||g==="image"||g==="video"}ii.maxOverzooming=10,ii.maxUnderzooming=3;class wi{constructor(e,a){this.reset(e,a)}reset(e,a){this.points=e||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=l.ac(e,0,1);let a=1,u=this._distances[a];const h=e*this.paddedLength+this.padding;for(;u<h&&a<this._distances.length;)u=this._distances[++a];const f=a-1,C=this._distances[f],E=u-C,Q=E>0?(h-C)/E:0;return this.points[f].mult(1-Q).add(this.points[a].mult(Q))}}function ma(g,e){let a=!0;return g==="always"||g!=="never"&&e!=="never"||(a=!1),a}class ya{constructor(e,a,u){const h=this.boxCells=[],f=this.circleCells=[];this.xCellCount=Math.ceil(e/u),this.yCellCount=Math.ceil(a/u);for(let C=0;C<this.xCellCount*this.yCellCount;C++)h.push([]),f.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=a,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,a,u,h,f){this._forEachCell(a,u,h,f,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(h),this.bboxes.push(f)}insertCircle(e,a,u,h){this._forEachCell(a-h,u-h,a+h,u+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(a),this.circles.push(u),this.circles.push(h)}_insertBoxCell(e,a,u,h,f,C){this.boxCells[f].push(C)}_insertCircleCell(e,a,u,h,f,C){this.circleCells[f].push(C)}_query(e,a,u,h,f,C,E){if(u<0||e>this.width||h<0||a>this.height)return[];const Q=[];if(e<=0&&a<=0&&this.width<=u&&this.height<=h){if(f)return[{key:null,x1:e,y1:a,x2:u,y2:h}];for(let D=0;D<this.boxKeys.length;D++)Q.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const R=this.circles[3*D],z=this.circles[3*D+1],ee=this.circles[3*D+2];Q.push({key:this.circleKeys[D],x1:R-ee,y1:z-ee,x2:R+ee,y2:z+ee})}}else this._forEachCell(e,a,u,h,this._queryCell,Q,{hitTest:f,overlapMode:C,seenUids:{box:{},circle:{}}},E);return Q}query(e,a,u,h){return this._query(e,a,u,h,!1,null)}hitTest(e,a,u,h,f,C){return this._query(e,a,u,h,!0,f,C).length>0}hitTestCircle(e,a,u,h,f){const C=e-u,E=e+u,Q=a-u,D=a+u;if(E<0||C>this.width||D<0||Q>this.height)return!1;const R=[];return this._forEachCell(C,Q,E,D,this._queryCellCircle,R,{hitTest:!0,overlapMode:h,circle:{x:e,y:a,radius:u},seenUids:{box:{},circle:{}}},f),R.length>0}_queryCell(e,a,u,h,f,C,E,Q){const{seenUids:D,hitTest:R,overlapMode:z}=E,ee=this.boxCells[f];if(ee!==null){const ce=this.bboxes;for(const ve of ee)if(!D.box[ve]){D.box[ve]=!0;const we=4*ve,Qe=this.boxKeys[ve];if(e<=ce[we+2]&&a<=ce[we+3]&&u>=ce[we+0]&&h>=ce[we+1]&&(!Q||Q(Qe))&&(!R||!ma(z,Qe.overlapMode))&&(C.push({key:Qe,x1:ce[we],y1:ce[we+1],x2:ce[we+2],y2:ce[we+3]}),R))return!0}}const oe=this.circleCells[f];if(oe!==null){const ce=this.circles;for(const ve of oe)if(!D.circle[ve]){D.circle[ve]=!0;const we=3*ve,Qe=this.circleKeys[ve];if(this._circleAndRectCollide(ce[we],ce[we+1],ce[we+2],e,a,u,h)&&(!Q||Q(Qe))&&(!R||!ma(z,Qe.overlapMode))){const Me=ce[we],fe=ce[we+1],Ne=ce[we+2];if(C.push({key:Qe,x1:Me-Ne,y1:fe-Ne,x2:Me+Ne,y2:fe+Ne}),R)return!0}}}return!1}_queryCellCircle(e,a,u,h,f,C,E,Q){const{circle:D,seenUids:R,overlapMode:z}=E,ee=this.boxCells[f];if(ee!==null){const ce=this.bboxes;for(const ve of ee)if(!R.box[ve]){R.box[ve]=!0;const we=4*ve,Qe=this.boxKeys[ve];if(this._circleAndRectCollide(D.x,D.y,D.radius,ce[we+0],ce[we+1],ce[we+2],ce[we+3])&&(!Q||Q(Qe))&&!ma(z,Qe.overlapMode))return C.push(!0),!0}}const oe=this.circleCells[f];if(oe!==null){const ce=this.circles;for(const ve of oe)if(!R.circle[ve]){R.circle[ve]=!0;const we=3*ve,Qe=this.circleKeys[ve];if(this._circlesCollide(ce[we],ce[we+1],ce[we+2],D.x,D.y,D.radius)&&(!Q||Q(Qe))&&!ma(z,Qe.overlapMode))return C.push(!0),!0}}}_forEachCell(e,a,u,h,f,C,E,Q){const D=this._convertToXCellCoord(e),R=this._convertToYCellCoord(a),z=this._convertToXCellCoord(u),ee=this._convertToYCellCoord(h);for(let oe=D;oe<=z;oe++)for(let ce=R;ce<=ee;ce++)if(f.call(this,e,a,u,h,this.xCellCount*ce+oe,C,E,Q))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,a,u,h,f,C){const E=h-e,Q=f-a,D=u+C;return D*D>E*E+Q*Q}_circleAndRectCollide(e,a,u,h,f,C,E){const Q=(C-h)/2,D=Math.abs(e-(h+Q));if(D>Q+u)return!1;const R=(E-f)/2,z=Math.abs(a-(f+R));if(z>R+u)return!1;if(D<=Q||z<=R)return!0;const ee=D-Q,oe=z-R;return ee*ee+oe*oe<=u*u}}function is(g,e,a,u,h){const f=l.H();return e?(l.K(f,f,[1/h,1/h,1]),a||l.ad(f,f,u.angle)):l.L(f,u.labelPlaneMatrix,g),f}function pr(g,e,a,u,h){if(e){const f=l.ae(g);return l.K(f,f,[h,h,1]),a||l.ad(f,f,-u.angle),f}return u.glCoordMatrix}function Ie(g,e,a,u){let h;u?(h=[g,e,u(g,e),1],l.af(h,h,a)):(h=[g,e,0,1],qi(h,h,a));const f=h[3];return{point:new l.P(h[0]/f,h[1]/f),signedDistanceFromCamera:f,isOccluded:!1}}function J(g,e){return .5+g/e*.5}function j(g,e){return g.x>=-e[0]&&g.x<=e[0]&&g.y>=-e[1]&&g.y<=e[1]}function ie(g,e,a,u,h,f,C,E,Q,D,R,z,ee,oe,ce){const ve=u?g.textSizeData:g.iconSizeData,we=l.ag(ve,a.transform.zoom),Qe=[256/a.width*2+1,256/a.height*2+1],Me=u?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Me.clear();const fe=g.lineVertexArray,Ne=u?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ve=a.transform.width/a.transform.height;let Je=!1;for(let At=0;At<Ne.length;At++){const Ct=Ne.get(At);if(Ct.hidden||Ct.writingMode===l.ah.vertical&&!Je){gi(Ct.numGlyphs,Me);continue}Je=!1;const Ft=Ie(Ct.anchorX,Ct.anchorY,e,ce);if(!j(Ft.point,Qe)){gi(Ct.numGlyphs,Me);continue}const Ht=J(a.transform.cameraToCenterDistance,Ft.signedDistanceFromCamera),Lt=l.ai(ve,we,Ct),Mt=C?Lt/Ht:Lt*Ht,ei={getElevation:ce,labelPlaneMatrix:h,lineVertexArray:fe,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:D,tileAnchorPoint:new l.P(Ct.anchorX,Ct.anchorY),unwrappedTileID:R,width:z,height:ee,translation:oe},bi=Oe(ei,Ct,Mt,!1,E,e,f,g.glyphOffsetArray,Me,Ve,Q);Je=bi.useVertical,(bi.notEnoughRoom||Je||bi.needsFlipping&&Oe(ei,Ct,Mt,!0,E,e,f,g.glyphOffsetArray,Me,Ve,Q).notEnoughRoom)&&gi(Ct.numGlyphs,Me)}u?g.text.dynamicLayoutVertexBuffer.updateData(Me):g.icon.dynamicLayoutVertexBuffer.updateData(Me)}function ye(g,e,a,u,h,f,C,E){const Q=f.glyphStartIndex+f.numGlyphs,D=f.lineStartIndex,R=f.lineStartIndex+f.lineLength,z=e.getoffsetX(f.glyphStartIndex),ee=e.getoffsetX(Q-1),oe=Dt(g*z,a,u,h,f.segment,D,R,E,C);if(!oe)return null;const ce=Dt(g*ee,a,u,h,f.segment,D,R,E,C);return ce?E.projectionCache.anyProjectionOccluded?null:{first:oe,last:ce}:null}function Fe(g,e,a,u){return g===l.ah.horizontal&&Math.abs(a.y-e.y)>Math.abs(a.x-e.x)*u?{useVertical:!0}:(g===l.ah.vertical?e.y<a.y:e.x>a.x)?{needsFlipping:!0}:null}function Oe(g,e,a,u,h,f,C,E,Q,D,R){const z=a/24,ee=e.lineOffsetX*z,oe=e.lineOffsetY*z;let ce;if(e.numGlyphs>1){const ve=e.glyphStartIndex+e.numGlyphs,we=e.lineStartIndex,Qe=e.lineStartIndex+e.lineLength,Me=ye(z,E,ee,oe,u,e,R,g);if(!Me)return{notEnoughRoom:!0};const fe=Ie(Me.first.point.x,Me.first.point.y,C,g.getElevation).point,Ne=Ie(Me.last.point.x,Me.last.point.y,C,g.getElevation).point;if(h&&!u){const Ve=Fe(e.writingMode,fe,Ne,D);if(Ve)return Ve}ce=[Me.first];for(let Ve=e.glyphStartIndex+1;Ve<ve-1;Ve++)ce.push(Dt(z*E.getoffsetX(Ve),ee,oe,u,e.segment,we,Qe,g,R));ce.push(Me.last)}else{if(h&&!u){const we=Ie(g.tileAnchorPoint.x,g.tileAnchorPoint.y,f,g.getElevation).point,Qe=e.lineStartIndex+e.segment+1,Me=new l.P(g.lineVertexArray.getx(Qe),g.lineVertexArray.gety(Qe)),fe=Ie(Me.x,Me.y,f,g.getElevation),Ne=fe.signedDistanceFromCamera>0?fe.point:function(Je,At,Ct,Ft,Ht,Lt){return je(Je,At,Ct,1,Ht,Lt)}(g.tileAnchorPoint,Me,we,0,f,g),Ve=Fe(e.writingMode,we,Ne,D);if(Ve)return Ve}const ve=Dt(z*E.getoffsetX(e.glyphStartIndex),ee,oe,u,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,g,R);if(!ve||g.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[ve]}for(const ve of ce)l.aj(Q,ve.point,ve.angle);return{}}function je(g,e,a,u,h,f){const C=g.add(g.sub(e)._unit()),E=h!==void 0?Ie(C.x,C.y,h,f.getElevation).point:it(C.x,C.y,f).point,Q=a.sub(E);return a.add(Q._mult(u/Q.mag()))}function Se(g,e,a){const u=e.projectionCache;if(u.projections[g])return u.projections[g];const h=new l.P(e.lineVertexArray.getx(g),e.lineVertexArray.gety(g)),f=it(h.x,h.y,e);if(f.signedDistanceFromCamera>0)return u.projections[g]=f.point,u.anyProjectionOccluded=u.anyProjectionOccluded||f.isOccluded,f.point;const C=g-a.direction;return function(E,Q,D,R,z){return je(E,Q,D,R,void 0,z)}(a.distanceFromAnchor===0?e.tileAnchorPoint:new l.P(e.lineVertexArray.getx(C),e.lineVertexArray.gety(C)),h,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,e)}function it(g,e,a){const u=g+a.translation[0],h=e+a.translation[1];let f;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(f=a.projection.projectTileCoordinates(u,h,a.unwrappedTileID,a.getElevation),f.point.x=(.5*f.point.x+.5)*a.width,f.point.y=(.5*-f.point.y+.5)*a.height):(f=Ie(u,h,a.labelPlaneMatrix,a.getElevation),f.isOccluded=!1),f}function gt(g,e,a){return g._unit()._perp()._mult(e*a)}function Xe(g,e,a,u,h,f,C,E,Q){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];const D=a.add(e);if(g+Q.direction<u||g+Q.direction>=h)return E.projectionCache.offsets[g]=D,D;const R=Se(g+Q.direction,E,Q),z=gt(R.sub(a),C,Q.direction),ee=a.add(z),oe=R.add(z);return E.projectionCache.offsets[g]=l.ak(f,D,ee,oe)||D,E.projectionCache.offsets[g]}function Dt(g,e,a,u,h,f,C,E,Q){const D=u?g-e:g+e;let R=D>0?1:-1,z=0;u&&(R*=-1,z=Math.PI),R<0&&(z+=Math.PI);let ee,oe=R>0?f+h:f+h+1;E.projectionCache.cachedAnchorPoint?ee=E.projectionCache.cachedAnchorPoint:(ee=it(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=ee);let ce,ve,we=ee,Qe=ee,Me=0,fe=0;const Ne=Math.abs(D),Ve=[];let Je;for(;Me+fe<=Ne;){if(oe+=R,oe<f||oe>=C)return null;Me+=fe,Qe=we,ve=ce;const Ft={absOffsetX:Ne,direction:R,distanceFromAnchor:Me,previousVertex:Qe};if(we=Se(oe,E,Ft),a===0)Ve.push(Qe),Je=we.sub(Qe);else{let Ht;const Lt=we.sub(Qe);Ht=Lt.mag()===0?gt(Se(oe+R,E,Ft).sub(we),a,R):gt(Lt,a,R),ve||(ve=Qe.add(Ht)),ce=Xe(oe,Ht,we,f,C,ve,a,E,Ft),Ve.push(ve),Je=ce.sub(ve)}fe=Je.mag()}const At=Je._mult((Ne-Me)/fe)._add(ve||Qe),Ct=z+Math.atan2(we.y-Qe.y,we.x-Qe.x);return Ve.push(At),{point:At,angle:Q?Ct:0,path:Ve}}const oi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gi(g,e){for(let a=0;a<g;a++){const u=e.length;e.resize(u+4),e.float32.set(oi,3*u)}}function qi(g,e,a){const u=e[0],h=e[1];return g[0]=a[0]*u+a[4]*h+a[12],g[1]=a[1]*u+a[5]*h+a[13],g[3]=a[3]*u+a[7]*h+a[15],g}const Ci=100;class Ui{constructor(e,a,u=new ya(e.width+200,e.height+200,25),h=new ya(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=a,this.grid=u,this.ignoredGrid=h,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Ci,this.screenBottomBoundary=e.height+Ci,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,a,u,h,f,C,E,Q,D,R,z){const ee=e.anchorPointX+Q[0],oe=e.anchorPointY+Q[1],ce=this.projectAndGetPerspectiveRatio(h,ee,oe,f,R),ve=u*ce.perspectiveRatio;let we;if(C||E)we=this._projectCollisionBox(e,ve,h,f,C,E,Q,ce,R,z);else{const Ve=ce.point.x+(z?z.x*ve:0),Je=ce.point.y+(z?z.y*ve:0);we={allPointsOccluded:!1,box:[Ve+e.x1*ve,Je+e.y1*ve,Ve+e.x2*ve,Je+e.y2*ve]}}const[Qe,Me,fe,Ne]=we.box;return this.mapProjection.useSpecialProjectionForSymbols&&(C?we.allPointsOccluded:this.mapProjection.isOccluded(ee,oe,f))||ce.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Qe,Me,fe,Ne)||a!=="always"&&this.grid.hitTest(Qe,Me,fe,Ne,a,D)?{box:[Qe,Me,fe,Ne],placeable:!1,offscreen:!1}:{box:[Qe,Me,fe,Ne],placeable:!0,offscreen:this.isOffscreen(Qe,Me,fe,Ne)}}placeCollisionCircles(e,a,u,h,f,C,E,Q,D,R,z,ee,oe,ce,ve,we){const Qe=[],Me=new l.P(a.anchorX,a.anchorY),fe=this.getPerspectiveRatio(C,Me.x,Me.y,E,we),Ne=(z?f/fe:f*fe)/l.ap,Ve={getElevation:we,labelPlaneMatrix:Q,lineVertexArray:u,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Me,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:ve},Je=ye(Ne,h,a.lineOffsetX*Ne,a.lineOffsetY*Ne,!1,a,!1,Ve);let At=!1,Ct=!1,Ft=!0;if(Je){const Ht=.5*oe*fe+ce,Lt=new l.P(-100,-100),Mt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),ei=new wi,bi=Je.first,b=Je.last;let I=[];for(let T=bi.path.length-1;T>=1;T--)I.push(bi.path[T]);for(let T=1;T<b.path.length;T++)I.push(b.path[T]);const y=2.5*Ht;if(D){const T=this.projectPathToScreenSpace(I,Ve,D);I=T.some(F=>F.signedDistanceFromCamera<=0)?[]:T.map(F=>F.point)}let k=[];if(I.length>0){const T=I[0].clone(),F=I[0].clone();for(let $=1;$<I.length;$++)T.x=Math.min(T.x,I[$].x),T.y=Math.min(T.y,I[$].y),F.x=Math.max(F.x,I[$].x),F.y=Math.max(F.y,I[$].y);k=T.x>=Lt.x&&F.x<=Mt.x&&T.y>=Lt.y&&F.y<=Mt.y?[I]:F.x<Lt.x||T.x>Mt.x||F.y<Lt.y||T.y>Mt.y?[]:l.al([I],Lt.x,Lt.y,Mt.x,Mt.y)}for(const T of k){ei.reset(T,.25*Ht);let F=0;F=ei.length<=.5*Ht?1:Math.ceil(ei.paddedLength/y)+1;for(let $=0;$<F;$++){const N=$/Math.max(F-1,1),re=ei.lerp(N),K=re.x+Ci,Z=re.y+Ci;Qe.push(K,Z,Ht,0);const ge=K-Ht,se=Z-Ht,X=K+Ht,be=Z+Ht;if(Ft=Ft&&this.isOffscreen(ge,se,X,be),Ct=Ct||this.isInsideGrid(ge,se,X,be),e!=="always"&&this.grid.hitTestCircle(K,Z,Ht,e,ee)&&(At=!0,!R))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!R&&At||!Ct||fe<this.perspectiveRatioCutoff?[]:Qe,offscreen:Ft,collisionDetected:At}}projectPathToScreenSpace(e,a,u){return e.map(h=>Ie(h.x,h.y,u,a.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let u=1/0,h=1/0,f=-1/0,C=-1/0;for(const R of e){const z=new l.P(R.x+Ci,R.y+Ci);u=Math.min(u,z.x),h=Math.min(h,z.y),f=Math.max(f,z.x),C=Math.max(C,z.y),a.push(z)}const E=this.grid.query(u,h,f,C).concat(this.ignoredGrid.query(u,h,f,C)),Q={},D={};for(const R of E){const z=R.key;if(Q[z.bucketInstanceId]===void 0&&(Q[z.bucketInstanceId]={}),Q[z.bucketInstanceId][z.featureIndex])continue;const ee=[new l.P(R.x1,R.y1),new l.P(R.x2,R.y1),new l.P(R.x2,R.y2),new l.P(R.x1,R.y2)];l.am(a,ee)&&(Q[z.bucketInstanceId][z.featureIndex]=!0,D[z.bucketInstanceId]===void 0&&(D[z.bucketInstanceId]=[]),D[z.bucketInstanceId].push(z.featureIndex))}return D}insertCollisionBox(e,a,u,h,f,C){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:f,collisionGroupID:C,overlapMode:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,a,u,h,f,C){const E=u?this.ignoredGrid:this.grid,Q={bucketInstanceId:h,featureIndex:f,collisionGroupID:C,overlapMode:a};for(let D=0;D<e.length;D+=4)E.insertCircle(Q,e[D],e[D+1],e[D+2])}projectAndGetPerspectiveRatio(e,a,u,h,f){let C;f?(C=[a,u,f(a,u),1],l.af(C,C,e)):(C=[a,u,0,1],qi(C,C,e));const E=C[3];return{point:new l.P((C[0]/E+1)/2*this.transform.width+Ci,(-C[1]/E+1)/2*this.transform.height+Ci),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(e,a,u,h,f){const C=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,u,h,f):Ie(a,u,e,f);return .5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5}isOffscreen(e,a,u,h){return u<Ci||e>=this.screenRightBoundary||h<Ci||a>this.screenBottomBoundary}isInsideGrid(e,a,u,h){return u>=0&&e<this.gridRightBoundary&&h>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const e=l.an([]);return l.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,a,u,h,f,C,E,Q,D,R){let z=new l.P(1,0),ee=new l.P(0,1);const oe=new l.P(e.anchorPointX+E[0],e.anchorPointY+E[1]);if(C&&!f){const Ft=this.projectAndGetPerspectiveRatio(u,oe.x+1,oe.y,h,D).point.sub(Q.point).unit(),Ht=Math.atan(Ft.y/Ft.x)+(Ft.x<0?Math.PI:0),Lt=Math.sin(Ht),Mt=Math.cos(Ht);z=new l.P(Mt,Lt),ee=new l.P(-Lt,Mt)}else if(!C&&f){const Ft=-this.transform.angle,Ht=Math.sin(Ft),Lt=Math.cos(Ft);z=new l.P(Lt,Ht),ee=new l.P(-Ht,Lt)}let ce=Q.point,ve=a;if(f){ce=oe;const Ft=this.transform.zoom-Math.floor(this.transform.zoom);ve=Math.pow(2,-Ft),ve*=this.mapProjection.getPitchedTextCorrection(this.transform,oe,h),R||(ve*=l.ac(.5+Q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(ce=ce.add(z.mult(R.x*ve)).add(ee.mult(R.y*ve)));const we=e.x1*ve,Qe=e.x2*ve,Me=(we+Qe)/2,fe=e.y1*ve,Ne=e.y2*ve,Ve=(fe+Ne)/2,Je=[{offsetX:we,offsetY:fe},{offsetX:Me,offsetY:fe},{offsetX:Qe,offsetY:fe},{offsetX:Qe,offsetY:Ve},{offsetX:Qe,offsetY:Ne},{offsetX:Me,offsetY:Ne},{offsetX:we,offsetY:Ne},{offsetX:we,offsetY:Ve}];let At=[];for(const{offsetX:Ft,offsetY:Ht}of Je)At.push(new l.P(ce.x+z.x*Ft+ee.x*Ht,ce.y+z.y*Ft+ee.y*Ht));let Ct=!1;if(f){const Ft=At.map(Ht=>this.projectAndGetPerspectiveRatio(u,Ht.x,Ht.y,h,D));Ct=Ft.some(Ht=>!Ht.isOccluded),At=Ft.map(Ht=>Ht.point)}else Ct=!0;return{box:l.ao(At),allPointsOccluded:!Ct}}}function Si(g,e,a){return e*(l.X/(g.tileSize*Math.pow(2,a-g.tileID.overscaledZ)))}class Rn{constructor(e,a,u,h){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?a:-a))):h&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class yn{constructor(e,a,u,h,f){this.text=new Rn(e?e.text:null,a,u,f),this.icon=new Rn(e?e.icon:null,a,h,f)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bi{constructor(e,a,u){this.text=e,this.icon=a,this.skipFade=u}}class rn{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class In{constructor(e,a,u,h,f){this.bucketInstanceId=e,this.featureIndex=a,this.sourceLayerIndex=u,this.bucketIndex=h,this.tileID=f}}class Zn{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const a=++this.maxGroupID;this.collisionGroups[e]={ID:a,predicate:u=>u.collisionGroupID===a}}return this.collisionGroups[e]}}function Yn(g,e,a,u,h){const{horizontalAlign:f,verticalAlign:C}=l.au(g);return new l.P(-(f-.5)*e+u[0]*h,-(C-.5)*a+u[1]*h)}class dr{constructor(e,a,u,h,f,C){this.transform=e.clone(),this.terrain=u,this.collisionIndex=new Ui(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Zn(f),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const a=this.terrain;return a?(u,h)=>a.getElevation(e,u,h):null}getBucketParts(e,a,u,h){const f=u.getBucket(a),C=u.latestFeatureIndex;if(!f||!C||a.id!==f.layerIds[0])return;const E=u.collisionBoxArray,Q=f.layers[0].layout,D=f.layers[0].paint,R=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),z=u.tileSize/l.X,ee=u.tileID.toUnwrapped(),oe=this.transform.calculatePosMatrix(ee),ce=Q.get("text-pitch-alignment")==="map",ve=Q.get("text-rotation-alignment")==="map",we=Si(u,1,this.transform.zoom),Qe=this.collisionIndex.mapProjection.translatePosition(this.transform,u,D.get("text-translate"),D.get("text-translate-anchor")),Me=this.collisionIndex.mapProjection.translatePosition(this.transform,u,D.get("icon-translate"),D.get("icon-translate-anchor")),fe=is(oe,ce,ve,this.transform,we);let Ne=null;if(ce){const Je=pr(oe,ce,ve,this.transform,we);Ne=l.L([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[f.bucketInstanceId]=new In(f.bucketInstanceId,C,f.sourceLayerIndex,f.index,u.tileID);const Ve={bucket:f,layout:Q,translationText:Qe,translationIcon:Me,posMatrix:oe,unwrappedTileID:ee,textLabelPlaneMatrix:fe,labelToScreenMatrix:Ne,scale:R,textPixelRatio:z,holdingForFade:u.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:l.ag(f.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(f.sourceID)};if(h)for(const Je of f.sortKeyRanges){const{sortKey:At,symbolInstanceStart:Ct,symbolInstanceEnd:Ft}=Je;e.push({sortKey:At,symbolInstanceStart:Ct,symbolInstanceEnd:Ft,parameters:Ve})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:f.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(e,a,u,h,f,C,E,Q,D,R,z,ee,oe,ce,ve,we,Qe,Me,fe){const Ne=l.aq[e.textAnchor],Ve=[e.textOffset0,e.textOffset1],Je=Yn(Ne,u,h,Ve,f),At=this.collisionIndex.placeCollisionBox(a,ee,Q,D,R,E,C,we,z.predicate,fe,Je);if((!Me||this.collisionIndex.placeCollisionBox(Me,ee,Q,D,R,E,C,Qe,z.predicate,fe,Je).placeable)&&At.placeable){let Ct;if(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(Ct=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),oe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[oe.crossTileID]={textOffset:Ve,width:u,height:h,anchor:Ne,textBoxScale:f,prevAnchor:Ct},this.markUsedJustification(ce,Ne,oe,ve),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,ve,oe),this.placedOrientations[oe.crossTileID]=ve),{shift:Je,placedGlyphBoxes:At}}}placeLayerBucketPart(e,a,u){const{bucket:h,layout:f,translationText:C,translationIcon:E,posMatrix:Q,unwrappedTileID:D,textLabelPlaneMatrix:R,labelToScreenMatrix:z,textPixelRatio:ee,holdingForFade:oe,collisionBoxArray:ce,partiallyEvaluatedTextSize:ve,collisionGroup:we}=e.parameters,Qe=f.get("text-optional"),Me=f.get("icon-optional"),fe=l.ar(f,"text-overlap","text-allow-overlap"),Ne=fe==="always",Ve=l.ar(f,"icon-overlap","icon-allow-overlap"),Je=Ve==="always",At=f.get("text-rotation-alignment")==="map",Ct=f.get("text-pitch-alignment")==="map",Ft=f.get("icon-text-fit")!=="none",Ht=f.get("symbol-z-order")==="viewport-y",Lt=Ne&&(Je||!h.hasIconData()||Me),Mt=Je&&(Ne||!h.hasTextData()||Qe);!h.collisionArrays&&ce&&h.deserializeCollisionBoxes(ce);const ei=this._getTerrainElevationFunc(this.retainedQueryData[h.bucketInstanceId].tileID),bi=(b,I,y)=>{var k,T;if(a[b.crossTileID])return;if(oe)return void(this.placements[b.crossTileID]=new Bi(!1,!1,!1));let F=!1,$=!1,N=!0,re=null,K={box:null,placeable:!1,offscreen:null},Z={box:null,placeable:!1,offscreen:null},ge=null,se=null,X=null,be=0,Ce=0,ke=0;I.textFeatureIndex?be=I.textFeatureIndex:b.useRuntimeCollisionCircles&&(be=b.featureIndex),I.verticalTextFeatureIndex&&(Ce=I.verticalTextFeatureIndex);const Re=I.textBox;if(Re){const te=ue=>{let de=l.ah.horizontal;if(h.allowVerticalPlacement&&!ue&&this.prevPlacement){const Te=this.prevPlacement.placedOrientations[b.crossTileID];Te&&(this.placedOrientations[b.crossTileID]=Te,de=Te,this.markUsedOrientation(h,de,b))}return de},U=(ue,de)=>{if(h.allowVerticalPlacement&&b.numVerticalGlyphVertices>0&&I.verticalTextBox){for(const Te of h.writingModes)if(Te===l.ah.vertical?(K=de(),Z=K):K=ue(),K&&K.placeable)break}else K=ue()},he=b.textAnchorOffsetStartIndex,le=b.textAnchorOffsetEndIndex;if(le===he){const ue=(de,Te)=>{const De=this.collisionIndex.placeCollisionBox(de,fe,ee,Q,D,Ct,At,C,we.predicate,ei);return De&&De.placeable&&(this.markUsedOrientation(h,Te,b),this.placedOrientations[b.crossTileID]=Te),De};U(()=>ue(Re,l.ah.horizontal),()=>{const de=I.verticalTextBox;return h.allowVerticalPlacement&&b.numVerticalGlyphVertices>0&&de?ue(de,l.ah.vertical):{box:null,offscreen:null}}),te(K&&K.placeable)}else{let ue=l.aq[(T=(k=this.prevPlacement)===null||k===void 0?void 0:k.variableOffsets[b.crossTileID])===null||T===void 0?void 0:T.anchor];const de=(De,Ge,et)=>{const lt=De.x2-De.x1,ct=De.y2-De.y1,vt=b.textBoxScale,Tt=Ft&&Ve==="never"?Ge:null;let at=null,Ze=fe==="never"?1:2,pt="never";ue&&Ze++;for(let Zt=0;Zt<Ze;Zt++){for(let St=he;St<le;St++){const ai=h.textAnchorOffsets.get(St);if(ue&&ai.textAnchor!==ue)continue;const kt=this.attemptAnchorPlacement(ai,De,lt,ct,vt,At,Ct,ee,Q,D,we,pt,b,h,et,C,E,Tt,ei);if(kt&&(at=kt.placedGlyphBoxes,at&&at.placeable))return F=!0,re=kt.shift,at}ue?ue=null:pt=fe}return u&&!at&&(at={box:this.collisionIndex.placeCollisionBox(Re,"always",ee,Q,D,Ct,At,C,we.predicate,ei,new l.P(0,0)).box,offscreen:!1,placeable:!1}),at};U(()=>de(Re,I.iconBox,l.ah.horizontal),()=>{const De=I.verticalTextBox;return h.allowVerticalPlacement&&(!K||!K.placeable)&&b.numVerticalGlyphVertices>0&&De?de(De,I.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}}),K&&(F=K.placeable,N=K.offscreen);const Te=te(K&&K.placeable);if(!F&&this.prevPlacement){const De=this.prevPlacement.variableOffsets[b.crossTileID];De&&(this.variableOffsets[b.crossTileID]=De,this.markUsedJustification(h,De.anchor,b,Te))}}}if(ge=K,F=ge&&ge.placeable,N=ge&&ge.offscreen,b.useRuntimeCollisionCircles){const te=h.text.placedSymbolArray.get(b.centerJustifiedTextSymbolIndex),U=l.ai(h.textSizeData,ve,te),he=f.get("text-padding");se=this.collisionIndex.placeCollisionCircles(fe,te,h.lineVertexArray,h.glyphOffsetArray,U,Q,D,R,z,u,Ct,we.predicate,b.collisionCircleDiameter,he,C,ei),se.circles.length&&se.collisionDetected&&!u&&l.w("Collisions detected, but collision boxes are not shown"),F=Ne||se.circles.length>0&&!se.collisionDetected,N=N&&se.offscreen}if(I.iconFeatureIndex&&(ke=I.iconFeatureIndex),I.iconBox){const te=U=>this.collisionIndex.placeCollisionBox(U,Ve,ee,Q,D,Ct,At,E,we.predicate,ei,Ft&&re?re:void 0);Z&&Z.placeable&&I.verticalIconBox?(X=te(I.verticalIconBox),$=X.placeable):(X=te(I.iconBox),$=X.placeable),N=N&&X.offscreen}const qe=Qe||b.numHorizontalGlyphVertices===0&&b.numVerticalGlyphVertices===0,Pe=Me||b.numIconVertices===0;qe||Pe?Pe?qe||($=$&&F):F=$&&F:$=F=$&&F;const $e=$&&X.placeable;if(F&&ge.placeable&&this.collisionIndex.insertCollisionBox(ge.box,fe,f.get("text-ignore-placement"),h.bucketInstanceId,Z&&Z.placeable&&Ce?Ce:be,we.ID),$e&&this.collisionIndex.insertCollisionBox(X.box,Ve,f.get("icon-ignore-placement"),h.bucketInstanceId,ke,we.ID),se&&F&&this.collisionIndex.insertCollisionCircles(se.circles,fe,f.get("text-ignore-placement"),h.bucketInstanceId,be,we.ID),u&&this.storeCollisionData(h.bucketInstanceId,y,I,ge,X,se),b.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(h.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[b.crossTileID]=new Bi(F||Lt,$||Mt,N||h.justReloaded),a[b.crossTileID]=!0};if(Ht){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const b=h.getSortedSymbolIndexes(this.transform.angle);for(let I=b.length-1;I>=0;--I){const y=b[I];bi(h.symbolInstances.get(y),h.collisionArrays[y],y)}}else for(let b=e.symbolInstanceStart;b<e.symbolInstanceEnd;b++)bi(h.symbolInstances.get(b),h.collisionArrays[b],b);if(u&&h.bucketInstanceId in this.collisionCircleArrays){const b=this.collisionCircleArrays[h.bucketInstanceId];l.as(b.invProjMatrix,Q),b.viewportMatrix=this.collisionIndex.getViewportMatrix()}h.justReloaded=!1}storeCollisionData(e,a,u,h,f,C){if(u.textBox||u.iconBox){let E,Q;this.collisionBoxArrays.has(e)?E=this.collisionBoxArrays.get(e):(E=new Map,this.collisionBoxArrays.set(e,E)),E.has(a)?Q=E.get(a):(Q={text:null,icon:null},E.set(a,Q)),u.textBox&&(Q.text=h.box),u.iconBox&&(Q.icon=f.box)}if(C){let E=this.collisionCircleArrays[e];E===void 0&&(E=this.collisionCircleArrays[e]=new rn);for(let Q=0;Q<C.circles.length;Q+=4)E.circles.push(C.circles[Q+0]),E.circles.push(C.circles[Q+1]),E.circles.push(C.circles[Q+2]),E.circles.push(C.collisionDetected?1:0)}}markUsedJustification(e,a,u,h){let f;f=h===l.ah.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[l.at(a)];const C=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];for(const E of C)E>=0&&(e.text.placedSymbolArray.get(E).crossTileID=f>=0&&E!==f?0:u.crossTileID)}markUsedOrientation(e,a,u){const h=a===l.ah.horizontal||a===l.ah.horizontalOnly?a:0,f=a===l.ah.vertical?a:0,C=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];for(const E of C)e.text.placedSymbolArray.get(E).placedOrientation=h;u.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=f)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let u=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const h=a?a.symbolFadeChange(e):1,f=a?a.opacities:{},C=a?a.variableOffsets:{},E=a?a.placedOrientations:{};for(const Q in this.placements){const D=this.placements[Q],R=f[Q];R?(this.opacities[Q]=new yn(R,h,D.text,D.icon),u=u||D.text!==R.text.placed||D.icon!==R.icon.placed):(this.opacities[Q]=new yn(null,h,D.text,D.icon,D.skipFade),u=u||D.text||D.icon)}for(const Q in f){const D=f[Q];if(!this.opacities[Q]){const R=new yn(D,h,!1,!1);R.isHidden()||(this.opacities[Q]=R,u=u||D.text.placed||D.icon.placed)}}for(const Q in C)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=C[Q]);for(const Q in E)this.placedOrientations[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.placedOrientations[Q]=E[Q]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");u?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:e)}updateLayerOpacities(e,a){const u={};for(const h of a){const f=h.getBucket(e);f&&h.latestFeatureIndex&&e.id===f.layerIds[0]&&this.updateBucketOpacities(f,h.tileID,u,h.collisionBoxArray)}}updateBucketOpacities(e,a,u,h){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const f=e.layers[0],C=f.layout,E=new yn(null,0,!1,!1,!0),Q=C.get("text-allow-overlap"),D=C.get("icon-allow-overlap"),R=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=C.get("text-rotation-alignment")==="map",ee=C.get("text-pitch-alignment")==="map",oe=C.get("icon-text-fit")!=="none",ce=new yn(null,0,Q&&(D||!e.hasIconData()||C.get("icon-optional")),D&&(Q||!e.hasTextData()||C.get("text-optional")),!0);!e.collisionArrays&&h&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(h);const ve=(Qe,Me,fe)=>{for(let Ne=0;Ne<Me/4;Ne++)Qe.opacityVertexArray.emplaceBack(fe);Qe.hasVisibleVertices=Qe.hasVisibleVertices||fe!==Ma},we=this.collisionBoxArrays.get(e.bucketInstanceId);for(let Qe=0;Qe<e.symbolInstances.length;Qe++){const Me=e.symbolInstances.get(Qe),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:Ne,crossTileID:Ve}=Me;let Je=this.opacities[Ve];u[Ve]?Je=E:Je||(Je=ce,this.opacities[Ve]=Je),u[Ve]=!0;const At=Me.numIconVertices>0,Ct=this.placedOrientations[Me.crossTileID],Ft=Ct===l.ah.vertical,Ht=Ct===l.ah.horizontal||Ct===l.ah.horizontalOnly;if(fe>0||Ne>0){const Mt=_r(Je.text);ve(e.text,fe,Ft?Ma:Mt),ve(e.text,Ne,Ht?Ma:Mt);const ei=Je.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(I=>{I>=0&&(e.text.placedSymbolArray.get(I).hidden=ei||Ft?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=ei||Ht?1:0);const bi=this.variableOffsets[Me.crossTileID];bi&&this.markUsedJustification(e,bi.anchor,Me,Ct);const b=this.placedOrientations[Me.crossTileID];b&&(this.markUsedJustification(e,"left",Me,b),this.markUsedOrientation(e,b,Me))}if(At){const Mt=_r(Je.icon),ei=!(oe&&Me.verticalPlacedIconSymbolIndex&&Ft);Me.placedIconSymbolIndex>=0&&(ve(e.icon,Me.numIconVertices,ei?Mt:Ma),e.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=Je.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(ve(e.icon,Me.numVerticalIconVertices,ei?Ma:Mt),e.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}const Lt=we&&we.has(Qe)?we.get(Qe):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Mt=e.collisionArrays[Qe];if(Mt){let ei=new l.P(0,0);if(Mt.textBox||Mt.verticalTextBox){let bi=!0;if(R){const b=this.variableOffsets[Ve];b?(ei=Yn(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale),z&&ei._rotate(ee?this.transform.angle:-this.transform.angle)):bi=!1}if(Mt.textBox||Mt.verticalTextBox){let b;Mt.textBox&&(b=Ft),Mt.verticalTextBox&&(b=Ht),qs(e.textCollisionBox.collisionVertexArray,Je.text.placed,!bi||b,Lt.text,ei.x,ei.y)}}if(Mt.iconBox||Mt.verticalIconBox){const bi=!!(!Ht&&Mt.verticalIconBox);let b;Mt.iconBox&&(b=bi),Mt.verticalIconBox&&(b=!bi),qs(e.iconCollisionBox.collisionVertexArray,Je.icon.placed,b,Lt.icon,oe?ei.x:0,oe?ei.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const Qe=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=Qe.invProjMatrix,e.placementViewportMatrix=Qe.viewportMatrix,e.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,a){const u=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*u>e}setStale(){this.stale=!0}}function qs(g,e,a,u,h,f){u&&u.length!==0||(u=[0,0,0,0]);const C=u[0]-Ci,E=u[1]-Ci,Q=u[2]-Ci,D=u[3]-Ci;g.emplaceBack(e?1:0,a?1:0,h||0,f||0,C,E),g.emplaceBack(e?1:0,a?1:0,h||0,f||0,Q,E),g.emplaceBack(e?1:0,a?1:0,h||0,f||0,Q,D),g.emplaceBack(e?1:0,a?1:0,h||0,f||0,C,D)}const an=Math.pow(2,25),mc=Math.pow(2,24),yc=Math.pow(2,17),Sr=Math.pow(2,16),mr=Math.pow(2,9),hh=Math.pow(2,8),yr=Math.pow(2,1);function _r(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const e=g.placed?1:0,a=Math.floor(127*g.opacity);return a*an+e*mc+a*yc+e*Sr+a*mr+e*hh+a*yr+e}const Ma=0;function Nr(){return{isOccluded:(g,e,a)=>!1,getPitchedTextCorrection:(g,e,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(g,e,a,u){throw new Error("Not implemented.")},translatePosition:(g,e,a,u)=>function(h,f,C,E,Q=!1){if(!C[0]&&!C[1])return[0,0];const D=Q?E==="map"?h.angle:0:E==="viewport"?-h.angle:0;if(D){const R=Math.sin(D),z=Math.cos(D);C=[C[0]*z-C[1]*R,C[0]*R+C[1]*z]}return[Q?C[0]:Si(f,C[0],h.zoom),Q?C[1]:Si(f,C[1],h.zoom)]}(g,e,a,u),getCircleRadiusCorrection:g=>1}}class Vn{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,a,u,h,f){const C=this._bucketParts;for(;this._currentTileIndex<e.length;)if(a.getBucketParts(C,h,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,f())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((E,Q)=>E.sortKey-Q.sortKey));this._currentPartIndex<C.length;)if(a.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,f())return!0;return!1}}class Bo{constructor(e,a,u,h,f,C,E,Q){this.placement=new dr(e,Nr(),a,C,E,Q),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(e,a,u){const h=q.now(),f=()=>!this._forceFullPlacement&&q.now()-h>2;for(;this._currentPlacementIndex>=0;){const C=a[e[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=E)&&(!C.maxzoom||C.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Vn(C)),this._inProgressLayer.continuePlacement(u[C.source],this.placement,this._showCollisionBoxes,C,f))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ta=512/l.X/2;class Qn{constructor(e,a,u){this.tileID=e,this.bucketInstanceId=u,this._symbolsByKey={};const h=new Map;for(let f=0;f<a.length;f++){const C=a.get(f),E=C.key,Q=h.get(E);Q?Q.push(C):h.set(E,[C])}for(const[f,C]of h){const E={positions:C.map(Q=>({x:Math.floor(Q.anchorX*ta),y:Math.floor(Q.anchorY*ta)})),crossTileIDs:C.map(Q=>Q.crossTileID)};if(E.positions.length>128){const Q=new l.av(E.positions.length,16,Uint16Array);for(const{x:D,y:R}of E.positions)Q.add(D,R);Q.finish(),delete E.positions,E.index=Q}this._symbolsByKey[f]=E}}getScaledCoordinates(e,a){const{x:u,y:h,z:f}=this.tileID.canonical,{x:C,y:E,z:Q}=a.canonical,D=ta/Math.pow(2,Q-f),R=(E*l.X+e.anchorY)*D,z=h*l.X*ta;return{x:Math.floor((C*l.X+e.anchorX)*D-u*l.X*ta),y:Math.floor(R-z)}}findMatches(e,a,u){const h=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let f=0;f<e.length;f++){const C=e.get(f);if(C.crossTileID)continue;const E=this._symbolsByKey[C.key];if(!E)continue;const Q=this.getScaledCoordinates(C,a);if(E.index){const D=E.index.range(Q.x-h,Q.y-h,Q.x+h,Q.y+h).sort();for(const R of D){const z=E.crossTileIDs[R];if(!u[z]){u[z]=!0,C.crossTileID=z;break}}}else if(E.positions)for(let D=0;D<E.positions.length;D++){const R=E.positions[D],z=E.crossTileIDs[D];if(Math.abs(R.x-Q.x)<=h&&Math.abs(R.y-Q.y)<=h&&!u[z]){u[z]=!0,C.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class ml{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class kr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const a=Math.round((e-this.lng)/360);if(a!==0)for(const u in this.indexes){const h=this.indexes[u],f={};for(const C in h){const E=h[C];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+a),f[E.tileID.key]=E}this.indexes[u]=f}this.lng=e}addBucket(e,a,u){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let f=0;f<a.symbolInstances.length;f++)a.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const h=this.usedCrossTileIDs[e.overscaledZ];for(const f in this.indexes){const C=this.indexes[f];if(Number(f)>e.overscaledZ)for(const E in C){const Q=C[E];Q.tileID.isChildOf(e)&&Q.findMatches(a.symbolInstances,e,h)}else{const E=C[e.scaledTo(Number(f)).key];E&&E.findMatches(a.symbolInstances,e,h)}}for(let f=0;f<a.symbolInstances.length;f++){const C=a.symbolInstances.get(f);C.crossTileID||(C.crossTileID=u.generate(),h[C.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Qn(e,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(e,a){for(const u of a.getCrossTileIDsLists())for(const h of u)delete this.usedCrossTileIDs[e][h]}removeStaleBuckets(e){let a=!1;for(const u in this.indexes){const h=this.indexes[u];for(const f in h)e[h[f].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,h[f]),delete h[f],a=!0)}return a}}class Eo{constructor(){this.layerIndexes={},this.crossTileIDs=new ml,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,a,u){let h=this.layerIndexes[e.id];h===void 0&&(h=this.layerIndexes[e.id]=new kr);let f=!1;const C={};h.handleWrapJump(u);for(const E of a){const Q=E.getBucket(e);Q&&e.id===Q.layerIds[0]&&(Q.bucketInstanceId||(Q.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(E.tileID,Q,this.crossTileIDs)&&(f=!0),C[Q.bucketInstanceId]=!0)}return h.removeStaleBuckets(C)&&(f=!0),f}pruneUnusedLayers(e){const a={};e.forEach(u=>{a[u]=!0});for(const u in this.layerIndexes)a[u]||delete this.layerIndexes[u]}}const ia=(g,e)=>l.t(g,e&&e.filter(a=>a.identifier!=="source.canvas")),Ah=l.aw();class yl extends l.E{constructor(e,a={}){super(),this._rtlPluginLoaded=()=>{for(const u in this.sourceCaches){const h=this.sourceCaches[u].getSource().type;h!=="vector"&&h!=="geojson"||this.sourceCaches[u].reload()}},this.map=e,this.dispatcher=new Jn(On(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(u,h)=>this.getGlyphs(u,h)),this.dispatcher.registerMessageHandler("GI",(u,h)=>this.getImages(u,h)),this.imageManager=new yt,this.imageManager.setEventedParent(this),this.glyphManager=new vi(e._requestManager,a.localIdeographFontFamily),this.lineAtlas=new wn(256,512),this.crossTileSymbolIndex=new Eo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),Tn().on(dt,this._rtlPluginLoaded),this.on("data",u=>{if(u.dataType!=="source"||u.sourceDataType!=="metadata")return;const h=this.sourceCaches[u.sourceId];if(!h)return;const f=h.getSource();if(f&&f.vectorLayerIds)for(const C in this._layers){const E=this._layers[C];E.source===f.id&&this._validateLayer(E)}})}loadURL(e,a={},u){this.fire(new l.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const h=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const f=this._loadStyleRequest;l.h(h,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,a,u)}).catch(C=>{this._loadStyleRequest=null,C&&!f.signal.aborted&&this.fire(new l.j(C))})}loadJSON(e,a={},u){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,q.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(e,a,u)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Ah,{validate:!1})}_load(e,a,u){var h;const f=a.transformStyle?a.transformStyle(u,e):e;if(!a.validate||!ia(this,l.u(f))){this._loaded=!0,this.stylesheet=f;for(const C in f.sources)this.addSource(C,f.sources[C],{validate:!1});f.sprite?this._loadSprite(f.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(f.glyphs),this._createLayers(),this.light=new Nn(this.stylesheet.light),this.sky=new Hi(this.stylesheet.sky),this.map.setTerrain((h=this.stylesheet.terrain)!==null&&h!==void 0?h:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const e=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of e){const u=l.aA(a);u.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=u}}_loadSprite(e,a=!1,u=void 0){let h;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(f,C,E,Q){return l._(this,void 0,void 0,function*(){const D=Et(f),R=E>1?"@2x":"",z={},ee={};for(const{id:oe,url:ce}of D){const ve=C.transformRequest(zt(ce,R,".json"),"SpriteJSON");z[oe]=l.h(ve,Q);const we=C.transformRequest(zt(ce,R,".png"),"SpriteImage");ee[oe]=ot.getImage(we,Q)}return yield Promise.all([...Object.values(z),...Object.values(ee)]),function(oe,ce){return l._(this,void 0,void 0,function*(){const ve={};for(const we in oe){ve[we]={};const Qe=q.getImageCanvasContext((yield ce[we]).data),Me=(yield oe[we]).data;for(const fe in Me){const{width:Ne,height:Ve,x:Je,y:At,sdf:Ct,pixelRatio:Ft,stretchX:Ht,stretchY:Lt,content:Mt,textFitWidth:ei,textFitHeight:bi}=Me[fe];ve[we][fe]={data:null,pixelRatio:Ft,sdf:Ct,stretchX:Ht,stretchY:Lt,content:Mt,textFitWidth:ei,textFitHeight:bi,spriteData:{width:Ne,height:Ve,x:Je,y:At,context:Qe}}}}return ve})}(z,ee)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(f=>{if(this._spriteRequest=null,f)for(const C in f){this._spritesImagesIds[C]=[];const E=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(Q=>!(Q in f)):[];for(const Q of E)this.imageManager.removeImage(Q),this._changedImages[Q]=!0;for(const Q in f[C]){const D=C==="default"?Q:`${C}:${Q}`;this._spritesImagesIds[C].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,f[C][Q],!1):this.imageManager.addImage(D,f[C][Q]),a&&(this._changedImages[D]=!0)}}}).catch(f=>{this._spriteRequest=null,h=f,this.fire(new l.j(h))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),u&&u(h)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(e){const a=this.sourceCaches[e.source];if(!a)return;const u=e.sourceLayer;if(!u)return;const h=a.getSource();(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(u)===-1)&&this.fire(new l.j(new Error(`Source layer "${u}" does not exist on source "${h.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,a=!1){const u=this._serializedAllLayers();if(!e||e.length===0)return Object.values(a?l.aB(u):u);const h=[];for(const f of e)if(u[f]){const C=a?l.aB(u[f]):u[f];h.push(C)}return h}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const a=Object.keys(this._layers);for(const u of a){const h=this._layers[u];h.type!=="custom"&&(e[u]=h.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const a=this._changed;if(a){const h=Object.keys(this._updatedLayers),f=Object.keys(this._removedLayers);(h.length||f.length)&&this._updateWorkerLayers(h,f);for(const C in this._updatedSources){const E=this._updatedSources[C];if(E==="reload")this._reloadSource(C);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const u={};for(const h in this.sourceCaches){const f=this.sourceCaches[h];u[h]=f.used,f.used=!1}for(const h of this._order){const f=this._layers[h];f.recalculate(e,this._availableImages),!f.isHidden(e.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}for(const h in u){const f=this.sourceCaches[h];!!u[h]!=!!f.used&&f.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:h}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,a&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,a={}){var u;this._checkLoaded();const h=this.serialize();if(e=a.transformStyle?a.transformStyle(h,e):e,((u=a.validate)===null||u===void 0||u)&&ia(this,l.u(e)))return!1;(e=l.aB(e)).layers=l.az(e.layers);const f=l.aC(h,e),C=this._getOperationsToPerform(f);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const E of C.operations)E();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const a=[],u=[];for(const h of e)switch(h.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,h.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,h.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,h.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,h.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,h.args));break;case"addSource":a.push(()=>this.addSource.apply(this,h.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,h.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,h.args));break;case"setLight":a.push(()=>this.setLight.apply(this,h.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,h.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,h.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,h.args));break;case"setSky":a.push(()=>this.setSky.apply(this,h.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,h.args));break;case"setTransition":a.push(()=>{});break;default:u.push(h.command)}return{operations:a,unimplemented:u}}addImage(e,a){if(this.getImage(e))return this.fire(new l.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,a),this._afterImageUpdated(e)}updateImage(e,a){this.imageManager.updateImage(e,a)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new l.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,a,u={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(l.u.source,`sources.${e}`,a,null,u))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const h=this.sourceCaches[e]=new ii(e,a,this.dispatcher);h.style=this,h.setEventedParent(this,()=>({isSourceLoaded:h.loaded(),source:h.serialize(),sourceId:e})),h.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const u in this._layers)if(this._layers[u].source===e)return this.fire(new l.j(new Error(`Source "${e}" cannot be removed while layer "${u}" is using it.`)));const a=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],a.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,a){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const u=this.sourceCaches[e].getSource();if(u.type!=="geojson")throw new Error(`geojsonSource.type is ${u.type}, which is !== 'geojson`);u.setData(a),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,a,u={}){this._checkLoaded();const h=e.id;if(this.getLayer(h))return void this.fire(new l.j(new Error(`Layer "${h}" already exists on this map.`)));let f;if(e.type==="custom"){if(ia(this,l.aD(e)))return;f=l.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(h,e.source),e=l.aB(e),e=l.e(e,{source:h})),this._validate(l.u.layer,`layers.${h}`,e,{arrayIndex:-1},u))return;f=l.aA(e),this._validateLayer(f),f.setEventedParent(this,{layer:{id:h}})}const C=a?this._order.indexOf(a):this._order.length;if(a&&C===-1)this.fire(new l.j(new Error(`Cannot add layer "${h}" before non-existing layer "${a}".`)));else{if(this._order.splice(C,0,h),this._layerOrderChanged=!0,this._layers[h]=f,this._removedLayers[h]&&f.source&&f.type!=="custom"){const E=this._removedLayers[h];delete this._removedLayers[h],E.type!==f.type?this._updatedSources[f.source]="clear":(this._updatedSources[f.source]="reload",this.sourceCaches[f.source].pause())}this._updateLayer(f),f.onAdd&&f.onAdd(this.map)}}moveLayer(e,a){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new l.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===a)return;const u=this._order.indexOf(e);this._order.splice(u,1);const h=a?this._order.indexOf(a):this._order.length;a&&h===-1?this.fire(new l.j(new Error(`Cannot move layer "${e}" before non-existing layer "${a}".`))):(this._order.splice(h,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const a=this._layers[e];if(!a)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${e}".`)));a.setEventedParent(null);const u=this._order.indexOf(e);this._order.splice(u,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=a,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],a.onRemove&&a.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,a,u){this._checkLoaded();const h=this.getLayer(e);h?h.minzoom===a&&h.maxzoom===u||(a!=null&&(h.minzoom=a),u!=null&&(h.maxzoom=u),this._updateLayer(h)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,a,u={}){this._checkLoaded();const h=this.getLayer(e);if(h){if(!l.aE(h.filter,a))return a==null?(h.filter=void 0,void this._updateLayer(h)):void(this._validate(l.u.filter,`layers.${h.id}.filter`,a,null,u)||(h.filter=l.aB(a),this._updateLayer(h)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return l.aB(this.getLayer(e).filter)}setLayoutProperty(e,a,u,h={}){this._checkLoaded();const f=this.getLayer(e);f?l.aE(f.getLayoutProperty(a),u)||(f.setLayoutProperty(a,u,h),this._updateLayer(f)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,a){const u=this.getLayer(e);if(u)return u.getLayoutProperty(a);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,a,u,h={}){this._checkLoaded();const f=this.getLayer(e);f?l.aE(f.getPaintProperty(a),u)||(f.setPaintProperty(a,u,h)&&this._updateLayer(f),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,a){return this.getLayer(e).getPaintProperty(a)}setFeatureState(e,a){this._checkLoaded();const u=e.source,h=e.sourceLayer,f=this.sourceCaches[u];if(f===void 0)return void this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)));const C=f.getSource().type;C==="geojson"&&h?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||h?(e.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),f.setFeatureState(h,e.id,a)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,a){this._checkLoaded();const u=e.source,h=this.sourceCaches[u];if(h===void 0)return void this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)));const f=h.getSource().type,C=f==="vector"?e.sourceLayer:void 0;f!=="vector"||C?a&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):h.removeFeatureState(C,e.id,a):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const a=e.source,u=e.sourceLayer,h=this.sourceCaches[a];if(h!==void 0)return h.getSource().type!=="vector"||u?(e.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),h.getFeatureState(u,e.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=l.aF(this.sourceCaches,f=>f.serialize()),a=this._serializeByIds(this._order,!0),u=this.map.getTerrain()||void 0,h=this.stylesheet;return l.aG({version:h.version,name:h.name,metadata:h.metadata,light:h.light,sky:h.sky,center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,sprite:h.sprite,glyphs:h.glyphs,transition:h.transition,sources:e,layers:a,terrain:u},f=>f!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const a=C=>this._layers[C].type==="fill-extrusion",u={},h=[];for(let C=this._order.length-1;C>=0;C--){const E=this._order[C];if(a(E)){u[E]=C;for(const Q of e){const D=Q[E];if(D)for(const R of D)h.push(R)}}}h.sort((C,E)=>E.intersectionZ-C.intersectionZ);const f=[];for(let C=this._order.length-1;C>=0;C--){const E=this._order[C];if(a(E))for(let Q=h.length-1;Q>=0;Q--){const D=h[Q].feature;if(u[D.layer.id]<C)break;f.push(D),h.pop()}else for(const Q of e){const D=Q[E];if(D)for(const R of D)f.push(R.feature)}}return f}queryRenderedFeatures(e,a,u){a&&a.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const h={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const E of a.layers){const Q=this._layers[E];if(!Q)return this.fire(new l.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];h[Q.source]=!0}}const f=[];a.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const E in this.sourceCaches)a.layers&&!h[E]||f.push(Ue(this.sourceCaches[E],this._layers,C,e,a,u));return this.placement&&f.push(function(E,Q,D,R,z,ee,oe){const ce={},ve=ee.queryRenderedSymbols(R),we=[];for(const Qe of Object.keys(ve).map(Number))we.push(oe[Qe]);we.sort(rt);for(const Qe of we){const Me=Qe.featureIndex.lookupSymbolFeatures(ve[Qe.bucketInstanceId],Q,Qe.bucketIndex,Qe.sourceLayerIndex,z.filter,z.layers,z.availableImages,E);for(const fe in Me){const Ne=ce[fe]=ce[fe]||[],Ve=Me[fe];Ve.sort((Je,At)=>{const Ct=Qe.featureSortOrder;if(Ct){const Ft=Ct.indexOf(Je.featureIndex);return Ct.indexOf(At.featureIndex)-Ft}return At.featureIndex-Je.featureIndex});for(const Je of Ve)Ne.push(Je)}}for(const Qe in ce)ce[Qe].forEach(Me=>{const fe=Me.feature,Ne=D[E[Qe].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=Ne});return ce}(this._layers,C,this.sourceCaches,e,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)}querySourceFeatures(e,a){a&&a.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",a.filter,null,a);const u=this.sourceCaches[e];return u?function(h,f){const C=h.getRenderableIds().map(D=>h.getTileByID(D)),E=[],Q={};for(let D=0;D<C.length;D++){const R=C[D],z=R.tileID.canonical.key;Q[z]||(Q[z]=!0,R.querySourceFeatures(E,f))}return E}(u,a):[]}getLight(){return this.light.getLight()}setLight(e,a={}){this._checkLoaded();const u=this.light.getLight();let h=!1;for(const C in e)if(!l.aE(e[C],u[C])){h=!0;break}if(!h)return;const f={now:q.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,a),this.light.updateTransitions(f)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,a={}){const u=this.getSky();let h=!1;if(!e&&!u)return;if(e&&!u)h=!0;else if(!e&&u)h=!0;else for(const C in e)if(!l.aE(e[C],u[C])){h=!0;break}if(!h)return;const f={now:q.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,a),this.sky.updateTransitions(f)}_validate(e,a,u,h,f={}){return(!f||f.validate!==!1)&&ia(this,e.call(l.u,l.e({key:a,style:this.serialize(),value:u,styleSpec:l.v},h)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Tn().off(dt,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const u=this.sourceCaches[a];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const a in this.sourceCaches)this.sourceCaches[a].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,a,u,h,f=!1){let C=!1,E=!1;const Q={};for(const D of this._order){const R=this._layers[D];if(R.type!=="symbol")continue;if(!Q[R.source]){const ee=this.sourceCaches[R.source];Q[R.source]=ee.getRenderableIds(!0).map(oe=>ee.getTileByID(oe)).sort((oe,ce)=>ce.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ce.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(R,Q[R.source],e.center.lng);C=C||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((f=f||this._layerOrderChanged||u===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(q.now(),e.zoom))&&(this.pauseablePlacement=new Bo(e,this.map.terrain,this._order,f,a,u,h,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(q.now()),E=!0),C&&this.pauseablePlacement.placement.setStale()),E||C)for(const D of this._order){const R=this._layers[D];R.type==="symbol"&&this.placement.updateLayerOpacities(R,Q[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(q.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,a){return l._(this,void 0,void 0,function*(){const u=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const h=this.sourceCaches[a.source];return h&&h.setDependencies(a.tileID.key,a.type,a.icons),u})}getGlyphs(e,a){return l._(this,void 0,void 0,function*(){const u=yield this.glyphManager.getGlyphs(a.stacks),h=this.sourceCaches[a.source];return h&&h.setDependencies(a.tileID.key,a.type,[""]),u})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,a={}){this._checkLoaded(),e&&this._validate(l.u.glyphs,"glyphs",e,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,a,u={},h){this._checkLoaded();const f=[{id:e,url:a}],C=[...Et(this.stylesheet.sprite),...f];this._validate(l.u.sprite,"sprite",C,null,u)||(this.stylesheet.sprite=C,this._loadSprite(f,!0,h))}removeSprite(e){this._checkLoaded();const a=Et(this.stylesheet.sprite);if(a.find(u=>u.id===e)){if(this._spritesImagesIds[e])for(const u of this._spritesImagesIds[e])this.imageManager.removeImage(u),this._changedImages[u]=!0;a.splice(a.findIndex(u=>u.id===e),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Et(this.stylesheet.sprite)}setSprite(e,a={},u){this._checkLoaded(),e&&this._validate(l.u.sprite,"sprite",e,null,a)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,u):(this._unloadSprite(),u&&u(null)))}}var _s=l.Y([{name:"a_pos",type:"Int16",components:2}]);const Ta={prelude:Ji(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ji(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ji(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ji(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ji("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ji(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ji(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ji("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ji("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ji("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ji(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ji(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ji(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ji(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ji(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ji(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ji(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ji(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ji(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ji(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ji(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ji("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ji("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ji("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ji("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ji(g,e){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=e.match(/attribute ([\w]+) ([\w]+)/g),h=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),f=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=f?f.concat(h):h,E={};return{fragmentSource:g=g.replace(a,(Q,D,R,z,ee)=>(E[ee]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
varying ${R} ${z} ${ee};
#else
uniform ${R} ${z} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${R} ${z} ${ee} = u_${ee};
#endif
`)),vertexSource:e=e.replace(a,(Q,D,R,z,ee)=>{const oe=z==="float"?"vec2":"vec4",ce=ee.match(/color/)?"color":oe;return E[ee]?D==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${R} ${oe} a_${ee};
varying ${R} ${z} ${ee};
#else
uniform ${R} ${z} u_${ee};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${ce}(a_${ee}, u_${ee}_t);
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${R} ${oe} a_${ee};
#else
uniform ${R} ${z} u_${ee};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${R} ${z} ${ee} = a_${ee};
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${R} ${z} ${ee} = unpack_mix_${ce}(a_${ee}, u_${ee}_t);
#else
    ${R} ${z} ${ee} = u_${ee};
#endif
`}),staticAttributes:u,staticUniforms:C}}class _c{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,a,u,h,f,C,E,Q,D){this.context=e;let R=this.boundPaintVertexBuffers.length!==h.length;for(let z=0;!R&&z<h.length;z++)this.boundPaintVertexBuffers[z]!==h[z]&&(R=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==u||R||this.boundIndexBuffer!==f||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==Q||this.boundDynamicVertexBuffer3!==D?this.freshBind(a,u,h,f,C,E,Q,D):(e.bindVertexArray.set(this.vao),E&&E.bind(),f&&f.dynamicDraw&&f.bind(),Q&&Q.bind(),D&&D.bind())}freshBind(e,a,u,h,f,C,E,Q){const D=e.numAttributes,R=this.context,z=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=h,this.boundVertexOffset=f,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=Q,a.enableAttributes(z,e);for(const ee of u)ee.enableAttributes(z,e);C&&C.enableAttributes(z,e),E&&E.enableAttributes(z,e),Q&&Q.enableAttributes(z,e),a.bind(),a.setVertexAttribPointers(z,e,f);for(const ee of u)ee.bind(),ee.setVertexAttribPointers(z,e,f);C&&(C.bind(),C.setVertexAttribPointers(z,e,f)),h&&h.bind(),E&&(E.bind(),E.setVertexAttribPointers(z,e,f)),Q&&(Q.bind(),Q.setVertexAttribPointers(z,e,f)),R.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Qo=(g,e,a,u,h)=>({u_matrix:g,u_texture:0,u_ele_delta:e,u_fog_matrix:a,u_fog_color:u?u.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:u?u.calculateFogBlendOpacity(h):0,u_horizon_color:u?u.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1});function ns(g){const e=[];for(let a=0;a<g.length;a++){if(g[a]===null)continue;const u=g[a].split(" ");e.push(u.pop())}return e}class vc{constructor(e,a,u,h,f,C){const E=e.gl;this.program=E.createProgram();const Q=ns(a.staticAttributes),D=u?u.getBinderAttributes():[],R=Q.concat(D),z=Ta.prelude.staticUniforms?ns(Ta.prelude.staticUniforms):[],ee=a.staticUniforms?ns(a.staticUniforms):[],oe=u?u.getBinderUniforms():[],ce=z.concat(ee).concat(oe),ve=[];for(const Je of ce)ve.indexOf(Je)<0&&ve.push(Je);const we=u?u.defines():[];f&&we.push("#define OVERDRAW_INSPECTOR;"),C&&we.push("#define TERRAIN3D;");const Qe=we.concat(Ta.prelude.fragmentSource,a.fragmentSource).join(`
`),Me=we.concat(Ta.prelude.vertexSource,a.vertexSource).join(`
`),fe=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(fe,Qe),E.compileShader(fe),!E.getShaderParameter(fe,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(fe)}`);E.attachShader(this.program,fe);const Ne=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(Ne,Me),E.compileShader(Ne),!E.getShaderParameter(Ne,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(Ne)}`);E.attachShader(this.program,Ne),this.attributes={};const Ve={};this.numAttributes=R.length;for(let Je=0;Je<this.numAttributes;Je++)R[Je]&&(E.bindAttribLocation(this.program,Je,R[Je]),this.attributes[R[Je]]=Je);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(Ne),E.deleteShader(fe);for(let Je=0;Je<ve.length;Je++){const At=ve[Je];if(At&&!Ve[At]){const Ct=E.getUniformLocation(this.program,At);Ct&&(Ve[At]=Ct)}}this.fixedUniforms=h(e,Ve),this.terrainUniforms=((Je,At)=>({u_depth:new l.aH(Je,At.u_depth),u_terrain:new l.aH(Je,At.u_terrain),u_terrain_dim:new l.aI(Je,At.u_terrain_dim),u_terrain_matrix:new l.aJ(Je,At.u_terrain_matrix),u_terrain_unpack:new l.aK(Je,At.u_terrain_unpack),u_terrain_exaggeration:new l.aI(Je,At.u_terrain_exaggeration)}))(e,Ve),this.binderUniforms=u?u.getUniforms(e,Ve):[]}draw(e,a,u,h,f,C,E,Q,D,R,z,ee,oe,ce,ve,we,Qe,Me){const fe=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(u),e.setStencilMode(h),e.setColorMode(f),e.setCullFace(C),Q){e.activeTexture.set(fe.TEXTURE2),fe.bindTexture(fe.TEXTURE_2D,Q.depthTexture),e.activeTexture.set(fe.TEXTURE3),fe.bindTexture(fe.TEXTURE_2D,Q.texture);for(const Ve in this.terrainUniforms)this.terrainUniforms[Ve].set(Q[Ve])}for(const Ve in this.fixedUniforms)this.fixedUniforms[Ve].set(E[Ve]);ve&&ve.setUniforms(e,this.binderUniforms,oe,{zoom:ce});let Ne=0;switch(a){case fe.LINES:Ne=2;break;case fe.TRIANGLES:Ne=3;break;case fe.LINE_STRIP:Ne=1}for(const Ve of ee.get()){const Je=Ve.vaos||(Ve.vaos={});(Je[D]||(Je[D]=new _c)).bind(e,this,R,ve?ve.getPaintVertexBuffers():[],z,Ve.vertexOffset,we,Qe,Me),fe.drawElements(a,Ve.primitiveLength*Ne,fe.UNSIGNED_SHORT,Ve.primitiveOffset*Ne*2)}}}function _l(g,e,a){const u=1/Si(a,1,e.transform.tileZoom),h=Math.pow(2,a.tileID.overscaledZ),f=a.tileSize*Math.pow(2,e.transform.tileZoom)/h,C=f*(a.tileID.canonical.x+a.tileID.wrap*h),E=f*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[u,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[C>>16,E>>16],u_pixel_coord_lower:[65535&C,65535&E]}}const So=(g,e,a,u)=>{const h=e.style.light,f=h.properties.get("position"),C=[f.x,f.y,f.z],E=function(){var D=new l.A(9);return l.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();h.properties.get("anchor")==="viewport"&&function(D,R){var z=Math.sin(R),ee=Math.cos(R);D[0]=ee,D[1]=z,D[2]=0,D[3]=-z,D[4]=ee,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(E,-e.transform.angle),function(D,R,z){var ee=R[0],oe=R[1],ce=R[2];D[0]=ee*z[0]+oe*z[3]+ce*z[6],D[1]=ee*z[1]+oe*z[4]+ce*z[7],D[2]=ee*z[2]+oe*z[5]+ce*z[8]}(C,C,E);const Q=h.properties.get("color");return{u_matrix:g,u_lightpos:C,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[Q.r,Q.g,Q.b],u_vertical_gradient:+a,u_opacity:u}},_a=(g,e,a,u,h,f,C)=>l.e(So(g,e,a,u),_l(f,e,C),{u_height_factor:-Math.pow(2,h.overscaledZ)/C.tileSize/8}),rs=g=>({u_matrix:g}),vs=(g,e,a,u)=>l.e(rs(g),_l(a,e,u)),dh=(g,e)=>({u_matrix:g,u_world:e}),ko=(g,e,a,u,h)=>l.e(vs(g,e,a,u),{u_world:h}),fh=(g,e,a,u)=>{const h=g.transform;let f,C;if(u.paint.get("circle-pitch-alignment")==="map"){const E=Si(a,1,h.zoom);f=!0,C=[E,E]}else f=!1,C=h.pixelsToGLUnits;return{u_camera_to_center_distance:h.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(e.posMatrix,a,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+f,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:C}},Pa=(g,e,a)=>({u_matrix:g,u_inv_matrix:e,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),Hs=(g,e,a=1)=>({u_matrix:g,u_color:e,u_overlay:0,u_overlay_scale:a}),Ln=g=>({u_matrix:g}),Wn=(g,e,a,u)=>({u_matrix:g,u_extrude_scale:Si(e,1,a),u_intensity:u}),Is=(g,e,a,u)=>{const h=l.H();l.aP(h,0,g.width,g.height,0,0,1);const f=g.context.gl;return{u_matrix:h,u_world:[f.drawingBufferWidth,f.drawingBufferHeight],u_image:a,u_color_ramp:u,u_opacity:e.paint.get("heatmap-opacity")}};function vl(g,e){const a=Math.pow(2,e.canonical.z),u=e.canonical.y;return[new l.Z(0,u/a).toLngLat().lat,new l.Z(0,(u+1)/a).toLngLat().lat]}const js=(g,e,a,u)=>{const h=g.transform;return{u_matrix:bl(g,e,a,u),u_ratio:1/Si(e,1,h.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Il=(g,e,a,u,h)=>l.e(js(g,e,a,h),{u_image:0,u_image_height:u}),bs=(g,e,a,u,h)=>{const f=g.transform,C=Ic(e,f);return{u_matrix:bl(g,e,a,h),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Si(e,1,f.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[C,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},hu=(g,e,a,u,h,f)=>{const C=g.lineAtlas,E=Ic(e,g.transform),Q=a.layout.get("line-cap")==="round",D=C.getDash(u.from,Q),R=C.getDash(u.to,Q),z=D.width*h.fromScale,ee=R.width*h.toScale;return l.e(js(g,e,a,f),{u_patternscale_a:[E/z,-D.height/2],u_patternscale_b:[E/ee,-R.height/2],u_sdfgamma:C.width/(256*Math.min(z,ee)*g.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:R.y,u_mix:h.t})};function Ic(g,e){return 1/Si(g,1,e.tileZoom)}function bl(g,e,a,u){return g.translatePosMatrix(u?u.posMatrix:e.tileID.posMatrix,e,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const xl=(g,e,a,u,h)=>{return{u_matrix:g,u_tl_parent:e,u_scale_parent:a,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*h.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:h.paint.get("raster-brightness-min"),u_brightness_high:h.paint.get("raster-brightness-max"),u_saturation_factor:(C=h.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(f=h.paint.get("raster-contrast"),f>0?1/(1-f):1+f),u_spin_weights:gh(h.paint.get("raster-hue-rotate"))};var f,C};function gh(g){g*=Math.PI/180;const e=Math.sin(g),a=Math.cos(g);return[(2*a+1)/3,(-Math.sqrt(3)*e-a+1)/3,(Math.sqrt(3)*e-a+1)/3]}const bc=(g,e,a,u,h,f,C,E,Q,D,R,z,ee,oe)=>{const ce=C.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:ce.width/ce.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:Q,u_coord_matrix:D,u_is_text:+z,u_pitch_with_map:+u,u_is_along_line:h,u_is_variable_anchor:f,u_texsize:ee,u_texture:0,u_translation:R,u_pitched_scale:oe}},Do=(g,e,a,u,h,f,C,E,Q,D,R,z,ee,oe,ce)=>{const ve=C.transform;return l.e(bc(g,e,a,u,h,f,C,E,Q,D,R,z,ee,ce),{u_gamma_scale:u?Math.cos(ve._pitch)*ve.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+oe})},wl=(g,e,a,u,h,f,C,E,Q,D,R,z,ee,oe)=>l.e(Do(g,e,a,u,h,f,C,E,Q,D,R,!0,z,!0,oe),{u_texsize_icon:ee,u_texture_icon:1}),Cl=(g,e,a)=>({u_matrix:g,u_opacity:e,u_color:a}),xc=(g,e,a,u,h,f)=>l.e(function(C,E,Q,D){const R=Q.imageManager.getPattern(C.from.toString()),z=Q.imageManager.getPattern(C.to.toString()),{width:ee,height:oe}=Q.imageManager.getPixelSize(),ce=Math.pow(2,D.tileID.overscaledZ),ve=D.tileSize*Math.pow(2,Q.transform.tileZoom)/ce,we=ve*(D.tileID.canonical.x+D.tileID.wrap*ce),Qe=ve*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:z.tl,u_pattern_br_b:z.br,u_texsize:[ee,oe],u_mix:E.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:z.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Si(D,1,Q.transform.tileZoom),u_pixel_coord_upper:[we>>16,Qe>>16],u_pixel_coord_lower:[65535&we,65535&Qe]}}(u,f,a,h),{u_matrix:g,u_opacity:e}),wc={fillExtrusion:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_lightpos:new l.aN(g,e.u_lightpos),u_lightintensity:new l.aI(g,e.u_lightintensity),u_lightcolor:new l.aN(g,e.u_lightcolor),u_vertical_gradient:new l.aI(g,e.u_vertical_gradient),u_opacity:new l.aI(g,e.u_opacity)}),fillExtrusionPattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_lightpos:new l.aN(g,e.u_lightpos),u_lightintensity:new l.aI(g,e.u_lightintensity),u_lightcolor:new l.aN(g,e.u_lightcolor),u_vertical_gradient:new l.aI(g,e.u_vertical_gradient),u_height_factor:new l.aI(g,e.u_height_factor),u_image:new l.aH(g,e.u_image),u_texsize:new l.aO(g,e.u_texsize),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade),u_opacity:new l.aI(g,e.u_opacity)}),fill:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix)}),fillPattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_image:new l.aH(g,e.u_image),u_texsize:new l.aO(g,e.u_texsize),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade)}),fillOutline:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_world:new l.aO(g,e.u_world)}),fillOutlinePattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_world:new l.aO(g,e.u_world),u_image:new l.aH(g,e.u_image),u_texsize:new l.aO(g,e.u_texsize),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade)}),circle:(g,e)=>({u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_scale_with_map:new l.aH(g,e.u_scale_with_map),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_extrude_scale:new l.aO(g,e.u_extrude_scale),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_matrix:new l.aJ(g,e.u_matrix)}),collisionBox:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_pixel_extrude_scale:new l.aO(g,e.u_pixel_extrude_scale)}),collisionCircle:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_inv_matrix:new l.aJ(g,e.u_inv_matrix),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_viewport_size:new l.aO(g,e.u_viewport_size)}),debug:(g,e)=>({u_color:new l.aL(g,e.u_color),u_matrix:new l.aJ(g,e.u_matrix),u_overlay:new l.aH(g,e.u_overlay),u_overlay_scale:new l.aI(g,e.u_overlay_scale)}),clippingMask:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix)}),heatmap:(g,e)=>({u_extrude_scale:new l.aI(g,e.u_extrude_scale),u_intensity:new l.aI(g,e.u_intensity),u_matrix:new l.aJ(g,e.u_matrix)}),heatmapTexture:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_world:new l.aO(g,e.u_world),u_image:new l.aH(g,e.u_image),u_color_ramp:new l.aH(g,e.u_color_ramp),u_opacity:new l.aI(g,e.u_opacity)}),hillshade:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_image:new l.aH(g,e.u_image),u_latrange:new l.aO(g,e.u_latrange),u_light:new l.aO(g,e.u_light),u_shadow:new l.aL(g,e.u_shadow),u_highlight:new l.aL(g,e.u_highlight),u_accent:new l.aL(g,e.u_accent)}),hillshadePrepare:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_image:new l.aH(g,e.u_image),u_dimension:new l.aO(g,e.u_dimension),u_zoom:new l.aI(g,e.u_zoom),u_unpack:new l.aK(g,e.u_unpack)}),line:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels)}),lineGradient:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels),u_image:new l.aH(g,e.u_image),u_image_height:new l.aI(g,e.u_image_height)}),linePattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_texsize:new l.aO(g,e.u_texsize),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_image:new l.aH(g,e.u_image),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels),u_scale:new l.aN(g,e.u_scale),u_fade:new l.aI(g,e.u_fade)}),lineSDF:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ratio:new l.aI(g,e.u_ratio),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_units_to_pixels:new l.aO(g,e.u_units_to_pixels),u_patternscale_a:new l.aO(g,e.u_patternscale_a),u_patternscale_b:new l.aO(g,e.u_patternscale_b),u_sdfgamma:new l.aI(g,e.u_sdfgamma),u_image:new l.aH(g,e.u_image),u_tex_y_a:new l.aI(g,e.u_tex_y_a),u_tex_y_b:new l.aI(g,e.u_tex_y_b),u_mix:new l.aI(g,e.u_mix)}),raster:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_tl_parent:new l.aO(g,e.u_tl_parent),u_scale_parent:new l.aI(g,e.u_scale_parent),u_buffer_scale:new l.aI(g,e.u_buffer_scale),u_fade_t:new l.aI(g,e.u_fade_t),u_opacity:new l.aI(g,e.u_opacity),u_image0:new l.aH(g,e.u_image0),u_image1:new l.aH(g,e.u_image1),u_brightness_low:new l.aI(g,e.u_brightness_low),u_brightness_high:new l.aI(g,e.u_brightness_high),u_saturation_factor:new l.aI(g,e.u_saturation_factor),u_contrast_factor:new l.aI(g,e.u_contrast_factor),u_spin_weights:new l.aN(g,e.u_spin_weights)}),symbolIcon:(g,e)=>({u_is_size_zoom_constant:new l.aH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(g,e.u_is_size_feature_constant),u_size_t:new l.aI(g,e.u_size_t),u_size:new l.aI(g,e.u_size),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_pitch:new l.aI(g,e.u_pitch),u_rotate_symbol:new l.aH(g,e.u_rotate_symbol),u_aspect_ratio:new l.aI(g,e.u_aspect_ratio),u_fade_change:new l.aI(g,e.u_fade_change),u_matrix:new l.aJ(g,e.u_matrix),u_label_plane_matrix:new l.aJ(g,e.u_label_plane_matrix),u_coord_matrix:new l.aJ(g,e.u_coord_matrix),u_is_text:new l.aH(g,e.u_is_text),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_is_along_line:new l.aH(g,e.u_is_along_line),u_is_variable_anchor:new l.aH(g,e.u_is_variable_anchor),u_texsize:new l.aO(g,e.u_texsize),u_texture:new l.aH(g,e.u_texture),u_translation:new l.aO(g,e.u_translation),u_pitched_scale:new l.aI(g,e.u_pitched_scale)}),symbolSDF:(g,e)=>({u_is_size_zoom_constant:new l.aH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(g,e.u_is_size_feature_constant),u_size_t:new l.aI(g,e.u_size_t),u_size:new l.aI(g,e.u_size),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_pitch:new l.aI(g,e.u_pitch),u_rotate_symbol:new l.aH(g,e.u_rotate_symbol),u_aspect_ratio:new l.aI(g,e.u_aspect_ratio),u_fade_change:new l.aI(g,e.u_fade_change),u_matrix:new l.aJ(g,e.u_matrix),u_label_plane_matrix:new l.aJ(g,e.u_label_plane_matrix),u_coord_matrix:new l.aJ(g,e.u_coord_matrix),u_is_text:new l.aH(g,e.u_is_text),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_is_along_line:new l.aH(g,e.u_is_along_line),u_is_variable_anchor:new l.aH(g,e.u_is_variable_anchor),u_texsize:new l.aO(g,e.u_texsize),u_texture:new l.aH(g,e.u_texture),u_gamma_scale:new l.aI(g,e.u_gamma_scale),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_is_halo:new l.aH(g,e.u_is_halo),u_translation:new l.aO(g,e.u_translation),u_pitched_scale:new l.aI(g,e.u_pitched_scale)}),symbolTextAndIcon:(g,e)=>({u_is_size_zoom_constant:new l.aH(g,e.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(g,e.u_is_size_feature_constant),u_size_t:new l.aI(g,e.u_size_t),u_size:new l.aI(g,e.u_size),u_camera_to_center_distance:new l.aI(g,e.u_camera_to_center_distance),u_pitch:new l.aI(g,e.u_pitch),u_rotate_symbol:new l.aH(g,e.u_rotate_symbol),u_aspect_ratio:new l.aI(g,e.u_aspect_ratio),u_fade_change:new l.aI(g,e.u_fade_change),u_matrix:new l.aJ(g,e.u_matrix),u_label_plane_matrix:new l.aJ(g,e.u_label_plane_matrix),u_coord_matrix:new l.aJ(g,e.u_coord_matrix),u_is_text:new l.aH(g,e.u_is_text),u_pitch_with_map:new l.aH(g,e.u_pitch_with_map),u_is_along_line:new l.aH(g,e.u_is_along_line),u_is_variable_anchor:new l.aH(g,e.u_is_variable_anchor),u_texsize:new l.aO(g,e.u_texsize),u_texsize_icon:new l.aO(g,e.u_texsize_icon),u_texture:new l.aH(g,e.u_texture),u_texture_icon:new l.aH(g,e.u_texture_icon),u_gamma_scale:new l.aI(g,e.u_gamma_scale),u_device_pixel_ratio:new l.aI(g,e.u_device_pixel_ratio),u_is_halo:new l.aH(g,e.u_is_halo),u_translation:new l.aO(g,e.u_translation),u_pitched_scale:new l.aI(g,e.u_pitched_scale)}),background:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_opacity:new l.aI(g,e.u_opacity),u_color:new l.aL(g,e.u_color)}),backgroundPattern:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_opacity:new l.aI(g,e.u_opacity),u_image:new l.aH(g,e.u_image),u_pattern_tl_a:new l.aO(g,e.u_pattern_tl_a),u_pattern_br_a:new l.aO(g,e.u_pattern_br_a),u_pattern_tl_b:new l.aO(g,e.u_pattern_tl_b),u_pattern_br_b:new l.aO(g,e.u_pattern_br_b),u_texsize:new l.aO(g,e.u_texsize),u_mix:new l.aI(g,e.u_mix),u_pattern_size_a:new l.aO(g,e.u_pattern_size_a),u_pattern_size_b:new l.aO(g,e.u_pattern_size_b),u_scale_a:new l.aI(g,e.u_scale_a),u_scale_b:new l.aI(g,e.u_scale_b),u_pixel_coord_upper:new l.aO(g,e.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(g,e.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(g,e.u_tile_units_to_pixels)}),terrain:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_texture:new l.aH(g,e.u_texture),u_ele_delta:new l.aI(g,e.u_ele_delta),u_fog_matrix:new l.aJ(g,e.u_fog_matrix),u_fog_color:new l.aL(g,e.u_fog_color),u_fog_ground_blend:new l.aI(g,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(g,e.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(g,e.u_horizon_color),u_horizon_fog_blend:new l.aI(g,e.u_horizon_fog_blend)}),terrainDepth:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_ele_delta:new l.aI(g,e.u_ele_delta)}),terrainCoords:(g,e)=>({u_matrix:new l.aJ(g,e.u_matrix),u_texture:new l.aH(g,e.u_texture),u_terrain_coords_id:new l.aI(g,e.u_terrain_coords_id),u_ele_delta:new l.aI(g,e.u_ele_delta)}),sky:(g,e)=>({u_sky_color:new l.aL(g,e.u_sky_color),u_horizon_color:new l.aL(g,e.u_horizon_color),u_horizon:new l.aI(g,e.u_horizon),u_sky_horizon_blend:new l.aI(g,e.u_sky_horizon_blend)})};class Dr{constructor(e,a,u){this.context=e;const h=e.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bl{constructor(e,a,u,h){this.length=a.length,this.attributes=u,this.itemSize=a.bytesPerElement,this.dynamicDraw=h,this.context=e;const f=e.gl;this.buffer=f.createBuffer(),e.bindVertexBuffer.set(this.buffer),f.bufferData(f.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,a){for(let u=0;u<this.attributes.length;u++){const h=a.attributes[this.attributes[u].name];h!==void 0&&e.enableVertexAttribArray(h)}}setVertexAttribPointers(e,a,u){for(let h=0;h<this.attributes.length;h++){const f=this.attributes[h],C=a.attributes[f.name];C!==void 0&&e.vertexAttribPointer(C,f.components,e[Cc[f.type]],!1,this.itemSize,f.offset+this.itemSize*(u||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ra=new WeakMap;function La(g){var e;if(Ra.has(g))return Ra.get(g);{const a=(e=g.getParameter(g.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Ra.set(g,a),a}}class Oi{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class as extends Oi{getDefault(){return l.aM.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class El extends Oi{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class na extends Oi{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Mo extends Oi{getDefault(){return[!0,!0,!0,!0]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ra extends Oi{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class ph extends Oi{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Au extends Oi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const a=this.current;(e.func!==a.func||e.ref!==a.ref||e.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Bc extends Oi{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class du extends Oi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=e,this.dirty=!1}}class fu extends Oi{getDefault(){return[0,1]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class gu extends Oi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=e,this.dirty=!1}}class pu extends Oi{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ss extends Oi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.BLEND):a.disable(a.BLEND),this.current=e,this.dirty=!1}}class Ec extends Oi{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class mu extends Oi{getDefault(){return l.aM.transparent}set(e){const a=this.current;(e.r!==a.r||e.g!==a.g||e.b!==a.b||e.a!==a.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Js extends Oi{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Ys extends Oi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;e?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=e,this.dirty=!1}}class xs extends Oi{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Qc extends Oi{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class vr extends Oi{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Sc extends Oi{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class kc extends Oi{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const a=this.current;(e[0]!==a[0]||e[1]!==a[1]||e[2]!==a[2]||e[3]!==a[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class To extends Oi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Fa extends Oi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class os extends Oi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Po extends Oi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class va extends Oi{getDefault(){return null}set(e){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Mr extends Oi{getDefault(){return null}set(e){var a;if(e===this.current&&!this.dirty)return;const u=this.gl;La(u)?u.bindVertexArray(e):(a=u.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ql extends Oi{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Ks extends Oi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Sl extends Oi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class ws extends Oi{constructor(e,a){super(e),this.context=e,this.parent=a}getDefault(){return null}}class Cs extends ws{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class kl extends ws{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class yu extends ws{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class mh{constructor(e,a,u,h,f){this.context=e,this.width=a,this.height=u;const C=e.gl,E=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Cs(e,E),h)this.depthAttachment=f?new yu(e,E):new kl(e,E);else if(f)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,a=this.colorAttachment.get();if(a&&e.deleteTexture(a),this.depthAttachment){const u=this.depthAttachment.get();u&&e.deleteRenderbuffer(u)}e.deleteFramebuffer(this.framebuffer)}}class Sn{constructor(e,a,u){this.blendFunction=e,this.blendColor=a,this.mask=u}}Sn.Replace=[1,0],Sn.disabled=new Sn(Sn.Replace,l.aM.transparent,[!1,!1,!1,!1]),Sn.unblended=new Sn(Sn.Replace,l.aM.transparent,[!0,!0,!0,!0]),Sn.alphaBlended=new Sn([1,771],l.aM.transparent,[!0,!0,!0,!0]);class yh{constructor(e){var a,u;if(this.gl=e,this.clearColor=new as(this),this.clearDepth=new El(this),this.clearStencil=new na(this),this.colorMask=new Mo(this),this.depthMask=new ra(this),this.stencilMask=new ph(this),this.stencilFunc=new Au(this),this.stencilOp=new Bc(this),this.stencilTest=new du(this),this.depthRange=new fu(this),this.depthTest=new gu(this),this.depthFunc=new pu(this),this.blend=new ss(this),this.blendFunc=new Ec(this),this.blendColor=new mu(this),this.blendEquation=new Js(this),this.cullFace=new Ys(this),this.cullFaceSide=new xs(this),this.frontFace=new Qc(this),this.program=new vr(this),this.activeTexture=new Sc(this),this.viewport=new kc(this),this.bindFramebuffer=new To(this),this.bindRenderbuffer=new Fa(this),this.bindTexture=new os(this),this.bindVertexBuffer=new Po(this),this.bindElementBuffer=new va(this),this.bindVertexArray=new Mr(this),this.pixelStoreUnpack=new Ql(this),this.pixelStoreUnpackPremultiplyAlpha=new Ks(this),this.pixelStoreUnpackFlipY=new Sl(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),La(e)){this.HALF_FLOAT=e.HALF_FLOAT;const h=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=e.RGBA16F)!==null&&a!==void 0?a:h==null?void 0:h.RGBA16F_EXT,this.RGB16F=(u=e.RGB16F)!==null&&u!==void 0?u:h==null?void 0:h.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const h=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=h==null?void 0:h.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,a){return new Dr(this,e,a)}createVertexBuffer(e,a,u){return new Bl(this,e,a,u)}createRenderbuffer(e,a,u){const h=this.gl,f=h.createRenderbuffer();return this.bindRenderbuffer.set(f),h.renderbufferStorage(h.RENDERBUFFER,e,a,u),this.bindRenderbuffer.set(null),f}createFramebuffer(e,a,u,h){return new mh(this,e,a,u,h)}clear({color:e,depth:a,stencil:u}){const h=this.gl;let f=0;e&&(f|=h.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(f|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),u!==void 0&&(f|=h.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),h.clear(f)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){l.aE(e.blendFunction,Sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return La(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var a;return La(this.gl)?this.gl.deleteVertexArray(e):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class ki{constructor(e,a,u){this.func=e,this.mask=a,this.range=u}}ki.ReadOnly=!1,ki.ReadWrite=!0,ki.disabled=new ki(519,ki.ReadOnly,[0,1]);const Dc=7680;class sn{constructor(e,a,u,h,f,C){this.test=e,this.ref=a,this.mask=u,this.fail=h,this.depthFail=f,this.pass=C}}sn.disabled=new sn({func:519,mask:0},0,0,Dc,Dc,Dc);class Yi{constructor(e,a,u){this.enable=e,this.mode=a,this.frontFace=u}}let Bs;function Es(g,e,a,u,h){const f=g.context,C=f.gl,E=g.useProgram("collisionBox"),Q=[];let D=0,R=0;for(let Qe=0;Qe<u.length;Qe++){const Me=u[Qe],fe=e.getTile(Me).getBucket(a);if(!fe)continue;const Ne=h?fe.textCollisionBox:fe.iconCollisionBox,Ve=fe.collisionCircleArray;if(Ve.length>0){const Je=l.H();l.aQ(Je,fe.placementInvProjMatrix,g.transform.glCoordMatrix),l.aQ(Je,Je,fe.placementViewportMatrix),Q.push({circleArray:Ve,circleOffset:R,transform:Me.posMatrix,invTransform:Je,coord:Me}),D+=Ve.length/4,R=D}Ne&&E.draw(f,C.LINES,ki.disabled,sn.disabled,g.colorModeForRenderPass(),Yi.disabled,{u_matrix:Me.posMatrix,u_pixel_extrude_scale:[1/(z=g.transform).width,1/z.height]},g.style.map.terrain&&g.style.map.terrain.getTerrainData(Me),a.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,null,g.transform.zoom,null,null,Ne.collisionVertexBuffer)}var z;if(!h||!Q.length)return;const ee=g.useProgram("collisionCircle"),oe=new l.aR;oe.resize(4*D),oe._trim();let ce=0;for(const Qe of Q)for(let Me=0;Me<Qe.circleArray.length/4;Me++){const fe=4*Me,Ne=Qe.circleArray[fe+0],Ve=Qe.circleArray[fe+1],Je=Qe.circleArray[fe+2],At=Qe.circleArray[fe+3];oe.emplace(ce++,Ne,Ve,Je,At,0),oe.emplace(ce++,Ne,Ve,Je,At,1),oe.emplace(ce++,Ne,Ve,Je,At,2),oe.emplace(ce++,Ne,Ve,Je,At,3)}(!Bs||Bs.length<2*D)&&(Bs=function(Qe){const Me=2*Qe,fe=new l.aT;fe.resize(Me),fe._trim();for(let Ne=0;Ne<Me;Ne++){const Ve=6*Ne;fe.uint16[Ve+0]=4*Ne+0,fe.uint16[Ve+1]=4*Ne+1,fe.uint16[Ve+2]=4*Ne+2,fe.uint16[Ve+3]=4*Ne+2,fe.uint16[Ve+4]=4*Ne+3,fe.uint16[Ve+5]=4*Ne+0}return fe}(D));const ve=f.createIndexBuffer(Bs,!0),we=f.createVertexBuffer(oe,l.aS.members,!0);for(const Qe of Q){const Me=Pa(Qe.transform,Qe.invTransform,g.transform);ee.draw(f,C.TRIANGLES,ki.disabled,sn.disabled,g.colorModeForRenderPass(),Yi.disabled,Me,g.style.map.terrain&&g.style.map.terrain.getTerrainData(Qe.coord),a.id,we,ve,l.a0.simpleSegment(0,2*Qe.circleOffset,Qe.circleArray.length,Qe.circleArray.length/2),null,g.transform.zoom,null,null,null)}we.destroy(),ve.destroy()}Yi.disabled=new Yi(!1,1029,2305),Yi.backCCW=new Yi(!0,1029,2305);const Dl=l.an(new Float32Array(16));function Qs(g,e,a,u,h,f){const{horizontalAlign:C,verticalAlign:E}=l.au(g);return new l.P((-(C-.5)*e/h+u[0])*f,(-(E-.5)*a/h+u[1])*f)}function Ss(g,e,a,u,h,f){const C=e.tileAnchorPoint.add(new l.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let E=u.mult(f);a||(E=E.rotate(-h));const Q=C.add(E);return Ie(Q.x,Q.y,e.labelPlaneMatrix,e.getElevation).point}if(a){const E=it(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(g),Q=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(u.rotate(Q))}return g.add(u)}function ar(g,e,a,u,h,f,C,E,Q,D,R,z,ee,oe){const ce=g.text.placedSymbolArray,ve=g.text.dynamicLayoutVertexArray,we=g.icon.dynamicLayoutVertexArray,Qe={};ve.clear();for(let Me=0;Me<ce.length;Me++){const fe=ce.get(Me),Ne=fe.hidden||!fe.crossTileID||g.allowVerticalPlacement&&!fe.placedOrientation?null:u[fe.crossTileID];if(Ne){const Ve=new l.P(fe.anchorX,fe.anchorY),Je={getElevation:oe,width:h.width,height:h.height,labelPlaneMatrix:f,lineVertexArray:null,pitchWithMap:a,projection:R,projectionCache:null,tileAnchorPoint:Ve,translation:z,unwrappedTileID:ee},At=a?Ie(Ve.x,Ve.y,C,oe):it(Ve.x,Ve.y,Je),Ct=J(h.cameraToCenterDistance,At.signedDistanceFromCamera);let Ft=l.ai(g.textSizeData,Q,fe)*Ct/l.ap;a&&(Ft*=g.tilePixelRatio/E);const{width:Ht,height:Lt,anchor:Mt,textOffset:ei,textBoxScale:bi}=Ne,b=Qs(Mt,Ht,Lt,ei,bi,Ft),I=R.getPitchedTextCorrection(h,Ve.add(new l.P(z[0],z[1])),ee),y=Ss(At.point,Je,e,b,h.angle,I),k=g.allowVerticalPlacement&&fe.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let T=0;T<fe.numGlyphs;T++)l.aj(ve,y,k);D&&fe.associatedIconIndex>=0&&(Qe[fe.associatedIconIndex]={shiftedAnchor:y,angle:k})}else gi(fe.numGlyphs,ve)}if(D){we.clear();const Me=g.icon.placedSymbolArray;for(let fe=0;fe<Me.length;fe++){const Ne=Me.get(fe);if(Ne.hidden)gi(Ne.numGlyphs,we);else{const Ve=Qe[fe];if(Ve)for(let Je=0;Je<Ne.numGlyphs;Je++)l.aj(we,Ve.shiftedAnchor,Ve.angle);else gi(Ne.numGlyphs,we)}}g.icon.dynamicLayoutVertexBuffer.updateData(we)}g.text.dynamicLayoutVertexBuffer.updateData(ve)}function Ml(g,e,a){return a.iconsInText&&e?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Mc(g,e,a,u,h,f,C,E,Q,D,R,z){const ee=g.context,oe=ee.gl,ce=g.transform,ve=Nr(),we=E==="map",Qe=Q==="map",Me=E!=="viewport"&&a.layout.get("symbol-placement")!=="point",fe=we&&!Qe&&!Me,Ne=!Qe&&Me,Ve=!a.layout.get("symbol-sort-key").isConstant();let Je=!1;const At=g.depthModeForSublayer(0,ki.ReadOnly),Ct=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ft=[],Ht=ve.getCircleRadiusCorrection(ce);for(const Lt of u){const Mt=e.getTile(Lt),ei=Mt.getBucket(a);if(!ei)continue;const bi=h?ei.text:ei.icon;if(!bi||!bi.segments.get().length||!bi.hasVisibleVertices)continue;const b=bi.programConfigurations.get(a.id),I=h||ei.sdfIcons,y=h?ei.textSizeData:ei.iconSizeData,k=Qe||ce.pitch!==0,T=g.useProgram(Ml(I,h,ei),b),F=l.ag(y,ce.zoom),$=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Lt);let N,re,K,Z,ge=[0,0],se=null;if(h)re=Mt.glyphAtlasTexture,K=oe.LINEAR,N=Mt.glyphAtlasTexture.size,ei.iconsInText&&(ge=Mt.imageAtlasTexture.size,se=Mt.imageAtlasTexture,Z=k||g.options.rotating||g.options.zooming||y.kind==="composite"||y.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const De=a.layout.get("icon-size").constantOr(0)!==1||ei.iconsNeedLinear;re=Mt.imageAtlasTexture,K=I||g.options.rotating||g.options.zooming||De||k?oe.LINEAR:oe.NEAREST,N=Mt.imageAtlasTexture.size}const X=Si(Mt,1,g.transform.zoom),be=Ne?Lt.posMatrix:Dl,Ce=is(be,Qe,we,g.transform,X),ke=pr(be,Qe,we,g.transform,X),Re=pr(Lt.posMatrix,Qe,we,g.transform,X),qe=ve.translatePosition(g.transform,Mt,f,C),Pe=Ct&&ei.hasTextData(),$e=a.layout.get("icon-text-fit")!=="none"&&Pe&&ei.hasIconData();if(Me){const De=g.style.map.terrain?(et,lt)=>g.style.map.terrain.getElevation(Lt,et,lt):null,Ge=a.layout.get("text-rotation-alignment")==="map";ie(ei,Lt.posMatrix,g,h,Ce,Re,Qe,D,Ge,ve,Lt.toUnwrapped(),ce.width,ce.height,qe,De)}const te=Lt.posMatrix,U=h&&Ct||$e,he=Me||U?Dl:Ce,le=ke,ue=I&&a.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let de;de=I?ei.iconsInText?wl(y.kind,F,fe,Qe,Me,U,g,te,he,le,qe,N,ge,Ht):Do(y.kind,F,fe,Qe,Me,U,g,te,he,le,qe,h,N,!0,Ht):bc(y.kind,F,fe,Qe,Me,U,g,te,he,le,qe,h,N,Ht);const Te={program:T,buffers:bi,uniformValues:de,atlasTexture:re,atlasTextureIcon:se,atlasInterpolation:K,atlasInterpolationIcon:Z,isSDF:I,hasHalo:ue};if(Ve&&ei.canOverlap){Je=!0;const De=bi.segments.get();for(const Ge of De)Ft.push({segments:new l.a0([Ge]),sortKey:Ge.sortKey,state:Te,terrainData:$})}else Ft.push({segments:bi.segments,sortKey:0,state:Te,terrainData:$})}Je&&Ft.sort((Lt,Mt)=>Lt.sortKey-Mt.sortKey);for(const Lt of Ft){const Mt=Lt.state;if(ee.activeTexture.set(oe.TEXTURE0),Mt.atlasTexture.bind(Mt.atlasInterpolation,oe.CLAMP_TO_EDGE),Mt.atlasTextureIcon&&(ee.activeTexture.set(oe.TEXTURE1),Mt.atlasTextureIcon&&Mt.atlasTextureIcon.bind(Mt.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Mt.isSDF){const ei=Mt.uniformValues;Mt.hasHalo&&(ei.u_is_halo=1,Tl(Mt.buffers,Lt.segments,a,g,Mt.program,At,R,z,ei,Lt.terrainData)),ei.u_is_halo=0}Tl(Mt.buffers,Lt.segments,a,g,Mt.program,At,R,z,Mt.uniformValues,Lt.terrainData)}}function Tl(g,e,a,u,h,f,C,E,Q,D){const R=u.context;h.draw(R,R.gl.TRIANGLES,f,C,E,Yi.disabled,Q,D,a.id,g.layoutVertexBuffer,g.indexBuffer,e,a.paint,u.transform.zoom,g.programConfigurations.get(a.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function ks(g,e,a,u){const h=g.context,f=h.gl,C=sn.disabled,E=new Sn([f.ONE,f.ONE],l.aM.transparent,[!0,!0,!0,!0]),Q=e.getBucket(a);if(!Q)return;const D=u.key;let R=a.heatmapFbos.get(D);R||(R=Ia(h,e.tileSize,e.tileSize),a.heatmapFbos.set(D,R)),h.bindFramebuffer.set(R.framebuffer),h.viewport.set([0,0,e.tileSize,e.tileSize]),h.clear({color:l.aM.transparent});const z=Q.programConfigurations.get(a.id),ee=g.useProgram("heatmap",z),oe=g.style.map.terrain.getTerrainData(u);ee.draw(h,f.TRIANGLES,ki.disabled,C,E,Yi.disabled,Wn(u.posMatrix,e,g.transform.zoom,a.paint.get("heatmap-intensity")),oe,a.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,a.paint,g.transform.zoom,z)}function Ds(g,e,a){const u=g.context,h=u.gl;u.setColorMode(g.colorModeForRenderPass());const f=Ms(u,e),C=a.key,E=e.heatmapFbos.get(C);E&&(u.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,E.colorAttachment.get()),u.activeTexture.set(h.TEXTURE1),f.bind(h.LINEAR,h.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(u,h.TRIANGLES,ki.disabled,sn.disabled,g.colorModeForRenderPass(),Yi.disabled,Is(g,e,0,1),null,e.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,e.paint,g.transform.zoom),E.destroy(),e.heatmapFbos.delete(C))}function Ia(g,e,a){var u,h;const f=g.gl,C=f.createTexture();f.bindTexture(f.TEXTURE_2D,C),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);const E=(u=g.HALF_FLOAT)!==null&&u!==void 0?u:f.UNSIGNED_BYTE,Q=(h=g.RGBA16F)!==null&&h!==void 0?h:f.RGBA;f.texImage2D(f.TEXTURE_2D,0,Q,e,a,0,f.RGBA,E,null);const D=g.createFramebuffer(e,a,!1,!1);return D.colorAttachment.set(C),D}function Ms(g,e){return e.colorRampTexture||(e.colorRampTexture=new mt(g,e.colorRamp,g.gl.RGBA)),e.colorRampTexture}function Ro(g,e,a,u,h){if(!a||!u||!u.imageAtlas)return;const f=u.imageAtlas.patternPositions;let C=f[a.to.toString()],E=f[a.from.toString()];if(!C&&E&&(C=E),!E&&C&&(E=C),!C||!E){const Q=h.getPaintProperty(e);C=f[Q],E=f[Q]}C&&E&&g.setConstantPatternPositions(C,E)}function $s(g,e,a,u,h,f,C){const E=g.context.gl,Q="fill-pattern",D=a.paint.get(Q),R=D&&D.constantOr(1),z=a.getCrossfadeParameters();let ee,oe,ce,ve,we;C?(oe=R&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=E.LINES):(oe=R?"fillPattern":"fill",ee=E.TRIANGLES);const Qe=D.constantOr(null);for(const Me of u){const fe=e.getTile(Me);if(R&&!fe.patternsLoaded())continue;const Ne=fe.getBucket(a);if(!Ne)continue;const Ve=Ne.programConfigurations.get(a.id),Je=g.useProgram(oe,Ve),At=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Me);R&&(g.context.activeTexture.set(E.TEXTURE0),fe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Ve.updatePaintBuffers(z)),Ro(Ve,Q,Qe,fe,a);const Ct=At?Me:null,Ft=g.translatePosMatrix(Ct?Ct.posMatrix:Me.posMatrix,fe,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(C){ve=Ne.indexBuffer2,we=Ne.segments2;const Ht=[E.drawingBufferWidth,E.drawingBufferHeight];ce=oe==="fillOutlinePattern"&&R?ko(Ft,g,z,fe,Ht):dh(Ft,Ht)}else ve=Ne.indexBuffer,we=Ne.segments,ce=R?vs(Ft,g,z,fe):rs(Ft);Je.draw(g.context,ee,h,g.stencilModeForClipping(Me),f,Yi.disabled,ce,At,a.id,Ne.layoutVertexBuffer,ve,we,a.paint,g.transform.zoom,Ve)}}function ba(g,e,a,u,h,f,C){const E=g.context,Q=E.gl,D="fill-extrusion-pattern",R=a.paint.get(D),z=R.constantOr(1),ee=a.getCrossfadeParameters(),oe=a.paint.get("fill-extrusion-opacity"),ce=R.constantOr(null);for(const ve of u){const we=e.getTile(ve),Qe=we.getBucket(a);if(!Qe)continue;const Me=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ve),fe=Qe.programConfigurations.get(a.id),Ne=g.useProgram(z?"fillExtrusionPattern":"fillExtrusion",fe);z&&(g.context.activeTexture.set(Q.TEXTURE0),we.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),fe.updatePaintBuffers(ee)),Ro(fe,D,ce,we,a);const Ve=g.translatePosMatrix(ve.posMatrix,we,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Je=a.paint.get("fill-extrusion-vertical-gradient"),At=z?_a(Ve,g,Je,oe,ve,ee,we):So(Ve,g,Je,oe);Ne.draw(E,E.gl.TRIANGLES,h,f,C,Yi.backCCW,At,Me,a.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,a.paint,g.transform.zoom,fe,g.style.map.terrain&&Qe.centroidVertexBuffer)}}function Ts(g,e,a,u,h,f,C){const E=g.context,Q=E.gl,D=a.fbo;if(!D)return;const R=g.useProgram("hillshade"),z=g.style.map.terrain&&g.style.map.terrain.getTerrainData(e);E.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,D.colorAttachment.get()),R.draw(E,Q.TRIANGLES,h,f,C,Yi.disabled,((ee,oe,ce,ve)=>{const we=ce.paint.get("hillshade-shadow-color"),Qe=ce.paint.get("hillshade-highlight-color"),Me=ce.paint.get("hillshade-accent-color");let fe=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=ee.transform.angle);const Ne=!ee.options.moving;return{u_matrix:ve?ve.posMatrix:ee.transform.calculatePosMatrix(oe.tileID.toUnwrapped(),Ne),u_image:0,u_latrange:vl(0,oe.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),fe],u_shadow:we,u_highlight:Qe,u_accent:Me}})(g,a,u,z?e:null),z,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function Tc(g,e,a,u,h,f){const C=g.context,E=C.gl,Q=e.dem;if(Q&&Q.data){const D=Q.dim,R=Q.stride,z=Q.getPixels();if(C.activeTexture.set(E.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||g.getTileTexture(R),e.demTexture){const oe=e.demTexture;oe.update(z,{premultiply:!1}),oe.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else e.demTexture=new mt(C,z,E.RGBA,{premultiply:!1}),e.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);C.activeTexture.set(E.TEXTURE0);let ee=e.fbo;if(!ee){const oe=new mt(C,{width:D,height:D,data:null},E.RGBA);oe.bind(E.LINEAR,E.CLAMP_TO_EDGE),ee=e.fbo=C.createFramebuffer(D,D,!0,!1),ee.colorAttachment.set(oe.texture)}C.bindFramebuffer.set(ee.framebuffer),C.viewport.set([0,0,D,D]),g.useProgram("hillshadePrepare").draw(C,E.TRIANGLES,u,h,f,Yi.disabled,((oe,ce)=>{const ve=ce.stride,we=l.H();return l.aP(we,0,l.X,-l.X,0,0,1),l.J(we,we,[0,-l.X,0]),{u_matrix:we,u_image:1,u_dimension:[ve,ve],u_zoom:oe.overscaledZ,u_unpack:ce.getUnpackVector()}})(e.tileID,Q),null,a.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function Pl(g,e,a,u,h,f){const C=u.paint.get("raster-fade-duration");if(!f&&C>0){const E=q.now(),Q=(E-g.timeAdded)/C,D=e?(E-e.timeAdded)/C:-1,R=a.getSource(),z=h.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),ee=!e||Math.abs(e.tileID.overscaledZ-z)>Math.abs(g.tileID.overscaledZ-z),oe=ee&&g.refreshedUponExpiration?1:l.ac(ee?Q:1-D,0,1);return g.refreshedUponExpiration&&Q>=1&&(g.refreshedUponExpiration=!1),e?{opacity:1,mix:1-oe}:{opacity:oe,mix:0}}return{opacity:1,mix:0}}const Vi=new l.aM(1,0,0,1),Lo=new l.aM(0,1,0,1),_u=new l.aM(0,0,1,1),Pc=new l.aM(1,0,1,1),Zs=new l.aM(0,1,1,1);function vu(g,e,a,u){Fo(g,0,e+a/2,g.transform.width,a,u)}function Iu(g,e,a,u){Fo(g,e-a/2,0,a,g.transform.height,u)}function Fo(g,e,a,u,h,f){const C=g.context,E=C.gl;E.enable(E.SCISSOR_TEST),E.scissor(e*g.pixelRatio,a*g.pixelRatio,u*g.pixelRatio,h*g.pixelRatio),C.clear({color:f}),E.disable(E.SCISSOR_TEST)}function bu(g,e,a){const u=g.context,h=u.gl,f=a.posMatrix,C=g.useProgram("debug"),E=ki.disabled,Q=sn.disabled,D=g.colorModeForRenderPass(),R="$debug",z=g.style.map.terrain&&g.style.map.terrain.getTerrainData(a);u.activeTexture.set(h.TEXTURE0);const ee=e.getTileByID(a.key).latestRawTileData,oe=Math.floor((ee&&ee.byteLength||0)/1024),ce=e.getTile(a).tileSize,ve=512/Math.min(ce,512)*(a.overscaledZ/g.transform.zoom)*.5;let we=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(we+=` => ${a.overscaledZ}`),function(Qe,Me){Qe.initDebugOverlayCanvas();const fe=Qe.debugOverlayCanvas,Ne=Qe.context.gl,Ve=Qe.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,fe.width,fe.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Me,5,5),Ve.strokeText(Me,5,5),Qe.debugOverlayTexture.update(fe),Qe.debugOverlayTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE)}(g,`${we} ${oe}kB`),C.draw(u,h.TRIANGLES,E,Q,Sn.alphaBlended,Yi.disabled,Hs(f,l.aM.transparent,ve),null,R,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),C.draw(u,h.LINE_STRIP,E,Q,D,Yi.disabled,Hs(f,l.aM.red),z,R,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function zo(g,e,a){const u=g.context,h=u.gl,f=g.colorModeForRenderPass(),C=new ki(h.LEQUAL,ki.ReadWrite,g.depthRangeFor3D),E=g.useProgram("terrain"),Q=e.getTerrainMesh();u.bindFramebuffer.set(null),u.viewport.set([0,0,g.width,g.height]);for(const D of a){const R=g.renderToTexture.getTexture(D),z=e.getTerrainData(D.tileID);u.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,R.texture);const ee=g.transform.calculatePosMatrix(D.tileID.toUnwrapped()),oe=e.getMeshFrameDelta(g.transform.zoom),ce=g.transform.calculateFogMatrix(D.tileID.toUnwrapped()),ve=Qo(ee,oe,ce,g.style.sky,g.transform.pitch);E.draw(u,h.TRIANGLES,C,sn.disabled,f,Yi.backCCW,ve,z,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}class Ws{constructor(e,a,u){this.vertexBuffer=e,this.indexBuffer=a,this.segments=u}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Go{constructor(e,a){this.context=new yh(e),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ii.maxUnderzooming+ii.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Eo}resize(e,a,u){if(this.width=Math.floor(e*u),this.height=Math.floor(a*u),this.pixelRatio=u,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style._order)this.style._layers[h].resize()}setup(){const e=this.context,a=new l.aX;a.emplaceBack(0,0),a.emplaceBack(l.X,0),a.emplaceBack(0,l.X),a.emplaceBack(l.X,l.X),this.tileExtentBuffer=e.createVertexBuffer(a,_s.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const u=new l.aX;u.emplaceBack(0,0),u.emplaceBack(l.X,0),u.emplaceBack(0,l.X),u.emplaceBack(l.X,l.X),this.debugBuffer=e.createVertexBuffer(u,_s.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const h=new l.$;h.emplaceBack(0,0,0,0),h.emplaceBack(l.X,0,l.X,0),h.emplaceBack(0,l.X,0,l.X),h.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=e.createVertexBuffer(h,fi.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const f=new l.aX;f.emplaceBack(0,0),f.emplaceBack(1,0),f.emplaceBack(0,1),f.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(f,_s.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const C=new l.aZ;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(C);const E=new l.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(E);const Q=this.context.gl;this.stencilClearMode=new sn({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO)}clearStencil(){const e=this.context,a=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const u=l.H();l.aP(u,0,this.width,this.height,0,0,1),l.K(u,u,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,a.TRIANGLES,ki.disabled,this.stencilClearMode,Sn.disabled,Yi.disabled,Ln(u),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,a){if(this.currentStencilSource===e.source||!e.isTileClipped()||!a||!a.length)return;this.currentStencilSource=e.source;const u=this.context,h=u.gl;this.nextStencilID+a.length>256&&this.clearStencil(),u.setColorMode(Sn.disabled),u.setDepthMode(ki.disabled);const f=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of a){const E=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,Q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);f.draw(u,h.TRIANGLES,ki.disabled,new sn({func:h.ALWAYS,mask:0},E,255,h.KEEP,h.KEEP,h.REPLACE),Sn.disabled,Yi.disabled,Ln(C.posMatrix),Q,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,a=this.context.gl;return new sn({func:a.NOTEQUAL,mask:255},e,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(e){const a=this.context.gl;return new sn({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(e){const a=this.context.gl,u=e.sort((C,E)=>E.overscaledZ-C.overscaledZ),h=u[u.length-1].overscaledZ,f=u[0].overscaledZ-h+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();const C={};for(let E=0;E<f;E++)C[E+h]=new sn({func:a.GEQUAL,mask:255},E+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=f,[C,u]}return[{[h]:sn.disabled},u]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Sn([e.CONSTANT_COLOR,e.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Sn.unblended:Sn.alphaBlended}depthModeForSublayer(e,a,u){if(!this.opaquePassEnabledForLayer())return ki.disabled;const h=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ki(u||this.context.gl.LEQUAL,a,[h,h])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,a){this.style=e,this.options=a,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(q.now()),this.imageManager.beginFrame();const u=this.style._order,h=this.style.sourceCaches,f={},C={},E={};for(const Q in h){const D=h[Q];D.used&&D.prepare(this.context),f[Q]=D.getVisibleCoordinates(),C[Q]=f[Q].slice().reverse(),E[Q]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Q=0;Q<u.length;Q++)if(this.style._layers[u[Q]].is3D()){this.opaquePassCutoff=Q;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Q of u){const D=this.style._layers[Q];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const R=C[D.source];(D.type==="custom"||R.length)&&this.renderLayer(this,h[D.source],D,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Q,D){const R=Q.context,z=R.gl,ee=((Qe,Me,fe)=>({u_sky_color:Qe.properties.get("sky-color"),u_horizon_color:Qe.properties.get("horizon-color"),u_horizon:(Me.height/2+Me.getHorizon())*fe,u_sky_horizon_blend:Qe.properties.get("sky-horizon-blend")*Me.height/2*fe}))(D,Q.style.map.transform,Q.pixelRatio),oe=new ki(z.LEQUAL,ki.ReadWrite,[0,1]),ce=sn.disabled,ve=Q.colorModeForRenderPass(),we=Q.useProgram("sky");if(!D.mesh){const Qe=new l.aX;Qe.emplaceBack(-1,-1),Qe.emplaceBack(1,-1),Qe.emplaceBack(1,1),Qe.emplaceBack(-1,1);const Me=new l.aY;Me.emplaceBack(0,1,2),Me.emplaceBack(0,2,3),D.mesh=new Ws(R.createVertexBuffer(Qe,_s.members),R.createIndexBuffer(Me),l.a0.simpleSegment(0,0,Qe.length,Me.length))}we.draw(R,z.TRIANGLES,oe,ce,ve,Yi.disabled,ee,void 0,"sky",D.mesh.vertexBuffer,D.mesh.indexBuffer,D.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){const Q=this.style._layers[u[this.currentLayer]],D=h[Q.source],R=f[Q.source];this._renderTileClippingMasks(Q,R),this.renderLayer(this,D,Q,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){const Q=this.style._layers[u[this.currentLayer]],D=h[Q.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Q))continue;const R=(Q.type==="symbol"?E:C)[Q.source];this._renderTileClippingMasks(Q,f[Q.source]),this.renderLayer(this,D,Q,R)}if(this.options.showTileBoundaries){const Q=function(D,R){let z=null;const ee=Object.values(D._layers).flatMap(we=>we.source&&!we.isHidden(R)?[D.sourceCaches[we.source]]:[]),oe=ee.filter(we=>we.getSource().type==="vector"),ce=ee.filter(we=>we.getSource().type!=="vector"),ve=we=>{(!z||z.getSource().maxzoom<we.getSource().maxzoom)&&(z=we)};return oe.forEach(we=>ve(we)),z||ce.forEach(we=>ve(we)),z}(this.style,this.transform.zoom);Q&&function(D,R,z){for(let ee=0;ee<z.length;ee++)bu(D,R,z[ee])}(this,Q,Q.getVisibleCoordinates())}this.options.showPadding&&function(Q){const D=Q.transform.padding;vu(Q,Q.transform.height-(D.top||0),3,Vi),vu(Q,D.bottom||0,3,Lo),Iu(Q,D.left||0,3,_u),Iu(Q,Q.transform.width-(D.right||0),3,Pc);const R=Q.transform.centerPoint;(function(z,ee,oe,ce){Fo(z,ee-1,oe-10,2,20,ce),Fo(z,ee-10,oe-1,20,2,ce)})(Q,R.x,Q.transform.height-R.y,Zs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,u=this.transform.modelViewProjectionMatrix;let h=this.terrainFacilitator.dirty;h||(h=e?!l.a_(a,u):!l.a$(a,u)),h||(h=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),h&&(l.b0(a,u),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(f,C){const E=f.context,Q=E.gl,D=Sn.unblended,R=new ki(Q.LEQUAL,ki.ReadWrite,[0,1]),z=C.getTerrainMesh(),ee=C.sourceCache.getRenderableTiles(),oe=f.useProgram("terrainDepth");E.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),E.clear({color:l.aM.transparent,depth:1});for(const ce of ee){const ve=C.getTerrainData(ce.tileID),we={u_matrix:f.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_ele_delta:C.getMeshFrameDelta(f.transform.zoom)};oe.draw(E,Q.TRIANGLES,R,sn.disabled,D,Yi.backCCW,we,ve,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain),function(f,C){const E=f.context,Q=E.gl,D=Sn.unblended,R=new ki(Q.LEQUAL,ki.ReadWrite,[0,1]),z=C.getTerrainMesh(),ee=C.getCoordsTexture(),oe=C.sourceCache.getRenderableTiles(),ce=f.useProgram("terrainCoords");E.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),E.clear({color:l.aM.transparent,depth:1}),C.coordsIndex=[];for(const ve of oe){const we=C.getTerrainData(ve.tileID);E.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,ee.texture);const Qe={u_matrix:f.transform.calculatePosMatrix(ve.tileID.toUnwrapped()),u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(f.transform.zoom)};ce.draw(E,Q.TRIANGLES,R,sn.disabled,D,Yi.backCCW,Qe,we,"terrain",z.vertexBuffer,z.indexBuffer,z.segments),C.coordsIndex.push(ve.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain))}renderLayer(e,a,u,h){if(!u.isHidden(this.transform.zoom)&&(u.type==="background"||u.type==="custom"||(h||[]).length))switch(this.id=u.id,u.type){case"symbol":(function(f,C,E,Q,D){if(f.renderPass!=="translucent")return;const R=sn.disabled,z=f.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ee,oe,ce,ve,we,Qe,Me,fe,Ne){const Ve=oe.transform,Je=Nr(),At=we==="map",Ct=Qe==="map";for(const Ft of ee){const Ht=ve.getTile(Ft),Lt=Ht.getBucket(ce);if(!Lt||!Lt.text||!Lt.text.segments.get().length)continue;const Mt=l.ag(Lt.textSizeData,Ve.zoom),ei=Si(Ht,1,oe.transform.zoom),bi=is(Ft.posMatrix,Ct,At,oe.transform,ei),b=ce.layout.get("icon-text-fit")!=="none"&&Lt.hasIconData();if(Mt){const I=Math.pow(2,Ve.zoom-Ht.tileID.overscaledZ),y=oe.style.map.terrain?(T,F)=>oe.style.map.terrain.getElevation(Ft,T,F):null,k=Je.translatePosition(Ve,Ht,Me,fe);ar(Lt,At,Ct,Ne,Ve,bi,Ft.posMatrix,I,Mt,b,Je,k,Ft.toUnwrapped(),y)}}}(Q,f,E,C,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),D),E.paint.get("icon-opacity").constantOr(1)!==0&&Mc(f,C,E,Q,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),R,z),E.paint.get("text-opacity").constantOr(1)!==0&&Mc(f,C,E,Q,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),R,z),C.map.showCollisionBoxes&&(Es(f,C,E,Q,!0),Es(f,C,E,Q,!1))})(e,a,u,h,this.style.placement.variableOffsets);break;case"circle":(function(f,C,E,Q){if(f.renderPass!=="translucent")return;const D=E.paint.get("circle-opacity"),R=E.paint.get("circle-stroke-width"),z=E.paint.get("circle-stroke-opacity"),ee=!E.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(R.constantOr(1)===0||z.constantOr(1)===0))return;const oe=f.context,ce=oe.gl,ve=f.depthModeForSublayer(0,ki.ReadOnly),we=sn.disabled,Qe=f.colorModeForRenderPass(),Me=[];for(let fe=0;fe<Q.length;fe++){const Ne=Q[fe],Ve=C.getTile(Ne),Je=Ve.getBucket(E);if(!Je)continue;const At=Je.programConfigurations.get(E.id),Ct=f.useProgram("circle",At),Ft=Je.layoutVertexBuffer,Ht=Je.indexBuffer,Lt=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Ne),Mt={programConfiguration:At,program:Ct,layoutVertexBuffer:Ft,indexBuffer:Ht,uniformValues:fh(f,Ne,Ve,E),terrainData:Lt};if(ee){const ei=Je.segments.get();for(const bi of ei)Me.push({segments:new l.a0([bi]),sortKey:bi.sortKey,state:Mt})}else Me.push({segments:Je.segments,sortKey:0,state:Mt})}ee&&Me.sort((fe,Ne)=>fe.sortKey-Ne.sortKey);for(const fe of Me){const{programConfiguration:Ne,program:Ve,layoutVertexBuffer:Je,indexBuffer:At,uniformValues:Ct,terrainData:Ft}=fe.state;Ve.draw(oe,ce.TRIANGLES,ve,we,Qe,Yi.disabled,Ct,Ft,E.id,Je,At,fe.segments,E.paint,f.transform.zoom,Ne)}})(e,a,u,h);break;case"heatmap":(function(f,C,E,Q){if(E.paint.get("heatmap-opacity")===0)return;const D=f.context;if(f.style.map.terrain){for(const R of Q){const z=C.getTile(R);C.hasRenderableParent(R)||(f.renderPass==="offscreen"?ks(f,z,E,R):f.renderPass==="translucent"&&Ds(f,E,R))}D.viewport.set([0,0,f.width,f.height])}else f.renderPass==="offscreen"?function(R,z,ee,oe){const ce=R.context,ve=ce.gl,we=sn.disabled,Qe=new Sn([ve.ONE,ve.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(Me,fe,Ne){const Ve=Me.gl;Me.activeTexture.set(Ve.TEXTURE1),Me.viewport.set([0,0,fe.width/4,fe.height/4]);let Je=Ne.heatmapFbos.get(l.aU);Je?(Ve.bindTexture(Ve.TEXTURE_2D,Je.colorAttachment.get()),Me.bindFramebuffer.set(Je.framebuffer)):(Je=Ia(Me,fe.width/4,fe.height/4),Ne.heatmapFbos.set(l.aU,Je))})(ce,R,ee),ce.clear({color:l.aM.transparent});for(let Me=0;Me<oe.length;Me++){const fe=oe[Me];if(z.hasRenderableParent(fe))continue;const Ne=z.getTile(fe),Ve=Ne.getBucket(ee);if(!Ve)continue;const Je=Ve.programConfigurations.get(ee.id),At=R.useProgram("heatmap",Je),{zoom:Ct}=R.transform;At.draw(ce,ve.TRIANGLES,ki.disabled,we,Qe,Yi.disabled,Wn(fe.posMatrix,Ne,Ct,ee.paint.get("heatmap-intensity")),null,ee.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,ee.paint,R.transform.zoom,Je)}ce.viewport.set([0,0,R.width,R.height])}(f,C,E,Q):f.renderPass==="translucent"&&function(R,z){const ee=R.context,oe=ee.gl;ee.setColorMode(R.colorModeForRenderPass());const ce=z.heatmapFbos.get(l.aU);ce&&(ee.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ce.colorAttachment.get()),ee.activeTexture.set(oe.TEXTURE1),Ms(ee,z).bind(oe.LINEAR,oe.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(ee,oe.TRIANGLES,ki.disabled,sn.disabled,R.colorModeForRenderPass(),Yi.disabled,Is(R,z,0,1),null,z.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,z.paint,R.transform.zoom))}(f,E)})(e,a,u,h);break;case"line":(function(f,C,E,Q){if(f.renderPass!=="translucent")return;const D=E.paint.get("line-opacity"),R=E.paint.get("line-width");if(D.constantOr(1)===0||R.constantOr(1)===0)return;const z=f.depthModeForSublayer(0,ki.ReadOnly),ee=f.colorModeForRenderPass(),oe=E.paint.get("line-dasharray"),ce=E.paint.get("line-pattern"),ve=ce.constantOr(1),we=E.paint.get("line-gradient"),Qe=E.getCrossfadeParameters(),Me=ve?"linePattern":oe?"lineSDF":we?"lineGradient":"line",fe=f.context,Ne=fe.gl;let Ve=!0;for(const Je of Q){const At=C.getTile(Je);if(ve&&!At.patternsLoaded())continue;const Ct=At.getBucket(E);if(!Ct)continue;const Ft=Ct.programConfigurations.get(E.id),Ht=f.context.program.get(),Lt=f.useProgram(Me,Ft),Mt=Ve||Lt.program!==Ht,ei=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Je),bi=ce.constantOr(null);if(bi&&At.imageAtlas){const y=At.imageAtlas,k=y.patternPositions[bi.to.toString()],T=y.patternPositions[bi.from.toString()];k&&T&&Ft.setConstantPatternPositions(k,T)}const b=ei?Je:null,I=ve?bs(f,At,E,Qe,b):oe?hu(f,At,E,oe,Qe,b):we?Il(f,At,E,Ct.lineClipsArray.length,b):js(f,At,E,b);if(ve)fe.activeTexture.set(Ne.TEXTURE0),At.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Ft.updatePaintBuffers(Qe);else if(oe&&(Mt||f.lineAtlas.dirty))fe.activeTexture.set(Ne.TEXTURE0),f.lineAtlas.bind(fe);else if(we){const y=Ct.gradients[E.id];let k=y.texture;if(E.gradientVersion!==y.version){let T=256;if(E.stepInterpolant){const F=C.getSource().maxzoom,$=Je.canonical.z===F?Math.ceil(1<<f.transform.maxZoom-Je.canonical.z):1;T=l.ac(l.aV(Ct.maxLineLength/l.X*1024*$),256,fe.maxTextureSize)}y.gradient=l.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:T,image:y.gradient||void 0,clips:Ct.lineClipsArray}),y.texture?y.texture.update(y.gradient):y.texture=new mt(fe,y.gradient,Ne.RGBA),y.version=E.gradientVersion,k=y.texture}fe.activeTexture.set(Ne.TEXTURE0),k.bind(E.stepInterpolant?Ne.NEAREST:Ne.LINEAR,Ne.CLAMP_TO_EDGE)}Lt.draw(fe,Ne.TRIANGLES,z,f.stencilModeForClipping(Je),ee,Yi.disabled,I,ei,E.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,E.paint,f.transform.zoom,Ft,Ct.layoutVertexBuffer2),Ve=!1}})(e,a,u,h);break;case"fill":(function(f,C,E,Q){const D=E.paint.get("fill-color"),R=E.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const z=f.colorModeForRenderPass(),ee=E.paint.get("fill-pattern"),oe=f.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&D.constantOr(l.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===oe){const ce=f.depthModeForSublayer(1,f.renderPass==="opaque"?ki.ReadWrite:ki.ReadOnly);$s(f,C,E,Q,ce,z,!1)}if(f.renderPass==="translucent"&&E.paint.get("fill-antialias")){const ce=f.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,ki.ReadOnly);$s(f,C,E,Q,ce,z,!0)}})(e,a,u,h);break;case"fill-extrusion":(function(f,C,E,Q){const D=E.paint.get("fill-extrusion-opacity");if(D!==0&&f.renderPass==="translucent"){const R=new ki(f.context.gl.LEQUAL,ki.ReadWrite,f.depthRangeFor3D);if(D!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))ba(f,C,E,Q,R,sn.disabled,Sn.disabled),ba(f,C,E,Q,R,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const z=f.colorModeForRenderPass();ba(f,C,E,Q,R,sn.disabled,z)}}})(e,a,u,h);break;case"hillshade":(function(f,C,E,Q){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const D=f.context,R=f.depthModeForSublayer(0,ki.ReadOnly),z=f.colorModeForRenderPass(),[ee,oe]=f.renderPass==="translucent"?f.stencilConfigForOverlap(Q):[{},Q];for(const ce of oe){const ve=C.getTile(ce);ve.needsHillshadePrepare!==void 0&&ve.needsHillshadePrepare&&f.renderPass==="offscreen"?Tc(f,ve,E,R,sn.disabled,z):f.renderPass==="translucent"&&Ts(f,ce,ve,E,R,ee[ce.overscaledZ],z)}D.viewport.set([0,0,f.width,f.height])})(e,a,u,h);break;case"raster":(function(f,C,E,Q){if(f.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!Q.length)return;const D=f.context,R=D.gl,z=C.getSource(),ee=f.useProgram("raster"),oe=f.colorModeForRenderPass(),[ce,ve]=z instanceof Ot?[{},Q]:f.stencilConfigForOverlap(Q),we=ve[ve.length-1].overscaledZ,Qe=!f.options.moving;for(const Me of ve){const fe=f.depthModeForSublayer(Me.overscaledZ-we,E.paint.get("raster-opacity")===1?ki.ReadWrite:ki.ReadOnly,R.LESS),Ne=C.getTile(Me);Ne.registerFadeDuration(E.paint.get("raster-fade-duration"));const Ve=C.findLoadedParent(Me,0),Je=C.findLoadedSibling(Me),At=Pl(Ne,Ve||Je||null,C,E,f.transform,f.style.map.terrain);let Ct,Ft;const Ht=E.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;D.activeTexture.set(R.TEXTURE0),Ne.texture.bind(Ht,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(R.TEXTURE1),Ve?(Ve.texture.bind(Ht,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ct=Math.pow(2,Ve.tileID.overscaledZ-Ne.tileID.overscaledZ),Ft=[Ne.tileID.canonical.x*Ct%1,Ne.tileID.canonical.y*Ct%1]):Ne.texture.bind(Ht,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ne.texture.useMipmap&&D.extTextureFilterAnisotropic&&f.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax);const Lt=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Me),Mt=Lt?Me:null,ei=Mt?Mt.posMatrix:f.transform.calculatePosMatrix(Me.toUnwrapped(),Qe),bi=xl(ei,Ft||[0,0],Ct||1,At,E);z instanceof Ot?ee.draw(D,R.TRIANGLES,fe,sn.disabled,oe,Yi.disabled,bi,Lt,E.id,z.boundsBuffer,f.quadTriangleIndexBuffer,z.boundsSegments):ee.draw(D,R.TRIANGLES,fe,ce[Me.overscaledZ],oe,Yi.disabled,bi,Lt,E.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}})(e,a,u,h);break;case"background":(function(f,C,E,Q){const D=E.paint.get("background-color"),R=E.paint.get("background-opacity");if(R===0)return;const z=f.context,ee=z.gl,oe=f.transform,ce=oe.tileSize,ve=E.paint.get("background-pattern");if(f.isPatternMissing(ve))return;const we=!ve&&D.a===1&&R===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==we)return;const Qe=sn.disabled,Me=f.depthModeForSublayer(0,we==="opaque"?ki.ReadWrite:ki.ReadOnly),fe=f.colorModeForRenderPass(),Ne=f.useProgram(ve?"backgroundPattern":"background"),Ve=Q||oe.coveringTiles({tileSize:ce,terrain:f.style.map.terrain});ve&&(z.activeTexture.set(ee.TEXTURE0),f.imageManager.bind(f.context));const Je=E.getCrossfadeParameters();for(const At of Ve){const Ct=Q?At.posMatrix:f.transform.calculatePosMatrix(At.toUnwrapped()),Ft=ve?xc(Ct,R,f,ve,{tileID:At,tileSize:ce},Je):Cl(Ct,R,D),Ht=f.style.map.terrain&&f.style.map.terrain.getTerrainData(At);Ne.draw(z,ee.TRIANGLES,Me,Qe,fe,Yi.disabled,Ft,Ht,E.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}})(e,0,u,h);break;case"custom":(function(f,C,E){const Q=f.context,D=E.implementation;if(f.renderPass==="offscreen"){const R=D.prerender;R&&(f.setCustomLayerDefaults(),Q.setColorMode(f.colorModeForRenderPass()),R.call(D,Q.gl,f.transform.customLayerMatrix()),Q.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),Q.setColorMode(f.colorModeForRenderPass()),Q.setStencilMode(sn.disabled);const R=D.renderingMode==="3d"?new ki(f.context.gl.LEQUAL,ki.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,ki.ReadOnly);Q.setDepthMode(R),D.render(Q.gl,f.transform.customLayerMatrix(),{farZ:f.transform.farZ,nearZ:f.transform.nearZ,fov:f.transform._fov,modelViewProjectionMatrix:f.transform.modelViewProjectionMatrix,projectionMatrix:f.transform.projectionMatrix}),Q.setDirty(),f.setBaseState(),Q.bindFramebuffer.set(null)}})(e,0,u)}}translatePosMatrix(e,a,u,h,f){if(!u[0]&&!u[1])return e;const C=f?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(C){const D=Math.sin(C),R=Math.cos(C);u=[u[0]*R-u[1]*D,u[0]*D+u[1]*R]}const E=[f?u[0]:Si(a,u[0],this.transform.zoom),f?u[1]:Si(a,u[1],this.transform.zoom),0],Q=new Float32Array(16);return l.J(Q,e,E),Q}saveTileTexture(e){const a=this._tileTextures[e.size[0]];a?a.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const a=this._tileTextures[e];return a&&a.length>0?a.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const a=this.imageManager.getPattern(e.from.toString()),u=this.imageManager.getPattern(e.to.toString());return!a||!u}useProgram(e,a){this.cache=this.cache||{};const u=e+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[u]||(this.cache[u]=new vc(this.context,Ta[e],a,wc[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[u]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new mt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:a}=this.context.gl;return this.width!==e||this.height!==a}}class No{constructor(e,a){this.points=e,this.planes=a}static fromInvProjectionMatrix(e,a,u){const h=Math.pow(2,u),f=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const Q=1/(E=l.af([],E,e))[3]/a*h;return l.b1(E,E,[Q,Q,1/E[3],Q])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const Q=function(ee,oe){var ce=oe[0],ve=oe[1],we=oe[2],Qe=ce*ce+ve*ve+we*we;return Qe>0&&(Qe=1/Math.sqrt(Qe)),ee[0]=oe[0]*Qe,ee[1]=oe[1]*Qe,ee[2]=oe[2]*Qe,ee}([],function(ee,oe,ce){var ve=oe[0],we=oe[1],Qe=oe[2],Me=ce[0],fe=ce[1],Ne=ce[2];return ee[0]=we*Ne-Qe*fe,ee[1]=Qe*Me-ve*Ne,ee[2]=ve*fe-we*Me,ee}([],Nt([],f[E[0]],f[E[1]]),Nt([],f[E[2]],f[E[1]]))),D=-((R=Q)[0]*(z=f[E[1]])[0]+R[1]*z[1]+R[2]*z[2]);var R,z;return Q.concat(D)});return new No(f,C)}}class Xs{constructor(e,a){this.min=e,this.max=a,this.center=function(u,h,f){return u[0]=.5*h[0],u[1]=.5*h[1],u[2]=.5*h[2],u}([],function(u,h,f){return u[0]=h[0]+f[0],u[1]=h[1]+f[1],u[2]=h[2]+f[2],u}([],this.min,this.max))}quadrant(e){const a=[e%2==0,e<2],u=Pt(this.min),h=Pt(this.max);for(let f=0;f<a.length;f++)u[f]=a[f]?this.min[f]:this.center[f],h[f]=a[f]?this.center[f]:this.max[f];return h[2]=this.max[2],new Xs(u,h)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let u=!0;for(let h=0;h<e.planes.length;h++){const f=e.planes[h];let C=0;for(let E=0;E<a.length;E++)l.b2(f,a[E])>=0&&C++;if(C===0)return 0;C!==a.length&&(u=!1)}if(u)return 2;for(let h=0;h<3;h++){let f=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let E=0;E<e.points.length;E++){const Q=e.points[E][h]-this.min[h];f=Math.min(f,Q),C=Math.max(C,Q)}if(C<0||f>this.max[h]-this.min[h])return 0}return 1}}class eo{constructor(e=0,a=0,u=0,h=0){if(isNaN(e)||e<0||isNaN(a)||a<0||isNaN(u)||u<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=a,this.left=u,this.right=h}interpolate(e,a,u){return a.top!=null&&e.top!=null&&(this.top=l.y.number(e.top,a.top,u)),a.bottom!=null&&e.bottom!=null&&(this.bottom=l.y.number(e.bottom,a.bottom,u)),a.left!=null&&e.left!=null&&(this.left=l.y.number(e.left,a.left,u)),a.right!=null&&e.right!=null&&(this.right=l.y.number(e.right,a.right,u)),this}getCenter(e,a){const u=l.ac((this.left+e-this.right)/2,0,e),h=l.ac((this.top+a-this.bottom)/2,0,a);return new l.P(u,h)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new eo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Tr=85.051129;class to{constructor(e,a,u,h,f){this.tileSize=512,this._renderWorldCopies=f===void 0||!!f,this._minZoom=e||0,this._maxZoom=a||22,this._minPitch=u??0,this._maxPitch=h??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new eo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new to(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const a=-l.b3(e,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var u=new l.A(4);return l.A!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u}(),function(u,h,f){var C=h[0],E=h[1],Q=h[2],D=h[3],R=Math.sin(f),z=Math.cos(f);u[0]=C*z+Q*R,u[1]=E*z+D*R,u[2]=C*-R+Q*z,u[3]=E*-R+D*z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const a=l.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const a=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,a,u){this._unmodified=!1,this._edgeInsets.interpolate(e,a,u),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const a=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(e){const a=[new l.b4(0,e)];if(this._renderWorldCopies){const u=this.pointCoordinate(new l.P(0,0)),h=this.pointCoordinate(new l.P(this.width,0)),f=this.pointCoordinate(new l.P(this.width,this.height)),C=this.pointCoordinate(new l.P(0,this.height)),E=Math.floor(Math.min(u.x,h.x,f.x,C.x)),Q=Math.floor(Math.max(u.x,h.x,f.x,C.x)),D=1;for(let R=E-D;R<=Q+D;R++)R!==0&&a.push(new l.b4(R,e))}return a}coveringTiles(e){var a,u;let h=this.coveringZoomLevel(e);const f=h;if(e.minzoom!==void 0&&h<e.minzoom)return[];e.maxzoom!==void 0&&h>e.maxzoom&&(h=e.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),E=l.Z.fromLngLat(this.center),Q=Math.pow(2,h),D=[Q*C.x,Q*C.y,0],R=[Q*E.x,Q*E.y,0],z=No.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,h);let ee=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ee=h);const oe=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,ce=fe=>({aabb:new Xs([fe*Q,0,0],[(fe+1)*Q,Q,0]),zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),ve=[],we=[],Qe=h,Me=e.reparseOverscaled?f:h;if(this._renderWorldCopies)for(let fe=1;fe<=3;fe++)ve.push(ce(-fe)),ve.push(ce(fe));for(ve.push(ce(0));ve.length>0;){const fe=ve.pop(),Ne=fe.x,Ve=fe.y;let Je=fe.fullyVisible;if(!Je){const Lt=fe.aabb.intersects(z);if(Lt===0)continue;Je=Lt===2}const At=e.terrain?D:R,Ct=fe.aabb.distanceX(At),Ft=fe.aabb.distanceY(At),Ht=Math.max(Math.abs(Ct),Math.abs(Ft));if(fe.zoom===Qe||Ht>oe+(1<<Qe-fe.zoom)-2&&fe.zoom>=ee){const Lt=Qe-fe.zoom,Mt=D[0]-.5-(Ne<<Lt),ei=D[1]-.5-(Ve<<Lt);we.push({tileID:new l.S(fe.zoom===Qe?Me:fe.zoom,fe.wrap,fe.zoom,Ne,Ve),distanceSq:Xt([R[0]-.5-Ne,R[1]-.5-Ve]),tileDistanceToCamera:Math.sqrt(Mt*Mt+ei*ei)})}else for(let Lt=0;Lt<4;Lt++){const Mt=(Ne<<1)+Lt%2,ei=(Ve<<1)+(Lt>>1),bi=fe.zoom+1;let b=fe.aabb.quadrant(Lt);if(e.terrain){const I=new l.S(bi,fe.wrap,bi,Mt,ei),y=e.terrain.getMinMaxElevation(I),k=(a=y.minElevation)!==null&&a!==void 0?a:this.elevation,T=(u=y.maxElevation)!==null&&u!==void 0?u:this.elevation;b=new Xs([b.min[0],b.min[1],k],[b.max[0],b.max[1],T])}ve.push({aabb:b,zoom:bi,x:Mt,y:ei,wrap:fe.wrap,fullyVisible:Je})}}return we.sort((fe,Ne)=>fe.distanceSq-Ne.distanceSq).map(fe=>fe.tileID)}resize(e,a){this.width=e,this.height=a,this.pixelsToGLUnits=[2/e,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const a=l.ac(e.lat,-85.051129,Tr);return new l.P(l.O(e.lng)*this.worldSize,l.Q(a)*this.worldSize)}unproject(e){return new l.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const a=this.elevation,u=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,h=this.pointLocation(this.centerPoint,e),f=e.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-f))return;const C=u+a-f,E=Math.cos(this._pitch)*this.cameraToCenterDistance/C/l.b5(1,h.lat),Q=this.scaleZoom(E/this.tileSize);this._elevation=f,this._center=h,this.zoom=Q}setLocationAtPoint(e,a){const u=this.pointCoordinate(a),h=this.pointCoordinate(this.centerPoint),f=this.locationCoordinate(e),C=new l.Z(f.x-(u.x-h.x),f.y-(u.y-h.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,a){return a?this.coordinatePoint(this.locationCoordinate(e),a.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,a){return this.coordinateLocation(this.pointCoordinate(e,a))}locationCoordinate(e){return l.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,a){if(a){const ee=a.pointCoordinate(e);if(ee!=null)return ee}const u=[e.x,e.y,0,1],h=[e.x,e.y,1,1];l.af(u,u,this.pixelMatrixInverse),l.af(h,h,this.pixelMatrixInverse);const f=u[3],C=h[3],E=u[1]/f,Q=h[1]/C,D=u[2]/f,R=h[2]/C,z=D===R?0:(0-D)/(R-D);return new l.Z(l.y.number(u[0]/f,h[0]/C,z)/this.worldSize,l.y.number(E,Q,z)/this.worldSize)}coordinatePoint(e,a=0,u=this.pixelMatrix){const h=[e.x*this.worldSize,e.y*this.worldSize,a,1];return l.af(h,h,u),new l.P(h[0]/h[3],h[1]/h[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new xe().extend(this.pointLocation(new l.P(0,e))).extend(this.pointLocation(new l.P(this.width,e))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new xe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Tr])}calculateTileMatrix(e){const a=e.canonical,u=this.worldSize/this.zoomScale(a.z),h=a.x+Math.pow(2,a.z)*e.wrap,f=l.an(new Float64Array(16));return l.J(f,f,[h*u,a.y*u,0]),l.K(f,f,[u/l.X,u/l.X,1]),f}calculatePosMatrix(e,a=!1){const u=e.key,h=a?this._alignedPosMatrixCache:this._posMatrixCache;if(h[u])return h[u];const f=this.calculateTileMatrix(e);return l.L(f,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,f),h[u]=new Float32Array(f),h[u]}calculateFogMatrix(e){const a=e.key,u=this._fogMatrixCache;if(u[a])return u[a];const h=this.calculateTileMatrix(e);return l.L(h,this.fogMatrix,h),u[a]=new Float32Array(h),u[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,a){a=l.ac(+a,this.minZoom,this.maxZoom);const u={center:new l.N(e.lng,e.lat),zoom:a};let h=this.lngRange;if(!this._renderWorldCopies&&h===null){const fe=179.9999999999;h=[-fe,fe]}const f=this.tileSize*this.zoomScale(u.zoom);let C=0,E=f,Q=0,D=f,R=0,z=0;const{x:ee,y:oe}=this.size;if(this.latRange){const fe=this.latRange;C=l.Q(fe[1])*f,E=l.Q(fe[0])*f,E-C<oe&&(R=oe/(E-C))}h&&(Q=l.b3(l.O(h[0])*f,0,f),D=l.b3(l.O(h[1])*f,0,f),D<Q&&(D+=f),D-Q<ee&&(z=ee/(D-Q)));const{x:ce,y:ve}=this.project.call({worldSize:f},e);let we,Qe;const Me=Math.max(z||0,R||0);if(Me){const fe=new l.P(z?(D+Q)/2:ce,R?(E+C)/2:ve);return u.center=this.unproject.call({worldSize:f},fe).wrap(),u.zoom+=this.scaleZoom(Me),u}if(this.latRange){const fe=oe/2;ve-fe<C&&(Qe=C+fe),ve+fe>E&&(Qe=E-fe)}if(h){const fe=(Q+D)/2;let Ne=ce;this._renderWorldCopies&&(Ne=l.b3(ce,fe-f/2,fe+f/2));const Ve=ee/2;Ne-Ve<Q&&(we=Q+Ve),Ne+Ve>D&&(we=D-Ve)}if(we!==void 0||Qe!==void 0){const fe=new l.P(we??ce,Qe??ve);u.center=this.unproject.call({worldSize:f},fe).wrap()}return u}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:a,zoom:u}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=u,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,a=this.point.x,u=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let h=l.an(new Float64Array(16));l.K(h,h,[this.width/2,-this.height/2,1]),l.J(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=l.an(new Float64Array(16)),l.K(h,h,[1,-1,1]),l.J(h,h,[-1,-1,0]),l.K(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h;const f=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this.minElevationForCurrentTile),E=f-C*this._pixelPerMeter/Math.cos(this._pitch),Q=C<0?E:f,D=Math.PI/2+this._pitch,R=this._fov*(.5+e.y/this.height),z=Math.sin(R)*Q/Math.sin(l.ac(Math.PI-D-R,.01,Math.PI-.01)),ee=this.getHorizon(),oe=2*Math.atan(ee/this.cameraToCenterDistance)*(.5+e.y/(2*ee)),ce=Math.sin(oe)*Q/Math.sin(l.ac(Math.PI-D-oe,.01,Math.PI-.01)),ve=Math.min(z,ce);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ve+Q),this.nearZ=this.height/50,h=new Float64Array(16),l.b6(h,this._fov,this.width/this.height,this.nearZ,this.farZ),h[8]=2*-e.x/this.width,h[9]=2*e.y/this.height,this.projectionMatrix=l.ae(h),l.K(h,h,[1,-1,1]),l.J(h,h,[0,0,-this.cameraToCenterDistance]),l.b7(h,h,this._pitch),l.ad(h,h,this.angle),l.J(h,h,[-a,-u,0]),this.mercatorMatrix=l.K([],h,[this.worldSize,this.worldSize,this.worldSize]),l.K(h,h,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,h),l.J(h,h,[0,0,-this.elevation]),this.modelViewProjectionMatrix=h,this.invModelViewProjectionMatrix=l.as([],h),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,f,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-a,-u,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,h);const we=this.width%2/2,Qe=this.height%2/2,Me=Math.cos(this.angle),fe=Math.sin(this.angle),Ne=a-Math.round(a)+Me*we+fe*Qe,Ve=u-Math.round(u)+Me*Qe+fe*we,Je=new Float64Array(h);if(l.J(Je,Je,[Ne>.5?Ne-1:Ne,Ve>.5?Ve-1:Ve,0]),this.alignedModelViewProjectionMatrix=Je,h=l.as(new Float64Array(16),this.pixelMatrix),!h)throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new l.P(0,0)),a=[e.x*this.worldSize,e.y*this.worldSize,0,1];return l.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,e))}getCameraQueryGeometry(e){const a=this.getCameraPoint();if(e.length===1)return[e[0],a];{let u=a.x,h=a.y,f=a.x,C=a.y;for(const E of e)u=Math.min(u,E.x),h=Math.min(h,E.y),f=Math.max(f,E.x),C=Math.max(C,E.y);return[new l.P(u,h),new l.P(f,h),new l.P(f,C),new l.P(u,C),new l.P(u,h)]}}lngLatToCameraDepth(e,a){const u=this.locationCoordinate(e),h=[u.x*this.worldSize,u.y*this.worldSize,a,1];return l.af(h,h,this.modelViewProjectionMatrix),h[2]/h[3]}}function Uo(g,e){let a,u=!1,h=null,f=null;const C=()=>{h=null,u&&(g.apply(f,a),h=setTimeout(C,e),u=!1)};return(...E)=>(u=!0,f=this,a=E,h||C(),h)}class xu{constructor(e){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let u;return a.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(u=h)}),(u&&u[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:u,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const u=a.join("/");let h=u;h.split("&").length>0&&(h=h.split("&")[0]),this._hashName&&(h=`${this._hashName}=${u}`);let f=window.location.hash.replace(h,"");f.startsWith("#&")?f=f.slice(0,1)+f.slice(2):f==="#"&&(f="");let C=window.location.href.replace(/(#.+)?$/,f);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Uo(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const a=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,h=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),f=Math.pow(10,h),C=Math.round(a.lng*f)/f,E=Math.round(a.lat*f)/f,Q=this._map.getBearing(),D=this._map.getPitch();let R="";if(R+=e?`/${C}/${E}/${u}`:`${u}/${E}/${C}`,(Q||D)&&(R+="/"+Math.round(10*Q)/10),D&&(R+=`/${Math.round(D)}`),this._hashName){const z=this._hashName;let ee=!1;const oe=window.location.hash.slice(1).split("&").map(ce=>{const ve=ce.split("=")[0];return ve===z?(ee=!0,`${ve}=${R}`):ce}).filter(ce=>ce);return ee||oe.push(`${z}=${R}`),`#${oe.join("&")}`}return`#${R}`}}const io={linearity:.3,easing:l.b8(0,0,.3,1)},_h=l.e({deceleration:2500,maxSpeed:1400},io),wu=l.e({deceleration:20,maxSpeed:1400},io),no=l.e({deceleration:1e3,maxSpeed:360},io),Oo=l.e({deceleration:1e3,maxSpeed:90},io);class Cu{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:q.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,a=q.now();for(;e.length>0&&a-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:f}of this._inertiaBuffer)a.zoom+=f.zoomDelta||0,a.bearing+=f.bearingDelta||0,a.pitch+=f.pitchDelta||0,f.panDelta&&a.pan._add(f.panDelta),f.around&&(a.around=f.around),f.pinchAround&&(a.pinchAround=f.pinchAround);const u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(a.pan.mag()){const f=aa(a.pan.mag(),u,l.e({},_h,e||{}));h.offset=a.pan.mult(f.amount/a.pan.mag()),h.center=this._map.transform.center,Vo(h,f)}if(a.zoom){const f=aa(a.zoom,u,wu);h.zoom=this._map.transform.zoom+f.amount,Vo(h,f)}if(a.bearing){const f=aa(a.bearing,u,no);h.bearing=this._map.transform.bearing+l.ac(f.amount,-179,179),Vo(h,f)}if(a.pitch){const f=aa(a.pitch,u,Oo);h.pitch=this._map.transform.pitch+f.amount,Vo(h,f)}if(h.zoom||h.bearing){const f=a.pinchAround===void 0?a.around:a.pinchAround;h.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),l.e(h,{noMoveStart:!0})}}function Vo(g,e){(!g.duration||g.duration<e.duration)&&(g.duration=e.duration,g.easing=e.easing)}function aa(g,e,a){const{maxSpeed:u,linearity:h,deceleration:f}=a,C=l.ac(g*h/(e/1e3),-u,u),E=Math.abs(C)/(f*h);return{easing:a.easing,duration:1e3*E,amount:C*(E/2)}}class Xn extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,u,h={}){const f=G.mousePos(a.getCanvas(),u),C=a.unproject(f);super(e,l.e({point:f,lngLat:C,originalEvent:u},h)),this._defaultPrevented=!1,this.target=a}}class ls extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,u){const h=e==="touchend"?u.changedTouches:u.touches,f=G.touchPos(a.getCanvasContainer(),h),C=f.map(Q=>a.unproject(Q)),E=f.reduce((Q,D,R,z)=>Q.add(D.div(z.length)),new l.P(0,0));super(e,{points:f,point:E,lngLats:C,lngLat:a.unproject(E),originalEvent:u}),this._defaultPrevented=!1}}class ro extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,a,u){super(e,{originalEvent:u}),this._defaultPrevented=!1}}class bn{constructor(e,a){this._map=e,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new ro(e.type,this._map,e))}mousedown(e,a){return this._mousedownPos=a,this._firePreventable(new Xn(e.type,this._map,e))}mouseup(e){this._map.fire(new Xn(e.type,this._map,e))}click(e,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Xn(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Xn(e.type,this._map,e))}mouseover(e){this._map.fire(new Xn(e.type,this._map,e))}mouseout(e){this._map.fire(new Xn(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ls(e.type,this._map,e))}touchmove(e){this._map.fire(new ls(e.type,this._map,e))}touchend(e){this._map.fire(new ls(e.type,this._map,e))}touchcancel(e){this._map.fire(new ls(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xa{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Xn(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Xn(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kn{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(l.P.convert(e),this._map.terrain)}}class za{constructor(e,a){this._map=e,this._tr=new Kn(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,a){this.isEnabled()&&e.shiftKey&&e.button===0&&(G.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(e,a){if(!this._active)return;const u=a;if(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)return;const h=this._startPos;this._lastPos=u,this._box||(this._box=G.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const f=Math.min(h.x,u.x),C=Math.max(h.x,u.x),E=Math.min(h.y,u.y),Q=Math.max(h.y,u.y);G.setTransform(this._box,`translate(${f}px,${E}px)`),this._box.style.width=C-f+"px",this._box.style.height=Q-E+"px"}mouseupWindow(e,a){if(!this._active||e.button!==0)return;const u=this._startPos,h=a;if(this.reset(),G.suppressClick(),u.x!==h.x||u.y!==h.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:e})),{cameraAnimation:f=>f.fitScreenCoordinates(u,h,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(G.remove(this._box),this._box=null),G.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,a){return this._map.fire(new l.k(e,{originalEvent:a}))}}function cs(g,e){if(g.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${e.length}`);const a={};for(let u=0;u<g.length;u++)a[g[u].identifier]=e[u];return a}class Rc{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,a,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),u.length===this.numTouches&&(this.centroid=function(h){const f=new l.P(0,0);for(const C of h)f._add(C);return f.div(h.length)}(a),this.touches=cs(u,a)))}touchmove(e,a,u){if(this.aborted||!this.centroid)return;const h=cs(u,a);for(const f in this.touches){const C=h[f];(!C||C.dist(this.touches[f])>30)&&(this.aborted=!0)}}touchend(e,a,u){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){const h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class us{constructor(e){this.singleTap=new Rc(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,a,u){this.singleTap.touchstart(e,a,u)}touchmove(e,a,u){this.singleTap.touchmove(e,a,u)}touchend(e,a,u){const h=this.singleTap.touchend(e,a,u);if(h){const f=e.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(h)<30;if(f&&C||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class qo{constructor(e){this._tr=new Kn(e),this._zoomIn=new us({numTouches:1,numTaps:2}),this._zoomOut=new us({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,a,u){this._zoomIn.touchstart(e,a,u),this._zoomOut.touchstart(e,a,u)}touchmove(e,a,u){this._zoomIn.touchmove(e,a,u),this._zoomOut.touchmove(e,a,u)}touchend(e,a,u){const h=this._zoomIn.touchend(e,a,u),f=this._zoomOut.touchend(e,a,u),C=this._tr;return h?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(h)},{originalEvent:e})}):f?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(f)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ps{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const a=this._moveFunction(...e);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(e,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,a){if(!this.isEnabled())return;const u=this._lastPoint;if(!u)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const h=a.length?a[0]:a;return!this._moved&&h.dist(u)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=h,this._move(u,h))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&G.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Bu={0:1,2:2};class Ga{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const a=G.mouseButton(e);this._eventButton=a}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(a,u){const h=Bu[u];return a.buttons===void 0||(a.buttons&h)!==h}(e,this._eventButton)}isValidEndEvent(e){return G.mouseButton(e)===this._eventButton}}class Lc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Rl=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=e=>{e.preventDefault()}},Fc=({enable:g,clickTolerance:e,bearingDegreesPerPixelMoved:a=.8})=>{const u=new Ga({checkCorrectEvent:h=>G.mouseButton(h)===0&&h.ctrlKey||G.mouseButton(h)===2});return new Ps({clickTolerance:e,move:(h,f)=>({bearingDelta:(f.x-h.x)*a}),moveStateManager:u,enable:g,assignEvents:Rl})},hs=({enable:g,clickTolerance:e,pitchDegreesPerPixelMoved:a=-.5})=>{const u=new Ga({checkCorrectEvent:h=>G.mouseButton(h)===0&&h.ctrlKey||G.mouseButton(h)===2});return new Ps({clickTolerance:e,move:(h,f)=>({pitchDelta:(f.y-h.y)*a}),moveStateManager:u,enable:g,assignEvents:Rl})};class Eu{constructor(e,a){this._clickTolerance=e.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,a,u){return this._calculateTransform(e,a,u)}touchmove(e,a,u){if(this._active){if(!this._shouldBePrevented(u.length))return e.preventDefault(),this._calculateTransform(e,a,u);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,a,u){this._calculateTransform(e,a,u),this._active&&this._shouldBePrevented(u.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,a,u){u.length>0&&(this._active=!0);const h=cs(u,a),f=new l.P(0,0),C=new l.P(0,0);let E=0;for(const D in h){const R=h[D],z=this._touches[D];z&&(f._add(R),C._add(R.sub(z)),E++,h[D]=R)}if(this._touches=h,this._shouldBePrevented(E)||!C.mag())return;const Q=C.div(E);return this._sum._add(Q),this._sum.mag()<this._clickTolerance?void 0:{around:f.div(E),panDelta:Q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ll{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,a,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([a[0],a[1]]))}touchmove(e,a,u){if(!this._firstTwoTouches)return;e.preventDefault();const[h,f]=this._firstTwoTouches,C=Ho(u,a,h),E=Ho(u,a,f);if(!C||!E)return;const Q=this._aroundCenter?null:C.add(E).div(2);return this._move([C,E],Q,e)}touchend(e,a,u){if(!this._firstTwoTouches)return;const[h,f]=this._firstTwoTouches,C=Ho(u,a,h),E=Ho(u,a,f);C&&E||(this._active&&G.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ho(g,e,a){for(let u=0;u<g.length;u++)if(g[u].identifier===a)return e[u]}function jo(g,e){return Math.log(g/e)/Math.LN2}class zc extends Ll{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,a){const u=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(jo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jo(this._distance,u),pinchAround:a}}}function Ur(g,e){return 180*g.angleWith(e)/Math.PI}class Jo extends Ll{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,a,u){const h=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ur(this._vector,h),pinchAround:a}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const a=25/(Math.PI*this._minDiameter)*360,u=Ur(e,this._startVector);return Math.abs(u)<a}}function Na(g){return Math.abs(g.y)>Math.abs(g.x)}class Gc extends Ll{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,a,u){super.touchstart(e,a,u),this._currentTouchCount=u.length}_start(e){this._lastPoints=e,Na(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,a,u){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const h=e[0].sub(this._lastPoints[0]),f=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(h,f,u.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(h.y+f.y)/2*-.5}):void 0}gestureBeginsVertically(e,a,u){if(this._valid!==void 0)return this._valid;const h=e.mag()>=2,f=a.mag()>=2;if(!h&&!f)return;if(!h||!f)return this._firstMove===void 0&&(this._firstMove=u),u-this._firstMove<100&&void 0;const C=e.y>0==a.y>0;return Na(e)&&Na(a)&&C}}const Or={panStep:100,bearingStep:15,pitchStep:10};class Vr{constructor(e){this._tr=new Kn(e);const a=Or;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let a=0,u=0,h=0,f=0,C=0;switch(e.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:e.shiftKey?u=-1:(e.preventDefault(),f=-1);break;case 39:e.shiftKey?u=1:(e.preventDefault(),f=1);break;case 38:e.shiftKey?h=1:(e.preventDefault(),C=-1);break;case 40:e.shiftKey?h=-1:(e.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(u=0,h=0),{cameraAnimation:E=>{const Q=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:ao,zoom:a?Math.round(Q.zoom)+a*(e.shiftKey?2:1):Q.zoom,bearing:Q.bearing+u*this._bearingStep,pitch:Q.pitch+h*this._pitchStep,offset:[-f*this._panStep,-C*this._panStep],center:Q.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ao(g){return g*(2-g)}const Pr=4.000244140625;class Rs{constructor(e,a){this._onTimeout=u=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},this._map=e,this._tr=new Kn(e),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let a=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const u=q.now(),h=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,a!==0&&a%Pr==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(h*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),e.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=e,this._delta-=a,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=G.mousePos(this._map.getCanvas(),e),u=this._tr;this._around=a.y>u.transform.height/2-u.transform.getHorizon()?l.N.convert(this._aroundCenter?u.center:u.unproject(a)):l.N.convert(u.center),this._aroundPoint=u.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const Q=this._type==="wheel"&&Math.abs(this._delta)>Pr?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&D!==0&&(D=1/D);const R=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(R*D))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,u=this._startZoom,h=this._easing;let f,C=!1;const E=q.now()-this._lastWheelEventTime;if(this._type==="wheel"&&u&&h&&E){const Q=Math.min(E/200,1),D=h(Q);f=l.y.number(u,a,D),Q<1?this._frameId||(this._frameId=!0):C=!0}else f=a,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:f-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let a=l.b9;if(this._prevEase){const u=this._prevEase,h=(q.now()-u.start)/u.duration,f=u.easing(h+.01)-u.easing(h),C=.27/Math.sqrt(f*f+1e-4)*.01,E=Math.sqrt(.0729-C*C);a=l.b8(C,E,.25,1)}return this._prevEase={start:q.now(),duration:e,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Yo{constructor(e,a){this._clickZoom=e,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vh{constructor(e){this._tr=new Kn(e),this.reset()}reset(){this._active=!1}dblclick(e,a){return e.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fl{constructor(){this._tap=new us({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,a,u){if(!this._swipePoint)if(this._tapTime){const h=a[0],f=e.timeStamp-this._tapTime<500,C=this._tapPoint.dist(h)<30;f&&C?u.length>0&&(this._swipePoint=h,this._swipeTouch=u[0].identifier):this.reset()}else this._tap.touchstart(e,a,u)}touchmove(e,a,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;const h=a[0],f=h.y-this._swipePoint.y;return this._swipePoint=h,e.preventDefault(),this._active=!0,{zoomDelta:f/128}}}else this._tap.touchmove(e,a,u)}touchend(e,a,u){if(this._tapTime)this._swipePoint&&u.length===0&&this.reset();else{const h=this._tap.touchend(e,a,u);h&&(this._tapTime=e.timeStamp,this._tapPoint=h)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qu{constructor(e,a,u){this._el=e,this._mousePan=a,this._touchPan=u}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Nc{constructor(e,a,u){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=a,this._mousePitch=u}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class so{constructor(e,a,u,h){this._el=e,this._touchZoom=a,this._touchRotate=u,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class wa{constructor(e,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=G.create("div","maplibregl-cooperative-gesture-screen",e);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const u=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),h=document.createElement("div");h.className="maplibregl-desktop-message",h.textContent=a,this._container.appendChild(h);const f=document.createElement("div");f.className="maplibregl-mobile-message",f.textContent=u,this._container.appendChild(f),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(G.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,a){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:e,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ut=g=>g.zoom||g.drag||g.pitch||g.rotate;class Uc extends l.k{}function Ko(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class $o{constructor(e,a){this.handleWindowEvent=h=>{this.handleEvent(h,`${h.type}Window`)},this.handleEvent=(h,f)=>{if(h.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=h.type==="renderFrame"?void 0:h,E={needsRenderFrame:!1},Q={},D={},R=h.touches,z=R?this._getMapTouches(R):void 0,ee=z?G.touchPos(this._map.getCanvas(),z):G.mousePos(this._map.getCanvas(),h);for(const{handlerName:ve,handler:we,allowed:Qe}of this._handlers){if(!we.isEnabled())continue;let Me;this._blockedByActive(D,Qe,ve)?we.reset():we[f||h.type]&&(Me=we[f||h.type](h,ee,z),this.mergeHandlerResult(E,Q,Me,ve,C),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()),(Me||we.isActive())&&(D[ve]=we)}const oe={};for(const ve in this._previousActiveHandlers)D[ve]||(oe[ve]=C);this._previousActiveHandlers=D,(Object.keys(oe).length||Ko(E))&&(this._changes.push([E,Q,oe]),this._triggerRenderFrame()),(Object.keys(D).length||Ko(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=E;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cu(e),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];for(const[h,f,C]of this._listeners)G.addEventListener(h,f,h===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[e,a,u]of this._listeners)G.removeEventListener(e,a,e===document?this.handleWindowEvent:this.handleEvent,u)}_addDefaultHandlers(e){const a=this._map,u=a.getCanvasContainer();this._add("mapEvent",new bn(a,e));const h=a.boxZoom=new za(a,e);this._add("boxZoom",h),e.interactive&&e.boxZoom&&h.enable();const f=a.cooperativeGestures=new wa(a,e.cooperativeGestures);this._add("cooperativeGestures",f),e.cooperativeGestures&&f.enable();const C=new qo(a),E=new vh(a);a.doubleClickZoom=new Yo(E,C),this._add("tapZoom",C),this._add("clickZoom",E),e.interactive&&e.doubleClickZoom&&a.doubleClickZoom.enable();const Q=new Fl;this._add("tapDragZoom",Q);const D=a.touchPitch=new Gc(a);this._add("touchPitch",D),e.interactive&&e.touchPitch&&a.touchPitch.enable(e.touchPitch);const R=Fc(e),z=hs(e);a.dragRotate=new Nc(e,R,z),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),e.interactive&&e.dragRotate&&a.dragRotate.enable();const ee=(({enable:Me,clickTolerance:fe})=>{const Ne=new Ga({checkCorrectEvent:Ve=>G.mouseButton(Ve)===0&&!Ve.ctrlKey});return new Ps({clickTolerance:fe,move:(Ve,Je)=>({around:Je,panDelta:Je.sub(Ve)}),activateOnStart:!0,moveStateManager:Ne,enable:Me,assignEvents:Rl})})(e),oe=new Eu(e,a);a.dragPan=new Qu(u,ee,oe),this._add("mousePan",ee),this._add("touchPan",oe,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&a.dragPan.enable(e.dragPan);const ce=new Jo,ve=new zc;a.touchZoomRotate=new so(u,ve,ce,Q),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&a.touchZoomRotate.enable(e.touchZoomRotate);const we=a.scrollZoom=new Rs(a,()=>this._triggerRenderFrame());this._add("scrollZoom",we,["mousePan"]),e.interactive&&e.scrollZoom&&a.scrollZoom.enable(e.scrollZoom);const Qe=a.keyboard=new Vr(a);this._add("keyboard",Qe),e.interactive&&e.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new xa(a))}_add(e,a,u){this._handlers.push({handlerName:e,handler:a,allowed:u}),this._handlersById[e]=a}stop(e){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ut(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,a,u){for(const h in e)if(h!==u&&(!a||a.indexOf(h)<0))return!0;return!1}_getMapTouches(e){const a=[];for(const u of e)this._el.contains(u.target)&&a.push(u);return a}mergeHandlerResult(e,a,u,h,f){if(!u)return;l.e(e,u);const C={handlerName:h,originalEvent:u.originalEvent||f};u.zoomDelta!==void 0&&(a.zoom=C),u.panDelta!==void 0&&(a.drag=C),u.pitchDelta!==void 0&&(a.pitch=C),u.bearingDelta!==void 0&&(a.rotate=C)}_applyChanges(){const e={},a={},u={};for(const[h,f,C]of this._changes)h.panDelta&&(e.panDelta=(e.panDelta||new l.P(0,0))._add(h.panDelta)),h.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+h.pitchDelta),h.around!==void 0&&(e.around=h.around),h.pinchAround!==void 0&&(e.pinchAround=h.pinchAround),h.noInertia&&(e.noInertia=h.noInertia),l.e(a,f),l.e(u,C);this._updateMapTransform(e,a,u),this._changes=[]}_updateMapTransform(e,a,u){const h=this._map,f=h._getTransformForUpdate(),C=h.terrain;if(!(Ko(e)||C&&this._terrainMovement))return this._fireEvents(a,u,!0);let{panDelta:E,zoomDelta:Q,bearingDelta:D,pitchDelta:R,around:z,pinchAround:ee}=e;ee!==void 0&&(z=ee),h._stop(!0),z=z||h.transform.centerPoint;const oe=f.pointLocation(E?z.sub(E):z);D&&(f.bearing+=D),R&&(f.pitch+=R),Q&&(f.zoom+=Q),C?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?f.center=f.pointLocation(f.centerPoint.sub(E)):f.setLocationAtPoint(oe,z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,f.setLocationAtPoint(oe,z)):f.setLocationAtPoint(oe,z),h._applyUpdatedTransform(f),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(a,u,!0)}_fireEvents(e,a,u){const h=Ut(this._eventsInProgress),f=Ut(e),C={};for(const z in e){const{originalEvent:ee}=e[z];this._eventsInProgress[z]||(C[`${z}start`]=ee),this._eventsInProgress[z]=e[z]}!h&&f&&this._fireEvent("movestart",f.originalEvent);for(const z in C)this._fireEvent(z,C[z]);f&&this._fireEvent("move",f.originalEvent);for(const z in e){const{originalEvent:ee}=e[z];this._fireEvent(z,ee)}const E={};let Q;for(const z in this._eventsInProgress){const{handlerName:ee,originalEvent:oe}=this._eventsInProgress[z];this._handlersById[ee].isActive()||(delete this._eventsInProgress[z],Q=a[ee]||oe,E[`${z}end`]=Q)}for(const z in E)this._fireEvent(z,E[z]);const D=Ut(this._eventsInProgress),R=(h||f)&&!D;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const z=this._map._getTransformForUpdate();z.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(z)}if(u&&R){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;!z||!z.essential&&q.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:Q})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:Q})),this._updatingCamera=!1}}_fireEvent(e,a){this._map.fire(new l.k(e,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Uc("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sa extends l.E{constructor(e,a){super(),this._renderFrameCallback=()=>{const u=Math.min((q.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,a){return this.jumpTo({center:e},a)}panBy(e,a,u){return e=l.P.convert(e).mult(-1),this.panTo(this.transform.center,l.e({offset:e},a),u)}panTo(e,a,u){return this.easeTo(l.e({center:e},a),u)}getZoom(){return this.transform.zoom}setZoom(e,a){return this.jumpTo({zoom:e},a),this}zoomTo(e,a,u){return this.easeTo(l.e({zoom:e},a),u)}zoomIn(e,a){return this.zoomTo(this.getZoom()+1,e,a),this}zoomOut(e,a){return this.zoomTo(this.getZoom()-1,e,a),this}getBearing(){return this.transform.bearing}setBearing(e,a){return this.jumpTo({bearing:e},a),this}getPadding(){return this.transform.padding}setPadding(e,a){return this.jumpTo({padding:e},a),this}rotateTo(e,a,u){return this.easeTo(l.e({bearing:e},a),u)}resetNorth(e,a){return this.rotateTo(0,l.e({duration:1e3},e),a),this}resetNorthPitch(e,a){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},e),a),this}snapToNorth(e,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,a):this}getPitch(){return this.transform.pitch}setPitch(e,a){return this.jumpTo({pitch:e},a),this}cameraForBounds(e,a){e=xe.convert(e).adjustAntiMeridian();const u=a&&a.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),u,a)}_cameraForBoxAndBearing(e,a,u,h){const f={top:0,bottom:0,right:0,left:0};if(typeof(h=l.e({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const Lt=h.padding;h.padding={top:Lt,bottom:Lt,right:Lt,left:Lt}}h.padding=l.e(f,h.padding);const C=this.transform,E=C.padding,Q=new xe(e,a),D=C.project(Q.getNorthWest()),R=C.project(Q.getNorthEast()),z=C.project(Q.getSouthEast()),ee=C.project(Q.getSouthWest()),oe=l.ba(-u),ce=D.rotate(oe),ve=R.rotate(oe),we=z.rotate(oe),Qe=ee.rotate(oe),Me=new l.P(Math.max(ce.x,ve.x,Qe.x,we.x),Math.max(ce.y,ve.y,Qe.y,we.y)),fe=new l.P(Math.min(ce.x,ve.x,Qe.x,we.x),Math.min(ce.y,ve.y,Qe.y,we.y)),Ne=Me.sub(fe),Ve=(C.width-(E.left+E.right+h.padding.left+h.padding.right))/Ne.x,Je=(C.height-(E.top+E.bottom+h.padding.top+h.padding.bottom))/Ne.y;if(Je<0||Ve<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const At=Math.min(C.scaleZoom(C.scale*Math.min(Ve,Je)),h.maxZoom),Ct=l.P.convert(h.offset),Ft=new l.P((h.padding.left-h.padding.right)/2,(h.padding.top-h.padding.bottom)/2).rotate(l.ba(u)),Ht=Ct.add(Ft).mult(C.scale/C.zoomScale(At));return{center:C.unproject(D.add(z).div(2).sub(Ht)),zoom:At,bearing:u}}fitBounds(e,a,u){return this._fitInternal(this.cameraForBounds(e,a),a,u)}fitScreenCoordinates(e,a,u,h,f){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(e)),this.transform.pointLocation(l.P.convert(a)),u,h),h,f)}_fitInternal(e,a,u){return e?(delete(a=l.e(e,a)).padding,a.linear?this.easeTo(a,u):this.flyTo(a,u)):this}jumpTo(e,a){this.stop();const u=this._getTransformForUpdate();let h=!1,f=!1,C=!1;return"zoom"in e&&u.zoom!==+e.zoom&&(h=!0,u.zoom=+e.zoom),e.center!==void 0&&(u.center=l.N.convert(e.center)),"bearing"in e&&u.bearing!==+e.bearing&&(f=!0,u.bearing=+e.bearing),"pitch"in e&&u.pitch!==+e.pitch&&(C=!0,u.pitch=+e.pitch),e.padding==null||u.isPaddingEqual(e.padding)||(u.padding=e.padding),this._applyUpdatedTransform(u),this.fire(new l.k("movestart",a)).fire(new l.k("move",a)),h&&this.fire(new l.k("zoomstart",a)).fire(new l.k("zoom",a)).fire(new l.k("zoomend",a)),f&&this.fire(new l.k("rotatestart",a)).fire(new l.k("rotate",a)).fire(new l.k("rotateend",a)),C&&this.fire(new l.k("pitchstart",a)).fire(new l.k("pitch",a)).fire(new l.k("pitchend",a)),this.fire(new l.k("moveend",a))}calculateCameraOptionsFromTo(e,a,u,h=0){const f=l.Z.fromLngLat(e,a),C=l.Z.fromLngLat(u,h),E=C.x-f.x,Q=C.y-f.y,D=C.z-f.z,R=Math.hypot(E,Q,D);if(R===0)throw new Error("Can't calculate camera options with same From and To");const z=Math.hypot(E,Q),ee=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),oe=180*Math.atan2(E,-Q)/Math.PI;let ce=180*Math.acos(z/R)/Math.PI;return ce=D<0?90-ce:90+ce,{center:C.toLngLat(),zoom:ee,pitch:ce,bearing:oe}}easeTo(e,a){var u;this._stop(!1,e.easeId),((e=l.e({offset:[0,0],duration:500,easing:l.b9},e)).animate===!1||!e.essential&&q.prefersReducedMotion)&&(e.duration=0);const h=this._getTransformForUpdate(),f=h.zoom,C=h.bearing,E=h.pitch,Q=h.padding,D="bearing"in e?this._normalizeBearing(e.bearing,C):C,R="pitch"in e?+e.pitch:E,z="padding"in e?e.padding:h.padding,ee=l.P.convert(e.offset);let oe=h.centerPoint.add(ee);const ce=h.pointLocation(oe),{center:ve,zoom:we}=h.getConstrained(l.N.convert(e.center||ce),(u=e.zoom)!==null&&u!==void 0?u:f);this._normalizeCenter(ve,h);const Qe=h.project(ce),Me=h.project(ve).sub(Qe),fe=h.zoomScale(we-f);let Ne,Ve;e.around&&(Ne=l.N.convert(e.around),Ve=h.locationPoint(Ne));const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==f,this._rotating=this._rotating||C!==D,this._pitching=this._pitching||R!==E,this._padding=!h.isPaddingEqual(z),this._easeId=e.easeId,this._prepareEase(a,e.noMoveStart,Je),this.terrain&&this._prepareElevation(ve),this._ease(At=>{if(this._zooming&&(h.zoom=l.y.number(f,we,At)),this._rotating&&(h.bearing=l.y.number(C,D,At)),this._pitching&&(h.pitch=l.y.number(E,R,At)),this._padding&&(h.interpolatePadding(Q,z,At),oe=h.centerPoint.add(ee)),this.terrain&&!e.freezeElevation&&this._updateElevation(At),Ne)h.setLocationAtPoint(Ne,Ve);else{const Ct=h.zoomScale(h.zoom-f),Ft=we>f?Math.min(2,fe):Math.max(.5,fe),Ht=Math.pow(Ft,1-At),Lt=h.unproject(Qe.add(Me.mult(At*Ht)).mult(Ct));h.setLocationAtPoint(h.renderWorldCopies?Lt.wrap():Lt,oe)}this._applyUpdatedTransform(h),this._fireMoveEvents(a)},At=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a,At)},e),this}_prepareEase(e,a,u={}){this._moving=!0,a||u.moving||this.fire(new l.k("movestart",e)),this._zooming&&!u.zooming&&this.fire(new l.k("zoomstart",e)),this._rotating&&!u.rotating&&this.fire(new l.k("rotatestart",e)),this._pitching&&!u.pitching&&this.fire(new l.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&a!==this._elevationTarget){const u=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(u-(a-(u*e+this._elevationStart))/(1-e)),this._elevationTarget=a}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const a=e.getCameraPosition(),u=this.terrain.getElevationForLngLatZoom(a.lngLat,e.zoom);if(a.altitude<u){const h=this.calculateCameraOptionsFromTo(a.lngLat,u,e.center,e.elevation);return{pitch:h.pitch,zoom:h.zoom}}return{}}_applyUpdatedTransform(e){const a=[];if(this.terrain&&a.push(h=>this._elevateCameraIfInsideTerrain(h)),this.transformCameraUpdate&&a.push(h=>this.transformCameraUpdate(h)),!a.length)return;const u=e.clone();for(const h of a){const f=u.clone(),{center:C,zoom:E,pitch:Q,bearing:D,elevation:R}=h(f);C&&(f.center=C),E!==void 0&&(f.zoom=E),Q!==void 0&&(f.pitch=Q),D!==void 0&&(f.bearing=D),R!==void 0&&(f.elevation=R),u.apply(f)}this.transform.apply(u)}_fireMoveEvents(e){this.fire(new l.k("move",e)),this._zooming&&this.fire(new l.k("zoom",e)),this._rotating&&this.fire(new l.k("rotate",e)),this._pitching&&this.fire(new l.k("pitch",e))}_afterEase(e,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const u=this._zooming,h=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,u&&this.fire(new l.k("zoomend",e)),h&&this.fire(new l.k("rotateend",e)),f&&this.fire(new l.k("pitchend",e)),this.fire(new l.k("moveend",e))}flyTo(e,a){var u;if(!e.essential&&q.prefersReducedMotion){const I=l.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(I,a)}this.stop(),e=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},e);const h=this._getTransformForUpdate(),f=h.zoom,C=h.bearing,E=h.pitch,Q=h.padding,D="bearing"in e?this._normalizeBearing(e.bearing,C):C,R="pitch"in e?+e.pitch:E,z="padding"in e?e.padding:h.padding,ee=l.P.convert(e.offset);let oe=h.centerPoint.add(ee);const ce=h.pointLocation(oe),{center:ve,zoom:we}=h.getConstrained(l.N.convert(e.center||ce),(u=e.zoom)!==null&&u!==void 0?u:f);this._normalizeCenter(ve,h);const Qe=h.zoomScale(we-f),Me=h.project(ce),fe=h.project(ve).sub(Me);let Ne=e.curve;const Ve=Math.max(h.width,h.height),Je=Ve/Qe,At=fe.mag();if("minZoom"in e){const I=l.ac(Math.min(e.minZoom,f,we),h.minZoom,h.maxZoom),y=Ve/h.zoomScale(I-f);Ne=Math.sqrt(y/At*2)}const Ct=Ne*Ne;function Ft(I){const y=(Je*Je-Ve*Ve+(I?-1:1)*Ct*Ct*At*At)/(2*(I?Je:Ve)*Ct*At);return Math.log(Math.sqrt(y*y+1)-y)}function Ht(I){return(Math.exp(I)-Math.exp(-I))/2}function Lt(I){return(Math.exp(I)+Math.exp(-I))/2}const Mt=Ft(!1);let ei=function(I){return Lt(Mt)/Lt(Mt+Ne*I)},bi=function(I){return Ve*((Lt(Mt)*(Ht(y=Mt+Ne*I)/Lt(y))-Ht(Mt))/Ct)/At;var y},b=(Ft(!0)-Mt)/Ne;if(Math.abs(At)<1e-6||!isFinite(b)){if(Math.abs(Ve-Je)<1e-6)return this.easeTo(e,a);const I=Je<Ve?-1:1;b=Math.abs(Math.log(Je/Ve))/Ne,bi=()=>0,ei=y=>Math.exp(I*Ne*y)}return e.duration="duration"in e?+e.duration:1e3*b/("screenSpeed"in e?+e.screenSpeed/Ne:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=C!==D,this._pitching=R!==E,this._padding=!h.isPaddingEqual(z),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(ve),this._ease(I=>{const y=I*b,k=1/ei(y);h.zoom=I===1?we:f+h.scaleZoom(k),this._rotating&&(h.bearing=l.y.number(C,D,I)),this._pitching&&(h.pitch=l.y.number(E,R,I)),this._padding&&(h.interpolatePadding(Q,z,I),oe=h.centerPoint.add(ee)),this.terrain&&!e.freezeElevation&&this._updateElevation(I);const T=I===1?ve:h.unproject(Me.add(fe.mult(bi(y))).mult(k));h.setLocationAtPoint(h.renderWorldCopies?T.wrap():T,oe),this._applyUpdatedTransform(h),this._fireMoveEvents(a)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,a){var u;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,a)}return e||(u=this.handlers)===null||u===void 0||u.stop(!1),this}_ease(e,a,u){u.animate===!1||u.duration===0?(e(1),a()):(this._easeStart=q.now(),this._easeOptions=u,this._onEaseFrame=e,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,a){e=l.b3(e,-180,180);const u=Math.abs(e-a);return Math.abs(e-360-a)<u&&(e-=360),Math.abs(e+360-a)<u&&(e+=360),e}_normalizeCenter(e,a){if(!a.renderWorldCopies||a.lngRange)return;const u=e.lng-a.center.lng;e.lng+=u>180?-360:u<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const oo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Oc{constructor(e=oo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=G.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=G.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=G.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){G.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,a){const u=this._map._getUIString(`AttributionControl.${a}`);e.title=u,e.setAttribute("aria-label",u)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(h=>typeof h!="string"?"":h)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}const a=this._map.style.sourceCaches;for(const h in a){const f=a[h];if(f.used||f.usedForTerrain){const C=f.getSource();C.attribution&&e.indexOf(C.attribution)<0&&e.push(C.attribution)}}e=e.filter(h=>String(h).trim()),e.sort((h,f)=>h.length-f.length),e=e.filter((h,f)=>{for(let C=f+1;C<e.length;C++)if(e[C].indexOf(h)>=0)return!1;return!0});const u=e.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,e.length?(this._innerContainer.innerHTML=u,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ii{constructor(e={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const u=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=G.create("div","maplibregl-ctrl");const a=G.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){G.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class zl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const a=++this._id;return this._queue.push({callback:e,id:a,cancelled:!1}),a}remove(e){const a=this._currentlyRunning,u=a?this._queue.concat(a):this._queue;for(const h of u)if(h.id===e)return void(h.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const u of a)if(!u.cancelled&&(u.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Su=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Vc extends l.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,a){this.sourceCache.update(e,a),this._renderableTilesKeys=[];const u={};for(const h of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))u[h.key]=!0,this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),l.aP(h.posMatrix,0,l.X,0,l.X,0,1),this._tiles[h.key]=new Pn(h,this.tileSize));for(const h in this._tiles)u[h]||delete this._tiles[h]}freeRtt(e){for(const a in this._tiles){const u=this._tiles[a];(!e||u.tileID.equals(e)||u.tileID.isChildOf(e)||e.isChildOf(u.tileID))&&(u.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const a={};for(const u of this._renderableTilesKeys){const h=this._tiles[u].tileID;if(h.canonical.equals(e.canonical)){const f=e.clone();f.posMatrix=new Float64Array(16),l.aP(f.posMatrix,0,l.X,0,l.X,0,1),a[u]=f}else if(h.canonical.isChildOf(e.canonical)){const f=e.clone();f.posMatrix=new Float64Array(16);const C=h.canonical.z-e.canonical.z,E=h.canonical.x-(h.canonical.x>>C<<C),Q=h.canonical.y-(h.canonical.y>>C<<C),D=l.X>>C;l.aP(f.posMatrix,0,D,0,D,0,1),l.J(f.posMatrix,f.posMatrix,[-E*D,-Q*D,0]),a[u]=f}else if(e.canonical.isChildOf(h.canonical)){const f=e.clone();f.posMatrix=new Float64Array(16);const C=e.canonical.z-h.canonical.z,E=e.canonical.x-(e.canonical.x>>C<<C),Q=e.canonical.y-(e.canonical.y>>C<<C),D=l.X>>C;l.aP(f.posMatrix,0,l.X,0,l.X,0,1),l.J(f.posMatrix,f.posMatrix,[E*D,Q*D,0]),l.K(f.posMatrix,f.posMatrix,[1/2**C,1/2**C,0]),a[u]=f}}return a}getSourceTile(e,a){const u=this.sourceCache._source;let h=e.overscaledZ-this.deltaZoom;if(h>u.maxzoom&&(h=u.maxzoom),h<u.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(h).key);let f=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!f||!f.dem)&&a)for(;h>=u.minzoom&&(!f||!f.dem);)f=this.sourceCache.getTileByID(e.scaledTo(h--).key);return f}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=e)}}class ku{constructor(e,a,u){this.painter=e,this.sourceCache=new Vc(a),this.options=u,this.exaggeration=typeof u.exaggeration=="number"?u.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,a,u,h=l.X){var f;if(!(a>=0&&a<h&&u>=0&&u<h))return 0;const C=this.getTerrainData(e),E=(f=C.tile)===null||f===void 0?void 0:f.dem;if(!E)return 0;const Q=function(ce,ve,we){var Qe=ve[0],Me=ve[1];return ce[0]=we[0]*Qe+we[4]*Me+we[12],ce[1]=we[1]*Qe+we[5]*Me+we[13],ce}([],[a/h*l.X,u/h*l.X],C.u_terrain_matrix),D=[Q[0]*E.dim,Q[1]*E.dim],R=Math.floor(D[0]),z=Math.floor(D[1]),ee=D[0]-R,oe=D[1]-z;return E.get(R,z)*(1-ee)*(1-oe)+E.get(R+1,z)*ee*(1-oe)+E.get(R,z+1)*(1-ee)*oe+E.get(R+1,z+1)*ee*oe}getElevationForLngLatZoom(e,a){if(!l.bb(a,e.wrap()))return 0;const{tileID:u,mercatorX:h,mercatorY:f}=this._getOverscaledTileIDFromLngLatZoom(e,a);return this.getElevation(u,h%l.X,f%l.X,l.X)}getElevation(e,a,u,h=l.X){return this.getDEMElevation(e,a,u,h)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const h=this.painter.context,f=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new mt(h,f,h.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new mt(h,new l.R({width:1,height:1}),h.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const a=this.sourceCache.getSourceTile(e,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const h=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new mt(h,a.dem.getPixels(),h.gl.RGBA,{premultiply:!1}),a.demTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const u=a&&a+a.tileID.key+e.key;if(u&&!this._demMatrixCache[u]){const h=this.sourceCache.sourceCache._source.maxzoom;let f=e.canonical.z-a.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=h?f=e.canonical.z-h:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=e.canonical.x-(e.canonical.x>>f<<f),E=e.canonical.y-(e.canonical.y>>f<<f),Q=l.bc(new Float64Array(16),[1/(l.X<<f),1/(l.X<<f),0]);l.J(Q,Q,[C*l.X,E*l.X,0]),this._demMatrixCache[e.key]={matrix:Q,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:u?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(e){const a=this.painter,u=a.width/devicePixelRatio,h=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===u&&this._fbo.height===h||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new mt(a.context,{width:u,height:h,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new mt(a.context,{width:u,height:h,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(u,h,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,u,h))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let f=0,C=0;f<this._coordsTextureSize;f++)for(let E=0;E<this._coordsTextureSize;E++,C+=4)a[C+0]=255&E,a[C+1]=255&f,a[C+2]=E>>8<<4|f>>8,a[C+3]=0;const u=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),h=new mt(e,u,e.gl.RGBA,{premultiply:!1});return h.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=h,h}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),u=this.painter.context,h=u.gl,f=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);u.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),h.readPixels(f,E-C-1,1,1,h.RGBA,h.UNSIGNED_BYTE,a),u.bindFramebuffer.set(null);const Q=a[0]+(a[2]>>4<<8),D=a[1]+((15&a[2])<<8),R=this.coordsIndex[255-a[3]],z=R&&this.sourceCache.getTileByID(R);if(!z)return null;const ee=this._coordsTextureSize,oe=(1<<z.tileID.canonical.z)*ee;return new l.Z((z.tileID.canonical.x*ee+Q)/oe+z.tileID.wrap,(z.tileID.canonical.y*ee+D)/oe,this.getElevation(z.tileID,Q,D,ee))}depthAtPoint(e){const a=new Uint8Array(4),u=this.painter.context,h=u.gl;return u.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),h.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,h.RGBA,h.UNSIGNED_BYTE,a),u.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,a=new l.bd,u=new l.aY,h=this.meshSize,f=l.X/h,C=h*h;for(let z=0;z<=h;z++)for(let ee=0;ee<=h;ee++)a.emplaceBack(ee*f,z*f,0);for(let z=0;z<C;z+=h+1)for(let ee=0;ee<h;ee++)u.emplaceBack(ee+z,h+ee+z+1,h+ee+z+2),u.emplaceBack(ee+z,h+ee+z+2,ee+z+1);const E=a.length,Q=E+2*(h+1);for(const z of[0,1])for(let ee=0;ee<=h;ee++)for(const oe of[0,1])a.emplaceBack(ee*f,z*l.X,oe);for(let z=0;z<2*h;z+=2)u.emplaceBack(Q+z,Q+z+1,Q+z+3),u.emplaceBack(Q+z,Q+z+3,Q+z+2),u.emplaceBack(E+z,E+z+3,E+z+1),u.emplaceBack(E+z,E+z+2,E+z+3);const D=a.length,R=D+2*(h+1);for(const z of[0,1])for(let ee=0;ee<=h;ee++)for(const oe of[0,1])a.emplaceBack(z*l.X,ee*f,oe);for(let z=0;z<2*h;z+=2)u.emplaceBack(D+z,D+z+1,D+z+3),u.emplaceBack(D+z,D+z+3,D+z+2),u.emplaceBack(R+z,R+z+3,R+z+1),u.emplaceBack(R+z,R+z+2,R+z+3);return this._mesh=new Ws(e.createVertexBuffer(a,Su.members),e.createIndexBuffer(u),l.a0.simpleSegment(0,0,a.length,u.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*l.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,a){var u;const{tileID:h}=this._getOverscaledTileIDFromLngLatZoom(e,a);return(u=this.getMinMaxElevation(h).minElevation)!==null&&u!==void 0?u:0}getMinMaxElevation(e){const a=this.getTerrainData(e).tile,u={minElevation:null,maxElevation:null};return a&&a.dem&&(u.minElevation=a.dem.min*this.exaggeration,u.maxElevation=a.dem.max*this.exaggeration),u}_getOverscaledTileIDFromLngLatZoom(e,a){const u=l.Z.fromLngLat(e.wrap()),h=(1<<a)*l.X,f=u.x*h,C=u.y*h,E=Math.floor(f/l.X),Q=Math.floor(C/l.X);return{tileID:new l.S(a,0,a,E,Q),mercatorX:f,mercatorY:C}}}class Gl{constructor(e,a,u){this._context=e,this._size=a,this._tileSize=u,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),u=new mt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return u.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(u.texture),{id:e,fbo:a,texture:u,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>e.id!==a),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const Ca={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class oa{constructor(e,a){this.painter=e,this.terrain=a,this.pool=new Gl(e.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(u=>!e._layers[u].isHidden(a)),this._coordsDescendingInv={};for(const u in e.sourceCaches){this._coordsDescendingInv[u]={};const h=e.sourceCaches[u].getVisibleCoordinates();for(const f of h){const C=this.terrain.sourceCache.getTerrainCoords(f);for(const E in C)this._coordsDescendingInv[u][E]||(this._coordsDescendingInv[u][E]=[]),this._coordsDescendingInv[u][E].push(C[E])}}this._coordsDescendingInvStr={};for(const u of e._order){const h=e._layers[u],f=h.source;if(Ca[h.type]&&!this._coordsDescendingInvStr[f]){this._coordsDescendingInvStr[f]={};for(const C in this._coordsDescendingInv[f])this._coordsDescendingInvStr[f][C]=this._coordsDescendingInv[f][C].map(E=>E.key).sort().join()}}for(const u of this._renderableTiles)for(const h in this._coordsDescendingInvStr){const f=this._coordsDescendingInvStr[h][u.tileID.key];f&&f!==u.rttCoords[h]&&(u.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const a=e.type,u=this.painter,h=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Ca[a]&&(this._prevType&&Ca[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(e.id),!h))return!0;if(Ca[this._prevType]||Ca[a]&&h){this._prevType=a;const f=this._stacks.length-1,C=this._stacks[f]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(zo(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[f]){const D=this.pool.getObjectForId(E.rtt[f].id);if(D.stamp===E.rtt[f].stamp){this.pool.useObject(D);continue}}const Q=this.pool.getOrCreateFreeObject();this.pool.useObject(Q),this.pool.stampObject(Q),E.rtt[f]={id:Q.id,stamp:Q.stamp},u.context.bindFramebuffer.set(Q.fbo.framebuffer),u.context.clear({color:l.aM.transparent,stencil:0}),u.currentStencilSource=void 0;for(let D=0;D<C.length;D++){const R=u.style._layers[C[D]],z=R.source?this._coordsDescendingInv[R.source][E.tileID.key]:[E.tileID];u.context.viewport.set([0,0,Q.fbo.width,Q.fbo.height]),u._renderTileClippingMasks(R,z),u.renderLayer(u,u.style.sourceCaches[R.source],R,z),R.source&&(E.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][E.tileID.key])}}return zo(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ca[a]}return!1}}const Nl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},qc=V,Zo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:oo,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Wo=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Hc={showCompass:!0,showZoom:!0,visualizePitch:!1};class on{constructor(e,a,u=!1){this.mousedown=C=>{this.startMouse(l.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),G.mousePos(this.element,C)),G.addEventListener(window,"mousemove",this.mousemove),G.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,G.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=G.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),G.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),G.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=G.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const h=e.dragRotate._mouseRotate.getClickTolerance(),f=e.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=Fc({clickTolerance:h,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:E,bearingDegreesPerPixelMoved:Q=.8})=>{const D=new Lc;return new Ps({clickTolerance:E,move:(R,z)=>({bearingDelta:(z.x-R.x)*Q}),moveStateManager:D,enable:C,assignEvents:Wo})})({clickTolerance:h,enable:!0}),this.map=e,u&&(this.mousePitch=hs({clickTolerance:f,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:E,pitchDegreesPerPixelMoved:Q=-.5})=>{const D=new Lc;return new Ps({clickTolerance:E,move:(R,z)=>({pitchDelta:(z.y-R.y)*Q}),moveStateManager:D,enable:C,assignEvents:Wo})})({clickTolerance:f,enable:!0})),G.addEventListener(a,"mousedown",this.mousedown),G.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),G.addEventListener(a,"touchcancel",this.reset)}startMouse(e,a){this.mouseRotate.dragStart(e,a),this.mousePitch&&this.mousePitch.dragStart(e,a),G.disableDrag()}startTouch(e,a){this.touchRotate.dragStart(e,a),this.touchPitch&&this.touchPitch.dragStart(e,a),G.disableDrag()}moveMouse(e,a){const u=this.map,{bearingDelta:h}=this.mouseRotate.dragMove(e,a)||{};if(h&&u.setBearing(u.getBearing()+h),this.mousePitch){const{pitchDelta:f}=this.mousePitch.dragMove(e,a)||{};f&&u.setPitch(u.getPitch()+f)}}moveTouch(e,a){const u=this.map,{bearingDelta:h}=this.touchRotate.dragMove(e,a)||{};if(h&&u.setBearing(u.getBearing()+h),this.touchPitch){const{pitchDelta:f}=this.touchPitch.dragMove(e,a)||{};f&&u.setPitch(u.getPitch()+f)}}off(){const e=this.element;G.removeEventListener(e,"mousedown",this.mousedown),G.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),G.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),G.removeEventListener(window,"touchend",this.touchend),G.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){G.enableDrag(),G.removeEventListener(window,"mousemove",this.mousemove),G.removeEventListener(window,"mouseup",this.mouseup),G.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),G.removeEventListener(window,"touchend",this.touchend)}}let $i;function Xo(g,e,a){const u=new l.N(g.lng,g.lat);if(g=new l.N(g.lng,g.lat),e){const h=new l.N(g.lng-360,g.lat),f=new l.N(g.lng+360,g.lat),C=a.locationPoint(g).distSqr(e);a.locationPoint(h).distSqr(e)<C?g=h:a.locationPoint(f).distSqr(e)<C&&(g=f)}for(;Math.abs(g.lng-a.center.lng)>180;){const h=a.locationPoint(g);if(h.x>=0&&h.y>=0&&h.x<=a.width&&h.y<=a.height)break;g.lng>a.center.lng?g.lng-=360:g.lng+=360}return g.lng!==u.lng&&a.locationPoint(g).y>a.height/2-a.getHorizon()?g:u}const la={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ul(g,e,a){const u=g.classList;for(const h in la)u.remove(`maplibregl-${a}-anchor-${h}`);u.add(`maplibregl-${a}-anchor-${e}`)}class el extends l.E{constructor(e){if(super(),this._onKeyPress=a=>{const u=a.code,h=a.charCode||a.keyCode;u!=="Space"&&u!=="Enter"&&h!==32&&h!==13||this.togglePopup()},this._onMapClick=a=>{const u=a.originalEvent.target,h=this._element;this._popup&&(u===h||h.contains(u))&&this.togglePopup()},this._update=a=>{var u;if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Xo(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),G.setTransform(this._element,`${la[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${f}`),q.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=l.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=G.create("div");const a=G.createNS("http://www.w3.org/2000/svg","svg"),u=41,h=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${u}px`),a.setAttributeNS(null,"width",`${h}px`),a.setAttributeNS(null,"viewBox",`0 0 ${h} ${u}`);const f=G.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"stroke","none"),f.setAttributeNS(null,"stroke-width","1"),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"fill-rule","evenodd");const C=G.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const E=G.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const Q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Qe of Q){const Me=G.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",Qe.rx),Me.setAttributeNS(null,"ry",Qe.ry),E.appendChild(Me)}const D=G.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const R=G.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(R);const z=G.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");const ee=G.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(ee);const oe=G.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const ce=G.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ve=G.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#000000"),ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962");const we=G.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#FFFFFF"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962"),ce.appendChild(ve),ce.appendChild(we),C.appendChild(E),C.appendChild(D),C.appendChild(z),C.appendChild(oe),C.appendChild(ce),a.appendChild(C),a.setAttributeNS(null,"height",u*this._scale+"px"),a.setAttributeNS(null,"width",h*this._scale+"px"),this._element.appendChild(a),this._offset=l.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Ul(this._element,this._anchor,"marker"),e&&e.className)for(const a of e.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),G.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=l.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const h=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var a,u;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const h=this._map,f=h.terrain.depthAtPoint(this._pos),C=h.terrain.getElevationForLngLatZoom(this._lngLat,h.transform.tileZoom);if(h.transform.lngLatToCameraDepth(this._lngLat,C)-f<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/h.transform._pixelPerMeter,Q=Math.sin(h.getPitch()*Math.PI/180)*E,D=h.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),R=h.transform.lngLatToCameraDepth(this._lngLat,C+Q)-D>.006;!((u=this._popup)===null||u===void 0)&&u.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=l.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,a){return e===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const jc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let tl=0,or=!1;const lo={maxWidth:100,unit:"metric"};function ni(g,e,a){const u=a&&a.maxWidth||100,h=g._container.clientHeight/2,f=g.unproject([0,h]),C=g.unproject([u,h]),E=f.distanceTo(C);if(a&&a.unit==="imperial"){const Q=3.2808*E;Q>5280?Ai(e,u,Q/5280,g._getUIString("ScaleControl.Miles")):Ai(e,u,Q,g._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Ai(e,u,E/1852,g._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Ai(e,u,E/1e3,g._getUIString("ScaleControl.Kilometers")):Ai(e,u,E,g._getUIString("ScaleControl.Meters"))}function Ai(g,e,a,u){const h=function(f){const C=Math.pow(10,`${Math.floor(f)}`.length-1);let E=f/C;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(Q){const D=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*D)/D}(E),C*E}(a);g.style.width=e*(h/a)+"px",g.innerHTML=`${h}&nbsp;${u}`}const il={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Jc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function qr(g){if(g){if(typeof g=="number"){const e=Math.round(Math.abs(g)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,g),"top-left":new l.P(e,e),"top-right":new l.P(-e,e),bottom:new l.P(0,-g),"bottom-left":new l.P(e,-e),"bottom-right":new l.P(-e,-e),left:new l.P(g,0),right:new l.P(-g,0)}}if(g instanceof l.P||Array.isArray(g)){const e=l.P.convert(g);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:l.P.convert(g.center||[0,0]),top:l.P.convert(g.top||[0,0]),"top-left":l.P.convert(g["top-left"]||[0,0]),"top-right":l.P.convert(g["top-right"]||[0,0]),bottom:l.P.convert(g.bottom||[0,0]),"bottom-left":l.P.convert(g["bottom-left"]||[0,0]),"bottom-right":l.P.convert(g["bottom-right"]||[0,0]),left:l.P.convert(g.left||[0,0]),right:l.P.convert(g.right||[0,0])}}return qr(new l.P(0,0))}const Ir=V;v.AJAXError=l.bh,v.Evented=l.E,v.LngLat=l.N,v.MercatorCoordinate=l.Z,v.Point=l.P,v.addProtocol=l.bi,v.config=l.a,v.removeProtocol=l.bj,v.AttributionControl=Oc,v.BoxZoomHandler=za,v.CanvasSource=di,v.CooperativeGesturesHandler=wa,v.DoubleClickZoomHandler=Yo,v.DragPanHandler=Qu,v.DragRotateHandler=Nc,v.EdgeInsets=eo,v.FullscreenControl=class extends l.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var e;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=a==null?void 0:a.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){G.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=G.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);G.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},v.GeoJSONSource=Bt,v.GeolocateControl=class extends l.E{constructor(g){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const a=new l.N(e.coords.longitude,e.coords.latitude),u=e.coords.accuracy,h=this._map.getBearing(),f=l.e({bearing:h},this.options.fitBoundsOptions),C=xe.fromLngLat(a,u);this._map.fitBounds(C,f,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const a=new l.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&or)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=G.create("button","maplibregl-ctrl-geolocate",this._container),G.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=G.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new el({element:this._dotElement}),this._circleElement=G.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new el({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))})}},this.options=l.e({},jc,g)}onAdd(g){return this._map=g,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(e=!1){if($i!==void 0&&!e)return $i;if(window.navigator.permissions===void 0)return $i=!!window.navigator.geolocation,$i;try{$i=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{$i=!!window.navigator.geolocation}return $i})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),G.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,tl=0,or=!1}_isOutOfMapMaxBounds(g){const e=this._map.getMaxBounds(),a=g.coords;return e&&(a.longitude<e.getWest()||a.longitude>e.getEast()||a.latitude<e.getSouth()||a.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),e=g.getSouthEast(),a=g.getNorthEast(),u=e.distanceTo(a),h=Math.ceil(this._accuracy/(u/this._map._container.clientHeight)*2);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":tl--,or=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),tl++,tl>1?(g={maximumAge:6e5,timeout:0},or=!0):(g=this.options.positionOptions,or=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},v.Hash=xu,v.ImageSource=Ot,v.KeyboardHandler=Vr,v.LngLatBounds=xe,v.LogoControl=Ii,v.Map=class extends sa{constructor(g){l.bf.mark(l.bg.create);const e=Object.assign(Object.assign({},Zo),g);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new to(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new zl,this._controls=[],this._mapId=l.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Nl),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ot.addThrottleControl(()=>this.isMoving()),this._requestManager=new ft(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const u=Uo(h=>{this._trackResize&&!this._removed&&(this.resize(h),this.redraw())},50);this._resizeObserver=new ResizeObserver(h=>{a?u(h):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $o(this,e),this._hash=e.hash&&new xu(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,l.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Oc(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new Ii,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(g,e){if(e===void 0&&(e=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=g.onAdd(this);this._controls.push(g);const u=this._controlPositions[e];return e.indexOf("bottom")!==-1?u.insertBefore(a,u.firstChild):u.appendChild(a),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(g);return e>-1&&this._controls.splice(e,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,e,a,u){return u==null&&this.terrain&&(u=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,e,a,u)}resize(g){var e;const a=this._containerDimensions(),u=a[0],h=a[1],f=this._getClampedPixelRatio(u,h);if(this._resizeCanvas(u,h,f),this.painter.resize(u,h,f),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const Q=this._getClampedPixelRatio(u,h);this._resizeCanvas(u,h,Q),this.painter.resize(u,h,Q)}this.transform.resize(u,h),(e=this._requestedCameraState)===null||e===void 0||e.resize(u,h);const C=!this._moving;return C&&(this.stop(),this.fire(new l.k("movestart",g)).fire(new l.k("move",g))),this.fire(new l.k("resize",g)),C&&this.fire(new l.k("moveend",g)),this}_getClampedPixelRatio(g,e){const{0:a,1:u}=this._maxCanvasSize,h=this.getPixelRatio(),f=g*h,C=e*h;return Math.min(f>a?a/f:1,C>u?u/C:1)*h}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(xe.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(l.N.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(l.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,e,a){if(g==="mouseenter"||g==="mouseover"){let u=!1;return{layers:e,listener:a,delegates:{mousemove:f=>{const C=e.filter(Q=>this.getLayer(Q)),E=C.length!==0?this.queryRenderedFeatures(f.point,{layers:C}):[];E.length?u||(u=!0,a.call(this,new Xn(g,this,f.originalEvent,{features:E}))):u=!1},mouseout:()=>{u=!1}}}}if(g==="mouseleave"||g==="mouseout"){let u=!1;return{layers:e,listener:a,delegates:{mousemove:C=>{const E=e.filter(Q=>this.getLayer(Q));(E.length!==0?this.queryRenderedFeatures(C.point,{layers:E}):[]).length?u=!0:u&&(u=!1,a.call(this,new Xn(g,this,C.originalEvent)))},mouseout:C=>{u&&(u=!1,a.call(this,new Xn(g,this,C.originalEvent)))}}}}{const u=h=>{const f=e.filter(E=>this.getLayer(E)),C=f.length!==0?this.queryRenderedFeatures(h.point,{layers:f}):[];C.length&&(h.features=C,a.call(this,h),delete h.features)};return{layers:e,listener:a,delegates:{[g]:u}}}}_saveDelegatedListener(g,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(e)}_removeDelegatedListener(g,e,a){if(!this._delegatedListeners||!this._delegatedListeners[g])return;const u=this._delegatedListeners[g];for(let h=0;h<u.length;h++){const f=u[h];if(f.listener===a&&f.layers.length===e.length&&f.layers.every(C=>e.includes(C))){for(const C in f.delegates)this.off(C,f.delegates[C]);return void u.splice(h,1)}}}on(g,e,a){if(a===void 0)return super.on(g,e);const u=this._createDelegatedListener(g,typeof e=="string"?[e]:e,a);this._saveDelegatedListener(g,u);for(const h in u.delegates)this.on(h,u.delegates[h]);return this}once(g,e,a){if(a===void 0)return super.once(g,e);const u=typeof e=="string"?[e]:e,h=this._createDelegatedListener(g,u,a);for(const f in h.delegates){const C=h.delegates[f];h.delegates[f]=(...E)=>{this._removeDelegatedListener(g,u,a),C(...E)}}this._saveDelegatedListener(g,h);for(const f in h.delegates)this.once(f,h.delegates[f]);return this}off(g,e,a){return a===void 0?super.off(g,e):(this._removeDelegatedListener(g,typeof e=="string"?[e]:e,a),this)}queryRenderedFeatures(g,e){if(!this.style)return[];let a;const u=g instanceof l.P||Array.isArray(g),h=u?g:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(u?{}:g)||{},h instanceof l.P||typeof h[0]=="number")a=[l.P.convert(h)];else{const f=l.P.convert(h[0]),C=l.P.convert(h[1]);a=[f,new l.P(C.x,f.y),C,new l.P(f.x,C.y),f]}return this.style.queryRenderedFeatures(a,e,this.transform)}querySourceFeatures(g,e){return this.style.querySourceFeatures(g,e)}setStyle(g,e){return(e=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(g,e))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const e=this._locale[g];if(e==null)throw new Error(`Missing UI string '${g}'`);return e}_updateStyle(g,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,e));const a=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new yl(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,e,a):this.style.loadJSON(g,e,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new yl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,e){if(typeof g=="string"){const a=this._requestManager.transformRequest(g,"Style");l.h(a,new AbortController).then(u=>{this._updateDiff(u.data,e)}).catch(u=>{u&&this.fire(new l.j(u))})}else typeof g=="object"&&this._updateDiff(g,e)}_updateDiff(g,e){try{this.style.setState(g,e)&&this._update(!0)}catch(a){l.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(g,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(g,e){return this._lazyInitEmptyStyle(),this.style.addSource(g,e),this._update(!0)}isSourceLoaded(g){const e=this.style&&this.style.sourceCaches[g];if(e!==void 0)return e.loaded();this.fire(new l.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const e=this.style.sourceCaches[g.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&e.reload();for(const a in this.style._layers){const u=this.style._layers[a];u.type==="hillshade"&&u.source===g.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ku(this.painter,e,g),this.painter.renderToTexture=new oa(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==g.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:g})),this}getTerrain(){var g,e;return(e=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const e in g){const a=g[e]._tiles;for(const u in a){const h=a[u];if(h.state!=="loaded"&&h.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,e,a={}){const{pixelRatio:u=1,sdf:h=!1,stretchX:f,stretchY:C,content:E,textFitWidth:Q,textFitHeight:D}=a;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||l.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:z,data:ee}=e,oe=e;return this.style.addImage(g,{data:new l.R({width:R,height:z},new Uint8Array(ee)),pixelRatio:u,stretchX:f,stretchY:C,content:E,textFitWidth:Q,textFitHeight:D,sdf:h,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,g),this}}{const{width:R,height:z,data:ee}=q.getImageData(e);this.style.addImage(g,{data:new l.R({width:R,height:z},ee),pixelRatio:u,stretchX:f,stretchY:C,content:E,textFitWidth:Q,textFitHeight:D,sdf:h,version:0})}}updateImage(g,e){const a=this.style.getImage(g);if(!a)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const u=e instanceof HTMLImageElement||l.b(e)?q.getImageData(e):e,{width:h,height:f,data:C}=u;if(h===void 0||f===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==a.data.width||f!==a.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(e instanceof HTMLImageElement||l.b(e));return a.data.replace(C,E),this.style.updateImage(g,a),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return ot.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,e){return this._lazyInitEmptyStyle(),this.style.addLayer(g,e),this._update(!0)}moveLayer(g,e){return this.style.moveLayer(g,e),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,e,a){return this.style.setLayerZoomRange(g,e,a),this._update(!0)}setFilter(g,e,a={}){return this.style.setFilter(g,e,a),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,e,a,u={}){return this.style.setPaintProperty(g,e,a,u),this._update(!0)}getPaintProperty(g,e){return this.style.getPaintProperty(g,e)}setLayoutProperty(g,e,a,u={}){return this.style.setLayoutProperty(g,e,a,u),this._update(!0)}getLayoutProperty(g,e){return this.style.getLayoutProperty(g,e)}setGlyphs(g,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,e,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,e,a,u=>{u||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,e,a=>{a||this._update(!0)}),this}setLight(g,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(g){return this._lazyInitEmptyStyle(),this.style.setSky(g),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,e){return this.style.setFeatureState(g,e),this._update()}removeFeatureState(g,e){return this.style.removeFeatureState(g,e),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,e=0;return this._container&&(g=this._container.clientWidth||400,e=this._container.clientHeight||300),[g,e]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const e=this._canvasContainer=G.create("div","maplibregl-canvas-container",g);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=G.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),u=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],u);const h=this._controlContainer=G.create("div","maplibregl-control-container",g),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{f[C]=G.create("div",`maplibregl-ctrl-${C} `,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,e,a){this._canvas.width=Math.floor(a*g),this._canvas.height=Math.floor(a*e),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",u=>{e={requestedAttributes:g},u&&(e.statusMessage=u.statusMessage,e.type=u.type)},{once:!0});const a=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!a){const u="Failed to initialize WebGL";throw e?(e.message=u,new Error(JSON.stringify(e))):new Error(u)}this.painter=new Go(a,this.transform),me.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const h=this.transform.zoom,f=q.now();this.style.zoomHistory.update(h,f);const C=new l.z(h,{now:f,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=C.crossFadingFactor();E===1&&E===this._crossFadingFactor||(a=!0,this._crossFadingFactor=E),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const u=this._sourcesDirty||this._styleDirty||this._placementDirty;return u||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||u||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ot.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),G.remove(this._canvasContainer),G.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,q.frameAsync(this._frameRequest).then(g=>{l.bf.frame(g),this._frameRequest=null,this._render(g)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return qc}getCameraTargetElevation(){return this.transform.elevation}},v.MapMouseEvent=Xn,v.MapTouchEvent=ls,v.MapWheelEvent=ro,v.Marker=el,v.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const e=this._map.getZoom(),a=e===this._map.getMaxZoom(),u=e===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,a)=>{const u=this._map._getUIString(`NavigationControl.${a}`);e.title=u,e.setAttribute("aria-label",u)},this.options=l.e({},Hc,g),this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),G.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),G.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=G.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new on(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){G.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,e){const a=G.create("button",g,this._container);return a.type="button",a.addEventListener("click",e),a}},v.Popup=class extends l.E{constructor(g){super(),this.remove=()=>(this._content&&G.remove(this._content),this._container&&(G.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=G.create("div","maplibregl-popup",this._map.getContainer()),this._tip=G.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Xo(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!e)return;const u=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let h=this.options.anchor;const f=qr(this.options.offset);if(!h){const E=this._container.offsetWidth,Q=this._container.offsetHeight;let D;D=u.y+f.bottom.y<Q?["top"]:u.y>this._map.transform.height-Q?["bottom"]:[],u.x<E/2?D.push("left"):u.x>this._map.transform.width-E/2&&D.push("right"),h=D.length===0?"bottom":D.join("-")}let C=u.add(f[h]);this.options.subpixelPositioning||(C=C.round()),G.setTransform(this._container,`${la[h]} translate(${C.x}px,${C.y}px)`),Ul(this._container,h,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(il),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=l.N.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const e=document.createDocumentFragment(),a=document.createElement("body");let u;for(a.innerHTML=g;u=a.firstChild,u;)e.appendChild(u);return this.setDOMContent(e)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=G.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=G.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Jc);g&&g.focus()}},v.RasterDEMTileSource=xt,v.RasterTileSource=_t,v.ScaleControl=class{constructor(g){this._onMove=()=>{ni(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,ni(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},lo),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){G.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},v.ScrollZoomHandler=Rs,v.Style=yl,v.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=G.create("button","maplibregl-ctrl-terrain",this._container),G.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){G.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},v.TwoFingersTouchPitchHandler=Gc,v.TwoFingersTouchRotateHandler=Jo,v.TwoFingersTouchZoomHandler=zc,v.TwoFingersTouchZoomRotateHandler=so,v.VectorTileSource=Vt,v.VideoSource=hi,v.addSourceType=(g,e)=>l._(void 0,void 0,void 0,function*(){if(ji(g))throw new Error(`A source type called "${g}" already exists.`);((a,u)=>{Ri[a]=u})(g,e)}),v.clearPrewarmedResources=function(){const g=un;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Fi),un=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},v.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},v.getRTLTextPluginStatus=function(){return Tn().getRTLTextPluginStatus()},v.getVersion=function(){return Ir},v.getWorkerCount=function(){return dn.workerCount},v.getWorkerUrl=function(){return l.a.WORKER_URL},v.importScriptInWorkers=function(g){return Qr().broadcast("IS",g)},v.prewarm=function(){On().acquire(Fi)},v.setMaxParallelImageRequests=function(g){l.a.MAX_PARALLEL_IMAGE_REQUESTS=g},v.setRTLTextPlugin=function(g,e){return Tn().setRTLTextPlugin(g,e)},v.setWorkerCount=function(g){dn.workerCount=g},v.setWorkerUrl=function(g){l.a.WORKER_URL=g}});var w=c;return w})})($_);var QB=$_.exports;const qA=EB(QB);var $a=Uint8Array,Ku=Uint16Array,SB=Int32Array,W_=new $a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),X_=new $a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kB=new $a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ev=function(i,s){for(var c=new Ku(31),d=0;d<31;++d)c[d]=s+=1<<i[d-1];for(var _=new SB(c[30]),d=1;d<30;++d)for(var w=c[d];w<c[d+1];++w)_[w]=w-c[d]<<5|d;return{b:c,r:_}},tv=ev(W_,2),iv=tv.b,DB=tv.r;iv[28]=258,DB[258]=28;var MB=ev(X_,0),TB=MB.b,ig=new Ku(32768);for(var Gn=0;Gn<32768;++Gn){var Zl=(Gn&43690)>>1|(Gn&21845)<<1;Zl=(Zl&52428)>>2|(Zl&13107)<<2,Zl=(Zl&61680)>>4|(Zl&3855)<<4,ig[Gn]=((Zl&65280)>>8|(Zl&255)<<8)>>1}var Zh=function(i,s,c){for(var d=i.length,_=0,w=new Ku(s);_<d;++_)i[_]&&++w[i[_]-1];var v=new Ku(s);for(_=1;_<s;++_)v[_]=v[_-1]+w[_-1]<<1;var l;if(c){l=new Ku(1<<s);var V=15-s;for(_=0;_<d;++_)if(i[_])for(var W=_<<4|i[_],H=s-i[_],q=v[i[_]-1]++<<H,G=q|(1<<H)-1;q<=G;++q)l[ig[q]>>V]=W}else for(l=new Ku(d),_=0;_<d;++_)i[_]&&(l[_]=ig[v[i[_]-1]++]>>15-i[_]);return l},yA=new $a(288);for(var Gn=0;Gn<144;++Gn)yA[Gn]=8;for(var Gn=144;Gn<256;++Gn)yA[Gn]=9;for(var Gn=256;Gn<280;++Gn)yA[Gn]=7;for(var Gn=280;Gn<288;++Gn)yA[Gn]=8;var nv=new $a(32);for(var Gn=0;Gn<32;++Gn)nv[Gn]=5;var PB=Zh(yA,9,1),RB=Zh(nv,5,1),Lf=function(i){for(var s=i[0],c=1;c<i.length;++c)i[c]>s&&(s=i[c]);return s},Ns=function(i,s,c){var d=s/8|0;return(i[d]|i[d+1]<<8)>>(s&7)&c},Ff=function(i,s){var c=s/8|0;return(i[c]|i[c+1]<<8|i[c+2]<<16)>>(s&7)},LB=function(i){return(i+7)/8|0},FB=function(i,s,c){return(c==null||c>i.length)&&(c=i.length),new $a(i.subarray(s,c))},zB=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ka=function(i,s,c){var d=new Error(s||zB[i]);if(d.code=i,Error.captureStackTrace&&Error.captureStackTrace(d,Ka),!c)throw d;return d},Ng=function(i,s,c,d){var _=i.length,w=0;if(!_||s.f&&!s.l)return c||new $a(0);var v=!c,l=v||s.i!=2,V=s.i;v&&(c=new $a(_*3));var W=function(Qr){var Ee=c.length;if(Qr>Ee){var Ue=new $a(Math.max(Ee*2,Qr));Ue.set(c),c=Ue}},H=s.f||0,q=s.p||0,G=s.b||0,me=s.l,pe=s.d,Ae=s.m,Ye=s.n,st=_*8;do{if(!me){H=Ns(i,q,1);var ut=Ns(i,q+1,3);if(q+=3,ut)if(ut==1)me=PB,pe=RB,Ae=9,Ye=5;else if(ut==2){var Rt=Ns(i,q,31)+257,Nt=Ns(i,q+10,15)+4,Xt=Rt+Ns(i,q+5,31)+1;q+=14;for(var Et=new $a(Xt),zt=new $a(19),mt=0;mt<Nt;++mt)zt[kB[mt]]=Ns(i,q+mt*3,7);q+=Nt*3;for(var tt=Lf(zt),yt=(1<<tt)-1,Jt=Zh(zt,tt,1),mt=0;mt<Xt;){var yi=Jt[Ns(i,q,yt)];q+=yi&15;var ot=yi>>4;if(ot<16)Et[mt++]=ot;else{var pi=0,vi=0;for(ot==16?(vi=3+Ns(i,q,3),q+=2,pi=Et[mt-1]):ot==17?(vi=3+Ns(i,q,7),q+=3):ot==18&&(vi=11+Ns(i,q,127),q+=7);vi--;)Et[mt++]=pi}}var Mi=Et.subarray(0,Rt),Wi=Et.subarray(Rt);Ae=Lf(Mi),Ye=Lf(Wi),me=Zh(Mi,Ae,1),pe=Zh(Wi,Ye,1)}else Ka(1);else{var ot=LB(q)+4,ft=i[ot-4]|i[ot-3]<<8,Pt=ot+ft;if(Pt>_){V&&Ka(0);break}l&&W(G+ft),c.set(i.subarray(ot,Pt),G),s.b=G+=ft,s.p=q=Pt*8,s.f=H;continue}if(q>st){V&&Ka(0);break}}l&&W(G+131072);for(var Nn=(1<<Ae)-1,nn=(1<<Ye)-1,Hi=q;;Hi=q){var pi=me[Ff(i,q)&Nn],wn=pi>>4;if(q+=pi&15,q>st){V&&Ka(0);break}if(pi||Ka(2),wn<256)c[G++]=wn;else if(wn==256){Hi=q,me=null;break}else{var Fi=wn-254;if(wn>264){var mt=wn-257,dn=W_[mt];Fi=Ns(i,q,(1<<dn)-1)+iv[mt],q+=dn}var Un=pe[Ff(i,q)&nn],un=Un>>4;Un||Ka(3),q+=Un&15;var Wi=TB[un];if(un>3){var dn=X_[un];Wi+=Ff(i,q)&(1<<dn)-1,q+=dn}if(q>st){V&&Ka(0);break}l&&W(G+131072);var Xi=G+Fi;if(G<Wi){var On=w-Wi,Jn=Math.min(Wi,Xi);for(On+G<0&&Ka(3);G<Jn;++G)c[G]=d[On+G]}for(;G<Xi;++G)c[G]=c[G-Wi]}}s.l=me,s.p=Hi,s.b=G,s.f=H,me&&(H=1,s.m=Ae,s.d=pe,s.n=Ye)}while(!H);return G!=c.length&&v?FB(c,0,G):c.subarray(0,G)},GB=new $a(0),NB=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&Ka(6,"invalid gzip data");var s=i[3],c=10;s&4&&(c+=(i[10]|i[11]<<8)+2);for(var d=(s>>3&1)+(s>>4&1);d>0;d-=!i[c++]);return c+(s&2)},UB=function(i){var s=i.length;return(i[s-4]|i[s-3]<<8|i[s-2]<<16|i[s-1]<<24)>>>0},OB=function(i,s){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&Ka(6,"invalid zlib data"),(i[1]>>5&1)==+!s&&Ka(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function VB(i,s){return Ng(i,{i:2},s,s)}function qB(i,s){var c=NB(i);return c+8>i.length&&Ka(6,"invalid gzip data"),Ng(i.subarray(c,-8),{i:2},new $a(UB(i)),s)}function HB(i,s){return Ng(i.subarray(OB(i,s),-4),{i:2},s,s)}function jB(i,s){return i[0]==31&&i[1]==139&&i[2]==8?qB(i,s):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?VB(i,s):HB(i,s)}var JB=typeof TextDecoder<"u"&&new TextDecoder,YB=0;try{JB.decode(GB,{stream:!0}),YB=1}catch{}var KB=Object.defineProperty,Wh=Math.pow,Bn=(i,s)=>KB(i,"name",{value:s,configurable:!0}),Er=(i,s,c)=>new Promise((d,_)=>{var w=V=>{try{l(c.next(V))}catch(W){_(W)}},v=V=>{try{l(c.throw(V))}catch(W){_(W)}},l=V=>V.done?d(V.value):Promise.resolve(V.value).then(w,v);l((c=c.apply(i,s)).next())});Bn((i,s)=>{let c=!1,d="",_=L.GridLayer.extend({createTile:Bn((w,v)=>{let l=document.createElement("img"),V=new AbortController,W=V.signal;return l.cancel=()=>{V.abort()},c||(i.getHeader().then(H=>{H.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):H.tileType===2?d="image/png":H.tileType===3?d="image/jpeg":H.tileType===4?d="image/webp":H.tileType===5&&(d="image/avif")}),c=!0),i.getZxy(w.z,w.x,w.y,W).then(H=>{if(H){let q=new Blob([H.data],{type:d}),G=window.URL.createObjectURL(q);l.src=G,l.cancel=void 0,v(void 0,l)}}).catch(H=>{if(H.name!=="AbortError")throw H}),l},"createTile"),_removeTile:Bn(function(w){let v=this._tiles[w];v&&(v.el.cancel&&v.el.cancel(),v.el.width=0,v.el.height=0,v.el.deleted=!0,L.DomUtil.remove(v.el),delete this._tiles[w],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(w)}))},"_removeTile")});return new _(s)},"leafletRasterLayer");var $B=Bn(i=>(s,c)=>{if(c instanceof AbortController)return i(s,c);let d=new AbortController;return i(s,d).then(_=>c(void 0,_.data,_.cacheControl||"",_.expires||""),_=>c(_)).catch(_=>c(_)),{cancel:Bn(()=>d.abort(),"cancel")}},"v3compat"),rv=class{constructor(s){this.tilev4=Bn((c,d)=>Er(this,null,function*(){if(c.type==="json"){let me=c.url.substr(10),pe=this.tiles.get(me);if(pe||(pe=new rg(me),this.tiles.set(me,pe)),this.metadata)return{data:yield pe.getTileJson(c.url)};let Ae=yield pe.getHeader();return{data:{tiles:[`${c.url}/{z}/{x}/{y}`],minzoom:Ae.minZoom,maxzoom:Ae.maxZoom,bounds:[Ae.minLon,Ae.minLat,Ae.maxLon,Ae.maxLat]}}}let _=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),w=c.url.match(_);if(!w)throw new Error("Invalid PMTiles protocol URL");let v=w[1],l=this.tiles.get(v);l||(l=new rg(v),this.tiles.set(v,l));let V=w[2],W=w[3],H=w[4],q=yield l.getHeader(),G=yield l==null?void 0:l.getZxy(+V,+W,+H,d.signal);if(G)return{data:new Uint8Array(G.data),cacheControl:G.cacheControl,expires:G.expires};if(q.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=$B(this.tilev4),this.tiles=new Map,this.metadata=(s==null?void 0:s.metadata)||!1,this.errorOnMissingTile=(s==null?void 0:s.errorOnMissingTile)||!1}add(s){this.tiles.set(s.source.getKey(),s)}get(s){return this.tiles.get(s)}};Bn(rv,"Protocol");var ZB=rv;function av(i,s){return(s>>>0)*4294967296+(i>>>0)}Bn(av,"toNum");function sv(i,s){let c=s.buf,d=c[s.pos++],_=(d&112)>>4;if(d<128||(d=c[s.pos++],_|=(d&127)<<3,d<128)||(d=c[s.pos++],_|=(d&127)<<10,d<128)||(d=c[s.pos++],_|=(d&127)<<17,d<128)||(d=c[s.pos++],_|=(d&127)<<24,d<128)||(d=c[s.pos++],_|=(d&1)<<31,d<128))return av(i,_);throw new Error("Expected varint not more than 10 bytes")}Bn(sv,"readVarintRemainder");function Ju(i){let s=i.buf,c=s[i.pos++],d=c&127;return c<128||(c=s[i.pos++],d|=(c&127)<<7,c<128)||(c=s[i.pos++],d|=(c&127)<<14,c<128)||(c=s[i.pos++],d|=(c&127)<<21,c<128)?d:(c=s[i.pos],d|=(c&15)<<28,sv(d,i))}Bn(Ju,"readVarint");function Ug(i,s,c,d){if(d===0){c===1&&(s[0]=i-1-s[0],s[1]=i-1-s[1]);let _=s[0];s[0]=s[1],s[1]=_}}Bn(Ug,"rotate");function ov(i,s){let c=Wh(2,i),d=s,_=s,w=s,v=[0,0],l=1;for(;l<c;)d=1&w/2,_=1&(w^d),Ug(l,v,d,_),v[0]+=l*d,v[1]+=l*_,w=w/4,l*=2;return[i,v[0],v[1]]}Bn(ov,"idOnLevel");var WB=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function lv(i,s,c){if(i>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(s>Wh(2,i)-1||c>Wh(2,i)-1)throw new Error("tile x/y outside zoom level bounds");let d=WB[i],_=Wh(2,i),w=0,v=0,l=0,V=[s,c],W=_/2;for(;W>0;)w=(V[0]&W)>0?1:0,v=(V[1]&W)>0?1:0,l+=W*W*(3*w^v),Ug(W,V,w,v),W=W/2;return d+l}Bn(lv,"zxyToTileId");function XB(i){let s=0;for(let c=0;c<27;c++){let d=(1<<c)*(1<<c);if(s+d>i)return ov(c,i-s);s+=d}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Bn(XB,"tileIdToZxy");var eE=(i=>(i[i.Unknown=0]="Unknown",i[i.None=1]="None",i[i.Gzip=2]="Gzip",i[i.Brotli=3]="Brotli",i[i.Zstd=4]="Zstd",i))(eE||{});function Sd(i,s){return Er(this,null,function*(){if(s===1||s===0)return i;if(s===2){if(typeof globalThis.DecompressionStream>"u")return jB(new Uint8Array(i));let c=new Response(i).body;if(!c)throw new Error("Failed to read response stream");let d=c.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(d).arrayBuffer()}throw new Error("Compression method not supported")})}Bn(Sd,"defaultDecompress");var tE=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(tE||{});function cv(i){return i===1?".mvt":i===2?".png":i===3?".jpg":i===4?".webp":i===5?".avif":""}Bn(cv,"tileTypeExt");var iE=127;function uv(i,s){let c=0,d=i.length-1;for(;c<=d;){let _=d+c>>1,w=s-i[_].tileId;if(w>0)c=_+1;else if(w<0)d=_-1;else return i[_]}return d>=0&&(i[d].runLength===0||s-i[d].tileId<i[d].runLength)?i[d]:null}Bn(uv,"findTile");var nE=class{constructor(s){this.file=s}getKey(){return this.file.name}getBytes(s,c){return Er(this,null,function*(){return{data:yield this.file.slice(s,s+c).arrayBuffer()}})}};Bn(nE,"FileSource");var hv=class{constructor(s,c=new Headers){this.url=s,this.customHeaders=c,this.mustReload=!1;let d="";"navigator"in globalThis&&(d=globalThis.navigator.userAgent||"");let _=d.indexOf("Windows")>-1,w=/Chrome|Chromium|Edg|OPR|Brave/.test(d);this.chromeWindowsNoCache=!1,_&&w&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(s){this.customHeaders=s}getBytes(s,c,d,_){return Er(this,null,function*(){let w,v;d?v=d:(w=new AbortController,v=w.signal);let l=new Headers(this.customHeaders);l.set("range",`bytes=${s}-${s+c-1}`);let V;this.mustReload?V="reload":this.chromeWindowsNoCache&&(V="no-store");let W=yield fetch(this.url,{signal:v,cache:V,headers:l});if(s===0&&W.status===416){let G=W.headers.get("Content-Range");if(!G||!G.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let me=+G.substr(8);W=yield fetch(this.url,{signal:v,cache:"reload",headers:{range:`bytes=0-${me-1}`}})}let H=W.headers.get("Etag");if(H!=null&&H.startsWith("W/")&&(H=null),W.status===416||_&&H&&H!==_)throw this.mustReload=!0,new ng(`Server returned non-matching ETag ${_} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(W.status>=300)throw new Error(`Bad response code: ${W.status}`);let q=W.headers.get("Content-Length");if(W.status===200&&(!q||+q>c))throw w&&w.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield W.arrayBuffer(),etag:H||void 0,cacheControl:W.headers.get("Cache-Control")||void 0,expires:W.headers.get("Expires")||void 0}})}};Bn(hv,"FetchSource");var rE=hv;function gs(i,s){let c=i.getUint32(s+4,!0),d=i.getUint32(s+0,!0);return c*Wh(2,32)+d}Bn(gs,"getUint64");function Av(i,s){let c=new DataView(i),d=c.getUint8(7);if(d>3)throw new Error(`Archive is spec version ${d} but this library supports up to spec version 3`);return{specVersion:d,rootDirectoryOffset:gs(c,8),rootDirectoryLength:gs(c,16),jsonMetadataOffset:gs(c,24),jsonMetadataLength:gs(c,32),leafDirectoryOffset:gs(c,40),leafDirectoryLength:gs(c,48),tileDataOffset:gs(c,56),tileDataLength:gs(c,64),numAddressedTiles:gs(c,72),numTileEntries:gs(c,80),numTileContents:gs(c,88),clustered:c.getUint8(96)===1,internalCompression:c.getUint8(97),tileCompression:c.getUint8(98),tileType:c.getUint8(99),minZoom:c.getUint8(100),maxZoom:c.getUint8(101),minLon:c.getInt32(102,!0)/1e7,minLat:c.getInt32(106,!0)/1e7,maxLon:c.getInt32(110,!0)/1e7,maxLat:c.getInt32(114,!0)/1e7,centerZoom:c.getUint8(118),centerLon:c.getInt32(119,!0)/1e7,centerLat:c.getInt32(123,!0)/1e7,etag:s}}Bn(Av,"bytesToHeader");function Og(i){let s={buf:new Uint8Array(i),pos:0},c=Ju(s),d=[],_=0;for(let w=0;w<c;w++){let v=Ju(s);d.push({tileId:_+v,offset:0,length:0,runLength:1}),_+=v}for(let w=0;w<c;w++)d[w].runLength=Ju(s);for(let w=0;w<c;w++)d[w].length=Ju(s);for(let w=0;w<c;w++){let v=Ju(s);v===0&&w>0?d[w].offset=d[w-1].offset+d[w-1].length:d[w].offset=v-1}return d}Bn(Og,"deserializeIndex");var dv=class extends Error{};Bn(dv,"EtagMismatch");var ng=dv;function Vg(i,s){return Er(this,null,function*(){let c=yield i.getBytes(0,16384);if(new DataView(c.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let d=c.data.slice(0,iE),_=Av(d,c.etag),w=c.data.slice(_.rootDirectoryOffset,_.rootDirectoryOffset+_.rootDirectoryLength),v=`${i.getKey()}|${_.etag||""}|${_.rootDirectoryOffset}|${_.rootDirectoryLength}`,l=Og(yield s(w,_.internalCompression));return[_,[v,l.length,l]]})}Bn(Vg,"getHeaderAndRoot");function qg(i,s,c,d,_){return Er(this,null,function*(){let w=yield i.getBytes(c,d,void 0,_.etag),v=yield s(w.data,_.internalCompression),l=Og(v);if(l.length===0)throw new Error("Empty directory is invalid");return l})}Bn(qg,"getDirectory");var aE=class{constructor(s=100,c=!0,d=Sd){this.cache=new Map,this.maxCacheEntries=s,this.counter=1,this.decompress=d}getHeader(s){return Er(this,null,function*(){let c=s.getKey(),d=this.cache.get(c);if(d)return d.lastUsed=this.counter++,d.data;let _=yield Vg(s,this.decompress);return _[1]&&this.cache.set(_[1][0],{lastUsed:this.counter++,data:_[1][2]}),this.cache.set(c,{lastUsed:this.counter++,data:_[0]}),this.prune(),_[0]})}getDirectory(s,c,d,_){return Er(this,null,function*(){let w=`${s.getKey()}|${_.etag||""}|${c}|${d}`,v=this.cache.get(w);if(v)return v.lastUsed=this.counter++,v.data;let l=yield qg(s,this.decompress,c,d,_);return this.cache.set(w,{lastUsed:this.counter++,data:l}),this.prune(),l})}prune(){if(this.cache.size>this.maxCacheEntries){let s=1/0,c;this.cache.forEach((d,_)=>{d.lastUsed<s&&(s=d.lastUsed,c=_)}),c&&this.cache.delete(c)}}invalidate(s){return Er(this,null,function*(){this.cache.delete(s.getKey())})}};Bn(aE,"ResolvedValueCache");var fv=class{constructor(s=100,c=!0,d=Sd){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=s,this.counter=1,this.decompress=d}getHeader(s){return Er(this,null,function*(){let c=s.getKey(),d=this.cache.get(c);if(d)return d.lastUsed=this.counter++,yield d.data;let _=new Promise((w,v)=>{Vg(s,this.decompress).then(l=>{l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:Promise.resolve(l[1][2])}),w(l[0]),this.prune()}).catch(l=>{v(l)})});return this.cache.set(c,{lastUsed:this.counter++,data:_}),_})}getDirectory(s,c,d,_){return Er(this,null,function*(){let w=`${s.getKey()}|${_.etag||""}|${c}|${d}`,v=this.cache.get(w);if(v)return v.lastUsed=this.counter++,yield v.data;let l=new Promise((V,W)=>{qg(s,this.decompress,c,d,_).then(H=>{V(H),this.prune()}).catch(H=>{W(H)})});return this.cache.set(w,{lastUsed:this.counter++,data:l}),l})}prune(){if(this.cache.size>=this.maxCacheEntries){let s=1/0,c;this.cache.forEach((d,_)=>{d.lastUsed<s&&(s=d.lastUsed,c=_)}),c&&this.cache.delete(c)}}invalidate(s){return Er(this,null,function*(){let c=s.getKey();if(this.invalidations.get(c))return yield this.invalidations.get(c);this.cache.delete(s.getKey());let d=new Promise((_,w)=>{this.getHeader(s).then(v=>{_(),this.invalidations.delete(c)}).catch(v=>{w(v)})});this.invalidations.set(c,d)})}};Bn(fv,"SharedPromiseCache");var sE=fv,gv=class{constructor(s,c,d){typeof s=="string"?this.source=new rE(s):this.source=s,d?this.decompress=d:this.decompress=Sd,c?this.cache=c:this.cache=new sE}getHeader(){return Er(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(s,c,d,_){return Er(this,null,function*(){let w=lv(s,c,d),v=yield this.cache.getHeader(this.source);if(s<v.minZoom||s>v.maxZoom)return;let l=v.rootDirectoryOffset,V=v.rootDirectoryLength;for(let W=0;W<=3;W++){let H=yield this.cache.getDirectory(this.source,l,V,v),q=uv(H,w);if(q){if(q.runLength>0){let G=yield this.source.getBytes(v.tileDataOffset+q.offset,q.length,_,v.etag);return{data:yield this.decompress(G.data,v.tileCompression),cacheControl:G.cacheControl,expires:G.expires}}l=v.leafDirectoryOffset+q.offset,V=q.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(s,c,d,_){return Er(this,null,function*(){try{return yield this.getZxyAttempt(s,c,d,_)}catch(w){if(w instanceof ng)return this.cache.invalidate(this.source),yield this.getZxyAttempt(s,c,d,_);throw w}})}getMetadataAttempt(){return Er(this,null,function*(){let s=yield this.cache.getHeader(this.source),c=yield this.source.getBytes(s.jsonMetadataOffset,s.jsonMetadataLength,void 0,s.etag),d=yield this.decompress(c.data,s.internalCompression),_=new TextDecoder("utf-8");return JSON.parse(_.decode(d))})}getMetadata(){return Er(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(s){if(s instanceof ng)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw s}})}getTileJson(s){return Er(this,null,function*(){let c=yield this.getHeader(),d=yield this.getMetadata(),_=cv(c.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${s}/{z}/{x}/{y}${_}`],vector_layers:d.vector_layers,attribution:d.attribution,description:d.description,name:d.name,version:d.version,bounds:[c.minLon,c.minLat,c.maxLon,c.maxLat],center:[c.centerLon,c.centerLat,c.centerZoom],minzoom:c.minZoom,maxzoom:c.maxZoom}})}};Bn(gv,"PMTiles");var rg=gv,ag={exports:{}};(function(i,s){(function(c,d){d(s)})(K_,function(c){function d(b){return(I,...y)=>w(b,I,y)}function _(b,I){return d(W(b,I).get)}const{apply:w,construct:v,defineProperty:l,get:V,getOwnPropertyDescriptor:W,getPrototypeOf:H,has:q,ownKeys:G,set:me,setPrototypeOf:pe}=Reflect,{iterator:Ae,species:Ye,toStringTag:st,for:ut}=Symbol,ot=Object,{create:ft,defineProperty:Pt,freeze:Rt,is:Nt}=ot,Xt=Array.prototype[Ae],Et=d(Xt),zt=ArrayBuffer;_(zt.prototype,"byteLength");const mt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;mt&&_(mt.prototype,"byteLength");const tt=H(Uint8Array);tt.from;const yt=tt.prototype;yt[Ae],d(yt.keys),d(yt.values),d(yt.entries),d(yt.set),d(yt.reverse),d(yt.fill),d(yt.copyWithin),d(yt.sort),d(yt.slice),d(yt.subarray),_(yt,"buffer"),_(yt,"byteOffset"),_(yt,"length"),_(yt,st);const Jt=Uint8Array,yi=Uint16Array,pi=Uint32Array,vi=Float32Array,Mi=H([][Ae]()),Wi=d(Mi.next),Nn=d(function*(){}().next),nn=H(Mi),Hi=d(DataView.prototype.getUint16),wn=WeakMap,Fi=wn.prototype,dn=d(Fi.get),Un=d(Fi.set),un=new wn,Xi=ft(null,{next:{value:function(){const b=dn(un,this);return Wi(b)}},[Ae]:{value:function(){return this}}}),On=new wn,Jn=ft(nn,{next:{value:function(){const b=dn(On,this);return Nn(b)},writable:!0,configurable:!0}});for(const b of G(Mi))b!=="next"&&Pt(Jn,b,W(Mi,b));const Qr=new zt(4),Ee=new vi(Qr),Ue=new pi(Qr),rt=new yi(512),It=new Jt(512);for(let b=0;b<256;++b){const I=b-127;I<-24?(rt[b]=0,rt[256|b]=32768,It[b]=24,It[256|b]=24):I<-14?(rt[b]=1024>>-I-14,rt[256|b]=1024>>-I-14|32768,It[b]=-I-1,It[256|b]=-I-1):I<=15?(rt[b]=I+15<<10,rt[256|b]=I+15<<10|32768,It[b]=13,It[256|b]=13):I<128?(rt[b]=31744,rt[256|b]=64512,It[b]=24,It[256|b]=24):(rt[b]=31744,rt[256|b]=64512,It[b]=13,It[256|b]=13)}const xe=new pi(2048);for(let b=1;b<1024;++b){let I=b<<13,y=0;for(;!(8388608&I);)I<<=1,y-=8388608;I&=-8388609,y+=947912704,xe[b]=I|y}for(let b=1024;b<2048;++b)xe[b]=939524096+(b-1024<<13);const bt=new pi(64);for(let b=1;b<31;++b)bt[b]=b<<23;bt[31]=1199570944,bt[32]=2147483648;for(let b=33;b<63;++b)bt[b]=2147483648+(b-32<<23);bt[63]=3347054592;const Vt=new yi(64);for(let b=1;b<64;++b)b!==32&&(Vt[b]=1024);function _t(b,I,...y){return function(k){const T=k>>10;return Ue[0]=xe[Vt[T]+(1023&k)]+bt[T],Ee[0]}(Hi(b,I,...function(k){if(k[Ae]===Xt&&Mi.next===Wi)return k;const T=ft(Xi);return Un(un,T,Et(k)),T}(y)))}function xt(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var Bt={exports:{}};function fi(b,I,y){const k=y&&y.debug||!1;k&&console.log("[xml-utils] getting "+I+" in "+b);const T=typeof b=="object"?b.outer:b,F=T.slice(0,T.indexOf(">")+1),$=['"',"'"];for(let N=0;N<$.length;N++){const re=$[N],K=I+"\\="+re+"([^"+re+"]*)"+re;k&&console.log("[xml-utils] pattern:",K);const Z=new RegExp(K).exec(F);if(k&&console.log("[xml-utils] match:",Z),Z)return Z[1]}}Bt.exports=fi,Bt.exports.default=fi;var Ot=xt(Bt.exports),hi={exports:{}},di={exports:{}},Ri={exports:{}};function ji(b,I,y){const k=new RegExp(I).exec(b.slice(y));return k?y+k.index:-1}Ri.exports=ji,Ri.exports.default=ji;var dt=Ri.exports,mn={exports:{}};function en(b,I,y){const k=new RegExp(I).exec(b.slice(y));return k?y+k.index+k[0].length-1:-1}mn.exports=en,mn.exports.default=en;var Tn=mn.exports,Pn={exports:{}};function Qt(b,I){const y=new RegExp(I,"g"),k=b.match(y);return k?k.length:0}Pn.exports=Qt,Pn.exports.default=Qt;var Qi=Pn.exports;const ii=dt,fn=Tn,Ar=Qi;function wi(b,I,y){const k=y&&y.debug||!1,T=!(y&&typeof y.nested===!1),F=y&&y.startIndex||0;k&&console.log("[xml-utils] starting findTagByName with",I," and ",y);const $=ii(b,`<${I}[ 
>/]`,F);if(k&&console.log("[xml-utils] start:",$),$===-1)return;const N=b.slice($+I.length);let re=fn(N,"^[^<]*[ /]>",0);const K=re!==-1&&N[re-1]==="/";if(k&&console.log("[xml-utils] selfClosing:",K),K===!1)if(T){let X=0,be=1,Ce=0;for(;(re=fn(N,"[ /]"+I+">",X))!==-1;){const ke=N.substring(X,re+1);if(be+=Ar(ke,"<"+I+`[ 
	>]`),Ce+=Ar(ke,"</"+I+">"),Ce>=be)break;X=re}}else re=fn(N,"[ /]"+I+">",0);const Z=$+I.length+re+1;if(k&&console.log("[xml-utils] end:",Z),Z===-1)return;const ge=b.slice($,Z);let se;return se=K?null:ge.slice(ge.indexOf(">")+1,ge.lastIndexOf("<")),{inner:se,outer:ge,start:$,end:Z}}di.exports=wi,di.exports.default=wi;const ma=di.exports;function ya(b,I,y){const k=[],T=y&&y.debug||!1,F=!y||typeof y.nested!="boolean"||y.nested;let $,N=y&&y.startIndex||0;for(;$=ma(b,I,{debug:T,startIndex:N});)N=F?$.start+1+I.length:$.end,k.push($);return T&&console.log("findTagsByName found",k.length,"tags"),k}hi.exports=ya,hi.exports.default=ya;var is=xt(hi.exports);const pr={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Ie={};for(const b in pr)pr.hasOwnProperty(b)&&(Ie[pr[b]]=parseInt(b,10));const J=[Ie.BitsPerSample,Ie.ExtraSamples,Ie.SampleFormat,Ie.StripByteCounts,Ie.StripOffsets,Ie.StripRowCounts,Ie.TileByteCounts,Ie.TileOffsets,Ie.SubIFDs],j={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ie={};for(const b in j)j.hasOwnProperty(b)&&(ie[j[b]]=parseInt(b,10));const ye=0,Fe=1,Oe=2,je=3,Se=5,it=6,gt=8,Xe=0,Dt=1,oi=0,gi=1,qi=2,Ci={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Ui=new Map;function Si(b,I){Array.isArray(b)||(b=[b]),b.forEach(y=>Ui.set(y,I))}async function Rn(b){const I=Ui.get(b.Compression);if(!I)throw new Error(`Unknown compression method identifier: ${b.Compression}`);return new(await I())(b)}function yn(b,I,y,k=1){return new(Object.getPrototypeOf(b)).constructor(I*y*k)}function Bi(b,I,y){return(1-y)*b+y*I}function rn(b,I,y,k,T,F="nearest"){switch(F.toLowerCase()){case"nearest":return function($,N,re,K,Z){const ge=N/K,se=re/Z;return $.map(X=>{const be=yn(X,K,Z);for(let Ce=0;Ce<Z;++Ce){const ke=Math.min(Math.round(se*Ce),re-1);for(let Re=0;Re<K;++Re){const qe=Math.min(Math.round(ge*Re),N-1),Pe=X[ke*N+qe];be[Ce*K+Re]=Pe}}return be})}(b,I,y,k,T);case"bilinear":case"linear":return function($,N,re,K,Z){const ge=N/K,se=re/Z;return $.map(X=>{const be=yn(X,K,Z);for(let Ce=0;Ce<Z;++Ce){const ke=se*Ce,Re=Math.floor(ke),qe=Math.min(Math.ceil(ke),re-1);for(let Pe=0;Pe<K;++Pe){const $e=ge*Pe,te=$e%1,U=Math.floor($e),he=Math.min(Math.ceil($e),N-1),le=X[Re*N+U],ue=X[Re*N+he],de=X[qe*N+U],Te=X[qe*N+he],De=Bi(Bi(le,ue,te),Bi(de,Te,te),ke%1);be[Ce*K+Pe]=De}}return be})}(b,I,y,k,T);default:throw new Error(`Unsupported resampling method: '${F}'`)}}function In(b,I,y,k,T,F,$="nearest"){switch($.toLowerCase()){case"nearest":return function(N,re,K,Z,ge,se){const X=re/Z,be=K/ge,Ce=yn(N,Z,ge,se);for(let ke=0;ke<ge;++ke){const Re=Math.min(Math.round(be*ke),K-1);for(let qe=0;qe<Z;++qe){const Pe=Math.min(Math.round(X*qe),re-1);for(let $e=0;$e<se;++$e){const te=N[Re*re*se+Pe*se+$e];Ce[ke*Z*se+qe*se+$e]=te}}}return Ce}(b,I,y,k,T,F);case"bilinear":case"linear":return function(N,re,K,Z,ge,se){const X=re/Z,be=K/ge,Ce=yn(N,Z,ge,se);for(let ke=0;ke<ge;++ke){const Re=be*ke,qe=Math.floor(Re),Pe=Math.min(Math.ceil(Re),K-1);for(let $e=0;$e<Z;++$e){const te=X*$e,U=te%1,he=Math.floor(te),le=Math.min(Math.ceil(te),re-1);for(let ue=0;ue<se;++ue){const de=N[qe*re*se+he*se+ue],Te=N[qe*re*se+le*se+ue],De=N[Pe*re*se+he*se+ue],Ge=N[Pe*re*se+le*se+ue],et=Bi(Bi(de,Te,U),Bi(De,Ge,U),Re%1);Ce[ke*Z*se+$e*se+ue]=et}}}return Ce}(b,I,y,k,T,F);default:throw new Error(`Unsupported resampling method: '${$}'`)}}function Zn(b,I,y){let k=0;for(let T=I;T<y;++T)k+=b[T];return k}function Yn(b,I,y){switch(b){case 1:if(I<=8)return new Uint8Array(y);if(I<=16)return new Uint16Array(y);if(I<=32)return new Uint32Array(y);break;case 2:if(I===8)return new Int8Array(y);if(I===16)return new Int16Array(y);if(I===32)return new Int32Array(y);break;case 3:switch(I){case 16:case 32:return new Float32Array(y);case 64:return new Float64Array(y)}}throw Error("Unsupported data format/bitsPerSample")}Si([void 0,1],()=>Promise.resolve().then(function(){return wu}).then(b=>b.default)),Si(5,()=>Promise.resolve().then(function(){return Vo}).then(b=>b.default)),Si(6,()=>{throw new Error("old style JPEG compression is not supported.")}),Si(7,()=>Promise.resolve().then(function(){return Bu}).then(b=>b.default)),Si([8,32946],()=>Promise.resolve().then(function(){return Qe}).then(b=>b.default)),Si(32773,()=>Promise.resolve().then(function(){return Me}).then(b=>b.default)),Si(34887,()=>Promise.resolve().then(function(){return Lt}).then(async b=>(await b.zstd.init(),b)).then(b=>b.default)),Si(50001,()=>Promise.resolve().then(function(){return Mt}).then(b=>b.default));class dr{constructor(I,y,k,T,F,$){this.fileDirectory=I,this.geoKeys=y,this.dataView=k,this.littleEndian=T,this.tiles=F?{}:null,this.isTiled=!I.StripOffsets;const N=I.PlanarConfiguration;if(this.planarConfiguration=N===void 0?1:N,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=$}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return this.fileDirectory.SamplesPerPixel!==void 0?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip!==void 0?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(I){return this.isTiled||(I+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-I*this.getTileHeight()}getBytesPerPixel(){let I=0;for(let y=0;y<this.fileDirectory.BitsPerSample.length;++y)I+=this.getSampleByteSize(y);return I}getSampleByteSize(I){if(I>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${I} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[I]/8)}getReaderForSample(I){const y=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[I]:1,k=this.fileDirectory.BitsPerSample[I];switch(y){case 1:if(k<=8)return DataView.prototype.getUint8;if(k<=16)return DataView.prototype.getUint16;if(k<=32)return DataView.prototype.getUint32;break;case 2:if(k<=8)return DataView.prototype.getInt8;if(k<=16)return DataView.prototype.getInt16;if(k<=32)return DataView.prototype.getInt32;break;case 3:switch(k){case 16:return function(T,F){return _t(this,T,F)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(I=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[I]:1}getBitsPerSample(I=0){return this.fileDirectory.BitsPerSample[I]}getArrayForSample(I,y){return Yn(this.getSampleFormat(I),this.getBitsPerSample(I),y)}async getTileOrStrip(I,y,k,T,F){const $=Math.ceil(this.getWidth()/this.getTileWidth()),N=Math.ceil(this.getHeight()/this.getTileHeight());let re;const{tiles:K}=this;let Z,ge;this.planarConfiguration===1?re=y*$+I:this.planarConfiguration===2&&(re=k*$*N+y*$+I),this.isTiled?(Z=this.fileDirectory.TileOffsets[re],ge=this.fileDirectory.TileByteCounts[re]):(Z=this.fileDirectory.StripOffsets[re],ge=this.fileDirectory.StripByteCounts[re]);const se=(await this.source.fetch([{offset:Z,length:ge}],F))[0];let X;return K!==null&&K[re]?X=K[re]:(X=(async()=>{let be=await T.decode(this.fileDirectory,se);const Ce=this.getSampleFormat(),ke=this.getBitsPerSample();return function(Re,qe){return(Re!==1&&Re!==2||!(qe<=32)||qe%8!=0)&&(Re!==3||qe!==16&&qe!==32&&qe!==64)}(Ce,ke)&&(be=function(Re,qe,Pe,$e,te,U,he){const le=new DataView(Re),ue=Pe===2?1:$e,de=Yn(qe,te,Pe===2?he*U:he*U*$e),Te=parseInt("1".repeat(te),2);if(qe===1){let De;De=Pe===1?$e*te:te;let Ge=U*De;7&Ge&&(Ge=Ge+7&-8);for(let et=0;et<he;++et){const lt=et*Ge;for(let ct=0;ct<U;++ct){const vt=lt+ct*ue*te;for(let Tt=0;Tt<ue;++Tt){const at=vt+Tt*te,Ze=(et*U+ct)*ue+Tt,pt=Math.floor(at/8),Zt=at%8;if(Zt+te<=8)de[Ze]=le.getUint8(pt)>>8-te-Zt&Te;else if(Zt+te<=16)de[Ze]=le.getUint16(pt)>>16-te-Zt&Te;else if(Zt+te<=24){const St=le.getUint16(pt)<<8|le.getUint8(pt+2);de[Ze]=St>>24-te-Zt&Te}else de[Ze]=le.getUint32(pt)>>32-te-Zt&Te}}}}return de.buffer}(be,Ce,this.planarConfiguration,this.getSamplesPerPixel(),ke,this.getTileWidth(),this.getBlockHeight(y))),be})(),K!==null&&(K[re]=X)),{x:I,y,sample:k,data:await X}}async _readRaster(I,y,k,T,F,$,N,re,K){const Z=this.getTileWidth(),ge=this.getTileHeight(),se=this.getWidth(),X=this.getHeight(),be=Math.max(Math.floor(I[0]/Z),0),Ce=Math.min(Math.ceil(I[2]/Z),Math.ceil(se/Z)),ke=Math.max(Math.floor(I[1]/ge),0),Re=Math.min(Math.ceil(I[3]/ge),Math.ceil(X/ge)),qe=I[2]-I[0];let Pe=this.getBytesPerPixel();const $e=[],te=[];for(let le=0;le<y.length;++le)this.planarConfiguration===1?$e.push(Zn(this.fileDirectory.BitsPerSample,0,y[le])/8):$e.push(0),te.push(this.getReaderForSample(y[le]));const U=[],{littleEndian:he}=this;for(let le=ke;le<Re;++le)for(let ue=be;ue<Ce;++ue){let de;this.planarConfiguration===1&&(de=this.getTileOrStrip(ue,le,0,F,K));for(let Te=0;Te<y.length;++Te){const De=Te,Ge=y[Te];this.planarConfiguration===2&&(Pe=this.getSampleByteSize(Ge),de=this.getTileOrStrip(ue,le,Ge,F,K));const et=de.then(lt=>{const ct=lt.data,vt=new DataView(ct),Tt=this.getBlockHeight(lt.y),at=lt.y*ge,Ze=lt.x*Z,pt=at+Tt,Zt=(lt.x+1)*Z,St=te[De],ai=Math.min(Tt,Tt-(pt-I[3]),X-at),kt=Math.min(Z,Z-(Zt-I[2]),se-Ze);for(let ti=Math.max(0,I[1]-at);ti<ai;++ti)for(let $t=Math.max(0,I[0]-Ze);$t<kt;++$t){const ci=(ti*Z+$t)*Pe,Yt=St.call(vt,ci+$e[De],he);let Ki;T?(Ki=(ti+at-I[1])*qe*y.length+($t+Ze-I[0])*y.length+De,k[Ki]=Yt):(Ki=(ti+at-I[1])*qe+$t+Ze-I[0],k[De][Ki]=Yt)}});U.push(et)}}if(await Promise.all(U),$&&I[2]-I[0]!==$||N&&I[3]-I[1]!==N){let le;return le=T?In(k,I[2]-I[0],I[3]-I[1],$,N,y.length,re):rn(k,I[2]-I[0],I[3]-I[1],$,N,re),le.width=$,le.height=N,le}return k.width=$||I[2]-I[0],k.height=N||I[3]-I[1],k}async readRasters({window:I,samples:y=[],interleave:k,pool:T=null,width:F,height:$,resampleMethod:N,fillValue:re,signal:K}={}){const Z=I||[0,0,this.getWidth(),this.getHeight()];if(Z[0]>Z[2]||Z[1]>Z[3])throw new Error("Invalid subsets");const ge=(Z[2]-Z[0])*(Z[3]-Z[1]),se=this.getSamplesPerPixel();if(y&&y.length){for(let Ce=0;Ce<y.length;++Ce)if(y[Ce]>=se)return Promise.reject(new RangeError(`Invalid sample index '${y[Ce]}'.`))}else for(let Ce=0;Ce<se;++Ce)y.push(Ce);let X;if(k)X=Yn(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),ge*y.length),re&&X.fill(re);else{X=[];for(let Ce=0;Ce<y.length;++Ce){const ke=this.getArrayForSample(y[Ce],ge);Array.isArray(re)&&Ce<re.length?ke.fill(re[Ce]):re&&!Array.isArray(re)&&ke.fill(re),X.push(ke)}}const be=T||await Rn(this.fileDirectory);return await this._readRaster(Z,y,X,k,be,F,$,N,K)}async readRGB({window:I,interleave:y=!0,pool:k=null,width:T,height:F,resampleMethod:$,enableAlpha:N=!1,signal:re}={}){const K=I||[0,0,this.getWidth(),this.getHeight()];if(K[0]>K[2]||K[1]>K[3])throw new Error("Invalid subsets");const Z=this.fileDirectory.PhotometricInterpretation;if(Z===Oe){let Re=[0,1,2];if(this.fileDirectory.ExtraSamples!==Xe&&N){Re=[];for(let qe=0;qe<this.fileDirectory.BitsPerSample.length;qe+=1)Re.push(qe)}return this.readRasters({window:I,interleave:y,samples:Re,pool:k,width:T,height:F,resampleMethod:$,signal:re})}let ge;switch(Z){case ye:case Fe:case je:ge=[0];break;case Se:ge=[0,1,2,3];break;case it:case gt:ge=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const se={window:K,interleave:!0,samples:ge,pool:k,width:T,height:F,resampleMethod:$,signal:re},{fileDirectory:X}=this,be=await this.readRasters(se),Ce=2**this.fileDirectory.BitsPerSample[0];let ke;switch(Z){case ye:ke=function(Re,qe){const{width:Pe,height:$e}=Re,te=new Uint8Array(Pe*$e*3);let U;for(let he=0,le=0;he<Re.length;++he,le+=3)U=256-Re[he]/qe*256,te[le]=U,te[le+1]=U,te[le+2]=U;return te}(be,Ce);break;case Fe:ke=function(Re,qe){const{width:Pe,height:$e}=Re,te=new Uint8Array(Pe*$e*3);let U;for(let he=0,le=0;he<Re.length;++he,le+=3)U=Re[he]/qe*256,te[le]=U,te[le+1]=U,te[le+2]=U;return te}(be,Ce);break;case je:ke=function(Re,qe){const{width:Pe,height:$e}=Re,te=new Uint8Array(Pe*$e*3),U=qe.length/3,he=qe.length/3*2;for(let le=0,ue=0;le<Re.length;++le,ue+=3){const de=Re[le];te[ue]=qe[de]/65536*256,te[ue+1]=qe[de+U]/65536*256,te[ue+2]=qe[de+he]/65536*256}return te}(be,X.ColorMap);break;case Se:ke=function(Re){const{width:qe,height:Pe}=Re,$e=new Uint8Array(qe*Pe*3);for(let te=0,U=0;te<Re.length;te+=4,U+=3){const he=Re[te],le=Re[te+1],ue=Re[te+2],de=Re[te+3];$e[U]=(255-he)/256*255*((255-de)/256),$e[U+1]=(255-le)/256*255*((255-de)/256),$e[U+2]=(255-ue)/256*255*((255-de)/256)}return $e}(be);break;case it:ke=function(Re){const{width:qe,height:Pe}=Re,$e=new Uint8ClampedArray(qe*Pe*3);for(let te=0,U=0;te<Re.length;te+=3,U+=3){const he=Re[te],le=Re[te+1],ue=Re[te+2];$e[U]=he+1.402*(ue-128),$e[U+1]=he-.34414*(le-128)-.71414*(ue-128),$e[U+2]=he+1.772*(le-128)}return $e}(be);break;case gt:ke=function(Re){const{width:qe,height:Pe}=Re,$e=new Uint8Array(qe*Pe*3);for(let te=0,U=0;te<Re.length;te+=3,U+=3){let he,le,ue,de=(Re[te+0]+16)/116,Te=(Re[te+1]<<24>>24)/500+de,De=de-(Re[te+2]<<24>>24)/200;Te=.95047*(Te*Te*Te>.008856?Te*Te*Te:(Te-16/116)/7.787),de=1*(de*de*de>.008856?de*de*de:(de-16/116)/7.787),De=1.08883*(De*De*De>.008856?De*De*De:(De-16/116)/7.787),he=3.2406*Te+-1.5372*de+-.4986*De,le=-.9689*Te+1.8758*de+.0415*De,ue=.0557*Te+-.204*de+1.057*De,he=he>.0031308?1.055*he**(1/2.4)-.055:12.92*he,le=le>.0031308?1.055*le**(1/2.4)-.055:12.92*le,ue=ue>.0031308?1.055*ue**(1/2.4)-.055:12.92*ue,$e[U]=255*Math.max(0,Math.min(1,he)),$e[U+1]=255*Math.max(0,Math.min(1,le)),$e[U+2]=255*Math.max(0,Math.min(1,ue))}return $e}(be);break;default:throw new Error("Unsupported photometric interpretation.")}if(!y){const Re=new Uint8Array(ke.length/3),qe=new Uint8Array(ke.length/3),Pe=new Uint8Array(ke.length/3);for(let $e=0,te=0;$e<ke.length;$e+=3,++te)Re[te]=ke[$e],qe[te]=ke[$e+1],Pe[te]=ke[$e+2];ke=[Re,qe,Pe]}return ke.width=be.width,ke.height=be.height,ke}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const I=[];for(let y=0;y<this.fileDirectory.ModelTiepoint.length;y+=6)I.push({i:this.fileDirectory.ModelTiepoint[y],j:this.fileDirectory.ModelTiepoint[y+1],k:this.fileDirectory.ModelTiepoint[y+2],x:this.fileDirectory.ModelTiepoint[y+3],y:this.fileDirectory.ModelTiepoint[y+4],z:this.fileDirectory.ModelTiepoint[y+5]});return I}getGDALMetadata(I=null){const y={};if(!this.fileDirectory.GDAL_METADATA)return null;const k=this.fileDirectory.GDAL_METADATA;let T=is(k,"Item");T=I===null?T.filter(F=>Ot(F,"sample")===void 0):T.filter(F=>Number(Ot(F,"sample"))===I);for(let F=0;F<T.length;++F){const $=T[F];y[Ot($,"name")]=$.inner}return y}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const I=this.fileDirectory.GDAL_NODATA;return Number(I.substring(0,I.length-1))}getOrigin(){const I=this.fileDirectory.ModelTiepoint,y=this.fileDirectory.ModelTransformation;if(I&&I.length===6)return[I[3],I[4],I[5]];if(y)return[y[3],y[7],y[11]];throw new Error("The image does not have an affine transformation.")}getResolution(I=null){const y=this.fileDirectory.ModelPixelScale,k=this.fileDirectory.ModelTransformation;if(y)return[y[0],-y[1],y[2]];if(k)return k[1]===0&&k[4]===0?[k[0],-k[5],k[10]]:[Math.sqrt(k[0]*k[0]+k[4]*k[4]),-Math.sqrt(k[1]*k[1]+k[5]*k[5]),k[10]];if(I){const[T,F,$]=I.getResolution();return[T*I.getWidth()/this.getWidth(),F*I.getHeight()/this.getHeight(),$*I.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(I=!1){const y=this.getHeight(),k=this.getWidth();if(this.fileDirectory.ModelTransformation&&!I){const[T,F,$,N,re,K,Z,ge]=this.fileDirectory.ModelTransformation,se=[[0,0],[0,y],[k,0],[k,y]].map(([Ce,ke])=>[N+T*Ce+F*ke,ge+re*Ce+K*ke]),X=se.map(Ce=>Ce[0]),be=se.map(Ce=>Ce[1]);return[Math.min(...X),Math.min(...be),Math.max(...X),Math.max(...be)]}{const T=this.getOrigin(),F=this.getResolution(),$=T[0],N=T[1],re=$+F[0]*k,K=N+F[1]*y;return[Math.min($,re),Math.min(N,K),Math.max($,re),Math.max(N,K)]}}}class qs{constructor(I){this._dataView=new DataView(I)}get buffer(){return this._dataView.buffer}getUint64(I,y){const k=this.getUint32(I,y),T=this.getUint32(I+4,y);let F;if(y){if(F=k+2**32*T,!Number.isSafeInteger(F))throw new Error(`${F} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return F}if(F=2**32*k+T,!Number.isSafeInteger(F))throw new Error(`${F} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return F}getInt64(I,y){let k=0;const T=(128&this._dataView.getUint8(I+(y?7:0)))>0;let F=!0;for(let $=0;$<8;$++){let N=this._dataView.getUint8(I+(y?$:7-$));T&&(F?N!==0&&(N=255&~(N-1),F=!1):N=255&~N),k+=N*256**$}return T&&(k=-k),k}getUint8(I,y){return this._dataView.getUint8(I,y)}getInt8(I,y){return this._dataView.getInt8(I,y)}getUint16(I,y){return this._dataView.getUint16(I,y)}getInt16(I,y){return this._dataView.getInt16(I,y)}getUint32(I,y){return this._dataView.getUint32(I,y)}getInt32(I,y){return this._dataView.getInt32(I,y)}getFloat16(I,y){return _t(this._dataView,I,y)}getFloat32(I,y){return this._dataView.getFloat32(I,y)}getFloat64(I,y){return this._dataView.getFloat64(I,y)}}class an{constructor(I,y,k,T){this._dataView=new DataView(I),this._sliceOffset=y,this._littleEndian=k,this._bigTiff=T}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(I,y){return this.sliceOffset<=I&&this.sliceTop>=I+y}readUint8(I){return this._dataView.getUint8(I-this._sliceOffset,this._littleEndian)}readInt8(I){return this._dataView.getInt8(I-this._sliceOffset,this._littleEndian)}readUint16(I){return this._dataView.getUint16(I-this._sliceOffset,this._littleEndian)}readInt16(I){return this._dataView.getInt16(I-this._sliceOffset,this._littleEndian)}readUint32(I){return this._dataView.getUint32(I-this._sliceOffset,this._littleEndian)}readInt32(I){return this._dataView.getInt32(I-this._sliceOffset,this._littleEndian)}readFloat32(I){return this._dataView.getFloat32(I-this._sliceOffset,this._littleEndian)}readFloat64(I){return this._dataView.getFloat64(I-this._sliceOffset,this._littleEndian)}readUint64(I){const y=this.readUint32(I),k=this.readUint32(I+4);let T;if(this._littleEndian){if(T=y+2**32*k,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}if(T=2**32*y+k,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}readInt64(I){let y=0;const k=(128&this._dataView.getUint8(I+(this._littleEndian?7:0)))>0;let T=!0;for(let F=0;F<8;F++){let $=this._dataView.getUint8(I+(this._littleEndian?F:7-F));k&&(T?$!==0&&($=255&~($-1),T=!1):$=255&~$),y+=$*256**F}return k&&(y=-y),y}readOffset(I){return this._bigTiff?this.readUint64(I):this.readUint32(I)}}const mc=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class yc{constructor(I=mc,y){this.workers=null,this._awaitingDecoder=null,this.size=I,this.messageId=0,I&&(this._awaitingDecoder=y?Promise.resolve(y):new Promise(k=>{Promise.resolve().then(function(){return bi}).then(T=>{k(T.create)})}),this._awaitingDecoder.then(k=>{this._awaitingDecoder=null,this.workers=[];for(let T=0;T<I;T++)this.workers.push({worker:k(),idle:!0})}))}async decode(I,y){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?Rn(I).then(k=>k.decode(I,y)):new Promise(k=>{const T=this.workers.find(N=>N.idle)||this.workers[Math.floor(Math.random()*this.size)];T.idle=!1;const F=this.messageId++,$=N=>{N.data.id===F&&(T.idle=!0,k(N.data.decoded),T.worker.removeEventListener("message",$))};T.worker.addEventListener("message",$),T.worker.postMessage({fileDirectory:I,buffer:y,id:F},[y])})}destroy(){this.workers&&(this.workers.forEach(I=>{I.worker.terminate()}),this.workers=null)}}const Sr=`\r
\r
`;function mr(b){if(Object.fromEntries!==void 0)return Object.fromEntries(b);const I={};for(const[y,k]of b)I[y.toLowerCase()]=k;return I}function hh(b){return mr(b.split(`\r
`).map(I=>{const y=I.split(":").map(k=>k.trim());return y[0]=y[0].toLowerCase(),y}))}function yr(b){let I,y,k;return b&&([,I,y,k]=b.match(/bytes (\d+)-(\d+)\/(\d+)/),I=parseInt(I,10),y=parseInt(y,10),k=parseInt(k,10)),{start:I,end:y,total:k}}class _r{async fetch(I,y=void 0){return Promise.all(I.map(k=>this.fetchSlice(k,y)))}async fetchSlice(I){throw new Error(`fetching of slice ${I} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Ma extends Map{constructor(I={}){if(super(),!(I.maxSize&&I.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof I.maxAge=="number"&&I.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=I.maxSize,this.maxAge=I.maxAge||Number.POSITIVE_INFINITY,this.onEviction=I.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(I){if(typeof this.onEviction=="function")for(const[y,k]of I)this.onEviction(y,k.value)}_deleteIfExpired(I,y){return typeof y.expiry=="number"&&y.expiry<=Date.now()&&(typeof this.onEviction=="function"&&this.onEviction(I,y.value),this.delete(I))}_getOrDeleteIfExpired(I,y){if(this._deleteIfExpired(I,y)===!1)return y.value}_getItemValue(I,y){return y.expiry?this._getOrDeleteIfExpired(I,y):y.value}_peek(I,y){const k=y.get(I);return this._getItemValue(I,k)}_set(I,y){this.cache.set(I,y),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(I,y){this.oldCache.delete(I),this._set(I,y)}*_entriesAscending(){for(const I of this.oldCache){const[y,k]=I;this.cache.has(y)||this._deleteIfExpired(y,k)===!1&&(yield I)}for(const I of this.cache){const[y,k]=I;this._deleteIfExpired(y,k)===!1&&(yield I)}}get(I){if(this.cache.has(I)){const y=this.cache.get(I);return this._getItemValue(I,y)}if(this.oldCache.has(I)){const y=this.oldCache.get(I);if(this._deleteIfExpired(I,y)===!1)return this._moveToRecent(I,y),y.value}}set(I,y,{maxAge:k=this.maxAge}={}){const T=typeof k=="number"&&k!==Number.POSITIVE_INFINITY?Date.now()+k:void 0;return this.cache.has(I)?this.cache.set(I,{value:y,expiry:T}):this._set(I,{value:y,expiry:T}),this}has(I){return this.cache.has(I)?!this._deleteIfExpired(I,this.cache.get(I)):!!this.oldCache.has(I)&&!this._deleteIfExpired(I,this.oldCache.get(I))}peek(I){return this.cache.has(I)?this._peek(I,this.cache):this.oldCache.has(I)?this._peek(I,this.oldCache):void 0}delete(I){const y=this.cache.delete(I);return y&&this._size--,this.oldCache.delete(I)||y}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(I){if(!(I&&I>0))throw new TypeError("`maxSize` must be a number greater than 0");const y=[...this._entriesAscending()],k=y.length-I;k<0?(this.cache=new Map(y),this.oldCache=new Map,this._size=y.length):(k>0&&this._emitEvictions(y.slice(0,k)),this.oldCache=new Map(y.slice(k)),this.cache=new Map,this._size=0),this.maxSize=I}*keys(){for(const[I]of this)yield I}*values(){for(const[,I]of this)yield I}*[Symbol.iterator](){for(const I of this.cache){const[y,k]=I;this._deleteIfExpired(y,k)===!1&&(yield[y,k.value])}for(const I of this.oldCache){const[y,k]=I;this.cache.has(y)||this._deleteIfExpired(y,k)===!1&&(yield[y,k.value])}}*entriesDescending(){let I=[...this.cache];for(let y=I.length-1;y>=0;--y){const k=I[y],[T,F]=k;this._deleteIfExpired(T,F)===!1&&(yield[T,F.value])}I=[...this.oldCache];for(let y=I.length-1;y>=0;--y){const k=I[y],[T,F]=k;this.cache.has(T)||this._deleteIfExpired(T,F)===!1&&(yield[T,F.value])}}*entriesAscending(){for(const[I,y]of this._entriesAscending())yield[I,y.value]}get size(){if(!this._size)return this.oldCache.size;let I=0;for(const y of this.oldCache.keys())this.cache.has(y)||I++;return Math.min(this._size+I,this.maxSize)}entries(){return this.entriesAscending()}forEach(I,y=this){for(const[k,T]of this.entriesAscending())I.call(y,T,k,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Nr extends Error{constructor(I){super(I),Error.captureStackTrace&&Error.captureStackTrace(this,Nr),this.name="AbortError"}}class Vn extends Error{constructor(I,y){super(y),this.errors=I,this.message=y,this.name="AggregateError"}}const Bo=Vn;class ta{constructor(I,y,k=null){this.offset=I,this.length=y,this.data=k}get top(){return this.offset+this.length}}class Qn{constructor(I,y,k){this.offset=I,this.length=y,this.blockIds=k}}class ml extends _r{constructor(I,{blockSize:y=65536,cacheSize:k=100}={}){super(),this.source=I,this.blockSize=y,this.blockCache=new Ma({maxSize:k,onEviction:(T,F)=>{this.evictedBlocks.set(T,F)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(I,y){const k=[],T=[],F=[];this.evictedBlocks.clear();for(const{offset:se,length:X}of I){let be=se+X;const{fileSize:Ce}=this;Ce!==null&&(be=Math.min(be,Ce));for(let ke=Math.floor(se/this.blockSize)*this.blockSize;ke<be;ke+=this.blockSize){const Re=Math.floor(ke/this.blockSize);this.blockCache.has(Re)||this.blockRequests.has(Re)||(this.blockIdsToFetch.add(Re),T.push(Re)),this.blockRequests.has(Re)&&k.push(this.blockRequests.get(Re)),F.push(Re)}}await async function(se){return new Promise(X=>setTimeout(X,se))}(),this.fetchBlocks(y);const $=[];for(const se of T)this.blockRequests.has(se)&&$.push(this.blockRequests.get(se));await Promise.allSettled(k),await Promise.allSettled($);const N=[],re=F.filter(se=>this.abortedBlockIds.has(se)||!this.blockCache.has(se));if(re.forEach(se=>this.blockIdsToFetch.add(se)),re.length>0&&y&&!y.aborted){this.fetchBlocks(null);for(const se of re){const X=this.blockRequests.get(se);if(!X)throw new Error(`Block ${se} is not in the block requests`);N.push(X)}await Promise.allSettled(N)}if(y&&y.aborted)throw new Nr("Request was aborted");const K=F.map(se=>this.blockCache.get(se)||this.evictedBlocks.get(se)),Z=K.filter(se=>!se);if(Z.length)throw new Bo(Z,"Request failed");const ge=new Map(function(se,X){const be=Array.isArray(se)?se:Array.from(se),Ce=Array.isArray(X)?X:Array.from(X);return be.map((ke,Re)=>[ke,Ce[Re]])}(F,K));return this.readSliceData(I,ge)}fetchBlocks(I){if(this.blockIdsToFetch.size>0){const y=this.groupBlocks(this.blockIdsToFetch),k=this.source.fetch(y,I);for(let T=0;T<y.length;++T){const F=y[T];for(const $ of F.blockIds)this.blockRequests.set($,(async()=>{try{const N=(await k)[T],re=$*this.blockSize,K=re-N.offset,Z=Math.min(K+this.blockSize,N.data.byteLength),ge=N.data.slice(K,Z),se=new ta(re,ge.byteLength,ge,$);this.blockCache.set($,se),this.abortedBlockIds.delete($)}catch(N){if(N.name!=="AbortError")throw N;N.signal=I,this.blockCache.delete($),this.abortedBlockIds.add($)}finally{this.blockRequests.delete($)}})())}this.blockIdsToFetch.clear()}}groupBlocks(I){const y=Array.from(I).sort(($,N)=>$-N);if(y.length===0)return[];let k=[],T=null;const F=[];for(const $ of y)T===null||T+1===$?(k.push($),T=$):(F.push(new Qn(k[0]*this.blockSize,k.length*this.blockSize,k)),k=[$],T=$);return F.push(new Qn(k[0]*this.blockSize,k.length*this.blockSize,k)),F}readSliceData(I,y){return I.map(k=>{let T=k.offset+k.length;this.fileSize!==null&&(T=Math.min(this.fileSize,T));const F=Math.floor(k.offset/this.blockSize),$=Math.floor(T/this.blockSize),N=new ArrayBuffer(k.length),re=new Uint8Array(N);for(let K=F;K<=$;++K){const Z=y.get(K),ge=Z.offset-k.offset;let se,X=0,be=0;ge<0?X=-ge:ge>0&&(be=ge),se=Z.top-T<0?Z.length-X:T-Z.offset-X;const Ce=new Uint8Array(Z.data,X,se);re.set(Ce,be)}return N})}}class kr{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(I){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Eo{constructor(I){this.url=I}async request({headers:I,signal:y}={}){throw new Error("request is not implemented")}}class ia extends kr{constructor(I){super(),this.response=I}get status(){return this.response.status}getHeader(I){return this.response.headers.get(I)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Ah extends Eo{constructor(I,y){super(I),this.credentials=y}async request({headers:I,signal:y}={}){const k=await fetch(this.url,{headers:I,credentials:this.credentials,signal:y});return new ia(k)}}class yl extends kr{constructor(I,y){super(),this.xhr=I,this.data=y}get status(){return this.xhr.status}getHeader(I){return this.xhr.getResponseHeader(I)}async getData(){return this.data}}class _s extends Eo{constructRequest(I,y){return new Promise((k,T)=>{const F=new XMLHttpRequest;F.open("GET",this.url),F.responseType="arraybuffer";for(const[$,N]of Object.entries(I))F.setRequestHeader($,N);F.onload=()=>{const $=F.response;k(new yl(F,$))},F.onerror=T,F.onabort=()=>T(new Nr("Request aborted")),F.send(),y&&(y.aborted&&F.abort(),y.addEventListener("abort",()=>F.abort()))})}async request({headers:I,signal:y}={}){return await this.constructRequest(I,y)}}var Ta={};class Ji extends kr{constructor(I,y){super(),this.response=I,this.dataPromise=y}get status(){return this.response.statusCode}getHeader(I){return this.response.headers[I]}async getData(){return await this.dataPromise}}class _c extends Eo{constructor(I){super(I),this.parsedUrl=Ta.parse(this.url),this.httpApi=(this.parsedUrl.protocol,Ta)}constructRequest(I,y){return new Promise((k,T)=>{const F=this.httpApi.get({...this.parsedUrl,headers:I},$=>{const N=new Promise(re=>{const K=[];$.on("data",Z=>{K.push(Z)}),$.on("end",()=>{const Z=Buffer.concat(K).buffer;re(Z)}),$.on("error",T)});k(new Ji($,N))});F.on("error",T),y&&(y.aborted&&F.destroy(new Nr("Request aborted")),y.addEventListener("abort",()=>F.destroy(new Nr("Request aborted"))))})}async request({headers:I,signal:y}={}){return await this.constructRequest(I,y)}}class Qo extends _r{constructor(I,y,k,T){super(),this.client=I,this.headers=y,this.maxRanges=k,this.allowFullFile=T,this._fileSize=null}async fetch(I,y){return this.maxRanges>=I.length?this.fetchSlices(I,y):(this.maxRanges>0&&I.length,Promise.all(I.map(k=>this.fetchSlice(k,y))))}async fetchSlices(I,y){const k=await this.client.request({headers:{...this.headers,Range:`bytes=${I.map(({offset:T,length:F})=>`${T}-${T+F}`).join(",")}`},signal:y});if(k.ok){if(k.status===206){const{type:T,params:F}=function(ge){const[se,...X]=ge.split(";").map(be=>be.trim());return{type:se,params:mr(X.map(be=>be.split("=")))}}(k.getHeader("content-type"));if(T==="multipart/byteranges"){const ge=function(se,X){let be=null;const Ce=new TextDecoder("ascii"),ke=[],Re=`--${X}`,qe=`${Re}--`;for(let Pe=0;Pe<10;++Pe)Ce.decode(new Uint8Array(se,Pe,Re.length))===Re&&(be=Pe);if(be===null)throw new Error("Could not find initial boundary");for(;be<se.byteLength;){const Pe=Ce.decode(new Uint8Array(se,be,Math.min(Re.length+1024,se.byteLength-be)));if(Pe.length===0||Pe.startsWith(qe))break;if(!Pe.startsWith(Re))throw new Error("Part does not start with boundary");const $e=Pe.substr(Re.length+2);if($e.length===0)break;const te=$e.indexOf(Sr),U=hh($e.substr(0,te)),{start:he,end:le,total:ue}=yr(U["content-range"]),de=be+Re.length+te+4,Te=parseInt(le,10)+1-parseInt(he,10);ke.push({headers:U,data:se.slice(de,de+Te),offset:he,length:Te,fileSize:ue}),be=de+Te+4}return ke}(await k.getData(),F.boundary);return this._fileSize=ge[0].fileSize||null,ge}const $=await k.getData(),{start:N,end:re,total:K}=yr(k.getHeader("content-range"));this._fileSize=K||null;const Z=[{data:$,offset:N,length:re-N}];if(I.length>1){const ge=await Promise.all(I.slice(1).map(se=>this.fetchSlice(se,y)));return Z.concat(ge)}return Z}{if(!this.allowFullFile)throw new Error("Server responded with full file");const T=await k.getData();return this._fileSize=T.byteLength,[{data:T,offset:0,length:T.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(I,y){const{offset:k,length:T}=I,F=await this.client.request({headers:{...this.headers,Range:`bytes=${k}-${k+T}`},signal:y});if(F.ok){if(F.status===206){const $=await F.getData(),{total:N}=yr(F.getHeader("content-range"));return this._fileSize=N||null,{data:$,offset:k,length:T}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const $=await F.getData();return this._fileSize=$.byteLength,{data:$,offset:0,length:$.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function ns(b,{blockSize:I,cacheSize:y}){return I===null?b:new ml(b,{blockSize:I,cacheSize:y})}function vc(b,{forceXHR:I=!1,...y}={}){return typeof fetch!="function"||I?typeof XMLHttpRequest<"u"?function(k,{headers:T={},maxRanges:F=0,allowFullFile:$=!1,...N}={}){const re=new _s(k);return ns(new Qo(re,T,F,$),N)}(b,y):function(k,{headers:T={},maxRanges:F=0,allowFullFile:$=!1,...N}={}){const re=new _c(k);return ns(new Qo(re,T,F,$),N)}(b,y):function(k,{headers:T={},credentials:F,maxRanges:$=0,allowFullFile:N=!1,...re}={}){const K=new Ah(k,F);return ns(new Qo(K,T,$,N),re)}(b,y)}function _l(b,I){let y=b.length-I,k=0;do{for(let T=I;T>0;T--)b[k+I]+=b[k],k++;y-=I}while(y>0)}function So(b,I,y){let k=0,T=b.length;const F=T/y;for(;T>I;){for(let N=I;N>0;--N)b[k+I]+=b[k],++k;T-=I}const $=b.slice();for(let N=0;N<F;++N)for(let re=0;re<y;++re)b[y*N+re]=$[(y-re-1)*F+N]}class _a{async decode(I,y){const k=await this.decodeBlock(y),T=I.Predictor||1;if(T!==1){const F=!I.StripOffsets;return function($,N,re,K,Z,ge){if(!N||N===1)return $;for(let be=0;be<Z.length;++be){if(Z[be]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(Z[be]!==Z[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const se=Z[0]/8,X=ge===2?1:Z.length;for(let be=0;be<K&&!(be*X*re*se>=$.byteLength);++be){let Ce;if(N===2){switch(Z[0]){case 8:Ce=new Uint8Array($,be*X*re*se,X*re*se);break;case 16:Ce=new Uint16Array($,be*X*re*se,X*re*se/2);break;case 32:Ce=new Uint32Array($,be*X*re*se,X*re*se/4);break;default:throw new Error(`Predictor 2 not allowed with ${Z[0]} bits per sample.`)}_l(Ce,X)}else N===3&&(Ce=new Uint8Array($,be*X*re*se,X*re*se),So(Ce,X,se))}return $}(k,T,F?I.TileWidth:I.ImageWidth,F?I.TileLength:I.RowsPerStrip||I.ImageLength,I.BitsPerSample,I.PlanarConfiguration)}return k}}function rs(b){switch(b){case ie.BYTE:case ie.ASCII:case ie.SBYTE:case ie.UNDEFINED:return 1;case ie.SHORT:case ie.SSHORT:return 2;case ie.LONG:case ie.SLONG:case ie.FLOAT:case ie.IFD:return 4;case ie.RATIONAL:case ie.SRATIONAL:case ie.DOUBLE:case ie.LONG8:case ie.SLONG8:case ie.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${b}`)}}function vs(b,I,y,k){let T=null,F=null;const $=rs(I);switch(I){case ie.BYTE:case ie.ASCII:case ie.UNDEFINED:T=new Uint8Array(y),F=b.readUint8;break;case ie.SBYTE:T=new Int8Array(y),F=b.readInt8;break;case ie.SHORT:T=new Uint16Array(y),F=b.readUint16;break;case ie.SSHORT:T=new Int16Array(y),F=b.readInt16;break;case ie.LONG:case ie.IFD:T=new Uint32Array(y),F=b.readUint32;break;case ie.SLONG:T=new Int32Array(y),F=b.readInt32;break;case ie.LONG8:case ie.IFD8:T=new Array(y),F=b.readUint64;break;case ie.SLONG8:T=new Array(y),F=b.readInt64;break;case ie.RATIONAL:T=new Uint32Array(2*y),F=b.readUint32;break;case ie.SRATIONAL:T=new Int32Array(2*y),F=b.readInt32;break;case ie.FLOAT:T=new Float32Array(y),F=b.readFloat32;break;case ie.DOUBLE:T=new Float64Array(y),F=b.readFloat64;break;default:throw new RangeError(`Invalid field type: ${I}`)}if(I!==ie.RATIONAL&&I!==ie.SRATIONAL)for(let N=0;N<y;++N)T[N]=F.call(b,k+N*$);else for(let N=0;N<y;N+=2)T[N]=F.call(b,k+N*$),T[N+1]=F.call(b,k+(N*$+4));return I===ie.ASCII?new TextDecoder("utf-8").decode(T):T}class dh{constructor(I,y,k){this.fileDirectory=I,this.geoKeyDirectory=y,this.nextIFDByteOffset=k}}class ko extends Error{constructor(I){super(`No image at index ${I}`),this.index=I}}class fh{async readRasters(I={}){const{window:y,width:k,height:T}=I;let{resX:F,resY:$,bbox:N}=I;const re=await this.getImage();let K=re;const Z=await this.getImageCount(),ge=re.getBoundingBox();if(y&&N)throw new Error('Both "bbox" and "window" passed.');if(k||T){if(y){const[be,Ce]=re.getOrigin(),[ke,Re]=re.getResolution();N=[be+y[0]*ke,Ce+y[1]*Re,be+y[2]*ke,Ce+y[3]*Re]}const X=N||ge;if(k){if(F)throw new Error("Both width and resX passed");F=(X[2]-X[0])/k}if(T){if($)throw new Error("Both width and resY passed");$=(X[3]-X[1])/T}}if(F||$){const X=[];for(let be=0;be<Z;++be){const Ce=await this.getImage(be),{SubfileType:ke,NewSubfileType:Re}=Ce.fileDirectory;(be===0||ke===2||1&Re)&&X.push(Ce)}X.sort((be,Ce)=>be.getWidth()-Ce.getWidth());for(let be=0;be<X.length;++be){const Ce=X[be],ke=(ge[2]-ge[0])/Ce.getWidth(),Re=(ge[3]-ge[1])/Ce.getHeight();if(K=Ce,F&&F>ke||$&&$>Re)break}}let se=y;if(N){const[X,be]=re.getOrigin(),[Ce,ke]=K.getResolution(re);se=[Math.round((N[0]-X)/Ce),Math.round((N[1]-be)/ke),Math.round((N[2]-X)/Ce),Math.round((N[3]-be)/ke)],se=[Math.min(se[0],se[2]),Math.min(se[1],se[3]),Math.max(se[0],se[2]),Math.max(se[1],se[3])]}return K.readRasters({...I,window:se})}}class Pa extends fh{constructor(I,y,k,T,F={}){super(),this.source=I,this.littleEndian=y,this.bigTiff=k,this.firstIFDOffset=T,this.cache=F.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(I,y){const k=this.bigTiff?4048:1024;return new an((await this.source.fetch([{offset:I,length:y!==void 0?y:k}]))[0],I,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(I){const y=this.bigTiff?20:12,k=this.bigTiff?8:2;let T=await this.getSlice(I);const F=this.bigTiff?T.readUint64(I):T.readUint16(I),$=F*y+(this.bigTiff?16:6);T.covers(I,$)||(T=await this.getSlice(I,$));const N={};let re=I+(this.bigTiff?8:2);for(let ge=0;ge<F;re+=y,++ge){const se=T.readUint16(re),X=T.readUint16(re+2),be=this.bigTiff?T.readUint64(re+4):T.readUint32(re+4);let Ce,ke;const Re=rs(X),qe=re+(this.bigTiff?12:8);if(Re*be<=(this.bigTiff?8:4))Ce=vs(T,X,be,qe);else{const Pe=T.readOffset(qe),$e=rs(X)*be;T.covers(Pe,$e)?Ce=vs(T,X,be,Pe):Ce=vs(await this.getSlice(Pe,$e),X,be,Pe)}ke=be===1&&J.indexOf(se)===-1&&X!==ie.RATIONAL&&X!==ie.SRATIONAL?Ce[0]:Ce,N[pr[se]]=ke}const K=function(ge){const se=ge.GeoKeyDirectory;if(!se)return null;const X={};for(let be=4;be<=4*se[3];be+=4){const Ce=Ci[se[be]],ke=se[be+1]?pr[se[be+1]]:null,Re=se[be+2],qe=se[be+3];let Pe=null;if(ke){if(Pe=ge[ke],Pe==null)throw new Error(`Could not get value of geoKey '${Ce}'.`);typeof Pe=="string"?Pe=Pe.substring(qe,qe+Re-1):Pe.subarray&&(Pe=Pe.subarray(qe,qe+Re),Re===1&&(Pe=Pe[0]))}else Pe=qe;X[Ce]=Pe}return X}(N),Z=T.readOffset(I+k+y*F);return new dh(N,K,Z)}async requestIFD(I){if(this.ifdRequests[I])return this.ifdRequests[I];if(I===0)return this.ifdRequests[I]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[I];if(!this.ifdRequests[I-1])try{this.ifdRequests[I-1]=this.requestIFD(I-1)}catch(y){throw y instanceof ko?new ko(I):y}return this.ifdRequests[I]=(async()=>{const y=await this.ifdRequests[I-1];if(y.nextIFDByteOffset===0)throw new ko(I);return this.parseFileDirectoryAt(y.nextIFDByteOffset)})(),this.ifdRequests[I]}async getImage(I=0){const y=await this.requestIFD(I);return new dr(y.fileDirectory,y.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let I=0,y=!0;for(;y;)try{await this.requestIFD(I),++I}catch(k){if(!(k instanceof ko))throw k;y=!1}return I}async getGhostValues(){const I=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const y="GDAL_STRUCTURAL_METADATA_SIZE=";let k=await this.getSlice(I,130);if(y===vs(k,ie.ASCII,30,I)){const T=vs(k,ie.ASCII,130,I).split(`
`)[0],F=Number(T.split("=")[1].split(" ")[0])+T.length;F>130&&(k=await this.getSlice(I,F));const $=vs(k,ie.ASCII,F,I);this.ghostValues={},$.split(`
`).filter(N=>N.length>0).map(N=>N.split("=")).forEach(([N,re])=>{this.ghostValues[N]=re})}return this.ghostValues}static async fromSource(I,y,k){const T=(await I.fetch([{offset:0,length:1024}],k))[0],F=new qs(T),$=F.getUint16(0,0);let N;if($===18761)N=!0;else{if($!==19789)throw new TypeError("Invalid byte order value.");N=!1}const re=F.getUint16(2,N);let K;if(re===42)K=!1;else{if(re!==43)throw new TypeError("Invalid magic number.");if(K=!0,F.getUint16(4,N)!==8)throw new Error("Unsupported offset byte-size.")}const Z=K?F.getUint64(8,N):F.getUint32(4,N);return new Pa(I,N,K,Z,y)}close(){return typeof this.source.close=="function"&&this.source.close()}}var Hs={exports:{}};(function(b,I){var y=function(){var k={},T=Math.PI/180,F=180/Math.PI,$=6378137,N=20037508342789244e-9;function re(Z){return Number(Z)===Z&&Z%1!=0}function K(Z){if(Z=Z||{},this.size=Z.size||256,this.expansion=Z.antimeridian===!0?2:1,!k[this.size]){var ge=this.size,se=k[this.size]={};se.Bc=[],se.Cc=[],se.zc=[],se.Ac=[];for(var X=0;X<30;X++)se.Bc.push(ge/360),se.Cc.push(ge/(2*Math.PI)),se.zc.push(ge/2),se.Ac.push(ge),ge*=2}this.Bc=k[this.size].Bc,this.Cc=k[this.size].Cc,this.zc=k[this.size].zc,this.Ac=k[this.size].Ac}return K.prototype.px=function(Z,ge){if(re(ge)){var se=this.size*Math.pow(2,ge),X=se/2,be=se/360,Ce=se/(2*Math.PI),ke=se,Re=Math.min(Math.max(Math.sin(T*Z[1]),-.9999),.9999),qe=X+Z[0]*be,Pe=X+.5*Math.log((1+Re)/(1-Re))*-Ce;return qe>ke*this.expansion&&(qe=ke*this.expansion),Pe>ke&&(Pe=ke),[qe,Pe]}return X=this.zc[ge],Re=Math.min(Math.max(Math.sin(T*Z[1]),-.9999),.9999),qe=Math.round(X+Z[0]*this.Bc[ge]),Pe=Math.round(X+.5*Math.log((1+Re)/(1-Re))*-this.Cc[ge]),qe>this.Ac[ge]*this.expansion&&(qe=this.Ac[ge]*this.expansion),Pe>this.Ac[ge]&&(Pe=this.Ac[ge]),[qe,Pe]},K.prototype.ll=function(Z,ge){if(re(ge)){var se=this.size*Math.pow(2,ge),X=se/360,be=se/(2*Math.PI),Ce=se/2,ke=(Z[1]-Ce)/-be;return[(Z[0]-Ce)/X,F*(2*Math.atan(Math.exp(ke))-.5*Math.PI)]}return ke=(Z[1]-this.zc[ge])/-this.Cc[ge],[(Z[0]-this.zc[ge])/this.Bc[ge],F*(2*Math.atan(Math.exp(ke))-.5*Math.PI)]},K.prototype.bbox=function(Z,ge,se,X,be){X&&(ge=Math.pow(2,se)-1-ge);var Ce=[Z*this.size,(+ge+1)*this.size],ke=[(+Z+1)*this.size,ge*this.size],Re=this.ll(Ce,se).concat(this.ll(ke,se));return be==="900913"?this.convert(Re,"900913"):Re},K.prototype.xyz=function(Z,ge,se,X){X==="900913"&&(Z=this.convert(Z,"WGS84"));var be=[Z[0],Z[1]],Ce=[Z[2],Z[3]],ke=this.px(be,ge),Re=this.px(Ce,ge),qe=[Math.floor(ke[0]/this.size),Math.floor((Re[0]-1)/this.size)],Pe=[Math.floor(Re[1]/this.size),Math.floor((ke[1]-1)/this.size)],$e={minX:Math.min.apply(Math,qe)<0?0:Math.min.apply(Math,qe),minY:Math.min.apply(Math,Pe)<0?0:Math.min.apply(Math,Pe),maxX:Math.max.apply(Math,qe),maxY:Math.max.apply(Math,Pe)};if(se){var te={minY:Math.pow(2,ge)-1-$e.maxY,maxY:Math.pow(2,ge)-1-$e.minY};$e.minY=te.minY,$e.maxY=te.maxY}return $e},K.prototype.convert=function(Z,ge){return ge==="900913"?this.forward(Z.slice(0,2)).concat(this.forward(Z.slice(2,4))):this.inverse(Z.slice(0,2)).concat(this.inverse(Z.slice(2,4)))},K.prototype.forward=function(Z){var ge=[$*Z[0]*T,$*Math.log(Math.tan(.25*Math.PI+.5*Z[1]*T))];return ge[0]>N&&(ge[0]=N),ge[0]<-N&&(ge[0]=-N),ge[1]>N&&(ge[1]=N),ge[1]<-N&&(ge[1]=-N),ge},K.prototype.inverse=function(Z){return[Z[0]*F/$,(.5*Math.PI-2*Math.atan(Math.exp(-Z[1]/$)))*F]},K}();b.exports=y})(Hs);const Ln=256,Wn=4007501668557849e-8,Is=new(xt(Hs.exports))({size:Ln,antimeridian:!0}),vl=({x:b,y:I,z:y})=>Is.bbox(b,I,y,!1,"900913"),js=36e5;let Il;const bs=new Ma({maxSize:16,maxAge:js}),hu=new Ma({maxSize:16,maxAge:js}),Ic=new Ma({maxSize:1024,maxAge:js}),bl=b=>{Il===void 0&&(Il=new yc);const I=k=>{const T=bs.get(k);if(T)return T;{const F=async function($,N={},re){return Pa.fromSource(vc($,N),re)}(k);return bs.set(k,F),F}},y=async()=>{var F;const k=hu.get(b);if(k)return k;{const $=await I(b),N=await $.getImage(),re=N.getGDALMetadata(0),K=N.fileDirectory,Z=(F=N.fileDirectory)==null?void 0:F.Artist,ge=(([Ce,ke,Re,qe])=>[...Is.inverse([Ce,ke]),...Is.inverse([Re,qe])])(N.getBoundingBox()),se=[],X=await $.getImageCount();for(let Ce=0;Ce<X;Ce++){const ke=await $.getImage(Ce),Re=(T=ke.getResolution(N)[0],Math.log2(Wn/(Ln*T))),qe=!!(1&ke.fileDirectory.NewSubfileType),Pe=!!(4&ke.fileDirectory.NewSubfileType);se.push({zoom:Re,isOverview:qe,isMask:Pe})}const be={offset:(re==null?void 0:re.OFFSET)!==void 0?parseFloat(re.OFFSET):0,scale:(re==null?void 0:re.SCALE)!==void 0?parseFloat(re.SCALE):1,noData:N.getGDALNoData()??void 0,photometricInterpretation:K==null?void 0:K.PhotometricInterpretation,bitsPerSample:K==null?void 0:K.BitsPerSample,colorMap:K==null?void 0:K.ColorMap,artist:Z,bbox:ge,images:se};return hu.set(b,be),be}var T};return{getTilejson:async k=>{const{artist:T,images:F,bbox:$}=await y(),N=F.map(re=>re.zoom);return{tilejson:"2.2.0",tiles:[k+"/{z}/{x}/{y}"],attribution:T,minzoom:Math.round(Math.min(...N)),maxzoom:Math.round(Math.max(...N)),bounds:$}},getMetadata:y,getRawTile:async({z:k,x:T,y:F},$=256)=>{const N=`${b}/${$}/${k}/${T}/${F}`,re=Ic.get(N);if(re)return re;{const K=await I(b),{noData:Z}=await y(),ge=Z===void 0||isNaN(Z)?1/0:Z,se=K.readRasters({bbox:vl({x:T,y:F,z:k}),width:$,height:$,interleave:!1,resampleMethod:"nearest",pool:Il,fillValue:ge});return Ic.set(N,se),se}}}};function xl(b,I){return b==null||I==null?NaN:b<I?-1:b>I?1:b>=I?0:NaN}function gh(b,I){return b==null||I==null?NaN:I<b?-1:I>b?1:I>=b?0:NaN}function bc(b){let I,y,k;function T(F,$,N=0,re=F.length){if(N<re){if(I($,$)!==0)return re;do{const K=N+re>>>1;y(F[K],$)<0?N=K+1:re=K}while(N<re)}return N}return b.length!==2?(I=xl,y=(F,$)=>xl(b(F),$),k=(F,$)=>b(F)-$):(I=b===xl||b===gh?b:Do,y=b,k=b),{left:T,center:function(F,$,N=0,re=F.length){const K=T(F,$,N,re-1);return K>N&&k(F[K-1],$)>-k(F[K],$)?K-1:K},right:function(F,$,N=0,re=F.length){if(N<re){if(I($,$)!==0)return re;do{const K=N+re>>>1;y(F[K],$)<=0?N=K+1:re=K}while(N<re)}return N}}}function Do(){return 0}const wl=bc(xl).right;bc(function(b){return b===null?NaN:+b}).center;const Cl=Math.sqrt(50),xc=Math.sqrt(10),wc=Math.sqrt(2);function Dr(b,I,y){const k=(I-b)/Math.max(0,y),T=Math.floor(Math.log10(k)),F=k/Math.pow(10,T),$=F>=Cl?10:F>=xc?5:F>=wc?2:1;let N,re,K;return T<0?(K=Math.pow(10,-T)/$,N=Math.round(b*K),re=Math.round(I*K),N/K<b&&++N,re/K>I&&--re,K=-K):(K=Math.pow(10,T)*$,N=Math.round(b/K),re=Math.round(I/K),N*K<b&&++N,re*K>I&&--re),re<N&&.5<=y&&y<2?Dr(b,I,2*y):[N,re,K]}function Cc(b,I,y){return Dr(b=+b,I=+I,y=+y)[2]}function Bl(b,I){switch(arguments.length){case 0:break;case 1:this.range(b);break;default:this.range(I).domain(b)}return this}function Ra(b,I,y){b.prototype=I.prototype=y,y.constructor=b}function La(b,I){var y=Object.create(b.prototype);for(var k in I)y[k]=I[k];return y}function Oi(){}var as=.7,El=1/as,na="\\s*([+-]?\\d+)\\s*",Mo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ph=/^#([0-9a-f]{3,8})$/,Au=new RegExp(`^rgb\\(${na},${na},${na}\\)$`),Bc=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),du=new RegExp(`^rgba\\(${na},${na},${na},${Mo}\\)$`),fu=new RegExp(`^rgba\\(${ra},${ra},${ra},${Mo}\\)$`),gu=new RegExp(`^hsl\\(${Mo},${ra},${ra}\\)$`),pu=new RegExp(`^hsla\\(${Mo},${ra},${ra},${Mo}\\)$`),ss={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ec(){return this.rgb().formatHex()}function mu(){return this.rgb().formatRgb()}function Js(b){var I,y;return b=(b+"").trim().toLowerCase(),(I=ph.exec(b))?(y=I[1].length,I=parseInt(I[1],16),y===6?Ys(I):y===3?new vr(I>>8&15|I>>4&240,I>>4&15|240&I,(15&I)<<4|15&I,1):y===8?xs(I>>24&255,I>>16&255,I>>8&255,(255&I)/255):y===4?xs(I>>12&15|I>>8&240,I>>8&15|I>>4&240,I>>4&15|240&I,((15&I)<<4|15&I)/255):null):(I=Au.exec(b))?new vr(I[1],I[2],I[3],1):(I=Bc.exec(b))?new vr(255*I[1]/100,255*I[2]/100,255*I[3]/100,1):(I=du.exec(b))?xs(I[1],I[2],I[3],I[4]):(I=fu.exec(b))?xs(255*I[1]/100,255*I[2]/100,255*I[3]/100,I[4]):(I=gu.exec(b))?Po(I[1],I[2]/100,I[3]/100,1):(I=pu.exec(b))?Po(I[1],I[2]/100,I[3]/100,I[4]):ss.hasOwnProperty(b)?Ys(ss[b]):b==="transparent"?new vr(NaN,NaN,NaN,0):null}function Ys(b){return new vr(b>>16&255,b>>8&255,255&b,1)}function xs(b,I,y,k){return k<=0&&(b=I=y=NaN),new vr(b,I,y,k)}function Qc(b,I,y,k){return arguments.length===1?((T=b)instanceof Oi||(T=Js(T)),T?new vr((T=T.rgb()).r,T.g,T.b,T.opacity):new vr):new vr(b,I,y,k??1);var T}function vr(b,I,y,k){this.r=+b,this.g=+I,this.b=+y,this.opacity=+k}function Sc(){return`#${os(this.r)}${os(this.g)}${os(this.b)}`}function kc(){const b=To(this.opacity);return`${b===1?"rgb(":"rgba("}${Fa(this.r)}, ${Fa(this.g)}, ${Fa(this.b)}${b===1?")":`, ${b})`}`}function To(b){return isNaN(b)?1:Math.max(0,Math.min(1,b))}function Fa(b){return Math.max(0,Math.min(255,Math.round(b)||0))}function os(b){return((b=Fa(b))<16?"0":"")+b.toString(16)}function Po(b,I,y,k){return k<=0?b=I=y=NaN:y<=0||y>=1?b=I=NaN:I<=0&&(b=NaN),new Mr(b,I,y,k)}function va(b){if(b instanceof Mr)return new Mr(b.h,b.s,b.l,b.opacity);if(b instanceof Oi||(b=Js(b)),!b)return new Mr;if(b instanceof Mr)return b;var I=(b=b.rgb()).r/255,y=b.g/255,k=b.b/255,T=Math.min(I,y,k),F=Math.max(I,y,k),$=NaN,N=F-T,re=(F+T)/2;return N?($=I===F?(y-k)/N+6*(y<k):y===F?(k-I)/N+2:(I-y)/N+4,N/=re<.5?F+T:2-F-T,$*=60):N=re>0&&re<1?0:$,new Mr($,N,re,b.opacity)}function Mr(b,I,y,k){this.h=+b,this.s=+I,this.l=+y,this.opacity=+k}function Ql(b){return(b=(b||0)%360)<0?b+360:b}function Ks(b){return Math.max(0,Math.min(1,b||0))}function Sl(b,I,y){return 255*(b<60?I+(y-I)*b/60:b<180?y:b<240?I+(y-I)*(240-b)/60:I)}Ra(Oi,Js,{copy(b){return Object.assign(new this.constructor,this,b)},displayable(){return this.rgb().displayable()},hex:Ec,formatHex:Ec,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return va(this).formatHsl()},formatRgb:mu,toString:mu}),Ra(vr,Qc,La(Oi,{brighter(b){return b=b==null?El:Math.pow(El,b),new vr(this.r*b,this.g*b,this.b*b,this.opacity)},darker(b){return b=b==null?as:Math.pow(as,b),new vr(this.r*b,this.g*b,this.b*b,this.opacity)},rgb(){return this},clamp(){return new vr(Fa(this.r),Fa(this.g),Fa(this.b),To(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sc,formatHex:Sc,formatHex8:function(){return`#${os(this.r)}${os(this.g)}${os(this.b)}${os(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:kc,toString:kc})),Ra(Mr,function(b,I,y,k){return arguments.length===1?va(b):new Mr(b,I,y,k??1)},La(Oi,{brighter(b){return b=b==null?El:Math.pow(El,b),new Mr(this.h,this.s,this.l*b,this.opacity)},darker(b){return b=b==null?as:Math.pow(as,b),new Mr(this.h,this.s,this.l*b,this.opacity)},rgb(){var b=this.h%360+360*(this.h<0),I=isNaN(b)||isNaN(this.s)?0:this.s,y=this.l,k=y+(y<.5?y:1-y)*I,T=2*y-k;return new vr(Sl(b>=240?b-240:b+120,T,k),Sl(b,T,k),Sl(b<120?b+240:b-120,T,k),this.opacity)},clamp(){return new Mr(Ql(this.h),Ks(this.s),Ks(this.l),To(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const b=To(this.opacity);return`${b===1?"hsl(":"hsla("}${Ql(this.h)}, ${100*Ks(this.s)}%, ${100*Ks(this.l)}%${b===1?")":`, ${b})`}`}}));var ws=b=>()=>b;function Cs(b){return(b=+b)==1?kl:function(I,y){return y-I?function(k,T,F){return k=Math.pow(k,F),T=Math.pow(T,F)-k,F=1/F,function($){return Math.pow(k+$*T,F)}}(I,y,b):ws(isNaN(I)?y:I)}}function kl(b,I){var y=I-b;return y?function(k,T){return function(F){return k+F*T}}(b,y):ws(isNaN(b)?I:b)}var yu=function b(I){var y=Cs(I);function k(T,F){var $=y((T=Qc(T)).r,(F=Qc(F)).r),N=y(T.g,F.g),re=y(T.b,F.b),K=kl(T.opacity,F.opacity);return function(Z){return T.r=$(Z),T.g=N(Z),T.b=re(Z),T.opacity=K(Z),T+""}}return k.gamma=b,k}(1);function mh(b,I){I||(I=[]);var y,k=b?Math.min(I.length,b.length):0,T=I.slice();return function(F){for(y=0;y<k;++y)T[y]=b[y]*(1-F)+I[y]*F;return T}}function Sn(b,I){var y,k=I?I.length:0,T=b?Math.min(k,b.length):0,F=new Array(T),$=new Array(k);for(y=0;y<T;++y)F[y]=Es(b[y],I[y]);for(;y<k;++y)$[y]=I[y];return function(N){for(y=0;y<T;++y)$[y]=F[y](N);return $}}function yh(b,I){var y=new Date;return b=+b,I=+I,function(k){return y.setTime(b*(1-k)+I*k),y}}function ki(b,I){return b=+b,I=+I,function(y){return b*(1-y)+I*y}}function Dc(b,I){var y,k={},T={};for(y in b!==null&&typeof b=="object"||(b={}),I!==null&&typeof I=="object"||(I={}),I)y in b?k[y]=Es(b[y],I[y]):T[y]=I[y];return function(F){for(y in k)T[y]=k[y](F);return T}}var sn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yi=new RegExp(sn.source,"g");function Bs(b,I){var y,k,T,F=sn.lastIndex=Yi.lastIndex=0,$=-1,N=[],re=[];for(b+="",I+="";(y=sn.exec(b))&&(k=Yi.exec(I));)(T=k.index)>F&&(T=I.slice(F,T),N[$]?N[$]+=T:N[++$]=T),(y=y[0])===(k=k[0])?N[$]?N[$]+=k:N[++$]=k:(N[++$]=null,re.push({i:$,x:ki(y,k)})),F=Yi.lastIndex;return F<I.length&&(T=I.slice(F),N[$]?N[$]+=T:N[++$]=T),N.length<2?re[0]?function(K){return function(Z){return K(Z)+""}}(re[0].x):function(K){return function(){return K}}(I):(I=re.length,function(K){for(var Z,ge=0;ge<I;++ge)N[(Z=re[ge]).i]=Z.x(K);return N.join("")})}function Es(b,I){var y,k,T=typeof I;return I==null||T==="boolean"?ws(I):(T==="number"?ki:T==="string"?(y=Js(I))?(I=y,yu):Bs:I instanceof Js?yu:I instanceof Date?yh:(k=I,!ArrayBuffer.isView(k)||k instanceof DataView?Array.isArray(I)?Sn:typeof I.valueOf!="function"&&typeof I.toString!="function"||isNaN(I)?Dc:ki:mh))(b,I)}function Dl(b,I){return b=+b,I=+I,function(y){return Math.round(b*(1-y)+I*y)}}function Qs(b){return+b}var Ss=[0,1];function ar(b){return b}function Ml(b,I){return(I-=b=+b)?function(k){return(k-b)/I}:(y=isNaN(I)?NaN:.5,function(){return y});var y}function Mc(b,I,y){var k=b[0],T=b[1],F=I[0],$=I[1];return T<k?(k=Ml(T,k),F=y($,F)):(k=Ml(k,T),F=y(F,$)),function(N){return F(k(N))}}function Tl(b,I,y){var k=Math.min(b.length,I.length)-1,T=new Array(k),F=new Array(k),$=-1;for(b[k]<b[0]&&(b=b.slice().reverse(),I=I.slice().reverse());++$<k;)T[$]=Ml(b[$],b[$+1]),F[$]=y(I[$],I[$+1]);return function(N){var re=wl(b,N,1,k)-1;return F[re](T[re](N))}}function ks(){var b,I,y,k,T,F,$=Ss,N=Ss,re=Es,K=ar;function Z(){var se,X,be,Ce=Math.min($.length,N.length);return K!==ar&&(se=$[0],X=$[Ce-1],se>X&&(be=se,se=X,X=be),K=function(ke){return Math.max(se,Math.min(X,ke))}),k=Ce>2?Tl:Mc,T=F=null,ge}function ge(se){return se==null||isNaN(se=+se)?y:(T||(T=k($.map(b),N,re)))(b(K(se)))}return ge.invert=function(se){return K(I((F||(F=k(N,$.map(b),ki)))(se)))},ge.domain=function(se){return arguments.length?($=Array.from(se,Qs),Z()):$.slice()},ge.range=function(se){return arguments.length?(N=Array.from(se),Z()):N.slice()},ge.rangeRound=function(se){return N=Array.from(se),re=Dl,Z()},ge.clamp=function(se){return arguments.length?(K=!!se||ar,Z()):K!==ar},ge.interpolate=function(se){return arguments.length?(re=se,Z()):re},ge.unknown=function(se){return arguments.length?(y=se,ge):y},function(se,X){return b=se,I=X,Z()}}function Ds(b,I){if((y=(b=I?b.toExponential(I-1):b.toExponential()).indexOf("e"))<0)return null;var y,k=b.slice(0,y);return[k.length>1?k[0]+k.slice(2):k,+b.slice(y+1)]}function Ia(b){return(b=Ds(Math.abs(b)))?b[1]:NaN}var Ms,Ro=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $s(b){if(!(I=Ro.exec(b)))throw new Error("invalid format: "+b);var I;return new ba({fill:I[1],align:I[2],sign:I[3],symbol:I[4],zero:I[5],width:I[6],comma:I[7],precision:I[8]&&I[8].slice(1),trim:I[9],type:I[10]})}function ba(b){this.fill=b.fill===void 0?" ":b.fill+"",this.align=b.align===void 0?">":b.align+"",this.sign=b.sign===void 0?"-":b.sign+"",this.symbol=b.symbol===void 0?"":b.symbol+"",this.zero=!!b.zero,this.width=b.width===void 0?void 0:+b.width,this.comma=!!b.comma,this.precision=b.precision===void 0?void 0:+b.precision,this.trim=!!b.trim,this.type=b.type===void 0?"":b.type+""}function Ts(b,I){var y=Ds(b,I);if(!y)return b+"";var k=y[0],T=y[1];return T<0?"0."+new Array(-T).join("0")+k:k.length>T+1?k.slice(0,T+1)+"."+k.slice(T+1):k+new Array(T-k.length+2).join("0")}$s.prototype=ba.prototype,ba.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Tc={"%":(b,I)=>(100*b).toFixed(I),b:b=>Math.round(b).toString(2),c:b=>b+"",d:function(b){return Math.abs(b=Math.round(b))>=1e21?b.toLocaleString("en").replace(/,/g,""):b.toString(10)},e:(b,I)=>b.toExponential(I),f:(b,I)=>b.toFixed(I),g:(b,I)=>b.toPrecision(I),o:b=>Math.round(b).toString(8),p:(b,I)=>Ts(100*b,I),r:Ts,s:function(b,I){var y=Ds(b,I);if(!y)return b+"";var k=y[0],T=y[1],F=T-(Ms=3*Math.max(-8,Math.min(8,Math.floor(T/3))))+1,$=k.length;return F===$?k:F>$?k+new Array(F-$+1).join("0"):F>0?k.slice(0,F)+"."+k.slice(F):"0."+new Array(1-F).join("0")+Ds(b,Math.max(0,I+F-1))[0]},X:b=>Math.round(b).toString(16).toUpperCase(),x:b=>Math.round(b).toString(16)};function Pl(b){return b}var Vi,Lo,_u,Pc=Array.prototype.map,Zs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vu(b){var I,y,k=b.grouping===void 0||b.thousands===void 0?Pl:(I=Pc.call(b.grouping,Number),y=b.thousands+"",function(se,X){for(var be=se.length,Ce=[],ke=0,Re=I[0],qe=0;be>0&&Re>0&&(qe+Re+1>X&&(Re=Math.max(1,X-qe)),Ce.push(se.substring(be-=Re,be+Re)),!((qe+=Re+1)>X));)Re=I[ke=(ke+1)%I.length];return Ce.reverse().join(y)}),T=b.currency===void 0?"":b.currency[0]+"",F=b.currency===void 0?"":b.currency[1]+"",$=b.decimal===void 0?".":b.decimal+"",N=b.numerals===void 0?Pl:function(se){return function(X){return X.replace(/[0-9]/g,function(be){return se[+be]})}}(Pc.call(b.numerals,String)),re=b.percent===void 0?"%":b.percent+"",K=b.minus===void 0?"":b.minus+"",Z=b.nan===void 0?"NaN":b.nan+"";function ge(se){var X=(se=$s(se)).fill,be=se.align,Ce=se.sign,ke=se.symbol,Re=se.zero,qe=se.width,Pe=se.comma,$e=se.precision,te=se.trim,U=se.type;U==="n"?(Pe=!0,U="g"):Tc[U]||($e===void 0&&($e=12),te=!0,U="g"),(Re||X==="0"&&be==="=")&&(Re=!0,X="0",be="=");var he=ke==="$"?T:ke==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",le=ke==="$"?F:/[%p]/.test(U)?re:"",ue=Tc[U],de=/[defgprs%]/.test(U);function Te(De){var Ge,et,lt,ct=he,vt=le;if(U==="c")vt=ue(De)+vt,De="";else{var Tt=(De=+De)<0||1/De<0;if(De=isNaN(De)?Z:ue(Math.abs(De),$e),te&&(De=function(pt){e:for(var Zt,St=pt.length,ai=1,kt=-1;ai<St;++ai)switch(pt[ai]){case".":kt=Zt=ai;break;case"0":kt===0&&(kt=ai),Zt=ai;break;default:if(!+pt[ai])break e;kt>0&&(kt=0)}return kt>0?pt.slice(0,kt)+pt.slice(Zt+1):pt}(De)),Tt&&+De==0&&Ce!=="+"&&(Tt=!1),ct=(Tt?Ce==="("?Ce:K:Ce==="-"||Ce==="("?"":Ce)+ct,vt=(U==="s"?Zs[8+Ms/3]:"")+vt+(Tt&&Ce==="("?")":""),de){for(Ge=-1,et=De.length;++Ge<et;)if(48>(lt=De.charCodeAt(Ge))||lt>57){vt=(lt===46?$+De.slice(Ge+1):De.slice(Ge))+vt,De=De.slice(0,Ge);break}}}Pe&&!Re&&(De=k(De,1/0));var at=ct.length+De.length+vt.length,Ze=at<qe?new Array(qe-at+1).join(X):"";switch(Pe&&Re&&(De=k(Ze+De,Ze.length?qe-vt.length:1/0),Ze=""),be){case"<":De=ct+De+vt+Ze;break;case"=":De=ct+Ze+De+vt;break;case"^":De=Ze.slice(0,at=Ze.length>>1)+ct+De+vt+Ze.slice(at);break;default:De=Ze+ct+De+vt}return N(De)}return $e=$e===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,$e)):Math.max(0,Math.min(20,$e)),Te.toString=function(){return se+""},Te}return{format:ge,formatPrefix:function(se,X){var be=ge(((se=$s(se)).type="f",se)),Ce=3*Math.max(-8,Math.min(8,Math.floor(Ia(X)/3))),ke=Math.pow(10,-Ce),Re=Zs[8+Ce/3];return function(qe){return be(ke*qe)+Re}}}}function Iu(b,I,y,k){var T,F=function(N,re,K){K=+K;const Z=(re=+re)<(N=+N),ge=Z?Cc(re,N,K):Cc(N,re,K);return(Z?-1:1)*(ge<0?1/-ge:ge)}(b,I,y);switch((k=$s(k??",f")).type){case"s":var $=Math.max(Math.abs(b),Math.abs(I));return k.precision!=null||isNaN(T=function(N,re){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ia(re)/3)))-Ia(Math.abs(N)))}(F,$))||(k.precision=T),_u(k,$);case"":case"e":case"g":case"p":case"r":k.precision!=null||isNaN(T=function(N,re){return N=Math.abs(N),re=Math.abs(re)-N,Math.max(0,Ia(re)-Ia(N))+1}(F,Math.max(Math.abs(b),Math.abs(I))))||(k.precision=T-(k.type==="e"));break;case"f":case"%":k.precision!=null||isNaN(T=function(N){return Math.max(0,-Ia(Math.abs(N)))}(F))||(k.precision=T-2*(k.type==="%"))}return Lo(k)}function Fo(b){var I=b.domain;return b.ticks=function(y){var k=I();return function(T,F,$){if(!(($=+$)>0))return[];if((T=+T)==(F=+F))return[T];const N=F<T,[re,K,Z]=N?Dr(F,T,$):Dr(T,F,$);if(!(K>=re))return[];const ge=K-re+1,se=new Array(ge);if(N)if(Z<0)for(let X=0;X<ge;++X)se[X]=(K-X)/-Z;else for(let X=0;X<ge;++X)se[X]=(K-X)*Z;else if(Z<0)for(let X=0;X<ge;++X)se[X]=(re+X)/-Z;else for(let X=0;X<ge;++X)se[X]=(re+X)*Z;return se}(k[0],k[k.length-1],y??10)},b.tickFormat=function(y,k){var T=I();return Iu(T[0],T[T.length-1],y??10,k)},b.nice=function(y){y==null&&(y=10);var k,T,F=I(),$=0,N=F.length-1,re=F[$],K=F[N],Z=10;for(K<re&&(T=re,re=K,K=T,T=$,$=N,N=T);Z-- >0;){if((T=Cc(re,K,y))===k)return F[$]=re,F[N]=K,I(F);if(T>0)re=Math.floor(re/T)*T,K=Math.ceil(K/T)*T;else{if(!(T<0))break;re=Math.ceil(re*T)/T,K=Math.floor(K*T)/T}k=T}return b},b}function bu(){var b=ks()(ar,ar);return b.copy=function(){return I=b,bu().domain(I.domain()).range(I.range()).interpolate(I.interpolate()).clamp(I.clamp()).unknown(I.unknown());var I},Bl.apply(b,arguments),Fo(b)}function zo(){var b,I=[.5],y=[0,1],k=1;function T(F){return F!=null&&F<=F?y[wl(I,F,0,k)]:b}return T.domain=function(F){return arguments.length?(I=Array.from(F),k=Math.min(I.length,y.length-1),T):I.slice()},T.range=function(F){return arguments.length?(y=Array.from(F),k=Math.min(I.length,y.length-1),T):y.slice()},T.invertExtent=function(F){var $=y.indexOf(F);return[I[$-1],I[$]]},T.unknown=function(F){return arguments.length?(b=F,T):b},T.copy=function(){return zo().domain(I).range(y).unknown(b)},Bl.apply(T,arguments)}Vi=vu({thousands:",",grouping:[3],currency:["$",""]}),Lo=Vi.format,_u=Vi.formatPrefix;const Ws={BrewerYlGn3:["#f7fcb9","#addd8e","#31a354"],BrewerYlGn4:["#ffffcc","#c2e699","#78c679","#238443"],BrewerYlGn5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],BrewerYlGn6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],BrewerYlGn7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],BrewerYlGnBu3:["#edf8b1","#7fcdbb","#2c7fb8"],BrewerYlGnBu4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],BrewerYlGnBu5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],BrewerGnBu3:["#e0f3db","#a8ddb5","#43a2ca"],BrewerGnBu4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],BrewerGnBu5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],BrewerBuGn3:["#e5f5f9","#99d8c9","#2ca25f"],BrewerBuGn4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],BrewerBuGn5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],BrewerPuBuGn3:["#ece2f0","#a6bddb","#1c9099"],BrewerPuBuGn4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],BrewerPuBuGn5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],BrewerPuBu3:["#ece7f2","#a6bddb","#2b8cbe"],BrewerPuBu4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],BrewerPuBu5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BrewerBuPu3:["#e0ecf4","#9ebcda","#8856a7"],BrewerBuPu4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],BrewerBuPu5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],BrewerBuPu6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],BrewerBuPu7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],BrewerRdPu3:["#fde0dd","#fa9fb5","#c51b8a"],BrewerRdPu4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],BrewerRdPu5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],BrewerRdPu6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],BrewerRdPu7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],BrewerPuRd3:["#e7e1ef","#c994c7","#dd1c77"],BrewerPuRd4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],BrewerPuRd5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],BrewerPuRd6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],BrewerPuRd7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],BrewerOrRd3:["#fee8c8","#fdbb84","#e34a33"],BrewerOrRd4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],BrewerOrRd5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],BrewerOrRd6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],BrewerOrRd7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],BrewerYlOrRd3:["#ffeda0","#feb24c","#f03b20"],BrewerYlOrRd4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],BrewerYlOrRd5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],BrewerYlOrBr3:["#fff7bc","#fec44f","#d95f0e"],BrewerYlOrBr4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],BrewerYlOrBr5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],BrewerYlOrBr6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],BrewerYlOrBr7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],BrewerPurples3:["#efedf5","#bcbddc","#756bb1"],BrewerPurples4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],BrewerPurples5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],BrewerPurples6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],BrewerPurples7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],BrewerBlues3:["#deebf7","#9ecae1","#3182bd"],BrewerBlues4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],BrewerBlues5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],BrewerBlues6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],BrewerBlues7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],BrewerGreens3:["#e5f5e0","#a1d99b","#31a354"],BrewerGreens4:["#edf8e9","#bae4b3","#74c476","#238b45"],BrewerGreens5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],BrewerGreens6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],BrewerGreens7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],BrewerOranges3:["#fee6ce","#fdae6b","#e6550d"],BrewerOranges4:["#feedde","#fdbe85","#fd8d3c","#d94701"],BrewerOranges5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],BrewerOranges6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],BrewerOranges7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BrewerReds3:["#fee0d2","#fc9272","#de2d26"],BrewerReds4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],BrewerReds5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],BrewerReds6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],BrewerReds7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],BrewerGreys3:["#f0f0f0","#bdbdbd","#636363"],BrewerGreys4:["#f7f7f7","#cccccc","#969696","#525252"],BrewerGreys5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],BrewerGreys6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],BrewerGreys7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],BrewerPuOr3:["#f1a340","#f7f7f7","#998ec3"],BrewerPuOr4:["#e66101","#fdb863","#b2abd2","#5e3c99"],BrewerPuOr5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],BrewerPuOr6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],BrewerPuOr7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],BrewerPuOr8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerPuOr11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerBrBG3:["#d8b365","#f5f5f5","#5ab4ac"],BrewerBrBG4:["#a6611a","#dfc27d","#80cdc1","#018571"],BrewerBrBG5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],BrewerBrBG6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerBrBG11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerPRGn3:["#af8dc3","#f7f7f7","#7fbf7b"],BrewerPRGn4:["#7b3294","#c2a5cf","#a6dba0","#008837"],BrewerPRGn5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],BrewerPRGn6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPRGn11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPiYG3:["#e9a3c9","#f7f7f7","#a1d76a"],BrewerPiYG4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],BrewerPiYG5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],BrewerPiYG6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerPiYG11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerRdBu3:["#ef8a62","#f7f7f7","#67a9cf"],BrewerRdBu4:["#ca0020","#f4a582","#92c5de","#0571b0"],BrewerRdBu5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],BrewerRdBu6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdBu11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdGy3:["#ef8a62","#ffffff","#999999"],BrewerRdGy4:["#ca0020","#f4a582","#bababa","#404040"],BrewerRdGy5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],BrewerRdGy6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdGy11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdYlBu3:["#fc8d59","#ffffbf","#91bfdb"],BrewerRdYlBu4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],BrewerRdYlBu5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],BrewerRdYlBu6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerRdYlBu11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerSpectral3:["#fc8d59","#ffffbf","#99d594"],BrewerSpectral4:["#d7191c","#fdae61","#abdda4","#2b83ba"],BrewerSpectral5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],BrewerSpectral6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],BrewerSpectral7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],BrewerSpectral8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerSpectral11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerRdYlGn3:["#fc8d59","#ffffbf","#91cf60"],BrewerRdYlGn4:["#d7191c","#fdae61","#a6d96a","#1a9641"],BrewerRdYlGn5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],BrewerRdYlGn6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerRdYlGn11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerAccent3:["#7fc97f","#beaed4","#fdc086"],BrewerAccent4:["#7fc97f","#beaed4","#fdc086","#ffff99"],BrewerAccent5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],BrewerAccent6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],BrewerAccent7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],BrewerAccent8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],BrewerDark23:["#1b9e77","#d95f02","#7570b3"],BrewerDark24:["#1b9e77","#d95f02","#7570b3","#e7298a"],BrewerDark25:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],BrewerDark26:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],BrewerDark27:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],BrewerDark28:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],BrewerPaired3:["#a6cee3","#1f78b4","#b2df8a"],BrewerPaired4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],BrewerPaired5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],BrewerPaired6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],BrewerPaired7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],BrewerPaired8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],BrewerPaired9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],BrewerPaired10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],BrewerPaired11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],BrewerPaired12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],BrewerPastel13:["#fbb4ae","#b3cde3","#ccebc5"],BrewerPastel14:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],BrewerPastel15:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],BrewerPastel16:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],BrewerPastel17:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],BrewerPastel18:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],BrewerPastel19:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],BrewerPastel23:["#b3e2cd","#fdcdac","#cbd5e8"],BrewerPastel24:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],BrewerPastel25:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],BrewerPastel26:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],BrewerPastel27:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],BrewerPastel28:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],BrewerSet13:["#e41a1c","#377eb8","#4daf4a"],BrewerSet14:["#e41a1c","#377eb8","#4daf4a","#984ea3"],BrewerSet15:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],BrewerSet16:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],BrewerSet17:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],BrewerSet18:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],BrewerSet19:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],BrewerSet23:["#66c2a5","#fc8d62","#8da0cb"],BrewerSet24:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],BrewerSet25:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],BrewerSet26:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],BrewerSet27:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],BrewerSet28:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],BrewerSet33:["#8dd3c7","#ffffb3","#bebada"],BrewerSet34:["#8dd3c7","#ffffb3","#bebada","#fb8072"],BrewerSet35:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],BrewerSet36:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],BrewerSet37:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],BrewerSet38:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],BrewerSet39:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],BrewerSet310:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],BrewerSet311:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],BrewerSet312:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],CartoBurg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],CartoBurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],CartoRedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],CartoOrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],CartoPeach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],CartoPinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],CartoMint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],CartoBluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],CartoDarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],CartoEmrld:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],CartoBluYl:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],CartoTeal:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],CartoTealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],CartoPurp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],CartoPurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],CartoSunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],CartoMagenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],CartoSunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],CartoBrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],CartoArmyRose:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],CartoFall:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoGeyser:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoTemps:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],CartoTealRose:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],CartoTropic:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],CartoEarth:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"]},Go=Object.keys(Ws),No=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Xs=b=>{const I=No.exec(b);if(I!==null)return[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16)];throw new Error(`Cannot parse hex color "${b}"`)},eo=({colorScheme:b,customColors:I,min:y,max:k,isReverse:T=!1,isContinuous:F=!1})=>{let $;if(b){if(N=b,!Go.includes(N))throw new Error(`"${b}" is not a supported color scheme`);$=Ws[b]}else{if(!(I.length>=2))throw new Error("You must provide at least 2 colors");$=I}var N;const re=$.map(Xs),K=T?re.reverse():re;if(F){const Z=((ge,se,X)=>Array.from({length:X},(be,Ce)=>ge+Ce*(se-ge)/(X-1)))(y,k,K.length);return bu(Z,K).clamp(!0)}{const Z=((ge,se,X)=>Array.from({length:X-1},(be,Ce)=>ge+(Ce+1)*(se-ge)/X))(y,k,K.length);return zo(Z,K)}};var Tr;(function(b){b[b.WhiteIsZero=0]="WhiteIsZero",b[b.BlackIsZero=1]="BlackIsZero",b[b.RGB=2]="RGB",b[b.Palette=3]="Palette",b[b.TransparencyMask=4]="TransparencyMask",b[b.CMYK=5]="CMYK",b[b.YCbCr=6]="YCbCr",b[b.CIELab=8]="CIELab",b[b.ICCLab=9]="ICCLab"})(Tr||(Tr={}));const to=(b,{noData:I,photometricInterpretation:y,bitsPerSample:k,colorMap:T})=>{const F=k&&k[0]?2**k[0]:NaN,$=I??0;let N;switch(y){case Tr.WhiteIsZero:N=function(re,K,Z){const ge=new Uint8ClampedArray(4*re[0].length);let se;for(let X=0;X<re[0].length;X++)se=255-re[0][X]/K*255,ge[4*X]=se,ge[4*X+1]=se,ge[4*X+2]=se,ge[4*X+3]=re[0][X]===Z?0:255;return ge}(b,F,$);break;case Tr.BlackIsZero:N=function(re,K,Z){const ge=new Uint8ClampedArray(4*re[0].length);let se;for(let X=0;X<re[0].length;X++)se=re[0][X]/K*255,ge[4*X]=se,ge[4*X+1]=se,ge[4*X+2]=se,ge[4*X+3]=re[0][X]===Z?0:255;return ge}(b,F,$);break;case Tr.RGB:N=function(re,K){const[Z,ge,se]=re,X=new Uint8ClampedArray(4*re[0].length);for(let be=0;be<re[0].length;be++)X[4*be]=Z[be],X[4*be+1]=ge[be],X[4*be+2]=se[be],X[4*be+3]=Z[be]===K&&ge[be]==K&&se[be]==K?0:255;return X}(b,$);break;case Tr.Palette:if(!T)throw new Error("colorMap for paletted image not found.");N=function(re,K,Z){const ge=new Uint8ClampedArray(4*re[0].length),se=K.length/3,X=K.length/3*2;for(let be=0;be<re[0].length;be++){const Ce=re[0][be];ge[4*be]=K[Ce]/65536*256,ge[4*be+1]=K[Ce+se]/65536*256,ge[4*be+2]=K[Ce+X]/65536*256,ge[4*be+3]=re[0][be]===Z?0:255}return ge}(b,T,$);break;case Tr.CMYK:N=function(re,K){const Z=new Uint8ClampedArray(4*re[0].length),[ge,se,X,be]=re;for(let Ce=0;Ce<re.length;Ce++){const ke=ge[Ce],Re=se[Ce],qe=X[Ce],Pe=be[Ce];Z[4*Ce]=(255-ke)/256*255*((255-Pe)/256),Z[4*Ce+1]=(255-Re)/256*255*((255-Pe)/256),Z[4*Ce+2]=(255-qe)/256*255*((255-Pe)/256),Z[4*Ce+3]=ke===K&&Re===K&&qe===K&&Pe===K?0:255}return Z}(b,$);break;case Tr.YCbCr:N=function(re,K){const[Z,ge,se]=re,X=new Uint8ClampedArray(4*re[0].length);for(let be=0;be<re[0].length;be++){const Ce=Z[be],ke=ge[be],Re=se[be];X[4*be]=Ce+1.402*(Re-128),X[4*be+1]=Ce-.34414*(ke-128)-.71414*(Re-128),X[4*be+2]=Ce+1.772*(ke-128),X[4*be+3]=Ce===K&&ke==K&&Re==K?0:255}return X}(b,$);break;case Tr.CIELab:N=function(re,K){const Z=new Uint8ClampedArray(re[0].length);for(let ge=0;ge<re.length;ge++){const se=re[0][ge],X=re[1][ge]<<24>>24,be=re[2][ge]<<24>>24;let Ce,ke,Re,qe=(se+16)/116,Pe=X/500+qe,$e=qe-be/200;Pe=.95047*(Pe*Pe*Pe>.008856?Pe*Pe*Pe:(Pe-16/116)/7.787),qe=1*(qe*qe*qe>.008856?qe*qe*qe:(qe-16/116)/7.787),$e=1.08883*($e*$e*$e>.008856?$e*$e*$e:($e-16/116)/7.787),Ce=3.2406*Pe+-1.5372*qe+-.4986*$e,ke=-.9689*Pe+1.8758*qe+.0415*$e,Re=.0557*Pe+-.204*qe+1.057*$e,Ce=Ce>.0031308?1.055*Ce**(1/2.4)-.055:12.92*Ce,ke=ke>.0031308?1.055*ke**(1/2.4)-.055:12.92*ke,Re=Re>.0031308?1.055*Re**(1/2.4)-.055:12.92*Re,Z[4*ge]=255*Math.max(0,Math.min(1,Ce)),Z[4*ge+1]=255*Math.max(0,Math.min(1,ke)),Z[4*ge+2]=255*Math.max(0,Math.min(1,Re)),Z[4*ge+3]=se===K&&X==K&&be==K?0:255}return Z}(b,$);break;default:throw new Error("Unsupported photometric interpretation.")}return N},Uo={};var xu=b=>Uo[b],io=(b,I)=>{Uo[b]=I};const _h=async b=>{var be,Ce;const I=new RegExp(/cog:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),y=b.match(I);if(!y)throw new Error(`Invalid COG protocol URL '${b}'`);const k=y[1].split("#"),T=k[0];k.shift();const F=k.join("#")??"",$=parseInt(y[2]),N=parseInt(y[3]),re=parseInt(y[4]),K=bl(T),Z=await K.getRawTile({z:$,x:N,y:re}),ge=await K.getMetadata();let se;const X=xu(T);if(X!==void 0)se=X(Z,ge);else if(F.startsWith("dem"))se=((ke,{offset:Re,scale:qe,noData:Pe})=>{const $e=ke[0],te=$e.length,U=new Uint8ClampedArray(4*te);for(let he=0;he<te;he++){const le=Re+$e[he]*qe,ue=((le==Pe?0:le)- -1e4)/.1;U[4*he]=Math.floor(ue/256/256)%256,U[4*he+1]=Math.floor(ue/256)%256,U[4*he+2]=ue%256,U[4*he+3]=255}return U})(Z,ge);else if(F.startsWith("color")){const ke=(be=F.split("color").pop())==null?void 0:be.substring(1);if(!ke)throw new Error("Color params are not defined");{const Re=(Ce=ke.match(/\[("#([0-9a-fA-F]{3,6})"(,(\s)?)?)+]/))==null?void 0:Ce[0];let qe,Pe,$e,te="",U=[];Re?(U=JSON.parse(Re),[qe,Pe,$e]=ke.replace(`${Re},`,"").split(",")):[te,qe,Pe,$e]=ke.split(",");const he=parseFloat(qe),le=parseFloat(Pe),ue=($e==null?void 0:$e.includes("-"))||!1,de=($e==null?void 0:$e.includes("c"))||!1;se=((Te,{offset:De,scale:Ge,noData:et,colorScale:lt})=>{const ct=Te[0],vt=ct.length,Tt=new Uint8ClampedArray(4*vt),at=eo(lt);for(let Ze=0;Ze<vt;Ze++){const pt=De+ct[Ze]*Ge;if(pt===et||isNaN(pt)||pt===1/0)Tt[4*Ze]=0,Tt[4*Ze+1]=0,Tt[4*Ze+2]=0,Tt[4*Ze+3]=0;else{const Zt=at(pt);Tt[4*Ze]=Zt[0],Tt[4*Ze+1]=Zt[1],Tt[4*Ze+2]=Zt[2],Tt[4*Ze+3]=255}}return Tt})(Z,{...ge,colorScale:{colorScheme:te,customColors:U,min:he,max:le,isReverse:ue,isContinuous:de}})}}else se=to(Z,ge);return await createImageBitmap(new ImageData(se,256,256))};var wu=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){return b}}});const no=257;function Oo(b,I){for(let y=I.length-1;y>=0;y--)b.push(I[y]);return b}function Cu(b){const I=new Uint16Array(4093),y=new Uint8Array(4093);for(let be=0;be<=257;be++)I[be]=4096,y[be]=be;let k=258,T=9,F=0;function $(){k=258,T=9}function N(be){const Ce=function(ke,Re,qe){const Pe=Re%8,$e=Math.floor(Re/8),te=8-Pe,U=Re+qe-8*($e+1);let he=8*($e+2)-(Re+qe);const le=8*($e+2)-Re;if(he=Math.max(0,he),$e>=ke.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),no;let ue=ke[$e]&2**(8-Pe)-1;ue<<=qe-te;let de=ue;if($e+1<ke.length){let Te=ke[$e+1]>>>he;Te<<=Math.max(0,qe-le),de+=Te}if(U>8&&$e+2<ke.length){const Te=8*($e+3)-(Re+qe);de+=ke[$e+2]>>>Te}return de}(be,F,T);return F+=T,Ce}function re(be,Ce){return y[k]=Ce,I[k]=be,k++,k-1}function K(be){const Ce=[];for(let ke=be;ke!==4096;ke=I[ke])Ce.push(y[ke]);return Ce}const Z=[];$();const ge=new Uint8Array(b);let se,X=N(ge);for(;X!==no;){if(X===256){for($(),X=N(ge);X===256;)X=N(ge);if(X===no)break;if(X>256)throw new Error(`corrupted code at scanline ${X}`);Oo(Z,K(X)),se=X}else if(X<k){const be=K(X);Oo(Z,be),re(se,be[be.length-1]),se=X}else{const be=K(se);if(!be)throw new Error(`Bogus entry. Not in dictionary, ${se} / ${k}, position: ${F}`);Oo(Z,be),Z.push(be[be.length-1]),re(se,be[be.length-1]),se=X}k+1>=2**T&&(T===12?se=void 0:T++),X=N(ge)}return new Uint8Array(Z)}var Vo=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){return Cu(b).buffer}}});const aa=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Xn=4017,ls=799,ro=3406,bn=2276,xa=1567,Kn=3784,za=5793,cs=2896;function Rc(b,I){let y=0;const k=[];let T=16;for(;T>0&&!b[T-1];)--T;k.push({children:[],index:0});let F,$=k[0];for(let N=0;N<T;N++){for(let re=0;re<b[N];re++){for($=k.pop(),$.children[$.index]=I[y];$.index>0;)$=k.pop();for($.index++,k.push($);k.length<=N;)k.push(F={children:[],index:0}),$.children[$.index]=F.children,$=F;y++}N+1<T&&(k.push(F={children:[],index:0}),$.children[$.index]=F.children,$=F)}return k[0].children}function us(b,I,y,k,T,F,$,N,re){const{mcusPerLine:K,progressive:Z}=y,ge=I;let se=I,X=0,be=0;function Ce(){if(be>0)return be--,X>>be&1;if(X=b[se++],X===255){const at=b[se++];if(at)throw new Error(`unexpected marker: ${(X<<8|at).toString(16)}`)}return be=7,X>>>7}function ke(at){let Ze,pt=at;for(;(Ze=Ce())!==null;){if(pt=pt[Ze],typeof pt=="number")return pt;if(typeof pt!="object")throw new Error("invalid huffman sequence")}return null}function Re(at){let Ze=at,pt=0;for(;Ze>0;){const Zt=Ce();if(Zt===null)return;pt=pt<<1|Zt,--Ze}return pt}function qe(at){const Ze=Re(at);return Ze>=1<<at-1?Ze:Ze+(-1<<at)+1}let Pe=0,$e,te=0;function U(at,Ze,pt,Zt,St){const ai=pt%K,kt=(pt/K|0)*at.v+Zt,ti=ai*at.h+St;Ze(at,at.blocks[kt][ti])}function he(at,Ze,pt){const Zt=pt/at.blocksPerLine|0,St=pt%at.blocksPerLine;Ze(at,at.blocks[Zt][St])}const le=k.length;let ue,de,Te,De,Ge,et;et=Z?F===0?N===0?function(at,Ze){const pt=ke(at.huffmanTableDC),Zt=pt===0?0:qe(pt)<<re;at.pred+=Zt,Ze[0]=at.pred}:function(at,Ze){Ze[0]|=Ce()<<re}:N===0?function(at,Ze){if(Pe>0)return void Pe--;let pt=F;const Zt=$;for(;pt<=Zt;){const St=ke(at.huffmanTableAC),ai=15&St,kt=St>>4;if(ai===0){if(kt<15){Pe=Re(kt)+(1<<kt)-1;break}pt+=16}else pt+=kt,Ze[aa[pt]]=qe(ai)*(1<<re),pt++}}:function(at,Ze){let pt=F;const Zt=$;let St=0;for(;pt<=Zt;){const ai=aa[pt],kt=Ze[ai]<0?-1:1;switch(te){case 0:{const ti=ke(at.huffmanTableAC),$t=15&ti;if(St=ti>>4,$t===0)St<15?(Pe=Re(St)+(1<<St),te=4):(St=16,te=1);else{if($t!==1)throw new Error("invalid ACn encoding");$e=qe($t),te=St?2:3}continue}case 1:case 2:Ze[ai]?Ze[ai]+=(Ce()<<re)*kt:(St--,St===0&&(te=te===2?3:0));break;case 3:Ze[ai]?Ze[ai]+=(Ce()<<re)*kt:(Ze[ai]=$e<<re,te=0);break;case 4:Ze[ai]&&(Ze[ai]+=(Ce()<<re)*kt)}pt++}te===4&&(Pe--,Pe===0&&(te=0))}:function(at,Ze){const pt=ke(at.huffmanTableDC),Zt=pt===0?0:qe(pt);at.pred+=Zt,Ze[0]=at.pred;let St=1;for(;St<64;){const ai=ke(at.huffmanTableAC),kt=15&ai,ti=ai>>4;if(kt===0){if(ti<15)break;St+=16}else St+=ti,Ze[aa[St]]=qe(kt),St++}};let lt,ct,vt=0;ct=le===1?k[0].blocksPerLine*k[0].blocksPerColumn:K*y.mcusPerColumn;const Tt=T||ct;for(;vt<ct;){for(de=0;de<le;de++)k[de].pred=0;if(Pe=0,le===1)for(ue=k[0],Ge=0;Ge<Tt;Ge++)he(ue,et,vt),vt++;else for(Ge=0;Ge<Tt;Ge++){for(de=0;de<le;de++){ue=k[de];const{h:at,v:Ze}=ue;for(Te=0;Te<Ze;Te++)for(De=0;De<at;De++)U(ue,et,vt,Te,De)}if(vt++,vt===ct)break}if(be=0,lt=b[se]<<8|b[se+1],lt<65280)throw new Error("marker was not found");if(!(lt>=65488&&lt<=65495))break;se+=2}return se-ge}function qo(b,I){const y=[],{blocksPerLine:k,blocksPerColumn:T}=I,F=k<<3,$=new Int32Array(64),N=new Uint8Array(64);function re(K,Z,ge){const se=I.quantizationTable;let X,be,Ce,ke,Re,qe,Pe,$e,te;const U=ge;let he;for(he=0;he<64;he++)U[he]=K[he]*se[he];for(he=0;he<8;++he){const le=8*he;U[1+le]!==0||U[2+le]!==0||U[3+le]!==0||U[4+le]!==0||U[5+le]!==0||U[6+le]!==0||U[7+le]!==0?(X=za*U[0+le]+128>>8,be=za*U[4+le]+128>>8,Ce=U[2+le],ke=U[6+le],Re=cs*(U[1+le]-U[7+le])+128>>8,$e=cs*(U[1+le]+U[7+le])+128>>8,qe=U[3+le]<<4,Pe=U[5+le]<<4,te=X-be+1>>1,X=X+be+1>>1,be=te,te=Ce*Kn+ke*xa+128>>8,Ce=Ce*xa-ke*Kn+128>>8,ke=te,te=Re-Pe+1>>1,Re=Re+Pe+1>>1,Pe=te,te=$e+qe+1>>1,qe=$e-qe+1>>1,$e=te,te=X-ke+1>>1,X=X+ke+1>>1,ke=te,te=be-Ce+1>>1,be=be+Ce+1>>1,Ce=te,te=Re*bn+$e*ro+2048>>12,Re=Re*ro-$e*bn+2048>>12,$e=te,te=qe*ls+Pe*Xn+2048>>12,qe=qe*Xn-Pe*ls+2048>>12,Pe=te,U[0+le]=X+$e,U[7+le]=X-$e,U[1+le]=be+Pe,U[6+le]=be-Pe,U[2+le]=Ce+qe,U[5+le]=Ce-qe,U[3+le]=ke+Re,U[4+le]=ke-Re):(te=za*U[0+le]+512>>10,U[0+le]=te,U[1+le]=te,U[2+le]=te,U[3+le]=te,U[4+le]=te,U[5+le]=te,U[6+le]=te,U[7+le]=te)}for(he=0;he<8;++he){const le=he;U[8+le]!==0||U[16+le]!==0||U[24+le]!==0||U[32+le]!==0||U[40+le]!==0||U[48+le]!==0||U[56+le]!==0?(X=za*U[0+le]+2048>>12,be=za*U[32+le]+2048>>12,Ce=U[16+le],ke=U[48+le],Re=cs*(U[8+le]-U[56+le])+2048>>12,$e=cs*(U[8+le]+U[56+le])+2048>>12,qe=U[24+le],Pe=U[40+le],te=X-be+1>>1,X=X+be+1>>1,be=te,te=Ce*Kn+ke*xa+2048>>12,Ce=Ce*xa-ke*Kn+2048>>12,ke=te,te=Re-Pe+1>>1,Re=Re+Pe+1>>1,Pe=te,te=$e+qe+1>>1,qe=$e-qe+1>>1,$e=te,te=X-ke+1>>1,X=X+ke+1>>1,ke=te,te=be-Ce+1>>1,be=be+Ce+1>>1,Ce=te,te=Re*bn+$e*ro+2048>>12,Re=Re*ro-$e*bn+2048>>12,$e=te,te=qe*ls+Pe*Xn+2048>>12,qe=qe*Xn-Pe*ls+2048>>12,Pe=te,U[0+le]=X+$e,U[56+le]=X-$e,U[8+le]=be+Pe,U[48+le]=be-Pe,U[16+le]=Ce+qe,U[40+le]=Ce-qe,U[24+le]=ke+Re,U[32+le]=ke-Re):(te=za*ge[he+0]+8192>>14,U[0+le]=te,U[8+le]=te,U[16+le]=te,U[24+le]=te,U[32+le]=te,U[40+le]=te,U[48+le]=te,U[56+le]=te)}for(he=0;he<64;++he){const le=128+(U[he]+8>>4);Z[he]=le<0?0:le>255?255:le}}for(let K=0;K<T;K++){const Z=K<<3;for(let ge=0;ge<8;ge++)y.push(new Uint8Array(F));for(let ge=0;ge<k;ge++){re(I.blocks[K][ge],N,$);let se=0;const X=ge<<3;for(let be=0;be<8;be++){const Ce=y[Z+be];for(let ke=0;ke<8;ke++)Ce[X+ke]=N[se++]}}}return y}class Ps{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(I){let y=0;function k(){const N=I[y]<<8|I[y+1];return y+=2,N}function T(){const N=k(),re=I.subarray(y,y+N-2);return y+=re.length,re}function F(N){let re,K,Z=0,ge=0;for(K in N.components)N.components.hasOwnProperty(K)&&(re=N.components[K],Z<re.h&&(Z=re.h),ge<re.v&&(ge=re.v));const se=Math.ceil(N.samplesPerLine/8/Z),X=Math.ceil(N.scanLines/8/ge);for(K in N.components)if(N.components.hasOwnProperty(K)){re=N.components[K];const be=Math.ceil(Math.ceil(N.samplesPerLine/8)*re.h/Z),Ce=Math.ceil(Math.ceil(N.scanLines/8)*re.v/ge),ke=se*re.h,Re=X*re.v,qe=[];for(let Pe=0;Pe<Re;Pe++){const $e=[];for(let te=0;te<ke;te++)$e.push(new Int32Array(64));qe.push($e)}re.blocksPerLine=be,re.blocksPerColumn=Ce,re.blocks=qe}N.maxH=Z,N.maxV=ge,N.mcusPerLine=se,N.mcusPerColumn=X}let $=k();if($!==65496)throw new Error("SOI not found");for($=k();$!==65497;){switch($){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const N=T();$===65504&&N[0]===74&&N[1]===70&&N[2]===73&&N[3]===70&&N[4]===0&&(this.jfif={version:{major:N[5],minor:N[6]},densityUnits:N[7],xDensity:N[8]<<8|N[9],yDensity:N[10]<<8|N[11],thumbWidth:N[12],thumbHeight:N[13],thumbData:N.subarray(14,14+3*N[12]*N[13])}),$===65518&&N[0]===65&&N[1]===100&&N[2]===111&&N[3]===98&&N[4]===101&&N[5]===0&&(this.adobe={version:N[6],flags0:N[7]<<8|N[8],flags1:N[9]<<8|N[10],transformCode:N[11]});break}case 65499:{const N=k()+y-2;for(;y<N;){const re=I[y++],K=new Int32Array(64);if(re>>4){if(re>>4!=1)throw new Error("DQT: invalid table spec");for(let Z=0;Z<64;Z++)K[aa[Z]]=k()}else for(let Z=0;Z<64;Z++)K[aa[Z]]=I[y++];this.quantizationTables[15&re]=K}break}case 65472:case 65473:case 65474:{k();const N={extended:$===65473,progressive:$===65474,precision:I[y++],scanLines:k(),samplesPerLine:k(),components:{},componentsOrder:[]},re=I[y++];let K;for(let Z=0;Z<re;Z++){K=I[y];const ge=I[y+1]>>4,se=15&I[y+1],X=I[y+2];N.componentsOrder.push(K),N.components[K]={h:ge,v:se,quantizationIdx:X},y+=3}F(N),this.frames.push(N);break}case 65476:{const N=k();for(let re=2;re<N;){const K=I[y++],Z=new Uint8Array(16);let ge=0;for(let X=0;X<16;X++,y++)Z[X]=I[y],ge+=Z[X];const se=new Uint8Array(ge);for(let X=0;X<ge;X++,y++)se[X]=I[y];re+=17+ge,K>>4?this.huffmanTablesAC[15&K]=Rc(Z,se):this.huffmanTablesDC[15&K]=Rc(Z,se)}break}case 65501:k(),this.resetInterval=k();break;case 65498:{k();const N=I[y++],re=[],K=this.frames[0];for(let be=0;be<N;be++){const Ce=K.components[I[y++]],ke=I[y++];Ce.huffmanTableDC=this.huffmanTablesDC[ke>>4],Ce.huffmanTableAC=this.huffmanTablesAC[15&ke],re.push(Ce)}const Z=I[y++],ge=I[y++],se=I[y++],X=us(I,y,K,re,this.resetInterval,Z,ge,se>>4,15&se);y+=X;break}case 65535:I[y]!==255&&y--;break;default:if(I[y-3]===255&&I[y-2]>=192&&I[y-2]<=254){y-=3;break}throw new Error(`unknown JPEG marker ${$.toString(16)}`)}$=k()}}getResult(){const{frames:I}=this;if(this.frames.length===0)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let Z=0;Z<this.frames.length;Z++){const ge=this.frames[Z].components;for(const se of Object.keys(ge))ge[se].quantizationTable=this.quantizationTables[ge[se].quantizationIdx],delete ge[se].quantizationIdx}const y=I[0],{components:k,componentsOrder:T}=y,F=[],$=y.samplesPerLine,N=y.scanLines;for(let Z=0;Z<T.length;Z++){const ge=k[T[Z]];F.push({lines:qo(0,ge),scaleX:ge.h/y.maxH,scaleY:ge.v/y.maxV})}const re=new Uint8Array($*N*F.length);let K=0;for(let Z=0;Z<N;++Z)for(let ge=0;ge<$;++ge)for(let se=0;se<F.length;++se){const X=F[se];re[K]=X.lines[0|Z*X.scaleY][0|ge*X.scaleX],++K}return re}}var Bu=Object.freeze({__proto__:null,default:class extends _a{constructor(b){super(),this.reader=new Ps,b.JPEGTables&&this.reader.parse(b.JPEGTables)}decodeBlock(b){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(b)),this.reader.getResult().buffer}}});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function Ga(b){let I=b.length;for(;--I>=0;)b[I]=0}const Lc=30,Rl=new Array(576);Ga(Rl);const Fc=new Array(60);Ga(Fc);const hs=new Array(512);Ga(hs);const Eu=new Array(256);Ga(Eu);const Ll=new Array(29);Ga(Ll);const Ho=new Array(Lc);Ga(Ho);var jo=(b,I,y,k)=>{let T=65535&b,F=b>>>16&65535,$=0;for(;y!==0;){$=y>2e3?2e3:y,y-=$;do T=T+I[k++]|0,F=F+T|0;while(--$);T%=65521,F%=65521}return T|F<<16};const zc=new Uint32Array((()=>{let b,I=[];for(var y=0;y<256;y++){b=y;for(var k=0;k<8;k++)b=1&b?3988292384^b>>>1:b>>>1;I[y]=b}return I})());var Ur=(b,I,y,k)=>{const T=zc,F=k+y;b^=-1;for(let $=k;$<F;$++)b=b>>>8^T[255&(b^I[$])];return~b},Jo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Na={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const Gc=(b,I)=>Object.prototype.hasOwnProperty.call(b,I);var Or={assign:function(b){const I=Array.prototype.slice.call(arguments,1);for(;I.length;){const y=I.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(const k in y)Gc(y,k)&&(b[k]=y[k])}}return b},flattenChunks:b=>{let I=0;for(let k=0,T=b.length;k<T;k++)I+=b[k].length;const y=new Uint8Array(I);for(let k=0,T=0,F=b.length;k<F;k++){let $=b[k];y.set($,T),T+=$.length}return y}};let Vr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vr=!1}const ao=new Uint8Array(256);for(let b=0;b<256;b++)ao[b]=b>=252?6:b>=248?5:b>=240?4:b>=224?3:b>=192?2:1;ao[254]=ao[254]=1;var Pr={string2buf:b=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(b);let I,y,k,T,F,$=b.length,N=0;for(T=0;T<$;T++)y=b.charCodeAt(T),(64512&y)==55296&&T+1<$&&(k=b.charCodeAt(T+1),(64512&k)==56320&&(y=65536+(y-55296<<10)+(k-56320),T++)),N+=y<128?1:y<2048?2:y<65536?3:4;for(I=new Uint8Array(N),F=0,T=0;F<N;T++)y=b.charCodeAt(T),(64512&y)==55296&&T+1<$&&(k=b.charCodeAt(T+1),(64512&k)==56320&&(y=65536+(y-55296<<10)+(k-56320),T++)),y<128?I[F++]=y:y<2048?(I[F++]=192|y>>>6,I[F++]=128|63&y):y<65536?(I[F++]=224|y>>>12,I[F++]=128|y>>>6&63,I[F++]=128|63&y):(I[F++]=240|y>>>18,I[F++]=128|y>>>12&63,I[F++]=128|y>>>6&63,I[F++]=128|63&y);return I},buf2string:(b,I)=>{const y=I||b.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(b.subarray(0,I));let k,T;const F=new Array(2*y);for(T=0,k=0;k<y;){let $=b[k++];if($<128){F[T++]=$;continue}let N=ao[$];if(N>4)F[T++]=65533,k+=N-1;else{for($&=N===2?31:N===3?15:7;N>1&&k<y;)$=$<<6|63&b[k++],N--;N>1?F[T++]=65533:$<65536?F[T++]=$:($-=65536,F[T++]=55296|$>>10&1023,F[T++]=56320|1023&$)}}return(($,N)=>{if(N<65534&&$.subarray&&Vr)return String.fromCharCode.apply(null,$.length===N?$:$.subarray(0,N));let re="";for(let K=0;K<N;K++)re+=String.fromCharCode($[K]);return re})(F,T)},utf8border:(b,I)=>{(I=I||b.length)>b.length&&(I=b.length);let y=I-1;for(;y>=0&&(192&b[y])==128;)y--;return y<0||y===0?I:y+ao[b[y]]>I?y:I}},Rs=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Yo=16209;var vh=function(b,I){let y,k,T,F,$,N,re,K,Z,ge,se,X,be,Ce,ke,Re,qe,Pe,$e,te,U,he,le,ue;const de=b.state;y=b.next_in,le=b.input,k=y+(b.avail_in-5),T=b.next_out,ue=b.output,F=T-(I-b.avail_out),$=T+(b.avail_out-257),N=de.dmax,re=de.wsize,K=de.whave,Z=de.wnext,ge=de.window,se=de.hold,X=de.bits,be=de.lencode,Ce=de.distcode,ke=(1<<de.lenbits)-1,Re=(1<<de.distbits)-1;e:do{X<15&&(se+=le[y++]<<X,X+=8,se+=le[y++]<<X,X+=8),qe=be[se&ke];t:for(;;){if(Pe=qe>>>24,se>>>=Pe,X-=Pe,Pe=qe>>>16&255,Pe===0)ue[T++]=65535&qe;else{if(!(16&Pe)){if(64&Pe){if(32&Pe){de.mode=16191;break e}b.msg="invalid literal/length code",de.mode=Yo;break e}qe=be[(65535&qe)+(se&(1<<Pe)-1)];continue t}for($e=65535&qe,Pe&=15,Pe&&(X<Pe&&(se+=le[y++]<<X,X+=8),$e+=se&(1<<Pe)-1,se>>>=Pe,X-=Pe),X<15&&(se+=le[y++]<<X,X+=8,se+=le[y++]<<X,X+=8),qe=Ce[se&Re];;){if(Pe=qe>>>24,se>>>=Pe,X-=Pe,Pe=qe>>>16&255,16&Pe){if(te=65535&qe,Pe&=15,X<Pe&&(se+=le[y++]<<X,X+=8,X<Pe&&(se+=le[y++]<<X,X+=8)),te+=se&(1<<Pe)-1,te>N){b.msg="invalid distance too far back",de.mode=Yo;break e}if(se>>>=Pe,X-=Pe,Pe=T-F,te>Pe){if(Pe=te-Pe,Pe>K&&de.sane){b.msg="invalid distance too far back",de.mode=Yo;break e}if(U=0,he=ge,Z===0){if(U+=re-Pe,Pe<$e){$e-=Pe;do ue[T++]=ge[U++];while(--Pe);U=T-te,he=ue}}else if(Z<Pe){if(U+=re+Z-Pe,Pe-=Z,Pe<$e){$e-=Pe;do ue[T++]=ge[U++];while(--Pe);if(U=0,Z<$e){Pe=Z,$e-=Pe;do ue[T++]=ge[U++];while(--Pe);U=T-te,he=ue}}}else if(U+=Z-Pe,Pe<$e){$e-=Pe;do ue[T++]=ge[U++];while(--Pe);U=T-te,he=ue}for(;$e>2;)ue[T++]=he[U++],ue[T++]=he[U++],ue[T++]=he[U++],$e-=3;$e&&(ue[T++]=he[U++],$e>1&&(ue[T++]=he[U++]))}else{U=T-te;do ue[T++]=ue[U++],ue[T++]=ue[U++],ue[T++]=ue[U++],$e-=3;while($e>2);$e&&(ue[T++]=ue[U++],$e>1&&(ue[T++]=ue[U++]))}break}if(64&Pe){b.msg="invalid distance code",de.mode=Yo;break e}qe=Ce[(65535&qe)+(se&(1<<Pe)-1)]}}break}}while(y<k&&T<$);$e=X>>3,y-=$e,X-=$e<<3,se&=(1<<X)-1,b.next_in=y,b.next_out=T,b.avail_in=y<k?k-y+5:5-(y-k),b.avail_out=T<$?$-T+257:257-(T-$),de.hold=se,de.bits=X};const Fl=15,Qu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Nc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),so=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ut=(b,I,y,k,T,F,$,N)=>{const re=N.bits;let K,Z,ge,se,X,be,Ce=0,ke=0,Re=0,qe=0,Pe=0,$e=0,te=0,U=0,he=0,le=0,ue=null;const de=new Uint16Array(16),Te=new Uint16Array(16);let De,Ge,et,lt=null;for(Ce=0;Ce<=Fl;Ce++)de[Ce]=0;for(ke=0;ke<k;ke++)de[I[y+ke]]++;for(Pe=re,qe=Fl;qe>=1&&de[qe]===0;qe--);if(Pe>qe&&(Pe=qe),qe===0)return T[F++]=20971520,T[F++]=20971520,N.bits=1,0;for(Re=1;Re<qe&&de[Re]===0;Re++);for(Pe<Re&&(Pe=Re),U=1,Ce=1;Ce<=Fl;Ce++)if(U<<=1,U-=de[Ce],U<0)return-1;if(U>0&&(b===0||qe!==1))return-1;for(Te[1]=0,Ce=1;Ce<Fl;Ce++)Te[Ce+1]=Te[Ce]+de[Ce];for(ke=0;ke<k;ke++)I[y+ke]!==0&&($[Te[I[y+ke]]++]=ke);if(b===0?(ue=lt=$,be=20):b===1?(ue=Qu,lt=Nc,be=257):(ue=so,lt=wa,be=0),le=0,ke=0,Ce=Re,X=F,$e=Pe,te=0,ge=-1,he=1<<Pe,se=he-1,b===1&&he>852||b===2&&he>592)return 1;for(;;){De=Ce-te,$[ke]+1<be?(Ge=0,et=$[ke]):$[ke]>=be?(Ge=lt[$[ke]-be],et=ue[$[ke]-be]):(Ge=96,et=0),K=1<<Ce-te,Z=1<<$e,Re=Z;do Z-=K,T[X+(le>>te)+Z]=De<<24|Ge<<16|et;while(Z!==0);for(K=1<<Ce-1;le&K;)K>>=1;if(K!==0?(le&=K-1,le+=K):le=0,ke++,--de[Ce]==0){if(Ce===qe)break;Ce=I[y+$[ke]]}if(Ce>Pe&&(le&se)!==ge){for(te===0&&(te=Pe),X+=Re,$e=Ce-te,U=1<<$e;$e+te<qe&&(U-=de[$e+te],!(U<=0));)$e++,U<<=1;if(he+=1<<$e,b===1&&he>852||b===2&&he>592)return 1;ge=le&se,T[ge]=Pe<<24|$e<<16|X-F}}return le!==0&&(T[X+le]=Ce-te<<24|64<<16),N.bits=Pe,0};const{Z_FINISH:Uc,Z_BLOCK:Ko,Z_TREES:$o,Z_OK:sa,Z_STREAM_END:oo,Z_NEED_DICT:Oc,Z_STREAM_ERROR:Ii,Z_DATA_ERROR:zl,Z_MEM_ERROR:Su,Z_BUF_ERROR:Vc,Z_DEFLATED:ku}=Na,Gl=16180,Ca=16190,oa=16191,Nl=16192,qc=16194,Zo=16199,Wo=16200,Hc=16206,on=16209,$i=b=>(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24);function Xo(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const la=b=>{if(!b)return 1;const I=b.state;return!I||I.strm!==b||I.mode<Gl||I.mode>16211?1:0},Ul=b=>{if(la(b))return Ii;const I=b.state;return b.total_in=b.total_out=I.total=0,b.msg="",I.wrap&&(b.adler=1&I.wrap),I.mode=Gl,I.last=0,I.havedict=0,I.flags=-1,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new Int32Array(852),I.distcode=I.distdyn=new Int32Array(592),I.sane=1,I.back=-1,sa},el=b=>{if(la(b))return Ii;const I=b.state;return I.wsize=0,I.whave=0,I.wnext=0,Ul(b)},jc=(b,I)=>{let y;if(la(b))return Ii;const k=b.state;return I<0?(y=0,I=-I):(y=5+(I>>4),I<48&&(I&=15)),I&&(I<8||I>15)?Ii:(k.window!==null&&k.wbits!==I&&(k.window=null),k.wrap=y,k.wbits=I,el(b))},tl=(b,I)=>{if(!b)return Ii;const y=new Xo;b.state=y,y.strm=b,y.window=null,y.mode=Gl;const k=jc(b,I);return k!==sa&&(b.state=null),k};let or,lo,ni=!0;const Ai=b=>{if(ni){or=new Int32Array(512),lo=new Int32Array(32);let I=0;for(;I<144;)b.lens[I++]=8;for(;I<256;)b.lens[I++]=9;for(;I<280;)b.lens[I++]=7;for(;I<288;)b.lens[I++]=8;for(Ut(1,b.lens,0,288,or,0,b.work,{bits:9}),I=0;I<32;)b.lens[I++]=5;Ut(2,b.lens,0,32,lo,0,b.work,{bits:5}),ni=!1}b.lencode=or,b.lenbits=9,b.distcode=lo,b.distbits=5},il=(b,I,y,k)=>{let T;const F=b.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new Uint8Array(F.wsize)),k>=F.wsize?(F.window.set(I.subarray(y-F.wsize,y),0),F.wnext=0,F.whave=F.wsize):(T=F.wsize-F.wnext,T>k&&(T=k),F.window.set(I.subarray(y-k,y-k+T),F.wnext),(k-=T)?(F.window.set(I.subarray(y-k,y),0),F.wnext=k,F.whave=F.wsize):(F.wnext+=T,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=T))),0};var Jc=(b,I)=>{let y,k,T,F,$,N,re,K,Z,ge,se,X,be,Ce,ke,Re,qe,Pe,$e,te,U,he,le=0;const ue=new Uint8Array(4);let de,Te;const De=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(la(b)||!b.output||!b.input&&b.avail_in!==0)return Ii;y=b.state,y.mode===oa&&(y.mode=Nl),$=b.next_out,T=b.output,re=b.avail_out,F=b.next_in,k=b.input,N=b.avail_in,K=y.hold,Z=y.bits,ge=N,se=re,he=sa;e:for(;;)switch(y.mode){case Gl:if(y.wrap===0){y.mode=Nl;break}for(;Z<16;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(2&y.wrap&&K===35615){y.wbits===0&&(y.wbits=15),y.check=0,ue[0]=255&K,ue[1]=K>>>8&255,y.check=Ur(y.check,ue,2,0),K=0,Z=0,y.mode=16181;break}if(y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&K)<<8)+(K>>8))%31){b.msg="incorrect header check",y.mode=on;break}if((15&K)!==ku){b.msg="unknown compression method",y.mode=on;break}if(K>>>=4,Z-=4,U=8+(15&K),y.wbits===0&&(y.wbits=U),U>15||U>y.wbits){b.msg="invalid window size",y.mode=on;break}y.dmax=1<<y.wbits,y.flags=0,b.adler=y.check=1,y.mode=512&K?16189:oa,K=0,Z=0;break;case 16181:for(;Z<16;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(y.flags=K,(255&y.flags)!==ku){b.msg="unknown compression method",y.mode=on;break}if(57344&y.flags){b.msg="unknown header flags set",y.mode=on;break}y.head&&(y.head.text=K>>8&1),512&y.flags&&4&y.wrap&&(ue[0]=255&K,ue[1]=K>>>8&255,y.check=Ur(y.check,ue,2,0)),K=0,Z=0,y.mode=16182;case 16182:for(;Z<32;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}y.head&&(y.head.time=K),512&y.flags&&4&y.wrap&&(ue[0]=255&K,ue[1]=K>>>8&255,ue[2]=K>>>16&255,ue[3]=K>>>24&255,y.check=Ur(y.check,ue,4,0)),K=0,Z=0,y.mode=16183;case 16183:for(;Z<16;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}y.head&&(y.head.xflags=255&K,y.head.os=K>>8),512&y.flags&&4&y.wrap&&(ue[0]=255&K,ue[1]=K>>>8&255,y.check=Ur(y.check,ue,2,0)),K=0,Z=0,y.mode=16184;case 16184:if(1024&y.flags){for(;Z<16;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}y.length=K,y.head&&(y.head.extra_len=K),512&y.flags&&4&y.wrap&&(ue[0]=255&K,ue[1]=K>>>8&255,y.check=Ur(y.check,ue,2,0)),K=0,Z=0}else y.head&&(y.head.extra=null);y.mode=16185;case 16185:if(1024&y.flags&&(X=y.length,X>N&&(X=N),X&&(y.head&&(U=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Uint8Array(y.head.extra_len)),y.head.extra.set(k.subarray(F,F+X),U)),512&y.flags&&4&y.wrap&&(y.check=Ur(y.check,k,X,F)),N-=X,F+=X,y.length-=X),y.length))break e;y.length=0,y.mode=16186;case 16186:if(2048&y.flags){if(N===0)break e;X=0;do U=k[F+X++],y.head&&U&&y.length<65536&&(y.head.name+=String.fromCharCode(U));while(U&&X<N);if(512&y.flags&&4&y.wrap&&(y.check=Ur(y.check,k,X,F)),N-=X,F+=X,U)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=16187;case 16187:if(4096&y.flags){if(N===0)break e;X=0;do U=k[F+X++],y.head&&U&&y.length<65536&&(y.head.comment+=String.fromCharCode(U));while(U&&X<N);if(512&y.flags&&4&y.wrap&&(y.check=Ur(y.check,k,X,F)),N-=X,F+=X,U)break e}else y.head&&(y.head.comment=null);y.mode=16188;case 16188:if(512&y.flags){for(;Z<16;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(4&y.wrap&&K!==(65535&y.check)){b.msg="header crc mismatch",y.mode=on;break}K=0,Z=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),b.adler=y.check=0,y.mode=oa;break;case 16189:for(;Z<32;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}b.adler=y.check=$i(K),K=0,Z=0,y.mode=Ca;case Ca:if(y.havedict===0)return b.next_out=$,b.avail_out=re,b.next_in=F,b.avail_in=N,y.hold=K,y.bits=Z,Oc;b.adler=y.check=1,y.mode=oa;case oa:if(I===Ko||I===$o)break e;case Nl:if(y.last){K>>>=7&Z,Z-=7&Z,y.mode=Hc;break}for(;Z<3;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}switch(y.last=1&K,K>>>=1,Z-=1,3&K){case 0:y.mode=16193;break;case 1:if(Ai(y),y.mode=Zo,I===$o){K>>>=2,Z-=2;break e}break;case 2:y.mode=16196;break;case 3:b.msg="invalid block type",y.mode=on}K>>>=2,Z-=2;break;case 16193:for(K>>>=7&Z,Z-=7&Z;Z<32;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if((65535&K)!=(K>>>16^65535)){b.msg="invalid stored block lengths",y.mode=on;break}if(y.length=65535&K,K=0,Z=0,y.mode=qc,I===$o)break e;case qc:y.mode=16195;case 16195:if(X=y.length,X){if(X>N&&(X=N),X>re&&(X=re),X===0)break e;T.set(k.subarray(F,F+X),$),N-=X,F+=X,re-=X,$+=X,y.length-=X;break}y.mode=oa;break;case 16196:for(;Z<14;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(y.nlen=257+(31&K),K>>>=5,Z-=5,y.ndist=1+(31&K),K>>>=5,Z-=5,y.ncode=4+(15&K),K>>>=4,Z-=4,y.nlen>286||y.ndist>30){b.msg="too many length or distance symbols",y.mode=on;break}y.have=0,y.mode=16197;case 16197:for(;y.have<y.ncode;){for(;Z<3;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}y.lens[De[y.have++]]=7&K,K>>>=3,Z-=3}for(;y.have<19;)y.lens[De[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,de={bits:y.lenbits},he=Ut(0,y.lens,0,19,y.lencode,0,y.work,de),y.lenbits=de.bits,he){b.msg="invalid code lengths set",y.mode=on;break}y.have=0,y.mode=16198;case 16198:for(;y.have<y.nlen+y.ndist;){for(;le=y.lencode[K&(1<<y.lenbits)-1],ke=le>>>24,Re=le>>>16&255,qe=65535&le,!(ke<=Z);){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(qe<16)K>>>=ke,Z-=ke,y.lens[y.have++]=qe;else{if(qe===16){for(Te=ke+2;Z<Te;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(K>>>=ke,Z-=ke,y.have===0){b.msg="invalid bit length repeat",y.mode=on;break}U=y.lens[y.have-1],X=3+(3&K),K>>>=2,Z-=2}else if(qe===17){for(Te=ke+3;Z<Te;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}K>>>=ke,Z-=ke,U=0,X=3+(7&K),K>>>=3,Z-=3}else{for(Te=ke+7;Z<Te;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}K>>>=ke,Z-=ke,U=0,X=11+(127&K),K>>>=7,Z-=7}if(y.have+X>y.nlen+y.ndist){b.msg="invalid bit length repeat",y.mode=on;break}for(;X--;)y.lens[y.have++]=U}}if(y.mode===on)break;if(y.lens[256]===0){b.msg="invalid code -- missing end-of-block",y.mode=on;break}if(y.lenbits=9,de={bits:y.lenbits},he=Ut(1,y.lens,0,y.nlen,y.lencode,0,y.work,de),y.lenbits=de.bits,he){b.msg="invalid literal/lengths set",y.mode=on;break}if(y.distbits=6,y.distcode=y.distdyn,de={bits:y.distbits},he=Ut(2,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,de),y.distbits=de.bits,he){b.msg="invalid distances set",y.mode=on;break}if(y.mode=Zo,I===$o)break e;case Zo:y.mode=Wo;case Wo:if(N>=6&&re>=258){b.next_out=$,b.avail_out=re,b.next_in=F,b.avail_in=N,y.hold=K,y.bits=Z,vh(b,se),$=b.next_out,T=b.output,re=b.avail_out,F=b.next_in,k=b.input,N=b.avail_in,K=y.hold,Z=y.bits,y.mode===oa&&(y.back=-1);break}for(y.back=0;le=y.lencode[K&(1<<y.lenbits)-1],ke=le>>>24,Re=le>>>16&255,qe=65535&le,!(ke<=Z);){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(Re&&!(240&Re)){for(Pe=ke,$e=Re,te=qe;le=y.lencode[te+((K&(1<<Pe+$e)-1)>>Pe)],ke=le>>>24,Re=le>>>16&255,qe=65535&le,!(Pe+ke<=Z);){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}K>>>=Pe,Z-=Pe,y.back+=Pe}if(K>>>=ke,Z-=ke,y.back+=ke,y.length=qe,Re===0){y.mode=16205;break}if(32&Re){y.back=-1,y.mode=oa;break}if(64&Re){b.msg="invalid literal/length code",y.mode=on;break}y.extra=15&Re,y.mode=16201;case 16201:if(y.extra){for(Te=y.extra;Z<Te;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}y.length+=K&(1<<y.extra)-1,K>>>=y.extra,Z-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=16202;case 16202:for(;le=y.distcode[K&(1<<y.distbits)-1],ke=le>>>24,Re=le>>>16&255,qe=65535&le,!(ke<=Z);){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(!(240&Re)){for(Pe=ke,$e=Re,te=qe;le=y.distcode[te+((K&(1<<Pe+$e)-1)>>Pe)],ke=le>>>24,Re=le>>>16&255,qe=65535&le,!(Pe+ke<=Z);){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}K>>>=Pe,Z-=Pe,y.back+=Pe}if(K>>>=ke,Z-=ke,y.back+=ke,64&Re){b.msg="invalid distance code",y.mode=on;break}y.offset=qe,y.extra=15&Re,y.mode=16203;case 16203:if(y.extra){for(Te=y.extra;Z<Te;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}y.offset+=K&(1<<y.extra)-1,K>>>=y.extra,Z-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){b.msg="invalid distance too far back",y.mode=on;break}y.mode=16204;case 16204:if(re===0)break e;if(X=se-re,y.offset>X){if(X=y.offset-X,X>y.whave&&y.sane){b.msg="invalid distance too far back",y.mode=on;break}X>y.wnext?(X-=y.wnext,be=y.wsize-X):be=y.wnext-X,X>y.length&&(X=y.length),Ce=y.window}else Ce=T,be=$-y.offset,X=y.length;X>re&&(X=re),re-=X,y.length-=X;do T[$++]=Ce[be++];while(--X);y.length===0&&(y.mode=Wo);break;case 16205:if(re===0)break e;T[$++]=y.length,re--,y.mode=Wo;break;case Hc:if(y.wrap){for(;Z<32;){if(N===0)break e;N--,K|=k[F++]<<Z,Z+=8}if(se-=re,b.total_out+=se,y.total+=se,4&y.wrap&&se&&(b.adler=y.check=y.flags?Ur(y.check,T,se,$-se):jo(y.check,T,se,$-se)),se=re,4&y.wrap&&(y.flags?K:$i(K))!==y.check){b.msg="incorrect data check",y.mode=on;break}K=0,Z=0}y.mode=16207;case 16207:if(y.wrap&&y.flags){for(;Z<32;){if(N===0)break e;N--,K+=k[F++]<<Z,Z+=8}if(4&y.wrap&&K!==(4294967295&y.total)){b.msg="incorrect length check",y.mode=on;break}K=0,Z=0}y.mode=16208;case 16208:he=oo;break e;case on:he=zl;break e;case 16210:return Su;default:return Ii}return b.next_out=$,b.avail_out=re,b.next_in=F,b.avail_in=N,y.hold=K,y.bits=Z,(y.wsize||se!==b.avail_out&&y.mode<on&&(y.mode<Hc||I!==Uc))&&il(b,b.output,b.next_out,se-b.avail_out),ge-=b.avail_in,se-=b.avail_out,b.total_in+=ge,b.total_out+=se,y.total+=se,4&y.wrap&&se&&(b.adler=y.check=y.flags?Ur(y.check,T,se,b.next_out-se):jo(y.check,T,se,b.next_out-se)),b.data_type=y.bits+(y.last?64:0)+(y.mode===oa?128:0)+(y.mode===Zo||y.mode===qc?256:0),(ge===0&&se===0||I===Uc)&&he===sa&&(he=Vc),he},qr={inflateReset:el,inflateReset2:jc,inflateResetKeep:Ul,inflateInit:b=>tl(b,15),inflateInit2:tl,inflate:Jc,inflateEnd:b=>{if(la(b))return Ii;let I=b.state;return I.window&&(I.window=null),b.state=null,sa},inflateGetHeader:(b,I)=>{if(la(b))return Ii;const y=b.state;return 2&y.wrap?(y.head=I,I.done=!1,sa):Ii},inflateSetDictionary:(b,I)=>{const y=I.length;let k,T,F;return la(b)?Ii:(k=b.state,k.wrap!==0&&k.mode!==Ca?Ii:k.mode===Ca&&(T=1,T=jo(T,I,y,0),T!==k.check)?zl:(F=il(b,I,y,y),F?(k.mode=16210,Su):(k.havedict=1,sa)))},inflateInfo:"pako inflate (from Nodeca project)"},Ir=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const g=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:a,Z_OK:u,Z_STREAM_END:h,Z_NEED_DICT:f,Z_STREAM_ERROR:C,Z_DATA_ERROR:E,Z_MEM_ERROR:Q}=Na;function D(b){this.options=Or.assign({chunkSize:65536,windowBits:15,to:""},b||{});const I=this.options;I.raw&&I.windowBits>=0&&I.windowBits<16&&(I.windowBits=-I.windowBits,I.windowBits===0&&(I.windowBits=-15)),!(I.windowBits>=0&&I.windowBits<16)||b&&b.windowBits||(I.windowBits+=32),I.windowBits>15&&I.windowBits<48&&(15&I.windowBits||(I.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rs,this.strm.avail_out=0;let y=qr.inflateInit2(this.strm,I.windowBits);if(y!==u)throw new Error(Jo[y]);if(this.header=new Ir,qr.inflateGetHeader(this.strm,this.header),I.dictionary&&(typeof I.dictionary=="string"?I.dictionary=Pr.string2buf(I.dictionary):g.call(I.dictionary)==="[object ArrayBuffer]"&&(I.dictionary=new Uint8Array(I.dictionary)),I.raw&&(y=qr.inflateSetDictionary(this.strm,I.dictionary),y!==u)))throw new Error(Jo[y])}function R(b,I){const y=new D(I);if(y.push(b),y.err)throw y.msg||Jo[y.err];return y.result}D.prototype.push=function(b,I){const y=this.strm,k=this.options.chunkSize,T=this.options.dictionary;let F,$,N;if(this.ended)return!1;for($=I===~~I?I:I===!0?a:e,g.call(b)==="[object ArrayBuffer]"?y.input=new Uint8Array(b):y.input=b,y.next_in=0,y.avail_in=y.input.length;;){for(y.avail_out===0&&(y.output=new Uint8Array(k),y.next_out=0,y.avail_out=k),F=qr.inflate(y,$),F===f&&T&&(F=qr.inflateSetDictionary(y,T),F===u?F=qr.inflate(y,$):F===E&&(F=f));y.avail_in>0&&F===h&&y.state.wrap>0&&b[y.next_in]!==0;)qr.inflateReset(y),F=qr.inflate(y,$);switch(F){case C:case E:case f:case Q:return this.onEnd(F),this.ended=!0,!1}if(N=y.avail_out,y.next_out&&(y.avail_out===0||F===h))if(this.options.to==="string"){let re=Pr.utf8border(y.output,y.next_out),K=y.next_out-re,Z=Pr.buf2string(y.output,re);y.next_out=K,y.avail_out=k-K,K&&y.output.set(y.output.subarray(re,re+K),0),this.onData(Z)}else this.onData(y.output.length===y.next_out?y.output:y.output.subarray(0,y.next_out));if(F!==u||N!==0){if(F===h)return F=qr.inflateEnd(this.strm),this.onEnd(F),this.ended=!0,!0;if(y.avail_in===0)break}}return!0},D.prototype.onData=function(b){this.chunks.push(b)},D.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Or.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};var z={Inflate:D,inflate:R,inflateRaw:function(b,I){return(I=I||{}).raw=!0,R(b,I)},ungzip:R,constants:Na};const{Inflate:ee,inflate:oe,inflateRaw:ce,ungzip:ve}=z;var we=oe,Qe=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){return we(new Uint8Array(b)).buffer}}}),Me=Object.freeze({__proto__:null,default:class extends _a{decodeBlock(b){const I=new DataView(b),y=[];for(let k=0;k<b.byteLength;++k){let T=I.getInt8(k);if(T<0){const F=I.getUint8(k+1);T=-T;for(let $=0;$<=T;++$)y.push(F);k+=1}else{for(let F=0;F<=T;++F)y.push(I.getUint8(k+F+1));k+=T+1}}return new Uint8Array(y).buffer}}}),fe={exports:{}};(function(b){/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */(function(){var I,y,k,T,F,$,N,re,K,Z,ge,se,X,be,Ce,ke,Re=(I={defaultNoDataValue:-34027999387901484e22,decode:function(te,U){var he=(U=U||{}).encodedMaskData||U.encodedMaskData===null,le=F(te,U.inputOffset||0,he),ue=U.noDataValue!==null?U.noDataValue:I.defaultNoDataValue,de=y(le,U.pixelType||Float32Array,U.encodedMaskData,ue,U.returnMask),Te={width:le.width,height:le.height,pixelData:de.resultPixels,minValue:de.minValue,maxValue:le.pixels.maxValue,noDataValue:ue};return de.resultMask&&(Te.maskData=de.resultMask),U.returnEncodedMask&&le.mask&&(Te.encodedMaskData=le.mask.bitset?le.mask.bitset:null),U.returnFileInfo&&(Te.fileInfo=k(le),U.computeUsedBitDepths&&(Te.fileInfo.bitDepths=T(le))),Te}},y=function(te,U,he,le,ue){var de,Te,De,Ge=0,et=te.pixels.numBlocksX,lt=te.pixels.numBlocksY,ct=Math.floor(te.width/et),vt=Math.floor(te.height/lt),Tt=2*te.maxZError,at=Number.MAX_VALUE;he=he||(te.mask?te.mask.bitset:null),Te=new U(te.width*te.height),ue&&he&&(De=new Uint8Array(te.width*te.height));for(var Ze,pt,Zt=new Float32Array(ct*vt),St=0;St<=lt;St++){var ai=St!==lt?vt:te.height%lt;if(ai!==0)for(var kt=0;kt<=et;kt++){var ti=kt!==et?ct:te.width%et;if(ti!==0){var $t,ci,Yt,Ki,Ti=St*te.width*vt+kt*ct,Gi=te.width-ti,Pi=te.pixels.blocks[Ge];if(Pi.encoding<2?(Pi.encoding===0?$t=Pi.rawData:($(Pi.stuffedData,Pi.bitsPerPixel,Pi.numValidPixels,Pi.offset,Tt,Zt,te.pixels.maxValue),$t=Zt),ci=0):Yt=Pi.encoding===2?0:Pi.offset,he)for(pt=0;pt<ai;pt++){for(7&Ti&&(Ki=he[Ti>>3],Ki<<=7&Ti),Ze=0;Ze<ti;Ze++)7&Ti||(Ki=he[Ti>>3]),128&Ki?(De&&(De[Ti]=1),at=at>(de=Pi.encoding<2?$t[ci++]:Yt)?de:at,Te[Ti++]=de):(De&&(De[Ti]=0),Te[Ti++]=le),Ki<<=1;Ti+=Gi}else if(Pi.encoding<2)for(pt=0;pt<ai;pt++){for(Ze=0;Ze<ti;Ze++)at=at>(de=$t[ci++])?de:at,Te[Ti++]=de;Ti+=Gi}else for(at=at>Yt?Yt:at,pt=0;pt<ai;pt++){for(Ze=0;Ze<ti;Ze++)Te[Ti++]=Yt;Ti+=Gi}if(Pi.encoding===1&&ci!==Pi.numValidPixels)throw"Block and Mask do not match";Ge++}}}return{resultPixels:Te,resultMask:De,minValue:at}},k=function(te){return{fileIdentifierString:te.fileIdentifierString,fileVersion:te.fileVersion,imageType:te.imageType,height:te.height,width:te.width,maxZError:te.maxZError,eofOffset:te.eofOffset,mask:te.mask?{numBlocksX:te.mask.numBlocksX,numBlocksY:te.mask.numBlocksY,numBytes:te.mask.numBytes,maxValue:te.mask.maxValue}:null,pixels:{numBlocksX:te.pixels.numBlocksX,numBlocksY:te.pixels.numBlocksY,numBytes:te.pixels.numBytes,maxValue:te.pixels.maxValue,noDataValue:te.noDataValue}}},T=function(te){for(var U=te.pixels.numBlocksX*te.pixels.numBlocksY,he={},le=0;le<U;le++){var ue=te.pixels.blocks[le];ue.encoding===0?he.float32=!0:ue.encoding===1?he[ue.bitsPerPixel]=!0:he[0]=!0}return Object.keys(he)},F=function(te,U,he){var le={},ue=new Uint8Array(te,U,10);if(le.fileIdentifierString=String.fromCharCode.apply(null,ue),le.fileIdentifierString.trim()!=="CntZImage")throw"Unexpected file identifier string: "+le.fileIdentifierString;U+=10;var de=new DataView(te,U,24);if(le.fileVersion=de.getInt32(0,!0),le.imageType=de.getInt32(4,!0),le.height=de.getUint32(8,!0),le.width=de.getUint32(12,!0),le.maxZError=de.getFloat64(16,!0),U+=24,!he)if(de=new DataView(te,U,16),le.mask={},le.mask.numBlocksY=de.getUint32(0,!0),le.mask.numBlocksX=de.getUint32(4,!0),le.mask.numBytes=de.getUint32(8,!0),le.mask.maxValue=de.getFloat32(12,!0),U+=16,le.mask.numBytes>0){var Te=new Uint8Array(Math.ceil(le.width*le.height/8)),De=(de=new DataView(te,U,le.mask.numBytes)).getInt16(0,!0),Ge=2,et=0;do{if(De>0)for(;De--;)Te[et++]=de.getUint8(Ge++);else{var lt=de.getUint8(Ge++);for(De=-De;De--;)Te[et++]=lt}De=de.getInt16(Ge,!0),Ge+=2}while(Ge<le.mask.numBytes);if(De!==-32768||et<Te.length)throw"Unexpected end of mask RLE encoding";le.mask.bitset=Te,U+=le.mask.numBytes}else le.mask.numBytes|le.mask.numBlocksY|le.mask.maxValue||(le.mask.bitset=new Uint8Array(Math.ceil(le.width*le.height/8)));de=new DataView(te,U,16),le.pixels={},le.pixels.numBlocksY=de.getUint32(0,!0),le.pixels.numBlocksX=de.getUint32(4,!0),le.pixels.numBytes=de.getUint32(8,!0),le.pixels.maxValue=de.getFloat32(12,!0),U+=16;var ct=le.pixels.numBlocksX,vt=le.pixels.numBlocksY,Tt=ct+(le.width%ct>0?1:0),at=vt+(le.height%vt>0?1:0);le.pixels.blocks=new Array(Tt*at);for(var Ze=0,pt=0;pt<at;pt++)for(var Zt=0;Zt<Tt;Zt++){var St=0,ai=te.byteLength-U;de=new DataView(te,U,Math.min(10,ai));var kt={};le.pixels.blocks[Ze++]=kt;var ti=de.getUint8(0);if(St++,kt.encoding=63&ti,kt.encoding>3)throw"Invalid block encoding ("+kt.encoding+")";if(kt.encoding!==2){if(ti!==0&&ti!==2){if(ti>>=6,kt.offsetType=ti,ti===2)kt.offset=de.getInt8(1),St++;else if(ti===1)kt.offset=de.getInt16(1,!0),St+=2;else{if(ti!==0)throw"Invalid block offset type";kt.offset=de.getFloat32(1,!0),St+=4}if(kt.encoding===1)if(ti=de.getUint8(St),St++,kt.bitsPerPixel=63&ti,ti>>=6,kt.numValidPixelsType=ti,ti===2)kt.numValidPixels=de.getUint8(St),St++;else if(ti===1)kt.numValidPixels=de.getUint16(St,!0),St+=2;else{if(ti!==0)throw"Invalid valid pixel count type";kt.numValidPixels=de.getUint32(St,!0),St+=4}}var $t;if(U+=St,kt.encoding!==3){if(kt.encoding===0){var ci=(le.pixels.numBytes-1)/4;if(ci!==Math.floor(ci))throw"uncompressed block has invalid length";$t=new ArrayBuffer(4*ci),new Uint8Array($t).set(new Uint8Array(te,U,4*ci));var Yt=new Float32Array($t);kt.rawData=Yt,U+=4*ci}else if(kt.encoding===1){var Ki=Math.ceil(kt.numValidPixels*kt.bitsPerPixel/8),Ti=Math.ceil(Ki/4);$t=new ArrayBuffer(4*Ti),new Uint8Array($t).set(new Uint8Array(te,U,Ki)),kt.stuffedData=new Uint32Array($t),U+=Ki}}}else U++}return le.eofOffset=U,le},$=function(te,U,he,le,ue,de,Te){var De,Ge,et,lt=(1<<U)-1,ct=0,vt=0,Tt=Math.ceil((Te-le)/ue),at=4*te.length-Math.ceil(U*he/8);for(te[te.length-1]<<=8*at,De=0;De<he;De++){if(vt===0&&(et=te[ct++],vt=32),vt>=U)Ge=et>>>vt-U&lt,vt-=U;else{var Ze=U-vt;Ge=(et&lt)<<Ze&lt,Ge+=(et=te[ct++])>>>(vt=32-Ze)}de[De]=Ge<Tt?le+Ge*ue:Te}return de},I),qe=(N=function(te,U,he,le,ue,de,Te,De){var Ge,et,lt,ct,vt,Tt=(1<<he)-1,at=0,Ze=0,pt=4*te.length-Math.ceil(he*le/8);if(te[te.length-1]<<=8*pt,ue)for(Ge=0;Ge<le;Ge++)Ze===0&&(lt=te[at++],Ze=32),Ze>=he?(et=lt>>>Ze-he&Tt,Ze-=he):(et=(lt&Tt)<<(ct=he-Ze)&Tt,et+=(lt=te[at++])>>>(Ze=32-ct)),U[Ge]=ue[et];else for(vt=Math.ceil((De-de)/Te),Ge=0;Ge<le;Ge++)Ze===0&&(lt=te[at++],Ze=32),Ze>=he?(et=lt>>>Ze-he&Tt,Ze-=he):(et=(lt&Tt)<<(ct=he-Ze)&Tt,et+=(lt=te[at++])>>>(Ze=32-ct)),U[Ge]=et<vt?de+et*Te:De},re=function(te,U,he,le,ue,de){var Te,De=(1<<U)-1,Ge=0,et=0,lt=0,ct=0,vt=0,Tt=[],at=4*te.length-Math.ceil(U*he/8);te[te.length-1]<<=8*at;var Ze=Math.ceil((de-le)/ue);for(et=0;et<he;et++)ct===0&&(Te=te[Ge++],ct=32),ct>=U?(vt=Te>>>ct-U&De,ct-=U):(vt=(Te&De)<<(lt=U-ct)&De,vt+=(Te=te[Ge++])>>>(ct=32-lt)),Tt[et]=vt<Ze?le+vt*ue:de;return Tt.unshift(le),Tt},K=function(te,U,he,le,ue,de,Te,De){var Ge,et,lt,ct,vt=(1<<he)-1,Tt=0,at=0,Ze=0;if(ue)for(Ge=0;Ge<le;Ge++)at===0&&(lt=te[Tt++],at=32,Ze=0),at>=he?(et=lt>>>Ze&vt,at-=he,Ze+=he):(et=lt>>>Ze&vt,at=32-(ct=he-at),et|=((lt=te[Tt++])&(1<<ct)-1)<<he-ct,Ze=ct),U[Ge]=ue[et];else{var pt=Math.ceil((De-de)/Te);for(Ge=0;Ge<le;Ge++)at===0&&(lt=te[Tt++],at=32,Ze=0),at>=he?(et=lt>>>Ze&vt,at-=he,Ze+=he):(et=lt>>>Ze&vt,at=32-(ct=he-at),et|=((lt=te[Tt++])&(1<<ct)-1)<<he-ct,Ze=ct),U[Ge]=et<pt?de+et*Te:De}return U},Z=function(te,U,he,le,ue,de){var Te,De=(1<<U)-1,Ge=0,et=0,lt=0,ct=0,vt=0,Tt=0,at=[],Ze=Math.ceil((de-le)/ue);for(et=0;et<he;et++)ct===0&&(Te=te[Ge++],ct=32,Tt=0),ct>=U?(vt=Te>>>Tt&De,ct-=U,Tt+=U):(vt=Te>>>Tt&De,ct=32-(lt=U-ct),vt|=((Te=te[Ge++])&(1<<lt)-1)<<U-lt,Tt=lt),at[et]=vt<Ze?le+vt*ue:de;return at.unshift(le),at},ge=function(te,U,he,le){var ue,de,Te,De,Ge=(1<<he)-1,et=0,lt=0,ct=4*te.length-Math.ceil(he*le/8);for(te[te.length-1]<<=8*ct,ue=0;ue<le;ue++)lt===0&&(Te=te[et++],lt=32),lt>=he?(de=Te>>>lt-he&Ge,lt-=he):(de=(Te&Ge)<<(De=he-lt)&Ge,de+=(Te=te[et++])>>>(lt=32-De)),U[ue]=de;return U},se=function(te,U,he,le){var ue,de,Te,De,Ge=(1<<he)-1,et=0,lt=0,ct=0;for(ue=0;ue<le;ue++)lt===0&&(Te=te[et++],lt=32,ct=0),lt>=he?(de=Te>>>ct&Ge,lt-=he,ct+=he):(de=Te>>>ct&Ge,lt=32-(De=he-lt),de|=((Te=te[et++])&(1<<De)-1)<<he-De,ct=De),U[ue]=de;return U},X={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(te){for(var U=65535,he=65535,le=te.length,ue=Math.floor(le/2),de=0;ue;){var Te=ue>=359?359:ue;ue-=Te;do U+=te[de++]<<8,he+=U+=te[de++];while(--Te);U=(65535&U)+(U>>>16),he=(65535&he)+(he>>>16)}return 1&le&&(he+=U+=te[de]<<8),((he=(65535&he)+(he>>>16))<<16|(U=(65535&U)+(U>>>16)))>>>0},readHeaderInfo:function(te,U){var he=U.ptr,le=new Uint8Array(te,he,6),ue={};if(ue.fileIdentifierString=String.fromCharCode.apply(null,le),ue.fileIdentifierString.lastIndexOf("Lerc2",0)!==0)throw"Unexpected file identifier string (expect Lerc2 ): "+ue.fileIdentifierString;he+=6;var de,Te=new DataView(te,he,8),De=Te.getInt32(0,!0);if(ue.fileVersion=De,he+=4,De>=3&&(ue.checksum=Te.getUint32(4,!0),he+=4),Te=new DataView(te,he,12),ue.height=Te.getUint32(0,!0),ue.width=Te.getUint32(4,!0),he+=8,De>=4?(ue.numDims=Te.getUint32(8,!0),he+=4):ue.numDims=1,Te=new DataView(te,he,40),ue.numValidPixel=Te.getUint32(0,!0),ue.microBlockSize=Te.getInt32(4,!0),ue.blobSize=Te.getInt32(8,!0),ue.imageType=Te.getInt32(12,!0),ue.maxZError=Te.getFloat64(16,!0),ue.zMin=Te.getFloat64(24,!0),ue.zMax=Te.getFloat64(32,!0),he+=40,U.headerInfo=ue,U.ptr=he,De>=3&&(de=De>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(te,he-de,ue.blobSize-14))!==ue.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(te,U){var he=U.headerInfo,le=this.getDataTypeArray(he.imageType),ue=he.numDims*this.getDataTypeSize(he.imageType),de=this.readSubArray(te,U.ptr,le,ue),Te=this.readSubArray(te,U.ptr+ue,le,ue);U.ptr+=2*ue;var De,Ge=!0;for(De=0;De<he.numDims;De++)if(de[De]!==Te[De]){Ge=!1;break}return he.minValues=de,he.maxValues=Te,Ge},readSubArray:function(te,U,he,le){var ue;if(he===Uint8Array)ue=new Uint8Array(te,U,le);else{var de=new ArrayBuffer(le);new Uint8Array(de).set(new Uint8Array(te,U,le)),ue=new he(de)}return ue},readMask:function(te,U){var he,le,ue=U.ptr,de=U.headerInfo,Te=de.width*de.height,De=de.numValidPixel,Ge=new DataView(te,ue,4),et={};if(et.numBytes=Ge.getUint32(0,!0),ue+=4,(De===0||Te===De)&&et.numBytes!==0)throw"invalid mask";if(De===0)he=new Uint8Array(Math.ceil(Te/8)),et.bitset=he,le=new Uint8Array(Te),U.pixels.resultMask=le,ue+=et.numBytes;else if(et.numBytes>0){he=new Uint8Array(Math.ceil(Te/8));var lt=(Ge=new DataView(te,ue,et.numBytes)).getInt16(0,!0),ct=2,vt=0,Tt=0;do{if(lt>0)for(;lt--;)he[vt++]=Ge.getUint8(ct++);else for(Tt=Ge.getUint8(ct++),lt=-lt;lt--;)he[vt++]=Tt;lt=Ge.getInt16(ct,!0),ct+=2}while(ct<et.numBytes);if(lt!==-32768||vt<he.length)throw"Unexpected end of mask RLE encoding";le=new Uint8Array(Te);var at=0,Ze=0;for(Ze=0;Ze<Te;Ze++)7&Ze?(at=he[Ze>>3],at<<=7&Ze):at=he[Ze>>3],128&at&&(le[Ze]=1);U.pixels.resultMask=le,et.bitset=he,ue+=et.numBytes}return U.ptr=ue,U.mask=et,!0},readDataOneSweep:function(te,U,he,le){var ue,de=U.ptr,Te=U.headerInfo,De=Te.numDims,Ge=Te.width*Te.height,et=Te.imageType,lt=Te.numValidPixel*X.getDataTypeSize(et)*De,ct=U.pixels.resultMask;if(he===Uint8Array)ue=new Uint8Array(te,de,lt);else{var vt=new ArrayBuffer(lt);new Uint8Array(vt).set(new Uint8Array(te,de,lt)),ue=new he(vt)}if(ue.length===Ge*De)U.pixels.resultPixels=le?X.swapDimensionOrder(ue,Ge,De,he,!0):ue;else{U.pixels.resultPixels=new he(Ge*De);var Tt=0,at=0,Ze=0,pt=0;if(De>1){if(le){for(at=0;at<Ge;at++)if(ct[at])for(pt=at,Ze=0;Ze<De;Ze++,pt+=Ge)U.pixels.resultPixels[pt]=ue[Tt++]}else for(at=0;at<Ge;at++)if(ct[at])for(pt=at*De,Ze=0;Ze<De;Ze++)U.pixels.resultPixels[pt+Ze]=ue[Tt++]}else for(at=0;at<Ge;at++)ct[at]&&(U.pixels.resultPixels[at]=ue[Tt++])}return de+=lt,U.ptr=de,!0},readHuffmanTree:function(te,U){var he=this.HUFFMAN_LUT_BITS_MAX,le=new DataView(te,U.ptr,16);if(U.ptr+=16,le.getInt32(0,!0)<2)throw"unsupported Huffman version";var ue=le.getInt32(4,!0),de=le.getInt32(8,!0),Te=le.getInt32(12,!0);if(de>=Te)return!1;var De=new Uint32Array(Te-de);X.decodeBits(te,U,De);var Ge,et,lt,ct,vt=[];for(Ge=de;Ge<Te;Ge++)vt[et=Ge-(Ge<ue?0:ue)]={first:De[Ge-de],second:null};var Tt=te.byteLength-U.ptr,at=Math.ceil(Tt/4),Ze=new ArrayBuffer(4*at);new Uint8Array(Ze).set(new Uint8Array(te,U.ptr,Tt));var pt,Zt=new Uint32Array(Ze),St=0,ai=0;for(pt=Zt[0],Ge=de;Ge<Te;Ge++)(ct=vt[et=Ge-(Ge<ue?0:ue)].first)>0&&(vt[et].second=pt<<St>>>32-ct,32-St>=ct?(St+=ct)===32&&(St=0,pt=Zt[++ai]):(St+=ct-32,pt=Zt[++ai],vt[et].second|=pt>>>32-St));var kt=0,ti=0,$t=new be;for(Ge=0;Ge<vt.length;Ge++)vt[Ge]!==void 0&&(kt=Math.max(kt,vt[Ge].first));ti=kt>=he?he:kt;var ci,Yt,Ki,Ti,Gi,Pi=[];for(Ge=de;Ge<Te;Ge++)if((ct=vt[et=Ge-(Ge<ue?0:ue)].first)>0)if(ci=[ct,et],ct<=ti)for(Yt=vt[et].second<<ti-ct,Ki=1<<ti-ct,lt=0;lt<Ki;lt++)Pi[Yt|lt]=ci;else for(Yt=vt[et].second,Gi=$t,Ti=ct-1;Ti>=0;Ti--)Yt>>>Ti&1?(Gi.right||(Gi.right=new be),Gi=Gi.right):(Gi.left||(Gi.left=new be),Gi=Gi.left),Ti!==0||Gi.val||(Gi.val=ci[1]);return{decodeLut:Pi,numBitsLUTQick:ti,numBitsLUT:kt,tree:$t,stuffedData:Zt,srcPtr:ai,bitPos:St}},readHuffman:function(te,U,he,le){var ue,de,Te,De,Ge,et,lt,ct,vt,Tt=U.headerInfo.numDims,at=U.headerInfo.height,Ze=U.headerInfo.width,pt=Ze*at,Zt=this.readHuffmanTree(te,U),St=Zt.decodeLut,ai=Zt.tree,kt=Zt.stuffedData,ti=Zt.srcPtr,$t=Zt.bitPos,ci=Zt.numBitsLUTQick,Yt=Zt.numBitsLUT,Ki=U.headerInfo.imageType===0?128:0,Ti=U.pixels.resultMask,Gi=0;$t>0&&(ti++,$t=0);var Pi,qn=kt[ti],br=U.encodeMode===1,co=new he(pt*Tt),_i=co;if(Tt<2||br){for(Pi=0;Pi<Tt;Pi++)if(Tt>1&&(_i=new he(co.buffer,pt*Pi,pt),Gi=0),U.headerInfo.numValidPixel===Ze*at)for(ct=0,et=0;et<at;et++)for(lt=0;lt<Ze;lt++,ct++){if(de=0,Ge=De=qn<<$t>>>32-ci,32-$t<ci&&(Ge=De|=kt[ti+1]>>>64-$t-ci),St[Ge])de=St[Ge][1],$t+=St[Ge][0];else for(Ge=De=qn<<$t>>>32-Yt,32-$t<Yt&&(Ge=De|=kt[ti+1]>>>64-$t-Yt),ue=ai,vt=0;vt<Yt;vt++)if(!(ue=De>>>Yt-vt-1&1?ue.right:ue.left).left&&!ue.right){de=ue.val,$t=$t+vt+1;break}$t>=32&&($t-=32,qn=kt[++ti]),Te=de-Ki,br?(Te+=lt>0?Gi:et>0?_i[ct-Ze]:Gi,Te&=255,_i[ct]=Te,Gi=Te):_i[ct]=Te}else for(ct=0,et=0;et<at;et++)for(lt=0;lt<Ze;lt++,ct++)if(Ti[ct]){if(de=0,Ge=De=qn<<$t>>>32-ci,32-$t<ci&&(Ge=De|=kt[ti+1]>>>64-$t-ci),St[Ge])de=St[Ge][1],$t+=St[Ge][0];else for(Ge=De=qn<<$t>>>32-Yt,32-$t<Yt&&(Ge=De|=kt[ti+1]>>>64-$t-Yt),ue=ai,vt=0;vt<Yt;vt++)if(!(ue=De>>>Yt-vt-1&1?ue.right:ue.left).left&&!ue.right){de=ue.val,$t=$t+vt+1;break}$t>=32&&($t-=32,qn=kt[++ti]),Te=de-Ki,br?(lt>0&&Ti[ct-1]?Te+=Gi:et>0&&Ti[ct-Ze]?Te+=_i[ct-Ze]:Te+=Gi,Te&=255,_i[ct]=Te,Gi=Te):_i[ct]=Te}}else for(ct=0,et=0;et<at;et++)for(lt=0;lt<Ze;lt++)if(ct=et*Ze+lt,!Ti||Ti[ct])for(Pi=0;Pi<Tt;Pi++,ct+=pt){if(de=0,Ge=De=qn<<$t>>>32-ci,32-$t<ci&&(Ge=De|=kt[ti+1]>>>64-$t-ci),St[Ge])de=St[Ge][1],$t+=St[Ge][0];else for(Ge=De=qn<<$t>>>32-Yt,32-$t<Yt&&(Ge=De|=kt[ti+1]>>>64-$t-Yt),ue=ai,vt=0;vt<Yt;vt++)if(!(ue=De>>>Yt-vt-1&1?ue.right:ue.left).left&&!ue.right){de=ue.val,$t=$t+vt+1;break}$t>=32&&($t-=32,qn=kt[++ti]),Te=de-Ki,_i[ct]=Te}U.ptr=U.ptr+4*(ti+1)+($t>0?4:0),U.pixels.resultPixels=co,Tt>1&&!le&&(U.pixels.resultPixels=X.swapDimensionOrder(co,pt,Tt,he))},decodeBits:function(te,U,he,le,ue){var de=U.headerInfo,Te=de.fileVersion,De=0,Ge=te.byteLength-U.ptr>=5?5:te.byteLength-U.ptr,et=new DataView(te,U.ptr,Ge),lt=et.getUint8(0);De++;var ct=lt>>6,vt=ct===0?4:3-ct,Tt=(32&lt)>0,at=31&lt,Ze=0;if(vt===1)Ze=et.getUint8(De),De++;else if(vt===2)Ze=et.getUint16(De,!0),De+=2;else{if(vt!==4)throw"Invalid valid pixel count type";Ze=et.getUint32(De,!0),De+=4}var pt,Zt,St,ai,kt,ti,$t,ci,Yt,Ki=2*de.maxZError,Ti=de.numDims>1?de.maxValues[ue]:de.zMax;if(Tt){for(U.counter.lut++,ci=et.getUint8(De),De++,ai=Math.ceil((ci-1)*at/8),kt=Math.ceil(ai/4),Zt=new ArrayBuffer(4*kt),St=new Uint8Array(Zt),U.ptr+=De,St.set(new Uint8Array(te,U.ptr,ai)),$t=new Uint32Array(Zt),U.ptr+=ai,Yt=0;ci-1>>>Yt;)Yt++;ai=Math.ceil(Ze*Yt/8),kt=Math.ceil(ai/4),Zt=new ArrayBuffer(4*kt),(St=new Uint8Array(Zt)).set(new Uint8Array(te,U.ptr,ai)),pt=new Uint32Array(Zt),U.ptr+=ai,ti=Te>=3?Z($t,at,ci-1,le,Ki,Ti):re($t,at,ci-1,le,Ki,Ti),Te>=3?K(pt,he,Yt,Ze,ti):N(pt,he,Yt,Ze,ti)}else U.counter.bitstuffer++,Yt=at,U.ptr+=De,Yt>0&&(ai=Math.ceil(Ze*Yt/8),kt=Math.ceil(ai/4),Zt=new ArrayBuffer(4*kt),(St=new Uint8Array(Zt)).set(new Uint8Array(te,U.ptr,ai)),pt=new Uint32Array(Zt),U.ptr+=ai,Te>=3?le==null?se(pt,he,Yt,Ze):K(pt,he,Yt,Ze,!1,le,Ki,Ti):le==null?ge(pt,he,Yt,Ze):N(pt,he,Yt,Ze,!1,le,Ki,Ti))},readTiles:function(te,U,he,le){var ue=U.headerInfo,de=ue.width,Te=ue.height,De=de*Te,Ge=ue.microBlockSize,et=ue.imageType,lt=X.getDataTypeSize(et),ct=Math.ceil(de/Ge),vt=Math.ceil(Te/Ge);U.pixels.numBlocksY=vt,U.pixels.numBlocksX=ct,U.pixels.ptr=0;var Tt,at,Ze,pt,Zt,St,ai,kt,ti,$t,ci=0,Yt=0,Ki=0,Ti=0,Gi=0,Pi=0,qn=0,br=0,co=0,_i=0,Ls=0,Fs=0,Fn=0,Ol=0,Rr=0,Ua=new he(Ge*Ge),nl=Te%Ge||Ge,Du=de%Ge||Ge,Vl=ue.numDims,Oa=U.pixels.resultMask,Ba=U.pixels.resultPixels,Ih=ue.fileVersion>=5?14:15,bh=ue.zMax;for(Ki=0;Ki<vt;Ki++)for(Gi=Ki!==vt-1?Ge:nl,Ti=0;Ti<ct;Ti++)for(_i=Ki*de*Ge+Ti*Ge,Ls=de-(Pi=Ti!==ct-1?Ge:Du),kt=0;kt<Vl;kt++){if(Vl>1?($t=Ba,_i=Ki*de*Ge+Ti*Ge,Ba=new he(U.pixels.resultPixels.buffer,De*kt*lt,De),bh=ue.maxValues[kt]):$t=null,qn=te.byteLength-U.ptr,at={},Rr=0,br=(Tt=new DataView(te,U.ptr,Math.min(10,qn))).getUint8(0),Rr++,ti=ue.fileVersion>=5?4&br:0,co=br>>6&255,(br>>2&Ih)!=(Ti*Ge>>3&Ih)||ti&&kt===0)throw"integrity issue";if((Zt=3&br)>3)throw U.ptr+=Rr,"Invalid block encoding ("+Zt+")";if(Zt!==2)if(Zt===0){if(ti)throw"integrity issue";if(U.counter.uncompressed++,U.ptr+=Rr,Fs=(Fs=Gi*Pi*lt)<(Fn=te.byteLength-U.ptr)?Fs:Fn,Ze=new ArrayBuffer(Fs%lt==0?Fs:Fs+lt-Fs%lt),new Uint8Array(Ze).set(new Uint8Array(te,U.ptr,Fs)),pt=new he(Ze),Ol=0,Oa)for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Oa[_i]&&(Ba[_i]=pt[Ol++]),_i++;_i+=Ls}else for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Ba[_i++]=pt[Ol++];_i+=Ls}U.ptr+=Ol*lt}else if(St=X.getDataTypeUsed(ti&&et<6?4:et,co),ai=X.getOnePixel(at,Rr,St,Tt),Rr+=X.getDataTypeSize(St),Zt===3)if(U.ptr+=Rr,U.counter.constantoffset++,Oa)for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Oa[_i]&&(Ba[_i]=ti?Math.min(bh,$t[_i]+ai):ai),_i++;_i+=Ls}else for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Ba[_i]=ti?Math.min(bh,$t[_i]+ai):ai,_i++;_i+=Ls}else if(U.ptr+=Rr,X.decodeBits(te,U,Ua,ai,kt),Rr=0,ti)if(Oa)for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Oa[_i]&&(Ba[_i]=Ua[Rr++]+$t[_i]),_i++;_i+=Ls}else for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Ba[_i]=Ua[Rr++]+$t[_i],_i++;_i+=Ls}else if(Oa)for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Oa[_i]&&(Ba[_i]=Ua[Rr++]),_i++;_i+=Ls}else for(ci=0;ci<Gi;ci++){for(Yt=0;Yt<Pi;Yt++)Ba[_i++]=Ua[Rr++];_i+=Ls}else{if(ti)if(Oa)for(ci=0;ci<Gi;ci++)for(Yt=0;Yt<Pi;Yt++)Oa[_i]&&(Ba[_i]=$t[_i]),_i++;else for(ci=0;ci<Gi;ci++)for(Yt=0;Yt<Pi;Yt++)Ba[_i]=$t[_i],_i++;U.counter.constant++,U.ptr+=Rr}}Vl>1&&!le&&(U.pixels.resultPixels=X.swapDimensionOrder(U.pixels.resultPixels,De,Vl,he))},formatFileInfo:function(te){return{fileIdentifierString:te.headerInfo.fileIdentifierString,fileVersion:te.headerInfo.fileVersion,imageType:te.headerInfo.imageType,height:te.headerInfo.height,width:te.headerInfo.width,numValidPixel:te.headerInfo.numValidPixel,microBlockSize:te.headerInfo.microBlockSize,blobSize:te.headerInfo.blobSize,maxZError:te.headerInfo.maxZError,pixelType:X.getPixelType(te.headerInfo.imageType),eofOffset:te.eofOffset,mask:te.mask?{numBytes:te.mask.numBytes}:null,pixels:{numBlocksX:te.pixels.numBlocksX,numBlocksY:te.pixels.numBlocksY,maxValue:te.headerInfo.zMax,minValue:te.headerInfo.zMin,noDataValue:te.noDataValue}}},constructConstantSurface:function(te,U){var he=te.headerInfo.zMax,le=te.headerInfo.zMin,ue=te.headerInfo.maxValues,de=te.headerInfo.numDims,Te=te.headerInfo.height*te.headerInfo.width,De=0,Ge=0,et=0,lt=te.pixels.resultMask,ct=te.pixels.resultPixels;if(lt)if(de>1){if(U)for(De=0;De<de;De++)for(et=De*Te,he=ue[De],Ge=0;Ge<Te;Ge++)lt[Ge]&&(ct[et+Ge]=he);else for(Ge=0;Ge<Te;Ge++)if(lt[Ge])for(et=Ge*de,De=0;De<de;De++)ct[et+de]=ue[De]}else for(Ge=0;Ge<Te;Ge++)lt[Ge]&&(ct[Ge]=he);else if(de>1&&le!==he)if(U)for(De=0;De<de;De++)for(et=De*Te,he=ue[De],Ge=0;Ge<Te;Ge++)ct[et+Ge]=he;else for(Ge=0;Ge<Te;Ge++)for(et=Ge*de,De=0;De<de;De++)ct[et+De]=ue[De];else for(Ge=0;Ge<Te*de;Ge++)ct[Ge]=he},getDataTypeArray:function(te){var U;switch(te){case 0:U=Int8Array;break;case 1:U=Uint8Array;break;case 2:U=Int16Array;break;case 3:U=Uint16Array;break;case 4:U=Int32Array;break;case 5:U=Uint32Array;break;case 6:default:U=Float32Array;break;case 7:U=Float64Array}return U},getPixelType:function(te){var U;switch(te){case 0:U="S8";break;case 1:U="U8";break;case 2:U="S16";break;case 3:U="U16";break;case 4:U="S32";break;case 5:U="U32";break;case 6:default:U="F32";break;case 7:U="F64"}return U},isValidPixelValue:function(te,U){if(U==null)return!1;var he;switch(te){case 0:he=U>=-128&&U<=127;break;case 1:he=U>=0&&U<=255;break;case 2:he=U>=-32768&&U<=32767;break;case 3:he=U>=0&&U<=65536;break;case 4:he=U>=-2147483648&&U<=2147483647;break;case 5:he=U>=0&&U<=4294967296;break;case 6:he=U>=-34027999387901484e22&&U<=34027999387901484e22;break;case 7:he=U>=-17976931348623157e292&&U<=17976931348623157e292;break;default:he=!1}return he},getDataTypeSize:function(te){var U=0;switch(te){case 0:case 1:U=1;break;case 2:case 3:U=2;break;case 4:case 5:case 6:U=4;break;case 7:U=8;break;default:U=te}return U},getDataTypeUsed:function(te,U){var he=te;switch(te){case 2:case 4:he=te-U;break;case 3:case 5:he=te-2*U;break;case 6:he=U===0?te:U===1?2:1;break;case 7:he=U===0?te:te-2*U+1;break;default:he=te}return he},getOnePixel:function(te,U,he,le){var ue=0;switch(he){case 0:ue=le.getInt8(U);break;case 1:ue=le.getUint8(U);break;case 2:ue=le.getInt16(U,!0);break;case 3:ue=le.getUint16(U,!0);break;case 4:ue=le.getInt32(U,!0);break;case 5:ue=le.getUInt32(U,!0);break;case 6:ue=le.getFloat32(U,!0);break;case 7:ue=le.getFloat64(U,!0);break;default:throw"the decoder does not understand this pixel type"}return ue},swapDimensionOrder:function(te,U,he,le,ue){var de=0,Te=0,De=0,Ge=0,et=te;if(he>1)if(et=new le(U*he),ue)for(de=0;de<U;de++)for(Ge=de,De=0;De<he;De++,Ge+=U)et[Ge]=te[Te++];else for(de=0;de<U;de++)for(Ge=de,De=0;De<he;De++,Ge+=U)et[Te++]=te[Ge];return et}},be=function(te,U,he){this.val=te,this.left=U,this.right=he},{decode:function(te,U){var he=(U=U||{}).noDataValue,le=0,ue={};if(ue.ptr=U.inputOffset||0,ue.pixels={},X.readHeaderInfo(te,ue)){var de=ue.headerInfo,Te=de.fileVersion,De=X.getDataTypeArray(de.imageType);if(Te>5)throw"unsupported lerc version 2."+Te;X.readMask(te,ue),de.numValidPixel===de.width*de.height||ue.pixels.resultMask||(ue.pixels.resultMask=U.maskData);var Ge=de.width*de.height;ue.pixels.resultPixels=new De(Ge*de.numDims),ue.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var et,lt=!U.returnPixelInterleavedDims;if(de.numValidPixel!==0)if(de.zMax===de.zMin)X.constructConstantSurface(ue,lt);else if(Te>=4&&X.checkMinMaxRanges(te,ue))X.constructConstantSurface(ue,lt);else{var ct=new DataView(te,ue.ptr,2),vt=ct.getUint8(0);if(ue.ptr++,vt)X.readDataOneSweep(te,ue,De,lt);else if(Te>1&&de.imageType<=1&&Math.abs(de.maxZError-.5)<1e-5){var Tt=ct.getUint8(1);if(ue.ptr++,ue.encodeMode=Tt,Tt>2||Te<4&&Tt>1)throw"Invalid Huffman flag "+Tt;Tt?X.readHuffman(te,ue,De,lt):X.readTiles(te,ue,De,lt)}else X.readTiles(te,ue,De,lt)}ue.eofOffset=ue.ptr,U.inputOffset?(et=ue.headerInfo.blobSize+U.inputOffset-ue.ptr,Math.abs(et)>=1&&(ue.eofOffset=U.inputOffset+ue.headerInfo.blobSize)):(et=ue.headerInfo.blobSize-ue.ptr,Math.abs(et)>=1&&(ue.eofOffset=ue.headerInfo.blobSize));var at={width:de.width,height:de.height,pixelData:ue.pixels.resultPixels,minValue:de.zMin,maxValue:de.zMax,validPixelCount:de.numValidPixel,dimCount:de.numDims,dimStats:{minValues:de.minValues,maxValues:de.maxValues},maskData:ue.pixels.resultMask};if(ue.pixels.resultMask&&X.isValidPixelValue(de.imageType,he)){var Ze=ue.pixels.resultMask;for(le=0;le<Ge;le++)Ze[le]||(at.pixelData[le]=he);at.noDataValue=he}return ue.noDataValue=he,U.returnFileInfo&&(at.fileInfo=X.formatFileInfo(ue)),at}},getBandCount:function(te){for(var U=0,he=0,le={ptr:0,pixels:{}};he<te.byteLength-58;)X.readHeaderInfo(te,le),he+=le.headerInfo.blobSize,U++,le.ptr=he;return U}}),Pe=(Ce=new ArrayBuffer(4),ke=new Uint8Array(Ce),new Uint32Array(Ce)[0]=1,ke[0]===1),$e={decode:function(te,U){if(!Pe)throw"Big endian system is not supported.";var he,le,ue=(U=U||{}).inputOffset||0,de=new Uint8Array(te,ue,10),Te=String.fromCharCode.apply(null,de);if(Te.trim()==="CntZImage")he=Re,le=1;else{if(Te.substring(0,5)!=="Lerc2")throw"Unexpected file identifier string: "+Te;he=qe,le=2}for(var De,Ge,et,lt,ct,vt,Tt=0,at=te.byteLength-10,Ze=[],pt={width:0,height:0,pixels:[],pixelType:U.pixelType,mask:null,statistics:[]},Zt=0;ue<at;){var St=he.decode(te,{inputOffset:ue,encodedMaskData:De,maskData:et,returnMask:Tt===0,returnEncodedMask:Tt===0,returnFileInfo:!0,returnPixelInterleavedDims:U.returnPixelInterleavedDims,pixelType:U.pixelType||null,noDataValue:U.noDataValue||null});ue=St.fileInfo.eofOffset,et=St.maskData,Tt===0&&(De=St.encodedMaskData,pt.width=St.width,pt.height=St.height,pt.dimCount=St.dimCount||1,pt.pixelType=St.pixelType||St.fileInfo.pixelType,pt.mask=et),le>1&&(et&&Ze.push(et),St.fileInfo.mask&&St.fileInfo.mask.numBytes>0&&Zt++),Tt++,pt.pixels.push(St.pixelData),pt.statistics.push({minValue:St.minValue,maxValue:St.maxValue,noDataValue:St.noDataValue,dimStats:St.dimStats})}if(le>1&&Zt>1){for(vt=pt.width*pt.height,pt.bandMasks=Ze,(et=new Uint8Array(vt)).set(Ze[0]),lt=1;lt<Ze.length;lt++)for(Ge=Ze[lt],ct=0;ct<vt;ct++)et[ct]=et[ct]&Ge[ct];pt.maskData=et}return pt}};b.exports?b.exports=$e:this.Lerc=$e})()})(fe);var Ne=xt(fe.exports);let Ve,Je,At;const Ct={env:{emscripten_notify_memory_growth:function(b){At=new Uint8Array(Je.exports.memory.buffer)}}},Ft="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",Ht=new class{init(){return Ve||(Ve=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Ft).then(b=>b.arrayBuffer()).then(b=>WebAssembly.instantiate(b,Ct)).then(this._init):WebAssembly.instantiate(Buffer.from(Ft,"base64"),Ct).then(this._init),Ve)}_init(b){Je=b.instance,Ct.env.emscripten_notify_memory_growth(0)}decode(b,I=0){if(!Je)throw new Error("ZSTDDecoder: Await .init() before decoding.");const y=b.byteLength,k=Je.exports.malloc(y);At.set(b,k),I=I||Number(Je.exports.ZSTD_findDecompressedSize(k,y));const T=Je.exports.malloc(I),F=Je.exports.ZSTD_decompress(T,I,k,y),$=At.slice(T,T+F);return Je.exports.free(k),Je.exports.free(T),$}};var Lt=Object.freeze({__proto__:null,default:class extends _a{constructor(b){super(),this.planarConfiguration=b.PlanarConfiguration!==void 0?b.PlanarConfiguration:1,this.samplesPerPixel=b.SamplesPerPixel!==void 0?b.SamplesPerPixel:1,this.addCompression=b.LercParameters[Dt]}decodeBlock(b){switch(this.addCompression){case oi:break;case gi:b=we(new Uint8Array(b)).buffer;break;case qi:b=Ht.decode(new Uint8Array(b)).buffer;break;default:throw new Error(`Unsupported LERC additional compression method identifier: ${this.addCompression}`)}return Ne.decode(b,{returnPixelInterleavedDims:this.planarConfiguration===1}).pixels[0].buffer}},zstd:Ht}),Mt=Object.freeze({__proto__:null,default:class extends _a{constructor(){if(super(),typeof createImageBitmap>"u")throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if(typeof document>"u"&&typeof OffscreenCanvas>"u")throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available")}async decode(b,I){const y=new Blob([I]),k=await createImageBitmap(y);let T;typeof document<"u"?(T=document.createElement("canvas"),T.width=k.width,T.height=k.height):T=new OffscreenCanvas(k.width,k.height);const F=T.getContext("2d");return F.drawImage(k,0,0),F.getImageData(0,0,k.width,k.height).data.buffer}}}),ei=Worker,bi=Object.freeze({__proto__:null,create:function(){const b='function A(A,e,t,i,r,I,g){try{var n=A[I](g),a=n.value}catch(A){return void t(A)}n.done?e(a):Promise.resolve(a).then(i,r)}function e(e){return function(){var t=this,i=arguments;return new Promise((function(r,I){var g=e.apply(t,i);function n(e){A(g,r,I,n,a,"next",e)}function a(e){A(g,r,I,n,a,"throw",e)}n(void 0)}))}}function t(A){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(A)}var i={exports:{}};!function(A){var e=function(A){var e,i=Object.prototype,r=i.hasOwnProperty,I="function"==typeof Symbol?Symbol:{},g=I.iterator||"@@iterator",n=I.asyncIterator||"@@asyncIterator",a=I.toStringTag||"@@toStringTag";function o(A,e,t){return Object.defineProperty(A,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),A[e]}try{o({},"")}catch(A){o=function(A,e,t){return A[e]=t}}function B(A,e,t,i){var r=e&&e.prototype instanceof h?e:h,I=Object.create(r.prototype),g=new S(i||[]);return I._invoke=function(A,e,t){var i=Q;return function(r,I){if(i===s)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw I;return R()}for(t.method=r,t.arg=I;;){var g=t.delegate;if(g){var n=m(g,t);if(n){if(n===c)continue;return n}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(i===Q)throw i=f,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);i=s;var a=C(A,e,t);if("normal"===a.type){if(i=t.done?f:E,a.arg===c)continue;return{value:a.arg,done:t.done}}"throw"===a.type&&(i=f,t.method="throw",t.arg=a.arg)}}}(A,t,g),I}function C(A,e,t){try{return{type:"normal",arg:A.call(e,t)}}catch(A){return{type:"throw",arg:A}}}A.wrap=B;var Q="suspendedStart",E="suspendedYield",s="executing",f="completed",c={};function h(){}function l(){}function u(){}var w={};o(w,g,(function(){return this}));var d=Object.getPrototypeOf,D=d&&d(d(v([])));D&&D!==i&&r.call(D,g)&&(w=D);var y=u.prototype=h.prototype=Object.create(w);function k(A){["next","throw","return"].forEach((function(e){o(A,e,(function(A){return this._invoke(e,A)}))}))}function p(A,e){function i(I,g,n,a){var o=C(A[I],A,g);if("throw"!==o.type){var B=o.arg,Q=B.value;return Q&&"object"===t(Q)&&r.call(Q,"__await")?e.resolve(Q.__await).then((function(A){i("next",A,n,a)}),(function(A){i("throw",A,n,a)})):e.resolve(Q).then((function(A){B.value=A,n(B)}),(function(A){return i("throw",A,n,a)}))}a(o.arg)}var I;this._invoke=function(A,t){function r(){return new e((function(e,r){i(A,t,e,r)}))}return I=I?I.then(r,r):r()}}function m(A,t){var i=A.iterator[t.method];if(i===e){if(t.delegate=null,"throw"===t.method){if(A.iterator.return&&(t.method="return",t.arg=e,m(A,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return c}var r=C(i,A.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var I=r.arg;return I?I.done?(t[A.resultName]=I.value,t.next=A.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,c):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function G(A){var e={tryLoc:A[0]};1 in A&&(e.catchLoc=A[1]),2 in A&&(e.finallyLoc=A[2],e.afterLoc=A[3]),this.tryEntries.push(e)}function F(A){var e=A.completion||{};e.type="normal",delete e.arg,A.completion=e}function S(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(G,this),this.reset(!0)}function v(A){if(A){var t=A[g];if(t)return t.call(A);if("function"==typeof A.next)return A;if(!isNaN(A.length)){var i=-1,I=function t(){for(;++i<A.length;)if(r.call(A,i))return t.value=A[i],t.done=!1,t;return t.value=e,t.done=!0,t};return I.next=I}}return{next:R}}function R(){return{value:e,done:!0}}return l.prototype=u,o(y,"constructor",u),o(u,"constructor",l),l.displayName=o(u,a,"GeneratorFunction"),A.isGeneratorFunction=function(A){var e="function"==typeof A&&A.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,u):(A.__proto__=u,o(A,a,"GeneratorFunction")),A.prototype=Object.create(y),A},A.awrap=function(A){return{__await:A}},k(p.prototype),o(p.prototype,n,(function(){return this})),A.AsyncIterator=p,A.async=function(e,t,i,r,I){void 0===I&&(I=Promise);var g=new p(B(e,t,i,r),I);return A.isGeneratorFunction(t)?g:g.next().then((function(A){return A.done?A.value:g.next()}))},k(y),o(y,a,"Generator"),o(y,g,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),A.keys=function(A){var e=[];for(var t in A)e.push(t);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in A)return t.value=i,t.done=!1,t}return t.done=!0,t}},A.values=v,S.prototype={constructor:S,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!A)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if("throw"===A.type)throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var t=this;function i(i,r){return n.type="throw",n.arg=A,t.next=i,r&&(t.method="next",t.arg=e),!!r}for(var I=this.tryEntries.length-1;I>=0;--I){var g=this.tryEntries[I],n=g.completion;if("root"===g.tryLoc)return i("end");if(g.tryLoc<=this.prev){var a=r.call(g,"catchLoc"),o=r.call(g,"finallyLoc");if(a&&o){if(this.prev<g.catchLoc)return i(g.catchLoc,!0);if(this.prev<g.finallyLoc)return i(g.finallyLoc)}else if(a){if(this.prev<g.catchLoc)return i(g.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return i(g.finallyLoc)}}}},abrupt:function(A,e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var I=i;break}}I&&("break"===A||"continue"===A)&&I.tryLoc<=e&&e<=I.finallyLoc&&(I=null);var g=I?I.completion:{};return g.type=A,g.arg=e,I?(this.method="next",this.next=I.finallyLoc,c):this.complete(g)},complete:function(A,e){if("throw"===A.type)throw A.arg;return"break"===A.type||"continue"===A.type?this.next=A.arg:"return"===A.type?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):"normal"===A.type&&e&&(this.next=e),c},finish:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===A)return this.complete(t.completion,t.afterLoc),F(t),c}},catch:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===A){var i=t.completion;if("throw"===i.type){var r=i.arg;F(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(A,t,i){return this.delegate={iterator:v(A),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=e),c}},A}(A.exports);try{regeneratorRuntime=e}catch(A){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(i);var r=i.exports,I=new Map;function g(A,e){Array.isArray(A)||(A=[A]),A.forEach((function(A){return I.set(A,e)}))}function n(A){return a.apply(this,arguments)}function a(){return(a=e(r.mark((function A(e){var t,i;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t=I.get(e.Compression)){A.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return A.next=5,t();case 5:return i=A.sent,A.abrupt("return",new i(e));case 7:case"end":return A.stop()}}),A)})))).apply(this,arguments)}g([void 0,1],(function(){return Promise.resolve().then((function(){return y})).then((function(A){return A.default}))})),g(5,(function(){return Promise.resolve().then((function(){return F})).then((function(A){return A.default}))})),g(6,(function(){throw new Error("old style JPEG compression is not supported.")})),g(7,(function(){return Promise.resolve().then((function(){return N})).then((function(A){return A.default}))})),g([8,32946],(function(){return Promise.resolve().then((function(){return OA})).then((function(A){return A.default}))})),g(32773,(function(){return Promise.resolve().then((function(){return _A})).then((function(A){return A.default}))})),g(34887,(function(){return Promise.resolve().then((function(){return le})).then(function(){var A=e(r.mark((function A(e){return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,e.zstd.init();case 2:return A.abrupt("return",e);case 3:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}()).then((function(A){return A.default}))})),g(50001,(function(){return Promise.resolve().then((function(){return de})).then((function(A){return A.default}))}));var o=globalThis;function B(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}function C(A,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(A,i.key,i)}}function Q(A,e,t){return e&&C(A.prototype,e),t&&C(A,t),A}function E(A,e){return E=Object.setPrototypeOf||function(A,e){return A.__proto__=e,A},E(A,e)}function s(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),e&&E(A,e)}function f(A,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(void 0===A)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return A}(A)}function c(A){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},c(A)}function h(A,e){var t=A.length-e,i=0;do{for(var r=e;r>0;r--)A[i+e]+=A[i],i++;t-=e}while(t>0)}function l(A,e,t){for(var i=0,r=A.length,I=r/t;r>e;){for(var g=e;g>0;--g)A[i+e]+=A[i],++i;r-=e}for(var n=A.slice(),a=0;a<I;++a)for(var o=0;o<t;++o)A[t*a+o]=n[(t-o-1)*I+a]}function u(A,e,t,i,r,I){if(!e||1===e)return A;for(var g=0;g<r.length;++g){if(r[g]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(r[g]!==r[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var n=r[0]/8,a=2===I?1:r.length,o=0;o<i&&!(o*a*t*n>=A.byteLength);++o){var B=void 0;if(2===e){switch(r[0]){case 8:B=new Uint8Array(A,o*a*t*n,a*t*n);break;case 16:B=new Uint16Array(A,o*a*t*n,a*t*n/2);break;case 32:B=new Uint32Array(A,o*a*t*n,a*t*n/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(r[0]," bits per sample."))}h(B,a)}else 3===e&&l(B=new Uint8Array(A,o*a*t*n,a*t*n),a,n)}return A}o.addEventListener("message",function(){var A=e(r.mark((function A(e){var t,i,I,g,a,B;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.data,i=t.id,I=t.fileDirectory,g=t.buffer,A.next=3,n(I);case 3:return a=A.sent,A.next=6,a.decode(I,g);case 6:B=A.sent,o.postMessage({decoded:B,id:i},[B]);case 8:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}());var w=function(){function A(){B(this,A)}var t;return Q(A,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n,a;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.decodeBlock(t);case 2:if(i=A.sent,1===(I=e.Predictor||1)){A.next=9;break}return g=!e.StripOffsets,n=g?e.TileWidth:e.ImageWidth,a=g?e.TileLength:e.RowsPerStrip||e.ImageLength,A.abrupt("return",u(i,I,n,a,e.BitsPerSample,e.PlanarConfiguration));case 9:return A.abrupt("return",i);case 10:case"end":return A.stop()}}),A,this)}))),function(A,e){return t.apply(this,arguments)})}]),A}();function d(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var D=function(A){s(t,w);var e=d(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return A}}]),t}(),y=Object.freeze({__proto__:null,default:D});function k(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}function p(A,e){for(var t=e.length-1;t>=0;t--)A.push(e[t]);return A}function m(A){for(var e=new Uint16Array(4093),t=new Uint8Array(4093),i=0;i<=257;i++)e[i]=4096,t[i]=i;var r=258,I=9,g=0;function n(){r=258,I=9}function a(A){var e=function(A,e,t){var i=e%8,r=Math.floor(e/8),I=8-i,g=e+t-8*(r+1),n=8*(r+2)-(e+t),a=8*(r+2)-e;if(n=Math.max(0,n),r>=A.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var o=A[r]&Math.pow(2,8-i)-1,B=o<<=t-I;if(r+1<A.length){var C=A[r+1]>>>n;B+=C<<=Math.max(0,t-a)}if(g>8&&r+2<A.length){var Q=8*(r+3)-(e+t);B+=A[r+2]>>>Q}return B}(A,g,I);return g+=I,e}function o(A,i){return t[r]=i,e[r]=A,++r-1}function B(A){for(var i=[],r=A;4096!==r;r=e[r])i.push(t[r]);return i}var C=[];n();for(var Q,E=new Uint8Array(A),s=a(E);257!==s;){if(256===s){for(n(),s=a(E);256===s;)s=a(E);if(257===s)break;if(s>256)throw new Error("corrupted code at scanline ".concat(s));p(C,B(s)),Q=s}else if(s<r){var f=B(s);p(C,f),o(Q,f[f.length-1]),Q=s}else{var c=B(Q);if(!c)throw new Error("Bogus entry. Not in dictionary, ".concat(Q," / ").concat(r,", position: ").concat(g));p(C,c),C.push(c[c.length-1]),o(Q,c[c.length-1]),Q=s}r+1>=Math.pow(2,I)&&(12===I?Q=void 0:I++),s=a(E)}return new Uint8Array(C)}var G=function(A){s(t,w);var e=k(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return m(A).buffer}}]),t}(),F=Object.freeze({__proto__:null,default:G});function S(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var v=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function R(A,e){for(var t=0,i=[],r=16;r>0&&!A[r-1];)--r;i.push({children:[],index:0});for(var I,g=i[0],n=0;n<r;n++){for(var a=0;a<A[n];a++){for((g=i.pop()).children[g.index]=e[t];g.index>0;)g=i.pop();for(g.index++,i.push(g);i.length<=n;)i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I;t++}n+1<r&&(i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I)}return i[0].children}function U(A,e,i,r,I,g,n,a,o){var B=i.mcusPerLine,C=i.progressive,Q=e,E=e,s=0,f=0;function c(){if(f>0)return f--,s>>f&1;if(255===(s=A[E++])){var e=A[E++];if(e)throw new Error("unexpected marker: ".concat((s<<8|e).toString(16)))}return f=7,s>>>7}function h(A){for(var e,i=A;null!==(e=c());){if("number"==typeof(i=i[e]))return i;if("object"!==t(i))throw new Error("invalid huffman sequence")}return null}function l(A){for(var e=A,t=0;e>0;){var i=c();if(null===i)return;t=t<<1|i,--e}return t}function u(A){var e=l(A);return e>=1<<A-1?e:e+(-1<<A)+1}var w=0;var d,D=0;function y(A,e,t,i,r){var I=t%B,g=(t/B|0)*A.v+i,n=I*A.h+r;e(A,A.blocks[g][n])}function k(A,e,t){var i=t/A.blocksPerLine|0,r=t%A.blocksPerLine;e(A,A.blocks[i][r])}var p,m,G,F,S,R,U=r.length;R=C?0===g?0===a?function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t)<<o;A.pred+=i,e[0]=A.pred}:function(A,e){e[0]|=c()<<o}:0===a?function(A,e){if(w>0)w--;else for(var t=g,i=n;t<=i;){var r=h(A.huffmanTableAC),I=15&r,a=r>>4;if(0===I){if(a<15){w=l(a)+(1<<a)-1;break}t+=16}else e[v[t+=a]]=u(I)*(1<<o),t++}}:function(A,e){for(var t=g,i=n,r=0;t<=i;){var I=v[t],a=e[I]<0?-1:1;switch(D){case 0:var B=h(A.huffmanTableAC),C=15&B;if(r=B>>4,0===C)r<15?(w=l(r)+(1<<r),D=4):(r=16,D=1);else{if(1!==C)throw new Error("invalid ACn encoding");d=u(C),D=r?2:3}continue;case 1:case 2:e[I]?e[I]+=(c()<<o)*a:0==--r&&(D=2===D?3:0);break;case 3:e[I]?e[I]+=(c()<<o)*a:(e[I]=d<<o,D=0);break;case 4:e[I]&&(e[I]+=(c()<<o)*a)}t++}4===D&&0==--w&&(D=0)}:function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t);A.pred+=i,e[0]=A.pred;for(var r=1;r<64;){var I=h(A.huffmanTableAC),g=15&I,n=I>>4;if(0===g){if(n<15)break;r+=16}else e[v[r+=n]]=u(g),r++}};var L,b,M=0;b=1===U?r[0].blocksPerLine*r[0].blocksPerColumn:B*i.mcusPerColumn;for(var N=I||b;M<b;){for(m=0;m<U;m++)r[m].pred=0;if(w=0,1===U)for(p=r[0],S=0;S<N;S++)k(p,R,M),M++;else for(S=0;S<N;S++){for(m=0;m<U;m++){var x=p=r[m],J=x.h,q=x.v;for(G=0;G<q;G++)for(F=0;F<J;F++)y(p,R,M,G,F)}if(++M===b)break}if(f=0,(L=A[E]<<8|A[E+1])<65280)throw new Error("marker was not found");if(!(L>=65488&&L<=65495))break;E+=2}return E-Q}function L(A,e){var t=[],i=e.blocksPerLine,r=e.blocksPerColumn,I=i<<3,g=new Int32Array(64),n=new Uint8Array(64);function a(A,t,i){var r,I,g,n,a,o,B,C,Q,E,s=e.quantizationTable,f=i;for(E=0;E<64;E++)f[E]=A[E]*s[E];for(E=0;E<8;++E){var c=8*E;0!==f[1+c]||0!==f[2+c]||0!==f[3+c]||0!==f[4+c]||0!==f[5+c]||0!==f[6+c]||0!==f[7+c]?(r=5793*f[0+c]+128>>8,I=5793*f[4+c]+128>>8,g=f[2+c],n=f[6+c],a=2896*(f[1+c]-f[7+c])+128>>8,C=2896*(f[1+c]+f[7+c])+128>>8,o=f[3+c]<<4,Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+128>>8,g=1567*g-3784*n+128>>8,n=Q,Q=a-(B=f[5+c]<<4)+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+c]=r+C,f[7+c]=r-C,f[1+c]=I+B,f[6+c]=I-B,f[2+c]=g+o,f[5+c]=g-o,f[3+c]=n+a,f[4+c]=n-a):(Q=5793*f[0+c]+512>>10,f[0+c]=Q,f[1+c]=Q,f[2+c]=Q,f[3+c]=Q,f[4+c]=Q,f[5+c]=Q,f[6+c]=Q,f[7+c]=Q)}for(E=0;E<8;++E){var h=E;0!==f[8+h]||0!==f[16+h]||0!==f[24+h]||0!==f[32+h]||0!==f[40+h]||0!==f[48+h]||0!==f[56+h]?(r=5793*f[0+h]+2048>>12,I=5793*f[32+h]+2048>>12,g=f[16+h],n=f[48+h],a=2896*(f[8+h]-f[56+h])+2048>>12,C=2896*(f[8+h]+f[56+h])+2048>>12,o=f[24+h],Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+2048>>12,g=1567*g-3784*n+2048>>12,n=Q,Q=a-(B=f[40+h])+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+h]=r+C,f[56+h]=r-C,f[8+h]=I+B,f[48+h]=I-B,f[16+h]=g+o,f[40+h]=g-o,f[24+h]=n+a,f[32+h]=n-a):(Q=5793*i[E+0]+8192>>14,f[0+h]=Q,f[8+h]=Q,f[16+h]=Q,f[24+h]=Q,f[32+h]=Q,f[40+h]=Q,f[48+h]=Q,f[56+h]=Q)}for(E=0;E<64;++E){var l=128+(f[E]+8>>4);t[E]=l<0?0:l>255?255:l}}for(var o=0;o<r;o++){for(var B=o<<3,C=0;C<8;C++)t.push(new Uint8Array(I));for(var Q=0;Q<i;Q++){a(e.blocks[o][Q],n,g);for(var E=0,s=Q<<3,f=0;f<8;f++)for(var c=t[B+f],h=0;h<8;h++)c[s+h]=n[E++]}}return t}var b=function(){function A(){B(this,A),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return Q(A,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(A){var e=0;function t(){var t=A[e]<<8|A[e+1];return e+=2,t}function i(A){var e,t,i=0,r=0;for(t in A.components)A.components.hasOwnProperty(t)&&(i<(e=A.components[t]).h&&(i=e.h),r<e.v&&(r=e.v));var I=Math.ceil(A.samplesPerLine/8/i),g=Math.ceil(A.scanLines/8/r);for(t in A.components)if(A.components.hasOwnProperty(t)){e=A.components[t];for(var n=Math.ceil(Math.ceil(A.samplesPerLine/8)*e.h/i),a=Math.ceil(Math.ceil(A.scanLines/8)*e.v/r),o=I*e.h,B=g*e.v,C=[],Q=0;Q<B;Q++){for(var E=[],s=0;s<o;s++)E.push(new Int32Array(64));C.push(E)}e.blocksPerLine=n,e.blocksPerColumn=a,e.blocks=C}A.maxH=i,A.maxV=r,A.mcusPerLine=I,A.mcusPerColumn=g}var r,I,g=t();if(65496!==g)throw new Error("SOI not found");for(g=t();65497!==g;){switch(g){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var n=(r=void 0,I=void 0,r=t(),I=A.subarray(e,e+r-2),e+=I.length,I);65504===g&&74===n[0]&&70===n[1]&&73===n[2]&&70===n[3]&&0===n[4]&&(this.jfif={version:{major:n[5],minor:n[6]},densityUnits:n[7],xDensity:n[8]<<8|n[9],yDensity:n[10]<<8|n[11],thumbWidth:n[12],thumbHeight:n[13],thumbData:n.subarray(14,14+3*n[12]*n[13])}),65518===g&&65===n[0]&&100===n[1]&&111===n[2]&&98===n[3]&&101===n[4]&&0===n[5]&&(this.adobe={version:n[6],flags0:n[7]<<8|n[8],flags1:n[9]<<8|n[10],transformCode:n[11]});break;case 65499:for(var a=t()+e-2;e<a;){var o=A[e++],B=new Int32Array(64);if(o>>4==0)for(var C=0;C<64;C++){B[v[C]]=A[e++]}else{if(o>>4!=1)throw new Error("DQT: invalid table spec");for(var Q=0;Q<64;Q++){B[v[Q]]=t()}}this.quantizationTables[15&o]=B}break;case 65472:case 65473:case 65474:t();for(var E={extended:65473===g,progressive:65474===g,precision:A[e++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},s=A[e++],f=void 0,c=0;c<s;c++){f=A[e];var h=A[e+1]>>4,l=15&A[e+1],u=A[e+2];E.componentsOrder.push(f),E.components[f]={h:h,v:l,quantizationIdx:u},e+=3}i(E),this.frames.push(E);break;case 65476:for(var w=t(),d=2;d<w;){for(var D=A[e++],y=new Uint8Array(16),k=0,p=0;p<16;p++,e++)y[p]=A[e],k+=y[p];for(var m=new Uint8Array(k),G=0;G<k;G++,e++)m[G]=A[e];d+=17+k,D>>4==0?this.huffmanTablesDC[15&D]=R(y,m):this.huffmanTablesAC[15&D]=R(y,m)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var F=A[e++],S=[],L=this.frames[0],b=0;b<F;b++){var M=L.components[A[e++]],N=A[e++];M.huffmanTableDC=this.huffmanTablesDC[N>>4],M.huffmanTableAC=this.huffmanTablesAC[15&N],S.push(M)}var x=A[e++],J=A[e++],q=A[e++],Y=U(A,e,L,S,this.resetInterval,x,J,q>>4,15&q);e+=Y;break;case 65535:255!==A[e]&&e--;break;default:if(255===A[e-3]&&A[e-2]>=192&&A[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(g.toString(16)))}g=t()}}},{key:"getResult",value:function(){var A=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var e=0;e<this.frames.length;e++)for(var t=this.frames[e].components,i=0,r=Object.keys(t);i<r.length;i++){var I=r[i];t[I].quantizationTable=this.quantizationTables[t[I].quantizationIdx],delete t[I].quantizationIdx}for(var g=A[0],n=g.components,a=g.componentsOrder,o=[],B=g.samplesPerLine,C=g.scanLines,Q=0;Q<a.length;Q++){var E=n[a[Q]];o.push({lines:L(0,E),scaleX:E.h/g.maxH,scaleY:E.v/g.maxV})}for(var s=new Uint8Array(B*C*o.length),f=0,c=0;c<C;++c)for(var h=0;h<B;++h)for(var l=0;l<o.length;++l){var u=o[l];s[f]=u.lines[0|c*u.scaleY][0|h*u.scaleX],++f}return s}}]),A}(),M=function(A){s(t,w);var e=S(t);function t(A){var i;return B(this,t),(i=e.call(this)).reader=new b,A.JPEGTables&&i.reader.parse(A.JPEGTables),i}return Q(t,[{key:"decodeBlock",value:function(A){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(A)),this.reader.getResult().buffer}}]),t}(),N=Object.freeze({__proto__:null,default:M});function x(A){for(var e=A.length;--e>=0;)A[e]=0}x(new Array(576)),x(new Array(60)),x(new Array(512)),x(new Array(256)),x(new Array(29)),x(new Array(30));var J=function(A,e,t,i){for(var r=65535&A|0,I=A>>>16&65535|0,g=0;0!==t;){t-=g=t>2e3?2e3:t;do{I=I+(r=r+e[i++]|0)|0}while(--g);r%=65521,I%=65521}return r|I<<16|0},q=new Uint32Array(function(){for(var A,e=[],t=0;t<256;t++){A=t;for(var i=0;i<8;i++)A=1&A?3988292384^A>>>1:A>>>1;e[t]=A}return e}()),Y=function(A,e,t,i){var r=q,I=i+t;A^=-1;for(var g=i;g<I;g++)A=A>>>8^r[255&(A^e[g])];return-1^A},K={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},O=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},P=function(A){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==t(i))throw new TypeError(i+"must be non-object");for(var r in i)O(i,r)&&(A[r]=i[r])}}return A},T=function(A){for(var e=0,t=0,i=A.length;t<i;t++)e+=A[t].length;for(var r=new Uint8Array(e),I=0,g=0,n=A.length;I<n;I++){var a=A[I];r.set(a,g),g+=a.length}return r},V=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){V=!1}for(var _=new Uint8Array(256),X=0;X<256;X++)_[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;_[254]=_[254]=1;var Z=function(A){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(A);var e,t,i,r,I,g=A.length,n=0;for(r=0;r<g;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),I=0,r=0;I<n;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),t<128?e[I++]=t:t<2048?(e[I++]=192|t>>>6,e[I++]=128|63&t):t<65536?(e[I++]=224|t>>>12,e[I++]=128|t>>>6&63,e[I++]=128|63&t):(e[I++]=240|t>>>18,e[I++]=128|t>>>12&63,e[I++]=128|t>>>6&63,e[I++]=128|63&t);return e},j=function(A,e){var t,i,r=e||A.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(A.subarray(0,e));var I=new Array(2*r);for(i=0,t=0;t<r;){var g=A[t++];if(g<128)I[i++]=g;else{var n=_[g];if(n>4)I[i++]=65533,t+=n-1;else{for(g&=2===n?31:3===n?15:7;n>1&&t<r;)g=g<<6|63&A[t++],n--;n>1?I[i++]=65533:g<65536?I[i++]=g:(g-=65536,I[i++]=55296|g>>10&1023,I[i++]=56320|1023&g)}}}return function(A,e){if(e<65534&&A.subarray&&V)return String.fromCharCode.apply(null,A.length===e?A:A.subarray(0,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(A[i]);return t}(I,i)},W=function(A,e){(e=e||A.length)>A.length&&(e=A.length);for(var t=e-1;t>=0&&128==(192&A[t]);)t--;return t<0||0===t?e:t+_[A[t]]>e?t:e};var z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=A.state;t=A.next_in,k=A.input,i=t+(A.avail_in-5),r=A.next_out,p=A.output,I=r-(e-A.avail_out),g=r+(A.avail_out-257),n=m.dmax,a=m.wsize,o=m.whave,B=m.wnext,C=m.window,Q=m.hold,E=m.bits,s=m.lencode,f=m.distcode,c=(1<<m.lenbits)-1,h=(1<<m.distbits)-1;A:do{E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=s[Q&c];e:for(;;){if(Q>>>=u=l>>>24,E-=u,0===(u=l>>>16&255))p[r++]=65535&l;else{if(!(16&u)){if(0==(64&u)){l=s[(65535&l)+(Q&(1<<u)-1)];continue e}if(32&u){m.mode=12;break A}A.msg="invalid literal/length code",m.mode=30;break A}w=65535&l,(u&=15)&&(E<u&&(Q+=k[t++]<<E,E+=8),w+=Q&(1<<u)-1,Q>>>=u,E-=u),E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=f[Q&h];t:for(;;){if(Q>>>=u=l>>>24,E-=u,!(16&(u=l>>>16&255))){if(0==(64&u)){l=f[(65535&l)+(Q&(1<<u)-1)];continue t}A.msg="invalid distance code",m.mode=30;break A}if(d=65535&l,E<(u&=15)&&(Q+=k[t++]<<E,(E+=8)<u&&(Q+=k[t++]<<E,E+=8)),(d+=Q&(1<<u)-1)>n){A.msg="invalid distance too far back",m.mode=30;break A}if(Q>>>=u,E-=u,d>(u=r-I)){if((u=d-u)>o&&m.sane){A.msg="invalid distance too far back",m.mode=30;break A}if(D=0,y=C,0===B){if(D+=a-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}else if(B<u){if(D+=a+B-u,(u-=B)<w){w-=u;do{p[r++]=C[D++]}while(--u);if(D=0,B<w){w-=u=B;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}}else if(D+=B-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}for(;w>2;)p[r++]=y[D++],p[r++]=y[D++],p[r++]=y[D++],w-=3;w&&(p[r++]=y[D++],w>1&&(p[r++]=y[D++]))}else{D=r-d;do{p[r++]=p[D++],p[r++]=p[D++],p[r++]=p[D++],w-=3}while(w>2);w&&(p[r++]=p[D++],w>1&&(p[r++]=p[D++]))}break}}break}}while(t<i&&r<g);t-=w=E>>3,Q&=(1<<(E-=w<<3))-1,A.next_in=t,A.next_out=r,A.avail_in=t<i?i-t+5:5-(t-i),A.avail_out=r<g?g-r+257:257-(r-g),m.hold=Q,m.bits=E},AA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rA=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E,s,f,c,h=n.bits,l=0,u=0,w=0,d=0,D=0,y=0,k=0,p=0,m=0,G=0,F=null,S=0,v=new Uint16Array(16),R=new Uint16Array(16),U=null,L=0;for(l=0;l<=15;l++)v[l]=0;for(u=0;u<i;u++)v[e[t+u]]++;for(D=h,d=15;d>=1&&0===v[d];d--);if(D>d&&(D=d),0===d)return r[I++]=20971520,r[I++]=20971520,n.bits=1,0;for(w=1;w<d&&0===v[w];w++);for(D<w&&(D=w),p=1,l=1;l<=15;l++)if(p<<=1,(p-=v[l])<0)return-1;if(p>0&&(0===A||1!==d))return-1;for(R[1]=0,l=1;l<15;l++)R[l+1]=R[l]+v[l];for(u=0;u<i;u++)0!==e[t+u]&&(g[R[e[t+u]]++]=u);if(0===A?(F=U=g,E=19):1===A?(F=AA,S-=257,U=eA,L-=257,E=256):(F=tA,U=iA,E=-1),G=0,u=0,l=w,Q=I,y=D,k=0,B=-1,C=(m=1<<D)-1,1===A&&m>852||2===A&&m>592)return 1;for(;;){s=l-k,g[u]<E?(f=0,c=g[u]):g[u]>E?(f=U[L+g[u]],c=F[S+g[u]]):(f=96,c=0),a=1<<l-k,w=o=1<<y;do{r[Q+(G>>k)+(o-=a)]=s<<24|f<<16|c|0}while(0!==o);for(a=1<<l-1;G&a;)a>>=1;if(0!==a?(G&=a-1,G+=a):G=0,u++,0==--v[l]){if(l===d)break;l=e[t+g[u]]}if(l>D&&(G&C)!==B){for(0===k&&(k=D),Q+=w,p=1<<(y=l-k);y+k<d&&!((p-=v[y+k])<=0);)y++,p<<=1;if(m+=1<<y,1===A&&m>852||2===A&&m>592)return 1;r[B=G&C]=D<<24|y<<16|Q-I|0}}return 0!==G&&(r[Q+G]=l-k<<24|64<<16|0),n.bits=D,0},IA=H.Z_FINISH,gA=H.Z_BLOCK,nA=H.Z_TREES,aA=H.Z_OK,oA=H.Z_STREAM_END,BA=H.Z_NEED_DICT,CA=H.Z_STREAM_ERROR,QA=H.Z_DATA_ERROR,EA=H.Z_MEM_ERROR,sA=H.Z_BUF_ERROR,fA=H.Z_DEFLATED,cA=function(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)};function hA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var lA,uA,wA=function(A){if(!A||!A.state)return CA;var e=A.state;return A.total_in=A.total_out=e.total=0,A.msg="",e.wrap&&(A.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,aA},dA=function(A){if(!A||!A.state)return CA;var e=A.state;return e.wsize=0,e.whave=0,e.wnext=0,wA(A)},DA=function(A,e){var t;if(!A||!A.state)return CA;var i=A.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?CA:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,dA(A))},yA=function(A,e){if(!A)return CA;var t=new hA;A.state=t,t.window=null;var i=DA(A,e);return i!==aA&&(A.state=null),i},kA=!0,pA=function(A){if(kA){lA=new Int32Array(512),uA=new Int32Array(32);for(var e=0;e<144;)A.lens[e++]=8;for(;e<256;)A.lens[e++]=9;for(;e<280;)A.lens[e++]=7;for(;e<288;)A.lens[e++]=8;for(rA(1,A.lens,0,288,lA,0,A.work,{bits:9}),e=0;e<32;)A.lens[e++]=5;rA(2,A.lens,0,32,uA,0,A.work,{bits:5}),kA=!1}A.lencode=lA,A.lenbits=9,A.distcode=uA,A.distbits=5},mA=function(A,e,t,i){var r,I=A.state;return null===I.window&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new Uint8Array(I.wsize)),i>=I.wsize?(I.window.set(e.subarray(t-I.wsize,t),0),I.wnext=0,I.whave=I.wsize):((r=I.wsize-I.wnext)>i&&(r=i),I.window.set(e.subarray(t-i,t-i+r),I.wnext),(i-=r)?(I.window.set(e.subarray(t-i,t),0),I.wnext=i,I.whave=I.wsize):(I.wnext+=r,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=r))),0},GA={inflateReset:dA,inflateReset2:DA,inflateResetKeep:wA,inflateInit:function(A){return yA(A,15)},inflateInit2:yA,inflate:function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=0,G=new Uint8Array(4),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return CA;12===(t=A.state).mode&&(t.mode=13),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,C=n,Q=a,y=aA;A:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(2&t.wrap&&35615===o){t.check=0,G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0),o=0,B=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&o)<<8)+(o>>8))%31){A.msg="incorrect header check",t.mode=30;break}if((15&o)!==fA){A.msg="unknown compression method",t.mode=30;break}if(B-=4,D=8+(15&(o>>>=4)),0===t.wbits)t.wbits=D;else if(D>t.wbits){A.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,A.adler=t.check=1,t.mode=512&o?10:12,o=0,B=0;break;case 2:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.flags=o,(255&t.flags)!==fA){A.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){A.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=o>>8&1),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=3;case 3:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.time=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,G[2]=o>>>16&255,G[3]=o>>>24&255,t.check=Y(t.check,G,4,0)),o=0,B=0,t.mode=4;case 4:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.xflags=255&o,t.head.os=o>>8),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=5;case 5:if(1024&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length=o,t.head&&(t.head.extra_len=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((E=t.length)>n&&(E=n),E&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(I,I+E),D)),512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,t.length-=E),t.length))break A;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(65535&t.check)){A.msg="header crc mismatch",t.mode=30;break}o=0,B=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),A.adler=t.check=0,t.mode=12;break;case 10:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}A.adler=t.check=cA(o),o=0,B=0,t.mode=11;case 11:if(0===t.havedict)return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,BA;A.adler=t.check=1,t.mode=12;case 12:if(e===gA||e===nA)break A;case 13:if(t.last){o>>>=7&B,B-=7&B,t.mode=27;break}for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}switch(t.last=1&o,B-=1,3&(o>>>=1)){case 0:t.mode=14;break;case 1:if(pA(t),t.mode=20,e===nA){o>>>=2,B-=2;break A}break;case 2:t.mode=17;break;case 3:A.msg="invalid block type",t.mode=30}o>>>=2,B-=2;break;case 14:for(o>>>=7&B,B-=7&B;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if((65535&o)!=(o>>>16^65535)){A.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&o,o=0,B=0,t.mode=15,e===nA)break A;case 15:t.mode=16;case 16:if(E=t.length){if(E>n&&(E=n),E>a&&(E=a),0===E)break A;r.set(i.subarray(I,I+E),g),n-=E,I+=E,a-=E,g+=E,t.length-=E;break}t.mode=12;break;case 17:for(;B<14;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.nlen=257+(31&o),o>>>=5,B-=5,t.ndist=1+(31&o),o>>>=5,B-=5,t.ncode=4+(15&o),o>>>=4,B-=4,t.nlen>286||t.ndist>30){A.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.lens[F[t.have++]]=7&o,o>>>=3,B-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},y=rA(0,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(l<16)o>>>=c,B-=c,t.lens[t.have++]=l;else{if(16===l){for(p=c+2;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o>>>=c,B-=c,0===t.have){A.msg="invalid bit length repeat",t.mode=30;break}D=t.lens[t.have-1],E=3+(3&o),o>>>=2,B-=2}else if(17===l){for(p=c+3;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=3+(7&(o>>>=c)),o>>>=3,B-=3}else{for(p=c+7;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=11+(127&(o>>>=c)),o>>>=7,B-=7}if(t.have+E>t.nlen+t.ndist){A.msg="invalid bit length repeat",t.mode=30;break}for(;E--;)t.lens[t.have++]=D}}if(30===t.mode)break;if(0===t.lens[256]){A.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,k={bits:t.lenbits},y=rA(1,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},y=rA(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,y){A.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===nA)break A;case 20:t.mode=21;case 21:if(n>=6&&a>=258){A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,$(A,Q),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(h&&0==(240&h)){for(u=c,w=h,d=l;h=(m=t.lencode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,t.length=l,0===h){t.mode=26;break}if(32&h){t.back=-1,t.mode=12;break}if(64&h){A.msg="invalid literal/length code",t.mode=30;break}t.extra=15&h,t.mode=22;case 22:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;h=(m=t.distcode[o&(1<<t.distbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(0==(240&h)){for(u=c,w=h,d=l;h=(m=t.distcode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,64&h){A.msg="invalid distance code",t.mode=30;break}t.offset=l,t.extra=15&h,t.mode=24;case 24:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){A.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===a)break A;if(E=Q-a,t.offset>E){if((E=t.offset-E)>t.whave&&t.sane){A.msg="invalid distance too far back",t.mode=30;break}E>t.wnext?(E-=t.wnext,s=t.wsize-E):s=t.wnext-E,E>t.length&&(E=t.length),f=t.window}else f=r,s=g-t.offset,E=t.length;E>a&&(E=a),a-=E,t.length-=E;do{r[g++]=f[s++]}while(--E);0===t.length&&(t.mode=21);break;case 26:if(0===a)break A;r[g++]=t.length,a--,t.mode=21;break;case 27:if(t.wrap){for(;B<32;){if(0===n)break A;n--,o|=i[I++]<<B,B+=8}if(Q-=a,A.total_out+=Q,t.total+=Q,Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,g-Q):J(t.check,r,Q,g-Q)),Q=a,(t.flags?o:cA(o))!==t.check){A.msg="incorrect data check",t.mode=30;break}o=0,B=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(4294967295&t.total)){A.msg="incorrect length check",t.mode=30;break}o=0,B=0}t.mode=29;case 29:y=oA;break A;case 30:y=QA;break A;case 31:return EA;default:return CA}return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,(t.wsize||Q!==A.avail_out&&t.mode<30&&(t.mode<27||e!==IA))&&mA(A,A.output,A.next_out,Q-A.avail_out),C-=A.avail_in,Q-=A.avail_out,A.total_in+=C,A.total_out+=Q,t.total+=Q,t.wrap&&Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,A.next_out-Q):J(t.check,r,Q,A.next_out-Q)),A.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===C&&0===Q||e===IA)&&y===aA&&(y=sA),y},inflateEnd:function(A){if(!A||!A.state)return CA;var e=A.state;return e.window&&(e.window=null),A.state=null,aA},inflateGetHeader:function(A,e){if(!A||!A.state)return CA;var t=A.state;return 0==(2&t.wrap)?CA:(t.head=e,e.done=!1,aA)},inflateSetDictionary:function(A,e){var t,i=e.length;return A&&A.state?0!==(t=A.state).wrap&&11!==t.mode?CA:11===t.mode&&J(1,e,i,0)!==t.check?QA:mA(A,e,i,i)?(t.mode=31,EA):(t.havedict=1,aA):CA},inflateInfo:"pako inflate (from Nodeca project)"};var FA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},SA=Object.prototype.toString,vA=H.Z_NO_FLUSH,RA=H.Z_FINISH,UA=H.Z_OK,LA=H.Z_STREAM_END,bA=H.Z_NEED_DICT,MA=H.Z_STREAM_ERROR,NA=H.Z_DATA_ERROR,xA=H.Z_MEM_ERROR;function JA(A){this.options=P({chunkSize:65536,windowBits:15,to:""},A||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||A&&A.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var t=GA.inflateInit2(this.strm,e.windowBits);if(t!==UA)throw new Error(K[t]);if(this.header=new FA,GA.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Z(e.dictionary):"[object ArrayBuffer]"===SA.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=GA.inflateSetDictionary(this.strm,e.dictionary))!==UA))throw new Error(K[t])}function qA(A,e){var t=new JA(e);if(t.push(A),t.err)throw t.msg||K[t.err];return t.result}JA.prototype.push=function(A,e){var t,i,r,I=this.strm,g=this.options.chunkSize,n=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:!0===e?RA:vA,"[object ArrayBuffer]"===SA.call(A)?I.input=new Uint8Array(A):I.input=A,I.next_in=0,I.avail_in=I.input.length;;){for(0===I.avail_out&&(I.output=new Uint8Array(g),I.next_out=0,I.avail_out=g),(t=GA.inflate(I,i))===bA&&n&&((t=GA.inflateSetDictionary(I,n))===UA?t=GA.inflate(I,i):t===NA&&(t=bA));I.avail_in>0&&t===LA&&I.state.wrap>0&&0!==A[I.next_in];)GA.inflateReset(I),t=GA.inflate(I,i);switch(t){case MA:case NA:case bA:case xA:return this.onEnd(t),this.ended=!0,!1}if(r=I.avail_out,I.next_out&&(0===I.avail_out||t===LA))if("string"===this.options.to){var a=W(I.output,I.next_out),o=I.next_out-a,B=j(I.output,a);I.next_out=o,I.avail_out=g-o,o&&I.output.set(I.output.subarray(a,a+o),0),this.onData(B)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(t!==UA||0!==r){if(t===LA)return t=GA.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(0===I.avail_in)break}}return!0},JA.prototype.onData=function(A){this.chunks.push(A)},JA.prototype.onEnd=function(A){A===UA&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=T(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var YA={Inflate:JA,inflate:qA,inflateRaw:function(A,e){return(e=e||{}).raw=!0,qA(A,e)},ungzip:qA,constants:H}.inflate;function KA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var HA=function(A){s(t,w);var e=KA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return YA(new Uint8Array(A)).buffer}}]),t}(),OA=Object.freeze({__proto__:null,default:HA});function PA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var TA,VA=function(A){s(t,w);var e=PA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){for(var e=new DataView(A),t=[],i=0;i<A.byteLength;++i){var r=e.getInt8(i);if(r<0){var I=e.getUint8(i+1);r=-r;for(var g=0;g<=r;++g)t.push(I);i+=1}else{for(var n=0;n<=r;++n)t.push(e.getUint8(i+n+1));i+=r+1}}return new Uint8Array(t).buffer}}]),t}(),_A=Object.freeze({__proto__:null,default:VA}),XA={exports:{}};TA=XA,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var A,e,t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c=(A={defaultNoDataValue:-34027999387901484e22,decode:function(I,g){var n=(g=g||{}).encodedMaskData||null===g.encodedMaskData,a=r(I,g.inputOffset||0,n),o=null!==g.noDataValue?g.noDataValue:A.defaultNoDataValue,B=e(a,g.pixelType||Float32Array,g.encodedMaskData,o,g.returnMask),C={width:a.width,height:a.height,pixelData:B.resultPixels,minValue:B.minValue,maxValue:a.pixels.maxValue,noDataValue:o};return B.resultMask&&(C.maskData=B.resultMask),g.returnEncodedMask&&a.mask&&(C.encodedMaskData=a.mask.bitset?a.mask.bitset:null),g.returnFileInfo&&(C.fileInfo=t(a),g.computeUsedBitDepths&&(C.fileInfo.bitDepths=i(a))),C}},e=function(A,e,t,i,r){var g,n,a,o=0,B=A.pixels.numBlocksX,C=A.pixels.numBlocksY,Q=Math.floor(A.width/B),E=Math.floor(A.height/C),s=2*A.maxZError,f=Number.MAX_VALUE;t=t||(A.mask?A.mask.bitset:null),n=new e(A.width*A.height),r&&t&&(a=new Uint8Array(A.width*A.height));for(var c,h,l=new Float32Array(Q*E),u=0;u<=C;u++){var w=u!==C?E:A.height%C;if(0!==w)for(var d=0;d<=B;d++){var D=d!==B?Q:A.width%B;if(0!==D){var y,k,p,m,G=u*A.width*E+d*Q,F=A.width-D,S=A.pixels.blocks[o];if(S.encoding<2?(0===S.encoding?y=S.rawData:(I(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,s,l,A.pixels.maxValue),y=l),k=0):p=2===S.encoding?0:S.offset,t)for(h=0;h<w;h++){for(7&G&&(m=t[G>>3],m<<=7&G),c=0;c<D;c++)7&G||(m=t[G>>3]),128&m?(a&&(a[G]=1),f=f>(g=S.encoding<2?y[k++]:p)?g:f,n[G++]=g):(a&&(a[G]=0),n[G++]=i),m<<=1;G+=F}else if(S.encoding<2)for(h=0;h<w;h++){for(c=0;c<D;c++)f=f>(g=y[k++])?g:f,n[G++]=g;G+=F}else for(f=f>p?p:f,h=0;h<w;h++){for(c=0;c<D;c++)n[G++]=p;G+=F}if(1===S.encoding&&k!==S.numValidPixels)throw"Block and Mask do not match";o++}}}return{resultPixels:n,resultMask:a,minValue:f}},t=function(A){return{fileIdentifierString:A.fileIdentifierString,fileVersion:A.fileVersion,imageType:A.imageType,height:A.height,width:A.width,maxZError:A.maxZError,eofOffset:A.eofOffset,mask:A.mask?{numBlocksX:A.mask.numBlocksX,numBlocksY:A.mask.numBlocksY,numBytes:A.mask.numBytes,maxValue:A.mask.maxValue}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,numBytes:A.pixels.numBytes,maxValue:A.pixels.maxValue,noDataValue:A.noDataValue}}},i=function(A){for(var e=A.pixels.numBlocksX*A.pixels.numBlocksY,t={},i=0;i<e;i++){var r=A.pixels.blocks[i];0===r.encoding?t.float32=!0:1===r.encoding?t[r.bitsPerPixel]=!0:t[0]=!0}return Object.keys(t)},r=function(A,e,t){var i={},r=new Uint8Array(A,e,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;e+=10;var I=new DataView(A,e,24);if(i.fileVersion=I.getInt32(0,!0),i.imageType=I.getInt32(4,!0),i.height=I.getUint32(8,!0),i.width=I.getUint32(12,!0),i.maxZError=I.getFloat64(16,!0),e+=24,!t)if(I=new DataView(A,e,16),i.mask={},i.mask.numBlocksY=I.getUint32(0,!0),i.mask.numBlocksX=I.getUint32(4,!0),i.mask.numBytes=I.getUint32(8,!0),i.mask.maxValue=I.getFloat32(12,!0),e+=16,i.mask.numBytes>0){var g=new Uint8Array(Math.ceil(i.width*i.height/8)),n=(I=new DataView(A,e,i.mask.numBytes)).getInt16(0,!0),a=2,o=0;do{if(n>0)for(;n--;)g[o++]=I.getUint8(a++);else{var B=I.getUint8(a++);for(n=-n;n--;)g[o++]=B}n=I.getInt16(a,!0),a+=2}while(a<i.mask.numBytes);if(-32768!==n||o<g.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=g,e+=i.mask.numBytes}else 0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)&&(i.mask.bitset=new Uint8Array(Math.ceil(i.width*i.height/8)));I=new DataView(A,e,16),i.pixels={},i.pixels.numBlocksY=I.getUint32(0,!0),i.pixels.numBlocksX=I.getUint32(4,!0),i.pixels.numBytes=I.getUint32(8,!0),i.pixels.maxValue=I.getFloat32(12,!0),e+=16;var C=i.pixels.numBlocksX,Q=i.pixels.numBlocksY,E=C+(i.width%C>0?1:0),s=Q+(i.height%Q>0?1:0);i.pixels.blocks=new Array(E*s);for(var f=0,c=0;c<s;c++)for(var h=0;h<E;h++){var l=0,u=A.byteLength-e;I=new DataView(A,e,Math.min(10,u));var w={};i.pixels.blocks[f++]=w;var d=I.getUint8(0);if(l++,w.encoding=63&d,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==d&&2!==d){if(d>>=6,w.offsetType=d,2===d)w.offset=I.getInt8(1),l++;else if(1===d)w.offset=I.getInt16(1,!0),l+=2;else{if(0!==d)throw"Invalid block offset type";w.offset=I.getFloat32(1,!0),l+=4}if(1===w.encoding)if(d=I.getUint8(l),l++,w.bitsPerPixel=63&d,d>>=6,w.numValidPixelsType=d,2===d)w.numValidPixels=I.getUint8(l),l++;else if(1===d)w.numValidPixels=I.getUint16(l,!0),l+=2;else{if(0!==d)throw"Invalid valid pixel count type";w.numValidPixels=I.getUint32(l,!0),l+=4}}var D;if(e+=l,3!==w.encoding)if(0===w.encoding){var y=(i.pixels.numBytes-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";D=new ArrayBuffer(4*y),new Uint8Array(D).set(new Uint8Array(A,e,4*y));var k=new Float32Array(D);w.rawData=k,e+=4*y}else if(1===w.encoding){var p=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),m=Math.ceil(p/4);D=new ArrayBuffer(4*m),new Uint8Array(D).set(new Uint8Array(A,e,p)),w.stuffedData=new Uint32Array(D),e+=p}}else e++}return i.eofOffset=e,i},I=function(A,e,t,i,r,I,g){var n,a,o,B=(1<<e)-1,C=0,Q=0,E=Math.ceil((g-i)/r),s=4*A.length-Math.ceil(e*t/8);for(A[A.length-1]<<=8*s,n=0;n<t;n++){if(0===Q&&(o=A[C++],Q=32),Q>=e)a=o>>>Q-e&B,Q-=e;else{var f=e-Q;a=(o&B)<<f&B,a+=(o=A[C++])>>>(Q=32-f)}I[n]=a<E?i+a*r:g}return I},A),h=(g=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E=(1<<t)-1,s=0,f=0,c=4*A.length-Math.ceil(t*i/8);if(A[A.length-1]<<=8*c,r)for(a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=r[o];else for(Q=Math.ceil((n-I)/g),a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=o<Q?I+o*g:n},n=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=[],s=4*A.length-Math.ceil(e*t/8);A[A.length-1]<<=8*s;var f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32),C>=e?(Q=g>>>C-e&n,C-=e):(Q=(g&n)<<(B=e-C)&n,Q+=(g=A[a++])>>>(C=32-B)),E[o]=Q<f?i+Q*r:I;return E.unshift(i),E},a=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q=(1<<t)-1,E=0,s=0,f=0;if(r)for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=r[o];else{var c=Math.ceil((n-I)/g);for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=o<c?I+o*g:n}return e},o=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=0,s=[],f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32,E=0),C>=e?(Q=g>>>E&n,C-=e,E+=e):(Q=g>>>E&n,C=32-(B=e-C),Q|=((g=A[a++])&(1<<B)-1)<<e-B,E=B),s[o]=Q<f?i+Q*r:I;return s.unshift(i),s},B=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=4*A.length-Math.ceil(t*i/8);for(A[A.length-1]<<=8*C,r=0;r<i;r++)0===B&&(g=A[o++],B=32),B>=t?(I=g>>>B-t&a,B-=t):(I=(g&a)<<(n=t-B)&a,I+=(g=A[o++])>>>(B=32-n)),e[r]=I;return e},C=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=0;for(r=0;r<i;r++)0===B&&(g=A[o++],B=32,C=0),B>=t?(I=g>>>C&a,B-=t,C+=t):(I=g>>>C&a,B=32-(n=t-B),I|=((g=A[o++])&(1<<n)-1)<<t-n,C=n),e[r]=I;return e},Q={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(A){for(var e=65535,t=65535,i=A.length,r=Math.floor(i/2),I=0;r;){var g=r>=359?359:r;r-=g;do{e+=A[I++]<<8,t+=e+=A[I++]}while(--g);e=(65535&e)+(e>>>16),t=(65535&t)+(t>>>16)}return 1&i&&(t+=e+=A[I]<<8),((t=(65535&t)+(t>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(A,e){var t=e.ptr,i=new Uint8Array(A,t,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,i),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;t+=6;var I,g=new DataView(A,t,8),n=g.getInt32(0,!0);if(r.fileVersion=n,t+=4,n>=3&&(r.checksum=g.getUint32(4,!0),t+=4),g=new DataView(A,t,12),r.height=g.getUint32(0,!0),r.width=g.getUint32(4,!0),t+=8,n>=4?(r.numDims=g.getUint32(8,!0),t+=4):r.numDims=1,g=new DataView(A,t,40),r.numValidPixel=g.getUint32(0,!0),r.microBlockSize=g.getInt32(4,!0),r.blobSize=g.getInt32(8,!0),r.imageType=g.getInt32(12,!0),r.maxZError=g.getFloat64(16,!0),r.zMin=g.getFloat64(24,!0),r.zMax=g.getFloat64(32,!0),t+=40,e.headerInfo=r,e.ptr=t,n>=3&&(I=n>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(A,t-I,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(A,e){var t=e.headerInfo,i=this.getDataTypeArray(t.imageType),r=t.numDims*this.getDataTypeSize(t.imageType),I=this.readSubArray(A,e.ptr,i,r),g=this.readSubArray(A,e.ptr+r,i,r);e.ptr+=2*r;var n,a=!0;for(n=0;n<t.numDims;n++)if(I[n]!==g[n]){a=!1;break}return t.minValues=I,t.maxValues=g,a},readSubArray:function(A,e,t,i){var r;if(t===Uint8Array)r=new Uint8Array(A,e,i);else{var I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(A,e,i)),r=new t(I)}return r},readMask:function(A,e){var t,i,r=e.ptr,I=e.headerInfo,g=I.width*I.height,n=I.numValidPixel,a=new DataView(A,r,4),o={};if(o.numBytes=a.getUint32(0,!0),r+=4,(0===n||g===n)&&0!==o.numBytes)throw"invalid mask";if(0===n)t=new Uint8Array(Math.ceil(g/8)),o.bitset=t,i=new Uint8Array(g),e.pixels.resultMask=i,r+=o.numBytes;else if(o.numBytes>0){t=new Uint8Array(Math.ceil(g/8));var B=(a=new DataView(A,r,o.numBytes)).getInt16(0,!0),C=2,Q=0,E=0;do{if(B>0)for(;B--;)t[Q++]=a.getUint8(C++);else for(E=a.getUint8(C++),B=-B;B--;)t[Q++]=E;B=a.getInt16(C,!0),C+=2}while(C<o.numBytes);if(-32768!==B||Q<t.length)throw"Unexpected end of mask RLE encoding";i=new Uint8Array(g);var s=0,f=0;for(f=0;f<g;f++)7&f?(s=t[f>>3],s<<=7&f):s=t[f>>3],128&s&&(i[f]=1);e.pixels.resultMask=i,o.bitset=t,r+=o.numBytes}return e.ptr=r,e.mask=o,!0},readDataOneSweep:function(A,e,t,i){var r,I=e.ptr,g=e.headerInfo,n=g.numDims,a=g.width*g.height,o=g.imageType,B=g.numValidPixel*Q.getDataTypeSize(o)*n,C=e.pixels.resultMask;if(t===Uint8Array)r=new Uint8Array(A,I,B);else{var E=new ArrayBuffer(B);new Uint8Array(E).set(new Uint8Array(A,I,B)),r=new t(E)}if(r.length===a*n)e.pixels.resultPixels=i?Q.swapDimensionOrder(r,a,n,t,!0):r;else{e.pixels.resultPixels=new t(a*n);var s=0,f=0,c=0,h=0;if(n>1){if(i){for(f=0;f<a;f++)if(C[f])for(h=f,c=0;c<n;c++,h+=a)e.pixels.resultPixels[h]=r[s++]}else for(f=0;f<a;f++)if(C[f])for(h=f*n,c=0;c<n;c++)e.pixels.resultPixels[h+c]=r[s++]}else for(f=0;f<a;f++)C[f]&&(e.pixels.resultPixels[f]=r[s++])}return I+=B,e.ptr=I,!0},readHuffmanTree:function(A,e){var t=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(A,e.ptr,16);if(e.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var r=i.getInt32(4,!0),I=i.getInt32(8,!0),g=i.getInt32(12,!0);if(I>=g)return!1;var n=new Uint32Array(g-I);Q.decodeBits(A,e,n);var a,o,B,C,s=[];for(a=I;a<g;a++)s[o=a-(a<r?0:r)]={first:n[a-I],second:null};var f=A.byteLength-e.ptr,c=Math.ceil(f/4),h=new ArrayBuffer(4*c);new Uint8Array(h).set(new Uint8Array(A,e.ptr,f));var l,u=new Uint32Array(h),w=0,d=0;for(l=u[0],a=I;a<g;a++)(C=s[o=a-(a<r?0:r)].first)>0&&(s[o].second=l<<w>>>32-C,32-w>=C?32===(w+=C)&&(w=0,l=u[++d]):(w+=C-32,l=u[++d],s[o].second|=l>>>32-w));var D=0,y=0,k=new E;for(a=0;a<s.length;a++)void 0!==s[a]&&(D=Math.max(D,s[a].first));y=D>=t?t:D;var p,m,G,F,S,v=[];for(a=I;a<g;a++)if((C=s[o=a-(a<r?0:r)].first)>0)if(p=[C,o],C<=y)for(m=s[o].second<<y-C,G=1<<y-C,B=0;B<G;B++)v[m|B]=p;else for(m=s[o].second,S=k,F=C-1;F>=0;F--)m>>>F&1?(S.right||(S.right=new E),S=S.right):(S.left||(S.left=new E),S=S.left),0!==F||S.val||(S.val=p[1]);return{decodeLut:v,numBitsLUTQick:y,numBitsLUT:D,tree:k,stuffedData:u,srcPtr:d,bitPos:w}},readHuffman:function(A,e,t,i){var r,I,g,n,a,o,B,C,E,s=e.headerInfo.numDims,f=e.headerInfo.height,c=e.headerInfo.width,h=c*f,l=this.readHuffmanTree(A,e),u=l.decodeLut,w=l.tree,d=l.stuffedData,D=l.srcPtr,y=l.bitPos,k=l.numBitsLUTQick,p=l.numBitsLUT,m=0===e.headerInfo.imageType?128:0,G=e.pixels.resultMask,F=0;y>0&&(D++,y=0);var S,v=d[D],R=1===e.encodeMode,U=new t(h*s),L=U;if(s<2||R){for(S=0;S<s;S++)if(s>1&&(L=new t(U.buffer,h*S,h),F=0),e.headerInfo.numValidPixel===c*f)for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(g+=B>0?F:o>0?L[C-c]:F,g&=255,L[C]=g,F=g):L[C]=g}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++)if(G[C]){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(B>0&&G[C-1]?g+=F:o>0&&G[C-c]?g+=L[C-c]:g+=F,g&=255,L[C]=g,F=g):L[C]=g}}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++)if(C=o*c+B,!G||G[C])for(S=0;S<s;S++,C+=h){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,L[C]=g}e.ptr=e.ptr+4*(D+1)+(y>0?4:0),e.pixels.resultPixels=U,s>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(U,h,s,t))},decodeBits:function(A,e,t,i,r){var I=e.headerInfo,Q=I.fileVersion,E=0,s=A.byteLength-e.ptr>=5?5:A.byteLength-e.ptr,f=new DataView(A,e.ptr,s),c=f.getUint8(0);E++;var h=c>>6,l=0===h?4:3-h,u=(32&c)>0,w=31&c,d=0;if(1===l)d=f.getUint8(E),E++;else if(2===l)d=f.getUint16(E,!0),E+=2;else{if(4!==l)throw"Invalid valid pixel count type";d=f.getUint32(E,!0),E+=4}var D,y,k,p,m,G,F,S,v,R=2*I.maxZError,U=I.numDims>1?I.maxValues[r]:I.zMax;if(u){for(e.counter.lut++,S=f.getUint8(E),E++,p=Math.ceil((S-1)*w/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),k=new Uint8Array(y),e.ptr+=E,k.set(new Uint8Array(A,e.ptr,p)),F=new Uint32Array(y),e.ptr+=p,v=0;S-1>>>v;)v++;p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,G=Q>=3?o(F,w,S-1,i,R,U):n(F,w,S-1,i,R,U),Q>=3?a(D,t,v,d,G):g(D,t,v,d,G)}else e.counter.bitstuffer++,v=w,e.ptr+=E,v>0&&(p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,Q>=3?null==i?C(D,t,v,d):a(D,t,v,d,!1,i,R,U):null==i?B(D,t,v,d):g(D,t,v,d,!1,i,R,U))},readTiles:function(A,e,t,i){var r=e.headerInfo,I=r.width,g=r.height,n=I*g,a=r.microBlockSize,o=r.imageType,B=Q.getDataTypeSize(o),C=Math.ceil(I/a),E=Math.ceil(g/a);e.pixels.numBlocksY=E,e.pixels.numBlocksX=C,e.pixels.ptr=0;var s,f,c,h,l,u,w,d,D,y,k=0,p=0,m=0,G=0,F=0,S=0,v=0,R=0,U=0,L=0,b=0,M=0,N=0,x=0,J=0,q=new t(a*a),Y=g%a||a,K=I%a||a,H=r.numDims,O=e.pixels.resultMask,P=e.pixels.resultPixels,T=r.fileVersion>=5?14:15,V=r.zMax;for(m=0;m<E;m++)for(F=m!==E-1?a:Y,G=0;G<C;G++)for(L=m*I*a+G*a,b=I-(S=G!==C-1?a:K),d=0;d<H;d++){if(H>1?(y=P,L=m*I*a+G*a,P=new t(e.pixels.resultPixels.buffer,n*d*B,n),V=r.maxValues[d]):y=null,v=A.byteLength-e.ptr,f={},J=0,R=(s=new DataView(A,e.ptr,Math.min(10,v))).getUint8(0),J++,D=r.fileVersion>=5?4&R:0,U=R>>6&255,(R>>2&T)!=(G*a>>3&T))throw"integrity issue";if(D&&0===d)throw"integrity issue";if((l=3&R)>3)throw e.ptr+=J,"Invalid block encoding ("+l+")";if(2!==l)if(0===l){if(D)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=J,M=(M=F*S*B)<(N=A.byteLength-e.ptr)?M:N,c=new ArrayBuffer(M%B==0?M:M+B-M%B),new Uint8Array(c).set(new Uint8Array(A,e.ptr,M)),h=new t(c),x=0,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=h[x++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=h[x++];L+=b}e.ptr+=x*B}else if(u=Q.getDataTypeUsed(D&&o<6?4:o,U),w=Q.getOnePixel(f,J,u,s),J+=Q.getDataTypeSize(u),3===l)if(e.ptr+=J,e.counter.constantoffset++,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=D?Math.min(V,y[L]+w):w),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=D?Math.min(V,y[L]+w):w,L++;L+=b}else if(e.ptr+=J,Q.decodeBits(A,e,q,w,d),J=0,D)if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]+y[L]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=q[J++]+y[L],L++;L+=b}else if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=q[J++];L+=b}else{if(D)if(O)for(k=0;k<F;k++)for(p=0;p<S;p++)O[L]&&(P[L]=y[L]),L++;else for(k=0;k<F;k++)for(p=0;p<S;p++)P[L]=y[L],L++;e.counter.constant++,e.ptr+=J}}H>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(e.pixels.resultPixels,n,H,t))},formatFileInfo:function(A){return{fileIdentifierString:A.headerInfo.fileIdentifierString,fileVersion:A.headerInfo.fileVersion,imageType:A.headerInfo.imageType,height:A.headerInfo.height,width:A.headerInfo.width,numValidPixel:A.headerInfo.numValidPixel,microBlockSize:A.headerInfo.microBlockSize,blobSize:A.headerInfo.blobSize,maxZError:A.headerInfo.maxZError,pixelType:Q.getPixelType(A.headerInfo.imageType),eofOffset:A.eofOffset,mask:A.mask?{numBytes:A.mask.numBytes}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,maxValue:A.headerInfo.zMax,minValue:A.headerInfo.zMin,noDataValue:A.noDataValue}}},constructConstantSurface:function(A,e){var t=A.headerInfo.zMax,i=A.headerInfo.zMin,r=A.headerInfo.maxValues,I=A.headerInfo.numDims,g=A.headerInfo.height*A.headerInfo.width,n=0,a=0,o=0,B=A.pixels.resultMask,C=A.pixels.resultPixels;if(B)if(I>1){if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)B[a]&&(C[o+a]=t);else for(a=0;a<g;a++)if(B[a])for(o=a*I,n=0;n<I;n++)C[o+I]=r[n]}else for(a=0;a<g;a++)B[a]&&(C[a]=t);else if(I>1&&i!==t)if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)C[o+a]=t;else for(a=0;a<g;a++)for(o=a*I,n=0;n<I;n++)C[o+n]=r[n];else for(a=0;a<g*I;a++)C[a]=t},getDataTypeArray:function(A){var e;switch(A){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(A){var e;switch(A){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(A,e){if(null==e)return!1;var t;switch(A){case 0:t=e>=-128&&e<=127;break;case 1:t=e>=0&&e<=255;break;case 2:t=e>=-32768&&e<=32767;break;case 3:t=e>=0&&e<=65536;break;case 4:t=e>=-2147483648&&e<=2147483647;break;case 5:t=e>=0&&e<=4294967296;break;case 6:t=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:t=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:t=!1}return t},getDataTypeSize:function(A){var e=0;switch(A){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=A}return e},getDataTypeUsed:function(A,e){var t=A;switch(A){case 2:case 4:t=A-e;break;case 3:case 5:t=A-2*e;break;case 6:t=0===e?A:1===e?2:1;break;case 7:t=0===e?A:A-2*e+1;break;default:t=A}return t},getOnePixel:function(A,e,t,i){var r=0;switch(t){case 0:r=i.getInt8(e);break;case 1:r=i.getUint8(e);break;case 2:r=i.getInt16(e,!0);break;case 3:r=i.getUint16(e,!0);break;case 4:r=i.getInt32(e,!0);break;case 5:r=i.getUInt32(e,!0);break;case 6:r=i.getFloat32(e,!0);break;case 7:r=i.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return r},swapDimensionOrder:function(A,e,t,i,r){var I=0,g=0,n=0,a=0,o=A;if(t>1)if(o=new i(e*t),r)for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[a]=A[g++];else for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[g++]=A[a];return o}},E=function(A,e,t){this.val=A,this.left=e,this.right=t},{decode:function(A,e){var t=(e=e||{}).noDataValue,i=0,r={};r.ptr=e.inputOffset||0,r.pixels={},Q.readHeaderInfo(A,r);var I=r.headerInfo,g=I.fileVersion,n=Q.getDataTypeArray(I.imageType);if(g>5)throw"unsupported lerc version 2."+g;Q.readMask(A,r),I.numValidPixel===I.width*I.height||r.pixels.resultMask||(r.pixels.resultMask=e.maskData);var a=I.width*I.height;r.pixels.resultPixels=new n(a*I.numDims),r.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var o,B=!e.returnPixelInterleavedDims;if(0!==I.numValidPixel)if(I.zMax===I.zMin)Q.constructConstantSurface(r,B);else if(g>=4&&Q.checkMinMaxRanges(A,r))Q.constructConstantSurface(r,B);else{var C=new DataView(A,r.ptr,2),E=C.getUint8(0);if(r.ptr++,E)Q.readDataOneSweep(A,r,n,B);else if(g>1&&I.imageType<=1&&Math.abs(I.maxZError-.5)<1e-5){var s=C.getUint8(1);if(r.ptr++,r.encodeMode=s,s>2||g<4&&s>1)throw"Invalid Huffman flag "+s;s?Q.readHuffman(A,r,n,B):Q.readTiles(A,r,n,B)}else Q.readTiles(A,r,n,B)}r.eofOffset=r.ptr,e.inputOffset?(o=r.headerInfo.blobSize+e.inputOffset-r.ptr,Math.abs(o)>=1&&(r.eofOffset=e.inputOffset+r.headerInfo.blobSize)):(o=r.headerInfo.blobSize-r.ptr,Math.abs(o)>=1&&(r.eofOffset=r.headerInfo.blobSize));var f={width:I.width,height:I.height,pixelData:r.pixels.resultPixels,minValue:I.zMin,maxValue:I.zMax,validPixelCount:I.numValidPixel,dimCount:I.numDims,dimStats:{minValues:I.minValues,maxValues:I.maxValues},maskData:r.pixels.resultMask};if(r.pixels.resultMask&&Q.isValidPixelValue(I.imageType,t)){var c=r.pixels.resultMask;for(i=0;i<a;i++)c[i]||(f.pixelData[i]=t);f.noDataValue=t}return r.noDataValue=t,e.returnFileInfo&&(f.fileInfo=Q.formatFileInfo(r)),f},getBandCount:function(A){for(var e=0,t=0,i={ptr:0,pixels:{}};t<A.byteLength-58;)Q.readHeaderInfo(A,i),t+=i.headerInfo.blobSize,e++,i.ptr=t;return e}}),l=(s=new ArrayBuffer(4),f=new Uint8Array(s),new Uint32Array(s)[0]=1,1===f[0]),u={decode:function(A,e){if(!l)throw"Big endian system is not supported.";var t,i,r=(e=e||{}).inputOffset||0,I=new Uint8Array(A,r,10),g=String.fromCharCode.apply(null,I);if("CntZImage"===g.trim())t=c,i=1;else{if("Lerc2"!==g.substring(0,5))throw"Unexpected file identifier string: "+g;t=h,i=2}for(var n,a,o,B,C,Q,E=0,s=A.byteLength-10,f=[],u={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},w=0;r<s;){var d=t.decode(A,{inputOffset:r,encodedMaskData:n,maskData:o,returnMask:0===E,returnEncodedMask:0===E,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});r=d.fileInfo.eofOffset,o=d.maskData,0===E&&(n=d.encodedMaskData,u.width=d.width,u.height=d.height,u.dimCount=d.dimCount||1,u.pixelType=d.pixelType||d.fileInfo.pixelType,u.mask=o),i>1&&(o&&f.push(o),d.fileInfo.mask&&d.fileInfo.mask.numBytes>0&&w++),E++,u.pixels.push(d.pixelData),u.statistics.push({minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue,dimStats:d.dimStats})}if(i>1&&w>1){for(Q=u.width*u.height,u.bandMasks=f,(o=new Uint8Array(Q)).set(f[0]),B=1;B<f.length;B++)for(a=f[B],C=0;C<Q;C++)o[C]=o[C]&a[C];u.maskData=o}return u}};TA.exports?TA.exports=u:this.Lerc=u}();var ZA,jA,WA,zA=XA.exports,$A={env:{emscripten_notify_memory_growth:function(A){WA=new Uint8Array(jA.exports.memory.buffer)}}},Ae=function(){function A(){B(this,A)}return Q(A,[{key:"init",value:function(){return ZA||(ZA="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+ee).then((function(A){return A.arrayBuffer()})).then((function(A){return WebAssembly.instantiate(A,$A)})).then(this._init):WebAssembly.instantiate(Buffer.from(ee,"base64"),$A).then(this._init))}},{key:"_init",value:function(A){jA=A.instance,$A.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(A){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!jA)throw new Error("ZSTDDecoder: Await .init() before decoding.");var t=A.byteLength,i=jA.exports.malloc(t);WA.set(A,i),e=e||Number(jA.exports.ZSTD_findDecompressedSize(i,t));var r=jA.exports.malloc(e),I=jA.exports.ZSTD_decompress(r,e,i,t),g=WA.slice(r,r+I);return jA.exports.free(i),jA.exports.free(r),g}}]),A}(),ee="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",te={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ie={};for(var re in te)te.hasOwnProperty(re)&&(ie[te[re]]=parseInt(re,10));ie.BitsPerSample,ie.ExtraSamples,ie.SampleFormat,ie.StripByteCounts,ie.StripOffsets,ie.StripRowCounts,ie.TileByteCounts,ie.TileOffsets,ie.SubIFDs;var Ie={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ge={};for(var ne in Ie)Ie.hasOwnProperty(ne)&&(ge[Ie[ne]]=parseInt(ne,10));var ae=1,oe=0,Be=1,Ce=2,Qe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Ee={};for(var se in Qe)Qe.hasOwnProperty(se)&&(Ee[Qe[se]]=parseInt(se,10));function fe(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var ce=new Ae,he=function(A){s(t,w);var e=fe(t);function t(A){var i;return B(this,t),(i=e.call(this)).planarConfiguration=void 0!==A.PlanarConfiguration?A.PlanarConfiguration:1,i.samplesPerPixel=void 0!==A.SamplesPerPixel?A.SamplesPerPixel:1,i.addCompression=A.LercParameters[ae],i}return Q(t,[{key:"decodeBlock",value:function(A){switch(this.addCompression){case oe:break;case Be:A=YA(new Uint8Array(A)).buffer;break;case Ce:A=ce.decode(new Uint8Array(A)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return zA.decode(A,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),t}(),le=Object.freeze({__proto__:null,zstd:ce,default:he});function ue(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var we=function(A){s(I,w);var t,i=ue(I);function I(){var A;if(B(this,I),A=i.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return A}return Q(I,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return i=new Blob([t]),A.next=3,createImageBitmap(i);case 3:return I=A.sent,"undefined"!=typeof document?((g=document.createElement("canvas")).width=I.width,g.height=I.height):g=new OffscreenCanvas(I.width,I.height),(n=g.getContext("2d")).drawImage(I,0,0),A.abrupt("return",n.getImageData(0,0,I.width,I.height).data.buffer);case 8:case"end":return A.stop()}}),A)}))),function(A,e){return t.apply(this,arguments)})}]),I}(),de=Object.freeze({__proto__:null,default:we});';return new ei(typeof Buffer<"u"?"data:application/javascript;base64,"+Buffer.from(b,"binary").toString("base64"):URL.createObjectURL(new Blob([b],{type:"application/javascript"})))}});c.cogProtocol=async b=>{if(b.type=="json"){const I=b.url.replace("cog://","").split("#")[0];return{data:await bl(I).getTilejson(b.url)}}if(b.type=="image")return{data:await _h(b.url)};throw new Error(`Unsupported request type '${b.type}'`)},c.colorScale=eo,c.colorSchemeNames=Go,c.locationValues=async(b,{latitude:I,longitude:y},k)=>{const T=bl(b),{minzoom:F,maxzoom:$}=await T.getTilejson(b),{noData:N,scale:re,offset:K}=await T.getMetadata(),Z=k===void 0?$:Math.max(F,Math.min($,Math.round(k))),{tileIndex:ge,column:se,row:X}=(({latitude:be,longitude:Ce,zoom:ke})=>{const[Re,qe]=Is.forward([Ce,be]),Pe=(Re+Wn/2)/Wn*Ln*2**ke,$e=-(qe-Wn/2)/Wn*Ln*2**ke;return{tileIndex:{z:ke,x:Math.floor(Pe/Ln),y:Math.floor($e/Ln)},row:Math.floor($e%Ln),column:Math.floor(Pe%Ln)}})({latitude:I,longitude:y,zoom:Z});return(await T.getRawTile(ge)).map(be=>{const Ce=K+be[256*X+se]*re;return Ce===N||isNaN(Ce)||Ce===1/0?NaN:Ce})},c.setColorFunction=(b,I)=>{io(b,(y=>(k,T)=>{const{offset:F,scale:$}=T,N=k[0].length,re=new Uint8ClampedArray(4*N);for(let K=0;K<N;K++){const Z=k.map(ge=>F+ge[K]*$);y(Z,re.subarray(4*K,4*K+4),T)}return re})(I))}})})(ag,ag.exports);var oE=ag.exports;const zr=[];for(let i=0;i<256;++i)zr.push((i+256).toString(16).slice(1));function lE(i,s=0){return(zr[i[s+0]]+zr[i[s+1]]+zr[i[s+2]]+zr[i[s+3]]+"-"+zr[i[s+4]]+zr[i[s+5]]+"-"+zr[i[s+6]]+zr[i[s+7]]+"-"+zr[i[s+8]]+zr[i[s+9]]+"-"+zr[i[s+10]]+zr[i[s+11]]+zr[i[s+12]]+zr[i[s+13]]+zr[i[s+14]]+zr[i[s+15]]).toLowerCase()}let zf;const cE=new Uint8Array(16);function uE(){if(!zf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");zf=crypto.getRandomValues.bind(crypto)}return zf(cE)}const hE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jy={randomUUID:hE};function AE(i,s,c){var _;if(jy.randomUUID&&!s&&!i)return jy.randomUUID();i=i||{};const d=i.random??((_=i.rng)==null?void 0:_.call(i))??uE();if(d.length<16)throw new Error("Random bytes length must be >= 16");return d[6]=d[6]&15|64,d[8]=d[8]&63|128,lE(d)}function Hg(i){return S_(()=>{const s=[],c={};if(i.value.background)if(Xf(i.value.background)){if(c.backgroundColor=i.value.background,!i.value.text&&iC(i.value.background)){const d=vo(i.value.background);if(d.a==null||d.a===1){const _=R_(d);c.color=_,c.caretColor=_}}}else s.push(`bg-${i.value.background}`);return i.value.text&&(Xf(i.value.text)?(c.color=i.value.text,c.caretColor=i.value.text):s.push(`text-${i.value.text}`)),{colorClasses:s,colorStyles:c}})}function sc(i,s){const c=We(()=>({text:jn(i)?i.value:s?i[s]:null})),{colorClasses:d,colorStyles:_}=Hg(c);return{textColorClasses:d,textColorStyles:_}}function rc(i,s){const c=We(()=>({background:jn(i)?i.value:s?i[s]:null})),{colorClasses:d,colorStyles:_}=Hg(c);return{backgroundColorClasses:d,backgroundColorStyles:_}}const dE=["x-small","small","default","large","x-large"],kd=ui({size:{type:[String,Number],default:"default"}},"size");function Dd(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();return S_(()=>{let c,d;return Wf(dE,i.size)?c=`${s}--size-${i.size}`:i.size&&(d={width:hn(i.size),height:hn(i.size)}),{sizeClasses:c,sizeStyles:d}})}const rr=ui({tag:{type:String,default:"div"}},"tag"),fE=ui({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:ir,...cn(),...kd(),...rr({tag:"i"}),...ea()},"VIcon"),Os=Ni()({name:"VIcon",props:fE(),setup(i,s){let{attrs:c,slots:d}=s;const _=ln(),{themeClasses:w}=Da(i),{iconData:v}=mB(We(()=>_.value||i.icon)),{sizeClasses:l}=Dd(i),{textColorClasses:V,textColorStyles:W}=sc(Li(i,"color"));return tn(()=>{var G,me;const H=(G=d.default)==null?void 0:G.call(d);H&&(_.value=(me=Q_(H).filter(pe=>pe.type===gA&&pe.children&&typeof pe.children=="string")[0])==null?void 0:me.children);const q=!!(c.onClick||c.onClickOnce);return Le(v.value.component,{tag:i.tag,icon:v.value.icon,class:["v-icon","notranslate",w.value,l.value,V.value,{"v-icon--clickable":q,"v-icon--disabled":i.disabled,"v-icon--start":i.start,"v-icon--end":i.end},i.class],style:[l.value?void 0:{fontSize:hn(i.size),height:hn(i.size),width:hn(i.size)},W.value,i.style],role:q?"button":void 0,"aria-hidden":!q,tabindex:q?i.disabled?-1:0:void 0},{default:()=>[H]})}),{}}}),gE=ui({text:String,onClick:hl(),...cn(),...ea()},"VLabel"),pE=Ni()({name:"VLabel",props:gE(),setup(i,s){let{slots:c}=s;return tn(()=>{var d;return Le("label",{class:["v-label",{"v-label--clickable":!!i.onClick},i.class],style:i.style,onClick:i.onClick},[i.text,(d=c.default)==null?void 0:d.call(c)])}),{}}}),mE=[null,"default","comfortable","compact"],pl=ui({density:{type:String,default:"default",validator:i=>mE.includes(i)}},"density");function Ac(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();return{densityClasses:We(()=>`${s}--density-${i.density}`)}}const pv=Symbol.for("vuetify:selection-control-group"),mv=ui({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:ir,trueIcon:ir,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:mA},...cn(),...pl(),...ea()},"SelectionControlGroup"),yE=ui({...mv({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");Ni()({name:"VSelectionControlGroup",props:yE(),emits:{"update:modelValue":i=>!0},setup(i,s){let{slots:c}=s;const d=pa(i,"modelValue"),_=xo(),w=We(()=>i.id||`v-selection-control-group-${_}`),v=We(()=>i.name||w.value),l=new Set;return es(pv,{modelValue:d,forceUpdate:()=>{l.forEach(V=>V())},onForceUpdate:V=>{l.add(V),A0(()=>{l.delete(V)})}}),oh({[i.defaultsTarget]:{color:Li(i,"color"),disabled:Li(i,"disabled"),density:Li(i,"density"),error:Li(i,"error"),inline:Li(i,"inline"),modelValue:d,multiple:We(()=>!!i.multiple||i.multiple==null&&Array.isArray(d.value)),name:v,falseIcon:Li(i,"falseIcon"),trueIcon:Li(i,"trueIcon"),readonly:Li(i,"readonly"),ripple:Li(i,"ripple"),type:Li(i,"type"),valueComparator:Li(i,"valueComparator")}}),tn(()=>{var V;return Le("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":i.inline},i.class],style:i.style,role:i.type==="radio"?"radiogroup":void 0},[(V=c.default)==null?void 0:V.call(c)])}),{}}});const sg=Symbol("rippleStop"),_E=80;function Jy(i,s){i.style.transform=s,i.style.webkitTransform=s}function og(i){return i.constructor.name==="TouchEvent"}function yv(i){return i.constructor.name==="KeyboardEvent"}const vE=function(i,s){var q;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=0,_=0;if(!yv(i)){const G=s.getBoundingClientRect(),me=og(i)?i.touches[i.touches.length-1]:i;d=me.clientX-G.left,_=me.clientY-G.top}let w=0,v=.3;(q=s._ripple)!=null&&q.circle?(v=.15,w=s.clientWidth/2,w=c.center?w:w+Math.sqrt((d-w)**2+(_-w)**2)/4):w=Math.sqrt(s.clientWidth**2+s.clientHeight**2)/2;const l=`${(s.clientWidth-w*2)/2}px`,V=`${(s.clientHeight-w*2)/2}px`,W=c.center?l:`${d-w}px`,H=c.center?V:`${_-w}px`;return{radius:w,scale:v,x:W,y:H,centerX:l,centerY:V}},hd={show(i,s){var me;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((me=s==null?void 0:s._ripple)!=null&&me.enabled))return;const d=document.createElement("span"),_=document.createElement("span");d.appendChild(_),d.className="v-ripple__container",c.class&&(d.className+=` ${c.class}`);const{radius:w,scale:v,x:l,y:V,centerX:W,centerY:H}=vE(i,s,c),q=`${w*2}px`;_.className="v-ripple__animation",_.style.width=q,_.style.height=q,s.appendChild(d);const G=window.getComputedStyle(s);G&&G.position==="static"&&(s.style.position="relative",s.dataset.previousPosition="static"),_.classList.add("v-ripple__animation--enter"),_.classList.add("v-ripple__animation--visible"),Jy(_,`translate(${l}, ${V}) scale3d(${v},${v},${v})`),_.dataset.activated=String(performance.now()),setTimeout(()=>{_.classList.remove("v-ripple__animation--enter"),_.classList.add("v-ripple__animation--in"),Jy(_,`translate(${W}, ${H}) scale3d(1,1,1)`)},0)},hide(i){var w;if(!((w=i==null?void 0:i._ripple)!=null&&w.enabled))return;const s=i.getElementsByClassName("v-ripple__animation");if(s.length===0)return;const c=s[s.length-1];if(c.dataset.isHiding)return;c.dataset.isHiding="true";const d=performance.now()-Number(c.dataset.activated),_=Math.max(250-d,0);setTimeout(()=>{c.classList.remove("v-ripple__animation--in"),c.classList.add("v-ripple__animation--out"),setTimeout(()=>{var l;i.getElementsByClassName("v-ripple__animation").length===1&&i.dataset.previousPosition&&(i.style.position=i.dataset.previousPosition,delete i.dataset.previousPosition),((l=c.parentNode)==null?void 0:l.parentNode)===i&&i.removeChild(c.parentNode)},300)},_)}};function _v(i){return typeof i>"u"||!!i}function cA(i){const s={},c=i.currentTarget;if(!(!(c!=null&&c._ripple)||c._ripple.touched||i[sg])){if(i[sg]=!0,og(i))c._ripple.touched=!0,c._ripple.isTouch=!0;else if(c._ripple.isTouch)return;if(s.center=c._ripple.centered||yv(i),c._ripple.class&&(s.class=c._ripple.class),og(i)){if(c._ripple.showTimerCommit)return;c._ripple.showTimerCommit=()=>{hd.show(i,c,s)},c._ripple.showTimer=window.setTimeout(()=>{var d;(d=c==null?void 0:c._ripple)!=null&&d.showTimerCommit&&(c._ripple.showTimerCommit(),c._ripple.showTimerCommit=null)},_E)}else hd.show(i,c,s)}}function Yy(i){i[sg]=!0}function Za(i){const s=i.currentTarget;if(s!=null&&s._ripple){if(window.clearTimeout(s._ripple.showTimer),i.type==="touchend"&&s._ripple.showTimerCommit){s._ripple.showTimerCommit(),s._ripple.showTimerCommit=null,s._ripple.showTimer=window.setTimeout(()=>{Za(i)});return}window.setTimeout(()=>{s._ripple&&(s._ripple.touched=!1)}),hd.hide(s)}}function vv(i){const s=i.currentTarget;s!=null&&s._ripple&&(s._ripple.showTimerCommit&&(s._ripple.showTimerCommit=null),window.clearTimeout(s._ripple.showTimer))}let uA=!1;function Iv(i){!uA&&(i.keyCode===py.enter||i.keyCode===py.space)&&(uA=!0,cA(i))}function bv(i){uA=!1,Za(i)}function xv(i){uA&&(uA=!1,Za(i))}function wv(i,s,c){const{value:d,modifiers:_}=s,w=_v(d);if(w||hd.hide(i),i._ripple=i._ripple??{},i._ripple.enabled=w,i._ripple.centered=_.center,i._ripple.circle=_.circle,Qw(d)&&d.class&&(i._ripple.class=d.class),w&&!c){if(_.stop){i.addEventListener("touchstart",Yy,{passive:!0}),i.addEventListener("mousedown",Yy);return}i.addEventListener("touchstart",cA,{passive:!0}),i.addEventListener("touchend",Za,{passive:!0}),i.addEventListener("touchmove",vv,{passive:!0}),i.addEventListener("touchcancel",Za),i.addEventListener("mousedown",cA),i.addEventListener("mouseup",Za),i.addEventListener("mouseleave",Za),i.addEventListener("keydown",Iv),i.addEventListener("keyup",bv),i.addEventListener("blur",xv),i.addEventListener("dragstart",Za,{passive:!0})}else!w&&c&&Cv(i)}function Cv(i){i.removeEventListener("mousedown",cA),i.removeEventListener("touchstart",cA),i.removeEventListener("touchend",Za),i.removeEventListener("touchmove",vv),i.removeEventListener("touchcancel",Za),i.removeEventListener("mouseup",Za),i.removeEventListener("mouseleave",Za),i.removeEventListener("keydown",Iv),i.removeEventListener("keyup",bv),i.removeEventListener("dragstart",Za),i.removeEventListener("blur",xv)}function IE(i,s){wv(i,s,!1)}function bE(i){delete i._ripple,Cv(i)}function xE(i,s){if(s.value===s.oldValue)return;const c=_v(s.oldValue);wv(i,s,c)}const Md={mounted:IE,unmounted:bE,updated:xE},jg=ui({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...cn(),...mv()},"VSelectionControl");function wE(i){const s=hr(pv,void 0),{densityClasses:c}=Ac(i),d=pa(i,"modelValue"),_=We(()=>i.trueValue!==void 0?i.trueValue:i.value!==void 0?i.value:!0),w=We(()=>i.falseValue!==void 0?i.falseValue:!1),v=We(()=>!!i.multiple||i.multiple==null&&Array.isArray(d.value)),l=We({get(){const me=s?s.modelValue.value:d.value;return v.value?bo(me).some(pe=>i.valueComparator(pe,_.value)):i.valueComparator(me,_.value)},set(me){if(i.readonly)return;const pe=me?_.value:w.value;let Ae=pe;v.value&&(Ae=me?[...bo(d.value),pe]:bo(d.value).filter(Ye=>!i.valueComparator(Ye,_.value))),s?s.modelValue.value=Ae:d.value=Ae}}),{textColorClasses:V,textColorStyles:W}=sc(We(()=>{if(!(i.error||i.disabled))return l.value?i.color:i.baseColor})),{backgroundColorClasses:H,backgroundColorStyles:q}=rc(We(()=>l.value&&!i.error&&!i.disabled?i.color:i.baseColor)),G=We(()=>l.value?i.trueIcon:i.falseIcon);return{group:s,densityClasses:c,trueValue:_,falseValue:w,model:l,textColorClasses:V,textColorStyles:W,backgroundColorClasses:H,backgroundColorStyles:q,icon:G}}const Ad=Ni()({name:"VSelectionControl",directives:{Ripple:Md},inheritAttrs:!1,props:jg(),emits:{"update:modelValue":i=>!0},setup(i,s){let{attrs:c,slots:d}=s;const{group:_,densityClasses:w,icon:v,model:l,textColorClasses:V,textColorStyles:W,backgroundColorClasses:H,backgroundColorStyles:q,trueValue:G}=wE(i),me=xo(),pe=An(!1),Ae=An(!1),Ye=ln(),st=We(()=>i.id||`input-${me}`),ut=We(()=>!i.disabled&&!i.readonly);_==null||_.onForceUpdate(()=>{Ye.value&&(Ye.value.checked=l.value)});function ot(Nt){ut.value&&(pe.value=!0,Fw(Nt.target,":focus-visible")!==!1&&(Ae.value=!0))}function ft(){pe.value=!1,Ae.value=!1}function Pt(Nt){Nt.stopPropagation()}function Rt(Nt){if(!ut.value){Ye.value&&(Ye.value.checked=l.value);return}i.readonly&&_&&sh(()=>_.forceUpdate()),l.value=Nt.target.checked}return tn(()=>{var mt,tt;const Nt=d.label?d.label({label:i.label,props:{for:st.value}}):i.label,[Xt,Et]=E_(c),zt=Le("input",Wr({ref:Ye,checked:l.value,disabled:!!i.disabled,id:st.value,onBlur:ft,onFocus:ot,onInput:Rt,"aria-disabled":!!i.disabled,"aria-label":i.label,type:i.type,value:G.value,name:i.name,"aria-checked":i.type==="checkbox"?l.value:void 0},Et),null);return Le("div",Wr({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":i.disabled,"v-selection-control--error":i.error,"v-selection-control--focused":pe.value,"v-selection-control--focus-visible":Ae.value,"v-selection-control--inline":i.inline},w.value,i.class]},Xt,{style:i.style}),[Le("div",{class:["v-selection-control__wrapper",V.value],style:W.value},[(mt=d.default)==null?void 0:mt.call(d,{backgroundColorClasses:H,backgroundColorStyles:q}),su(Le("div",{class:["v-selection-control__input"]},[((tt=d.input)==null?void 0:tt.call(d,{model:l,textColorClasses:V,textColorStyles:W,backgroundColorClasses:H,backgroundColorStyles:q,inputNode:zt,icon:v.value,props:{onFocus:ot,onBlur:ft,id:st.value}}))??Le(tr,null,[v.value&&Le(Os,{key:"icon",icon:v.value},null),zt])]),[[bd("ripple"),i.ripple&&[!i.disabled&&!i.readonly,null,["center","circle"]]]])]),Nt&&Le(pE,{for:st.value,onClick:Pt},{default:()=>[Nt]})])}),{isFocused:pe,input:Ye}}}),CE=ui({indeterminate:Boolean,indeterminateIcon:{type:ir,default:"$checkboxIndeterminate"},...jg({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),BE=Ni()({name:"VCheckboxBtn",props:CE(),emits:{"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,s){let{slots:c}=s;const d=pa(i,"indeterminate"),_=pa(i,"modelValue");function w(V){d.value&&(d.value=!1)}const v=We(()=>d.value?i.indeterminateIcon:i.falseIcon),l=We(()=>d.value?i.indeterminateIcon:i.trueIcon);return tn(()=>{const V=Rg(Ad.filterProps(i),["modelValue"]);return Le(Ad,Wr(V,{modelValue:_.value,"onUpdate:modelValue":[W=>_.value=W,w],class:["v-checkbox-btn",i.class],style:i.style,type:"checkbox",falseIcon:v.value,trueIcon:l.value,"aria-checked":d.value?"mixed":void 0}),c)}),{}}});function EE(i){const{t:s}=yC();function c(d){let{name:_}=d;const w={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[_],v=i[`onClick:${_}`],l=v&&w?s(`$vuetify.input.${w}`,i.label??""):void 0;return Le(Os,{icon:i[`${_}Icon`],"aria-label":l,onClick:v},null)}return{InputIcon:c}}const QE=ui({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function ts(i,s,c){return Ni()({name:i,props:QE({mode:c,origin:s}),setup(d,_){let{slots:w}=_;const v={onBeforeEnter(l){d.origin&&(l.style.transformOrigin=d.origin)},onLeave(l){if(d.leaveAbsolute){const{offsetTop:V,offsetLeft:W,offsetWidth:H,offsetHeight:q}=l;l._transitionInitialStyles={position:l.style.position,top:l.style.top,left:l.style.left,width:l.style.width,height:l.style.height},l.style.position="absolute",l.style.top=`${V}px`,l.style.left=`${W}px`,l.style.width=`${H}px`,l.style.height=`${q}px`}d.hideOnLeave&&l.style.setProperty("display","none","important")},onAfterLeave(l){if(d.leaveAbsolute&&(l!=null&&l._transitionInitialStyles)){const{position:V,top:W,left:H,width:q,height:G}=l._transitionInitialStyles;delete l._transitionInitialStyles,l.style.position=V||"",l.style.top=W||"",l.style.left=H||"",l.style.width=q||"",l.style.height=G||""}}};return()=>{const l=d.group?Tg:Cd;return hc(l,{name:d.disabled?"":i,css:!d.disabled,...d.group?void 0:{mode:d.mode},...d.disabled?{}:v},w.default)}}})}function Bv(i,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Ni()({name:i,props:{mode:{type:String,default:c},disabled:Boolean,group:Boolean},setup(d,_){let{slots:w}=_;const v=d.group?Tg:Cd;return()=>hc(v,{name:d.disabled?"":i,css:!d.disabled,...d.disabled?{}:s},w.default)}})}function Ev(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",d=ka(`offset-${c}`);return{onBeforeEnter(v){v._parent=v.parentNode,v._initialStyle={transition:v.style.transition,overflow:v.style.overflow,[c]:v.style[c]}},onEnter(v){const l=v._initialStyle;v.style.setProperty("transition","none","important"),v.style.overflow="hidden";const V=`${v[d]}px`;v.style[c]="0",v.offsetHeight,v.style.transition=l.transition,i&&v._parent&&v._parent.classList.add(i),requestAnimationFrame(()=>{v.style[c]=V})},onAfterEnter:w,onEnterCancelled:w,onLeave(v){v._initialStyle={transition:"",overflow:v.style.overflow,[c]:v.style[c]},v.style.overflow="hidden",v.style[c]=`${v[d]}px`,v.offsetHeight,requestAnimationFrame(()=>v.style[c]="0")},onAfterLeave:_,onLeaveCancelled:_};function _(v){i&&v._parent&&v._parent.classList.remove(i),w(v)}function w(v){const l=v._initialStyle[c];v.style.overflow=v._initialStyle.overflow,l!=null&&(v.style[c]=l),delete v._initialStyle}}ts("fab-transition","center center","out-in");ts("dialog-bottom-transition");ts("dialog-top-transition");ts("fade-transition");const SE=ts("scale-transition");ts("scroll-x-transition");ts("scroll-x-reverse-transition");ts("scroll-y-transition");ts("scroll-y-reverse-transition");ts("slide-x-transition");ts("slide-x-reverse-transition");const kE=ts("slide-y-transition");ts("slide-y-reverse-transition");const Qv=Bv("expand-transition",Ev());Bv("expand-x-transition",Ev("",!0));const Sv=ui({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:i=>i!==!0}},"transition"),$u=(i,s)=>{let{slots:c}=s;const{transition:d,disabled:_,group:w,...v}=i,{component:l=w?Tg:Cd,...V}=typeof d=="object"?d:{};return hc(l,Wr(typeof d=="string"?{name:_?"":d}:V,typeof d=="string"?{}:Object.fromEntries(Object.entries({disabled:_,group:w}).filter(W=>{let[H,q]=W;return q!==void 0})),v),c)},DE=ui({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...cn(),...Sv({transition:{component:kE,leaveAbsolute:!0,group:!0}})},"VMessages"),ME=Ni()({name:"VMessages",props:DE(),setup(i,s){let{slots:c}=s;const d=We(()=>bo(i.messages)),{textColorClasses:_,textColorStyles:w}=sc(We(()=>i.color));return tn(()=>Le($u,{transition:i.transition,tag:"div",class:["v-messages",_.value,i.class],style:[w.value,i.style],role:"alert","aria-live":"polite"},{default:()=>[i.active&&d.value.map((v,l)=>Le("div",{class:"v-messages__message",key:`${l}-${d.value}`},[c.message?c.message({message:v}):v]))]})),{}}}),dc=ui({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function fc(i){return{dimensionStyles:We(()=>{const c={},d=hn(i.height),_=hn(i.maxHeight),w=hn(i.maxWidth),v=hn(i.minHeight),l=hn(i.minWidth),V=hn(i.width);return d!=null&&(c.height=d),_!=null&&(c.maxHeight=_),w!=null&&(c.maxWidth=w),v!=null&&(c.minHeight=v),l!=null&&(c.minWidth=l),V!=null&&(c.width=V),c})}}const TE=ui({focused:Boolean,"onUpdate:focused":hl()},"focus");function PE(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();const c=pa(i,"focused"),d=We(()=>({[`${s}--focused`]:c.value}));function _(){c.value=!0}function w(){c.value=!1}return{focusClasses:d,isFocused:c,focus:_,blur:w}}const RE=Symbol.for("vuetify:form");function LE(i){const s=hr(RE,null);return{...s,isReadonly:We(()=>!!((i==null?void 0:i.readonly)??(s==null?void 0:s.isReadonly.value))),isDisabled:We(()=>!!((i==null?void 0:i.disabled)??(s==null?void 0:s.isDisabled.value)))}}const FE=ui({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...TE()},"validation");function zE(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl(),c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xo();const d=pa(i,"modelValue"),_=We(()=>i.validationValue===void 0?d.value:i.validationValue),w=LE(i),v=ln([]),l=An(!0),V=We(()=>!!(bo(d.value===""?null:d.value).length||bo(_.value===""?null:_.value).length)),W=We(()=>{var ot;return(ot=i.errorMessages)!=null&&ot.length?bo(i.errorMessages).concat(v.value).slice(0,Math.max(0,+i.maxErrors)):v.value}),H=We(()=>{var Pt;let ot=(i.validateOn??((Pt=w.validateOn)==null?void 0:Pt.value))||"input";ot==="lazy"&&(ot="input lazy"),ot==="eager"&&(ot="input eager");const ft=new Set((ot==null?void 0:ot.split(" "))??[]);return{input:ft.has("input"),blur:ft.has("blur")||ft.has("input")||ft.has("invalid-input"),invalidInput:ft.has("invalid-input"),lazy:ft.has("lazy"),eager:ft.has("eager")}}),q=We(()=>{var ot;return i.error||(ot=i.errorMessages)!=null&&ot.length?!1:i.rules.length?l.value?v.value.length||H.value.lazy?null:!0:!v.value.length:!0}),G=An(!1),me=We(()=>({[`${s}--error`]:q.value===!1,[`${s}--dirty`]:V.value,[`${s}--disabled`]:w.isDisabled.value,[`${s}--readonly`]:w.isReadonly.value})),pe=Xr("validation"),Ae=We(()=>i.name??_o(c));fA(()=>{var ot;(ot=w.register)==null||ot.call(w,{id:Ae.value,vm:pe,validate:ut,reset:Ye,resetValidation:st})}),ys(()=>{var ot;(ot=w.unregister)==null||ot.call(w,Ae.value)}),fl(async()=>{var ot;H.value.lazy||await ut(!H.value.eager),(ot=w.update)==null||ot.call(w,Ae.value,q.value,W.value)}),sA(()=>H.value.input||H.value.invalidInput&&q.value===!1,()=>{Dn(_,()=>{if(_.value!=null)ut();else if(i.focused){const ot=Dn(()=>i.focused,ft=>{ft||ut(),ot()})}})}),sA(()=>H.value.blur,()=>{Dn(()=>i.focused,ot=>{ot||ut()})}),Dn([q,W],()=>{var ot;(ot=w.update)==null||ot.call(w,Ae.value,q.value,W.value)});async function Ye(){d.value=null,await sh(),await st()}async function st(){l.value=!0,H.value.lazy?v.value=[]:await ut(!H.value.eager)}async function ut(){let ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ft=[];G.value=!0;for(const Pt of i.rules){if(ft.length>=+(i.maxErrors??1))break;const Nt=await(typeof Pt=="function"?Pt:()=>Pt)(_.value);if(Nt!==!0){if(Nt!==!1&&typeof Nt!="string"){console.warn(`${Nt} is not a valid value. Rule functions must return boolean true or a string.`);continue}ft.push(Nt||"")}}return v.value=ft,G.value=!1,l.value=ot,v.value}return{errorMessages:W,isDirty:V,isDisabled:w.isDisabled,isReadonly:w.isReadonly,isPristine:l,isValid:q,isValidating:G,reset:Ye,resetValidation:st,validate:ut,validationClasses:me}}const kv=ui({id:String,appendIcon:ir,centerAffix:{type:Boolean,default:!0},prependIcon:ir,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:i=>["horizontal","vertical"].includes(i)},"onClick:prepend":hl(),"onClick:append":hl(),...cn(),...pl(),...Dw(dc(),["maxWidth","minWidth","width"]),...ea(),...FE()},"VInput"),Ky=Ni()({name:"VInput",props:{...kv()},emits:{"update:modelValue":i=>!0},setup(i,s){let{attrs:c,slots:d,emit:_}=s;const{densityClasses:w}=Ac(i),{dimensionStyles:v}=fc(i),{themeClasses:l}=Da(i),{rtlClasses:V}=ch(),{InputIcon:W}=EE(i),H=xo(),q=We(()=>i.id||`input-${H}`),G=We(()=>`${q.value}-messages`),{errorMessages:me,isDirty:pe,isDisabled:Ae,isReadonly:Ye,isPristine:st,isValid:ut,isValidating:ot,reset:ft,resetValidation:Pt,validate:Rt,validationClasses:Nt}=zE(i,"v-input",q),Xt=We(()=>({id:q,messagesId:G,isDirty:pe,isDisabled:Ae,isReadonly:Ye,isPristine:st,isValid:ut,isValidating:ot,reset:ft,resetValidation:Pt,validate:Rt})),Et=We(()=>{var zt;return(zt=i.errorMessages)!=null&&zt.length||!st.value&&me.value.length?me.value:i.hint&&(i.persistentHint||i.focused)?i.hint:i.messages});return tn(()=>{var Jt,yi,pi,vi;const zt=!!(d.prepend||i.prependIcon),mt=!!(d.append||i.appendIcon),tt=Et.value.length>0,yt=!i.hideDetails||i.hideDetails==="auto"&&(tt||!!d.details);return Le("div",{class:["v-input",`v-input--${i.direction}`,{"v-input--center-affix":i.centerAffix,"v-input--hide-spin-buttons":i.hideSpinButtons},w.value,l.value,V.value,Nt.value,i.class],style:[v.value,i.style]},[zt&&Le("div",{key:"prepend",class:"v-input__prepend"},[(Jt=d.prepend)==null?void 0:Jt.call(d,Xt.value),i.prependIcon&&Le(W,{key:"prepend-icon",name:"prepend"},null)]),d.default&&Le("div",{class:"v-input__control"},[(yi=d.default)==null?void 0:yi.call(d,Xt.value)]),mt&&Le("div",{key:"append",class:"v-input__append"},[i.appendIcon&&Le(W,{key:"append-icon",name:"append"},null),(pi=d.append)==null?void 0:pi.call(d,Xt.value)]),yt&&Le("div",{class:"v-input__details"},[Le(ME,{id:G.value,active:tt,messages:Et.value},{message:d.message}),(vi=d.details)==null?void 0:vi.call(d,Xt.value)])])}),{reset:ft,resetValidation:Pt,validate:Rt,isValid:ut,errorMessages:me}}}),GE=ui({fluid:{type:Boolean,default:!1},...cn(),...dc(),...rr()},"VContainer"),Jg=Ni()({name:"VContainer",props:GE(),setup(i,s){let{slots:c}=s;const{rtlClasses:d}=ch(),{dimensionStyles:_}=fc(i);return tn(()=>Le(i.tag,{class:["v-container",{"v-container--fluid":i.fluid},d.value,i.class],style:[_.value,i.style]},c)),{}}}),Dv=Ed.reduce((i,s)=>(i[s]={type:[Boolean,String,Number],default:!1},i),{}),Mv=Ed.reduce((i,s)=>{const c="offset"+Al(s);return i[c]={type:[String,Number],default:null},i},{}),Tv=Ed.reduce((i,s)=>{const c="order"+Al(s);return i[c]={type:[String,Number],default:null},i},{}),$y={col:Object.keys(Dv),offset:Object.keys(Mv),order:Object.keys(Tv)};function NE(i,s,c){let d=i;if(!(c==null||c===!1)){if(s){const _=s.replace(i,"");d+=`-${_}`}return i==="col"&&(d="v-"+d),i==="col"&&(c===""||c===!0)||(d+=`-${c}`),d.toLowerCase()}}const UE=["auto","start","end","center","baseline","stretch"],OE=ui({cols:{type:[Boolean,String,Number],default:!1},...Dv,offset:{type:[String,Number],default:null},...Mv,order:{type:[String,Number],default:null},...Tv,alignSelf:{type:String,default:null,validator:i=>UE.includes(i)},...cn(),...rr()},"VCol"),lg=Ni()({name:"VCol",props:OE(),setup(i,s){let{slots:c}=s;const d=We(()=>{const _=[];let w;for(w in $y)$y[w].forEach(l=>{const V=i[l],W=NE(w,l,V);W&&_.push(W)});const v=_.some(l=>l.startsWith("v-col-"));return _.push({"v-col":!v||!i.cols,[`v-col-${i.cols}`]:i.cols,[`offset-${i.offset}`]:i.offset,[`order-${i.order}`]:i.order,[`align-self-${i.alignSelf}`]:i.alignSelf}),_});return()=>{var _;return hc(i.tag,{class:[d.value,i.class],style:i.style},(_=c.default)==null?void 0:_.call(c))}}}),Yg=["start","end","center"],Pv=["space-between","space-around","space-evenly"];function Kg(i,s){return Ed.reduce((c,d)=>{const _=i+Al(d);return c[_]=s(),c},{})}const VE=[...Yg,"baseline","stretch"],Rv=i=>VE.includes(i),Lv=Kg("align",()=>({type:String,default:null,validator:Rv})),qE=[...Yg,...Pv],Fv=i=>qE.includes(i),zv=Kg("justify",()=>({type:String,default:null,validator:Fv})),HE=[...Yg,...Pv,"stretch"],Gv=i=>HE.includes(i),Nv=Kg("alignContent",()=>({type:String,default:null,validator:Gv})),Zy={align:Object.keys(Lv),justify:Object.keys(zv),alignContent:Object.keys(Nv)},jE={align:"align",justify:"justify",alignContent:"align-content"};function JE(i,s,c){let d=jE[i];if(c!=null){if(s){const _=s.replace(i,"");d+=`-${_}`}return d+=`-${c}`,d.toLowerCase()}}const YE=ui({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Rv},...Lv,justify:{type:String,default:null,validator:Fv},...zv,alignContent:{type:String,default:null,validator:Gv},...Nv,...cn(),...rr()},"VRow"),Uv=Ni()({name:"VRow",props:YE(),setup(i,s){let{slots:c}=s;const d=We(()=>{const _=[];let w;for(w in Zy)Zy[w].forEach(v=>{const l=i[v],V=JE(w,v,l);V&&_.push(V)});return _.push({"v-row--no-gutters":i.noGutters,"v-row--dense":i.dense,[`align-${i.align}`]:i.align,[`justify-${i.justify}`]:i.justify,[`align-content-${i.alignContent}`]:i.alignContent}),_});return()=>{var _;return hc(i.tag,{class:["v-row",d.value,i.class],style:i.style},(_=c.default)==null?void 0:_.call(c))}}}),cg=zg("v-spacer","div","VSpacer"),KE=ui({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Sa=Ni(!1)({name:"VDefaultsProvider",props:KE(),setup(i,s){let{slots:c}=s;const{defaults:d,disabled:_,reset:w,root:v,scoped:l}=Cg(i);return oh(d,{reset:w,root:v,scoped:l,disabled:_}),()=>{var V;return(V=c.default)==null?void 0:V.call(c)}}}),ug=Symbol.for("vuetify:list");function Ov(){const i=hr(ug,{hasPrepend:An(!1),updateHasPrepend:()=>null}),s={hasPrepend:An(!1),updateHasPrepend:c=>{c&&(s.hasPrepend.value=c)}};return es(ug,s),i}function Vv(){return hr(ug,null)}const $g=i=>{const s={activate:c=>{let{id:d,value:_,activated:w}=c;return d=Ei(d),i&&!_&&w.size===1&&w.has(d)||(_?w.add(d):w.delete(d)),w},in:(c,d,_)=>{let w=new Set;if(c!=null)for(const v of bo(c))w=s.activate({id:v,value:!0,activated:new Set(w),children:d,parents:_});return w},out:c=>Array.from(c)};return s},qv=i=>{const s=$g(i);return{activate:d=>{let{activated:_,id:w,...v}=d;w=Ei(w);const l=_.has(w)?new Set([w]):new Set;return s.activate({...v,id:w,activated:l})},in:(d,_,w)=>{let v=new Set;if(d!=null){const l=bo(d);l.length&&(v=s.in(l.slice(0,1),_,w))}return v},out:(d,_,w)=>s.out(d,_,w)}},$E=i=>{const s=$g(i);return{activate:d=>{let{id:_,activated:w,children:v,...l}=d;return _=Ei(_),v.has(_)?w:s.activate({id:_,activated:w,children:v,...l})},in:s.in,out:s.out}},ZE=i=>{const s=qv(i);return{activate:d=>{let{id:_,activated:w,children:v,...l}=d;return _=Ei(_),v.has(_)?w:s.activate({id:_,activated:w,children:v,...l})},in:s.in,out:s.out}},WE={open:i=>{let{id:s,value:c,opened:d,parents:_}=i;if(c){const w=new Set;w.add(s);let v=_.get(s);for(;v!=null;)w.add(v),v=_.get(v);return w}else return d.delete(s),d},select:()=>null},Hv={open:i=>{let{id:s,value:c,opened:d,parents:_}=i;if(c){let w=_.get(s);for(d.add(s);w!=null&&w!==s;)d.add(w),w=_.get(w);return d}else d.delete(s);return d},select:()=>null},XE={open:Hv.open,select:i=>{let{id:s,value:c,opened:d,parents:_}=i;if(!c)return d;const w=[];let v=_.get(s);for(;v!=null;)w.push(v),v=_.get(v);return new Set(w)}},Zg=i=>{const s={select:c=>{let{id:d,value:_,selected:w}=c;if(d=Ei(d),i&&!_){const v=Array.from(w.entries()).reduce((l,V)=>{let[W,H]=V;return H==="on"&&l.push(W),l},[]);if(v.length===1&&v[0]===d)return w}return w.set(d,_?"on":"off"),w},in:(c,d,_)=>{let w=new Map;for(const v of c||[])w=s.select({id:v,value:!0,selected:new Map(w),children:d,parents:_});return w},out:c=>{const d=[];for(const[_,w]of c.entries())w==="on"&&d.push(_);return d}};return s},jv=i=>{const s=Zg(i);return{select:d=>{let{selected:_,id:w,...v}=d;w=Ei(w);const l=_.has(w)?new Map([[w,_.get(w)]]):new Map;return s.select({...v,id:w,selected:l})},in:(d,_,w)=>{let v=new Map;return d!=null&&d.length&&(v=s.in(d.slice(0,1),_,w)),v},out:(d,_,w)=>s.out(d,_,w)}},e2=i=>{const s=Zg(i);return{select:d=>{let{id:_,selected:w,children:v,...l}=d;return _=Ei(_),v.has(_)?w:s.select({id:_,selected:w,children:v,...l})},in:s.in,out:s.out}},t2=i=>{const s=jv(i);return{select:d=>{let{id:_,selected:w,children:v,...l}=d;return _=Ei(_),v.has(_)?w:s.select({id:_,selected:w,children:v,...l})},in:s.in,out:s.out}},i2=i=>{const s={select:c=>{let{id:d,value:_,selected:w,children:v,parents:l}=c;d=Ei(d);const V=new Map(w),W=[d];for(;W.length;){const q=W.shift();w.set(Ei(q),_?"on":"off"),v.has(q)&&W.push(...v.get(q))}let H=Ei(l.get(d));for(;H;){const q=v.get(H),G=q.every(pe=>w.get(Ei(pe))==="on"),me=q.every(pe=>!w.has(Ei(pe))||w.get(Ei(pe))==="off");w.set(H,G?"on":me?"off":"indeterminate"),H=Ei(l.get(H))}return i&&!_&&Array.from(w.entries()).reduce((G,me)=>{let[pe,Ae]=me;return Ae==="on"&&G.push(pe),G},[]).length===0?V:w},in:(c,d,_)=>{let w=new Map;for(const v of c||[])w=s.select({id:v,value:!0,selected:new Map(w),children:d,parents:_});return w},out:(c,d)=>{const _=[];for(const[w,v]of c.entries())v==="on"&&!d.has(w)&&_.push(w);return _}};return s},hA=Symbol.for("vuetify:nested"),Jv={id:An(),root:{register:()=>null,unregister:()=>null,parents:ln(new Map),children:ln(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:ln(!1),selectable:ln(!1),opened:ln(new Set),activated:ln(new Set),selected:ln(new Map),selectedValues:ln([]),getPath:()=>[]}},n2=ui({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),r2=i=>{let s=!1;const c=ln(new Map),d=ln(new Map),_=pa(i,"opened",i.opened,pe=>new Set(pe),pe=>[...pe.values()]),w=We(()=>{if(typeof i.activeStrategy=="object")return i.activeStrategy;if(typeof i.activeStrategy=="function")return i.activeStrategy(i.mandatory);switch(i.activeStrategy){case"leaf":return $E(i.mandatory);case"single-leaf":return ZE(i.mandatory);case"independent":return $g(i.mandatory);case"single-independent":default:return qv(i.mandatory)}}),v=We(()=>{if(typeof i.selectStrategy=="object")return i.selectStrategy;if(typeof i.selectStrategy=="function")return i.selectStrategy(i.mandatory);switch(i.selectStrategy){case"single-leaf":return t2(i.mandatory);case"leaf":return e2(i.mandatory);case"independent":return Zg(i.mandatory);case"single-independent":return jv(i.mandatory);case"classic":default:return i2(i.mandatory)}}),l=We(()=>{if(typeof i.openStrategy=="object")return i.openStrategy;switch(i.openStrategy){case"list":return XE;case"single":return WE;case"multiple":default:return Hv}}),V=pa(i,"activated",i.activated,pe=>w.value.in(pe,c.value,d.value),pe=>w.value.out(pe,c.value,d.value)),W=pa(i,"selected",i.selected,pe=>v.value.in(pe,c.value,d.value),pe=>v.value.out(pe,c.value,d.value));ys(()=>{s=!0});function H(pe){const Ae=[];let Ye=pe;for(;Ye!=null;)Ae.unshift(Ye),Ye=d.value.get(Ye);return Ae}const q=Xr("nested"),G=new Set,me={id:An(),root:{opened:_,activatable:Li(i,"activatable"),selectable:Li(i,"selectable"),activated:V,selected:W,selectedValues:We(()=>{const pe=[];for(const[Ae,Ye]of W.value.entries())Ye==="on"&&pe.push(Ae);return pe}),register:(pe,Ae,Ye)=>{if(G.has(pe)){H(pe).map(String).join(" -> "),H(Ae).concat(pe).map(String).join(" -> ");return}else G.add(pe);Ae&&pe!==Ae&&d.value.set(pe,Ae),Ye&&c.value.set(pe,[]),Ae!=null&&c.value.set(Ae,[...c.value.get(Ae)||[],pe])},unregister:pe=>{if(s)return;G.delete(pe),c.value.delete(pe);const Ae=d.value.get(pe);if(Ae){const Ye=c.value.get(Ae)??[];c.value.set(Ae,Ye.filter(st=>st!==pe))}d.value.delete(pe)},open:(pe,Ae,Ye)=>{q.emit("click:open",{id:pe,value:Ae,path:H(pe),event:Ye});const st=l.value.open({id:pe,value:Ae,opened:new Set(_.value),children:c.value,parents:d.value,event:Ye});st&&(_.value=st)},openOnSelect:(pe,Ae,Ye)=>{const st=l.value.select({id:pe,value:Ae,selected:new Map(W.value),opened:new Set(_.value),children:c.value,parents:d.value,event:Ye});st&&(_.value=st)},select:(pe,Ae,Ye)=>{q.emit("click:select",{id:pe,value:Ae,path:H(pe),event:Ye});const st=v.value.select({id:pe,value:Ae,selected:new Map(W.value),children:c.value,parents:d.value,event:Ye});st&&(W.value=st),me.root.openOnSelect(pe,Ae,Ye)},activate:(pe,Ae,Ye)=>{if(!i.activatable)return me.root.select(pe,!0,Ye);q.emit("click:activate",{id:pe,value:Ae,path:H(pe),event:Ye});const st=w.value.activate({id:pe,value:Ae,activated:new Set(V.value),children:c.value,parents:d.value,event:Ye});st&&(V.value=st)},children:c,parents:d,getPath:H}};return es(hA,me),me.root},Yv=(i,s)=>{const c=hr(hA,Jv),d=Symbol(xo()),_=We(()=>i.value!==void 0?i.value:d),w={...c,id:_,open:(v,l)=>c.root.open(_.value,v,l),openOnSelect:(v,l)=>c.root.openOnSelect(_.value,v,l),isOpen:We(()=>c.root.opened.value.has(_.value)),parent:We(()=>c.root.parents.value.get(_.value)),activate:(v,l)=>c.root.activate(_.value,v,l),isActivated:We(()=>c.root.activated.value.has(Ei(_.value))),select:(v,l)=>c.root.select(_.value,v,l),isSelected:We(()=>c.root.selected.value.get(Ei(_.value))==="on"),isIndeterminate:We(()=>c.root.selected.value.get(_.value)==="indeterminate"),isLeaf:We(()=>!c.root.children.value.get(_.value)),isGroupActivator:c.isGroupActivator};return fA(()=>{!c.isGroupActivator&&c.root.register(_.value,c.id.value,s)}),ys(()=>{!c.isGroupActivator&&c.root.unregister(_.value)}),s&&es(hA,w),w},a2=()=>{const i=hr(hA,Jv);es(hA,{...i,isGroupActivator:!0})};function Wg(){const i=An(!1);return fl(()=>{window.requestAnimationFrame(()=>{i.value=!0})}),{ssrBootStyles:We(()=>i.value?void 0:{transition:"none !important"}),isBooted:yd(i)}}const s2=lh({name:"VListGroupActivator",setup(i,s){let{slots:c}=s;return a2(),()=>{var d;return(d=c.default)==null?void 0:d.call(c)}}}),o2=ui({activeColor:String,baseColor:String,color:String,collapseIcon:{type:ir,default:"$collapse"},expandIcon:{type:ir,default:"$expand"},prependIcon:ir,appendIcon:ir,fluid:Boolean,subgroup:Boolean,title:String,value:null,...cn(),...rr()},"VListGroup"),Wy=Ni()({name:"VListGroup",props:o2(),setup(i,s){let{slots:c}=s;const{isOpen:d,open:_,id:w}=Yv(Li(i,"value"),!0),v=We(()=>`v-list-group--id-${String(w.value)}`),l=Vv(),{isBooted:V}=Wg();function W(me){me.stopPropagation(),_(!d.value,me)}const H=We(()=>({onClick:W,class:"v-list-group__header",id:v.value})),q=We(()=>d.value?i.collapseIcon:i.expandIcon),G=We(()=>({VListItem:{active:d.value,activeColor:i.activeColor,baseColor:i.baseColor,color:i.color,prependIcon:i.prependIcon||i.subgroup&&q.value,appendIcon:i.appendIcon||!i.subgroup&&q.value,title:i.title,value:i.value}}));return tn(()=>Le(i.tag,{class:["v-list-group",{"v-list-group--prepend":l==null?void 0:l.hasPrepend.value,"v-list-group--fluid":i.fluid,"v-list-group--subgroup":i.subgroup,"v-list-group--open":d.value},i.class],style:i.style},{default:()=>[c.activator&&Le(Sa,{defaults:G.value},{default:()=>[Le(s2,null,{default:()=>[c.activator({props:H.value,isOpen:d.value})]})]}),Le($u,{transition:{component:Qv},disabled:!V.value},{default:()=>{var me;return[su(Le("div",{class:"v-list-group__items",role:"group","aria-labelledby":v.value},[(me=c.default)==null?void 0:me.call(c)]),[[b_,d.value]])]}})]})),{isOpen:d}}}),l2=ui({opacity:[Number,String],...cn(),...rr()},"VListItemSubtitle"),c2=Ni()({name:"VListItemSubtitle",props:l2(),setup(i,s){let{slots:c}=s;return tn(()=>Le(i.tag,{class:["v-list-item-subtitle",i.class],style:[{"--v-list-item-subtitle-opacity":i.opacity},i.style]},c)),{}}}),u2=zg("v-list-item-title");function h2(i){return{aspectStyles:We(()=>{const s=Number(i.aspectRatio);return s?{paddingBottom:String(1/s*100)+"%"}:void 0})}}const Kv=ui({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...cn(),...dc()},"VResponsive"),Xy=Ni()({name:"VResponsive",props:Kv(),setup(i,s){let{slots:c}=s;const{aspectStyles:d}=h2(i),{dimensionStyles:_}=fc(i);return tn(()=>{var w;return Le("div",{class:["v-responsive",{"v-responsive--inline":i.inline},i.class],style:[_.value,i.style]},[Le("div",{class:"v-responsive__sizer",style:d.value},null),(w=c.additional)==null?void 0:w.call(c),c.default&&Le("div",{class:["v-responsive__content",i.contentClass]},[c.default()])])}),{}}}),wo=ui({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Co(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();return{roundedClasses:We(()=>{const d=jn(i)?i.value:i.rounded,_=jn(i)?i.value:i.tile,w=[];if(d===!0||d==="")w.push(`${s}--rounded`);else if(typeof d=="string"||d===0)for(const v of String(d).split(" "))w.push(`rounded-${v}`);else(_||d===!1)&&w.push("rounded-0");return w})}}function A2(i,s){if(!Pg)return;const c=s.modifiers||{},d=s.value,{handler:_,options:w}=typeof d=="object"?d:{handler:d,options:{}},v=new IntersectionObserver(function(){var q;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments.length>1?arguments[1]:void 0;const W=(q=i._observe)==null?void 0:q[s.instance.$.uid];if(!W)return;const H=l.some(G=>G.isIntersecting);_&&(!c.quiet||W.init)&&(!c.once||H||W.init)&&_(H,l,V),H&&c.once?$v(i,s):W.init=!0},w);i._observe=Object(i._observe),i._observe[s.instance.$.uid]={init:!1,observer:v},v.observe(i)}function $v(i,s){var d;const c=(d=i._observe)==null?void 0:d[s.instance.$.uid];c&&(c.observer.unobserve(i),delete i._observe[s.instance.$.uid])}const d2={mounted:A2,unmounted:$v},f2=ui({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Kv(),...cn(),...wo(),...Sv()},"VImg"),Xg=Ni()({name:"VImg",directives:{intersect:d2},props:f2(),emits:{loadstart:i=>!0,load:i=>!0,error:i=>!0},setup(i,s){let{emit:c,slots:d}=s;const{backgroundColorClasses:_,backgroundColorStyles:w}=rc(Li(i,"color")),{roundedClasses:v}=Co(i),l=Xr("VImg"),V=An(""),W=ln(),H=An(i.eager?"loading":"idle"),q=An(),G=An(),me=We(()=>i.src&&typeof i.src=="object"?{src:i.src.src,srcset:i.srcset||i.src.srcset,lazySrc:i.lazySrc||i.src.lazySrc,aspect:Number(i.aspectRatio||i.src.aspect||0)}:{src:i.src,srcset:i.srcset,lazySrc:i.lazySrc,aspect:Number(i.aspectRatio||0)}),pe=We(()=>me.value.aspect||q.value/G.value||0);Dn(()=>i.src,()=>{Ae(H.value!=="idle")}),Dn(pe,(tt,yt)=>{!tt&&yt&&W.value&&ft(W.value)}),fA(()=>Ae());function Ae(tt){if(!(i.eager&&tt)&&!(Pg&&!tt&&!i.eager)){if(H.value="loading",me.value.lazySrc){const yt=new Image;yt.src=me.value.lazySrc,ft(yt,null)}me.value.src&&sh(()=>{var yt;c("loadstart",((yt=W.value)==null?void 0:yt.currentSrc)||me.value.src),setTimeout(()=>{var Jt;if(!l.isUnmounted)if((Jt=W.value)!=null&&Jt.complete){if(W.value.naturalWidth||st(),H.value==="error")return;pe.value||ft(W.value,null),H.value==="loading"&&Ye()}else pe.value||ft(W.value),ut()})})}}function Ye(){var tt;l.isUnmounted||(ut(),ft(W.value),H.value="loaded",c("load",((tt=W.value)==null?void 0:tt.currentSrc)||me.value.src))}function st(){var tt;l.isUnmounted||(H.value="error",c("error",((tt=W.value)==null?void 0:tt.currentSrc)||me.value.src))}function ut(){const tt=W.value;tt&&(V.value=tt.currentSrc||tt.src)}let ot=-1;ys(()=>{clearTimeout(ot)});function ft(tt){let yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const Jt=()=>{if(clearTimeout(ot),l.isUnmounted)return;const{naturalHeight:yi,naturalWidth:pi}=tt;yi||pi?(q.value=pi,G.value=yi):!tt.complete&&H.value==="loading"&&yt!=null?ot=window.setTimeout(Jt,yt):(tt.currentSrc.endsWith(".svg")||tt.currentSrc.startsWith("data:image/svg+xml"))&&(q.value=1,G.value=1)};Jt()}const Pt=We(()=>({"v-img__img--cover":i.cover,"v-img__img--contain":!i.cover})),Rt=()=>{var Jt;if(!me.value.src||H.value==="idle")return null;const tt=Le("img",{class:["v-img__img",Pt.value],style:{objectPosition:i.position},src:me.value.src,srcset:me.value.srcset,alt:i.alt,crossorigin:i.crossorigin,referrerpolicy:i.referrerpolicy,draggable:i.draggable,sizes:i.sizes,ref:W,onLoad:Ye,onError:st},null),yt=(Jt=d.sources)==null?void 0:Jt.call(d);return Le($u,{transition:i.transition,appear:!0},{default:()=>[su(yt?Le("picture",{class:"v-img__picture"},[yt,tt]):tt,[[b_,H.value==="loaded"]])]})},Nt=()=>Le($u,{transition:i.transition},{default:()=>[me.value.lazySrc&&H.value!=="loaded"&&Le("img",{class:["v-img__img","v-img__img--preload",Pt.value],style:{objectPosition:i.position},src:me.value.lazySrc,alt:i.alt,crossorigin:i.crossorigin,referrerpolicy:i.referrerpolicy,draggable:i.draggable},null)]}),Xt=()=>d.placeholder?Le($u,{transition:i.transition,appear:!0},{default:()=>[(H.value==="loading"||H.value==="error"&&!d.error)&&Le("div",{class:"v-img__placeholder"},[d.placeholder()])]}):null,Et=()=>d.error?Le($u,{transition:i.transition,appear:!0},{default:()=>[H.value==="error"&&Le("div",{class:"v-img__error"},[d.error()])]}):null,zt=()=>i.gradient?Le("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${i.gradient})`}},null):null,mt=An(!1);{const tt=Dn(pe,yt=>{yt&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{mt.value=!0})}),tt())})}return tn(()=>{const tt=Xy.filterProps(i);return su(Le(Xy,Wr({class:["v-img",{"v-img--absolute":i.absolute,"v-img--booting":!mt.value},_.value,v.value,i.class],style:[{width:hn(i.width==="auto"?q.value:i.width)},w.value,i.style]},tt,{aspectRatio:pe.value,"aria-label":i.alt,role:i.alt?"img":void 0}),{additional:()=>Le(tr,null,[Le(Rt,null,null),Le(Nt,null,null),Le(zt,null,null),Le(Xt,null,null),Le(Et,null,null)]),default:d.default}),[[bd("intersect"),{handler:Ae,options:i.options},null,{once:!0}]])}),{currentSrc:V,image:W,state:H,naturalWidth:q,naturalHeight:G}}}),gc=ui({border:[Boolean,Number,String]},"border");function pc(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();return{borderClasses:We(()=>{const d=jn(i)?i.value:i.border,_=[];if(d===!0||d==="")_.push(`${s}--border`);else if(typeof d=="string"||d===0)for(const w of String(d).split(" "))_.push(`border-${w}`);return _})}}const g2=["elevated","flat","tonal","outlined","text","plain"];function Td(i,s){return Le(tr,null,[i&&Le("span",{key:"overlay",class:`${s}__overlay`},null),Le("span",{key:"underlay",class:`${s}__underlay`},null)])}const uh=ui({color:String,variant:{type:String,default:"elevated",validator:i=>g2.includes(i)}},"variant");function Pd(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();const c=We(()=>{const{variant:w}=_o(i);return`${s}--variant-${w}`}),{colorClasses:d,colorStyles:_}=Hg(We(()=>{const{variant:w,color:v}=_o(i);return{[["elevated","flat"].includes(w)?"background":"text"]:v}}));return{colorClasses:d,colorStyles:_,variantClasses:c}}const p2=ui({start:Boolean,end:Boolean,icon:ir,image:String,text:String,...gc(),...cn(),...pl(),...wo(),...kd(),...rr(),...ea(),...uh({variant:"flat"})},"VAvatar"),ah=Ni()({name:"VAvatar",props:p2(),setup(i,s){let{slots:c}=s;const{themeClasses:d}=Da(i),{borderClasses:_}=pc(i),{colorClasses:w,colorStyles:v,variantClasses:l}=Pd(i),{densityClasses:V}=Ac(i),{roundedClasses:W}=Co(i),{sizeClasses:H,sizeStyles:q}=Dd(i);return tn(()=>Le(i.tag,{class:["v-avatar",{"v-avatar--start":i.start,"v-avatar--end":i.end},d.value,_.value,w.value,V.value,W.value,H.value,l.value,i.class],style:[v.value,q.value,i.style]},{default:()=>[c.default?Le(Sa,{key:"content-defaults",defaults:{VImg:{cover:!0,src:i.image},VIcon:{icon:i.icon}}},{default:()=>[c.default()]}):i.image?Le(Xg,{key:"image",src:i.image,alt:"",cover:!0},null):i.icon?Le(Os,{key:"icon",icon:i.icon},null):i.text,Td(!1,"v-avatar")]})),{}}}),cu=ui({elevation:{type:[Number,String],validator(i){const s=parseInt(i);return!isNaN(s)&&s>=0&&s<=24}}},"elevation");function uu(i){return{elevationClasses:We(()=>{const c=jn(i)?i.value:i.elevation,d=[];return c==null||d.push(`elevation-${c}`),d})}}function m2(){const i=Xr("useRoute");return We(()=>{var s;return(s=i==null?void 0:i.proxy)==null?void 0:s.$route})}function ep(i,s){var q,G;const c=ox("RouterLink"),d=We(()=>!!(i.href||i.to)),_=We(()=>(d==null?void 0:d.value)||vy(s,"click")||vy(i,"click"));if(typeof c=="string"||!("useLink"in c)){const me=Li(i,"href");return{isLink:d,isClickable:_,href:me,linkProps:fa({href:me})}}const w=We(()=>({...i,to:Li(()=>i.to||"")})),v=c.useLink(w.value),l=We(()=>i.to?v:void 0),V=m2(),W=We(()=>{var me,pe,Ae;return l.value?i.exact?V.value?((Ae=l.value.isExactActive)==null?void 0:Ae.value)&&mA(l.value.route.value.query,V.value.query):((pe=l.value.isExactActive)==null?void 0:pe.value)??!1:((me=l.value.isActive)==null?void 0:me.value)??!1:!1}),H=We(()=>{var me;return i.to?(me=l.value)==null?void 0:me.route.value.href:i.href});return{isLink:d,isClickable:_,isActive:W,route:(q=l.value)==null?void 0:q.route,navigate:(G=l.value)==null?void 0:G.navigate,href:H,linkProps:fa({href:H,"aria-current":We(()=>W.value?"page":void 0)})}}const tp=ui({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router"),y2=ui({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:ir,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:ir,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:hl(),onClickOnce:hl(),...gc(),...cn(),...pl(),...dc(),...cu(),...wo(),...tp(),...rr(),...ea(),...uh({variant:"text"})},"VListItem"),hg=Ni()({name:"VListItem",directives:{Ripple:Md},props:y2(),emits:{click:i=>!0},setup(i,s){let{attrs:c,slots:d,emit:_}=s;const w=ep(i,c),v=We(()=>i.value===void 0?w.href.value:i.value),{activate:l,isActivated:V,select:W,isOpen:H,isSelected:q,isIndeterminate:G,isGroupActivator:me,root:pe,parent:Ae,openOnSelect:Ye,id:st}=Yv(v,!1),ut=Vv(),ot=We(()=>{var Fi;return i.active!==!1&&(i.active||((Fi=w.isActive)==null?void 0:Fi.value)||(pe.activatable.value?V.value:q.value))}),ft=We(()=>i.link!==!1&&w.isLink.value),Pt=We(()=>!!ut&&(pe.selectable.value||pe.activatable.value||i.value!=null)),Rt=We(()=>!i.disabled&&i.link!==!1&&(i.link||w.isClickable.value||Pt.value)),Nt=We(()=>i.rounded||i.nav),Xt=We(()=>i.color??i.activeColor),Et=We(()=>({color:ot.value?Xt.value??i.baseColor:i.baseColor,variant:i.variant}));Dn(()=>{var Fi;return(Fi=w.isActive)==null?void 0:Fi.value},Fi=>{Fi&&zt()}),fA(()=>{var Fi;(Fi=w.isActive)!=null&&Fi.value&&zt()});function zt(){Ae.value!=null&&pe.open(Ae.value,!0),Ye(!0)}const{themeClasses:mt}=Da(i),{borderClasses:tt}=pc(i),{colorClasses:yt,colorStyles:Jt,variantClasses:yi}=Pd(Et),{densityClasses:pi}=Ac(i),{dimensionStyles:vi}=fc(i),{elevationClasses:Mi}=uu(i),{roundedClasses:Wi}=Co(Nt),Nn=We(()=>i.lines?`v-list-item--${i.lines}-line`:void 0),nn=We(()=>({isActive:ot.value,select:W,isOpen:H.value,isSelected:q.value,isIndeterminate:G.value}));function Hi(Fi){var dn;_("click",Fi),Rt.value&&((dn=w.navigate)==null||dn.call(w,Fi),!me&&(pe.activatable.value?l(!V.value,Fi):(pe.selectable.value||i.value!=null)&&W(!q.value,Fi)))}function wn(Fi){(Fi.key==="Enter"||Fi.key===" ")&&(Fi.preventDefault(),Fi.target.dispatchEvent(new MouseEvent("click",Fi)))}return tn(()=>{const Fi=ft.value?"a":i.tag,dn=d.title||i.title!=null,Un=d.subtitle||i.subtitle!=null,un=!!(i.appendAvatar||i.appendIcon),Xi=!!(un||d.append),On=!!(i.prependAvatar||i.prependIcon),Jn=!!(On||d.prepend);return ut==null||ut.updateHasPrepend(Jn),i.activeColor&&Kw("active-color",["color","base-color"]),su(Le(Fi,Wr({class:["v-list-item",{"v-list-item--active":ot.value,"v-list-item--disabled":i.disabled,"v-list-item--link":Rt.value,"v-list-item--nav":i.nav,"v-list-item--prepend":!Jn&&(ut==null?void 0:ut.hasPrepend.value),"v-list-item--slim":i.slim,[`${i.activeClass}`]:i.activeClass&&ot.value},mt.value,tt.value,yt.value,pi.value,Mi.value,Nn.value,Wi.value,yi.value,i.class],style:[Jt.value,vi.value,i.style],tabindex:Rt.value?ut?-2:0:void 0,"aria-selected":Pt.value?pe.activatable.value?V.value:pe.selectable.value?q.value:ot.value:void 0,onClick:Hi,onKeydown:Rt.value&&!ft.value&&wn},w.linkProps),{default:()=>{var Qr;return[Td(Rt.value||ot.value,"v-list-item"),Jn&&Le("div",{key:"prepend",class:"v-list-item__prepend"},[d.prepend?Le(Sa,{key:"prepend-defaults",disabled:!On,defaults:{VAvatar:{density:i.density,image:i.prependAvatar},VIcon:{density:i.density,icon:i.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var Ee;return[(Ee=d.prepend)==null?void 0:Ee.call(d,nn.value)]}}):Le(tr,null,[i.prependAvatar&&Le(ah,{key:"prepend-avatar",density:i.density,image:i.prependAvatar},null),i.prependIcon&&Le(Os,{key:"prepend-icon",density:i.density,icon:i.prependIcon},null)]),Le("div",{class:"v-list-item__spacer"},null)]),Le("div",{class:"v-list-item__content","data-no-activator":""},[dn&&Le(u2,{key:"title"},{default:()=>{var Ee;return[((Ee=d.title)==null?void 0:Ee.call(d,{title:i.title}))??i.title]}}),Un&&Le(c2,{key:"subtitle"},{default:()=>{var Ee;return[((Ee=d.subtitle)==null?void 0:Ee.call(d,{subtitle:i.subtitle}))??i.subtitle]}}),(Qr=d.default)==null?void 0:Qr.call(d,nn.value)]),Xi&&Le("div",{key:"append",class:"v-list-item__append"},[d.append?Le(Sa,{key:"append-defaults",disabled:!un,defaults:{VAvatar:{density:i.density,image:i.appendAvatar},VIcon:{density:i.density,icon:i.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var Ee;return[(Ee=d.append)==null?void 0:Ee.call(d,nn.value)]}}):Le(tr,null,[i.appendIcon&&Le(Os,{key:"append-icon",density:i.density,icon:i.appendIcon},null),i.appendAvatar&&Le(ah,{key:"append-avatar",density:i.density,image:i.appendAvatar},null)]),Le("div",{class:"v-list-item__spacer"},null)])]}}),[[bd("ripple"),Rt.value&&i.ripple]])}),{activate:l,isActivated:V,isGroupActivator:me,isSelected:q,list:ut,select:W,root:pe,id:st}}}),_2=ui({color:String,inset:Boolean,sticky:Boolean,title:String,...cn(),...rr()},"VListSubheader"),Zv=Ni()({name:"VListSubheader",props:_2(),setup(i,s){let{slots:c}=s;const{textColorClasses:d,textColorStyles:_}=sc(Li(i,"color"));return tn(()=>{const w=!!(c.default||i.title);return Le(i.tag,{class:["v-list-subheader",{"v-list-subheader--inset":i.inset,"v-list-subheader--sticky":i.sticky},d.value,i.class],style:[{textColorStyles:_},i.style]},{default:()=>{var v;return[w&&Le("div",{class:"v-list-subheader__text"},[((v=c.default)==null?void 0:v.call(c))??i.title])]}})}),{}}}),v2=ui({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...cn(),...ea()},"VDivider"),I2=Ni()({name:"VDivider",props:v2(),setup(i,s){let{attrs:c,slots:d}=s;const{themeClasses:_}=Da(i),{textColorClasses:w,textColorStyles:v}=sc(Li(i,"color")),l=We(()=>{const V={};return i.length&&(V[i.vertical?"height":"width"]=hn(i.length)),i.thickness&&(V[i.vertical?"borderRightWidth":"borderTopWidth"]=hn(i.thickness)),V});return tn(()=>{const V=Le("hr",{class:[{"v-divider":!0,"v-divider--inset":i.inset,"v-divider--vertical":i.vertical},_.value,w.value,i.class],style:[l.value,v.value,{"--v-border-opacity":i.opacity},i.style],"aria-orientation":!c.role||c.role==="separator"?i.vertical?"vertical":"horizontal":void 0,role:`${c.role||"separator"}`},null);return d.default?Le("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":i.vertical,"v-divider__wrapper--inset":i.inset}]},[V,Le("div",{class:"v-divider__content"},[d.default()]),V]):V}),{}}}),b2=ui({items:Array,returnObject:Boolean},"VListChildren"),Wv=Ni()({name:"VListChildren",props:b2(),setup(i,s){let{slots:c}=s;return Ov(),()=>{var d,_;return((d=c.default)==null?void 0:d.call(c))??((_=i.items)==null?void 0:_.map(w=>{var G,me;let{children:v,props:l,type:V,raw:W}=w;if(V==="divider")return((G=c.divider)==null?void 0:G.call(c,{props:l}))??Le(I2,l,null);if(V==="subheader")return((me=c.subheader)==null?void 0:me.call(c,{props:l}))??Le(Zv,l,null);const H={subtitle:c.subtitle?pe=>{var Ae;return(Ae=c.subtitle)==null?void 0:Ae.call(c,{...pe,item:W})}:void 0,prepend:c.prepend?pe=>{var Ae;return(Ae=c.prepend)==null?void 0:Ae.call(c,{...pe,item:W})}:void 0,append:c.append?pe=>{var Ae;return(Ae=c.append)==null?void 0:Ae.call(c,{...pe,item:W})}:void 0,title:c.title?pe=>{var Ae;return(Ae=c.title)==null?void 0:Ae.call(c,{...pe,item:W})}:void 0},q=Wy.filterProps(l);return v?Le(Wy,Wr({value:l==null?void 0:l.value},q),{activator:pe=>{let{props:Ae}=pe;const Ye={...l,...Ae,value:i.returnObject?W:l.value};return c.header?c.header({props:Ye}):Le(hg,Ye,H)},default:()=>Le(Wv,{items:v,returnObject:i.returnObject},c)}):c.item?c.item({props:l}):Le(hg,Wr(l,{value:i.returnObject?W:l.value}),H)}))}}}),x2=ui({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:mA}},"list-items");function w2(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"}function C2(i,s){const c=Vh(s,i.itemType,"item"),d=w2(s)?s:Vh(s,i.itemTitle),_=Vh(s,i.itemValue,void 0),w=Vh(s,i.itemChildren),v=i.itemProps===!0?Rg(s,["children"]):Vh(s,i.itemProps),l={title:d,value:_,...v};return{type:c,title:l.title,value:l.value,props:l,children:c==="item"&&w?Xv(i,w):void 0,raw:s}}function Xv(i,s){const c=[];for(const d of s)c.push(C2(i,d));return c}function B2(i){return{items:We(()=>Xv(i,i.items))}}const E2=ui({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:ir,collapseIcon:ir,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":hl(),"onClick:select":hl(),"onUpdate:opened":hl(),...n2({selectStrategy:"single-leaf",openStrategy:"list"}),...gc(),...cn(),...pl(),...dc(),...cu(),itemType:{type:String,default:"type"},...x2(),...wo(),...rr(),...ea(),...uh({variant:"text"})},"VList"),Q2=Ni()({name:"VList",props:E2(),emits:{"update:selected":i=>!0,"update:activated":i=>!0,"update:opened":i=>!0,"click:open":i=>!0,"click:activate":i=>!0,"click:select":i=>!0},setup(i,s){let{slots:c}=s;const{items:d}=B2(i),{themeClasses:_}=Da(i),{backgroundColorClasses:w,backgroundColorStyles:v}=rc(Li(i,"bgColor")),{borderClasses:l}=pc(i),{densityClasses:V}=Ac(i),{dimensionStyles:W}=fc(i),{elevationClasses:H}=uu(i),{roundedClasses:q}=Co(i),{children:G,open:me,parents:pe,select:Ae,getPath:Ye}=r2(i),st=We(()=>i.lines?`v-list--${i.lines}-line`:void 0),ut=Li(i,"activeColor"),ot=Li(i,"baseColor"),ft=Li(i,"color");Ov(),oh({VListGroup:{activeColor:ut,baseColor:ot,color:ft,expandIcon:Li(i,"expandIcon"),collapseIcon:Li(i,"collapseIcon")},VListItem:{activeClass:Li(i,"activeClass"),activeColor:ut,baseColor:ot,color:ft,density:Li(i,"density"),disabled:Li(i,"disabled"),lines:Li(i,"lines"),nav:Li(i,"nav"),slim:Li(i,"slim"),variant:Li(i,"variant")}});const Pt=An(!1),Rt=ln();function Nt(yt){Pt.value=!0}function Xt(yt){Pt.value=!1}function Et(yt){var Jt;!Pt.value&&!(yt.relatedTarget&&((Jt=Rt.value)!=null&&Jt.contains(yt.relatedTarget)))&&tt()}function zt(yt){const Jt=yt.target;if(!(!Rt.value||["INPUT","TEXTAREA"].includes(Jt.tagName))){if(yt.key==="ArrowDown")tt("next");else if(yt.key==="ArrowUp")tt("prev");else if(yt.key==="Home")tt("first");else if(yt.key==="End")tt("last");else return;yt.preventDefault()}}function mt(yt){Pt.value=!0}function tt(yt){if(Rt.value)return k_(Rt.value,yt)}return tn(()=>Le(i.tag,{ref:Rt,class:["v-list",{"v-list--disabled":i.disabled,"v-list--nav":i.nav,"v-list--slim":i.slim},_.value,w.value,l.value,V.value,H.value,st.value,q.value,i.class],style:[v.value,W.value,i.style],tabindex:i.disabled||Pt.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:Nt,onFocusout:Xt,onFocus:Et,onKeydown:zt,onMousedown:mt},{default:()=>[Le(Wv,{items:d.value,returnObject:i.returnObject},c)]})),{open:me,select:Ae,focus:tt,children:G,parents:pe,getPath:Ye}}}),S2=ui({start:Boolean,end:Boolean,...cn(),...rr()},"VListItemAction"),k2=Ni()({name:"VListItemAction",props:S2(),setup(i,s){let{slots:c}=s;return tn(()=>Le(i.tag,{class:["v-list-item-action",{"v-list-item-action--start":i.start,"v-list-item-action--end":i.end},i.class],style:i.style},c)),{}}}),D2=["id"],M2=dA({__name:"Map",props:{tutorial:Object},setup(i){const s=i,c=ln([]),d=ln(null),_=We(()=>"map_"+AE());Dn(c,()=>{var G,me;(me=(G=s.tutorial)==null?void 0:G.maps)==null||me.forEach(pe=>{var st;const Ae=W(pe.layer),Ye=((st=c.value)==null?void 0:st.findIndex(ut=>ut===Ae))??-1;V(Ae,Ye>=0)})}),fl(async()=>{var me,pe,Ae,Ye,st,ut,ot,ft,Pt,Rt,Nt,Xt,Et,zt,mt,tt,yt,Jt;var G=void 0;if((pe=(me=s.tutorial)==null?void 0:me.maps)==null||pe.forEach(yi=>{yi.protocol==="pmtiles"?G=w(yi):yi.protocol==="cog"&&qA.addProtocol("cog",oE.cogProtocol)}),d.value=new qA.Map({container:_.value,style:(Ye=(Ae=s.tutorial)==null?void 0:Ae.basemap)==null?void 0:Ye.style}),(st=d.value)==null||st.addControl(new qA.NavigationControl,"top-right"),(ft=d.value)==null||ft.setZoom(((ot=(ut=s.tutorial)==null?void 0:ut.basemap)==null?void 0:ot.zoom)??0),(Et=d.value)==null||Et.setCenter([((Rt=(Pt=s.tutorial)==null?void 0:Pt.basemap)==null?void 0:Rt.centerLng)??0,((Xt=(Nt=s.tutorial)==null?void 0:Nt.basemap)==null?void 0:Xt.centerLat)??0]),G!==void 0){const yi=await G.getHeader();(zt=d.value)==null||zt.setZoom(yi.maxZoom-3),(mt=d.value)==null||mt.setCenter([yi.centerLon,yi.centerLat])}(yt=(tt=s.tutorial)==null?void 0:tt.maps)==null||yt.forEach(yi=>{var pi;(pi=c.value)==null||pi.push(W(yi.layer))}),(Jt=d.value)==null||Jt.on("load",()=>{var yi;(yi=s.tutorial)==null||yi.maps.forEach(pi=>{pi.protocol==="pmtiles"?v(pi):pi.protocol==="cog"&&l(pi)})})});function w(G){const me=new ZB;qA.addProtocol("pmtiles",me.tile);const pe=(G==null?void 0:G.protocolData)??"",Ae=new rg(pe);return me.add(Ae),Ae}function v(G){var Ae,Ye,st,ut,ot;const me=(G==null?void 0:G.source.name)??"";(Ae=d.value)==null||Ae.addSource(me,{type:"vector",url:G==null?void 0:G.source.url});const pe=(G==null?void 0:G.layer.id)??"";(ot=d.value)==null||ot.addLayer({id:pe,source:me,"source-layer":pe,type:"fill",paint:{"fill-color":(Ye=G==null?void 0:G.layer.paint)==null?void 0:Ye.fillColor,"fill-outline-color":(st=G==null?void 0:G.layer.paint)==null?void 0:st.fillOutlineColor,"fill-opacity":(ut=G==null?void 0:G.layer.paint)==null?void 0:ut.fillOpacity}}),V(pe,!0)}function l(G){var Ae,Ye,st;const me=(G==null?void 0:G.source.name)??"";(Ae=d.value)==null||Ae.addSource(me,{type:"raster",url:G==null?void 0:G.source.url,tileSize:G==null?void 0:G.source.tileSize,minzoom:G==null?void 0:G.source.minzoom,maxzoom:G==null?void 0:G.source.maxzoom});const pe=(G==null?void 0:G.layer.id)??"";(st=d.value)==null||st.addLayer({id:pe,source:me,type:"raster",paint:{"raster-opacity":(Ye=G==null?void 0:G.layer.paint)==null?void 0:Ye.rasterOpacity}}),V(pe,!0)}function V(G,me){var pe;if(d.value&&d.value.getLayer(G)){const Ae=me?"visible":"none";(pe=d.value)==null||pe.setLayoutProperty(G,"visibility",Ae)}}function W(G){return(G==null?void 0:G.id)??"undefined"}function H(G){return(G==null?void 0:G.screenName)??"undefined"}function q(G){var Ae;const me=W(G);return(((Ae=c.value)==null?void 0:Ae.findIndex(Ye=>Ye===me))??-1)>=0?"mdi-layers":"mdi-layers-off"}return(G,me)=>(nc(),rA(Jg,{fluid:""},{default:er(()=>[Le(Uv,null,{default:er(()=>[Le(lg,{cols:"12",lg:"10",md:"10","no-gutters":""},{default:er(()=>[ih("div",{id:_.value,class:"map-container"},null,8,D2)]),_:1}),Le(lg,{cols:"12",lg:"2",md:"2","no-gutters":""},{default:er(()=>[Le(Q2,{lines:"one",density:"compact",selected:c.value,"onUpdate:selected":me[0]||(me[0]=pe=>c.value=pe),"select-strategy":"leaf",class:"mt-n4"},{default:er(()=>{var pe;return[Le(Zv,null,{default:er(()=>me[1]||(me[1]=[id("Layers")])),_:1}),(nc(!0),Jf(tr,null,Y0((pe=i.tutorial)==null?void 0:pe.maps,(Ae,Ye)=>(nc(),rA(hg,{key:Ye,title:H(Ae),value:W(Ae.layer),"append-icon":q(Ae.layer)},{prepend:er(({isSelected:st})=>[Le(k2,{start:""},{default:er(()=>[Le(BE,{"model-value":st,color:"blue"},null,8,["model-value"])]),_:2},1024)]),_:2},1032,["title","value","append-icon"]))),128))]}),_:1},8,["selected"])]),_:1})]),_:1})]),_:1}))}}),eI=(i,s)=>{const c=i.__vccOpts||i;for(const[d,_]of s)c[d]=_;return c},T2=eI(M2,[["__scopeId","data-v-b08da794"]]),P2=Ni()({name:"VCardActions",props:cn(),setup(i,s){let{slots:c}=s;return oh({VBtn:{slim:!0,variant:"text"}}),tn(()=>{var d;return Le("div",{class:["v-card-actions",i.class],style:i.style},[(d=c.default)==null?void 0:d.call(c)])}),{}}}),R2=ui({opacity:[Number,String],...cn(),...rr()},"VCardSubtitle"),tI=Ni()({name:"VCardSubtitle",props:R2(),setup(i,s){let{slots:c}=s;return tn(()=>Le(i.tag,{class:["v-card-subtitle",i.class],style:[{"--v-card-subtitle-opacity":i.opacity},i.style]},c)),{}}}),iI=zg("v-card-title"),L2=ui({appendAvatar:String,appendIcon:ir,prependAvatar:String,prependIcon:ir,subtitle:[String,Number],title:[String,Number],...cn(),...pl()},"VCardItem"),F2=Ni()({name:"VCardItem",props:L2(),setup(i,s){let{slots:c}=s;return tn(()=>{var W;const d=!!(i.prependAvatar||i.prependIcon),_=!!(d||c.prepend),w=!!(i.appendAvatar||i.appendIcon),v=!!(w||c.append),l=!!(i.title!=null||c.title),V=!!(i.subtitle!=null||c.subtitle);return Le("div",{class:["v-card-item",i.class],style:i.style},[_&&Le("div",{key:"prepend",class:"v-card-item__prepend"},[c.prepend?Le(Sa,{key:"prepend-defaults",disabled:!d,defaults:{VAvatar:{density:i.density,image:i.prependAvatar},VIcon:{density:i.density,icon:i.prependIcon}}},c.prepend):Le(tr,null,[i.prependAvatar&&Le(ah,{key:"prepend-avatar",density:i.density,image:i.prependAvatar},null),i.prependIcon&&Le(Os,{key:"prepend-icon",density:i.density,icon:i.prependIcon},null)])]),Le("div",{class:"v-card-item__content"},[l&&Le(iI,{key:"title"},{default:()=>{var H;return[((H=c.title)==null?void 0:H.call(c))??i.title]}}),V&&Le(tI,{key:"subtitle"},{default:()=>{var H;return[((H=c.subtitle)==null?void 0:H.call(c))??i.subtitle]}}),(W=c.default)==null?void 0:W.call(c)]),v&&Le("div",{key:"append",class:"v-card-item__append"},[c.append?Le(Sa,{key:"append-defaults",disabled:!w,defaults:{VAvatar:{density:i.density,image:i.appendAvatar},VIcon:{density:i.density,icon:i.appendIcon}}},c.append):Le(tr,null,[i.appendIcon&&Le(Os,{key:"append-icon",density:i.density,icon:i.appendIcon},null),i.appendAvatar&&Le(ah,{key:"append-avatar",density:i.density,image:i.appendAvatar},null)])])])}),{}}}),z2=ui({opacity:[Number,String],...cn(),...rr()},"VCardText"),nI=Ni()({name:"VCardText",props:z2(),setup(i,s){let{slots:c}=s;return tn(()=>Le(i.tag,{class:["v-card-text",i.class],style:[{"--v-card-text-opacity":i.opacity},i.style]},c)),{}}});function rI(i,s){const c=ln(),d=An(!1);if(Pg){const _=new IntersectionObserver(w=>{d.value=!!w.find(v=>v.isIntersecting)},s);ys(()=>{_.disconnect()}),Dn(c,(w,v)=>{v&&(_.unobserve(v),d.value=!1),w&&_.observe(w)},{flush:"post"})}return{intersectionRef:c,isIntersecting:d}}const e0={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},ip=ui({location:String},"location");function np(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2?arguments[2]:void 0;const{isRtl:d}=ch();return{locationStyles:We(()=>{if(!i.location)return{};const{side:w,align:v}=Uw(i.location.split(" ").length>1?i.location:`${i.location} center`,d.value);function l(W){return c?c(W):0}const V={};return w!=="center"&&(s?V[e0[w]]=`calc(100% - ${l(w)}px)`:V[w]=0),v!=="center"?s?V[e0[v]]=`calc(100% - ${l(v)}px)`:V[v]=0:(w==="center"?V.top=V.left="50%":V[{top:"left",bottom:"left",left:"top",right:"top"}[w]]="50%",V.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[w]),V})}}const G2=ui({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...cn(),...ip({location:"top"}),...wo(),...rr(),...ea()},"VProgressLinear"),N2=Ni()({name:"VProgressLinear",props:G2(),emits:{"update:modelValue":i=>!0},setup(i,s){var mt;let{slots:c}=s;const d=pa(i,"modelValue"),{isRtl:_,rtlClasses:w}=ch(),{themeClasses:v}=Da(i),{locationStyles:l}=np(i),{textColorClasses:V,textColorStyles:W}=sc(i,"color"),{backgroundColorClasses:H,backgroundColorStyles:q}=rc(We(()=>i.bgColor||i.color)),{backgroundColorClasses:G,backgroundColorStyles:me}=rc(We(()=>i.bufferColor||i.bgColor||i.color)),{backgroundColorClasses:pe,backgroundColorStyles:Ae}=rc(i,"color"),{roundedClasses:Ye}=Co(i),{intersectionRef:st,isIntersecting:ut}=rI(),ot=We(()=>parseFloat(i.max)),ft=We(()=>parseFloat(i.height)),Pt=We(()=>sd(parseFloat(i.bufferValue)/ot.value*100,0,100)),Rt=We(()=>sd(parseFloat(d.value)/ot.value*100,0,100)),Nt=We(()=>_.value!==i.reverse),Xt=We(()=>i.indeterminate?"fade-transition":"slide-x-transition"),Et=ga&&((mt=window.matchMedia)==null?void 0:mt.call(window,"(forced-colors: active)").matches);function zt(tt){if(!st.value)return;const{left:yt,right:Jt,width:yi}=st.value.getBoundingClientRect(),pi=Nt.value?yi-tt.clientX+(Jt-yi):tt.clientX-yt;d.value=Math.round(pi/yi*ot.value)}return tn(()=>Le(i.tag,{ref:st,class:["v-progress-linear",{"v-progress-linear--absolute":i.absolute,"v-progress-linear--active":i.active&&ut.value,"v-progress-linear--reverse":Nt.value,"v-progress-linear--rounded":i.rounded,"v-progress-linear--rounded-bar":i.roundedBar,"v-progress-linear--striped":i.striped},Ye.value,v.value,w.value,i.class],style:[{bottom:i.location==="bottom"?0:void 0,top:i.location==="top"?0:void 0,height:i.active?hn(ft.value):0,"--v-progress-linear-height":hn(ft.value),...i.absolute?l.value:{}},i.style],role:"progressbar","aria-hidden":i.active?"false":"true","aria-valuemin":"0","aria-valuemax":i.max,"aria-valuenow":i.indeterminate?void 0:Rt.value,onClick:i.clickable&&zt},{default:()=>[i.stream&&Le("div",{key:"stream",class:["v-progress-linear__stream",V.value],style:{...W.value,[Nt.value?"left":"right"]:hn(-ft.value),borderTop:`${hn(ft.value/2)} dotted`,opacity:parseFloat(i.bufferOpacity),top:`calc(50% - ${hn(ft.value/4)})`,width:hn(100-Pt.value,"%"),"--v-progress-linear-stream-to":hn(ft.value*(Nt.value?1:-1))}},null),Le("div",{class:["v-progress-linear__background",Et?void 0:H.value],style:[q.value,{opacity:parseFloat(i.bgOpacity),width:i.stream?0:void 0}]},null),Le("div",{class:["v-progress-linear__buffer",Et?void 0:G.value],style:[me.value,{opacity:parseFloat(i.bufferOpacity),width:hn(Pt.value,"%")}]},null),Le(Cd,{name:Xt.value},{default:()=>[i.indeterminate?Le("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(tt=>Le("div",{key:tt,class:["v-progress-linear__indeterminate",tt,Et?void 0:pe.value],style:Ae.value},null))]):Le("div",{class:["v-progress-linear__determinate",Et?void 0:pe.value],style:[Ae.value,{width:hn(Rt.value,"%")}]},null)]}),c.default&&Le("div",{class:"v-progress-linear__content"},[c.default({value:Rt.value,buffer:Pt.value})])]})),{}}}),aI=ui({loading:[Boolean,String]},"loader");function rp(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();return{loaderClasses:We(()=>({[`${s}--loading`]:i.loading}))}}function sI(i,s){var d;let{slots:c}=s;return Le("div",{class:`${i.name}__loader`},[((d=c.default)==null?void 0:d.call(c,{color:i.color,isActive:i.active}))||Le(N2,{absolute:i.absolute,active:i.active,color:i.color,height:"2",indeterminate:!0},null)])}const U2=["static","relative","fixed","absolute","sticky"],oI=ui({position:{type:String,validator:i=>U2.includes(i)}},"position");function lI(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gl();return{positionClasses:We(()=>i.position?`${s}--${i.position}`:void 0)}}const O2=ui({appendAvatar:String,appendIcon:ir,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ir,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...gc(),...cn(),...pl(),...dc(),...cu(),...aI(),...ip(),...oI(),...wo(),...tp(),...rr(),...ea(),...uh({variant:"elevated"})},"VCard"),V2=Ni()({name:"VCard",directives:{Ripple:Md},props:O2(),setup(i,s){let{attrs:c,slots:d}=s;const{themeClasses:_}=Da(i),{borderClasses:w}=pc(i),{colorClasses:v,colorStyles:l,variantClasses:V}=Pd(i),{densityClasses:W}=Ac(i),{dimensionStyles:H}=fc(i),{elevationClasses:q}=uu(i),{loaderClasses:G}=rp(i),{locationStyles:me}=np(i),{positionClasses:pe}=lI(i),{roundedClasses:Ae}=Co(i),Ye=ep(i,c),st=We(()=>i.link!==!1&&Ye.isLink.value),ut=We(()=>!i.disabled&&i.link!==!1&&(i.link||Ye.isClickable.value));return tn(()=>{const ot=st.value?"a":i.tag,ft=!!(d.title||i.title!=null),Pt=!!(d.subtitle||i.subtitle!=null),Rt=ft||Pt,Nt=!!(d.append||i.appendAvatar||i.appendIcon),Xt=!!(d.prepend||i.prependAvatar||i.prependIcon),Et=!!(d.image||i.image),zt=Rt||Xt||Nt,mt=!!(d.text||i.text!=null);return su(Le(ot,Wr({class:["v-card",{"v-card--disabled":i.disabled,"v-card--flat":i.flat,"v-card--hover":i.hover&&!(i.disabled||i.flat),"v-card--link":ut.value},_.value,w.value,v.value,W.value,q.value,G.value,pe.value,Ae.value,V.value,i.class],style:[l.value,H.value,me.value,i.style],onClick:ut.value&&Ye.navigate,tabindex:i.disabled?-1:void 0},Ye.linkProps),{default:()=>{var tt;return[Et&&Le("div",{key:"image",class:"v-card__image"},[d.image?Le(Sa,{key:"image-defaults",disabled:!i.image,defaults:{VImg:{cover:!0,src:i.image}}},d.image):Le(Xg,{key:"image-img",cover:!0,src:i.image},null)]),Le(sI,{name:"v-card",active:!!i.loading,color:typeof i.loading=="boolean"?void 0:i.loading},{default:d.loader}),zt&&Le(F2,{key:"item",prependAvatar:i.prependAvatar,prependIcon:i.prependIcon,title:i.title,subtitle:i.subtitle,appendAvatar:i.appendAvatar,appendIcon:i.appendIcon},{default:d.item,prepend:d.prepend,title:d.title,subtitle:d.subtitle,append:d.append}),mt&&Le(nI,{key:"text"},{default:()=>{var yt;return[((yt=d.text)==null?void 0:yt.call(d))??i.text]}}),(tt=d.default)==null?void 0:tt.call(d),d.actions&&Le(P2,null,{default:d.actions}),Td(ut.value,"v-card")]}}),[[bd("ripple"),ut.value&&i.ripple]])}),{}}}),q2=dA({__name:"TutorialCard",props:{tutorial:Object},setup(i){return(s,c)=>{const d=T2;return nc(),rA(Jg,{fluid:""},{default:er(()=>[Le(V2,{class:"mx-auto",width:"100%"},{default:er(()=>[Le(iI,null,{default:er(()=>{var _;return[id(YA((_=i.tutorial)==null?void 0:_.title),1)]}),_:1}),Le(tI,null,{default:er(()=>{var _;return[id(YA((_=i.tutorial)==null?void 0:_.subtitle),1)]}),_:1}),Le(nI,null,{default:er(()=>[Le(d,{tutorial:i.tutorial},null,8,["tutorial"])]),_:1})]),_:1})]),_:1})}}}),H2=ui({text:String,...cn(),...rr()},"VToolbarTitle"),j2=Ni()({name:"VToolbarTitle",props:H2(),setup(i,s){let{slots:c}=s;return tn(()=>{const d=!!(c.default||c.text||i.text);return Le(i.tag,{class:["v-toolbar-title",i.class],style:i.style},{default:()=>{var _;return[d&&Le("div",{class:"v-toolbar-title__placeholder"},[c.text?c.text():i.text,(_=c.default)==null?void 0:_.call(c)])]}})}),{}}}),J2=[null,"prominent","default","comfortable","compact"],cI=ui({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:i=>J2.includes(i)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...gc(),...cn(),...cu(),...wo(),...rr({tag:"header"}),...ea()},"VToolbar"),t0=Ni()({name:"VToolbar",props:cI(),setup(i,s){var me;let{slots:c}=s;const{backgroundColorClasses:d,backgroundColorStyles:_}=rc(Li(i,"color")),{borderClasses:w}=pc(i),{elevationClasses:v}=uu(i),{roundedClasses:l}=Co(i),{themeClasses:V}=Da(i),{rtlClasses:W}=ch(),H=An(!!(i.extended||(me=c.extension)!=null&&me.call(c))),q=We(()=>parseInt(Number(i.height)+(i.density==="prominent"?Number(i.height):0)-(i.density==="comfortable"?8:0)-(i.density==="compact"?16:0),10)),G=We(()=>H.value?parseInt(Number(i.extensionHeight)+(i.density==="prominent"?Number(i.extensionHeight):0)-(i.density==="comfortable"?4:0)-(i.density==="compact"?8:0),10):0);return oh({VBtn:{variant:"text"}}),tn(()=>{var st;const pe=!!(i.title||c.title),Ae=!!(c.image||i.image),Ye=(st=c.extension)==null?void 0:st.call(c);return H.value=!!(i.extended||Ye),Le(i.tag,{class:["v-toolbar",{"v-toolbar--absolute":i.absolute,"v-toolbar--collapse":i.collapse,"v-toolbar--flat":i.flat,"v-toolbar--floating":i.floating,[`v-toolbar--density-${i.density}`]:!0},d.value,w.value,v.value,l.value,V.value,W.value,i.class],style:[_.value,i.style]},{default:()=>[Ae&&Le("div",{key:"image",class:"v-toolbar__image"},[c.image?Le(Sa,{key:"image-defaults",disabled:!i.image,defaults:{VImg:{cover:!0,src:i.image}}},c.image):Le(Xg,{key:"image-img",cover:!0,src:i.image},null)]),Le(Sa,{defaults:{VTabs:{height:hn(q.value)}}},{default:()=>{var ut,ot,ft;return[Le("div",{class:"v-toolbar__content",style:{height:hn(q.value)}},[c.prepend&&Le("div",{class:"v-toolbar__prepend"},[(ut=c.prepend)==null?void 0:ut.call(c)]),pe&&Le(j2,{key:"title",text:i.title},{text:c.title}),(ot=c.default)==null?void 0:ot.call(c),c.append&&Le("div",{class:"v-toolbar__append"},[(ft=c.append)==null?void 0:ft.call(c)])])]}}),Le(Sa,{defaults:{VTabs:{height:hn(G.value)}}},{default:()=>[Le(Qv,null,{default:()=>[H.value&&Le("div",{class:"v-toolbar__extension",style:{height:hn(G.value)}},[Ye])]})]})]})}),{contentHeight:q,extensionHeight:G}}}),Y2=ui({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function K2(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:c}=s;let d=0,_=0;const w=ln(null),v=An(0),l=An(0),V=An(0),W=An(!1),H=An(!1),q=We(()=>Number(i.scrollThreshold)),G=We(()=>sd((q.value-v.value)/q.value||0)),me=()=>{const pe=w.value;if(!pe||c&&!c.value)return;d=v.value,v.value="window"in pe?pe.pageYOffset:pe.scrollTop;const Ae=pe instanceof Window?document.documentElement.scrollHeight:pe.scrollHeight;if(_!==Ae){_=Ae;return}H.value=v.value<d,V.value=Math.abs(v.value-q.value)};return Dn(H,()=>{l.value=l.value||v.value}),Dn(W,()=>{l.value=0}),fl(()=>{Dn(()=>i.scrollTarget,pe=>{var Ye;const Ae=pe?document.querySelector(pe):window;Ae&&Ae!==w.value&&((Ye=w.value)==null||Ye.removeEventListener("scroll",me),w.value=Ae,w.value.addEventListener("scroll",me,{passive:!0}))},{immediate:!0})}),ys(()=>{var pe;(pe=w.value)==null||pe.removeEventListener("scroll",me)}),c&&Dn(c,me,{immediate:!0}),{scrollThreshold:q,currentScroll:v,currentThreshold:V,isScrollActive:W,scrollRatio:G,isScrollingUp:H,savedScroll:l}}const $2=ui({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:i=>["top","bottom"].includes(i)},...cI(),...j_(),...Y2(),height:{type:[Number,String],default:64}},"VAppBar"),Z2=Ni()({name:"VAppBar",props:$2(),emits:{"update:modelValue":i=>!0},setup(i,s){let{slots:c}=s;const d=ln(),_=pa(i,"modelValue"),w=We(()=>{var ot;const ut=new Set(((ot=i.scrollBehavior)==null?void 0:ot.split(" "))??[]);return{hide:ut.has("hide"),fullyHide:ut.has("fully-hide"),inverted:ut.has("inverted"),collapse:ut.has("collapse"),elevate:ut.has("elevate"),fadeImage:ut.has("fade-image")}}),v=We(()=>{const ut=w.value;return ut.hide||ut.fullyHide||ut.inverted||ut.collapse||ut.elevate||ut.fadeImage||!_.value}),{currentScroll:l,scrollThreshold:V,isScrollingUp:W,scrollRatio:H}=K2(i,{canScroll:v}),q=We(()=>w.value.hide||w.value.fullyHide),G=We(()=>i.collapse||w.value.collapse&&(w.value.inverted?H.value>0:H.value===0)),me=We(()=>i.flat||w.value.fullyHide&&!_.value||w.value.elevate&&(w.value.inverted?l.value>0:l.value===0)),pe=We(()=>w.value.fadeImage?w.value.inverted?1-H.value:H.value:void 0),Ae=We(()=>{var ft,Pt;if(w.value.hide&&w.value.inverted)return 0;const ut=((ft=d.value)==null?void 0:ft.contentHeight)??0,ot=((Pt=d.value)==null?void 0:Pt.extensionHeight)??0;return q.value?l.value<V.value||w.value.fullyHide?ut+ot:ut:ut+ot});sA(We(()=>!!i.scrollBehavior),()=>{uc(()=>{q.value?w.value.inverted?_.value=l.value>V.value:_.value=W.value||l.value<V.value:_.value=!0})});const{ssrBootStyles:Ye}=Wg(),{layoutItemStyles:st}=J_({id:i.name,order:We(()=>parseInt(i.order,10)),position:Li(i,"location"),layoutSize:Ae,elementSize:An(void 0),active:_,absolute:Li(i,"absolute")});return tn(()=>{const ut=t0.filterProps(i);return Le(t0,Wr({ref:d,class:["v-app-bar",{"v-app-bar--bottom":i.location==="bottom"},i.class],style:[{...st.value,"--v-toolbar-image-opacity":pe.value,height:void 0,...Ye.value},i.style]},ut,{collapse:G.value,flat:me.value}),c)}),{}}}),uI=ui({baseColor:String,divided:Boolean,...gc(),...cn(),...pl(),...cu(),...wo(),...rr(),...ea(),...uh()},"VBtnGroup"),i0=Ni()({name:"VBtnGroup",props:uI(),setup(i,s){let{slots:c}=s;const{themeClasses:d}=Da(i),{densityClasses:_}=Ac(i),{borderClasses:w}=pc(i),{elevationClasses:v}=uu(i),{roundedClasses:l}=Co(i);oh({VBtn:{height:"auto",baseColor:Li(i,"baseColor"),color:Li(i,"color"),density:Li(i,"density"),flat:!0,variant:Li(i,"variant")}}),tn(()=>Le(i.tag,{class:["v-btn-group",{"v-btn-group--divided":i.divided},d.value,w.value,_.value,v.value,l.value,i.class],style:i.style},c))}}),W2=ui({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),X2=ui({value:null,disabled:Boolean,selectedClass:String},"group-item");function eQ(i,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const d=Xr("useGroupItem");if(!d)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const _=xo();es(Symbol.for(`${s.description}:id`),_);const w=hr(s,null);if(!w){if(!c)return w;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${s.description}`)}const v=Li(i,"value"),l=We(()=>!!(w.disabled.value||i.disabled));w.register({id:_,value:v,disabled:l},d),ys(()=>{w.unregister(_)});const V=We(()=>w.isSelected(_)),W=We(()=>w.items.value[0].id===_),H=We(()=>w.items.value[w.items.value.length-1].id===_),q=We(()=>V.value&&[w.selectedClass.value,i.selectedClass]);return Dn(V,G=>{d.emit("group:selected",{value:G})},{flush:"sync"}),{id:_,isSelected:V,isFirst:W,isLast:H,toggle:()=>w.select(_,!V.value),select:G=>w.select(_,G),selectedClass:q,value:v,disabled:l,group:w}}function tQ(i,s){let c=!1;const d=fa([]),_=pa(i,"modelValue",[],G=>G==null?[]:hI(d,bo(G)),G=>{const me=nQ(d,G);return i.multiple?me:me[0]}),w=Xr("useGroup");function v(G,me){const pe=G,Ae=Symbol.for(`${s.description}:id`),st=Yu(Ae,w==null?void 0:w.vnode).indexOf(me);_o(pe.value)==null&&(pe.value=st,pe.useIndexAsValue=!0),st>-1?d.splice(st,0,pe):d.push(pe)}function l(G){if(c)return;V();const me=d.findIndex(pe=>pe.id===G);d.splice(me,1)}function V(){const G=d.find(me=>!me.disabled);G&&i.mandatory==="force"&&!_.value.length&&(_.value=[G.id])}fl(()=>{V()}),ys(()=>{c=!0}),Qg(()=>{for(let G=0;G<d.length;G++)d[G].useIndexAsValue&&(d[G].value=G)});function W(G,me){const pe=d.find(Ae=>Ae.id===G);if(!(me&&(pe!=null&&pe.disabled)))if(i.multiple){const Ae=_.value.slice(),Ye=Ae.findIndex(ut=>ut===G),st=~Ye;if(me=me??!st,st&&i.mandatory&&Ae.length<=1||!st&&i.max!=null&&Ae.length+1>i.max)return;Ye<0&&me?Ae.push(G):Ye>=0&&!me&&Ae.splice(Ye,1),_.value=Ae}else{const Ae=_.value.includes(G);if(i.mandatory&&Ae)return;_.value=me??!Ae?[G]:[]}}function H(G){if(i.multiple,_.value.length){const me=_.value[0],pe=d.findIndex(st=>st.id===me);let Ae=(pe+G)%d.length,Ye=d[Ae];for(;Ye.disabled&&Ae!==pe;)Ae=(Ae+G)%d.length,Ye=d[Ae];if(Ye.disabled)return;_.value=[d[Ae].id]}else{const me=d.find(pe=>!pe.disabled);me&&(_.value=[me.id])}}const q={register:v,unregister:l,selected:_,select:W,disabled:Li(i,"disabled"),prev:()=>H(d.length-1),next:()=>H(1),isSelected:G=>_.value.includes(G),selectedClass:We(()=>i.selectedClass),items:We(()=>d),getItemIndex:G=>iQ(d,G)};return es(s,q),q}function iQ(i,s){const c=hI(i,[s]);return c.length?i.findIndex(d=>d.id===c[0]):-1}function hI(i,s){const c=[];return s.forEach(d=>{const _=i.find(v=>mA(d,v.value)),w=i[d];(_==null?void 0:_.value)!=null?c.push(_.id):w!=null&&c.push(w.id)}),c}function nQ(i,s){const c=[];return s.forEach(d=>{const _=i.findIndex(w=>w.id===d);if(~_){const w=i[_];c.push(w.value!=null?w.value:_)}}),c}const AI=Symbol.for("vuetify:v-btn-toggle"),rQ=ui({...uI(),...W2()},"VBtnToggle");Ni()({name:"VBtnToggle",props:rQ(),emits:{"update:modelValue":i=>!0},setup(i,s){let{slots:c}=s;const{isSelected:d,next:_,prev:w,select:v,selected:l}=tQ(i,AI);return tn(()=>{const V=i0.filterProps(i);return Le(i0,Wr({class:["v-btn-toggle",i.class]},V,{style:i.style}),{default:()=>{var W;return[(W=c.default)==null?void 0:W.call(c,{isSelected:d,next:_,prev:w,select:v,selected:l})]}})}),{next:_,prev:w,select:v}}});const aQ=ui({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...cn(),...kd(),...rr({tag:"div"}),...ea()},"VProgressCircular"),dI=Ni()({name:"VProgressCircular",props:aQ(),setup(i,s){let{slots:c}=s;const d=20,_=2*Math.PI*d,w=ln(),{themeClasses:v}=Da(i),{sizeClasses:l,sizeStyles:V}=Dd(i),{textColorClasses:W,textColorStyles:H}=sc(Li(i,"color")),{textColorClasses:q,textColorStyles:G}=sc(Li(i,"bgColor")),{intersectionRef:me,isIntersecting:pe}=rI(),{resizeRef:Ae,contentRect:Ye}=Gg(),st=We(()=>Math.max(0,Math.min(100,parseFloat(i.modelValue)))),ut=We(()=>Number(i.width)),ot=We(()=>V.value?Number(i.size):Ye.value?Ye.value.width:Math.max(ut.value,32)),ft=We(()=>d/(1-ut.value/ot.value)*2),Pt=We(()=>ut.value/ot.value*ft.value),Rt=We(()=>hn((100-st.value)/100*_));return uc(()=>{me.value=w.value,Ae.value=w.value}),tn(()=>Le(i.tag,{ref:w,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!i.indeterminate,"v-progress-circular--visible":pe.value,"v-progress-circular--disable-shrink":i.indeterminate==="disable-shrink"},v.value,l.value,W.value,i.class],style:[V.value,H.value,i.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":i.indeterminate?void 0:st.value},{default:()=>[Le("svg",{style:{transform:`rotate(calc(-90deg + ${Number(i.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${ft.value} ${ft.value}`},[Le("circle",{class:["v-progress-circular__underlay",q.value],style:G.value,fill:"transparent",cx:"50%",cy:"50%",r:d,"stroke-width":Pt.value,"stroke-dasharray":_,"stroke-dashoffset":0},null),Le("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:d,"stroke-width":Pt.value,"stroke-dasharray":_,"stroke-dashoffset":Rt.value},null)]),c.default&&Le("div",{class:"v-progress-circular__content"},[c.default({value:st.value})])]})),{}}});function sQ(i,s){Dn(()=>{var c;return(c=i.isActive)==null?void 0:c.value},c=>{i.isLink.value&&c&&s&&sh(()=>{s(!0)})},{immediate:!0})}const oQ=ui({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:AI},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:ir,appendIcon:ir,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...gc(),...cn(),...pl(),...dc(),...cu(),...X2(),...aI(),...ip(),...oI(),...wo(),...tp(),...kd(),...rr({tag:"button"}),...ea(),...uh({variant:"elevated"})},"VBtn"),lQ=Ni()({name:"VBtn",props:oQ(),emits:{"group:selected":i=>!0},setup(i,s){let{attrs:c,slots:d}=s;const{themeClasses:_}=Da(i),{borderClasses:w}=pc(i),{densityClasses:v}=Ac(i),{dimensionStyles:l}=fc(i),{elevationClasses:V}=uu(i),{loaderClasses:W}=rp(i),{locationStyles:H}=np(i),{positionClasses:q}=lI(i),{roundedClasses:G}=Co(i),{sizeClasses:me,sizeStyles:pe}=Dd(i),Ae=eQ(i,i.symbol,!1),Ye=ep(i,c),st=We(()=>{var mt;return i.active!==void 0?i.active:Ye.isLink.value?(mt=Ye.isActive)==null?void 0:mt.value:Ae==null?void 0:Ae.isSelected.value}),ut=We(()=>st.value?i.activeColor??i.color:i.color),ot=We(()=>{var tt,yt;return{color:(Ae==null?void 0:Ae.isSelected.value)&&(!Ye.isLink.value||((tt=Ye.isActive)==null?void 0:tt.value))||!Ae||((yt=Ye.isActive)==null?void 0:yt.value)?ut.value??i.baseColor:i.baseColor,variant:i.variant}}),{colorClasses:ft,colorStyles:Pt,variantClasses:Rt}=Pd(ot),Nt=We(()=>(Ae==null?void 0:Ae.disabled.value)||i.disabled),Xt=We(()=>i.variant==="elevated"&&!(i.disabled||i.flat||i.border)),Et=We(()=>{if(!(i.value===void 0||typeof i.value=="symbol"))return Object(i.value)===i.value?JSON.stringify(i.value,null,0):i.value});function zt(mt){var tt;Nt.value||Ye.isLink.value&&(mt.metaKey||mt.ctrlKey||mt.shiftKey||mt.button!==0||c.target==="_blank")||((tt=Ye.navigate)==null||tt.call(Ye,mt),Ae==null||Ae.toggle())}return sQ(Ye,Ae==null?void 0:Ae.select),tn(()=>{const mt=Ye.isLink.value?"a":i.tag,tt=!!(i.prependIcon||d.prepend),yt=!!(i.appendIcon||d.append),Jt=!!(i.icon&&i.icon!==!0);return su(Le(mt,Wr({type:mt==="a"?void 0:"button",class:["v-btn",Ae==null?void 0:Ae.selectedClass.value,{"v-btn--active":st.value,"v-btn--block":i.block,"v-btn--disabled":Nt.value,"v-btn--elevated":Xt.value,"v-btn--flat":i.flat,"v-btn--icon":!!i.icon,"v-btn--loading":i.loading,"v-btn--readonly":i.readonly,"v-btn--slim":i.slim,"v-btn--stacked":i.stacked},_.value,w.value,ft.value,v.value,V.value,W.value,q.value,G.value,me.value,Rt.value,i.class],style:[Pt.value,l.value,H.value,pe.value,i.style],"aria-busy":i.loading?!0:void 0,disabled:Nt.value||void 0,tabindex:i.loading||i.readonly?-1:void 0,onClick:zt,value:Et.value},Ye.linkProps),{default:()=>{var yi;return[Td(!0,"v-btn"),!i.icon&&tt&&Le("span",{key:"prepend",class:"v-btn__prepend"},[d.prepend?Le(Sa,{key:"prepend-defaults",disabled:!i.prependIcon,defaults:{VIcon:{icon:i.prependIcon}}},d.prepend):Le(Os,{key:"prepend-icon",icon:i.prependIcon},null)]),Le("span",{class:"v-btn__content","data-no-activator":""},[!d.default&&Jt?Le(Os,{key:"content-icon",icon:i.icon},null):Le(Sa,{key:"content-defaults",disabled:!Jt,defaults:{VIcon:{icon:i.icon}}},{default:()=>{var pi;return[((pi=d.default)==null?void 0:pi.call(d))??i.text]}})]),!i.icon&&yt&&Le("span",{key:"append",class:"v-btn__append"},[d.append?Le(Sa,{key:"append-defaults",disabled:!i.appendIcon,defaults:{VIcon:{icon:i.appendIcon}}},d.append):Le(Os,{key:"append-icon",icon:i.appendIcon},null)]),!!i.loading&&Le("span",{key:"loader",class:"v-btn__loader"},[((yi=d.loader)==null?void 0:yi.call(d))??Le(dI,{color:typeof i.loading=="boolean"?void 0:i.loading,indeterminate:!0,width:"2"},null)])]}}),[[Md,!Nt.value&&i.ripple,"",{center:!!i.icon}]])}),{group:Ae}}}),cQ=ui({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...kv(),...jg()},"VSwitch"),uQ=Ni()({name:"VSwitch",inheritAttrs:!1,props:cQ(),emits:{"update:focused":i=>!0,"update:modelValue":i=>!0,"update:indeterminate":i=>!0},setup(i,s){let{attrs:c,slots:d}=s;const _=pa(i,"indeterminate"),w=pa(i,"modelValue"),{loaderClasses:v}=rp(i),{isFocused:l,focus:V,blur:W}=PE(i),H=ln(),q=ga&&window.matchMedia("(forced-colors: active)").matches,G=We(()=>typeof i.loading=="string"&&i.loading!==""?i.loading:i.color),me=xo(),pe=We(()=>i.id||`switch-${me}`);function Ae(){_.value&&(_.value=!1)}function Ye(st){var ut,ot;st.stopPropagation(),st.preventDefault(),(ot=(ut=H.value)==null?void 0:ut.input)==null||ot.click()}return tn(()=>{const[st,ut]=E_(c),ot=Ky.filterProps(i),ft=Ad.filterProps(i);return Le(Ky,Wr({class:["v-switch",{"v-switch--flat":i.flat},{"v-switch--inset":i.inset},{"v-switch--indeterminate":_.value},v.value,i.class]},st,ot,{modelValue:w.value,"onUpdate:modelValue":Pt=>w.value=Pt,id:pe.value,focused:l.value,style:i.style}),{...d,default:Pt=>{let{id:Rt,messagesId:Nt,isDisabled:Xt,isReadonly:Et,isValid:zt}=Pt;const mt={model:w,isValid:zt};return Le(Ad,Wr({ref:H},ft,{modelValue:w.value,"onUpdate:modelValue":[tt=>w.value=tt,Ae],id:Rt.value,"aria-describedby":Nt.value,type:"checkbox","aria-checked":_.value?"mixed":void 0,disabled:Xt.value,readonly:Et.value,onFocus:V,onBlur:W},ut),{...d,default:tt=>{let{backgroundColorClasses:yt,backgroundColorStyles:Jt}=tt;return Le("div",{class:["v-switch__track",q?void 0:yt.value],style:Jt.value,onClick:Ye},[d["track-true"]&&Le("div",{key:"prepend",class:"v-switch__track-true"},[d["track-true"](mt)]),d["track-false"]&&Le("div",{key:"append",class:"v-switch__track-false"},[d["track-false"](mt)])])},input:tt=>{let{inputNode:yt,icon:Jt,backgroundColorClasses:yi,backgroundColorStyles:pi}=tt;return Le(tr,null,[yt,Le("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":Jt||i.loading},i.inset||q?void 0:yi.value],style:i.inset?void 0:pi.value},[d.thumb?Le(Sa,{defaults:{VIcon:{icon:Jt,size:"x-small"}}},{default:()=>[d.thumb({...mt,icon:Jt})]}):Le(SE,null,{default:()=>[i.loading?Le(sI,{name:"v-switch",active:!0,color:zt.value===!1?void 0:G.value},{default:vi=>d.loader?d.loader(vi):Le(dI,{active:vi.isActive,color:vi.color,indeterminate:!0,size:"16",width:"2"},null)}):Jt&&Le(Os,{key:String(Jt),icon:Jt,size:"x-small"},null)]})])])}})}})}),{}}}),hQ=dA({__name:"AppBar",setup(i){const s=ln(!1),c=vB();return fl(()=>{window.matchMedia&&(s.value=!window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>{s.value=!d.matches}))}),uc(()=>{c.global.name.value=s.value?"light":"dark"}),(d,_)=>(nc(),rA(Z2,{class:"px-4 pb-2 pt-2",density:"compact",flat:""},{default:er(()=>[Le(ah,{size:"42",text:"GV",variant:"outlined"}),Le(cg),Le(lQ,{icon:"",href:"https://github.com/janmanuelwinkler/geoviz",target:"_blank"},{default:er(()=>[Le(ah,{size:"42",icon:"mdi-github"})]),_:1}),Le(uQ,{class:"mt-5 pl-3",modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=w=>s.value=w),"false-icon":"mdi-weather-sunny","true-icon":"mdi-weather-night"},null,8,["modelValue"])]),_:1}))}}),AQ=[{title:"The tutorials map",subtitle:"Use the checkboxes in the Layers list to toggle the the data associated with each tutorial",basemap:{style:"https://demotiles.maplibre.org/style.json",centerLng:8.52364435868436,centerLat:47.37771305255045,zoom:6},maps:[{screenName:"PM Tiles",protocol:"pmtiles",protocolData:"https://geovizbucket.s3.us-west-2.amazonaws.com/swiss_gemeinden.pmtiles",source:{name:"swiss_gemeinden",type:"vector",url:"pmtiles://https://geovizbucket.s3.us-west-2.amazonaws.com/swiss_gemeinden.pmtiles"},layer:{id:"gdf_gemeinden",source:"swiss_gemeinden",sourceLayer:"gdf_gemeinden",type:"fill",paint:{fillColor:"steelblue",fillOutlineColor:"white",fillOpacity:.5}}},{screenName:"CO GEOTiff",protocol:"cog",source:{name:"imageSource",type:"raster",url:"cog://https://geovizbucket.s3.us-west-2.amazonaws.com/output_cog_small_jpeg.tif",tileSize:512,minzoom:5,maxzoom:20},layer:{id:"imageLayer",source:"imageSource",sourceLayer:"",type:"raster",paint:{rasterOpacity:.9}}}]}],dQ=ui({...cn(),...IB({fullHeight:!0}),...ea()},"VApp"),fQ=Ni()({name:"VApp",props:dQ(),setup(i,s){let{slots:c}=s;const d=Da(i),{layoutClasses:_,getLayoutItem:w,items:v,layoutRef:l}=wB(i),{rtlClasses:V}=ch();return tn(()=>{var W;return Le("div",{ref:l,class:["v-application",d.themeClasses.value,_.value,V.value,i.class],style:[i.style]},[Le("div",{class:"v-application__wrap"},[(W=c.default)==null?void 0:W.call(c)])])}),{getLayoutItem:w,items:v,theme:d}}}),gQ=ui({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...gc(),...cn(),...cu(),...j_(),...wo(),...rr({tag:"footer"}),...ea()},"VFooter"),pQ=Ni()({name:"VFooter",props:gQ(),setup(i,s){let{slots:c}=s;const d=ln(),{themeClasses:_}=Da(i),{backgroundColorClasses:w,backgroundColorStyles:v}=rc(Li(i,"color")),{borderClasses:l}=pc(i),{elevationClasses:V}=uu(i),{roundedClasses:W}=Co(i),H=An(32),{resizeRef:q}=Gg(me=>{me.length&&(H.value=me[0].target.clientHeight)}),G=We(()=>i.height==="auto"?H.value:parseInt(i.height,10));return sA(()=>i.app,()=>{const me=J_({id:i.name,order:We(()=>parseInt(i.order,10)),position:We(()=>"bottom"),layoutSize:G,elementSize:We(()=>i.height==="auto"?void 0:G.value),active:We(()=>i.app),absolute:Li(i,"absolute")});uc(()=>{d.value=me.layoutItemStyles.value})}),tn(()=>Le(i.tag,{ref:q,class:["v-footer",_.value,w.value,l.value,V.value,W.value,i.class],style:[v.value,i.app?d.value:{height:hn(i.height)},i.style]},c)),{}}}),mQ=ui({scrollable:Boolean,...cn(),...dc(),...rr({tag:"main"})},"VMain"),yQ=Ni()({name:"VMain",props:mQ(),setup(i,s){let{slots:c}=s;const{dimensionStyles:d}=fc(i),{mainStyles:_}=bB(),{ssrBootStyles:w}=Wg();return tn(()=>Le(i.tag,{class:["v-main",{"v-main--scrollable":i.scrollable},i.class],style:[_.value,w.value,d.value,i.style]},{default:()=>{var v,l;return[i.scrollable?Le("div",{class:"v-main__scroller"},[(v=c.default)==null?void 0:v.call(c)]):(l=c.default)==null?void 0:l.call(c)]}})),{}}}),_Q={class:"footer-item"},vQ=dA({__name:"App",setup(i){const s=We(()=>new Date().getFullYear()),c=We(()=>{var d=JSON.stringify(AQ),_=JSON.parse(d);return _});return(d,_)=>{const w=hQ,v=q2;return nc(),rA(fQ,{id:"personal-page"},{default:er(()=>[Le(w,{class:"themed-appbar"}),Le(yQ,null,{default:er(()=>[Le(Jg,{fluid:""},{default:er(()=>[Le(Uv,null,{default:er(()=>[Le(cg),Le(lg,{cols:"12","no-gutters":""},{default:er(()=>[_[0]||(_[0]=ih("h1",null,"GeoViz",-1)),_[1]||(_[1]=ih("h2",null,"A collection of tutorials on how to display vector and raster Tiles on the web.",-1)),(nc(!0),Jf(tr,null,Y0(c.value,(l,V)=>(nc(),Jf("div",{key:V},[Le(v,{tutorial:l},null,8,["tutorial"])]))),128))]),_:1}),Le(cg)]),_:1})]),_:1})]),_:1}),Le(pQ,null,{default:er(()=>[ih("p",_Q,YA(s.value)+". MIT License. ",1)]),_:1})]),_:1})}}}),IQ=eI(vQ,[["__scopeId","data-v-b6f2f3ab"]]),fI=ww(IQ);fI.use(BB);fI.mount("#app");
